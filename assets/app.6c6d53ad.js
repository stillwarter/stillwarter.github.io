import{d as Zi,o as De,c as Re,C as Fh,b as _r,x as V,a as Hr,F as Dn,L as sl,M as al,_ as xs,u as x5,f as Mt,K as Pn,t as bt,h as Wl,a1 as Wm,a2 as R1e,a3 as Cb,A as Rr,N as pv,a4 as ko,S as TQ,w as kQ,a5 as AQ,i as O1e,R as MQ,a6 as F1e,e as L1e,z as Eb,D as IO,a7 as $W,W as P1e,I as DO,a8 as z1e,l as B1e,a9 as U1e,aa as V1e,ab as W1e,ac as G1e,ad as H1e,ae as j1e,af as q1e,ag as X1e,ah as Y1e,ai as K1e,aj as Z1e,ak as J1e,al as Q1e}from"./chunks/framework.d770699b.js";import{t as NQ}from"./chunks/theme.102df6b3.js";var Ft=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qp(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){if(this instanceof r){var i=[null];i.push.apply(i,arguments);var s=Function.bind.apply(e,i);return new s}return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var IW={},exe={get exports(){return IW},set exports(t){IW=t}},$Q,Ag,eu,IQ,$I,DW,Gm,NS=!1,$S=[];typeof document<"u"&&(IQ=function(t){return NS||document.readyState==="interactive"||document.readyState==="complete"?t.call(document):$S.push(function(){return t.call(this)}),this},DW=function(){for(var t=0,e=$S.length;t<e;t++)$S[t].apply(document);$S=[]},Gm=function(){NS||(NS=!0,DW.call(window),document.removeEventListener?document.removeEventListener("DOMContentLoaded",Gm,!1):document.attachEvent&&(document.detachEvent("onreadystatechange",Gm),window==window.top&&(clearInterval($I),$I=null)))},document.addEventListener?document.addEventListener("DOMContentLoaded",Gm,!1):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){/loaded|complete/.test(document.readyState)&&Gm()}),window==window.top&&($I=setInterval(function(){try{NS||document.documentElement.doScroll("left")}catch{return}Gm()},5))));$Q={fetch:function(t,e){var n="BusuanziCallback_"+Math.floor(1099511627776*Math.random());t=t.replace("=BusuanziCallback","="+n),eu=document.createElement("SCRIPT"),eu.type="text/javascript",eu.defer=!0,eu.src=t,document.getElementsByTagName("HEAD")[0].appendChild(eu),window[n]=this.evalCall(e)},evalCall:function(t){return function(e){IQ(function(){try{t(e),eu&&eu.parentElement&&eu.parentElement.removeChild&&eu.parentElement.removeChild(eu)}catch(n){console.log(n),Ag.hides()}})}}};const DQ=()=>{Ag&&Ag.hides(),$Q.fetch("//busuanzi.ibruce.info/busuanzi?jsonpCallback=BusuanziCallback",function(t){Ag.texts(t),Ag.shows()})};Ag={bszs:["site_pv","page_pv","site_uv"],texts:function(t){this.bszs.map(function(e){var n=document.getElementById("busuanzi_value_"+e);n&&(n.innerHTML=t[e])})},hides:function(){this.bszs.map(function(t){var e=document.getElementById("busuanzi_container_"+t);e&&(e.style.display="none")})},shows:function(){this.bszs.map(function(t){var e=document.getElementById("busuanzi_container_"+t);e&&(e.style.display="inline")})}};typeof document<"u"&&DQ();var txe={fetch:DQ};(function(t){t.exports=txe})(exe);const $A=t=>(sl("data-v-6cc74b1c"),t=t(),al(),t),nxe={id:"foo"},rxe={class:"busuanzi"},ixe={id:"busuanzi_container_site_pv",style:{display:"none"}},sxe={ref:"sitepv",id:"busuanzi_value_site_pv"},axe=$A(()=>V("span",{class:"post-meta-divider"},"|",-1)),oxe=$A(()=>V("span",{id:"busuanzi_container_site_uv",style:{display:"none"}},[Hr(" 本站访客数 "),V("span",{id:"busuanzi_value_site_uv"}),Hr("人 ")],-1)),lxe=$A(()=>V("a",{href:"https://process1024.github.io/vitepress/"}," vitepress ",-1)),uxe=$A(()=>V("a",{href:"https://github.com/clark-cui/vitepress-blog-zaun"}," vitepress-blog-zaun ",-1)),cxe=Zi({__name:"myLayout",setup(t){const{Layout:e}=NQ;return(n,r)=>(De(),Re(Dn,null,[Fh(_r(e)),V("footer",nxe,[V("div",rxe,[V("span",ixe,[Hr(" 本站总访问量 "),V("span",sxe,null,512),Hr("次 "),axe]),oxe]),lxe,Hr(" and "),uxe,Hr(" | have a good time ")])],64))}});const fxe=xs(cxe,[["__scopeId","data-v-6cc74b1c"]]);const dxe=t=>(sl("data-v-78908d15"),t=t(),al(),t),hxe={class:"main"},pxe={class:"mytags"},mxe=["onClick"],gxe={class:"chosemytag"},vxe=dxe(()=>V("div",{class:"colorline"},null,-1)),yxe={class:"mytagslist"},bxe={class:"theTagTitle"},xxe={class:"list"},wxe=["href"],_xe=Zi({__name:"tags",setup(t){const{theme:e}=x5(),n=e.value.posts,r={};let i=Mt(""),s=Mt("");console.log(n);for(let o of n){console.log(o);const l=o.frontMatter.tags;if(l)if(typeof l=="object")for(let u of l)r[u]||(r[u]=[]),r[u].push(o);else r[l]||(r[l]=[]),r[l].push(o)}function a(o,l){s.value=l,i=o}return(o,l)=>(De(),Re("div",hxe,[V("div",pxe,[(De(),Re(Dn,null,Pn(r,(u,c)=>V("div",{class:"mytag",onClick:f=>a(c,u)},[V("div",gxe,[Hr(bt(c)+" ",1),V("sup",null,bt(u.length),1)])],8,mxe)),64))]),vxe,V("div",yxe,[V("div",bxe,bt(_r(i)),1),(De(!0),Re(Dn,null,Pn(_r(s),(u,c)=>(De(),Re("div",xxe,[V("a",{href:u.regularPath,class:"singlelist"},[V("div",null,bt(u.frontMatter.title),1),V("div",null,bt(u.frontMatter.date),1)],8,wxe)]))),256))])]))}});const Sxe=xs(_xe,[["__scopeId","data-v-78908d15"]]),Cxe={class:"main"},Exe={class:"archievs"},Txe={class:"arc"},kxe={class:"yeartitle"},Axe={class:"archievsmain"},Mxe=["href"],Nxe=Zi({__name:"archives",setup(t){const{theme:e}=x5(),n=e.value.posts,r={},i={};for(let s of n){const a=s.frontMatter.date.slice(0,4),o=s.frontMatter.layout;console.log(a),o!==!1&&(r[a]||(r[a]=[]),r[a].push(s))}return console.log(r,i),(s,a)=>(De(),Re("div",Cxe,[V("div",Exe,[(De(),Re(Dn,null,Pn(r,(o,l)=>V("div",Txe,[V("div",kxe,bt(l.slice(0,4)),1),(De(!0),Re(Dn,null,Pn(r[l],(u,c)=>(De(),Re("div",Axe,[V("a",{href:u.regularPath},[V("div",null,bt(u.frontMatter.title),1),V("div",null,bt(u.frontMatter.date),1)],8,Mxe)]))),256))])),64))])]))}});const $xe=xs(Nxe,[["__scopeId","data-v-9e72ca83"]]),w5="/assets/catear.94f014c7.gif",Hm={info:{name:"catdemo",isoutline:!0,type:"animal",length:32,height:19,pointsize:15,innercolor:"#fed9d0"},catail:{name:"catail",length:8,height:8,startx:0,starty:4,pointstype:"vertically",points:[[2,3,4,5],[1,6],[1,6],[1,7],[2,7],[3,8],[3,8],[4,8]],join:"catbody",outlinecolor:"#835e1d",innercolor:"#fed9d0"},catail2:{name:"catail2",length:8,height:8,startx:0,starty:4,pointstype:"vertically",points:[[1,2,3,4],[0,5],[0,5],[0,6],[1,6],[2,7],[2,7],[3,7]],join:"catbody",outlinecolor:"#835e1d",innercolor:"#fed9d0"},catfoot1:{name:"catfoot1",length:19,height:3,startx:8,starty:15,pointstype:"horizontally",pointsrule:[[{s:0,e:7},{s:12,e:16},{s:16,e:18}],[{s:0,e:2},{s:3,e:6},{s:12,e:15},{s:15,e:18}],[{s:0,e:3},{s:3,e:6},{s:12,e:15},{s:15,e:18}]],points:[[0,7,8,9,10,11,12,16,18],[0,2,3,6,12,15,18],[0,3,6,12,15,18],[1,2,4,5,13,14,16,17]],join:"catbody",outlinecolor:"#835e1d",innercolor:"#fed9d0"},catfoot2:{name:"catfoot2",length:20,height:4,startx:8,starty:15,pointstype:"horizontally",pointsrule:[[{s:1,e:6},{s:13,e:18}],[{s:0,e:2},{s:2,e:5},{s:11,e:14},{s:15,e:19}],[{s:0,e:2},{s:2,e:5},{s:16,e:19}]],points:[[1,6,7,8,9,10,11,12,13,18],[0,2,5,11,14,15,19],[0,2,5,12,13,16,19],[1,4,3,17,18]],join:"catbody",outlinecolor:"#835e1d",innercolor:"#fed9d0"},catfoot3:{name:"catfoot3",length:20,height:4,startx:8,starty:15,pointstype:"horizontally",pointsrule:[[{s:2,e:6},{s:13,e:18}],[{s:3,e:7},{s:7,e:9},{s:14,e:17}],[{s:3,e:6},{s:6,e:9},{s:11,e:14},{s:14,e:17}]],points:[[2,6,7,8,9,10,11,12,13,18],[3,7,9,12,13,14,17],[3,6,9,11,14,16,17],[4,5,7,8,12,13,15,16]],join:"catbody",outlinecolor:"#835e1d",innercolor:"#fed9d0"},catfoot4:{name:"catfoot4",length:20,height:4,startx:8,starty:15,pointstype:"horizontally",pointsrule:[[{s:2,e:12},{s:13,e:15},{s:16,e:19}],[{s:3,e:7},{s:8,e:11},{s:14,e:17},{s:17,e:20}],[{s:4,e:7},{s:14,e:16}]],points:[[2,12,13,15,16,19],[3,8,7,11,14,17,20],[4,7,9,10,14,16,18,19],[5,6,15,16]],join:"catbody",outlinecolor:"#835e1d",innercolor:"#fed9d0"},catfoot5:{name:"catfoot5",length:20,height:4,startx:8,starty:15,pointstype:"horizontally",pointsrule:[[{s:2,e:9},{s:12,e:17},{s:17,e:19}],[{s:3,e:5},{s:5,e:9},{s:11,e:16},{s:17,e:20}],[{s:2,e:5},{s:6,e:9},{s:17,e:20}]],points:[[2,9,10,11,12,17,19],[2,3,5,9,11,16,17,20],[2,5,6,9,12,13,14,15,17,20],[3,4,7,8,18,19]],join:"catbody",outlinecolor:"#835e1d",innercolor:"#fed9d0"},catfoot6:{name:"catfoot6",length:20,height:4,startx:8,starty:15,pointstype:"horizontally",pointsrule:[[{s:2,e:7},{s:14,e:17}],[{s:4,e:7},{s:12,e:16}],[{s:4,e:7},{s:14,e:17}]],points:[[2,7,8,9,10,11,12,13,14,17,18],[3,4,7,12,16,17],[3,4,7,13,14,17],[4,5,6,15,16]],join:"catbody",outlinecolor:"#835e1d",innercolor:"#fed9d0"},catfoot7:{name:"catfoot7",length:20,height:4,startx:8,starty:15,pointstype:"horizontally",pointsrule:[[{s:1,e:7},{s:15,e:19}],[{s:2,e:6},{s:6,e:9},{s:12,e:16},{s:17,e:19}],[{s:2,e:5},{s:12,e:15}]],points:[[1,7,8,9,10,11,12,13,14,15,19],[1,2,6,9,12,16,17,19],[2,5,7,8,12,15,17,18],[3,4,13,14]],join:"catbody",outlinecolor:"#835e1d",innercolor:"#fed9d0"},catear:{name:"catear",length:6,height:2,startx:23,starty:0,pointstype:"horizontally",pointsrule:[null,[{s:0,e:2},{s:3,e:5}]],points:[[1,4],[0,2,3,5]],join:"catbody",outlinecolor:"#835e1d",innercolor:"#fed9d0"},catbody:{name:"catbody",length:24,height:14,startx:8,starty:2,pointstype:"horizontally",pointsrule:0,points:[[15,20,21],[15,22],[14,23],[6,7,8,9,10,11,12,13,23],[2,3,4,5,23],[1,23],[0,22],[0,21],[0,20],[0,20],[0,20],[1,19],[1,18]],join:["catail","catfoot","catear"],outlinecolor:"#835e1d",innercolor:"#fed9d0"},cateyes:{name:"cateyes",length:1,height:2,startx:20,starty:4,pointstype:"horizontally",points:[[8],[8]]},cateyes2:{name:"cateyes",length:1,height:2,startx:20,starty:4,pointstype:"horizontally",points:[[8,7],[8]]},catface:{name:"catface",length:1,height:1,startx:20,starty:6,pointstype:"horizontally",partcolor:"red",points:[[7]]}},RW=["我将遥遥远行，而后黄昏将至","光就是一切的意义","但行好事，莫问前程","来摸鱼派找我玩吧","尝试在惨淡的人生里攫取微末的快乐","爱 死亡 机器人","他太劳累 无法得到片刻休息","落日桥头晓风吹，冷月江畔一人寒","所有美好的事物","愿你能和重要的人重逢"],Aw=t=>(sl("data-v-01914433"),t=t(),al(),t),Ixe={class:"home"},Dxe={class:"mainbox"},Rxe=Aw(()=>V("div",{class:"words"},[V("img",{class:"img",src:w5}),V("p",null,"stillwarter 摸鱼达人 & 搬砖菜鸟 & 逐光者 & 弃梦人。")],-1)),Oxe={class:"canvasbox"},Fxe={class:"contain"},Lxe={class:"poop"},Pxe=Aw(()=>V("canvas",{id:"pixelcanvas",width:"400",height:"400"},null,-1)),zxe=Aw(()=>V("div",{class:"books"}," 书架筹备中... ",-1)),Bxe=Aw(()=>V("div",{class:"box"},null,-1)),Uxe=Aw(()=>V("p",{class:"temp1"},"计划筹建组件库... 收集函数中... 还需要学习很多捏...",-1)),Vxe=Zi({__name:"home",setup(t){let e=Mt("你好，这里是stillwarter的博客"),n=Mt(0),r=0;setInterval(()=>{const d=Number(n.value);e.value=RW[d],n.value++,n.value>=RW.length&&(n.value=0)},2e4);var i=Date.now(),s=0;function a(){requestAnimationFrame(function(){if(s++,s%20===0){var d=(Date.now()-i)/s,h=Math.round(d*1e3)/1e3;r=Math.round(1e5/h)/100}a()})}a(),r.value>60;function o(d){d.width=750}function l(d,h,p,m,g=3,v=0){const y={shiftx:g,shifty:v};f(d),p==8&&(p=1),u(d,h.catbody,y),u(d,h["catfoot"+p],y),u(d,h.catear,y),p%2==0?u(d,h.catail,y):u(d,h.catail2,y),v<=50?u(d,h.cateyes,y):u(d,h.cateyes2,y),u(d,h.catface,y),m++;let b=0;r>160?b=20:r>120?b=15:r>90?b=10:b=5,m%b==0?(p++,requestAnimationFrame(function(){l(d,h,p,m,g,v)})):requestAnimationFrame(function(){l(d,h,p,m,g,v)})}function u(d,h,p){const m=h.startx,g=h.starty;if(h.pointstype=="horizontally")for(const v in h.points)for(const y of h.points[v]){const b=m+y+p.shifty,x=g+Number(v)+p.shiftx;d.fillStyle=Hm.catbody.outlinecolor,h.partcolor&&(d.fillStyle=h.partcolor),d.fillRect(b*15,x*15,15,15)}if(h.pointstype=="vertically")for(const v in h.points)for(const y of h.points[v]){const b=g+y+p.shiftx,x=m+Number(v)+p.shifty;d.fillStyle=Hm.catbody.outlinecolor,d.fillRect(x*15,b*15,15,15)}c(d,h,p)}function c(d,h,p){if(h.pointstype=="vertically")for(const y in h.points){const b=h.points[y].length,x=Math.min(...h.points[y]),S=Math.max(...h.points[y])-x+1;S!=b&&m(d,h.points[y],p,S,y)}else if(h.pointstype=="horizontally"&&!h.pointsrule)for(const y in h.points){const b=h.points[y].length,x=Math.min(...h.points[y]),S=Math.max(...h.points[y])-x+1;if(S==b)return;g(d,h.points[y],p,S,y)}else if(h.pointsrule)for(const y in h.pointsrule)h.pointsrule[y]&&v(d,h.pointsrule[y],p,y);function m(y,b,x,w,S){const C=[],_=h.startx,E=h.starty;for(let k=0;k<w;k++)C.push(k+b[0]);let T=C.filter(function(k){return b.indexOf(k)==-1});for(const k of T){y.fillStyle=Hm.catbody.innercolor;const M=E+k+x.shiftx,A=_+Number(S)+x.shifty;y.fillRect(A*15,M*15,15,15)}}function g(y,b,x,w,S){const C=[],_=h.startx,E=h.starty;for(let k=0;k<w;k++)C.push(k+b[0]);let T=C.filter(function(k){return b.indexOf(k)==-1});for(const k of T){y.fillStyle=Hm.catbody.innercolor;const M=_+k+x.shifty,A=E+Number(S)+x.shiftx;y.fillRect(M*15,A*15,15,15)}}function v(y,b,x,w){for(const S of b)for(let C=S.s+1;C<S.e;C++){const _=C+x.shifty+h.startx,E=Number(w)+x.shiftx+h.starty;y.fillStyle=Hm.catbody.innercolor,y.fillRect(_*15,E*15,15,15)}}}function f(d){o(d.canvas)}return Wl(()=>{const d=document.getElementById("pixelcanvas"),h=d.getContext("2d");o(d),requestAnimationFrame(function(){l(h,Hm,1,1)})}),(d,h)=>(De(),Re("div",Ixe,[V("div",Dxe,[Rxe,V("div",Oxe,[V("div",Fxe,[V("div",Lxe,bt(_r(e)),1),Pxe])]),zxe,Bxe]),Uxe]))}});const Wxe=xs(Vxe,[["__scopeId","data-v-01914433"]]),jm={teacherdata:[{img:"https://tmx.fishpi.cn/image/head.jpg",name:"鼠鼠在碎觉",des:"鼠鼠在碎觉，请勿打扰~",look:"我的摸鱼导师~",link:"https://www.sszsj.cc/",store:`
        <p>大三的时候在GitHub上面搜索摸鱼，看到了摸瞎的摸鱼插件？然后就进入了链滴，奇怪的开始了code生涯，在此之前并没有认真的code，大多情况下只是为了应付学业。</p>

        <p>这位确实能称为我的导师了，虽然他也并没有教导我什么，虽然我不知道他的模样姓名，但故事是从摸鱼开始...</p>
      `,fishlink:"https://fishpi.cn/member/csfwff"},{img:"https://my.hancel.org/media/logo.jpg",name:"hancel",des:"人生而自由，却无往不在枷锁之中。",look:"超强叮当猫~",link:"https://my.hancel.org/",store:`
        <p>为什么叫叮当猫，因为鱼油很多的问题他都能答上来，hancel（跳佬）做了很多插件，比如maze，鱼派的拓展等等，是混在鱼排内很强力的开发者！</p>
        <p>跳佬也会分享自己的做菜贴和白嫖游戏的帖子，德艺双馨了属于是。</p>
        <p>跳佬现在算是我的老师，开发上的一些问题我都会问问他，感谢！</p>
      `,fishlink:"https://fishpi.cn/member/imlinhanchao"}],fishfrends:[{img:"https://file.fishpi.cn/2022/11/blob-e958dbd9.png?imageView2/1/w/210/h/210/interlace/0/q/100",name:"Gakkiyomi",des:"为往圣继绝学~",look:"某知名大厂java主程~",link:" http://gakkiyomi.me",store:"",fishlink:"https://fishpi.cn/member/Gakkiyomi"},{img:"https://avatars1.githubusercontent.com/u/6754458?v=4",name:"adlered",des:"贼拉正经的技术博客~",look:"年少有为的公司老总~",link:"https://www.stackoverflow.wiki",store:`
        <p>阿达，我也叫他陈总；早年间出没于黑客派，年纪轻轻就有一身本领，其实他能算我老师的；但是我和他同龄，马上就打消了这个念头。</p>
        <p>没有正式见过，你很难相信陈总是一位年轻人，摸鱼的抗鼎者，白与画创始人（这个名字来源于《黑客与画家》）。</p>
        <p>不过他一直没有履行女装和发放纪念勋章的诺言，老鸽子了。</p>
        <p>最近他醉请山水，流连各地，羡煞我等，我和好兄弟调侃他是北京富二代，但陈总强调自己是河南到北京讨饭的？</p>
        <p>希望他能在社区更活跃吧，我很久没看到他了...</p>
      `,fishlink:"https://fishpi.cn/member/adlered"},{img:"https://lemon-cxh.github.io/images/avatar.jpg",name:"三月柳絮四月雨",des:"我年华虚度，空有一身疲惫😭",look:"感情上的迷途人..",link:"https://lemon-cxh.github.io",store:"",fishlink:"https://fishpi.cn/member/Lemon"},{img:"https://www.hjljy.cn/favicon.png",name:"海加尔金鹰",des:"如野草般一岁一枯荣~",look:"熟悉又陌生的链友~",link:"https://www.hjljy.cn",store:"",fishlink:"https://fishpi.cn/member/hjljy"},{img:"https://file.fishpi.cn/2022/06/blob-fbff7c58.png?imageView2/1/w/210/h/210/interlace/0/q/100",name:"十一",des:"懒癌晚期，混吃等死~",look:"成熟稳重的中龄愤青🤪",link:"https://www.elevenblog.cn",store:"",fishlink:"https://fishpi.cn/member/eleven"},{img:"https://file.fishpi.cn/2022/06/srchttpimgzcoolcncommunity0116405d84f975a801211d537707c9gifreferhttpimgzcool-0f2d09c9.gif?imageView2/1/w/210/h/210/interlace/0/q/100",name:"test12138",des:"大丈夫生于天地之间，岂能郁郁久居人下！",look:"AAA-瓷砖批发~",link:"https://你好.eu.org/",store:"",fishlink:"https://fishpi.cn/member/test12138"},{img:"https://file.fishpi.cn/2023/02/v247dfbb051740334703a0c5a05fb006dbr-d6b59b50.jpg?imageView2/1/w/210/h/210/interlace/0/q/100",name:"probieMott",des:".net萌新~",look:"你好鱼油~",link:"https://probieluo.github.io",store:"",fishlink:"https://fishpi.cn/member/uubs"},{img:" https://s1.ax1x.com/2022/03/13/bqyIpT.jpg",name:"咕咕咕",des:"路漫漫其修远兮，吾将上下而求索。",look:"偶尔冒泡的猫猫头",link:"https://cooooing.github.io/",fishlink:"https://fishpi.cn/member/yizhi"},{img:"https://pwl.stackoverflow.wiki/2021/10/blob-29bbd528.png?imageView2/1/w/210/h/210/interlace/0/q/100",name:"涛之雨",des:"'懒得打理blog，cnblogs也很丑，也没什么人看，不如直接来吾爱找我'",look:"吾爱大佬",link:"https://taozhiyu.gitee.io/",fishlink:"https://fishpi.cn/member/taozhiyu"},{img:"https://pwl.stackoverflow.wiki/2021/12/blob-28eb4b9f.png?imageView2/1/w/210/h/210/interlace/0/q/100",name:"bongbongbakudan",des:"呼呼呼~",look:"贴友友~",link:"https://bongbongbakudan.github.io/",store:"",fishlink:"https://fishpi.cn/member/bongbongbakudan"},{img:"https://www.lingmx.com/upload/ddd3154f2c45da8d1a71fc590097c7fd.avatar.webp",name:"芝士烤鸡腿",des:"曾用名yui哥、笑阁阁",look:"代表游戏：摸破苍穹",link:"https://www.lingmx.com/",store:"",fishlink:"https://fishpi.cn/member/Yui"},{img:"https://heycmm.cn/upload/2019/2/WechatIMG120190306134401857.jpeg",name:"殆己",des:"质胜文则野，文胜质则史。文质彬彬，然后君子。",look:"很遗憾，估计很难再会这位陌生的朋友了。",link:"https://heycmm.cn/",store:""},{img:"https://4433studio.oss-cn-hangzhou.aliyuncs.com/headPortrait/chaichai.jpg",name:"柴柴",des:"vue二次元个人博客模板作者，热爱花里胡哨的开发，涉猎广泛，励志做一名优秀的、花里胡哨的程序员。",look:"想你了牢柴~",link:"https://chaichaisocute.top/",store:""}],bigstart:[{img:"https://avatars.githubusercontent.com/u/905434?v=4",name:"阮一峰",des:"《未来世界的幸存者》",look:"20年的时间散落在这里..",link:" https://ruanyifeng.com/",store:"",fishlink:null},{img:"https://b3logfile.com/avatar/1353745196354_1611386411315.jpeg",name:"D",des:"但行好事莫问前程~",look:"思源笔记开发者，报废程序员D~",link:"https://88250.b3log.org/",store:`
        <p>D哥不是我见到的第一位开源者，但是是我第一位可以交流的开源者（第一位是handsfree的作者，但我并没有在其库下面提pr..）。</P>
        <p>那时我还是一位学生，然后使用了D哥的思源笔记软件，他真的很厉害，不同于求伯君所处的时代，wps正是那个时代需要的。D哥的思源笔记不温不火，或许思源还没有完成用户的核心诉求，但我觉得它在同类软件里很出色；不过我没有协同的需求，准备等我工资高点续费养着...（好吧白嫖真的很爽）</p>
        <p>我没见过D哥，没有向他询问工作学习上的问题，我也不想太过打扰到他，我只是他的软件的使用者...</p>
        <p>他说，思源是他的救赎；他说，但行好事-莫问前程；听说D哥已经实现财富自由？不管怎么，看到先行者这样的身影，是一件值得高兴的事情。</p>
        <p>他正在做很有意义的事情，我很向往他。</p>
      `,fishlink:null},{img:" https://avatars.githubusercontent.com/u/11247099?v=4",name:"Anthony Fu",des:"vue,vite,nuxt核心团队成员~",look:"开源探店人~",link:"https://antfu.me/",store:"",fishlink:null},{img:"https://avatars.githubusercontent.com/u/1240026?v=4",name:"Matt Frisbie",des:"红宝书作者~",look:"新手村老爷爷~",link:"https://www.mattfriz.com/",store:"",fishlink:null},{img:"https://avatars.githubusercontent.com/u/13848593?v=4",name:"向军大叔",des:"后盾人社区开发者~",look:"最初学习web开发的老师~",link:"https://www.houdunren.com/",store:"",fishlink:null},{img:"https://picx.zhimg.com/v2-0c9a6869e483192462339854067a9d36_xl.jpg?source=32738c0c",name:"尘码",des:"追寻热爱与自由~",look:"技术摸鱼达人",link:"http://dustycoder.tech/",store:"",fishlink:null}],bestfrends:[{img:"/img/CC.jpg",name:"CC",des:"河流捞的一，津门大鲛弹。",look:"嵌入式攻城狮~",link:"",store:"若是蚊子很多，晚上睡不着觉，阁下该如何应对？",fishlink:null}],website:[{img:"https://fishpi.cn/images/favicon.png",name:"摸鱼派",des:"摸鱼派是一个以程序员、设计师、极客为核心的社区，欢迎你的加入。",look:"鱼油卧虎藏龙!",link:"https://fishpi.cn/",store:`
        <p>D哥后续全心全意的进行思源笔记的开发，链滴社区逐渐变为了思源笔记的bug提交社区？一批链滴的摸鱼老油条们重启炉灶，新建了一个社区，这就是摸鱼派了。</P>
        <p>也是在这里，老油条们发光发热，将这里打造成了真正的摸鱼聊天室，我也是这里早期的非官方接待机器人；而我在这里的故事也在继续...</p>
        <p>或许有天他也会链滴一样逐渐失去生机，但我大概会同他一起老去。</p>
      `,fishlink:null},{img:"https://ld246.com/images/favicon.png",name:"链滴",des:"这里是一个记录生活的地方，目前已经有超过 50000 的伙伴加入。我们正在构建一个小众社区。大家在这里相互信任，以平等 • 自由 • 奔放的价值观进行分享交流。最终，希望大家能够找到与自己志同道合的伙伴，共同成长。",look:"摸鱼开始的地方~",link:"https://ld246.com/",store:`
      <p>链滴是我看鼠鼠在碎觉（摸瞎）的插件里发现的，在哪里知道了思源笔记和D哥，正好当时在准备考研，于是就用这个笔记记录知识要点（虽然最后没考好）...</P>
      <p>在社区内遇到的人，确实对我工作学习的选择上产生了影响。我永远记得，接触链滴后，我发现我需要的是学习本身，而不是它带给我的分数。</p>
      <p>当我某天下午打开摸瞎的脚本，发现链滴的url时，可能才算是我在web世界探索的起点吧，命运的齿轮开始转动？这是我尝试构筑自己未来的起点...真的很怀念哪些无忧的午后，能够认识不同的同行者。</P>
      `,fishlink:null}],noblogpeople:[{img:"https://pwl.stackoverflow.wiki/2021/09/bulabula1-98fde124.png?imageView2/1/w/210/h/210/interlace/0/q/100",name:"bulabula",des:"这个人很懒，什么都没留下。",look:"牛b哄哄的脚本小子。",link:"https://fishpi.cn/member/bulabula",store:"",fishlink:"https://fishpi.cn/member/bulabula"},{img:"https://file.fishpi.cn/2023/02/blob-b65aba57.png?imageView2/1/w/210/h/210/interlace/0/q/100",name:"Orange",des:"小羊要睡觉了~",look:"咩~",link:"https://fishpi.cn/member/Orange",store:"",fishlink:"https://fishpi.cn/member/Orange"},{img:"https://file.fishpi.cn/2023/04/blob-3cabeac5.png",name:"viiSummer",des:"为万世开太平~",look:"王昭君温酒斩华雄！",link:"https://fishpi.cn/member/viiSummer",store:"",fishlink:"https://fishpi.cn/article/1686490163206"}]},Ji=t=>(sl("data-v-93882149"),t=t(),al(),t),Gxe=Ji(()=>V("h1",{class:"title"},"stillwarter的友人帳",-1)),Hxe=Ji(()=>V("p",null," 记录相遇的朋友，和我编的小故事，还有老师(虽然老师不认识我，厚颜称为老师)。 ",-1)),jxe=Ji(()=>V("br",null,null,-1)),qxe=Ji(()=>V("p",null,"以及一些厉害的前辈们，和值得感谢的人们...",-1)),Xxe=Ji(()=>V("h2",{class:"h2title"},"鱼油",-1)),Yxe=Ji(()=>V("p",null,"一起摸鱼的伙伴，相遇于偶然，下次见面会是什么时候呢？",-1)),Kxe={class:"teachercontent"},Zxe=["onClick"],Jxe={class:"card"},Qxe=["src"],ewe={class:"infor"},twe={class:"thename"},nwe={class:"himdes"},rwe={class:"look"},iwe=Ji(()=>V("h2",{class:"h2title"},"老师",-1)),swe=Ji(()=>V("p",null,"谢谢你的回答（文章或视频），解开了我的疑惑。",-1)),awe={class:"teachercontent"},owe=["onClick"],lwe={class:"card"},uwe=["src"],cwe={class:"infor"},fwe={class:"thename"},dwe={class:"himdes"},hwe={class:"look"},pwe=Ji(()=>V("h2",{class:"h2title"},"大佬",-1)),mwe=Ji(()=>V("p",null,"领域内的传道者，希望我以后也能成为这样的人...",-1)),gwe={class:"teachercontent"},vwe=["onClick"],ywe={class:"card"},bwe=["src"],xwe={class:"infor"},wwe={class:"thename"},_we={class:"himdes"},Swe={class:"look"},Cwe=Ji(()=>V("h2",{class:"h2title"},"挚友",-1)),Ewe=Ji(()=>V("p",null,"落日桥头晓风吹，冷月江畔一人寒。",-1)),Twe={class:"teachercontent"},kwe=["onClick"],Awe={class:"card"},Mwe=["src"],Nwe={class:"infor"},$we={class:"thename"},Iwe={class:"himdes"},Dwe={class:"look"},Rwe=Ji(()=>V("h2",{class:"h2title"},"好玩",-1)),Owe=Ji(()=>V("p",null,"认识鱼油的平台以及有趣的网站。",-1)),Fwe={class:"teachercontent"},Lwe=["onClick"],Pwe={class:"card"},zwe=["src"],Bwe={class:"infor"},Uwe={class:"thename"},Vwe={class:"himdes"},Wwe={class:"look"},Gwe=Ji(()=>V("h2",{class:"h2title"},"其他",-1)),Hwe=Ji(()=>V("p",null,"为一些没有blog的朋友准备（你们也赶快搞一个blog罢）...",-1)),jwe={class:"teachercontent"},qwe=["onClick"],Xwe={class:"card"},Ywe=["src"],Kwe={class:"infor"},Zwe={class:"thename"},Jwe={class:"himdes"},Qwe={class:"look"},e_e={class:"rightcontent"},t_e=["src"],n_e={class:"name"},r_e={class:"des"},i_e={class:"link"},s_e=["href"],a_e=["innerHTML"],o_e={class:"footer"},l_e=["href"],u_e=Ji(()=>V("img",{src:"https://fishpi.cn/images/favicon.png"},null,-1)),c_e=[u_e],f_e=Zi({__name:"teachersandfrends",setup(t){const e=Mt(null),n=Mt(null),r=Mt("");let i=0;function s(o){r.value=o,i=1,e.value.style.zIndex=0,n.value.style.right=0}function a(o){i&&o.target.className=="main"&&(e.value.style.zIndex=10,n.value.style.right="-450px",i=0)}return(o,l)=>(De(),Re("div",{class:"main",onClick:l[0]||(l[0]=u=>a(u))},[V("div",{class:"content",ref_key:"content",ref:e},[Gxe,Hxe,jxe,qxe,Xxe,Yxe,V("div",Kxe,[(De(!0),Re(Dn,null,Pn(_r(jm).fishfrends,(u,c)=>(De(),Re("div",{class:"cardcontent",key:c,onClick:f=>s(u)},[V("div",Jxe,[V("img",{class:"avater",src:u.img},null,8,Qxe),V("div",ewe,[V("h4",twe,bt(u.name),1),V("p",nwe,bt(u.des),1),V("p",rwe,bt(u.look),1)])])],8,Zxe))),128))]),iwe,swe,V("div",awe,[(De(!0),Re(Dn,null,Pn(_r(jm).teacherdata,(u,c)=>(De(),Re("div",{class:"cardcontent",key:c,onClick:f=>s(u)},[V("div",lwe,[V("img",{class:"avater",src:u.img},null,8,uwe),V("div",cwe,[V("h4",fwe,bt(u.name),1),V("p",dwe,bt(u.des),1),V("p",hwe,bt(u.look),1)])])],8,owe))),128))]),pwe,mwe,V("div",gwe,[(De(!0),Re(Dn,null,Pn(_r(jm).bigstart,(u,c)=>(De(),Re("div",{class:"cardcontent",key:c,onClick:f=>s(u)},[V("div",ywe,[V("img",{class:"avater",src:u.img},null,8,bwe),V("div",xwe,[V("h4",wwe,bt(u.name),1),V("p",_we,bt(u.des),1),V("p",Swe,bt(u.look),1)])])],8,vwe))),128))]),Cwe,Ewe,V("div",Twe,[(De(!0),Re(Dn,null,Pn(_r(jm).bestfrends,(u,c)=>(De(),Re("div",{class:"cardcontent",key:c,onClick:f=>s(u)},[V("div",Awe,[V("img",{class:"avater",src:u.img},null,8,Mwe),V("div",Nwe,[V("h4",$we,bt(u.name),1),V("p",Iwe,bt(u.des),1),V("p",Dwe,bt(u.look),1)])])],8,kwe))),128))]),Rwe,Owe,V("div",Fwe,[(De(!0),Re(Dn,null,Pn(_r(jm).website,(u,c)=>(De(),Re("div",{class:"cardcontent",key:c,onClick:f=>s(u)},[V("div",Pwe,[V("img",{class:"avater",src:u.img},null,8,zwe),V("div",Bwe,[V("h4",Uwe,bt(u.name),1),V("p",Vwe,bt(u.des),1),V("p",Wwe,bt(u.look),1)])])],8,Lwe))),128))]),Gwe,Hwe,V("div",jwe,[(De(!0),Re(Dn,null,Pn(_r(jm).noblogpeople,(u,c)=>(De(),Re("div",{class:"cardcontent",key:c,onClick:f=>s(u)},[V("div",Xwe,[V("img",{class:"avater",src:u.img},null,8,Ywe),V("div",Kwe,[V("h4",Zwe,bt(u.name),1),V("p",Jwe,bt(u.des),1),V("p",Qwe,bt(u.look),1)])])],8,qwe))),128))])],512),V("div",{class:"right",ref_key:"rightpanel",ref:n},[V("div",e_e,[V("img",{class:"avater",src:r.value.img},null,8,t_e),V("div",n_e,bt(r.value.name),1),V("div",r_e,bt(r.value.des),1),V("div",i_e,[V("a",{href:r.value.link,target:"_blank"},bt(r.value.link),9,s_e)]),V("div",{class:"store",innerHTML:r.value.store},null,8,a_e)]),V("div",o_e,[V("a",{target:"_blank",href:r.value.fishlink},c_e,8,l_e)])],512)]))}});const d_e=xs(f_e,[["__scopeId","data-v-93882149"]]),h_e=[{name:"(玩具)做一个日常工作记录表",tag:"进行中",date:"2023-09-10"},{name:"(玩具)像素画生成器",tag:"进行中",date:"2023-07-09"},{name:"(长期)收集一些有用的code片段",tag:"进行中",date:"2023-xx-xx"},{name:"(长期)做一个简单的历史路线图",tag:"进行中",date:"2023-xx-xx"}],p_e=[{name:"(荒野)学习一些动画的技巧",tag:"进行中",date:"xxx-xxx-xxx"},{name:"(荒野)做一个简单的歌曲",tag:"进行中",date:"xxx-xxx-xxx"},{name:"(荒野)做一个简单的小游戏",tag:"进行中",date:"xxx-xxx-xxx"},{name:"(荒野)做一个简单的dom库",tag:"进行中",date:"xxx-xxx-xxx"},{name:"(荒野)做一个简单的js函数库",tag:"进行中",date:"xxx-xxx-xxx"},{name:"(长期)继续学习前端领域知识",tag:"进行中",date:"xxx-xxx-xxx"},{name:"(夕拾)重新看看计算机今典书籍",tag:"进行中",date:"xxx-xxx-xxx"}],m_e=[{name:"(荒野)回去看看handsfress这个库",tag:"进行中",date:"xxx-xxx-xxx"},{name:"(远行)进行一场旅游",tag:"进行中",date:"xxx-xxx-xxx"},{name:"(修缮)给博客增加记录表",tag:"进行中",date:"xxx-xxx-xxx"},{name:"(挽梦)养一只小猫咪 最好是暹罗",tag:"进行中",date:"xxx-xxx-xxx"}],ti=t=>(sl("data-v-a2748685"),t=t(),al(),t),g_e={class:"main"},v_e=ti(()=>V("div",{class:"maintitle"},[V("img",{class:"img",src:w5}),V("p",null,"plan B 启动！")],-1)),y_e={class:"date"},b_e={class:"datebox"},x_e=ti(()=>V("p",{class:"title"},"日常工作",-1)),w_e={key:0,class:"content"},__e={key:1,class:"content"},S_e={key:0,class:"taggoing",style:{"margin-bottom":"8px"}},C_e={class:"going"},E_e={class:"point"},T_e={key:1,class:"taggoing",style:{"margin-bottom":"8px",color:"#38d170"}},k_e={key:2,class:"tasktime"},A_e={style:{"font-size":"18px"}},M_e={style:{"font-size":"14px","text-indent":"1em"}},N_e={key:3,style:{"font-size":"12px"}},$_e=ti(()=>V("p",null,"预计流程：",-1)),I_e={class:"thetaskbtn"},D_e=["onClick"],R_e=["onClick"],O_e={class:"dateboxsmall"},F_e=ti(()=>V("p",null,"📝",-1)),L_e=ti(()=>V("p",{class:"title"},"日常记录",-1)),P_e={key:0,class:"content"},z_e={key:1,class:"content"},B_e={key:0},U_e={key:1},V_e={key:2},W_e={key:3},G_e={key:4},H_e=ti(()=>V("div",{class:"dateboxsmall"},[V("div",{class:"titlebox"},[V("p",null,"🖨️"),V("p",{class:"title"},"日常总结")]),V("p",null,"施工中...")],-1)),j_e={class:"plan"},q_e={class:"planbox"},X_e=ti(()=>V("div",{class:"titlebox"},[V("p",null,"🈵"),V("p",{class:"title"},"当前任务栏")],-1)),Y_e={class:"content"},K_e={class:"taggoing"},Z_e={class:"going"},J_e={class:"point"},Q_e={class:"task"},e2e={class:"date"},t2e={class:"planbox"},n2e=ti(()=>V("div",{class:"titlebox"},[V("p",null,"🉐"),V("p",{class:"title"},"主线任务")],-1)),r2e={class:"content"},i2e={class:"item"},s2e={class:"taggoing"},a2e={class:"going"},o2e=ti(()=>V("p",{class:"task"},"活下去！stillwarter!",-1)),l2e=ti(()=>V("p",{class:"date"},"2022-xx-xx ~ ?",-1)),u2e=ti(()=>V("div",{class:"tagpreparation"},[Hr(" 准备中 "),V("div",{class:"loading"},[V("div",{class:"in"})])],-1)),c2e={class:"task"},f2e={class:"date"},d2e={class:"planbox"},h2e=ti(()=>V("div",{class:"titlebox"},[V("p",null,"🉑"),V("p",{class:"title"},"支线任务")],-1)),p2e={class:"content"},m2e=ti(()=>V("div",{class:"tagdream"},[Hr(" 做梦中 "),V("div",{class:"zzz"},[V("p",null,"z"),V("p",null,"z"),V("p",null,"z")])],-1)),g2e={class:"task"},v2e={class:"date"},y2e=ti(()=>V("div",{class:"planbox"},[V("div",{class:"titlebox"},[V("p",null,"💪"),V("p",{class:"title"},"成就")]),V("div",{class:"content"}," 你的成就空空如也，小子再好好练练吧！ ")],-1)),b2e={class:"item"},x2e=ti(()=>V("p",{class:"lable"},"任务标题:",-1)),w2e=["onUpdate:modelValue"],_2e={class:"item"},S2e=ti(()=>V("p",{class:"lable"},"任务描述:",-1)),C2e=["onUpdate:modelValue"],E2e={class:"item"},T2e=ti(()=>V("p",{class:"lable"},"任务时限:",-1)),k2e=["onUpdate:modelValue"],A2e={class:"item"},M2e=ti(()=>V("p",{class:"lable"},"预计流程:",-1)),N2e=["onClick"],$2e={key:0,class:"childitem"},I2e={class:"lable"},D2e=["onUpdate:modelValue"],R2e=["onClick"],O2e={class:"suretask"},F2e=["onClick"],L2e=["onClick"],P2e={class:"item"},z2e=ti(()=>V("p",{class:"lable"},"记录类型:",-1)),B2e=pv('<option value="1" data-v-a2748685>完成类 - 完成某项工作✔️</option><option value="2" data-v-a2748685>通知类 - 一些需要后续完成的事情📢</option><option value="3" data-v-a2748685>禁止类 - 错误的想法🚫</option><option value="4" data-v-a2748685>警告类 - 需要完善的东西⚠️</option><option value="5" data-v-a2748685>疑问类 - 需要明白的东西❓</option>',5),U2e=[B2e],V2e={class:"item"},W2e=ti(()=>V("p",{class:"lable"},"记录描述:",-1)),G2e=Zi({__name:"plan",setup(t){const e=Mt(null),n=Mt(null),r=Mt(null),i=Mt([]),s=Mt([]);let a=Mt([{name:"",des:"",time:"",child:[],finish:"",isclose:0}]),o=Mt({type:"1",content:""});function l(){e.value.style.zIndex=0,n.value.style.transform="scale(1)",c()}function u(){e.value.style.zIndex=0,r.value.style.transform="scale(1)",f()}function c(){const _={name:"",des:"",time:"",child:[],finish:"",isclose:0};a.value[0]=_}function f(){const _={type:"1",content:""};o.value=_}function d(_){_.child.length==0||_.child[_.child.length-1]!=""?_.child.push(""):alert("请先编辑子任务内容")}function h(_,E){console.log(_,E),E.splice(_,1)}function p(_){_.name&&_.des&&_.time?(n.value.style.transform="scale(0)",setTimeout(()=>{e.value.style.zIndex=10},250),a.value[0].time*=60,i.value.push(a.value[0]),y(_)):alert("任务必须要有标题，描述，时限信息")}function m(){o.value.type&&o.value.content?(s.value.push(o.value),r.value.style.transform="scale(0)",setTimeout(()=>{e.value.style.zIndex=10},250)):alert("记录必须要内容")}function g(){n.value.style.transform="scale(0)",setTimeout(()=>{e.value.style.zIndex=10},250)}function v(){r.value.style.transform="scale(0)",setTimeout(()=>{e.value.style.zIndex=10},250)}function y(_){_.timer=setInterval(()=>{b(_),_.time--,_.time<=0&&(clearInterval(_.timer),window.Notification.permission=="granted"?w(_):window.Notification.permission!="denied"&&window.Notification.requestPermission(function(E){w(_)}))},1e3)}function b(_){const E=parseInt(_.time/60),T=_.time%60;_.timeshow=`${E}分${T}秒`}function x(){let _=JSON.stringify(i.value);if(i.value.length){var E=document.createElement("a"),T=window.URL.createObjectURL(new Blob([_],{type:""}));E.href=T,E.download="stillwarter-dailytasks.txt",E.click(),window.URL.revokeObjectURL(T)}}function w(_){if(_.finish)new Notification("stillwarter-blog：",{body:`${_.name}任务已完成`,icon:"https://file.fishpi.cn/2022/07/MOSHED2022621164630-1b1ec532.gif?imageView2/1/w/210/h/210/interlace/0/q/100"});else{if(_.isclose)return;new Notification("stillwarter-blog：",{body:`${_.name}任务时限已到达`,icon:"https://file.fishpi.cn/2022/07/MOSHED2022621164630-1b1ec532.gif?imageView2/1/w/210/h/210/interlace/0/q/100"})}}function S(_,E){_.time=0,_.isclose=1,i.value.splice(E,1)}function C(_){_.finish=1,_.time=0}return(_,E)=>(De(),Re("div",g_e,[V("div",{class:"shodow",ref_key:"shadow",ref:e},[v_e,V("div",y_e,[V("div",b_e,[V("div",{class:"titlebox"},[V("p",{style:{cursor:"pointer"},onClick:x},"🈺"),x_e,V("button",{class:"btn",onClick:l},"⏳")]),i.value.length==0?(De(),Re("div",w_e," 现在没有任务捏... ")):(De(),Re("div",__e,[(De(!0),Re(Dn,null,Pn(i.value,(T,k)=>(De(),Re("div",{class:"thetask",key:k},[T.time&&!T.finish?(De(),Re("div",S_e,[Hr(" 进行中 "),V("p",C_e,[(De(),Re(Dn,null,Pn(4,(M,A)=>V("p",E_e,".")),64))])])):Rr("",!0),!T.time||T.finish?(De(),Re("div",T_e," 已完成 ")):Rr("",!0),T.time&&!T.finish?(De(),Re("p",k_e,bt(T.timeshow),1)):Rr("",!0),V("p",A_e,bt(T.name),1),V("p",M_e,bt(T.des),1),T.child.length?(De(),Re("div",N_e,[$_e,(De(!0),Re(Dn,null,Pn(T.child,(M,A)=>(De(),Re("p",{key:A},bt(A+1)+"."+bt(M),1))),128))])):Rr("",!0),V("div",I_e,[V("div",{class:"btn",onClick:M=>S(T,k),style:{"margin-right":"4px"}},"关闭",8,D_e),T.time!=0?(De(),Re("div",{key:0,class:"btn",onClick:M=>C(T)},"完成",8,R_e)):Rr("",!0)])]))),128))]))]),V("div",O_e,[V("div",{class:"titlebox"},[F_e,L_e,V("button",{class:"btn",onClick:u},"⏳")]),s.value.length==0?(De(),Re("div",P_e," 现在没有记录捏... ")):(De(),Re("div",z_e,[(De(!0),Re(Dn,null,Pn(s.value,(T,k)=>(De(),Re("div",{class:"therecord",key:k},[T.type==1?(De(),Re("div",B_e,"✔️")):Rr("",!0),T.type==2?(De(),Re("div",U_e,"📢")):Rr("",!0),T.type==3?(De(),Re("div",V_e,"🚫")):Rr("",!0),T.type==4?(De(),Re("div",W_e,"⚠️")):Rr("",!0),T.type==5?(De(),Re("div",G_e,"❓")):Rr("",!0),Hr(" -"+bt(T.content),1)]))),128))]))]),H_e]),V("div",j_e,[V("div",q_e,[X_e,V("div",Y_e,[(De(!0),Re(Dn,null,Pn(_r(h_e),(T,k)=>(De(),Re("div",{class:"item",key:k},[V("div",K_e,[Hr(" 进行中 "),V("p",Z_e,[(De(),Re(Dn,null,Pn(4,(M,A)=>V("p",J_e,".")),64))])]),V("p",Q_e,bt(T.name),1),V("p",e2e,bt(T.date),1)]))),128))])]),V("div",t2e,[n2e,V("div",r2e,[V("div",i2e,[V("div",s2e,[Hr(" 进行中 "),V("p",a2e,[(De(),Re(Dn,null,Pn(4,(T,k)=>V("p",{class:"point",key:k},".")),64))])]),o2e,l2e]),(De(!0),Re(Dn,null,Pn(_r(p_e),(T,k)=>(De(),Re("div",{class:"item",key:k},[u2e,V("p",c2e,bt(T.name),1),V("p",f2e,bt(T.date),1)]))),128))])]),V("div",d2e,[h2e,V("div",p2e,[(De(!0),Re(Dn,null,Pn(_r(m_e),(T,k)=>(De(),Re("div",{class:"item",key:k},[m2e,V("p",g2e,bt(T.name),1),V("p",v2e,bt(T.date),1)]))),128))])]),y2e])],512),V("div",{class:"editdatetask",ref_key:"editdatetask",ref:n},[Hr(" 任务编辑 "),(De(!0),Re(Dn,null,Pn(_r(a),(T,k)=>(De(),Re("div",{class:"task",key:k},[V("div",b2e,[x2e,Wm(V("input",{type:"text",placeholder:"没想好可以先摸鱼",name:"title","onUpdate:modelValue":M=>T.name=M},null,8,w2e),[[Cb,T.name]])]),V("div",_2e,[S2e,Wm(V("textarea",{cols:"50",rows:"5","onUpdate:modelValue":M=>T.des=M,placeholder:"没想好可以先摸鱼"}," ",8,C2e),[[Cb,T.des]])]),V("div",E2e,[T2e,Wm(V("input",{type:"text",placeholder:"时间单位：分钟",name:"tasktime","onUpdate:modelValue":M=>T.time=M},null,8,k2e),[[Cb,T.time]])]),V("div",A2e,[M2e,V("button",{class:"addbtn",onClick:M=>d(T)}," 增加流程 (+) ",8,N2e)]),T.child.length?(De(),Re("div",$2e,[(De(!0),Re(Dn,null,Pn(T.child,(M,A)=>(De(),Re("div",{class:"child",key:A},[V("p",I2e,bt(A+1)+".",1),Wm(V("textarea",{cols:"40",rows:"1","onUpdate:modelValue":N=>T.child[A]=N,placeholder:"把容易变得更容易"},null,8,D2e),[[Cb,T.child[A]]]),V("div",{class:"del",onClick:N=>h(A,T.child)},"➖",8,R2e)]))),128))])):Rr("",!0),V("div",O2e,[V("div",{class:"btn",onClick:M=>p(T),style:{"margin-right":"10px"}},"保存",8,F2e),V("div",{class:"btn",onClick:M=>g()},"取消",8,L2e)])]))),128))],512),V("div",{class:"editrecord",ref_key:"editrecord",ref:r},[Hr(" 日常记录 "),V("div",P2e,[z2e,Wm(V("select",{"onUpdate:modelValue":E[0]||(E[0]=T=>_r(o).type=T)},U2e,512),[[R1e,_r(o).type]])]),V("div",V2e,[W2e,Wm(V("textarea",{cols:"50",rows:"5","onUpdate:modelValue":E[1]||(E[1]=T=>_r(o).content=T),placeholder:"记录你的想法 问题或者？"}," ",512),[[Cb,_r(o).content]])]),V("div",{class:"suretask"},[V("div",{class:"btn",onClick:m,style:{"margin-right":"10px"}},"保存"),V("div",{class:"btn",onClick:v},"取消")])],512)]))}});const H2e=xs(G2e,[["__scopeId","data-v-a2748685"]]),j2e=[{iswork:0,workcontent:[]},{iswork:0,workcontent:[]},{iswork:0,workcontent:[]},{iswork:0,workcontent:[]},{iswork:0,workcontent:[]},{iswork:0,workcontent:[]},{iswork:0,workcontent:[]},{iswork:0,workcontent:[]},{iswork:0,workcontent:[]},{iswork:0,workcontent:[]},{iswork:0,workcontent:[]},{iswork:0,workcontent:[]},{iswork:0,workcontent:[]},{iswork:0,workcontent:[]},{iswork:0,workcontent:[]},{iswork:0,workcontent:[]},{iswork:1,workcontent:[{name:"工作日志上线",des:"工作日志正式上线，将用于记录日常工作进展，遇到的疑惑，如何解决问题，需要改的的地方，等等..."}]},{iswork:1,workcontent:[{name:"动画流程预备优化",des:"准备一些动画上的逻辑进行复局，然后思考如何优化...",aim:"目标是解决当前动画无法实现交互的局限",status:["目前的动画是使用animation的方式进行处理，在进行动画前，会由js取得当前滚动范围的高度，然后生成对应的animationcss代码，再添加到对应元素里，然后dom元素就会按照预设的走向动起来","在动画切换的时候，函数会检索当前有动画属性的元素，脚本会判断当前元素是否有animation属性，有就清除，这样元素就会回到原来的状态，然后再加入新的css动画代码，再加入新的animation属性","这样循环下去，就得到一组不断迭代的动画，在切换css代码的时候，就可以更新数据,现在遇到的问题就是，当我们手动去点击按钮，改变数据的时候，此时动画也必须随之改变。"],todo:["在数据改变后，当前的动画需要清空，然后用别的动画去替代新数据","在数据更新前，可以加入一些提示","思考如何减弱计时器与动画之间的耦合"]},{name:"初建常用函数表",des:"存放一些常用的逻辑函数。",aim:"目标是提高开发效率...搬砖，也是有技巧的！",status:[" 建立常用date函数表，里面又一些日期相关的函数 "]},{name:"继续进行stillwarter-draw",des:"完善这个东西..."}]}],q2e=t=>(sl("data-v-c8942887"),t=t(),al(),t),X2e={class:"main"},Y2e=pv('<div class="maintitle" data-v-c8942887><img class="img" src="'+w5+'" data-v-c8942887><p data-v-c8942887>stillwarter搬砖日志</p></div><div class="expected" data-v-c8942887>一周计划书（准备..）</div><div class="expected" data-v-c8942887>导出功能（准备..）</div><div class="expected" data-v-c8942887>解析功能（准备..）</div>',4),K2e={class:"log"},Z2e={class:"date"},J2e={key:0,class:"mouth"},Q2e={key:1,class:"mouth"},eSe={key:2,class:"day"},tSe={key:3,class:"day"},nSe={key:0,class:"nomark"},rSe=q2e(()=>V("span",{style:{"font-family":"'normal'"}},"🈚",-1)),iSe={key:1,class:"workcontent"},sSe={class:"worknmame"},aSe={class:"workdes"},oSe={key:0,class:"workaim"},lSe={key:1,class:"workstatus"},uSe={key:2,class:"workstatus"},cSe={key:3,class:"worktodo"},fSe=Zi({__name:"log",setup(t){const e=Mt("");return e.value=new Date().getMonth()+1,(n,r)=>(De(),Re("div",X2e,[Y2e,V("div",K2e,[(De(!0),Re(Dn,null,Pn(_r(j2e),(i,s)=>(De(),Re("div",{class:"logitem",key:s},[V("div",Z2e,[e.value<=9?(De(),Re("p",J2e," 0"+bt(e.value)+"- ",1)):(De(),Re("p",Q2e,bt(e.value)+"- ",1)),s<=8?(De(),Re("p",eSe," 0"+bt(s+1),1)):(De(),Re("p",tSe,bt(s+1),1))]),i.iswork?Rr("",!0):(De(),Re("div",nSe,[rSe,Hr(" 今天没有记录捏 ")])),i.iswork?(De(),Re("div",iSe,[(De(!0),Re(Dn,null,Pn(i.workcontent,(a,o)=>(De(),Re("div",{class:"workitem",key:o},[V("p",sSe,bt(o+1)+"."+bt(a.name),1),V("p",aSe,bt(a.des),1),a.aim?(De(),Re("div",oSe," 搬砖目标："+bt(a.aim),1)):Rr("",!0),a.status?Rr("",!0):(De(),Re("div",lSe," 暂无更多内容... ")),a.status?(De(),Re("div",uSe,[Hr(" 现状： "),(De(!0),Re(Dn,null,Pn(a.status,(l,u)=>(De(),Re("p",{class:"item",key:u},bt(u+1)+"."+bt(l),1))),128))])):Rr("",!0),a.todo?(De(),Re("div",cSe,[Hr(" 预想： "),(De(!0),Re(Dn,null,Pn(a.todo,(l,u)=>(De(),Re("p",{class:"item",key:u},bt(u+1)+"."+bt(l),1))),128))])):Rr("",!0)]))),128))])):Rr("",!0)]))),128))])]))}});const dSe=xs(fSe,[["__scopeId","data-v-c8942887"]]);/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const _5="150",qm={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Xm={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},hSe=0,OW=1,pSe=2,RQ=1,mSe=2,m1=3,vd=0,Qa=1,Wf=2,ad=0,Pg=1,FW=2,LW=3,PW=4,gSe=5,wg=100,vSe=101,ySe=102,zW=103,BW=104,bSe=200,xSe=201,wSe=202,_Se=203,OQ=204,FQ=205,SSe=206,CSe=207,ESe=208,TSe=209,kSe=210,ASe=0,MSe=1,NSe=2,RO=3,$Se=4,ISe=5,DSe=6,RSe=7,LQ=0,OSe=1,FSe=2,Lc=0,LSe=1,PSe=2,zSe=3,BSe=4,USe=5,PQ=300,l0=301,u0=302,OO=303,FO=304,IA=306,LO=1e3,wl=1001,PO=1002,ks=1003,UW=1004,II=1005,Ao=1006,VSe=1007,mx=1008,hp=1009,WSe=1010,GSe=1011,zQ=1012,HSe=1013,Gh=1014,Hh=1015,gx=1016,jSe=1017,qSe=1018,zg=1020,XSe=1021,_l=1023,YSe=1024,KSe=1025,Qh=1026,c0=1027,ZSe=1028,JSe=1029,QSe=1030,eCe=1031,tCe=1033,DI=33776,RI=33777,OI=33778,FI=33779,VW=35840,WW=35841,GW=35842,HW=35843,nCe=36196,jW=37492,qW=37496,XW=37808,YW=37809,KW=37810,ZW=37811,JW=37812,QW=37813,eG=37814,tG=37815,nG=37816,rG=37817,iG=37818,sG=37819,aG=37820,oG=37821,LI=36492,rCe=36283,lG=36284,uG=36285,cG=36286,pp=3e3,rr=3001,iCe=3200,sCe=3201,aCe=0,oCe=1,su="srgb",vx="srgb-linear",BQ="display-p3",PI=7680,lCe=519,fG=35044,dG="300 es",zO=1035;class em{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,a=i.length;s<a;s++)i[s].call(this,e);e.target=null}}}const ts=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],zI=Math.PI/180,hG=180/Math.PI;function Mw(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(ts[t&255]+ts[t>>8&255]+ts[t>>16&255]+ts[t>>24&255]+"-"+ts[e&255]+ts[e>>8&255]+"-"+ts[e>>16&15|64]+ts[e>>24&255]+"-"+ts[n&63|128]+ts[n>>8&255]+"-"+ts[n>>16&255]+ts[n>>24&255]+ts[r&255]+ts[r>>8&255]+ts[r>>16&255]+ts[r>>24&255]).toLowerCase()}function ia(t,e,n){return Math.max(e,Math.min(n,t))}function uCe(t,e){return(t%e+e)%e}function BI(t,e,n){return(1-n)*t+n*e}function pG(t){return(t&t-1)===0&&t!==0}function cCe(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function IS(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Fa(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}let _n=class UQ{constructor(e=0,n=0){UQ.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),s=this.x-e.x,a=this.y-e.y;return this.x=s*r-a*i+e.x,this.y=s*i+a*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}};class Fs{constructor(){Fs.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,n,r,i,s,a,o,l,u){const c=this.elements;return c[0]=e,c[1]=i,c[2]=o,c[3]=n,c[4]=s,c[5]=l,c[6]=r,c[7]=a,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,a=r[0],o=r[3],l=r[6],u=r[1],c=r[4],f=r[7],d=r[2],h=r[5],p=r[8],m=i[0],g=i[3],v=i[6],y=i[1],b=i[4],x=i[7],w=i[2],S=i[5],C=i[8];return s[0]=a*m+o*y+l*w,s[3]=a*g+o*b+l*S,s[6]=a*v+o*x+l*C,s[1]=u*m+c*y+f*w,s[4]=u*g+c*b+f*S,s[7]=u*v+c*x+f*C,s[2]=d*m+h*y+p*w,s[5]=d*g+h*b+p*S,s[8]=d*v+h*x+p*C,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8];return n*a*c-n*o*u-r*s*c+r*o*l+i*s*u-i*a*l}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8],f=c*a-o*u,d=o*l-c*s,h=u*s-a*l,p=n*f+r*d+i*h;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return e[0]=f*m,e[1]=(i*u-c*r)*m,e[2]=(o*r-i*a)*m,e[3]=d*m,e[4]=(c*n-i*l)*m,e[5]=(i*s-o*n)*m,e[6]=h*m,e[7]=(r*l-u*n)*m,e[8]=(a*n-r*s)*m,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,s,a,o){const l=Math.cos(s),u=Math.sin(s);return this.set(r*l,r*u,-r*(l*a+u*o)+a+e,-i*u,i*l,-i*(-u*a+l*o)+o+n,0,0,1),this}scale(e,n){return this.premultiply(UI.makeScale(e,n)),this}rotate(e){return this.premultiply(UI.makeRotation(-e)),this}translate(e,n){return this.premultiply(UI.makeTranslation(e,n)),this}makeTranslation(e,n){return this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const UI=new Fs;function VQ(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function VE(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}class mp{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,s,a,o){let l=r[i+0],u=r[i+1],c=r[i+2],f=r[i+3];const d=s[a+0],h=s[a+1],p=s[a+2],m=s[a+3];if(o===0){e[n+0]=l,e[n+1]=u,e[n+2]=c,e[n+3]=f;return}if(o===1){e[n+0]=d,e[n+1]=h,e[n+2]=p,e[n+3]=m;return}if(f!==m||l!==d||u!==h||c!==p){let g=1-o;const v=l*d+u*h+c*p+f*m,y=v>=0?1:-1,b=1-v*v;if(b>Number.EPSILON){const w=Math.sqrt(b),S=Math.atan2(w,v*y);g=Math.sin(g*S)/w,o=Math.sin(o*S)/w}const x=o*y;if(l=l*g+d*x,u=u*g+h*x,c=c*g+p*x,f=f*g+m*x,g===1-o){const w=1/Math.sqrt(l*l+u*u+c*c+f*f);l*=w,u*=w,c*=w,f*=w}}e[n]=l,e[n+1]=u,e[n+2]=c,e[n+3]=f}static multiplyQuaternionsFlat(e,n,r,i,s,a){const o=r[i],l=r[i+1],u=r[i+2],c=r[i+3],f=s[a],d=s[a+1],h=s[a+2],p=s[a+3];return e[n]=o*p+c*f+l*h-u*d,e[n+1]=l*p+c*d+u*f-o*h,e[n+2]=u*p+c*h+o*d-l*f,e[n+3]=c*p-o*f-l*d-u*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n){const r=e._x,i=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,u=o(r/2),c=o(i/2),f=o(s/2),d=l(r/2),h=l(i/2),p=l(s/2);switch(a){case"XYZ":this._x=d*c*f+u*h*p,this._y=u*h*f-d*c*p,this._z=u*c*p+d*h*f,this._w=u*c*f-d*h*p;break;case"YXZ":this._x=d*c*f+u*h*p,this._y=u*h*f-d*c*p,this._z=u*c*p-d*h*f,this._w=u*c*f+d*h*p;break;case"ZXY":this._x=d*c*f-u*h*p,this._y=u*h*f+d*c*p,this._z=u*c*p+d*h*f,this._w=u*c*f-d*h*p;break;case"ZYX":this._x=d*c*f-u*h*p,this._y=u*h*f+d*c*p,this._z=u*c*p-d*h*f,this._w=u*c*f+d*h*p;break;case"YZX":this._x=d*c*f+u*h*p,this._y=u*h*f+d*c*p,this._z=u*c*p-d*h*f,this._w=u*c*f-d*h*p;break;case"XZY":this._x=d*c*f-u*h*p,this._y=u*h*f-d*c*p,this._z=u*c*p+d*h*f,this._w=u*c*f+d*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return n!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],s=n[8],a=n[1],o=n[5],l=n[9],u=n[2],c=n[6],f=n[10],d=r+o+f;if(d>0){const h=.5/Math.sqrt(d+1);this._w=.25/h,this._x=(c-l)*h,this._y=(s-u)*h,this._z=(a-i)*h}else if(r>o&&r>f){const h=2*Math.sqrt(1+r-o-f);this._w=(c-l)/h,this._x=.25*h,this._y=(i+a)/h,this._z=(s+u)/h}else if(o>f){const h=2*Math.sqrt(1+o-r-f);this._w=(s-u)/h,this._x=(i+a)/h,this._y=.25*h,this._z=(l+c)/h}else{const h=2*Math.sqrt(1+f-r-o);this._w=(a-i)/h,this._x=(s+u)/h,this._y=(l+c)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ia(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,s=e._z,a=e._w,o=n._x,l=n._y,u=n._z,c=n._w;return this._x=r*c+a*o+i*u-s*l,this._y=i*c+a*l+s*o-r*u,this._z=s*c+a*u+r*l-i*o,this._w=a*c-r*o-i*l-s*u,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,a=this._w;let o=a*e._w+r*e._x+i*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=r,this._y=i,this._z=s,this;const l=1-o*o;if(l<=Number.EPSILON){const h=1-n;return this._w=h*a+n*this._w,this._x=h*r+n*this._x,this._y=h*i+n*this._y,this._z=h*s+n*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(l),c=Math.atan2(u,o),f=Math.sin((1-n)*c)/u,d=Math.sin(n*c)/u;return this._w=a*f+this._w*d,this._x=r*f+this._x*d,this._y=i*f+this._y*d,this._z=s*f+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=Math.random(),n=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(n*Math.cos(i),r*Math.sin(s),r*Math.cos(s),n*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class me{constructor(e=0,n=0,r=0){me.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(mG.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(mG.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[3]*r+s[6]*i,this.y=s[1]*n+s[4]*r+s[7]*i,this.z=s[2]*n+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=e.elements,a=1/(s[3]*n+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*n+s[4]*r+s[8]*i+s[12])*a,this.y=(s[1]*n+s[5]*r+s[9]*i+s[13])*a,this.z=(s[2]*n+s[6]*r+s[10]*i+s[14])*a,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,s=e.x,a=e.y,o=e.z,l=e.w,u=l*n+a*i-o*r,c=l*r+o*n-s*i,f=l*i+s*r-a*n,d=-s*n-a*r-o*i;return this.x=u*l+d*-s+c*-o-f*-a,this.y=c*l+d*-a+f*-s-u*-o,this.z=f*l+d*-o+u*-a-c*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*i,this.y=s[1]*n+s[5]*r+s[9]*i,this.z=s[2]*n+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,s=e.z,a=n.x,o=n.y,l=n.z;return this.x=i*l-s*o,this.y=s*a-r*l,this.z=r*o-i*a,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return VI.copy(this).projectOnVector(e),this.sub(VI)}reflect(e){return this.sub(VI.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(ia(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(n),this.y=r*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const VI=new me,mG=new mp;function Bg(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function WI(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}const fCe=new Fs().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),dCe=new Fs().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),Gf=new me;function hCe(t){return t.convertSRGBToLinear(),Gf.set(t.r,t.g,t.b).applyMatrix3(dCe),t.setRGB(Gf.x,Gf.y,Gf.z)}function pCe(t){return Gf.set(t.r,t.g,t.b).applyMatrix3(fCe),t.setRGB(Gf.x,Gf.y,Gf.z).convertLinearToSRGB()}const mCe={[vx]:t=>t,[su]:t=>t.convertSRGBToLinear(),[BQ]:hCe},gCe={[vx]:t=>t,[su]:t=>t.convertLinearToSRGB(),[BQ]:pCe},Es={enabled:!1,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(t){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!t},get workingColorSpace(){return vx},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const r=mCe[e],i=gCe[n];if(r===void 0||i===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${n}".`);return i(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}};let Ym;class WQ{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{Ym===void 0&&(Ym=VE("canvas")),Ym.width=e.width,Ym.height=e.height;const r=Ym.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=Ym}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=VE("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let a=0;a<s.length;a++)s[a]=Bg(s[a]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(Bg(n[r]/255)*255):n[r]=Bg(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class GQ{constructor(e=null){this.isSource=!0,this.uuid=Mw(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let a=0,o=i.length;a<o;a++)i[a].isDataTexture?s.push(GI(i[a].image)):s.push(GI(i[a]))}else s=GI(i);r.url=s}return n||(e.images[this.uuid]=r),r}}function GI(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?WQ.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let vCe=0;class eo extends em{constructor(e=eo.DEFAULT_IMAGE,n=eo.DEFAULT_MAPPING,r=wl,i=wl,s=Ao,a=mx,o=_l,l=hp,u=eo.DEFAULT_ANISOTROPY,c=pp){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:vCe++}),this.uuid=Mw(),this.name="",this.source=new GQ(e),this.mipmaps=[],this.mapping=n,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=a,this.anisotropy=u,this.format=o,this.internalFormat=null,this.type=l,this.offset=new _n(0,0),this.repeat=new _n(1,1),this.center=new _n(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Fs,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==PQ)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case LO:e.x=e.x-Math.floor(e.x);break;case wl:e.x=e.x<0?0:1;break;case PO:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case LO:e.y=e.y-Math.floor(e.y);break;case wl:e.y=e.y<0?0:1;break;case PO:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}eo.DEFAULT_IMAGE=null;eo.DEFAULT_MAPPING=PQ;eo.DEFAULT_ANISOTROPY=1;class qi{constructor(e=0,n=0,r=0,i=1){qi.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=this.w,a=e.elements;return this.x=a[0]*n+a[4]*r+a[8]*i+a[12]*s,this.y=a[1]*n+a[5]*r+a[9]*i+a[13]*s,this.z=a[2]*n+a[6]*r+a[10]*i+a[14]*s,this.w=a[3]*n+a[7]*r+a[11]*i+a[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,s;const l=e.elements,u=l[0],c=l[4],f=l[8],d=l[1],h=l[5],p=l[9],m=l[2],g=l[6],v=l[10];if(Math.abs(c-d)<.01&&Math.abs(f-m)<.01&&Math.abs(p-g)<.01){if(Math.abs(c+d)<.1&&Math.abs(f+m)<.1&&Math.abs(p+g)<.1&&Math.abs(u+h+v-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const b=(u+1)/2,x=(h+1)/2,w=(v+1)/2,S=(c+d)/4,C=(f+m)/4,_=(p+g)/4;return b>x&&b>w?b<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(b),i=S/r,s=C/r):x>w?x<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(x),r=S/i,s=_/i):w<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(w),r=C/s,i=_/s),this.set(r,i,s,n),this}let y=Math.sqrt((g-p)*(g-p)+(f-m)*(f-m)+(d-c)*(d-c));return Math.abs(y)<.001&&(y=1),this.x=(g-p)/y,this.y=(f-m)/y,this.z=(d-c)/y,this.w=Math.acos((u+h+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class gp extends em{constructor(e=1,n=1,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new qi(0,0,e,n),this.scissorTest=!1,this.viewport=new qi(0,0,e,n);const i={width:e,height:n,depth:1};this.texture=new eo(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:Ao,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,n,r=1){(this.width!==e||this.height!==n||this.depth!==r)&&(this.width=e,this.height=n,this.depth=r,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new GQ(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class HQ extends eo{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=ks,this.minFilter=ks,this.wrapR=wl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class yCe extends eo{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=ks,this.minFilter=ks,this.wrapR=wl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Nw{constructor(e=new me(1/0,1/0,1/0),n=new me(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){let n=1/0,r=1/0,i=1/0,s=-1/0,a=-1/0,o=-1/0;for(let l=0,u=e.length;l<u;l+=3){const c=e[l],f=e[l+1],d=e[l+2];c<n&&(n=c),f<r&&(r=f),d<i&&(i=d),c>s&&(s=c),f>a&&(a=f),d>o&&(o=d)}return this.min.set(n,r,i),this.max.set(s,a,o),this}setFromBufferAttribute(e){let n=1/0,r=1/0,i=1/0,s=-1/0,a=-1/0,o=-1/0;for(let l=0,u=e.count;l<u;l++){const c=e.getX(l),f=e.getY(l),d=e.getZ(l);c<n&&(n=c),f<r&&(r=f),d<i&&(i=d),c>s&&(s=c),f>a&&(a=f),d>o&&(o=d)}return this.min.set(n,r,i),this.max.set(s,a,o),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=uh.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0)if(n&&r.attributes!=null&&r.attributes.position!==void 0){const s=r.attributes.position;for(let a=0,o=s.count;a<o;a++)uh.fromBufferAttribute(s,a).applyMatrix4(e.matrixWorld),this.expandByPoint(uh)}else r.boundingBox===null&&r.computeBoundingBox(),HI.copy(r.boundingBox),HI.applyMatrix4(e.matrixWorld),this.union(HI);const i=e.children;for(let s=0,a=i.length;s<a;s++)this.expandByObject(i[s],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,uh),uh.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Tb),DS.subVectors(this.max,Tb),Km.subVectors(e.a,Tb),Zm.subVectors(e.b,Tb),Jm.subVectors(e.c,Tb),kf.subVectors(Zm,Km),Af.subVectors(Jm,Zm),ch.subVectors(Km,Jm);let n=[0,-kf.z,kf.y,0,-Af.z,Af.y,0,-ch.z,ch.y,kf.z,0,-kf.x,Af.z,0,-Af.x,ch.z,0,-ch.x,-kf.y,kf.x,0,-Af.y,Af.x,0,-ch.y,ch.x,0];return!jI(n,Km,Zm,Jm,DS)||(n=[1,0,0,0,1,0,0,0,1],!jI(n,Km,Zm,Jm,DS))?!1:(RS.crossVectors(kf,Af),n=[RS.x,RS.y,RS.z],jI(n,Km,Zm,Jm,DS))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,uh).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(uh).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(cc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),cc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),cc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),cc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),cc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),cc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),cc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),cc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(cc),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const cc=[new me,new me,new me,new me,new me,new me,new me,new me],uh=new me,HI=new Nw,Km=new me,Zm=new me,Jm=new me,kf=new me,Af=new me,ch=new me,Tb=new me,DS=new me,RS=new me,fh=new me;function jI(t,e,n,r,i){for(let s=0,a=t.length-3;s<=a;s+=3){fh.fromArray(t,s);const o=i.x*Math.abs(fh.x)+i.y*Math.abs(fh.y)+i.z*Math.abs(fh.z),l=e.dot(fh),u=n.dot(fh),c=r.dot(fh);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>o)return!1}return!0}const bCe=new Nw,kb=new me,qI=new me;class DA{constructor(e=new me,n=-1){this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):bCe.setFromPoints(e).getCenter(r);let i=0;for(let s=0,a=e.length;s<a;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;kb.subVectors(e,this.center);const n=kb.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(kb,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(qI.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(kb.copy(e.center).add(qI)),this.expandByPoint(kb.copy(e.center).sub(qI))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const fc=new me,XI=new me,OS=new me,Mf=new me,YI=new me,FS=new me,KI=new me;class jQ{constructor(e=new me,n=new me(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,fc)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=fc.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(fc.copy(this.origin).addScaledVector(this.direction,n),fc.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){XI.copy(e).add(n).multiplyScalar(.5),OS.copy(n).sub(e).normalize(),Mf.copy(this.origin).sub(XI);const s=e.distanceTo(n)*.5,a=-this.direction.dot(OS),o=Mf.dot(this.direction),l=-Mf.dot(OS),u=Mf.lengthSq(),c=Math.abs(1-a*a);let f,d,h,p;if(c>0)if(f=a*l-o,d=a*o-l,p=s*c,f>=0)if(d>=-p)if(d<=p){const m=1/c;f*=m,d*=m,h=f*(f+a*d+2*o)+d*(a*f+d+2*l)+u}else d=s,f=Math.max(0,-(a*d+o)),h=-f*f+d*(d+2*l)+u;else d=-s,f=Math.max(0,-(a*d+o)),h=-f*f+d*(d+2*l)+u;else d<=-p?(f=Math.max(0,-(-a*s+o)),d=f>0?-s:Math.min(Math.max(-s,-l),s),h=-f*f+d*(d+2*l)+u):d<=p?(f=0,d=Math.min(Math.max(-s,-l),s),h=d*(d+2*l)+u):(f=Math.max(0,-(a*s+o)),d=f>0?s:Math.min(Math.max(-s,-l),s),h=-f*f+d*(d+2*l)+u);else d=a>0?-s:s,f=Math.max(0,-(a*d+o)),h=-f*f+d*(d+2*l)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,f),i&&i.copy(XI).addScaledVector(OS,d),h}intersectSphere(e,n){fc.subVectors(e.center,this.origin);const r=fc.dot(this.direction),i=fc.dot(fc)-r*r,s=e.radius*e.radius;if(i>s)return null;const a=Math.sqrt(s-i),o=r-a,l=r+a;return l<0?null:o<0?this.at(l,n):this.at(o,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,s,a,o,l;const u=1/this.direction.x,c=1/this.direction.y,f=1/this.direction.z,d=this.origin;return u>=0?(r=(e.min.x-d.x)*u,i=(e.max.x-d.x)*u):(r=(e.max.x-d.x)*u,i=(e.min.x-d.x)*u),c>=0?(s=(e.min.y-d.y)*c,a=(e.max.y-d.y)*c):(s=(e.max.y-d.y)*c,a=(e.min.y-d.y)*c),r>a||s>i||((s>r||isNaN(r))&&(r=s),(a<i||isNaN(i))&&(i=a),f>=0?(o=(e.min.z-d.z)*f,l=(e.max.z-d.z)*f):(o=(e.max.z-d.z)*f,l=(e.min.z-d.z)*f),r>l||o>i)||((o>r||r!==r)&&(r=o),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,fc)!==null}intersectTriangle(e,n,r,i,s){YI.subVectors(n,e),FS.subVectors(r,e),KI.crossVectors(YI,FS);let a=this.direction.dot(KI),o;if(a>0){if(i)return null;o=1}else if(a<0)o=-1,a=-a;else return null;Mf.subVectors(this.origin,e);const l=o*this.direction.dot(FS.crossVectors(Mf,FS));if(l<0)return null;const u=o*this.direction.dot(YI.cross(Mf));if(u<0||l+u>a)return null;const c=-o*Mf.dot(KI);return c<0?null:this.at(c/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Mi{constructor(){Mi.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,n,r,i,s,a,o,l,u,c,f,d,h,p,m,g){const v=this.elements;return v[0]=e,v[4]=n,v[8]=r,v[12]=i,v[1]=s,v[5]=a,v[9]=o,v[13]=l,v[2]=u,v[6]=c,v[10]=f,v[14]=d,v[3]=h,v[7]=p,v[11]=m,v[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Mi().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/Qm.setFromMatrixColumn(e,0).length(),s=1/Qm.setFromMatrixColumn(e,1).length(),a=1/Qm.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*s,n[5]=r[5]*s,n[6]=r[6]*s,n[7]=0,n[8]=r[8]*a,n[9]=r[9]*a,n[10]=r[10]*a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,s=e.z,a=Math.cos(r),o=Math.sin(r),l=Math.cos(i),u=Math.sin(i),c=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const d=a*c,h=a*f,p=o*c,m=o*f;n[0]=l*c,n[4]=-l*f,n[8]=u,n[1]=h+p*u,n[5]=d-m*u,n[9]=-o*l,n[2]=m-d*u,n[6]=p+h*u,n[10]=a*l}else if(e.order==="YXZ"){const d=l*c,h=l*f,p=u*c,m=u*f;n[0]=d+m*o,n[4]=p*o-h,n[8]=a*u,n[1]=a*f,n[5]=a*c,n[9]=-o,n[2]=h*o-p,n[6]=m+d*o,n[10]=a*l}else if(e.order==="ZXY"){const d=l*c,h=l*f,p=u*c,m=u*f;n[0]=d-m*o,n[4]=-a*f,n[8]=p+h*o,n[1]=h+p*o,n[5]=a*c,n[9]=m-d*o,n[2]=-a*u,n[6]=o,n[10]=a*l}else if(e.order==="ZYX"){const d=a*c,h=a*f,p=o*c,m=o*f;n[0]=l*c,n[4]=p*u-h,n[8]=d*u+m,n[1]=l*f,n[5]=m*u+d,n[9]=h*u-p,n[2]=-u,n[6]=o*l,n[10]=a*l}else if(e.order==="YZX"){const d=a*l,h=a*u,p=o*l,m=o*u;n[0]=l*c,n[4]=m-d*f,n[8]=p*f+h,n[1]=f,n[5]=a*c,n[9]=-o*c,n[2]=-u*c,n[6]=h*f+p,n[10]=d-m*f}else if(e.order==="XZY"){const d=a*l,h=a*u,p=o*l,m=o*u;n[0]=l*c,n[4]=-f,n[8]=u*c,n[1]=d*f+m,n[5]=a*c,n[9]=h*f-p,n[2]=p*f-h,n[6]=o*c,n[10]=m*f+d}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(xCe,e,wCe)}lookAt(e,n,r){const i=this.elements;return La.subVectors(e,n),La.lengthSq()===0&&(La.z=1),La.normalize(),Nf.crossVectors(r,La),Nf.lengthSq()===0&&(Math.abs(r.z)===1?La.x+=1e-4:La.z+=1e-4,La.normalize(),Nf.crossVectors(r,La)),Nf.normalize(),LS.crossVectors(La,Nf),i[0]=Nf.x,i[4]=LS.x,i[8]=La.x,i[1]=Nf.y,i[5]=LS.y,i[9]=La.y,i[2]=Nf.z,i[6]=LS.z,i[10]=La.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,a=r[0],o=r[4],l=r[8],u=r[12],c=r[1],f=r[5],d=r[9],h=r[13],p=r[2],m=r[6],g=r[10],v=r[14],y=r[3],b=r[7],x=r[11],w=r[15],S=i[0],C=i[4],_=i[8],E=i[12],T=i[1],k=i[5],M=i[9],A=i[13],N=i[2],$=i[6],D=i[10],P=i[14],O=i[3],B=i[7],H=i[11],te=i[15];return s[0]=a*S+o*T+l*N+u*O,s[4]=a*C+o*k+l*$+u*B,s[8]=a*_+o*M+l*D+u*H,s[12]=a*E+o*A+l*P+u*te,s[1]=c*S+f*T+d*N+h*O,s[5]=c*C+f*k+d*$+h*B,s[9]=c*_+f*M+d*D+h*H,s[13]=c*E+f*A+d*P+h*te,s[2]=p*S+m*T+g*N+v*O,s[6]=p*C+m*k+g*$+v*B,s[10]=p*_+m*M+g*D+v*H,s[14]=p*E+m*A+g*P+v*te,s[3]=y*S+b*T+x*N+w*O,s[7]=y*C+b*k+x*$+w*B,s[11]=y*_+b*M+x*D+w*H,s[15]=y*E+b*A+x*P+w*te,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],s=e[12],a=e[1],o=e[5],l=e[9],u=e[13],c=e[2],f=e[6],d=e[10],h=e[14],p=e[3],m=e[7],g=e[11],v=e[15];return p*(+s*l*f-i*u*f-s*o*d+r*u*d+i*o*h-r*l*h)+m*(+n*l*h-n*u*d+s*a*d-i*a*h+i*u*c-s*l*c)+g*(+n*u*f-n*o*h-s*a*f+r*a*h+s*o*c-r*u*c)+v*(-i*o*c-n*l*f+n*o*d+i*a*f-r*a*d+r*l*c)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8],f=e[9],d=e[10],h=e[11],p=e[12],m=e[13],g=e[14],v=e[15],y=f*g*u-m*d*u+m*l*h-o*g*h-f*l*v+o*d*v,b=p*d*u-c*g*u-p*l*h+a*g*h+c*l*v-a*d*v,x=c*m*u-p*f*u+p*o*h-a*m*h-c*o*v+a*f*v,w=p*f*l-c*m*l-p*o*d+a*m*d+c*o*g-a*f*g,S=n*y+r*b+i*x+s*w;if(S===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const C=1/S;return e[0]=y*C,e[1]=(m*d*s-f*g*s-m*i*h+r*g*h+f*i*v-r*d*v)*C,e[2]=(o*g*s-m*l*s+m*i*u-r*g*u-o*i*v+r*l*v)*C,e[3]=(f*l*s-o*d*s-f*i*u+r*d*u+o*i*h-r*l*h)*C,e[4]=b*C,e[5]=(c*g*s-p*d*s+p*i*h-n*g*h-c*i*v+n*d*v)*C,e[6]=(p*l*s-a*g*s-p*i*u+n*g*u+a*i*v-n*l*v)*C,e[7]=(a*d*s-c*l*s+c*i*u-n*d*u-a*i*h+n*l*h)*C,e[8]=x*C,e[9]=(p*f*s-c*m*s-p*r*h+n*m*h+c*r*v-n*f*v)*C,e[10]=(a*m*s-p*o*s+p*r*u-n*m*u-a*r*v+n*o*v)*C,e[11]=(c*o*s-a*f*s-c*r*u+n*f*u+a*r*h-n*o*h)*C,e[12]=w*C,e[13]=(c*m*i-p*f*i+p*r*d-n*m*d-c*r*g+n*f*g)*C,e[14]=(p*o*i-a*m*i-p*r*l+n*m*l+a*r*g-n*o*g)*C,e[15]=(a*f*i-c*o*i+c*r*l-n*f*l-a*r*d+n*o*d)*C,this}scale(e){const n=this.elements,r=e.x,i=e.y,s=e.z;return n[0]*=r,n[4]*=i,n[8]*=s,n[1]*=r,n[5]*=i,n[9]*=s,n[2]*=r,n[6]*=i,n[10]*=s,n[3]*=r,n[7]*=i,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),s=1-r,a=e.x,o=e.y,l=e.z,u=s*a,c=s*o;return this.set(u*a+r,u*o-i*l,u*l+i*o,0,u*o+i*l,c*o+r,c*l-i*a,0,u*l-i*o,c*l+i*a,s*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,s,a){return this.set(1,r,s,0,e,1,a,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,s=n._x,a=n._y,o=n._z,l=n._w,u=s+s,c=a+a,f=o+o,d=s*u,h=s*c,p=s*f,m=a*c,g=a*f,v=o*f,y=l*u,b=l*c,x=l*f,w=r.x,S=r.y,C=r.z;return i[0]=(1-(m+v))*w,i[1]=(h+x)*w,i[2]=(p-b)*w,i[3]=0,i[4]=(h-x)*S,i[5]=(1-(d+v))*S,i[6]=(g+y)*S,i[7]=0,i[8]=(p+b)*C,i[9]=(g-y)*C,i[10]=(1-(d+m))*C,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let s=Qm.set(i[0],i[1],i[2]).length();const a=Qm.set(i[4],i[5],i[6]).length(),o=Qm.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],dl.copy(this);const u=1/s,c=1/a,f=1/o;return dl.elements[0]*=u,dl.elements[1]*=u,dl.elements[2]*=u,dl.elements[4]*=c,dl.elements[5]*=c,dl.elements[6]*=c,dl.elements[8]*=f,dl.elements[9]*=f,dl.elements[10]*=f,n.setFromRotationMatrix(dl),r.x=s,r.y=a,r.z=o,this}makePerspective(e,n,r,i,s,a){const o=this.elements,l=2*s/(n-e),u=2*s/(r-i),c=(n+e)/(n-e),f=(r+i)/(r-i),d=-(a+s)/(a-s),h=-2*a*s/(a-s);return o[0]=l,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=u,o[9]=f,o[13]=0,o[2]=0,o[6]=0,o[10]=d,o[14]=h,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,n,r,i,s,a){const o=this.elements,l=1/(n-e),u=1/(r-i),c=1/(a-s),f=(n+e)*l,d=(r+i)*u,h=(a+s)*c;return o[0]=2*l,o[4]=0,o[8]=0,o[12]=-f,o[1]=0,o[5]=2*u,o[9]=0,o[13]=-d,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-h,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const Qm=new me,dl=new Mi,xCe=new me(0,0,0),wCe=new me(1,1,1),Nf=new me,LS=new me,La=new me,gG=new Mi,vG=new mp;class RA{constructor(e=0,n=0,r=0,i=RA.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,s=i[0],a=i[4],o=i[8],l=i[1],u=i[5],c=i[9],f=i[2],d=i[6],h=i[10];switch(n){case"XYZ":this._y=Math.asin(ia(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(d,u),this._z=0);break;case"YXZ":this._x=Math.asin(-ia(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,h),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(ia(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-f,h),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-ia(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(ia(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(o,h));break;case"XZY":this._z=Math.asin(-ia(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,u),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return gG.makeRotationFromQuaternion(e),this.setFromRotationMatrix(gG,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return vG.setFromEuler(this),this.setFromQuaternion(vG,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}RA.DEFAULT_ORDER="XYZ";class qQ{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let _Ce=0;const yG=new me,eg=new mp,dc=new Mi,PS=new me,Ab=new me,SCe=new me,CCe=new mp,bG=new me(1,0,0),xG=new me(0,1,0),wG=new me(0,0,1),ECe={type:"added"},_G={type:"removed"};class Ps extends em{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_Ce++}),this.uuid=Mw(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ps.DEFAULT_UP.clone();const e=new me,n=new RA,r=new mp,i=new me(1,1,1);function s(){r.setFromEuler(n,!1)}function a(){n.setFromQuaternion(r,void 0,!1)}n._onChange(s),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Mi},normalMatrix:{value:new Fs}}),this.matrix=new Mi,this.matrixWorld=new Mi,this.matrixAutoUpdate=Ps.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Ps.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new qQ,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return eg.setFromAxisAngle(e,n),this.quaternion.multiply(eg),this}rotateOnWorldAxis(e,n){return eg.setFromAxisAngle(e,n),this.quaternion.premultiply(eg),this}rotateX(e){return this.rotateOnAxis(bG,e)}rotateY(e){return this.rotateOnAxis(xG,e)}rotateZ(e){return this.rotateOnAxis(wG,e)}translateOnAxis(e,n){return yG.copy(e).applyQuaternion(this.quaternion),this.position.add(yG.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(bG,e)}translateY(e){return this.translateOnAxis(xG,e)}translateZ(e){return this.translateOnAxis(wG,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(dc.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?PS.copy(e):PS.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Ab.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?dc.lookAt(Ab,PS,this.up):dc.lookAt(PS,Ab,this.up),this.quaternion.setFromRotationMatrix(dc),i&&(dc.extractRotation(i.matrixWorld),eg.setFromRotationMatrix(dc),this.quaternion.premultiply(eg.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(ECe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(_G)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const n=this.children[e];n.parent=null,n.dispatchEvent(_G)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),dc.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),dc.multiply(e.parent.matrixWorld)),e.applyMatrix4(dc),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const a=this.children[r].getObjectByProperty(e,n);if(a!==void 0)return a}}getObjectsByProperty(e,n){let r=[];this[e]===n&&r.push(this);for(let i=0,s=this.children.length;i<s;i++){const a=this.children[i].getObjectsByProperty(e,n);a.length>0&&(r=r.concat(a))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ab,e,SCe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ab,CCe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++){const s=n[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const i=this.children;for(let s=0,a=i.length;s<a;s++){const o=i[s];o.matrixWorldAutoUpdate===!0&&o.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function s(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const f=l[u];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,u=this.material.length;l<u;l++)o.push(s(e.materials,this.material[l]));i.material=o}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];i.animations.push(s(e.animations,l))}}if(n){const o=a(e.geometries),l=a(e.materials),u=a(e.textures),c=a(e.images),f=a(e.shapes),d=a(e.skeletons),h=a(e.animations),p=a(e.nodes);o.length>0&&(r.geometries=o),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),c.length>0&&(r.images=c),f.length>0&&(r.shapes=f),d.length>0&&(r.skeletons=d),h.length>0&&(r.animations=h),p.length>0&&(r.nodes=p)}return r.object=i,r;function a(o){const l=[];for(const u in o){const c=o[u];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Ps.DEFAULT_UP=new me(0,1,0);Ps.DEFAULT_MATRIX_AUTO_UPDATE=!0;Ps.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const hl=new me,hc=new me,ZI=new me,pc=new me,tg=new me,ng=new me,SG=new me,JI=new me,QI=new me,eD=new me;class kc{constructor(e=new me,n=new me,r=new me){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),hl.subVectors(e,n),i.cross(hl);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,n,r,i,s){hl.subVectors(i,n),hc.subVectors(r,n),ZI.subVectors(e,n);const a=hl.dot(hl),o=hl.dot(hc),l=hl.dot(ZI),u=hc.dot(hc),c=hc.dot(ZI),f=a*u-o*o;if(f===0)return s.set(-2,-1,-1);const d=1/f,h=(u*l-o*c)*d,p=(a*c-o*l)*d;return s.set(1-h-p,p,h)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,pc),pc.x>=0&&pc.y>=0&&pc.x+pc.y<=1}static getUV(e,n,r,i,s,a,o,l){return this.getBarycoord(e,n,r,i,pc),l.set(0,0),l.addScaledVector(s,pc.x),l.addScaledVector(a,pc.y),l.addScaledVector(o,pc.z),l}static isFrontFacing(e,n,r,i){return hl.subVectors(r,n),hc.subVectors(e,n),hl.cross(hc).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return hl.subVectors(this.c,this.b),hc.subVectors(this.a,this.b),hl.cross(hc).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return kc.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return kc.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,r,i,s){return kc.getUV(e,this.a,this.b,this.c,n,r,i,s)}containsPoint(e){return kc.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return kc.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,s=this.c;let a,o;tg.subVectors(i,r),ng.subVectors(s,r),JI.subVectors(e,r);const l=tg.dot(JI),u=ng.dot(JI);if(l<=0&&u<=0)return n.copy(r);QI.subVectors(e,i);const c=tg.dot(QI),f=ng.dot(QI);if(c>=0&&f<=c)return n.copy(i);const d=l*f-c*u;if(d<=0&&l>=0&&c<=0)return a=l/(l-c),n.copy(r).addScaledVector(tg,a);eD.subVectors(e,s);const h=tg.dot(eD),p=ng.dot(eD);if(p>=0&&h<=p)return n.copy(s);const m=h*u-l*p;if(m<=0&&u>=0&&p<=0)return o=u/(u-p),n.copy(r).addScaledVector(ng,o);const g=c*p-h*f;if(g<=0&&f-c>=0&&h-p>=0)return SG.subVectors(s,i),o=(f-c)/(f-c+(h-p)),n.copy(i).addScaledVector(SG,o);const v=1/(g+m+d);return a=m*v,o=d*v,n.copy(r).addScaledVector(tg,a).addScaledVector(ng,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let TCe=0;class $w extends em{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:TCe++}),this.uuid=Mw(),this.name="",this.type="Material",this.blending=Pg,this.side=vd,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=OQ,this.blendDst=FQ,this.blendEquation=wg,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=RO,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=lCe,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=PI,this.stencilZFail=PI,this.stencilZPass=PI,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn("THREE.Material: '"+n+"' parameter is undefined.");continue}const i=this[n];if(i===void 0){console.warn("THREE."+this.type+": '"+n+"' is not a property of this material.");continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Pg&&(r.blending=this.blending),this.side!==vd&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(r.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const a=[];for(const o in s){const l=s[o];delete l.metadata,a.push(l)}return a}if(n){const s=i(e.textures),a=i(e.images);s.length>0&&(r.textures=s),a.length>0&&(r.images=a)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=n[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const XQ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},pl={h:0,s:0,l:0},zS={h:0,s:0,l:0};function tD(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}let Vn=class{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,n===void 0&&r===void 0?this.set(e):this.setRGB(e,n,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=su){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Es.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=Es.workingColorSpace){return this.r=e,this.g=n,this.b=r,Es.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=Es.workingColorSpace){if(e=uCe(e,1),n=ia(n,0,1),r=ia(r,0,1),n===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+n):r+n-r*n,a=2*r-s;this.r=tD(a,s,e+1/3),this.g=tD(a,s,e),this.b=tD(a,s,e-1/3)}return Es.toWorkingColorSpace(this,i),this}setStyle(e,n=su){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=i[1],o=i[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,Es.toWorkingColorSpace(this,n),r(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,Es.toWorkingColorSpace(this,n),r(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){const l=parseFloat(s[1])/360,u=parseFloat(s[2])/100,c=parseFloat(s[3])/100;return r(s[4]),this.setHSL(l,u,c,n)}break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],a=s.length;if(a===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,Es.toWorkingColorSpace(this,n),this;if(a===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,Es.toWorkingColorSpace(this,n),this;console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=su){const r=XQ[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Bg(e.r),this.g=Bg(e.g),this.b=Bg(e.b),this}copyLinearToSRGB(e){return this.r=WI(e.r),this.g=WI(e.g),this.b=WI(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=su){return Es.fromWorkingColorSpace(ns.copy(this),e),ia(ns.r*255,0,255)<<16^ia(ns.g*255,0,255)<<8^ia(ns.b*255,0,255)<<0}getHexString(e=su){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Es.workingColorSpace){Es.fromWorkingColorSpace(ns.copy(this),n);const r=ns.r,i=ns.g,s=ns.b,a=Math.max(r,i,s),o=Math.min(r,i,s);let l,u;const c=(o+a)/2;if(o===a)l=0,u=0;else{const f=a-o;switch(u=c<=.5?f/(a+o):f/(2-a-o),a){case r:l=(i-s)/f+(i<s?6:0);break;case i:l=(s-r)/f+2;break;case s:l=(r-i)/f+4;break}l/=6}return e.h=l,e.s=u,e.l=c,e}getRGB(e,n=Es.workingColorSpace){return Es.fromWorkingColorSpace(ns.copy(this),n),e.r=ns.r,e.g=ns.g,e.b=ns.b,e}getStyle(e=su){Es.fromWorkingColorSpace(ns.copy(this),e);const n=ns.r,r=ns.g,i=ns.b;return e!==su?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${n*255|0},${r*255|0},${i*255|0})`}offsetHSL(e,n,r){return this.getHSL(pl),pl.h+=e,pl.s+=n,pl.l+=r,this.setHSL(pl.h,pl.s,pl.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(pl),e.getHSL(zS);const r=BI(pl.h,zS.h,n),i=BI(pl.s,zS.s,n),s=BI(pl.l,zS.l,n);return this.setHSL(r,i,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const ns=new Vn;Vn.NAMES=XQ;class S5 extends $w{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Vn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=LQ,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Vr=new me,BS=new _n;class Al{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=fG,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)BS.fromBufferAttribute(this,n),BS.applyMatrix3(e),this.setXY(n,BS.x,BS.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)Vr.fromBufferAttribute(this,n),Vr.applyMatrix3(e),this.setXYZ(n,Vr.x,Vr.y,Vr.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)Vr.fromBufferAttribute(this,n),Vr.applyMatrix4(e),this.setXYZ(n,Vr.x,Vr.y,Vr.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Vr.fromBufferAttribute(this,n),Vr.applyNormalMatrix(e),this.setXYZ(n,Vr.x,Vr.y,Vr.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Vr.fromBufferAttribute(this,n),Vr.transformDirection(e),this.setXYZ(n,Vr.x,Vr.y,Vr.z);return this}set(e,n=0){return this.array.set(e,n),this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=IS(n,this.array)),n}setX(e,n){return this.normalized&&(n=Fa(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=IS(n,this.array)),n}setY(e,n){return this.normalized&&(n=Fa(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=IS(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Fa(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=IS(n,this.array)),n}setW(e,n){return this.normalized&&(n=Fa(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Fa(n,this.array),r=Fa(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Fa(n,this.array),r=Fa(r,this.array),i=Fa(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=Fa(n,this.array),r=Fa(r,this.array),i=Fa(i,this.array),s=Fa(s,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==fG&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class YQ extends Al{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class KQ extends Al{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class Ml extends Al{constructor(e,n,r){super(new Float32Array(e),n,r)}}let kCe=0;const yo=new Mi,nD=new Ps,rg=new me,Pa=new Nw,Mb=new Nw,_i=new me;class qu extends em{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:kCe++}),this.uuid=Mw(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(VQ(e)?KQ:YQ)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new Fs().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return yo.makeRotationFromQuaternion(e),this.applyMatrix4(yo),this}rotateX(e){return yo.makeRotationX(e),this.applyMatrix4(yo),this}rotateY(e){return yo.makeRotationY(e),this.applyMatrix4(yo),this}rotateZ(e){return yo.makeRotationZ(e),this.applyMatrix4(yo),this}translate(e,n,r){return yo.makeTranslation(e,n,r),this.applyMatrix4(yo),this}scale(e,n,r){return yo.makeScale(e,n,r),this.applyMatrix4(yo),this}lookAt(e){return nD.lookAt(e),nD.updateMatrix(),this.applyMatrix4(nD.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(rg).negate(),this.translate(rg.x,rg.y,rg.z),this}setFromPoints(e){const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];n.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Ml(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Nw);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new me(-1/0,-1/0,-1/0),new me(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const s=n[r];Pa.setFromBufferAttribute(s),this.morphTargetsRelative?(_i.addVectors(this.boundingBox.min,Pa.min),this.boundingBox.expandByPoint(_i),_i.addVectors(this.boundingBox.max,Pa.max),this.boundingBox.expandByPoint(_i)):(this.boundingBox.expandByPoint(Pa.min),this.boundingBox.expandByPoint(Pa.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new DA);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new me,1/0);return}if(e){const r=this.boundingSphere.center;if(Pa.setFromBufferAttribute(e),n)for(let s=0,a=n.length;s<a;s++){const o=n[s];Mb.setFromBufferAttribute(o),this.morphTargetsRelative?(_i.addVectors(Pa.min,Mb.min),Pa.expandByPoint(_i),_i.addVectors(Pa.max,Mb.max),Pa.expandByPoint(_i)):(Pa.expandByPoint(Mb.min),Pa.expandByPoint(Mb.max))}Pa.getCenter(r);let i=0;for(let s=0,a=e.count;s<a;s++)_i.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(_i));if(n)for(let s=0,a=n.length;s<a;s++){const o=n[s],l=this.morphTargetsRelative;for(let u=0,c=o.count;u<c;u++)_i.fromBufferAttribute(o,u),l&&(rg.fromBufferAttribute(e,u),_i.add(rg)),i=Math.max(i,r.distanceToSquared(_i))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=n.position.array,s=n.normal.array,a=n.uv.array,o=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Al(new Float32Array(4*o),4));const l=this.getAttribute("tangent").array,u=[],c=[];for(let T=0;T<o;T++)u[T]=new me,c[T]=new me;const f=new me,d=new me,h=new me,p=new _n,m=new _n,g=new _n,v=new me,y=new me;function b(T,k,M){f.fromArray(i,T*3),d.fromArray(i,k*3),h.fromArray(i,M*3),p.fromArray(a,T*2),m.fromArray(a,k*2),g.fromArray(a,M*2),d.sub(f),h.sub(f),m.sub(p),g.sub(p);const A=1/(m.x*g.y-g.x*m.y);isFinite(A)&&(v.copy(d).multiplyScalar(g.y).addScaledVector(h,-m.y).multiplyScalar(A),y.copy(h).multiplyScalar(m.x).addScaledVector(d,-g.x).multiplyScalar(A),u[T].add(v),u[k].add(v),u[M].add(v),c[T].add(y),c[k].add(y),c[M].add(y))}let x=this.groups;x.length===0&&(x=[{start:0,count:r.length}]);for(let T=0,k=x.length;T<k;++T){const M=x[T],A=M.start,N=M.count;for(let $=A,D=A+N;$<D;$+=3)b(r[$+0],r[$+1],r[$+2])}const w=new me,S=new me,C=new me,_=new me;function E(T){C.fromArray(s,T*3),_.copy(C);const k=u[T];w.copy(k),w.sub(C.multiplyScalar(C.dot(k))).normalize(),S.crossVectors(_,k);const A=S.dot(c[T])<0?-1:1;l[T*4]=w.x,l[T*4+1]=w.y,l[T*4+2]=w.z,l[T*4+3]=A}for(let T=0,k=x.length;T<k;++T){const M=x[T],A=M.start,N=M.count;for(let $=A,D=A+N;$<D;$+=3)E(r[$+0]),E(r[$+1]),E(r[$+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Al(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let d=0,h=r.count;d<h;d++)r.setXYZ(d,0,0,0);const i=new me,s=new me,a=new me,o=new me,l=new me,u=new me,c=new me,f=new me;if(e)for(let d=0,h=e.count;d<h;d+=3){const p=e.getX(d+0),m=e.getX(d+1),g=e.getX(d+2);i.fromBufferAttribute(n,p),s.fromBufferAttribute(n,m),a.fromBufferAttribute(n,g),c.subVectors(a,s),f.subVectors(i,s),c.cross(f),o.fromBufferAttribute(r,p),l.fromBufferAttribute(r,m),u.fromBufferAttribute(r,g),o.add(c),l.add(c),u.add(c),r.setXYZ(p,o.x,o.y,o.z),r.setXYZ(m,l.x,l.y,l.z),r.setXYZ(g,u.x,u.y,u.z)}else for(let d=0,h=n.count;d<h;d+=3)i.fromBufferAttribute(n,d+0),s.fromBufferAttribute(n,d+1),a.fromBufferAttribute(n,d+2),c.subVectors(a,s),f.subVectors(i,s),c.cross(f),r.setXYZ(d+0,c.x,c.y,c.z),r.setXYZ(d+1,c.x,c.y,c.z),r.setXYZ(d+2,c.x,c.y,c.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)_i.fromBufferAttribute(e,n),_i.normalize(),e.setXYZ(n,_i.x,_i.y,_i.z)}toNonIndexed(){function e(o,l){const u=o.array,c=o.itemSize,f=o.normalized,d=new u.constructor(l.length*c);let h=0,p=0;for(let m=0,g=l.length;m<g;m++){o.isInterleavedBufferAttribute?h=l[m]*o.data.stride+o.offset:h=l[m]*c;for(let v=0;v<c;v++)d[p++]=u[h++]}return new Al(d,c,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new qu,r=this.index.array,i=this.attributes;for(const o in i){const l=i[o],u=e(l,r);n.setAttribute(o,u)}const s=this.morphAttributes;for(const o in s){const l=[],u=s[o];for(let c=0,f=u.length;c<f;c++){const d=u[c],h=e(d,r);l.push(h)}n.morphAttributes[o]=l}n.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const u=a[o];n.addGroup(u.start,u.count,u.materialIndex)}return n}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const u=r[l];e.data.attributes[l]=u.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let f=0,d=u.length;f<d;f++){const h=u[f];c.push(h.toJSON(e.data))}c.length>0&&(i[l]=c,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const i=e.attributes;for(const u in i){const c=i[u];this.setAttribute(u,c.clone(n))}const s=e.morphAttributes;for(const u in s){const c=[],f=s[u];for(let d=0,h=f.length;d<h;d++)c.push(f[d].clone(n));this.morphAttributes[u]=c}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let u=0,c=a.length;u<c;u++){const f=a[u];this.addGroup(f.start,f.count,f.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const CG=new Mi,tu=new jQ,US=new DA,EG=new me,Nb=new me,$b=new me,Ib=new me,rD=new me,VS=new me,WS=new _n,GS=new _n,HS=new _n,iD=new me,jS=new me;class pu extends Ps{constructor(e=new qu,n=new S5){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,a=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const o=this.morphTargetInfluences;if(s&&o){VS.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const c=o[l],f=s[l];c!==0&&(rD.fromBufferAttribute(f,e),a?VS.addScaledVector(rD,c):VS.addScaledVector(rD.sub(n),c))}n.add(VS)}return this.isSkinnedMesh&&this.boneTransform(e,n),n}raycast(e,n){const r=this.geometry,i=this.material,s=this.matrixWorld;if(i===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),US.copy(r.boundingSphere),US.applyMatrix4(s),tu.copy(e.ray).recast(e.near),US.containsPoint(tu.origin)===!1&&(tu.intersectSphere(US,EG)===null||tu.origin.distanceToSquared(EG)>(e.far-e.near)**2))||(CG.copy(s).invert(),tu.copy(e.ray).applyMatrix4(CG),r.boundingBox!==null&&tu.intersectsBox(r.boundingBox)===!1))return;let a;const o=r.index,l=r.attributes.position,u=r.attributes.uv,c=r.attributes.uv2,f=r.groups,d=r.drawRange;if(o!==null)if(Array.isArray(i))for(let h=0,p=f.length;h<p;h++){const m=f[h],g=i[m.materialIndex],v=Math.max(m.start,d.start),y=Math.min(o.count,Math.min(m.start+m.count,d.start+d.count));for(let b=v,x=y;b<x;b+=3){const w=o.getX(b),S=o.getX(b+1),C=o.getX(b+2);a=qS(this,g,e,tu,u,c,w,S,C),a&&(a.faceIndex=Math.floor(b/3),a.face.materialIndex=m.materialIndex,n.push(a))}}else{const h=Math.max(0,d.start),p=Math.min(o.count,d.start+d.count);for(let m=h,g=p;m<g;m+=3){const v=o.getX(m),y=o.getX(m+1),b=o.getX(m+2);a=qS(this,i,e,tu,u,c,v,y,b),a&&(a.faceIndex=Math.floor(m/3),n.push(a))}}else if(l!==void 0)if(Array.isArray(i))for(let h=0,p=f.length;h<p;h++){const m=f[h],g=i[m.materialIndex],v=Math.max(m.start,d.start),y=Math.min(l.count,Math.min(m.start+m.count,d.start+d.count));for(let b=v,x=y;b<x;b+=3){const w=b,S=b+1,C=b+2;a=qS(this,g,e,tu,u,c,w,S,C),a&&(a.faceIndex=Math.floor(b/3),a.face.materialIndex=m.materialIndex,n.push(a))}}else{const h=Math.max(0,d.start),p=Math.min(l.count,d.start+d.count);for(let m=h,g=p;m<g;m+=3){const v=m,y=m+1,b=m+2;a=qS(this,i,e,tu,u,c,v,y,b),a&&(a.faceIndex=Math.floor(m/3),n.push(a))}}}}function ACe(t,e,n,r,i,s,a,o){let l;if(e.side===Qa?l=r.intersectTriangle(a,s,i,!0,o):l=r.intersectTriangle(i,s,a,e.side===vd,o),l===null)return null;jS.copy(o),jS.applyMatrix4(t.matrixWorld);const u=n.ray.origin.distanceTo(jS);return u<n.near||u>n.far?null:{distance:u,point:jS.clone(),object:t}}function qS(t,e,n,r,i,s,a,o,l){t.getVertexPosition(a,Nb),t.getVertexPosition(o,$b),t.getVertexPosition(l,Ib);const u=ACe(t,e,n,r,Nb,$b,Ib,iD);if(u){i&&(WS.fromBufferAttribute(i,a),GS.fromBufferAttribute(i,o),HS.fromBufferAttribute(i,l),u.uv=kc.getUV(iD,Nb,$b,Ib,WS,GS,HS,new _n)),s&&(WS.fromBufferAttribute(s,a),GS.fromBufferAttribute(s,o),HS.fromBufferAttribute(s,l),u.uv2=kc.getUV(iD,Nb,$b,Ib,WS,GS,HS,new _n));const c={a,b:o,c:l,normal:new me,materialIndex:0};kc.getNormal(Nb,$b,Ib,c.normal),u.face=c}return u}class mv extends qu{constructor(e=1,n=1,r=1,i=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:s,depthSegments:a};const o=this;i=Math.floor(i),s=Math.floor(s),a=Math.floor(a);const l=[],u=[],c=[],f=[];let d=0,h=0;p("z","y","x",-1,-1,r,n,e,a,s,0),p("z","y","x",1,-1,r,n,-e,a,s,1),p("x","z","y",1,1,e,r,n,i,a,2),p("x","z","y",1,-1,e,r,-n,i,a,3),p("x","y","z",1,-1,e,n,r,i,s,4),p("x","y","z",-1,-1,e,n,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new Ml(u,3)),this.setAttribute("normal",new Ml(c,3)),this.setAttribute("uv",new Ml(f,2));function p(m,g,v,y,b,x,w,S,C,_,E){const T=x/C,k=w/_,M=x/2,A=w/2,N=S/2,$=C+1,D=_+1;let P=0,O=0;const B=new me;for(let H=0;H<D;H++){const te=H*k-A;for(let q=0;q<$;q++){const Z=q*T-M;B[m]=Z*y,B[g]=te*b,B[v]=N,u.push(B.x,B.y,B.z),B[m]=0,B[g]=0,B[v]=S>0?1:-1,c.push(B.x,B.y,B.z),f.push(q/C),f.push(1-H/_),P+=1}}for(let H=0;H<_;H++)for(let te=0;te<C;te++){const q=d+te+$*H,Z=d+te+$*(H+1),ne=d+(te+1)+$*(H+1),G=d+(te+1)+$*H;l.push(q,Z,G),l.push(Z,ne,G),O+=6}o.addGroup(h,O,E),h+=O,d+=P}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new mv(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function f0(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function Ts(t){const e={};for(let n=0;n<t.length;n++){const r=f0(t[n]);for(const i in r)e[i]=r[i]}return e}function MCe(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function ZQ(t){return t.getRenderTarget()===null&&t.outputEncoding===rr?su:vx}const NCe={clone:f0,merge:Ts};var $Ce=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,ICe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class vp extends $w{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=$Ce,this.fragmentShader=ICe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=f0(e.uniforms),this.uniformsGroups=MCe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const a=this.uniforms[i].value;a&&a.isTexture?n.uniforms[i]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?n.uniforms[i]={type:"c",value:a.getHex()}:a&&a.isVector2?n.uniforms[i]={type:"v2",value:a.toArray()}:a&&a.isVector3?n.uniforms[i]={type:"v3",value:a.toArray()}:a&&a.isVector4?n.uniforms[i]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?n.uniforms[i]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?n.uniforms[i]={type:"m4",value:a.toArray()}:n.uniforms[i]={value:a}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class JQ extends Ps{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Mi,this.projectionMatrix=new Mi,this.projectionMatrixInverse=new Mi}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(-n[8],-n[9],-n[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Mo extends JQ{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=hG*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(zI*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return hG*2*Math.atan(Math.tan(zI*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,r,i,s,a){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(zI*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,s=-.5*i;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,u=a.fullHeight;s+=a.offsetX*i/l,n-=a.offsetY*r/u,i*=a.width/l,r*=a.height/u}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,n,n-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const ig=-90,sg=1;class DCe extends Ps{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r;const i=new Mo(ig,sg,e,n);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(1,0,0),this.add(i);const s=new Mo(ig,sg,e,n);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const a=new Mo(ig,sg,e,n);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(0,1,0),this.add(a);const o=new Mo(ig,sg,e,n);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(0,-1,0),this.add(o);const l=new Mo(ig,sg,e,n);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,1),this.add(l);const u=new Mo(ig,sg,e,n);u.layers=this.layers,u.up.set(0,1,0),u.lookAt(0,0,-1),this.add(u)}update(e,n){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget,[i,s,a,o,l,u]=this.children,c=e.getRenderTarget(),f=e.toneMapping,d=e.xr.enabled;e.toneMapping=Lc,e.xr.enabled=!1;const h=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(n,i),e.setRenderTarget(r,1),e.render(n,s),e.setRenderTarget(r,2),e.render(n,a),e.setRenderTarget(r,3),e.render(n,o),e.setRenderTarget(r,4),e.render(n,l),r.texture.generateMipmaps=h,e.setRenderTarget(r,5),e.render(n,u),e.setRenderTarget(c),e.toneMapping=f,e.xr.enabled=d,r.texture.needsPMREMUpdate=!0}}class QQ extends eo{constructor(e,n,r,i,s,a,o,l,u,c){e=e!==void 0?e:[],n=n!==void 0?n:l0,super(e,n,r,i,s,a,o,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class RCe extends gp{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new QQ(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Ao}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.encoding=n.encoding,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new mv(5,5,5),s=new vp({name:"CubemapFromEquirect",uniforms:f0(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Qa,blending:ad});s.uniforms.tEquirect.value=n;const a=new pu(i,s),o=n.minFilter;return n.minFilter===mx&&(n.minFilter=Ao),new DCe(1,10,this).update(e,a),n.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,n,r,i){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(n,r,i);e.setRenderTarget(s)}}const sD=new me,OCe=new me,FCe=new Fs;class Mh{constructor(e=new me(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=sD.subVectors(r,n).cross(OCe.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(sD),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:n.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||FCe.getNormalMatrix(e),i=this.coplanarPoint(sD).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const ag=new DA,XS=new me;class eee{constructor(e=new Mh,n=new Mh,r=new Mh,i=new Mh,s=new Mh,a=new Mh){this.planes=[e,n,r,i,s,a]}set(e,n,r,i,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(n),o[2].copy(r),o[3].copy(i),o[4].copy(s),o[5].copy(a),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const n=this.planes,r=e.elements,i=r[0],s=r[1],a=r[2],o=r[3],l=r[4],u=r[5],c=r[6],f=r[7],d=r[8],h=r[9],p=r[10],m=r[11],g=r[12],v=r[13],y=r[14],b=r[15];return n[0].setComponents(o-i,f-l,m-d,b-g).normalize(),n[1].setComponents(o+i,f+l,m+d,b+g).normalize(),n[2].setComponents(o+s,f+u,m+h,b+v).normalize(),n[3].setComponents(o-s,f-u,m-h,b-v).normalize(),n[4].setComponents(o-a,f-c,m-p,b-y).normalize(),n[5].setComponents(o+a,f+c,m+p,b+y).normalize(),this}intersectsObject(e){const n=e.geometry;return n.boundingSphere===null&&n.computeBoundingSphere(),ag.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(ag)}intersectsSprite(e){return ag.center.set(0,0,0),ag.radius=.7071067811865476,ag.applyMatrix4(e.matrixWorld),this.intersectsSphere(ag)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(XS.x=i.normal.x>0?e.max.x:e.min.x,XS.y=i.normal.y>0?e.max.y:e.min.y,XS.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(XS)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function tee(){let t=null,e=!1,n=null,r=null;function i(s,a){n(s,a),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function LCe(t,e){const n=e.isWebGL2,r=new WeakMap;function i(u,c){const f=u.array,d=u.usage,h=t.createBuffer();t.bindBuffer(c,h),t.bufferData(c,f,d),u.onUploadCallback();let p;if(f instanceof Float32Array)p=5126;else if(f instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(n)p=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else p=5123;else if(f instanceof Int16Array)p=5122;else if(f instanceof Uint32Array)p=5125;else if(f instanceof Int32Array)p=5124;else if(f instanceof Int8Array)p=5120;else if(f instanceof Uint8Array)p=5121;else if(f instanceof Uint8ClampedArray)p=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:h,type:p,bytesPerElement:f.BYTES_PER_ELEMENT,version:u.version}}function s(u,c,f){const d=c.array,h=c.updateRange;t.bindBuffer(f,u),h.count===-1?t.bufferSubData(f,0,d):(n?t.bufferSubData(f,h.offset*d.BYTES_PER_ELEMENT,d,h.offset,h.count):t.bufferSubData(f,h.offset*d.BYTES_PER_ELEMENT,d.subarray(h.offset,h.offset+h.count)),h.count=-1),c.onUploadCallback()}function a(u){return u.isInterleavedBufferAttribute&&(u=u.data),r.get(u)}function o(u){u.isInterleavedBufferAttribute&&(u=u.data);const c=r.get(u);c&&(t.deleteBuffer(c.buffer),r.delete(u))}function l(u,c){if(u.isGLBufferAttribute){const d=r.get(u);(!d||d.version<u.version)&&r.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const f=r.get(u);f===void 0?r.set(u,i(u,c)):f.version<u.version&&(s(f.buffer,u,c),f.version=u.version)}return{get:a,remove:o,update:l}}class C5 extends qu{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const s=e/2,a=n/2,o=Math.floor(r),l=Math.floor(i),u=o+1,c=l+1,f=e/o,d=n/l,h=[],p=[],m=[],g=[];for(let v=0;v<c;v++){const y=v*d-a;for(let b=0;b<u;b++){const x=b*f-s;p.push(x,-y,0),m.push(0,0,1),g.push(b/o),g.push(1-v/l)}}for(let v=0;v<l;v++)for(let y=0;y<o;y++){const b=y+u*v,x=y+u*(v+1),w=y+1+u*(v+1),S=y+1+u*v;h.push(b,x,S),h.push(x,w,S)}this.setIndex(h),this.setAttribute("position",new Ml(p,3)),this.setAttribute("normal",new Ml(m,3)),this.setAttribute("uv",new Ml(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new C5(e.width,e.height,e.widthSegments,e.heightSegments)}}var PCe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,zCe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,BCe=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,UCe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,VCe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,WCe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,GCe="vec3 transformed = vec3( position );",HCe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,jCe=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,qCe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,XCe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,YCe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,KCe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,ZCe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,JCe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,QCe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,eEe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,tEe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,nEe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,rEe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,iEe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,sEe=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,aEe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,oEe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,lEe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,uEe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,cEe="gl_FragColor = linearToOutputTexel( gl_FragColor );",fEe=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,dEe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,hEe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,pEe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,mEe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,gEe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,vEe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,yEe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,bEe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,xEe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,wEe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,_Ee=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,SEe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,CEe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,EEe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,TEe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,kEe=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,AEe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,MEe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,NEe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,$Ee=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,IEe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,DEe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,REe=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,OEe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,FEe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,LEe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,PEe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,zEe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,BEe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,UEe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,VEe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,WEe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,GEe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,HEe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,jEe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,qEe=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,XEe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,YEe=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,KEe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,ZEe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,JEe=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,QEe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,eTe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,tTe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,nTe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,rTe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,iTe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,sTe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,aTe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,oTe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,lTe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,uTe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,cTe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,fTe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dTe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,hTe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,pTe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,mTe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,gTe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,vTe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,yTe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,bTe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,xTe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,wTe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,_Te=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,STe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,CTe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,ETe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,TTe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,kTe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,ATe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		
		vec2 lodFudge = pow( 1.95, lod ) / fullSize;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec2 fullSize = vec2( textureSize( sampler, 0 ) );
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,MTe=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,NTe=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,$Te=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,ITe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,DTe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,RTe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,OTe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const FTe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,LTe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,PTe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,zTe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,BTe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,UTe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,VTe=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,WTe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,GTe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,HTe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,jTe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,qTe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,XTe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,YTe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,KTe=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,ZTe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,JTe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,QTe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,eke=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,tke=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nke=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,rke=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,ike=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ske=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ake=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,oke=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lke=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,uke=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,cke=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,fke=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,dke=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,hke=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,pke=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,mke=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,nn={alphamap_fragment:PCe,alphamap_pars_fragment:zCe,alphatest_fragment:BCe,alphatest_pars_fragment:UCe,aomap_fragment:VCe,aomap_pars_fragment:WCe,begin_vertex:GCe,beginnormal_vertex:HCe,bsdfs:jCe,iridescence_fragment:qCe,bumpmap_pars_fragment:XCe,clipping_planes_fragment:YCe,clipping_planes_pars_fragment:KCe,clipping_planes_pars_vertex:ZCe,clipping_planes_vertex:JCe,color_fragment:QCe,color_pars_fragment:eEe,color_pars_vertex:tEe,color_vertex:nEe,common:rEe,cube_uv_reflection_fragment:iEe,defaultnormal_vertex:sEe,displacementmap_pars_vertex:aEe,displacementmap_vertex:oEe,emissivemap_fragment:lEe,emissivemap_pars_fragment:uEe,encodings_fragment:cEe,encodings_pars_fragment:fEe,envmap_fragment:dEe,envmap_common_pars_fragment:hEe,envmap_pars_fragment:pEe,envmap_pars_vertex:mEe,envmap_physical_pars_fragment:kEe,envmap_vertex:gEe,fog_vertex:vEe,fog_pars_vertex:yEe,fog_fragment:bEe,fog_pars_fragment:xEe,gradientmap_pars_fragment:wEe,lightmap_fragment:_Ee,lightmap_pars_fragment:SEe,lights_lambert_fragment:CEe,lights_lambert_pars_fragment:EEe,lights_pars_begin:TEe,lights_toon_fragment:AEe,lights_toon_pars_fragment:MEe,lights_phong_fragment:NEe,lights_phong_pars_fragment:$Ee,lights_physical_fragment:IEe,lights_physical_pars_fragment:DEe,lights_fragment_begin:REe,lights_fragment_maps:OEe,lights_fragment_end:FEe,logdepthbuf_fragment:LEe,logdepthbuf_pars_fragment:PEe,logdepthbuf_pars_vertex:zEe,logdepthbuf_vertex:BEe,map_fragment:UEe,map_pars_fragment:VEe,map_particle_fragment:WEe,map_particle_pars_fragment:GEe,metalnessmap_fragment:HEe,metalnessmap_pars_fragment:jEe,morphcolor_vertex:qEe,morphnormal_vertex:XEe,morphtarget_pars_vertex:YEe,morphtarget_vertex:KEe,normal_fragment_begin:ZEe,normal_fragment_maps:JEe,normal_pars_fragment:QEe,normal_pars_vertex:eTe,normal_vertex:tTe,normalmap_pars_fragment:nTe,clearcoat_normal_fragment_begin:rTe,clearcoat_normal_fragment_maps:iTe,clearcoat_pars_fragment:sTe,iridescence_pars_fragment:aTe,output_fragment:oTe,packing:lTe,premultiplied_alpha_fragment:uTe,project_vertex:cTe,dithering_fragment:fTe,dithering_pars_fragment:dTe,roughnessmap_fragment:hTe,roughnessmap_pars_fragment:pTe,shadowmap_pars_fragment:mTe,shadowmap_pars_vertex:gTe,shadowmap_vertex:vTe,shadowmask_pars_fragment:yTe,skinbase_vertex:bTe,skinning_pars_vertex:xTe,skinning_vertex:wTe,skinnormal_vertex:_Te,specularmap_fragment:STe,specularmap_pars_fragment:CTe,tonemapping_fragment:ETe,tonemapping_pars_fragment:TTe,transmission_fragment:kTe,transmission_pars_fragment:ATe,uv_pars_fragment:MTe,uv_pars_vertex:NTe,uv_vertex:$Te,uv2_pars_fragment:ITe,uv2_pars_vertex:DTe,uv2_vertex:RTe,worldpos_vertex:OTe,background_vert:FTe,background_frag:LTe,backgroundCube_vert:PTe,backgroundCube_frag:zTe,cube_vert:BTe,cube_frag:UTe,depth_vert:VTe,depth_frag:WTe,distanceRGBA_vert:GTe,distanceRGBA_frag:HTe,equirect_vert:jTe,equirect_frag:qTe,linedashed_vert:XTe,linedashed_frag:YTe,meshbasic_vert:KTe,meshbasic_frag:ZTe,meshlambert_vert:JTe,meshlambert_frag:QTe,meshmatcap_vert:eke,meshmatcap_frag:tke,meshnormal_vert:nke,meshnormal_frag:rke,meshphong_vert:ike,meshphong_frag:ske,meshphysical_vert:ake,meshphysical_frag:oke,meshtoon_vert:lke,meshtoon_frag:uke,points_vert:cke,points_frag:fke,shadow_vert:dke,shadow_frag:hke,sprite_vert:pke,sprite_frag:mke},rt={common:{diffuse:{value:new Vn(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Fs},uv2Transform:{value:new Fs},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new _n(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Vn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Vn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Fs}},sprite:{diffuse:{value:new Vn(16777215)},opacity:{value:1},center:{value:new _n(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Fs}}},au={basic:{uniforms:Ts([rt.common,rt.specularmap,rt.envmap,rt.aomap,rt.lightmap,rt.fog]),vertexShader:nn.meshbasic_vert,fragmentShader:nn.meshbasic_frag},lambert:{uniforms:Ts([rt.common,rt.specularmap,rt.envmap,rt.aomap,rt.lightmap,rt.emissivemap,rt.bumpmap,rt.normalmap,rt.displacementmap,rt.fog,rt.lights,{emissive:{value:new Vn(0)}}]),vertexShader:nn.meshlambert_vert,fragmentShader:nn.meshlambert_frag},phong:{uniforms:Ts([rt.common,rt.specularmap,rt.envmap,rt.aomap,rt.lightmap,rt.emissivemap,rt.bumpmap,rt.normalmap,rt.displacementmap,rt.fog,rt.lights,{emissive:{value:new Vn(0)},specular:{value:new Vn(1118481)},shininess:{value:30}}]),vertexShader:nn.meshphong_vert,fragmentShader:nn.meshphong_frag},standard:{uniforms:Ts([rt.common,rt.envmap,rt.aomap,rt.lightmap,rt.emissivemap,rt.bumpmap,rt.normalmap,rt.displacementmap,rt.roughnessmap,rt.metalnessmap,rt.fog,rt.lights,{emissive:{value:new Vn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:nn.meshphysical_vert,fragmentShader:nn.meshphysical_frag},toon:{uniforms:Ts([rt.common,rt.aomap,rt.lightmap,rt.emissivemap,rt.bumpmap,rt.normalmap,rt.displacementmap,rt.gradientmap,rt.fog,rt.lights,{emissive:{value:new Vn(0)}}]),vertexShader:nn.meshtoon_vert,fragmentShader:nn.meshtoon_frag},matcap:{uniforms:Ts([rt.common,rt.bumpmap,rt.normalmap,rt.displacementmap,rt.fog,{matcap:{value:null}}]),vertexShader:nn.meshmatcap_vert,fragmentShader:nn.meshmatcap_frag},points:{uniforms:Ts([rt.points,rt.fog]),vertexShader:nn.points_vert,fragmentShader:nn.points_frag},dashed:{uniforms:Ts([rt.common,rt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:nn.linedashed_vert,fragmentShader:nn.linedashed_frag},depth:{uniforms:Ts([rt.common,rt.displacementmap]),vertexShader:nn.depth_vert,fragmentShader:nn.depth_frag},normal:{uniforms:Ts([rt.common,rt.bumpmap,rt.normalmap,rt.displacementmap,{opacity:{value:1}}]),vertexShader:nn.meshnormal_vert,fragmentShader:nn.meshnormal_frag},sprite:{uniforms:Ts([rt.sprite,rt.fog]),vertexShader:nn.sprite_vert,fragmentShader:nn.sprite_frag},background:{uniforms:{uvTransform:{value:new Fs},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:nn.background_vert,fragmentShader:nn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:nn.backgroundCube_vert,fragmentShader:nn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:nn.cube_vert,fragmentShader:nn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:nn.equirect_vert,fragmentShader:nn.equirect_frag},distanceRGBA:{uniforms:Ts([rt.common,rt.displacementmap,{referencePosition:{value:new me},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:nn.distanceRGBA_vert,fragmentShader:nn.distanceRGBA_frag},shadow:{uniforms:Ts([rt.lights,rt.fog,{color:{value:new Vn(0)},opacity:{value:1}}]),vertexShader:nn.shadow_vert,fragmentShader:nn.shadow_frag}};au.physical={uniforms:Ts([au.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new _n(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Vn(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new _n},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Vn(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Vn(1,1,1)},specularColorMap:{value:null}}]),vertexShader:nn.meshphysical_vert,fragmentShader:nn.meshphysical_frag};const YS={r:0,b:0,g:0};function gke(t,e,n,r,i,s,a){const o=new Vn(0);let l=s===!0?0:1,u,c,f=null,d=0,h=null;function p(g,v){let y=!1,b=v.isScene===!0?v.background:null;b&&b.isTexture&&(b=(v.backgroundBlurriness>0?n:e).get(b));const x=t.xr,w=x.getSession&&x.getSession();w&&w.environmentBlendMode==="additive"&&(b=null),b===null?m(o,l):b&&b.isColor&&(m(b,1),y=!0),(t.autoClear||y)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),b&&(b.isCubeTexture||b.mapping===IA)?(c===void 0&&(c=new pu(new mv(1,1,1),new vp({name:"BackgroundCubeMaterial",uniforms:f0(au.backgroundCube.uniforms),vertexShader:au.backgroundCube.vertexShader,fragmentShader:au.backgroundCube.fragmentShader,side:Qa,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(S,C,_){this.matrixWorld.copyPosition(_.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=b,c.material.uniforms.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,c.material.toneMapped=b.encoding!==rr,(f!==b||d!==b.version||h!==t.toneMapping)&&(c.material.needsUpdate=!0,f=b,d=b.version,h=t.toneMapping),c.layers.enableAll(),g.unshift(c,c.geometry,c.material,0,0,null)):b&&b.isTexture&&(u===void 0&&(u=new pu(new C5(2,2),new vp({name:"BackgroundMaterial",uniforms:f0(au.background.uniforms),vertexShader:au.background.vertexShader,fragmentShader:au.background.fragmentShader,side:vd,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=b,u.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,u.material.toneMapped=b.encoding!==rr,b.matrixAutoUpdate===!0&&b.updateMatrix(),u.material.uniforms.uvTransform.value.copy(b.matrix),(f!==b||d!==b.version||h!==t.toneMapping)&&(u.material.needsUpdate=!0,f=b,d=b.version,h=t.toneMapping),u.layers.enableAll(),g.unshift(u,u.geometry,u.material,0,0,null))}function m(g,v){g.getRGB(YS,ZQ(t)),r.buffers.color.setClear(YS.r,YS.g,YS.b,v,a)}return{getClearColor:function(){return o},setClearColor:function(g,v=1){o.set(g),l=v,m(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(g){l=g,m(o,l)},render:p}}function vke(t,e,n,r){const i=t.getParameter(34921),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),a=r.isWebGL2||s!==null,o={},l=g(null);let u=l,c=!1;function f(N,$,D,P,O){let B=!1;if(a){const H=m(P,D,$);u!==H&&(u=H,h(u.object)),B=v(N,P,D,O),B&&y(N,P,D,O)}else{const H=$.wireframe===!0;(u.geometry!==P.id||u.program!==D.id||u.wireframe!==H)&&(u.geometry=P.id,u.program=D.id,u.wireframe=H,B=!0)}O!==null&&n.update(O,34963),(B||c)&&(c=!1,_(N,$,D,P),O!==null&&t.bindBuffer(34963,n.get(O).buffer))}function d(){return r.isWebGL2?t.createVertexArray():s.createVertexArrayOES()}function h(N){return r.isWebGL2?t.bindVertexArray(N):s.bindVertexArrayOES(N)}function p(N){return r.isWebGL2?t.deleteVertexArray(N):s.deleteVertexArrayOES(N)}function m(N,$,D){const P=D.wireframe===!0;let O=o[N.id];O===void 0&&(O={},o[N.id]=O);let B=O[$.id];B===void 0&&(B={},O[$.id]=B);let H=B[P];return H===void 0&&(H=g(d()),B[P]=H),H}function g(N){const $=[],D=[],P=[];for(let O=0;O<i;O++)$[O]=0,D[O]=0,P[O]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:$,enabledAttributes:D,attributeDivisors:P,object:N,attributes:{},index:null}}function v(N,$,D,P){const O=u.attributes,B=$.attributes;let H=0;const te=D.getAttributes();for(const q in te)if(te[q].location>=0){const ne=O[q];let G=B[q];if(G===void 0&&(q==="instanceMatrix"&&N.instanceMatrix&&(G=N.instanceMatrix),q==="instanceColor"&&N.instanceColor&&(G=N.instanceColor)),ne===void 0||ne.attribute!==G||G&&ne.data!==G.data)return!0;H++}return u.attributesNum!==H||u.index!==P}function y(N,$,D,P){const O={},B=$.attributes;let H=0;const te=D.getAttributes();for(const q in te)if(te[q].location>=0){let ne=B[q];ne===void 0&&(q==="instanceMatrix"&&N.instanceMatrix&&(ne=N.instanceMatrix),q==="instanceColor"&&N.instanceColor&&(ne=N.instanceColor));const G={};G.attribute=ne,ne&&ne.data&&(G.data=ne.data),O[q]=G,H++}u.attributes=O,u.attributesNum=H,u.index=P}function b(){const N=u.newAttributes;for(let $=0,D=N.length;$<D;$++)N[$]=0}function x(N){w(N,0)}function w(N,$){const D=u.newAttributes,P=u.enabledAttributes,O=u.attributeDivisors;D[N]=1,P[N]===0&&(t.enableVertexAttribArray(N),P[N]=1),O[N]!==$&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](N,$),O[N]=$)}function S(){const N=u.newAttributes,$=u.enabledAttributes;for(let D=0,P=$.length;D<P;D++)$[D]!==N[D]&&(t.disableVertexAttribArray(D),$[D]=0)}function C(N,$,D,P,O,B){r.isWebGL2===!0&&(D===5124||D===5125)?t.vertexAttribIPointer(N,$,D,O,B):t.vertexAttribPointer(N,$,D,P,O,B)}function _(N,$,D,P){if(r.isWebGL2===!1&&(N.isInstancedMesh||P.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;b();const O=P.attributes,B=D.getAttributes(),H=$.defaultAttributeValues;for(const te in B){const q=B[te];if(q.location>=0){let Z=O[te];if(Z===void 0&&(te==="instanceMatrix"&&N.instanceMatrix&&(Z=N.instanceMatrix),te==="instanceColor"&&N.instanceColor&&(Z=N.instanceColor)),Z!==void 0){const ne=Z.normalized,G=Z.itemSize,he=n.get(Z);if(he===void 0)continue;const ve=he.buffer,we=he.type,X=he.bytesPerElement;if(Z.isInterleavedBufferAttribute){const ae=Z.data,pe=ae.stride,j=Z.offset;if(ae.isInstancedInterleavedBuffer){for(let ze=0;ze<q.locationSize;ze++)w(q.location+ze,ae.meshPerAttribute);N.isInstancedMesh!==!0&&P._maxInstanceCount===void 0&&(P._maxInstanceCount=ae.meshPerAttribute*ae.count)}else for(let ze=0;ze<q.locationSize;ze++)x(q.location+ze);t.bindBuffer(34962,ve);for(let ze=0;ze<q.locationSize;ze++)C(q.location+ze,G/q.locationSize,we,ne,pe*X,(j+G/q.locationSize*ze)*X)}else{if(Z.isInstancedBufferAttribute){for(let ae=0;ae<q.locationSize;ae++)w(q.location+ae,Z.meshPerAttribute);N.isInstancedMesh!==!0&&P._maxInstanceCount===void 0&&(P._maxInstanceCount=Z.meshPerAttribute*Z.count)}else for(let ae=0;ae<q.locationSize;ae++)x(q.location+ae);t.bindBuffer(34962,ve);for(let ae=0;ae<q.locationSize;ae++)C(q.location+ae,G/q.locationSize,we,ne,G*X,G/q.locationSize*ae*X)}}else if(H!==void 0){const ne=H[te];if(ne!==void 0)switch(ne.length){case 2:t.vertexAttrib2fv(q.location,ne);break;case 3:t.vertexAttrib3fv(q.location,ne);break;case 4:t.vertexAttrib4fv(q.location,ne);break;default:t.vertexAttrib1fv(q.location,ne)}}}}S()}function E(){M();for(const N in o){const $=o[N];for(const D in $){const P=$[D];for(const O in P)p(P[O].object),delete P[O];delete $[D]}delete o[N]}}function T(N){if(o[N.id]===void 0)return;const $=o[N.id];for(const D in $){const P=$[D];for(const O in P)p(P[O].object),delete P[O];delete $[D]}delete o[N.id]}function k(N){for(const $ in o){const D=o[$];if(D[N.id]===void 0)continue;const P=D[N.id];for(const O in P)p(P[O].object),delete P[O];delete D[N.id]}}function M(){A(),c=!0,u!==l&&(u=l,h(u.object))}function A(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:f,reset:M,resetDefaultState:A,dispose:E,releaseStatesOfGeometry:T,releaseStatesOfProgram:k,initAttributes:b,enableAttribute:x,disableUnusedAttributes:S}}function yke(t,e,n,r){const i=r.isWebGL2;let s;function a(u){s=u}function o(u,c){t.drawArrays(s,u,c),n.update(c,s,1)}function l(u,c,f){if(f===0)return;let d,h;if(i)d=t,h="drawArraysInstanced";else if(d=e.get("ANGLE_instanced_arrays"),h="drawArraysInstancedANGLE",d===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[h](s,u,c,f),n.update(c,s,f)}this.setMode=a,this.render=o,this.renderInstances=l}function bke(t,e,n){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const C=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(C.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(C){if(C==="highp"){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";C="mediump"}return C==="mediump"&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext;let o=n.precision!==void 0?n.precision:"highp";const l=s(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);const u=a||e.has("WEBGL_draw_buffers"),c=n.logarithmicDepthBuffer===!0,f=t.getParameter(34930),d=t.getParameter(35660),h=t.getParameter(3379),p=t.getParameter(34076),m=t.getParameter(34921),g=t.getParameter(36347),v=t.getParameter(36348),y=t.getParameter(36349),b=d>0,x=a||e.has("OES_texture_float"),w=b&&x,S=a?t.getParameter(36183):0;return{isWebGL2:a,drawBuffers:u,getMaxAnisotropy:i,getMaxPrecision:s,precision:o,logarithmicDepthBuffer:c,maxTextures:f,maxVertexTextures:d,maxTextureSize:h,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:g,maxVaryings:v,maxFragmentUniforms:y,vertexTextures:b,floatFragmentTextures:x,floatVertexTextures:w,maxSamples:S}}function xke(t){const e=this;let n=null,r=0,i=!1,s=!1;const a=new Mh,o=new Fs,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,d){const h=f.length!==0||d||r!==0||i;return i=d,r=f.length,h},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,d){n=c(f,d,0)},this.setState=function(f,d,h){const p=f.clippingPlanes,m=f.clipIntersection,g=f.clipShadows,v=t.get(f);if(!i||p===null||p.length===0||s&&!g)s?c(null):u();else{const y=s?0:r,b=y*4;let x=v.clippingState||null;l.value=x,x=c(p,d,b,h);for(let w=0;w!==b;++w)x[w]=n[w];v.clippingState=x,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=y}};function u(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(f,d,h,p){const m=f!==null?f.length:0;let g=null;if(m!==0){if(g=l.value,p!==!0||g===null){const v=h+m*4,y=d.matrixWorldInverse;o.getNormalMatrix(y),(g===null||g.length<v)&&(g=new Float32Array(v));for(let b=0,x=h;b!==m;++b,x+=4)a.copy(f[b]).applyMatrix4(y,o),a.normal.toArray(g,x),g[x+3]=a.constant}l.value=g,l.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,g}}function wke(t){let e=new WeakMap;function n(a,o){return o===OO?a.mapping=l0:o===FO&&(a.mapping=u0),a}function r(a){if(a&&a.isTexture&&a.isRenderTargetTexture===!1){const o=a.mapping;if(o===OO||o===FO)if(e.has(a)){const l=e.get(a).texture;return n(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const u=new RCe(l.height/2);return u.fromEquirectangularTexture(t,a),e.set(a,u),a.addEventListener("dispose",i),n(u.texture,a.mapping)}else return null}}return a}function i(a){const o=a.target;o.removeEventListener("dispose",i);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class _ke extends JQ{constructor(e=-1,n=1,r=1,i=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,a=r+e,o=i+n,l=i-n;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,a=s+u*this.view.width,o-=c*this.view.offsetY,l=o-c*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const Mg=4,TG=[.125,.215,.35,.446,.526,.582],Lh=20,aD=new _ke,kG=new Vn;let oD=null;const Nh=(1+Math.sqrt(5))/2,og=1/Nh,AG=[new me(1,1,1),new me(-1,1,1),new me(1,1,-1),new me(-1,1,-1),new me(0,Nh,og),new me(0,Nh,-og),new me(og,0,Nh),new me(-og,0,Nh),new me(Nh,og,0),new me(-Nh,og,0)];class MG{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100){oD=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),n>0&&this._blur(s,0,0,n),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=IG(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=$G(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(oD),e.scissorTest=!1,KS(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===l0||e.mapping===u0?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),oD=this._renderer.getRenderTarget();const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:Ao,minFilter:Ao,generateMipmaps:!1,type:gx,format:_l,encoding:pp,depthBuffer:!1},i=NG(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=NG(e,n,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Ske(s)),this._blurMaterial=Cke(s,e,n)}return i}_compileMaterial(e){const n=new pu(this._lodPlanes[0],e);this._renderer.compile(n,aD)}_sceneToCubeUV(e,n,r,i){const o=new Mo(90,1,n,r),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],c=this._renderer,f=c.autoClear,d=c.toneMapping;c.getClearColor(kG),c.toneMapping=Lc,c.autoClear=!1;const h=new S5({name:"PMREM.Background",side:Qa,depthWrite:!1,depthTest:!1}),p=new pu(new mv,h);let m=!1;const g=e.background;g?g.isColor&&(h.color.copy(g),e.background=null,m=!0):(h.color.copy(kG),m=!0);for(let v=0;v<6;v++){const y=v%3;y===0?(o.up.set(0,l[v],0),o.lookAt(u[v],0,0)):y===1?(o.up.set(0,0,l[v]),o.lookAt(0,u[v],0)):(o.up.set(0,l[v],0),o.lookAt(0,0,u[v]));const b=this._cubeSize;KS(i,y*b,v>2?b:0,b,b),c.setRenderTarget(i),m&&c.render(p,o),c.render(e,o)}p.geometry.dispose(),p.material.dispose(),c.toneMapping=d,c.autoClear=f,e.background=g}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===l0||e.mapping===u0;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=IG()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=$G());const s=i?this._cubemapMaterial:this._equirectMaterial,a=new pu(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=e;const l=this._cubeSize;KS(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(a,aD)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),a=AG[(i-1)%AG.length];this._blur(e,i-1,i,s,a)}n.autoClear=r}_blur(e,n,r,i,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,n,r,i,"latitudinal",s),this._halfBlur(a,e,r,r,i,"longitudinal",s)}_halfBlur(e,n,r,i,s,a,o){const l=this._renderer,u=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,f=new pu(this._lodPlanes[i],u),d=u.uniforms,h=this._sizeLods[r]-1,p=isFinite(s)?Math.PI/(2*h):2*Math.PI/(2*Lh-1),m=s/p,g=isFinite(s)?1+Math.floor(c*m):Lh;g>Lh&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${Lh}`);const v=[];let y=0;for(let C=0;C<Lh;++C){const _=C/m,E=Math.exp(-_*_/2);v.push(E),C===0?y+=E:C<g&&(y+=2*E)}for(let C=0;C<v.length;C++)v[C]=v[C]/y;d.envMap.value=e.texture,d.samples.value=g,d.weights.value=v,d.latitudinal.value=a==="latitudinal",o&&(d.poleAxis.value=o);const{_lodMax:b}=this;d.dTheta.value=p,d.mipInt.value=b-r;const x=this._sizeLods[i],w=3*x*(i>b-Mg?i-b+Mg:0),S=4*(this._cubeSize-x);KS(n,w,S,3*x,2*x),l.setRenderTarget(n),l.render(f,aD)}}function Ske(t){const e=[],n=[],r=[];let i=t;const s=t-Mg+1+TG.length;for(let a=0;a<s;a++){const o=Math.pow(2,i);n.push(o);let l=1/o;a>t-Mg?l=TG[a-t+Mg-1]:a===0&&(l=0),r.push(l);const u=1/(o-2),c=-u,f=1+u,d=[c,c,f,c,f,f,c,c,f,f,c,f],h=6,p=6,m=3,g=2,v=1,y=new Float32Array(m*p*h),b=new Float32Array(g*p*h),x=new Float32Array(v*p*h);for(let S=0;S<h;S++){const C=S%3*2/3-1,_=S>2?0:-1,E=[C,_,0,C+2/3,_,0,C+2/3,_+1,0,C,_,0,C+2/3,_+1,0,C,_+1,0];y.set(E,m*p*S),b.set(d,g*p*S);const T=[S,S,S,S,S,S];x.set(T,v*p*S)}const w=new qu;w.setAttribute("position",new Al(y,m)),w.setAttribute("uv",new Al(b,g)),w.setAttribute("faceIndex",new Al(x,v)),e.push(w),i>Mg&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function NG(t,e,n){const r=new gp(t,e,n);return r.texture.mapping=IA,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function KS(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function Cke(t,e,n){const r=new Float32Array(Lh),i=new me(0,1,0);return new vp({name:"SphericalGaussianBlur",defines:{n:Lh,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:E5(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ad,depthTest:!1,depthWrite:!1})}function $G(){return new vp({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:E5(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ad,depthTest:!1,depthWrite:!1})}function IG(){return new vp({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:E5(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ad,depthTest:!1,depthWrite:!1})}function E5(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Eke(t){let e=new WeakMap,n=null;function r(o){if(o&&o.isTexture){const l=o.mapping,u=l===OO||l===FO,c=l===l0||l===u0;if(u||c)if(o.isRenderTargetTexture&&o.needsPMREMUpdate===!0){o.needsPMREMUpdate=!1;let f=e.get(o);return n===null&&(n=new MG(t)),f=u?n.fromEquirectangular(o,f):n.fromCubemap(o,f),e.set(o,f),f.texture}else{if(e.has(o))return e.get(o).texture;{const f=o.image;if(u&&f&&f.height>0||c&&f&&i(f)){n===null&&(n=new MG(t));const d=u?n.fromEquirectangular(o):n.fromCubemap(o);return e.set(o,d),o.addEventListener("dispose",s),d.texture}else return null}}}return o}function i(o){let l=0;const u=6;for(let c=0;c<u;c++)o[c]!==void 0&&l++;return l===u}function s(o){const l=o.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function a(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:a}}function Tke(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(r){r.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(r){const i=n(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function kke(t,e,n,r){const i={},s=new WeakMap;function a(f){const d=f.target;d.index!==null&&e.remove(d.index);for(const p in d.attributes)e.remove(d.attributes[p]);d.removeEventListener("dispose",a),delete i[d.id];const h=s.get(d);h&&(e.remove(h),s.delete(d)),r.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,n.memory.geometries--}function o(f,d){return i[d.id]===!0||(d.addEventListener("dispose",a),i[d.id]=!0,n.memory.geometries++),d}function l(f){const d=f.attributes;for(const p in d)e.update(d[p],34962);const h=f.morphAttributes;for(const p in h){const m=h[p];for(let g=0,v=m.length;g<v;g++)e.update(m[g],34962)}}function u(f){const d=[],h=f.index,p=f.attributes.position;let m=0;if(h!==null){const y=h.array;m=h.version;for(let b=0,x=y.length;b<x;b+=3){const w=y[b+0],S=y[b+1],C=y[b+2];d.push(w,S,S,C,C,w)}}else{const y=p.array;m=p.version;for(let b=0,x=y.length/3-1;b<x;b+=3){const w=b+0,S=b+1,C=b+2;d.push(w,S,S,C,C,w)}}const g=new(VQ(d)?KQ:YQ)(d,1);g.version=m;const v=s.get(f);v&&e.remove(v),s.set(f,g)}function c(f){const d=s.get(f);if(d){const h=f.index;h!==null&&d.version<h.version&&u(f)}else u(f);return s.get(f)}return{get:o,update:l,getWireframeAttribute:c}}function Ake(t,e,n,r){const i=r.isWebGL2;let s;function a(d){s=d}let o,l;function u(d){o=d.type,l=d.bytesPerElement}function c(d,h){t.drawElements(s,h,o,d*l),n.update(h,s,1)}function f(d,h,p){if(p===0)return;let m,g;if(i)m=t,g="drawElementsInstanced";else if(m=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",m===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[g](s,h,o,d*l,p),n.update(h,s,p)}this.setMode=a,this.setIndex=u,this.render=c,this.renderInstances=f}function Mke(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,a,o){switch(n.calls++,a){case 4:n.triangles+=o*(s/3);break;case 1:n.lines+=o*(s/2);break;case 3:n.lines+=o*(s-1);break;case 2:n.lines+=o*s;break;case 0:n.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function i(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function Nke(t,e){return t[0]-e[0]}function $ke(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Ike(t,e,n){const r={},i=new Float32Array(8),s=new WeakMap,a=new qi,o=[];for(let u=0;u<8;u++)o[u]=[u,0];function l(u,c,f){const d=u.morphTargetInfluences;if(e.isWebGL2===!0){const h=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,p=h!==void 0?h.length:0;let m=s.get(c);if(m===void 0||m.count!==p){let N=function(){M.dispose(),s.delete(c),c.removeEventListener("dispose",N)};m!==void 0&&m.texture.dispose();const y=c.morphAttributes.position!==void 0,b=c.morphAttributes.normal!==void 0,x=c.morphAttributes.color!==void 0,w=c.morphAttributes.position||[],S=c.morphAttributes.normal||[],C=c.morphAttributes.color||[];let _=0;y===!0&&(_=1),b===!0&&(_=2),x===!0&&(_=3);let E=c.attributes.position.count*_,T=1;E>e.maxTextureSize&&(T=Math.ceil(E/e.maxTextureSize),E=e.maxTextureSize);const k=new Float32Array(E*T*4*p),M=new HQ(k,E,T,p);M.type=Hh,M.needsUpdate=!0;const A=_*4;for(let $=0;$<p;$++){const D=w[$],P=S[$],O=C[$],B=E*T*4*$;for(let H=0;H<D.count;H++){const te=H*A;y===!0&&(a.fromBufferAttribute(D,H),k[B+te+0]=a.x,k[B+te+1]=a.y,k[B+te+2]=a.z,k[B+te+3]=0),b===!0&&(a.fromBufferAttribute(P,H),k[B+te+4]=a.x,k[B+te+5]=a.y,k[B+te+6]=a.z,k[B+te+7]=0),x===!0&&(a.fromBufferAttribute(O,H),k[B+te+8]=a.x,k[B+te+9]=a.y,k[B+te+10]=a.z,k[B+te+11]=O.itemSize===4?a.w:1)}}m={count:p,texture:M,size:new _n(E,T)},s.set(c,m),c.addEventListener("dispose",N)}let g=0;for(let y=0;y<d.length;y++)g+=d[y];const v=c.morphTargetsRelative?1:1-g;f.getUniforms().setValue(t,"morphTargetBaseInfluence",v),f.getUniforms().setValue(t,"morphTargetInfluences",d),f.getUniforms().setValue(t,"morphTargetsTexture",m.texture,n),f.getUniforms().setValue(t,"morphTargetsTextureSize",m.size)}else{const h=d===void 0?0:d.length;let p=r[c.id];if(p===void 0||p.length!==h){p=[];for(let b=0;b<h;b++)p[b]=[b,0];r[c.id]=p}for(let b=0;b<h;b++){const x=p[b];x[0]=b,x[1]=d[b]}p.sort($ke);for(let b=0;b<8;b++)b<h&&p[b][1]?(o[b][0]=p[b][0],o[b][1]=p[b][1]):(o[b][0]=Number.MAX_SAFE_INTEGER,o[b][1]=0);o.sort(Nke);const m=c.morphAttributes.position,g=c.morphAttributes.normal;let v=0;for(let b=0;b<8;b++){const x=o[b],w=x[0],S=x[1];w!==Number.MAX_SAFE_INTEGER&&S?(m&&c.getAttribute("morphTarget"+b)!==m[w]&&c.setAttribute("morphTarget"+b,m[w]),g&&c.getAttribute("morphNormal"+b)!==g[w]&&c.setAttribute("morphNormal"+b,g[w]),i[b]=S,v+=S):(m&&c.hasAttribute("morphTarget"+b)===!0&&c.deleteAttribute("morphTarget"+b),g&&c.hasAttribute("morphNormal"+b)===!0&&c.deleteAttribute("morphNormal"+b),i[b]=0)}const y=c.morphTargetsRelative?1:1-v;f.getUniforms().setValue(t,"morphTargetBaseInfluence",y),f.getUniforms().setValue(t,"morphTargetInfluences",i)}}return{update:l}}function Dke(t,e,n,r){let i=new WeakMap;function s(l){const u=r.render.frame,c=l.geometry,f=e.get(l,c);return i.get(f)!==u&&(e.update(f),i.set(f,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),n.update(l.instanceMatrix,34962),l.instanceColor!==null&&n.update(l.instanceColor,34962)),f}function a(){i=new WeakMap}function o(l){const u=l.target;u.removeEventListener("dispose",o),n.remove(u.instanceMatrix),u.instanceColor!==null&&n.remove(u.instanceColor)}return{update:s,dispose:a}}const nee=new eo,ree=new HQ,iee=new yCe,see=new QQ,DG=[],RG=[],OG=new Float32Array(16),FG=new Float32Array(9),LG=new Float32Array(4);function gv(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let s=DG[i];if(s===void 0&&(s=new Float32Array(i),DG[i]=s),e!==0){r.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=n,t[a].toArray(s,o)}return s}function ui(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function ci(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function OA(t,e){let n=RG[e];n===void 0&&(n=new Int32Array(e),RG[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function Rke(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Oke(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ui(n,e))return;t.uniform2fv(this.addr,e),ci(n,e)}}function Fke(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(ui(n,e))return;t.uniform3fv(this.addr,e),ci(n,e)}}function Lke(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ui(n,e))return;t.uniform4fv(this.addr,e),ci(n,e)}}function Pke(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(ui(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),ci(n,e)}else{if(ui(n,r))return;LG.set(r),t.uniformMatrix2fv(this.addr,!1,LG),ci(n,r)}}function zke(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(ui(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),ci(n,e)}else{if(ui(n,r))return;FG.set(r),t.uniformMatrix3fv(this.addr,!1,FG),ci(n,r)}}function Bke(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(ui(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),ci(n,e)}else{if(ui(n,r))return;OG.set(r),t.uniformMatrix4fv(this.addr,!1,OG),ci(n,r)}}function Uke(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Vke(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ui(n,e))return;t.uniform2iv(this.addr,e),ci(n,e)}}function Wke(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(ui(n,e))return;t.uniform3iv(this.addr,e),ci(n,e)}}function Gke(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ui(n,e))return;t.uniform4iv(this.addr,e),ci(n,e)}}function Hke(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function jke(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ui(n,e))return;t.uniform2uiv(this.addr,e),ci(n,e)}}function qke(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(ui(n,e))return;t.uniform3uiv(this.addr,e),ci(n,e)}}function Xke(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ui(n,e))return;t.uniform4uiv(this.addr,e),ci(n,e)}}function Yke(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(e||nee,i)}function Kke(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||iee,i)}function Zke(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||see,i)}function Jke(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||ree,i)}function Qke(t){switch(t){case 5126:return Rke;case 35664:return Oke;case 35665:return Fke;case 35666:return Lke;case 35674:return Pke;case 35675:return zke;case 35676:return Bke;case 5124:case 35670:return Uke;case 35667:case 35671:return Vke;case 35668:case 35672:return Wke;case 35669:case 35673:return Gke;case 5125:return Hke;case 36294:return jke;case 36295:return qke;case 36296:return Xke;case 35678:case 36198:case 36298:case 36306:case 35682:return Yke;case 35679:case 36299:case 36307:return Kke;case 35680:case 36300:case 36308:case 36293:return Zke;case 36289:case 36303:case 36311:case 36292:return Jke}}function eAe(t,e){t.uniform1fv(this.addr,e)}function tAe(t,e){const n=gv(e,this.size,2);t.uniform2fv(this.addr,n)}function nAe(t,e){const n=gv(e,this.size,3);t.uniform3fv(this.addr,n)}function rAe(t,e){const n=gv(e,this.size,4);t.uniform4fv(this.addr,n)}function iAe(t,e){const n=gv(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function sAe(t,e){const n=gv(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function aAe(t,e){const n=gv(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function oAe(t,e){t.uniform1iv(this.addr,e)}function lAe(t,e){t.uniform2iv(this.addr,e)}function uAe(t,e){t.uniform3iv(this.addr,e)}function cAe(t,e){t.uniform4iv(this.addr,e)}function fAe(t,e){t.uniform1uiv(this.addr,e)}function dAe(t,e){t.uniform2uiv(this.addr,e)}function hAe(t,e){t.uniform3uiv(this.addr,e)}function pAe(t,e){t.uniform4uiv(this.addr,e)}function mAe(t,e,n){const r=this.cache,i=e.length,s=OA(n,i);ui(r,s)||(t.uniform1iv(this.addr,s),ci(r,s));for(let a=0;a!==i;++a)n.setTexture2D(e[a]||nee,s[a])}function gAe(t,e,n){const r=this.cache,i=e.length,s=OA(n,i);ui(r,s)||(t.uniform1iv(this.addr,s),ci(r,s));for(let a=0;a!==i;++a)n.setTexture3D(e[a]||iee,s[a])}function vAe(t,e,n){const r=this.cache,i=e.length,s=OA(n,i);ui(r,s)||(t.uniform1iv(this.addr,s),ci(r,s));for(let a=0;a!==i;++a)n.setTextureCube(e[a]||see,s[a])}function yAe(t,e,n){const r=this.cache,i=e.length,s=OA(n,i);ui(r,s)||(t.uniform1iv(this.addr,s),ci(r,s));for(let a=0;a!==i;++a)n.setTexture2DArray(e[a]||ree,s[a])}function bAe(t){switch(t){case 5126:return eAe;case 35664:return tAe;case 35665:return nAe;case 35666:return rAe;case 35674:return iAe;case 35675:return sAe;case 35676:return aAe;case 5124:case 35670:return oAe;case 35667:case 35671:return lAe;case 35668:case 35672:return uAe;case 35669:case 35673:return cAe;case 5125:return fAe;case 36294:return dAe;case 36295:return hAe;case 36296:return pAe;case 35678:case 36198:case 36298:case 36306:case 35682:return mAe;case 35679:case 36299:case 36307:return gAe;case 35680:case 36300:case 36308:case 36293:return vAe;case 36289:case 36303:case 36311:case 36292:return yAe}}class xAe{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.setValue=Qke(n.type)}}class wAe{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.size=n.size,this.setValue=bAe(n.type)}}class _Ae{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let s=0,a=i.length;s!==a;++s){const o=i[s];o.setValue(e,n[o.id],r)}}}const lD=/(\w+)(\])?(\[|\.)?/g;function PG(t,e){t.seq.push(e),t.map[e.id]=e}function SAe(t,e,n){const r=t.name,i=r.length;for(lD.lastIndex=0;;){const s=lD.exec(r),a=lD.lastIndex;let o=s[1];const l=s[2]==="]",u=s[3];if(l&&(o=o|0),u===void 0||u==="["&&a+2===i){PG(n,u===void 0?new xAe(o,t,e):new wAe(o,t,e));break}else{let f=n.map[o];f===void 0&&(f=new _Ae(o),PG(n,f)),n=f}}}class uE{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,35718);for(let i=0;i<r;++i){const s=e.getActiveUniform(n,i),a=e.getUniformLocation(n,s.name);SAe(s,a,this)}}setValue(e,n,r,i){const s=this.map[n];s!==void 0&&s.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let s=0,a=n.length;s!==a;++s){const o=n[s],l=r[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,s=e.length;i!==s;++i){const a=e[i];a.id in n&&r.push(a)}return r}}function zG(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}let CAe=0;function EAe(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let a=i;a<s;a++){const o=a+1;r.push(`${o===e?">":" "} ${o}: ${n[a]}`)}return r.join(`
`)}function TAe(t){switch(t){case pp:return["Linear","( value )"];case rr:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function BG(t,e,n){const r=t.getShaderParameter(e,35713),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const a=parseInt(s[1]);return n.toUpperCase()+`

`+i+`

`+EAe(t.getShaderSource(e),a)}else return i}function kAe(t,e){const n=TAe(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function AAe(t,e){let n;switch(e){case LSe:n="Linear";break;case PSe:n="Reinhard";break;case zSe:n="OptimizedCineon";break;case BSe:n="ACESFilmic";break;case USe:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function MAe(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(g1).join(`
`)}function NAe(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function $Ae(t,e){const n={},r=t.getProgramParameter(e,35721);for(let i=0;i<r;i++){const s=t.getActiveAttrib(e,i),a=s.name;let o=1;s.type===35674&&(o=2),s.type===35675&&(o=3),s.type===35676&&(o=4),n[a]={type:s.type,location:t.getAttribLocation(e,a),locationSize:o}}return n}function g1(t){return t!==""}function UG(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function VG(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const IAe=/^[ \t]*#include +<([\w\d./]+)>/gm;function BO(t){return t.replace(IAe,DAe)}function DAe(t,e){const n=nn[e];if(n===void 0)throw new Error("Can not resolve #include <"+e+">");return BO(n)}const RAe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function WG(t){return t.replace(RAe,OAe)}function OAe(t,e,n,r){let i="";for(let s=parseInt(e);s<parseInt(n);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function GG(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function FAe(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===RQ?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===mSe?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===m1&&(e="SHADOWMAP_TYPE_VSM"),e}function LAe(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case l0:case u0:e="ENVMAP_TYPE_CUBE";break;case IA:e="ENVMAP_TYPE_CUBE_UV";break}return e}function PAe(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case u0:e="ENVMAP_MODE_REFRACTION";break}return e}function zAe(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case LQ:e="ENVMAP_BLENDING_MULTIPLY";break;case OSe:e="ENVMAP_BLENDING_MIX";break;case FSe:e="ENVMAP_BLENDING_ADD";break}return e}function BAe(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function UAe(t,e,n,r){const i=t.getContext(),s=n.defines;let a=n.vertexShader,o=n.fragmentShader;const l=FAe(n),u=LAe(n),c=PAe(n),f=zAe(n),d=BAe(n),h=n.isWebGL2?"":MAe(n),p=NAe(s),m=i.createProgram();let g,v,y=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(g=[p].filter(g1).join(`
`),g.length>0&&(g+=`
`),v=[h,p].filter(g1).join(`
`),v.length>0&&(v+=`
`)):(g=[GG(n),"#define SHADER_NAME "+n.shaderName,p,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(g1).join(`
`),v=[h,GG(n),"#define SHADER_NAME "+n.shaderName,p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+c:"",n.envMap?"#define "+f:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Lc?"#define TONE_MAPPING":"",n.toneMapping!==Lc?nn.tonemapping_pars_fragment:"",n.toneMapping!==Lc?AAe("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",nn.encodings_pars_fragment,kAe("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(g1).join(`
`)),a=BO(a),a=UG(a,n),a=VG(a,n),o=BO(o),o=UG(o,n),o=VG(o,n),a=WG(a),o=WG(o),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,v=["#define varying in",n.glslVersion===dG?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===dG?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);const b=y+g+a,x=y+v+o,w=zG(i,35633,b),S=zG(i,35632,x);if(i.attachShader(m,w),i.attachShader(m,S),n.index0AttributeName!==void 0?i.bindAttribLocation(m,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m),t.debug.checkShaderErrors){const E=i.getProgramInfoLog(m).trim(),T=i.getShaderInfoLog(w).trim(),k=i.getShaderInfoLog(S).trim();let M=!0,A=!0;if(i.getProgramParameter(m,35714)===!1){M=!1;const N=BG(i,w,"vertex"),$=BG(i,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(m,35715)+`

Program Info Log: `+E+`
`+N+`
`+$)}else E!==""?console.warn("THREE.WebGLProgram: Program Info Log:",E):(T===""||k==="")&&(A=!1);A&&(this.diagnostics={runnable:M,programLog:E,vertexShader:{log:T,prefix:g},fragmentShader:{log:k,prefix:v}})}i.deleteShader(w),i.deleteShader(S);let C;this.getUniforms=function(){return C===void 0&&(C=new uE(i,m)),C};let _;return this.getAttributes=function(){return _===void 0&&(_=$Ae(i,m)),_},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=CAe++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=w,this.fragmentShader=S,this}let VAe=0;class WAe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),s=this._getShaderStage(r),a=this._getShaderCacheForMaterial(e);return a.has(i)===!1&&(a.add(i),i.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new GAe(e),n.set(e,r)),r}}class GAe{constructor(e){this.id=VAe++,this.code=e,this.usedTimes=0}}function HAe(t,e,n,r,i,s,a){const o=new qQ,l=new WAe,u=[],c=i.isWebGL2,f=i.logarithmicDepthBuffer,d=i.vertexTextures;let h=i.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(_,E,T,k,M){const A=k.fog,N=M.geometry,$=_.isMeshStandardMaterial?k.environment:null,D=(_.isMeshStandardMaterial?n:e).get(_.envMap||$),P=D&&D.mapping===IA?D.image.height:null,O=p[_.type];_.precision!==null&&(h=i.getMaxPrecision(_.precision),h!==_.precision&&console.warn("THREE.WebGLProgram.getParameters:",_.precision,"not supported, using",h,"instead."));const B=N.morphAttributes.position||N.morphAttributes.normal||N.morphAttributes.color,H=B!==void 0?B.length:0;let te=0;N.morphAttributes.position!==void 0&&(te=1),N.morphAttributes.normal!==void 0&&(te=2),N.morphAttributes.color!==void 0&&(te=3);let q,Z,ne,G;if(O){const pe=au[O];q=pe.vertexShader,Z=pe.fragmentShader}else q=_.vertexShader,Z=_.fragmentShader,l.update(_),ne=l.getVertexShaderID(_),G=l.getFragmentShaderID(_);const he=t.getRenderTarget(),ve=_.alphaTest>0,we=_.clearcoat>0,X=_.iridescence>0;return{isWebGL2:c,shaderID:O,shaderName:_.type,vertexShader:q,fragmentShader:Z,defines:_.defines,customVertexShaderID:ne,customFragmentShaderID:G,isRawShaderMaterial:_.isRawShaderMaterial===!0,glslVersion:_.glslVersion,precision:h,instancing:M.isInstancedMesh===!0,instancingColor:M.isInstancedMesh===!0&&M.instanceColor!==null,supportsVertexTextures:d,outputEncoding:he===null?t.outputEncoding:he.isXRRenderTarget===!0?he.texture.encoding:pp,map:!!_.map,matcap:!!_.matcap,envMap:!!D,envMapMode:D&&D.mapping,envMapCubeUVHeight:P,lightMap:!!_.lightMap,aoMap:!!_.aoMap,emissiveMap:!!_.emissiveMap,bumpMap:!!_.bumpMap,normalMap:!!_.normalMap,objectSpaceNormalMap:_.normalMapType===oCe,tangentSpaceNormalMap:_.normalMapType===aCe,decodeVideoTexture:!!_.map&&_.map.isVideoTexture===!0&&_.map.encoding===rr,clearcoat:we,clearcoatMap:we&&!!_.clearcoatMap,clearcoatRoughnessMap:we&&!!_.clearcoatRoughnessMap,clearcoatNormalMap:we&&!!_.clearcoatNormalMap,iridescence:X,iridescenceMap:X&&!!_.iridescenceMap,iridescenceThicknessMap:X&&!!_.iridescenceThicknessMap,displacementMap:!!_.displacementMap,roughnessMap:!!_.roughnessMap,metalnessMap:!!_.metalnessMap,specularMap:!!_.specularMap,specularIntensityMap:!!_.specularIntensityMap,specularColorMap:!!_.specularColorMap,opaque:_.transparent===!1&&_.blending===Pg,alphaMap:!!_.alphaMap,alphaTest:ve,gradientMap:!!_.gradientMap,sheen:_.sheen>0,sheenColorMap:!!_.sheenColorMap,sheenRoughnessMap:!!_.sheenRoughnessMap,transmission:_.transmission>0,transmissionMap:!!_.transmissionMap,thicknessMap:!!_.thicknessMap,combine:_.combine,vertexTangents:!!_.normalMap&&!!N.attributes.tangent,vertexColors:_.vertexColors,vertexAlphas:_.vertexColors===!0&&!!N.attributes.color&&N.attributes.color.itemSize===4,vertexUvs:!!_.map||!!_.bumpMap||!!_.normalMap||!!_.specularMap||!!_.alphaMap||!!_.emissiveMap||!!_.roughnessMap||!!_.metalnessMap||!!_.clearcoatMap||!!_.clearcoatRoughnessMap||!!_.clearcoatNormalMap||!!_.iridescenceMap||!!_.iridescenceThicknessMap||!!_.displacementMap||!!_.transmissionMap||!!_.thicknessMap||!!_.specularIntensityMap||!!_.specularColorMap||!!_.sheenColorMap||!!_.sheenRoughnessMap,uvsVertexOnly:!(_.map||_.bumpMap||_.normalMap||_.specularMap||_.alphaMap||_.emissiveMap||_.roughnessMap||_.metalnessMap||_.clearcoatNormalMap||_.iridescenceMap||_.iridescenceThicknessMap||_.transmission>0||_.transmissionMap||_.thicknessMap||_.specularIntensityMap||_.specularColorMap||_.sheen>0||_.sheenColorMap||_.sheenRoughnessMap)&&!!_.displacementMap,fog:!!A,useFog:_.fog===!0,fogExp2:A&&A.isFogExp2,flatShading:!!_.flatShading,sizeAttenuation:_.sizeAttenuation,logarithmicDepthBuffer:f,skinning:M.isSkinnedMesh===!0,morphTargets:N.morphAttributes.position!==void 0,morphNormals:N.morphAttributes.normal!==void 0,morphColors:N.morphAttributes.color!==void 0,morphTargetsCount:H,morphTextureStride:te,numDirLights:E.directional.length,numPointLights:E.point.length,numSpotLights:E.spot.length,numSpotLightMaps:E.spotLightMap.length,numRectAreaLights:E.rectArea.length,numHemiLights:E.hemi.length,numDirLightShadows:E.directionalShadowMap.length,numPointLightShadows:E.pointShadowMap.length,numSpotLightShadows:E.spotShadowMap.length,numSpotLightShadowsWithMaps:E.numSpotLightShadowsWithMaps,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:_.dithering,shadowMapEnabled:t.shadowMap.enabled&&T.length>0,shadowMapType:t.shadowMap.type,toneMapping:_.toneMapped?t.toneMapping:Lc,useLegacyLights:t.useLegacyLights,premultipliedAlpha:_.premultipliedAlpha,doubleSided:_.side===Wf,flipSided:_.side===Qa,useDepthPacking:!!_.depthPacking,depthPacking:_.depthPacking||0,index0AttributeName:_.index0AttributeName,extensionDerivatives:_.extensions&&_.extensions.derivatives,extensionFragDepth:_.extensions&&_.extensions.fragDepth,extensionDrawBuffers:_.extensions&&_.extensions.drawBuffers,extensionShaderTextureLOD:_.extensions&&_.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||r.has("EXT_shader_texture_lod"),customProgramCacheKey:_.customProgramCacheKey()}}function g(_){const E=[];if(_.shaderID?E.push(_.shaderID):(E.push(_.customVertexShaderID),E.push(_.customFragmentShaderID)),_.defines!==void 0)for(const T in _.defines)E.push(T),E.push(_.defines[T]);return _.isRawShaderMaterial===!1&&(v(E,_),y(E,_),E.push(t.outputEncoding)),E.push(_.customProgramCacheKey),E.join()}function v(_,E){_.push(E.precision),_.push(E.outputEncoding),_.push(E.envMapMode),_.push(E.envMapCubeUVHeight),_.push(E.combine),_.push(E.vertexUvs),_.push(E.fogExp2),_.push(E.sizeAttenuation),_.push(E.morphTargetsCount),_.push(E.morphAttributeCount),_.push(E.numDirLights),_.push(E.numPointLights),_.push(E.numSpotLights),_.push(E.numSpotLightMaps),_.push(E.numHemiLights),_.push(E.numRectAreaLights),_.push(E.numDirLightShadows),_.push(E.numPointLightShadows),_.push(E.numSpotLightShadows),_.push(E.numSpotLightShadowsWithMaps),_.push(E.shadowMapType),_.push(E.toneMapping),_.push(E.numClippingPlanes),_.push(E.numClipIntersection),_.push(E.depthPacking)}function y(_,E){o.disableAll(),E.isWebGL2&&o.enable(0),E.supportsVertexTextures&&o.enable(1),E.instancing&&o.enable(2),E.instancingColor&&o.enable(3),E.map&&o.enable(4),E.matcap&&o.enable(5),E.envMap&&o.enable(6),E.lightMap&&o.enable(7),E.aoMap&&o.enable(8),E.emissiveMap&&o.enable(9),E.bumpMap&&o.enable(10),E.normalMap&&o.enable(11),E.objectSpaceNormalMap&&o.enable(12),E.tangentSpaceNormalMap&&o.enable(13),E.clearcoat&&o.enable(14),E.clearcoatMap&&o.enable(15),E.clearcoatRoughnessMap&&o.enable(16),E.clearcoatNormalMap&&o.enable(17),E.iridescence&&o.enable(18),E.iridescenceMap&&o.enable(19),E.iridescenceThicknessMap&&o.enable(20),E.displacementMap&&o.enable(21),E.specularMap&&o.enable(22),E.roughnessMap&&o.enable(23),E.metalnessMap&&o.enable(24),E.gradientMap&&o.enable(25),E.alphaMap&&o.enable(26),E.alphaTest&&o.enable(27),E.vertexColors&&o.enable(28),E.vertexAlphas&&o.enable(29),E.vertexUvs&&o.enable(30),E.vertexTangents&&o.enable(31),E.uvsVertexOnly&&o.enable(32),_.push(o.mask),o.disableAll(),E.fog&&o.enable(0),E.useFog&&o.enable(1),E.flatShading&&o.enable(2),E.logarithmicDepthBuffer&&o.enable(3),E.skinning&&o.enable(4),E.morphTargets&&o.enable(5),E.morphNormals&&o.enable(6),E.morphColors&&o.enable(7),E.premultipliedAlpha&&o.enable(8),E.shadowMapEnabled&&o.enable(9),E.useLegacyLights&&o.enable(10),E.doubleSided&&o.enable(11),E.flipSided&&o.enable(12),E.useDepthPacking&&o.enable(13),E.dithering&&o.enable(14),E.specularIntensityMap&&o.enable(15),E.specularColorMap&&o.enable(16),E.transmission&&o.enable(17),E.transmissionMap&&o.enable(18),E.thicknessMap&&o.enable(19),E.sheen&&o.enable(20),E.sheenColorMap&&o.enable(21),E.sheenRoughnessMap&&o.enable(22),E.decodeVideoTexture&&o.enable(23),E.opaque&&o.enable(24),_.push(o.mask)}function b(_){const E=p[_.type];let T;if(E){const k=au[E];T=NCe.clone(k.uniforms)}else T=_.uniforms;return T}function x(_,E){let T;for(let k=0,M=u.length;k<M;k++){const A=u[k];if(A.cacheKey===E){T=A,++T.usedTimes;break}}return T===void 0&&(T=new UAe(t,E,_,s),u.push(T)),T}function w(_){if(--_.usedTimes===0){const E=u.indexOf(_);u[E]=u[u.length-1],u.pop(),_.destroy()}}function S(_){l.remove(_)}function C(){l.dispose()}return{getParameters:m,getProgramCacheKey:g,getUniforms:b,acquireProgram:x,releaseProgram:w,releaseShaderCache:S,programs:u,dispose:C}}function jAe(){let t=new WeakMap;function e(s){let a=t.get(s);return a===void 0&&(a={},t.set(s,a)),a}function n(s){t.delete(s)}function r(s,a,o){t.get(s)[a]=o}function i(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:i}}function qAe(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function HG(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function jG(){const t=[];let e=0;const n=[],r=[],i=[];function s(){e=0,n.length=0,r.length=0,i.length=0}function a(f,d,h,p,m,g){let v=t[e];return v===void 0?(v={id:f.id,object:f,geometry:d,material:h,groupOrder:p,renderOrder:f.renderOrder,z:m,group:g},t[e]=v):(v.id=f.id,v.object=f,v.geometry=d,v.material=h,v.groupOrder=p,v.renderOrder=f.renderOrder,v.z=m,v.group=g),e++,v}function o(f,d,h,p,m,g){const v=a(f,d,h,p,m,g);h.transmission>0?r.push(v):h.transparent===!0?i.push(v):n.push(v)}function l(f,d,h,p,m,g){const v=a(f,d,h,p,m,g);h.transmission>0?r.unshift(v):h.transparent===!0?i.unshift(v):n.unshift(v)}function u(f,d){n.length>1&&n.sort(f||qAe),r.length>1&&r.sort(d||HG),i.length>1&&i.sort(d||HG)}function c(){for(let f=e,d=t.length;f<d;f++){const h=t[f];if(h.id===null)break;h.id=null,h.object=null,h.geometry=null,h.material=null,h.group=null}}return{opaque:n,transmissive:r,transparent:i,init:s,push:o,unshift:l,finish:c,sort:u}}function XAe(){let t=new WeakMap;function e(r,i){const s=t.get(r);let a;return s===void 0?(a=new jG,t.set(r,[a])):i>=s.length?(a=new jG,s.push(a)):a=s[i],a}function n(){t=new WeakMap}return{get:e,dispose:n}}function YAe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new me,color:new Vn};break;case"SpotLight":n={position:new me,direction:new me,color:new Vn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new me,color:new Vn,distance:0,decay:0};break;case"HemisphereLight":n={direction:new me,skyColor:new Vn,groundColor:new Vn};break;case"RectAreaLight":n={color:new Vn,position:new me,halfWidth:new me,halfHeight:new me};break}return t[e.id]=n,n}}}function KAe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _n};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _n};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _n,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let ZAe=0;function JAe(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function QAe(t,e){const n=new YAe,r=KAe(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let c=0;c<9;c++)i.probe.push(new me);const s=new me,a=new Mi,o=new Mi;function l(c,f){let d=0,h=0,p=0;for(let k=0;k<9;k++)i.probe[k].set(0,0,0);let m=0,g=0,v=0,y=0,b=0,x=0,w=0,S=0,C=0,_=0;c.sort(JAe);const E=f===!0?Math.PI:1;for(let k=0,M=c.length;k<M;k++){const A=c[k],N=A.color,$=A.intensity,D=A.distance,P=A.shadow&&A.shadow.map?A.shadow.map.texture:null;if(A.isAmbientLight)d+=N.r*$*E,h+=N.g*$*E,p+=N.b*$*E;else if(A.isLightProbe)for(let O=0;O<9;O++)i.probe[O].addScaledVector(A.sh.coefficients[O],$);else if(A.isDirectionalLight){const O=n.get(A);if(O.color.copy(A.color).multiplyScalar(A.intensity*E),A.castShadow){const B=A.shadow,H=r.get(A);H.shadowBias=B.bias,H.shadowNormalBias=B.normalBias,H.shadowRadius=B.radius,H.shadowMapSize=B.mapSize,i.directionalShadow[m]=H,i.directionalShadowMap[m]=P,i.directionalShadowMatrix[m]=A.shadow.matrix,x++}i.directional[m]=O,m++}else if(A.isSpotLight){const O=n.get(A);O.position.setFromMatrixPosition(A.matrixWorld),O.color.copy(N).multiplyScalar($*E),O.distance=D,O.coneCos=Math.cos(A.angle),O.penumbraCos=Math.cos(A.angle*(1-A.penumbra)),O.decay=A.decay,i.spot[v]=O;const B=A.shadow;if(A.map&&(i.spotLightMap[C]=A.map,C++,B.updateMatrices(A),A.castShadow&&_++),i.spotLightMatrix[v]=B.matrix,A.castShadow){const H=r.get(A);H.shadowBias=B.bias,H.shadowNormalBias=B.normalBias,H.shadowRadius=B.radius,H.shadowMapSize=B.mapSize,i.spotShadow[v]=H,i.spotShadowMap[v]=P,S++}v++}else if(A.isRectAreaLight){const O=n.get(A);O.color.copy(N).multiplyScalar($),O.halfWidth.set(A.width*.5,0,0),O.halfHeight.set(0,A.height*.5,0),i.rectArea[y]=O,y++}else if(A.isPointLight){const O=n.get(A);if(O.color.copy(A.color).multiplyScalar(A.intensity*E),O.distance=A.distance,O.decay=A.decay,A.castShadow){const B=A.shadow,H=r.get(A);H.shadowBias=B.bias,H.shadowNormalBias=B.normalBias,H.shadowRadius=B.radius,H.shadowMapSize=B.mapSize,H.shadowCameraNear=B.camera.near,H.shadowCameraFar=B.camera.far,i.pointShadow[g]=H,i.pointShadowMap[g]=P,i.pointShadowMatrix[g]=A.shadow.matrix,w++}i.point[g]=O,g++}else if(A.isHemisphereLight){const O=n.get(A);O.skyColor.copy(A.color).multiplyScalar($*E),O.groundColor.copy(A.groundColor).multiplyScalar($*E),i.hemi[b]=O,b++}}y>0&&(e.isWebGL2||t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=rt.LTC_FLOAT_1,i.rectAreaLTC2=rt.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=rt.LTC_HALF_1,i.rectAreaLTC2=rt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=d,i.ambient[1]=h,i.ambient[2]=p;const T=i.hash;(T.directionalLength!==m||T.pointLength!==g||T.spotLength!==v||T.rectAreaLength!==y||T.hemiLength!==b||T.numDirectionalShadows!==x||T.numPointShadows!==w||T.numSpotShadows!==S||T.numSpotMaps!==C)&&(i.directional.length=m,i.spot.length=v,i.rectArea.length=y,i.point.length=g,i.hemi.length=b,i.directionalShadow.length=x,i.directionalShadowMap.length=x,i.pointShadow.length=w,i.pointShadowMap.length=w,i.spotShadow.length=S,i.spotShadowMap.length=S,i.directionalShadowMatrix.length=x,i.pointShadowMatrix.length=w,i.spotLightMatrix.length=S+C-_,i.spotLightMap.length=C,i.numSpotLightShadowsWithMaps=_,T.directionalLength=m,T.pointLength=g,T.spotLength=v,T.rectAreaLength=y,T.hemiLength=b,T.numDirectionalShadows=x,T.numPointShadows=w,T.numSpotShadows=S,T.numSpotMaps=C,i.version=ZAe++)}function u(c,f){let d=0,h=0,p=0,m=0,g=0;const v=f.matrixWorldInverse;for(let y=0,b=c.length;y<b;y++){const x=c[y];if(x.isDirectionalLight){const w=i.directional[d];w.direction.setFromMatrixPosition(x.matrixWorld),s.setFromMatrixPosition(x.target.matrixWorld),w.direction.sub(s),w.direction.transformDirection(v),d++}else if(x.isSpotLight){const w=i.spot[p];w.position.setFromMatrixPosition(x.matrixWorld),w.position.applyMatrix4(v),w.direction.setFromMatrixPosition(x.matrixWorld),s.setFromMatrixPosition(x.target.matrixWorld),w.direction.sub(s),w.direction.transformDirection(v),p++}else if(x.isRectAreaLight){const w=i.rectArea[m];w.position.setFromMatrixPosition(x.matrixWorld),w.position.applyMatrix4(v),o.identity(),a.copy(x.matrixWorld),a.premultiply(v),o.extractRotation(a),w.halfWidth.set(x.width*.5,0,0),w.halfHeight.set(0,x.height*.5,0),w.halfWidth.applyMatrix4(o),w.halfHeight.applyMatrix4(o),m++}else if(x.isPointLight){const w=i.point[h];w.position.setFromMatrixPosition(x.matrixWorld),w.position.applyMatrix4(v),h++}else if(x.isHemisphereLight){const w=i.hemi[g];w.direction.setFromMatrixPosition(x.matrixWorld),w.direction.transformDirection(v),g++}}}return{setup:l,setupView:u,state:i}}function qG(t,e){const n=new QAe(t,e),r=[],i=[];function s(){r.length=0,i.length=0}function a(f){r.push(f)}function o(f){i.push(f)}function l(f){n.setup(r,f)}function u(f){n.setupView(r,f)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:l,setupLightsView:u,pushLight:a,pushShadow:o}}function eMe(t,e){let n=new WeakMap;function r(s,a=0){const o=n.get(s);let l;return o===void 0?(l=new qG(t,e),n.set(s,[l])):a>=o.length?(l=new qG(t,e),o.push(l)):l=o[a],l}function i(){n=new WeakMap}return{get:r,dispose:i}}class tMe extends $w{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=iCe,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class nMe extends $w{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new me,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const rMe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,iMe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function sMe(t,e,n){let r=new eee;const i=new _n,s=new _n,a=new qi,o=new tMe({depthPacking:sCe}),l=new nMe,u={},c=n.maxTextureSize,f={[vd]:Qa,[Qa]:vd,[Wf]:Wf},d=new vp({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new _n},radius:{value:4}},vertexShader:rMe,fragmentShader:iMe}),h=d.clone();h.defines.HORIZONTAL_PASS=1;const p=new qu;p.setAttribute("position",new Al(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new pu(p,d),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=RQ,this.render=function(x,w,S){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||x.length===0)return;const C=t.getRenderTarget(),_=t.getActiveCubeFace(),E=t.getActiveMipmapLevel(),T=t.state;T.setBlending(ad),T.buffers.color.setClear(1,1,1,1),T.buffers.depth.setTest(!0),T.setScissorTest(!1);for(let k=0,M=x.length;k<M;k++){const A=x[k],N=A.shadow;if(N===void 0){console.warn("THREE.WebGLShadowMap:",A,"has no shadow.");continue}if(N.autoUpdate===!1&&N.needsUpdate===!1)continue;i.copy(N.mapSize);const $=N.getFrameExtents();if(i.multiply($),s.copy(N.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(s.x=Math.floor(c/$.x),i.x=s.x*$.x,N.mapSize.x=s.x),i.y>c&&(s.y=Math.floor(c/$.y),i.y=s.y*$.y,N.mapSize.y=s.y)),N.map===null){const P=this.type!==m1?{minFilter:ks,magFilter:ks}:{};N.map=new gp(i.x,i.y,P),N.map.texture.name=A.name+".shadowMap",N.camera.updateProjectionMatrix()}t.setRenderTarget(N.map),t.clear();const D=N.getViewportCount();for(let P=0;P<D;P++){const O=N.getViewport(P);a.set(s.x*O.x,s.y*O.y,s.x*O.z,s.y*O.w),T.viewport(a),N.updateMatrices(A,P),r=N.getFrustum(),b(w,S,N.camera,A,this.type)}N.isPointLightShadow!==!0&&this.type===m1&&v(N,S),N.needsUpdate=!1}g.needsUpdate=!1,t.setRenderTarget(C,_,E)};function v(x,w){const S=e.update(m);d.defines.VSM_SAMPLES!==x.blurSamples&&(d.defines.VSM_SAMPLES=x.blurSamples,h.defines.VSM_SAMPLES=x.blurSamples,d.needsUpdate=!0,h.needsUpdate=!0),x.mapPass===null&&(x.mapPass=new gp(i.x,i.y)),d.uniforms.shadow_pass.value=x.map.texture,d.uniforms.resolution.value=x.mapSize,d.uniforms.radius.value=x.radius,t.setRenderTarget(x.mapPass),t.clear(),t.renderBufferDirect(w,null,S,d,m,null),h.uniforms.shadow_pass.value=x.mapPass.texture,h.uniforms.resolution.value=x.mapSize,h.uniforms.radius.value=x.radius,t.setRenderTarget(x.map),t.clear(),t.renderBufferDirect(w,null,S,h,m,null)}function y(x,w,S,C,_,E){let T=null;const k=S.isPointLight===!0?x.customDistanceMaterial:x.customDepthMaterial;if(k!==void 0)T=k;else if(T=S.isPointLight===!0?l:o,t.localClippingEnabled&&w.clipShadows===!0&&Array.isArray(w.clippingPlanes)&&w.clippingPlanes.length!==0||w.displacementMap&&w.displacementScale!==0||w.alphaMap&&w.alphaTest>0||w.map&&w.alphaTest>0){const M=T.uuid,A=w.uuid;let N=u[M];N===void 0&&(N={},u[M]=N);let $=N[A];$===void 0&&($=T.clone(),N[A]=$),T=$}return T.visible=w.visible,T.wireframe=w.wireframe,E===m1?T.side=w.shadowSide!==null?w.shadowSide:w.side:T.side=w.shadowSide!==null?w.shadowSide:f[w.side],T.alphaMap=w.alphaMap,T.alphaTest=w.alphaTest,T.map=w.map,T.clipShadows=w.clipShadows,T.clippingPlanes=w.clippingPlanes,T.clipIntersection=w.clipIntersection,T.displacementMap=w.displacementMap,T.displacementScale=w.displacementScale,T.displacementBias=w.displacementBias,T.wireframeLinewidth=w.wireframeLinewidth,T.linewidth=w.linewidth,S.isPointLight===!0&&T.isMeshDistanceMaterial===!0&&(T.referencePosition.setFromMatrixPosition(S.matrixWorld),T.nearDistance=C,T.farDistance=_),T}function b(x,w,S,C,_){if(x.visible===!1)return;if(x.layers.test(w.layers)&&(x.isMesh||x.isLine||x.isPoints)&&(x.castShadow||x.receiveShadow&&_===m1)&&(!x.frustumCulled||r.intersectsObject(x))){x.modelViewMatrix.multiplyMatrices(S.matrixWorldInverse,x.matrixWorld);const k=e.update(x),M=x.material;if(Array.isArray(M)){const A=k.groups;for(let N=0,$=A.length;N<$;N++){const D=A[N],P=M[D.materialIndex];if(P&&P.visible){const O=y(x,P,C,S.near,S.far,_);t.renderBufferDirect(S,null,k,O,x,D)}}}else if(M.visible){const A=y(x,M,C,S.near,S.far,_);t.renderBufferDirect(S,null,k,A,x,null)}}const T=x.children;for(let k=0,M=T.length;k<M;k++)b(T[k],w,S,C,_)}}function aMe(t,e,n){const r=n.isWebGL2;function i(){let ie=!1;const ye=new qi;let Ue=null;const lt=new qi(0,0,0,0);return{setMask:function(st){Ue!==st&&!ie&&(t.colorMask(st,st,st,st),Ue=st)},setLocked:function(st){ie=st},setClear:function(st,qn,Ur,Ui,mo){mo===!0&&(st*=Ui,qn*=Ui,Ur*=Ui),ye.set(st,qn,Ur,Ui),lt.equals(ye)===!1&&(t.clearColor(st,qn,Ur,Ui),lt.copy(ye))},reset:function(){ie=!1,Ue=null,lt.set(-1,0,0,0)}}}function s(){let ie=!1,ye=null,Ue=null,lt=null;return{setTest:function(st){st?ve(2929):we(2929)},setMask:function(st){ye!==st&&!ie&&(t.depthMask(st),ye=st)},setFunc:function(st){if(Ue!==st){switch(st){case ASe:t.depthFunc(512);break;case MSe:t.depthFunc(519);break;case NSe:t.depthFunc(513);break;case RO:t.depthFunc(515);break;case $Se:t.depthFunc(514);break;case ISe:t.depthFunc(518);break;case DSe:t.depthFunc(516);break;case RSe:t.depthFunc(517);break;default:t.depthFunc(515)}Ue=st}},setLocked:function(st){ie=st},setClear:function(st){lt!==st&&(t.clearDepth(st),lt=st)},reset:function(){ie=!1,ye=null,Ue=null,lt=null}}}function a(){let ie=!1,ye=null,Ue=null,lt=null,st=null,qn=null,Ur=null,Ui=null,mo=null;return{setTest:function(vr){ie||(vr?ve(2960):we(2960))},setMask:function(vr){ye!==vr&&!ie&&(t.stencilMask(vr),ye=vr)},setFunc:function(vr,Js,go){(Ue!==vr||lt!==Js||st!==go)&&(t.stencilFunc(vr,Js,go),Ue=vr,lt=Js,st=go)},setOp:function(vr,Js,go){(qn!==vr||Ur!==Js||Ui!==go)&&(t.stencilOp(vr,Js,go),qn=vr,Ur=Js,Ui=go)},setLocked:function(vr){ie=vr},setClear:function(vr){mo!==vr&&(t.clearStencil(vr),mo=vr)},reset:function(){ie=!1,ye=null,Ue=null,lt=null,st=null,qn=null,Ur=null,Ui=null,mo=null}}}const o=new i,l=new s,u=new a,c=new WeakMap,f=new WeakMap;let d={},h={},p=new WeakMap,m=[],g=null,v=!1,y=null,b=null,x=null,w=null,S=null,C=null,_=null,E=!1,T=null,k=null,M=null,A=null,N=null;const $=t.getParameter(35661);let D=!1,P=0;const O=t.getParameter(7938);O.indexOf("WebGL")!==-1?(P=parseFloat(/^WebGL (\d)/.exec(O)[1]),D=P>=1):O.indexOf("OpenGL ES")!==-1&&(P=parseFloat(/^OpenGL ES (\d)/.exec(O)[1]),D=P>=2);let B=null,H={};const te=t.getParameter(3088),q=t.getParameter(2978),Z=new qi().fromArray(te),ne=new qi().fromArray(q);function G(ie,ye,Ue){const lt=new Uint8Array(4),st=t.createTexture();t.bindTexture(ie,st),t.texParameteri(ie,10241,9728),t.texParameteri(ie,10240,9728);for(let qn=0;qn<Ue;qn++)t.texImage2D(ye+qn,0,6408,1,1,0,6408,5121,lt);return st}const he={};he[3553]=G(3553,3553,1),he[34067]=G(34067,34069,6),o.setClear(0,0,0,1),l.setClear(1),u.setClear(0),ve(2929),l.setFunc(RO),Je(!1),Q(OW),ve(2884),$e(ad);function ve(ie){d[ie]!==!0&&(t.enable(ie),d[ie]=!0)}function we(ie){d[ie]!==!1&&(t.disable(ie),d[ie]=!1)}function X(ie,ye){return h[ie]!==ye?(t.bindFramebuffer(ie,ye),h[ie]=ye,r&&(ie===36009&&(h[36160]=ye),ie===36160&&(h[36009]=ye)),!0):!1}function ae(ie,ye){let Ue=m,lt=!1;if(ie)if(Ue=p.get(ye),Ue===void 0&&(Ue=[],p.set(ye,Ue)),ie.isWebGLMultipleRenderTargets){const st=ie.texture;if(Ue.length!==st.length||Ue[0]!==36064){for(let qn=0,Ur=st.length;qn<Ur;qn++)Ue[qn]=36064+qn;Ue.length=st.length,lt=!0}}else Ue[0]!==36064&&(Ue[0]=36064,lt=!0);else Ue[0]!==1029&&(Ue[0]=1029,lt=!0);lt&&(n.isWebGL2?t.drawBuffers(Ue):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ue))}function pe(ie){return g!==ie?(t.useProgram(ie),g=ie,!0):!1}const j={[wg]:32774,[vSe]:32778,[ySe]:32779};if(r)j[zW]=32775,j[BW]=32776;else{const ie=e.get("EXT_blend_minmax");ie!==null&&(j[zW]=ie.MIN_EXT,j[BW]=ie.MAX_EXT)}const ze={[bSe]:0,[xSe]:1,[wSe]:768,[OQ]:770,[kSe]:776,[ESe]:774,[SSe]:772,[_Se]:769,[FQ]:771,[TSe]:775,[CSe]:773};function $e(ie,ye,Ue,lt,st,qn,Ur,Ui){if(ie===ad){v===!0&&(we(3042),v=!1);return}if(v===!1&&(ve(3042),v=!0),ie!==gSe){if(ie!==y||Ui!==E){if((b!==wg||S!==wg)&&(t.blendEquation(32774),b=wg,S=wg),Ui)switch(ie){case Pg:t.blendFuncSeparate(1,771,1,771);break;case FW:t.blendFunc(1,1);break;case LW:t.blendFuncSeparate(0,769,0,1);break;case PW:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",ie);break}else switch(ie){case Pg:t.blendFuncSeparate(770,771,1,771);break;case FW:t.blendFunc(770,1);break;case LW:t.blendFuncSeparate(0,769,0,1);break;case PW:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",ie);break}x=null,w=null,C=null,_=null,y=ie,E=Ui}return}st=st||ye,qn=qn||Ue,Ur=Ur||lt,(ye!==b||st!==S)&&(t.blendEquationSeparate(j[ye],j[st]),b=ye,S=st),(Ue!==x||lt!==w||qn!==C||Ur!==_)&&(t.blendFuncSeparate(ze[Ue],ze[lt],ze[qn],ze[Ur]),x=Ue,w=lt,C=qn,_=Ur),y=ie,E=!1}function nt(ie,ye){ie.side===Wf?we(2884):ve(2884);let Ue=ie.side===Qa;ye&&(Ue=!Ue),Je(Ue),ie.blending===Pg&&ie.transparent===!1?$e(ad):$e(ie.blending,ie.blendEquation,ie.blendSrc,ie.blendDst,ie.blendEquationAlpha,ie.blendSrcAlpha,ie.blendDstAlpha,ie.premultipliedAlpha),l.setFunc(ie.depthFunc),l.setTest(ie.depthTest),l.setMask(ie.depthWrite),o.setMask(ie.colorWrite);const lt=ie.stencilWrite;u.setTest(lt),lt&&(u.setMask(ie.stencilWriteMask),u.setFunc(ie.stencilFunc,ie.stencilRef,ie.stencilFuncMask),u.setOp(ie.stencilFail,ie.stencilZFail,ie.stencilZPass)),Ne(ie.polygonOffset,ie.polygonOffsetFactor,ie.polygonOffsetUnits),ie.alphaToCoverage===!0?ve(32926):we(32926)}function Je(ie){T!==ie&&(ie?t.frontFace(2304):t.frontFace(2305),T=ie)}function Q(ie){ie!==hSe?(ve(2884),ie!==k&&(ie===OW?t.cullFace(1029):ie===pSe?t.cullFace(1028):t.cullFace(1032))):we(2884),k=ie}function Ie(ie){ie!==M&&(D&&t.lineWidth(ie),M=ie)}function Ne(ie,ye,Ue){ie?(ve(32823),(A!==ye||N!==Ue)&&(t.polygonOffset(ye,Ue),A=ye,N=Ue)):we(32823)}function ht(ie){ie?ve(3089):we(3089)}function Et(ie){ie===void 0&&(ie=33984+$-1),B!==ie&&(t.activeTexture(ie),B=ie)}function U(ie,ye,Ue){Ue===void 0&&(B===null?Ue=33984+$-1:Ue=B);let lt=H[Ue];lt===void 0&&(lt={type:void 0,texture:void 0},H[Ue]=lt),(lt.type!==ie||lt.texture!==ye)&&(B!==Ue&&(t.activeTexture(Ue),B=Ue),t.bindTexture(ie,ye||he[ie]),lt.type=ie,lt.texture=ye)}function F(){const ie=H[B];ie!==void 0&&ie.type!==void 0&&(t.bindTexture(ie.type,null),ie.type=void 0,ie.texture=void 0)}function be(){try{t.compressedTexImage2D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Be(){try{t.compressedTexImage3D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Le(){try{t.texSubImage2D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Qe(){try{t.texSubImage3D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function pt(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function K(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function fe(){try{t.texStorage2D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function it(){try{t.texStorage3D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Ze(){try{t.texImage2D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function dt(){try{t.texImage3D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function wt(ie){Z.equals(ie)===!1&&(t.scissor(ie.x,ie.y,ie.z,ie.w),Z.copy(ie))}function vt(ie){ne.equals(ie)===!1&&(t.viewport(ie.x,ie.y,ie.z,ie.w),ne.copy(ie))}function en(ie,ye){let Ue=f.get(ye);Ue===void 0&&(Ue=new WeakMap,f.set(ye,Ue));let lt=Ue.get(ie);lt===void 0&&(lt=t.getUniformBlockIndex(ye,ie.name),Ue.set(ie,lt))}function an(ie,ye){const lt=f.get(ye).get(ie);c.get(ye)!==lt&&(t.uniformBlockBinding(ye,lt,ie.__bindingPointIndex),c.set(ye,lt))}function jt(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),r===!0&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),d={},B=null,H={},h={},p=new WeakMap,m=[],g=null,v=!1,y=null,b=null,x=null,w=null,S=null,C=null,_=null,E=!1,T=null,k=null,M=null,A=null,N=null,Z.set(0,0,t.canvas.width,t.canvas.height),ne.set(0,0,t.canvas.width,t.canvas.height),o.reset(),l.reset(),u.reset()}return{buffers:{color:o,depth:l,stencil:u},enable:ve,disable:we,bindFramebuffer:X,drawBuffers:ae,useProgram:pe,setBlending:$e,setMaterial:nt,setFlipSided:Je,setCullFace:Q,setLineWidth:Ie,setPolygonOffset:Ne,setScissorTest:ht,activeTexture:Et,bindTexture:U,unbindTexture:F,compressedTexImage2D:be,compressedTexImage3D:Be,texImage2D:Ze,texImage3D:dt,updateUBOMapping:en,uniformBlockBinding:an,texStorage2D:fe,texStorage3D:it,texSubImage2D:Le,texSubImage3D:Qe,compressedTexSubImage2D:pt,compressedTexSubImage3D:K,scissor:wt,viewport:vt,reset:jt}}function oMe(t,e,n,r,i,s,a){const o=i.isWebGL2,l=i.maxTextures,u=i.maxCubemapSize,c=i.maxTextureSize,f=i.maxSamples,d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,h=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let m;const g=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(U,F){return v?new OffscreenCanvas(U,F):VE("canvas")}function b(U,F,be,Be){let Le=1;if((U.width>Be||U.height>Be)&&(Le=Be/Math.max(U.width,U.height)),Le<1||F===!0)if(typeof HTMLImageElement<"u"&&U instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&U instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&U instanceof ImageBitmap){const Qe=F?cCe:Math.floor,pt=Qe(Le*U.width),K=Qe(Le*U.height);m===void 0&&(m=y(pt,K));const fe=be?y(pt,K):m;return fe.width=pt,fe.height=K,fe.getContext("2d").drawImage(U,0,0,pt,K),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+U.width+"x"+U.height+") to ("+pt+"x"+K+")."),fe}else return"data"in U&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+U.width+"x"+U.height+")."),U;return U}function x(U){return pG(U.width)&&pG(U.height)}function w(U){return o?!1:U.wrapS!==wl||U.wrapT!==wl||U.minFilter!==ks&&U.minFilter!==Ao}function S(U,F){return U.generateMipmaps&&F&&U.minFilter!==ks&&U.minFilter!==Ao}function C(U){t.generateMipmap(U)}function _(U,F,be,Be,Le=!1){if(o===!1)return F;if(U!==null){if(t[U]!==void 0)return t[U];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+U+"'")}let Qe=F;return F===6403&&(be===5126&&(Qe=33326),be===5131&&(Qe=33325),be===5121&&(Qe=33321)),F===33319&&(be===5126&&(Qe=33328),be===5131&&(Qe=33327),be===5121&&(Qe=33323)),F===6408&&(be===5126&&(Qe=34836),be===5131&&(Qe=34842),be===5121&&(Qe=Be===rr&&Le===!1?35907:32856),be===32819&&(Qe=32854),be===32820&&(Qe=32855)),(Qe===33325||Qe===33326||Qe===33327||Qe===33328||Qe===34842||Qe===34836)&&e.get("EXT_color_buffer_float"),Qe}function E(U,F,be){return S(U,be)===!0||U.isFramebufferTexture&&U.minFilter!==ks&&U.minFilter!==Ao?Math.log2(Math.max(F.width,F.height))+1:U.mipmaps!==void 0&&U.mipmaps.length>0?U.mipmaps.length:U.isCompressedTexture&&Array.isArray(U.image)?F.mipmaps.length:1}function T(U){return U===ks||U===UW||U===II?9728:9729}function k(U){const F=U.target;F.removeEventListener("dispose",k),A(F),F.isVideoTexture&&p.delete(F)}function M(U){const F=U.target;F.removeEventListener("dispose",M),$(F)}function A(U){const F=r.get(U);if(F.__webglInit===void 0)return;const be=U.source,Be=g.get(be);if(Be){const Le=Be[F.__cacheKey];Le.usedTimes--,Le.usedTimes===0&&N(U),Object.keys(Be).length===0&&g.delete(be)}r.remove(U)}function N(U){const F=r.get(U);t.deleteTexture(F.__webglTexture);const be=U.source,Be=g.get(be);delete Be[F.__cacheKey],a.memory.textures--}function $(U){const F=U.texture,be=r.get(U),Be=r.get(F);if(Be.__webglTexture!==void 0&&(t.deleteTexture(Be.__webglTexture),a.memory.textures--),U.depthTexture&&U.depthTexture.dispose(),U.isWebGLCubeRenderTarget)for(let Le=0;Le<6;Le++)t.deleteFramebuffer(be.__webglFramebuffer[Le]),be.__webglDepthbuffer&&t.deleteRenderbuffer(be.__webglDepthbuffer[Le]);else{if(t.deleteFramebuffer(be.__webglFramebuffer),be.__webglDepthbuffer&&t.deleteRenderbuffer(be.__webglDepthbuffer),be.__webglMultisampledFramebuffer&&t.deleteFramebuffer(be.__webglMultisampledFramebuffer),be.__webglColorRenderbuffer)for(let Le=0;Le<be.__webglColorRenderbuffer.length;Le++)be.__webglColorRenderbuffer[Le]&&t.deleteRenderbuffer(be.__webglColorRenderbuffer[Le]);be.__webglDepthRenderbuffer&&t.deleteRenderbuffer(be.__webglDepthRenderbuffer)}if(U.isWebGLMultipleRenderTargets)for(let Le=0,Qe=F.length;Le<Qe;Le++){const pt=r.get(F[Le]);pt.__webglTexture&&(t.deleteTexture(pt.__webglTexture),a.memory.textures--),r.remove(F[Le])}r.remove(F),r.remove(U)}let D=0;function P(){D=0}function O(){const U=D;return U>=l&&console.warn("THREE.WebGLTextures: Trying to use "+U+" texture units while this GPU supports only "+l),D+=1,U}function B(U){const F=[];return F.push(U.wrapS),F.push(U.wrapT),F.push(U.wrapR||0),F.push(U.magFilter),F.push(U.minFilter),F.push(U.anisotropy),F.push(U.internalFormat),F.push(U.format),F.push(U.type),F.push(U.generateMipmaps),F.push(U.premultiplyAlpha),F.push(U.flipY),F.push(U.unpackAlignment),F.push(U.encoding),F.join()}function H(U,F){const be=r.get(U);if(U.isVideoTexture&&ht(U),U.isRenderTargetTexture===!1&&U.version>0&&be.__version!==U.version){const Be=U.image;if(Be===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Be.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{we(be,U,F);return}}n.bindTexture(3553,be.__webglTexture,33984+F)}function te(U,F){const be=r.get(U);if(U.version>0&&be.__version!==U.version){we(be,U,F);return}n.bindTexture(35866,be.__webglTexture,33984+F)}function q(U,F){const be=r.get(U);if(U.version>0&&be.__version!==U.version){we(be,U,F);return}n.bindTexture(32879,be.__webglTexture,33984+F)}function Z(U,F){const be=r.get(U);if(U.version>0&&be.__version!==U.version){X(be,U,F);return}n.bindTexture(34067,be.__webglTexture,33984+F)}const ne={[LO]:10497,[wl]:33071,[PO]:33648},G={[ks]:9728,[UW]:9984,[II]:9986,[Ao]:9729,[VSe]:9985,[mx]:9987};function he(U,F,be){if(be?(t.texParameteri(U,10242,ne[F.wrapS]),t.texParameteri(U,10243,ne[F.wrapT]),(U===32879||U===35866)&&t.texParameteri(U,32882,ne[F.wrapR]),t.texParameteri(U,10240,G[F.magFilter]),t.texParameteri(U,10241,G[F.minFilter])):(t.texParameteri(U,10242,33071),t.texParameteri(U,10243,33071),(U===32879||U===35866)&&t.texParameteri(U,32882,33071),(F.wrapS!==wl||F.wrapT!==wl)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(U,10240,T(F.magFilter)),t.texParameteri(U,10241,T(F.minFilter)),F.minFilter!==ks&&F.minFilter!==Ao&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const Be=e.get("EXT_texture_filter_anisotropic");if(F.magFilter===ks||F.minFilter!==II&&F.minFilter!==mx||F.type===Hh&&e.has("OES_texture_float_linear")===!1||o===!1&&F.type===gx&&e.has("OES_texture_half_float_linear")===!1)return;(F.anisotropy>1||r.get(F).__currentAnisotropy)&&(t.texParameterf(U,Be.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(F.anisotropy,i.getMaxAnisotropy())),r.get(F).__currentAnisotropy=F.anisotropy)}}function ve(U,F){let be=!1;U.__webglInit===void 0&&(U.__webglInit=!0,F.addEventListener("dispose",k));const Be=F.source;let Le=g.get(Be);Le===void 0&&(Le={},g.set(Be,Le));const Qe=B(F);if(Qe!==U.__cacheKey){Le[Qe]===void 0&&(Le[Qe]={texture:t.createTexture(),usedTimes:0},a.memory.textures++,be=!0),Le[Qe].usedTimes++;const pt=Le[U.__cacheKey];pt!==void 0&&(Le[U.__cacheKey].usedTimes--,pt.usedTimes===0&&N(F)),U.__cacheKey=Qe,U.__webglTexture=Le[Qe].texture}return be}function we(U,F,be){let Be=3553;(F.isDataArrayTexture||F.isCompressedArrayTexture)&&(Be=35866),F.isData3DTexture&&(Be=32879);const Le=ve(U,F),Qe=F.source;n.bindTexture(Be,U.__webglTexture,33984+be);const pt=r.get(Qe);if(Qe.version!==pt.__version||Le===!0){n.activeTexture(33984+be),t.pixelStorei(37440,F.flipY),t.pixelStorei(37441,F.premultiplyAlpha),t.pixelStorei(3317,F.unpackAlignment),t.pixelStorei(37443,0);const K=w(F)&&x(F.image)===!1;let fe=b(F.image,K,!1,c);fe=Et(F,fe);const it=x(fe)||o,Ze=s.convert(F.format,F.encoding);let dt=s.convert(F.type),wt=_(F.internalFormat,Ze,dt,F.encoding,F.isVideoTexture);he(Be,F,it);let vt;const en=F.mipmaps,an=o&&F.isVideoTexture!==!0,jt=pt.__version===void 0||Le===!0,ie=E(F,fe,it);if(F.isDepthTexture)wt=6402,o?F.type===Hh?wt=36012:F.type===Gh?wt=33190:F.type===zg?wt=35056:wt=33189:F.type===Hh&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),F.format===Qh&&wt===6402&&F.type!==zQ&&F.type!==Gh&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),F.type=Gh,dt=s.convert(F.type)),F.format===c0&&wt===6402&&(wt=34041,F.type!==zg&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),F.type=zg,dt=s.convert(F.type))),jt&&(an?n.texStorage2D(3553,1,wt,fe.width,fe.height):n.texImage2D(3553,0,wt,fe.width,fe.height,0,Ze,dt,null));else if(F.isDataTexture)if(en.length>0&&it){an&&jt&&n.texStorage2D(3553,ie,wt,en[0].width,en[0].height);for(let ye=0,Ue=en.length;ye<Ue;ye++)vt=en[ye],an?n.texSubImage2D(3553,ye,0,0,vt.width,vt.height,Ze,dt,vt.data):n.texImage2D(3553,ye,wt,vt.width,vt.height,0,Ze,dt,vt.data);F.generateMipmaps=!1}else an?(jt&&n.texStorage2D(3553,ie,wt,fe.width,fe.height),n.texSubImage2D(3553,0,0,0,fe.width,fe.height,Ze,dt,fe.data)):n.texImage2D(3553,0,wt,fe.width,fe.height,0,Ze,dt,fe.data);else if(F.isCompressedTexture)if(F.isCompressedArrayTexture){an&&jt&&n.texStorage3D(35866,ie,wt,en[0].width,en[0].height,fe.depth);for(let ye=0,Ue=en.length;ye<Ue;ye++)vt=en[ye],F.format!==_l?Ze!==null?an?n.compressedTexSubImage3D(35866,ye,0,0,0,vt.width,vt.height,fe.depth,Ze,vt.data,0,0):n.compressedTexImage3D(35866,ye,wt,vt.width,vt.height,fe.depth,0,vt.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):an?n.texSubImage3D(35866,ye,0,0,0,vt.width,vt.height,fe.depth,Ze,dt,vt.data):n.texImage3D(35866,ye,wt,vt.width,vt.height,fe.depth,0,Ze,dt,vt.data)}else{an&&jt&&n.texStorage2D(3553,ie,wt,en[0].width,en[0].height);for(let ye=0,Ue=en.length;ye<Ue;ye++)vt=en[ye],F.format!==_l?Ze!==null?an?n.compressedTexSubImage2D(3553,ye,0,0,vt.width,vt.height,Ze,vt.data):n.compressedTexImage2D(3553,ye,wt,vt.width,vt.height,0,vt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):an?n.texSubImage2D(3553,ye,0,0,vt.width,vt.height,Ze,dt,vt.data):n.texImage2D(3553,ye,wt,vt.width,vt.height,0,Ze,dt,vt.data)}else if(F.isDataArrayTexture)an?(jt&&n.texStorage3D(35866,ie,wt,fe.width,fe.height,fe.depth),n.texSubImage3D(35866,0,0,0,0,fe.width,fe.height,fe.depth,Ze,dt,fe.data)):n.texImage3D(35866,0,wt,fe.width,fe.height,fe.depth,0,Ze,dt,fe.data);else if(F.isData3DTexture)an?(jt&&n.texStorage3D(32879,ie,wt,fe.width,fe.height,fe.depth),n.texSubImage3D(32879,0,0,0,0,fe.width,fe.height,fe.depth,Ze,dt,fe.data)):n.texImage3D(32879,0,wt,fe.width,fe.height,fe.depth,0,Ze,dt,fe.data);else if(F.isFramebufferTexture){if(jt)if(an)n.texStorage2D(3553,ie,wt,fe.width,fe.height);else{let ye=fe.width,Ue=fe.height;for(let lt=0;lt<ie;lt++)n.texImage2D(3553,lt,wt,ye,Ue,0,Ze,dt,null),ye>>=1,Ue>>=1}}else if(en.length>0&&it){an&&jt&&n.texStorage2D(3553,ie,wt,en[0].width,en[0].height);for(let ye=0,Ue=en.length;ye<Ue;ye++)vt=en[ye],an?n.texSubImage2D(3553,ye,0,0,Ze,dt,vt):n.texImage2D(3553,ye,wt,Ze,dt,vt);F.generateMipmaps=!1}else an?(jt&&n.texStorage2D(3553,ie,wt,fe.width,fe.height),n.texSubImage2D(3553,0,0,0,Ze,dt,fe)):n.texImage2D(3553,0,wt,Ze,dt,fe);S(F,it)&&C(Be),pt.__version=Qe.version,F.onUpdate&&F.onUpdate(F)}U.__version=F.version}function X(U,F,be){if(F.image.length!==6)return;const Be=ve(U,F),Le=F.source;n.bindTexture(34067,U.__webglTexture,33984+be);const Qe=r.get(Le);if(Le.version!==Qe.__version||Be===!0){n.activeTexture(33984+be),t.pixelStorei(37440,F.flipY),t.pixelStorei(37441,F.premultiplyAlpha),t.pixelStorei(3317,F.unpackAlignment),t.pixelStorei(37443,0);const pt=F.isCompressedTexture||F.image[0].isCompressedTexture,K=F.image[0]&&F.image[0].isDataTexture,fe=[];for(let ye=0;ye<6;ye++)!pt&&!K?fe[ye]=b(F.image[ye],!1,!0,u):fe[ye]=K?F.image[ye].image:F.image[ye],fe[ye]=Et(F,fe[ye]);const it=fe[0],Ze=x(it)||o,dt=s.convert(F.format,F.encoding),wt=s.convert(F.type),vt=_(F.internalFormat,dt,wt,F.encoding),en=o&&F.isVideoTexture!==!0,an=Qe.__version===void 0||Be===!0;let jt=E(F,it,Ze);he(34067,F,Ze);let ie;if(pt){en&&an&&n.texStorage2D(34067,jt,vt,it.width,it.height);for(let ye=0;ye<6;ye++){ie=fe[ye].mipmaps;for(let Ue=0;Ue<ie.length;Ue++){const lt=ie[Ue];F.format!==_l?dt!==null?en?n.compressedTexSubImage2D(34069+ye,Ue,0,0,lt.width,lt.height,dt,lt.data):n.compressedTexImage2D(34069+ye,Ue,vt,lt.width,lt.height,0,lt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):en?n.texSubImage2D(34069+ye,Ue,0,0,lt.width,lt.height,dt,wt,lt.data):n.texImage2D(34069+ye,Ue,vt,lt.width,lt.height,0,dt,wt,lt.data)}}}else{ie=F.mipmaps,en&&an&&(ie.length>0&&jt++,n.texStorage2D(34067,jt,vt,fe[0].width,fe[0].height));for(let ye=0;ye<6;ye++)if(K){en?n.texSubImage2D(34069+ye,0,0,0,fe[ye].width,fe[ye].height,dt,wt,fe[ye].data):n.texImage2D(34069+ye,0,vt,fe[ye].width,fe[ye].height,0,dt,wt,fe[ye].data);for(let Ue=0;Ue<ie.length;Ue++){const st=ie[Ue].image[ye].image;en?n.texSubImage2D(34069+ye,Ue+1,0,0,st.width,st.height,dt,wt,st.data):n.texImage2D(34069+ye,Ue+1,vt,st.width,st.height,0,dt,wt,st.data)}}else{en?n.texSubImage2D(34069+ye,0,0,0,dt,wt,fe[ye]):n.texImage2D(34069+ye,0,vt,dt,wt,fe[ye]);for(let Ue=0;Ue<ie.length;Ue++){const lt=ie[Ue];en?n.texSubImage2D(34069+ye,Ue+1,0,0,dt,wt,lt.image[ye]):n.texImage2D(34069+ye,Ue+1,vt,dt,wt,lt.image[ye])}}}S(F,Ze)&&C(34067),Qe.__version=Le.version,F.onUpdate&&F.onUpdate(F)}U.__version=F.version}function ae(U,F,be,Be,Le){const Qe=s.convert(be.format,be.encoding),pt=s.convert(be.type),K=_(be.internalFormat,Qe,pt,be.encoding);r.get(F).__hasExternalTextures||(Le===32879||Le===35866?n.texImage3D(Le,0,K,F.width,F.height,F.depth,0,Qe,pt,null):n.texImage2D(Le,0,K,F.width,F.height,0,Qe,pt,null)),n.bindFramebuffer(36160,U),Ne(F)?d.framebufferTexture2DMultisampleEXT(36160,Be,Le,r.get(be).__webglTexture,0,Ie(F)):(Le===3553||Le>=34069&&Le<=34074)&&t.framebufferTexture2D(36160,Be,Le,r.get(be).__webglTexture,0),n.bindFramebuffer(36160,null)}function pe(U,F,be){if(t.bindRenderbuffer(36161,U),F.depthBuffer&&!F.stencilBuffer){let Be=33189;if(be||Ne(F)){const Le=F.depthTexture;Le&&Le.isDepthTexture&&(Le.type===Hh?Be=36012:Le.type===Gh&&(Be=33190));const Qe=Ie(F);Ne(F)?d.renderbufferStorageMultisampleEXT(36161,Qe,Be,F.width,F.height):t.renderbufferStorageMultisample(36161,Qe,Be,F.width,F.height)}else t.renderbufferStorage(36161,Be,F.width,F.height);t.framebufferRenderbuffer(36160,36096,36161,U)}else if(F.depthBuffer&&F.stencilBuffer){const Be=Ie(F);be&&Ne(F)===!1?t.renderbufferStorageMultisample(36161,Be,35056,F.width,F.height):Ne(F)?d.renderbufferStorageMultisampleEXT(36161,Be,35056,F.width,F.height):t.renderbufferStorage(36161,34041,F.width,F.height),t.framebufferRenderbuffer(36160,33306,36161,U)}else{const Be=F.isWebGLMultipleRenderTargets===!0?F.texture:[F.texture];for(let Le=0;Le<Be.length;Le++){const Qe=Be[Le],pt=s.convert(Qe.format,Qe.encoding),K=s.convert(Qe.type),fe=_(Qe.internalFormat,pt,K,Qe.encoding),it=Ie(F);be&&Ne(F)===!1?t.renderbufferStorageMultisample(36161,it,fe,F.width,F.height):Ne(F)?d.renderbufferStorageMultisampleEXT(36161,it,fe,F.width,F.height):t.renderbufferStorage(36161,fe,F.width,F.height)}}t.bindRenderbuffer(36161,null)}function j(U,F){if(F&&F.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,U),!(F.depthTexture&&F.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(F.depthTexture).__webglTexture||F.depthTexture.image.width!==F.width||F.depthTexture.image.height!==F.height)&&(F.depthTexture.image.width=F.width,F.depthTexture.image.height=F.height,F.depthTexture.needsUpdate=!0),H(F.depthTexture,0);const Be=r.get(F.depthTexture).__webglTexture,Le=Ie(F);if(F.depthTexture.format===Qh)Ne(F)?d.framebufferTexture2DMultisampleEXT(36160,36096,3553,Be,0,Le):t.framebufferTexture2D(36160,36096,3553,Be,0);else if(F.depthTexture.format===c0)Ne(F)?d.framebufferTexture2DMultisampleEXT(36160,33306,3553,Be,0,Le):t.framebufferTexture2D(36160,33306,3553,Be,0);else throw new Error("Unknown depthTexture format")}function ze(U){const F=r.get(U),be=U.isWebGLCubeRenderTarget===!0;if(U.depthTexture&&!F.__autoAllocateDepthBuffer){if(be)throw new Error("target.depthTexture not supported in Cube render targets");j(F.__webglFramebuffer,U)}else if(be){F.__webglDepthbuffer=[];for(let Be=0;Be<6;Be++)n.bindFramebuffer(36160,F.__webglFramebuffer[Be]),F.__webglDepthbuffer[Be]=t.createRenderbuffer(),pe(F.__webglDepthbuffer[Be],U,!1)}else n.bindFramebuffer(36160,F.__webglFramebuffer),F.__webglDepthbuffer=t.createRenderbuffer(),pe(F.__webglDepthbuffer,U,!1);n.bindFramebuffer(36160,null)}function $e(U,F,be){const Be=r.get(U);F!==void 0&&ae(Be.__webglFramebuffer,U,U.texture,36064,3553),be!==void 0&&ze(U)}function nt(U){const F=U.texture,be=r.get(U),Be=r.get(F);U.addEventListener("dispose",M),U.isWebGLMultipleRenderTargets!==!0&&(Be.__webglTexture===void 0&&(Be.__webglTexture=t.createTexture()),Be.__version=F.version,a.memory.textures++);const Le=U.isWebGLCubeRenderTarget===!0,Qe=U.isWebGLMultipleRenderTargets===!0,pt=x(U)||o;if(Le){be.__webglFramebuffer=[];for(let K=0;K<6;K++)be.__webglFramebuffer[K]=t.createFramebuffer()}else{if(be.__webglFramebuffer=t.createFramebuffer(),Qe)if(i.drawBuffers){const K=U.texture;for(let fe=0,it=K.length;fe<it;fe++){const Ze=r.get(K[fe]);Ze.__webglTexture===void 0&&(Ze.__webglTexture=t.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&U.samples>0&&Ne(U)===!1){const K=Qe?F:[F];be.__webglMultisampledFramebuffer=t.createFramebuffer(),be.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,be.__webglMultisampledFramebuffer);for(let fe=0;fe<K.length;fe++){const it=K[fe];be.__webglColorRenderbuffer[fe]=t.createRenderbuffer(),t.bindRenderbuffer(36161,be.__webglColorRenderbuffer[fe]);const Ze=s.convert(it.format,it.encoding),dt=s.convert(it.type),wt=_(it.internalFormat,Ze,dt,it.encoding,U.isXRRenderTarget===!0),vt=Ie(U);t.renderbufferStorageMultisample(36161,vt,wt,U.width,U.height),t.framebufferRenderbuffer(36160,36064+fe,36161,be.__webglColorRenderbuffer[fe])}t.bindRenderbuffer(36161,null),U.depthBuffer&&(be.__webglDepthRenderbuffer=t.createRenderbuffer(),pe(be.__webglDepthRenderbuffer,U,!0)),n.bindFramebuffer(36160,null)}}if(Le){n.bindTexture(34067,Be.__webglTexture),he(34067,F,pt);for(let K=0;K<6;K++)ae(be.__webglFramebuffer[K],U,F,36064,34069+K);S(F,pt)&&C(34067),n.unbindTexture()}else if(Qe){const K=U.texture;for(let fe=0,it=K.length;fe<it;fe++){const Ze=K[fe],dt=r.get(Ze);n.bindTexture(3553,dt.__webglTexture),he(3553,Ze,pt),ae(be.__webglFramebuffer,U,Ze,36064+fe,3553),S(Ze,pt)&&C(3553)}n.unbindTexture()}else{let K=3553;(U.isWebGL3DRenderTarget||U.isWebGLArrayRenderTarget)&&(o?K=U.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(K,Be.__webglTexture),he(K,F,pt),ae(be.__webglFramebuffer,U,F,36064,K),S(F,pt)&&C(K),n.unbindTexture()}U.depthBuffer&&ze(U)}function Je(U){const F=x(U)||o,be=U.isWebGLMultipleRenderTargets===!0?U.texture:[U.texture];for(let Be=0,Le=be.length;Be<Le;Be++){const Qe=be[Be];if(S(Qe,F)){const pt=U.isWebGLCubeRenderTarget?34067:3553,K=r.get(Qe).__webglTexture;n.bindTexture(pt,K),C(pt),n.unbindTexture()}}}function Q(U){if(o&&U.samples>0&&Ne(U)===!1){const F=U.isWebGLMultipleRenderTargets?U.texture:[U.texture],be=U.width,Be=U.height;let Le=16384;const Qe=[],pt=U.stencilBuffer?33306:36096,K=r.get(U),fe=U.isWebGLMultipleRenderTargets===!0;if(fe)for(let it=0;it<F.length;it++)n.bindFramebuffer(36160,K.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+it,36161,null),n.bindFramebuffer(36160,K.__webglFramebuffer),t.framebufferTexture2D(36009,36064+it,3553,null,0);n.bindFramebuffer(36008,K.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,K.__webglFramebuffer);for(let it=0;it<F.length;it++){Qe.push(36064+it),U.depthBuffer&&Qe.push(pt);const Ze=K.__ignoreDepthValues!==void 0?K.__ignoreDepthValues:!1;if(Ze===!1&&(U.depthBuffer&&(Le|=256),U.stencilBuffer&&(Le|=1024)),fe&&t.framebufferRenderbuffer(36008,36064,36161,K.__webglColorRenderbuffer[it]),Ze===!0&&(t.invalidateFramebuffer(36008,[pt]),t.invalidateFramebuffer(36009,[pt])),fe){const dt=r.get(F[it]).__webglTexture;t.framebufferTexture2D(36009,36064,3553,dt,0)}t.blitFramebuffer(0,0,be,Be,0,0,be,Be,Le,9728),h&&t.invalidateFramebuffer(36008,Qe)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),fe)for(let it=0;it<F.length;it++){n.bindFramebuffer(36160,K.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+it,36161,K.__webglColorRenderbuffer[it]);const Ze=r.get(F[it]).__webglTexture;n.bindFramebuffer(36160,K.__webglFramebuffer),t.framebufferTexture2D(36009,36064+it,3553,Ze,0)}n.bindFramebuffer(36009,K.__webglMultisampledFramebuffer)}}function Ie(U){return Math.min(f,U.samples)}function Ne(U){const F=r.get(U);return o&&U.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&F.__useRenderToTexture!==!1}function ht(U){const F=a.render.frame;p.get(U)!==F&&(p.set(U,F),U.update())}function Et(U,F){const be=U.encoding,Be=U.format,Le=U.type;return U.isCompressedTexture===!0||U.isVideoTexture===!0||U.format===zO||be!==pp&&(be===rr?o===!1?e.has("EXT_sRGB")===!0&&Be===_l?(U.format=zO,U.minFilter=Ao,U.generateMipmaps=!1):F=WQ.sRGBToLinear(F):(Be!==_l||Le!==hp)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",be)),F}this.allocateTextureUnit=O,this.resetTextureUnits=P,this.setTexture2D=H,this.setTexture2DArray=te,this.setTexture3D=q,this.setTextureCube=Z,this.rebindTextures=$e,this.setupRenderTarget=nt,this.updateRenderTargetMipmap=Je,this.updateMultisampleRenderTarget=Q,this.setupDepthRenderbuffer=ze,this.setupFrameBufferTexture=ae,this.useMultisampledRTT=Ne}function lMe(t,e,n){const r=n.isWebGL2;function i(s,a=null){let o;if(s===hp)return 5121;if(s===jSe)return 32819;if(s===qSe)return 32820;if(s===WSe)return 5120;if(s===GSe)return 5122;if(s===zQ)return 5123;if(s===HSe)return 5124;if(s===Gh)return 5125;if(s===Hh)return 5126;if(s===gx)return r?5131:(o=e.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(s===XSe)return 6406;if(s===_l)return 6408;if(s===YSe)return 6409;if(s===KSe)return 6410;if(s===Qh)return 6402;if(s===c0)return 34041;if(s===zO)return o=e.get("EXT_sRGB"),o!==null?o.SRGB_ALPHA_EXT:null;if(s===ZSe)return 6403;if(s===JSe)return 36244;if(s===QSe)return 33319;if(s===eCe)return 33320;if(s===tCe)return 36249;if(s===DI||s===RI||s===OI||s===FI)if(a===rr)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(s===DI)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===RI)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===OI)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===FI)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(s===DI)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===RI)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===OI)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===FI)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===VW||s===WW||s===GW||s===HW)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(s===VW)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===WW)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===GW)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===HW)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===nCe)return o=e.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===jW||s===qW)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(s===jW)return a===rr?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(s===qW)return a===rr?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===XW||s===YW||s===KW||s===ZW||s===JW||s===QW||s===eG||s===tG||s===nG||s===rG||s===iG||s===sG||s===aG||s===oG)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(s===XW)return a===rr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===YW)return a===rr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===KW)return a===rr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===ZW)return a===rr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===JW)return a===rr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===QW)return a===rr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===eG)return a===rr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===tG)return a===rr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===nG)return a===rr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===rG)return a===rr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===iG)return a===rr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===sG)return a===rr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===aG)return a===rr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===oG)return a===rr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===LI)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(s===LI)return a===rr?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===rCe||s===lG||s===uG||s===cG)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(s===LI)return o.COMPRESSED_RED_RGTC1_EXT;if(s===lG)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===uG)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===cG)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===zg?r?34042:(o=e.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null):t[s]!==void 0?t[s]:null}return{convert:i}}class uMe extends Mo{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}let ZS=class extends Ps{constructor(){super(),this.isGroup=!0,this.type="Group"}};const cMe={type:"move"};class uD{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ZS,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ZS,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new me,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new me),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ZS,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new me,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new me),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,s=null,a=null;const o=this._targetRay,l=this._grip,u=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(u&&e.hand){a=!0;for(const m of e.hand.values()){const g=n.getJointPose(m,r),v=this._getHandJoint(u,m);g!==null&&(v.matrix.fromArray(g.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.jointRadius=g.radius),v.visible=g!==null}const c=u.joints["index-finger-tip"],f=u.joints["thumb-tip"],d=c.position.distanceTo(f.position),h=.02,p=.005;u.inputState.pinching&&d>h+p?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&d<=h-p&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(cMe)))}return o!==null&&(o.visible=i!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=a!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new ZS;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}class fMe extends eo{constructor(e,n,r,i,s,a,o,l,u,c){if(c=c!==void 0?c:Qh,c!==Qh&&c!==c0)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&c===Qh&&(r=Gh),r===void 0&&c===c0&&(r=zg),super(null,i,s,a,o,l,c,r,u),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=o!==void 0?o:ks,this.minFilter=l!==void 0?l:ks,this.flipY=!1,this.generateMipmaps=!1}}class dMe extends em{constructor(e,n){super();const r=this;let i=null,s=1,a=null,o="local-floor",l=1,u=null,c=null,f=null,d=null,h=null,p=null;const m=n.getContextAttributes();let g=null,v=null;const y=[],b=[],x=new Set,w=new Map,S=new Mo;S.layers.enable(1),S.viewport=new qi;const C=new Mo;C.layers.enable(2),C.viewport=new qi;const _=[S,C],E=new uMe;E.layers.enable(1),E.layers.enable(2);let T=null,k=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(q){let Z=y[q];return Z===void 0&&(Z=new uD,y[q]=Z),Z.getTargetRaySpace()},this.getControllerGrip=function(q){let Z=y[q];return Z===void 0&&(Z=new uD,y[q]=Z),Z.getGripSpace()},this.getHand=function(q){let Z=y[q];return Z===void 0&&(Z=new uD,y[q]=Z),Z.getHandSpace()};function M(q){const Z=b.indexOf(q.inputSource);if(Z===-1)return;const ne=y[Z];ne!==void 0&&ne.dispatchEvent({type:q.type,data:q.inputSource})}function A(){i.removeEventListener("select",M),i.removeEventListener("selectstart",M),i.removeEventListener("selectend",M),i.removeEventListener("squeeze",M),i.removeEventListener("squeezestart",M),i.removeEventListener("squeezeend",M),i.removeEventListener("end",A),i.removeEventListener("inputsourceschange",N);for(let q=0;q<y.length;q++){const Z=b[q];Z!==null&&(b[q]=null,y[q].disconnect(Z))}T=null,k=null,e.setRenderTarget(g),h=null,d=null,f=null,i=null,v=null,te.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(q){s=q,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(q){o=q,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||a},this.setReferenceSpace=function(q){u=q},this.getBaseLayer=function(){return d!==null?d:h},this.getBinding=function(){return f},this.getFrame=function(){return p},this.getSession=function(){return i},this.setSession=async function(q){if(i=q,i!==null){if(g=e.getRenderTarget(),i.addEventListener("select",M),i.addEventListener("selectstart",M),i.addEventListener("selectend",M),i.addEventListener("squeeze",M),i.addEventListener("squeezestart",M),i.addEventListener("squeezeend",M),i.addEventListener("end",A),i.addEventListener("inputsourceschange",N),m.xrCompatible!==!0&&await n.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const Z={antialias:i.renderState.layers===void 0?m.antialias:!0,alpha:m.alpha,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:s};h=new XRWebGLLayer(i,n,Z),i.updateRenderState({baseLayer:h}),v=new gp(h.framebufferWidth,h.framebufferHeight,{format:_l,type:hp,encoding:e.outputEncoding,stencilBuffer:m.stencil})}else{let Z=null,ne=null,G=null;m.depth&&(G=m.stencil?35056:33190,Z=m.stencil?c0:Qh,ne=m.stencil?zg:Gh);const he={colorFormat:32856,depthFormat:G,scaleFactor:s};f=new XRWebGLBinding(i,n),d=f.createProjectionLayer(he),i.updateRenderState({layers:[d]}),v=new gp(d.textureWidth,d.textureHeight,{format:_l,type:hp,depthTexture:new fMe(d.textureWidth,d.textureHeight,ne,void 0,void 0,void 0,void 0,void 0,void 0,Z),stencilBuffer:m.stencil,encoding:e.outputEncoding,samples:m.antialias?4:0});const ve=e.properties.get(v);ve.__ignoreDepthValues=d.ignoreDepthValues}v.isXRRenderTarget=!0,this.setFoveation(l),u=null,a=await i.requestReferenceSpace(o),te.setContext(i),te.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};function N(q){for(let Z=0;Z<q.removed.length;Z++){const ne=q.removed[Z],G=b.indexOf(ne);G>=0&&(b[G]=null,y[G].disconnect(ne))}for(let Z=0;Z<q.added.length;Z++){const ne=q.added[Z];let G=b.indexOf(ne);if(G===-1){for(let ve=0;ve<y.length;ve++)if(ve>=b.length){b.push(ne),G=ve;break}else if(b[ve]===null){b[ve]=ne,G=ve;break}if(G===-1)break}const he=y[G];he&&he.connect(ne)}}const $=new me,D=new me;function P(q,Z,ne){$.setFromMatrixPosition(Z.matrixWorld),D.setFromMatrixPosition(ne.matrixWorld);const G=$.distanceTo(D),he=Z.projectionMatrix.elements,ve=ne.projectionMatrix.elements,we=he[14]/(he[10]-1),X=he[14]/(he[10]+1),ae=(he[9]+1)/he[5],pe=(he[9]-1)/he[5],j=(he[8]-1)/he[0],ze=(ve[8]+1)/ve[0],$e=we*j,nt=we*ze,Je=G/(-j+ze),Q=Je*-j;Z.matrixWorld.decompose(q.position,q.quaternion,q.scale),q.translateX(Q),q.translateZ(Je),q.matrixWorld.compose(q.position,q.quaternion,q.scale),q.matrixWorldInverse.copy(q.matrixWorld).invert();const Ie=we+Je,Ne=X+Je,ht=$e-Q,Et=nt+(G-Q),U=ae*X/Ne*Ie,F=pe*X/Ne*Ie;q.projectionMatrix.makePerspective(ht,Et,U,F,Ie,Ne)}function O(q,Z){Z===null?q.matrixWorld.copy(q.matrix):q.matrixWorld.multiplyMatrices(Z.matrixWorld,q.matrix),q.matrixWorldInverse.copy(q.matrixWorld).invert()}this.updateCamera=function(q){if(i===null)return;E.near=C.near=S.near=q.near,E.far=C.far=S.far=q.far,(T!==E.near||k!==E.far)&&(i.updateRenderState({depthNear:E.near,depthFar:E.far}),T=E.near,k=E.far);const Z=q.parent,ne=E.cameras;O(E,Z);for(let he=0;he<ne.length;he++)O(ne[he],Z);E.matrixWorld.decompose(E.position,E.quaternion,E.scale),q.matrix.copy(E.matrix),q.matrix.decompose(q.position,q.quaternion,q.scale);const G=q.children;for(let he=0,ve=G.length;he<ve;he++)G[he].updateMatrixWorld(!0);ne.length===2?P(E,S,C):E.projectionMatrix.copy(S.projectionMatrix)},this.getCamera=function(){return E},this.getFoveation=function(){if(!(d===null&&h===null))return l},this.setFoveation=function(q){l=q,d!==null&&(d.fixedFoveation=q),h!==null&&h.fixedFoveation!==void 0&&(h.fixedFoveation=q)},this.getPlanes=function(){return x};let B=null;function H(q,Z){if(c=Z.getViewerPose(u||a),p=Z,c!==null){const ne=c.views;h!==null&&(e.setRenderTargetFramebuffer(v,h.framebuffer),e.setRenderTarget(v));let G=!1;ne.length!==E.cameras.length&&(E.cameras.length=0,G=!0);for(let he=0;he<ne.length;he++){const ve=ne[he];let we=null;if(h!==null)we=h.getViewport(ve);else{const ae=f.getViewSubImage(d,ve);we=ae.viewport,he===0&&(e.setRenderTargetTextures(v,ae.colorTexture,d.ignoreDepthValues?void 0:ae.depthStencilTexture),e.setRenderTarget(v))}let X=_[he];X===void 0&&(X=new Mo,X.layers.enable(he),X.viewport=new qi,_[he]=X),X.matrix.fromArray(ve.transform.matrix),X.projectionMatrix.fromArray(ve.projectionMatrix),X.viewport.set(we.x,we.y,we.width,we.height),he===0&&E.matrix.copy(X.matrix),G===!0&&E.cameras.push(X)}}for(let ne=0;ne<y.length;ne++){const G=b[ne],he=y[ne];G!==null&&he!==void 0&&he.update(G,Z,u||a)}if(B&&B(q,Z),Z.detectedPlanes){r.dispatchEvent({type:"planesdetected",data:Z.detectedPlanes});let ne=null;for(const G of x)Z.detectedPlanes.has(G)||(ne===null&&(ne=[]),ne.push(G));if(ne!==null)for(const G of ne)x.delete(G),w.delete(G),r.dispatchEvent({type:"planeremoved",data:G});for(const G of Z.detectedPlanes)if(!x.has(G))x.add(G),w.set(G,Z.lastChangedTime),r.dispatchEvent({type:"planeadded",data:G});else{const he=w.get(G);G.lastChangedTime>he&&(w.set(G,G.lastChangedTime),r.dispatchEvent({type:"planechanged",data:G}))}}p=null}const te=new tee;te.setAnimationLoop(H),this.setAnimationLoop=function(q){B=q},this.dispose=function(){}}}function hMe(t,e){function n(m,g){g.color.getRGB(m.fogColor.value,ZQ(t)),g.isFog?(m.fogNear.value=g.near,m.fogFar.value=g.far):g.isFogExp2&&(m.fogDensity.value=g.density)}function r(m,g,v,y,b){g.isMeshBasicMaterial||g.isMeshLambertMaterial?i(m,g):g.isMeshToonMaterial?(i(m,g),c(m,g)):g.isMeshPhongMaterial?(i(m,g),u(m,g)):g.isMeshStandardMaterial?(i(m,g),f(m,g),g.isMeshPhysicalMaterial&&d(m,g,b)):g.isMeshMatcapMaterial?(i(m,g),h(m,g)):g.isMeshDepthMaterial?i(m,g):g.isMeshDistanceMaterial?(i(m,g),p(m,g)):g.isMeshNormalMaterial?i(m,g):g.isLineBasicMaterial?(s(m,g),g.isLineDashedMaterial&&a(m,g)):g.isPointsMaterial?o(m,g,v,y):g.isSpriteMaterial?l(m,g):g.isShadowMaterial?(m.color.value.copy(g.color),m.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function i(m,g){m.opacity.value=g.opacity,g.color&&m.diffuse.value.copy(g.color),g.emissive&&m.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.bumpMap&&(m.bumpMap.value=g.bumpMap,m.bumpScale.value=g.bumpScale,g.side===Qa&&(m.bumpScale.value*=-1)),g.displacementMap&&(m.displacementMap.value=g.displacementMap,m.displacementScale.value=g.displacementScale,m.displacementBias.value=g.displacementBias),g.emissiveMap&&(m.emissiveMap.value=g.emissiveMap),g.normalMap&&(m.normalMap.value=g.normalMap,m.normalScale.value.copy(g.normalScale),g.side===Qa&&m.normalScale.value.negate()),g.specularMap&&(m.specularMap.value=g.specularMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);const v=e.get(g).envMap;if(v&&(m.envMap.value=v,m.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,m.reflectivity.value=g.reflectivity,m.ior.value=g.ior,m.refractionRatio.value=g.refractionRatio),g.lightMap){m.lightMap.value=g.lightMap;const x=t.useLegacyLights===!0?Math.PI:1;m.lightMapIntensity.value=g.lightMapIntensity*x}g.aoMap&&(m.aoMap.value=g.aoMap,m.aoMapIntensity.value=g.aoMapIntensity);let y;g.map?y=g.map:g.specularMap?y=g.specularMap:g.displacementMap?y=g.displacementMap:g.normalMap?y=g.normalMap:g.bumpMap?y=g.bumpMap:g.roughnessMap?y=g.roughnessMap:g.metalnessMap?y=g.metalnessMap:g.alphaMap?y=g.alphaMap:g.emissiveMap?y=g.emissiveMap:g.clearcoatMap?y=g.clearcoatMap:g.clearcoatNormalMap?y=g.clearcoatNormalMap:g.clearcoatRoughnessMap?y=g.clearcoatRoughnessMap:g.iridescenceMap?y=g.iridescenceMap:g.iridescenceThicknessMap?y=g.iridescenceThicknessMap:g.specularIntensityMap?y=g.specularIntensityMap:g.specularColorMap?y=g.specularColorMap:g.transmissionMap?y=g.transmissionMap:g.thicknessMap?y=g.thicknessMap:g.sheenColorMap?y=g.sheenColorMap:g.sheenRoughnessMap&&(y=g.sheenRoughnessMap),y!==void 0&&(y.isWebGLRenderTarget&&(y=y.texture),y.matrixAutoUpdate===!0&&y.updateMatrix(),m.uvTransform.value.copy(y.matrix));let b;g.aoMap?b=g.aoMap:g.lightMap&&(b=g.lightMap),b!==void 0&&(b.isWebGLRenderTarget&&(b=b.texture),b.matrixAutoUpdate===!0&&b.updateMatrix(),m.uv2Transform.value.copy(b.matrix))}function s(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity}function a(m,g){m.dashSize.value=g.dashSize,m.totalSize.value=g.dashSize+g.gapSize,m.scale.value=g.scale}function o(m,g,v,y){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.size.value=g.size*v,m.scale.value=y*.5,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);let b;g.map?b=g.map:g.alphaMap&&(b=g.alphaMap),b!==void 0&&(b.matrixAutoUpdate===!0&&b.updateMatrix(),m.uvTransform.value.copy(b.matrix))}function l(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.rotation.value=g.rotation,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);let v;g.map?v=g.map:g.alphaMap&&(v=g.alphaMap),v!==void 0&&(v.matrixAutoUpdate===!0&&v.updateMatrix(),m.uvTransform.value.copy(v.matrix))}function u(m,g){m.specular.value.copy(g.specular),m.shininess.value=Math.max(g.shininess,1e-4)}function c(m,g){g.gradientMap&&(m.gradientMap.value=g.gradientMap)}function f(m,g){m.roughness.value=g.roughness,m.metalness.value=g.metalness,g.roughnessMap&&(m.roughnessMap.value=g.roughnessMap),g.metalnessMap&&(m.metalnessMap.value=g.metalnessMap),e.get(g).envMap&&(m.envMapIntensity.value=g.envMapIntensity)}function d(m,g,v){m.ior.value=g.ior,g.sheen>0&&(m.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),m.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(m.sheenColorMap.value=g.sheenColorMap),g.sheenRoughnessMap&&(m.sheenRoughnessMap.value=g.sheenRoughnessMap)),g.clearcoat>0&&(m.clearcoat.value=g.clearcoat,m.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(m.clearcoatMap.value=g.clearcoatMap),g.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap),g.clearcoatNormalMap&&(m.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),m.clearcoatNormalMap.value=g.clearcoatNormalMap,g.side===Qa&&m.clearcoatNormalScale.value.negate())),g.iridescence>0&&(m.iridescence.value=g.iridescence,m.iridescenceIOR.value=g.iridescenceIOR,m.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(m.iridescenceMap.value=g.iridescenceMap),g.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=g.iridescenceThicknessMap)),g.transmission>0&&(m.transmission.value=g.transmission,m.transmissionSamplerMap.value=v.texture,m.transmissionSamplerSize.value.set(v.width,v.height),g.transmissionMap&&(m.transmissionMap.value=g.transmissionMap),m.thickness.value=g.thickness,g.thicknessMap&&(m.thicknessMap.value=g.thicknessMap),m.attenuationDistance.value=g.attenuationDistance,m.attenuationColor.value.copy(g.attenuationColor)),m.specularIntensity.value=g.specularIntensity,m.specularColor.value.copy(g.specularColor),g.specularIntensityMap&&(m.specularIntensityMap.value=g.specularIntensityMap),g.specularColorMap&&(m.specularColorMap.value=g.specularColorMap)}function h(m,g){g.matcap&&(m.matcap.value=g.matcap)}function p(m,g){m.referencePosition.value.copy(g.referencePosition),m.nearDistance.value=g.nearDistance,m.farDistance.value=g.farDistance}return{refreshFogUniforms:n,refreshMaterialUniforms:r}}function pMe(t,e,n,r){let i={},s={},a=[];const o=n.isWebGL2?t.getParameter(35375):0;function l(y,b){const x=b.program;r.uniformBlockBinding(y,x)}function u(y,b){let x=i[y.id];x===void 0&&(p(y),x=c(y),i[y.id]=x,y.addEventListener("dispose",g));const w=b.program;r.updateUBOMapping(y,w);const S=e.render.frame;s[y.id]!==S&&(d(y),s[y.id]=S)}function c(y){const b=f();y.__bindingPointIndex=b;const x=t.createBuffer(),w=y.__size,S=y.usage;return t.bindBuffer(35345,x),t.bufferData(35345,w,S),t.bindBuffer(35345,null),t.bindBufferBase(35345,b,x),x}function f(){for(let y=0;y<o;y++)if(a.indexOf(y)===-1)return a.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(y){const b=i[y.id],x=y.uniforms,w=y.__cache;t.bindBuffer(35345,b);for(let S=0,C=x.length;S<C;S++){const _=x[S];if(h(_,S,w)===!0){const E=_.__offset,T=Array.isArray(_.value)?_.value:[_.value];let k=0;for(let M=0;M<T.length;M++){const A=T[M],N=m(A);typeof A=="number"?(_.__data[0]=A,t.bufferSubData(35345,E+k,_.__data)):A.isMatrix3?(_.__data[0]=A.elements[0],_.__data[1]=A.elements[1],_.__data[2]=A.elements[2],_.__data[3]=A.elements[0],_.__data[4]=A.elements[3],_.__data[5]=A.elements[4],_.__data[6]=A.elements[5],_.__data[7]=A.elements[0],_.__data[8]=A.elements[6],_.__data[9]=A.elements[7],_.__data[10]=A.elements[8],_.__data[11]=A.elements[0]):(A.toArray(_.__data,k),k+=N.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(35345,E,_.__data)}}t.bindBuffer(35345,null)}function h(y,b,x){const w=y.value;if(x[b]===void 0){if(typeof w=="number")x[b]=w;else{const S=Array.isArray(w)?w:[w],C=[];for(let _=0;_<S.length;_++)C.push(S[_].clone());x[b]=C}return!0}else if(typeof w=="number"){if(x[b]!==w)return x[b]=w,!0}else{const S=Array.isArray(x[b])?x[b]:[x[b]],C=Array.isArray(w)?w:[w];for(let _=0;_<S.length;_++){const E=S[_];if(E.equals(C[_])===!1)return E.copy(C[_]),!0}}return!1}function p(y){const b=y.uniforms;let x=0;const w=16;let S=0;for(let C=0,_=b.length;C<_;C++){const E=b[C],T={boundary:0,storage:0},k=Array.isArray(E.value)?E.value:[E.value];for(let M=0,A=k.length;M<A;M++){const N=k[M],$=m(N);T.boundary+=$.boundary,T.storage+=$.storage}if(E.__data=new Float32Array(T.storage/Float32Array.BYTES_PER_ELEMENT),E.__offset=x,C>0){S=x%w;const M=w-S;S!==0&&M-T.boundary<0&&(x+=w-S,E.__offset=x)}x+=T.storage}return S=x%w,S>0&&(x+=w-S),y.__size=x,y.__cache={},this}function m(y){const b={boundary:0,storage:0};return typeof y=="number"?(b.boundary=4,b.storage=4):y.isVector2?(b.boundary=8,b.storage=8):y.isVector3||y.isColor?(b.boundary=16,b.storage=12):y.isVector4?(b.boundary=16,b.storage=16):y.isMatrix3?(b.boundary=48,b.storage=48):y.isMatrix4?(b.boundary=64,b.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),b}function g(y){const b=y.target;b.removeEventListener("dispose",g);const x=a.indexOf(b.__bindingPointIndex);a.splice(x,1),t.deleteBuffer(i[b.id]),delete i[b.id],delete s[b.id]}function v(){for(const y in i)t.deleteBuffer(i[y]);a=[],i={},s={}}return{bind:l,update:u,dispose:v}}function mMe(){const t=VE("canvas");return t.style.display="block",t}function T5(t={}){this.isWebGLRenderer=!0;const e=t.canvas!==void 0?t.canvas:mMe(),n=t.context!==void 0?t.context:null,r=t.depth!==void 0?t.depth:!0,i=t.stencil!==void 0?t.stencil:!0,s=t.antialias!==void 0?t.antialias:!1,a=t.premultipliedAlpha!==void 0?t.premultipliedAlpha:!0,o=t.preserveDrawingBuffer!==void 0?t.preserveDrawingBuffer:!1,l=t.powerPreference!==void 0?t.powerPreference:"default",u=t.failIfMajorPerformanceCaveat!==void 0?t.failIfMajorPerformanceCaveat:!1;let c;n!==null?c=n.getContextAttributes().alpha:c=t.alpha!==void 0?t.alpha:!1;let f=null,d=null;const h=[],p=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=pp,this.useLegacyLights=!0,this.toneMapping=Lc,this.toneMappingExposure=1;const m=this;let g=!1,v=0,y=0,b=null,x=-1,w=null;const S=new qi,C=new qi;let _=null,E=e.width,T=e.height,k=1,M=null,A=null;const N=new qi(0,0,E,T),$=new qi(0,0,E,T);let D=!1;const P=new eee;let O=!1,B=!1,H=null;const te=new Mi,q=new me,Z={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ne(){return b===null?k:1}let G=n;function he(W,ge){for(let Se=0;Se<W.length;Se++){const de=W[Se],Te=e.getContext(de,ge);if(Te!==null)return Te}return null}try{const W={alpha:!0,depth:r,stencil:i,antialias:s,premultipliedAlpha:a,preserveDrawingBuffer:o,powerPreference:l,failIfMajorPerformanceCaveat:u};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${_5}`),e.addEventListener("webglcontextlost",dt,!1),e.addEventListener("webglcontextrestored",wt,!1),e.addEventListener("webglcontextcreationerror",vt,!1),G===null){const ge=["webgl2","webgl","experimental-webgl"];if(m.isWebGL1Renderer===!0&&ge.shift(),G=he(ge,W),G===null)throw he(ge)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}G.getShaderPrecisionFormat===void 0&&(G.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(W){throw console.error("THREE.WebGLRenderer: "+W.message),W}let ve,we,X,ae,pe,j,ze,$e,nt,Je,Q,Ie,Ne,ht,Et,U,F,be,Be,Le,Qe,pt,K,fe;function it(){ve=new Tke(G),we=new bke(G,ve,t),ve.init(we),pt=new lMe(G,ve,we),X=new aMe(G,ve,we),ae=new Mke,pe=new jAe,j=new oMe(G,ve,X,pe,we,pt,ae),ze=new wke(m),$e=new Eke(m),nt=new LCe(G,we),K=new vke(G,ve,nt,we),Je=new kke(G,nt,ae,K),Q=new Dke(G,Je,nt,ae),Be=new Ike(G,we,j),U=new xke(pe),Ie=new HAe(m,ze,$e,ve,we,K,U),Ne=new hMe(m,pe),ht=new XAe,Et=new eMe(ve,we),be=new gke(m,ze,$e,X,Q,c,a),F=new sMe(m,Q,we),fe=new pMe(G,ae,we,X),Le=new yke(G,ve,ae,we),Qe=new Ake(G,ve,ae,we),ae.programs=Ie.programs,m.capabilities=we,m.extensions=ve,m.properties=pe,m.renderLists=ht,m.shadowMap=F,m.state=X,m.info=ae}it();const Ze=new dMe(m,G);this.xr=Ze,this.getContext=function(){return G},this.getContextAttributes=function(){return G.getContextAttributes()},this.forceContextLoss=function(){const W=ve.get("WEBGL_lose_context");W&&W.loseContext()},this.forceContextRestore=function(){const W=ve.get("WEBGL_lose_context");W&&W.restoreContext()},this.getPixelRatio=function(){return k},this.setPixelRatio=function(W){W!==void 0&&(k=W,this.setSize(E,T,!1))},this.getSize=function(W){return W.set(E,T)},this.setSize=function(W,ge,Se=!0){if(Ze.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}E=W,T=ge,e.width=Math.floor(W*k),e.height=Math.floor(ge*k),Se===!0&&(e.style.width=W+"px",e.style.height=ge+"px"),this.setViewport(0,0,W,ge)},this.getDrawingBufferSize=function(W){return W.set(E*k,T*k).floor()},this.setDrawingBufferSize=function(W,ge,Se){E=W,T=ge,k=Se,e.width=Math.floor(W*Se),e.height=Math.floor(ge*Se),this.setViewport(0,0,W,ge)},this.getCurrentViewport=function(W){return W.copy(S)},this.getViewport=function(W){return W.copy(N)},this.setViewport=function(W,ge,Se,de){W.isVector4?N.set(W.x,W.y,W.z,W.w):N.set(W,ge,Se,de),X.viewport(S.copy(N).multiplyScalar(k).floor())},this.getScissor=function(W){return W.copy($)},this.setScissor=function(W,ge,Se,de){W.isVector4?$.set(W.x,W.y,W.z,W.w):$.set(W,ge,Se,de),X.scissor(C.copy($).multiplyScalar(k).floor())},this.getScissorTest=function(){return D},this.setScissorTest=function(W){X.setScissorTest(D=W)},this.setOpaqueSort=function(W){M=W},this.setTransparentSort=function(W){A=W},this.getClearColor=function(W){return W.copy(be.getClearColor())},this.setClearColor=function(){be.setClearColor.apply(be,arguments)},this.getClearAlpha=function(){return be.getClearAlpha()},this.setClearAlpha=function(){be.setClearAlpha.apply(be,arguments)},this.clear=function(W=!0,ge=!0,Se=!0){let de=0;W&&(de|=16384),ge&&(de|=256),Se&&(de|=1024),G.clear(de)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",dt,!1),e.removeEventListener("webglcontextrestored",wt,!1),e.removeEventListener("webglcontextcreationerror",vt,!1),ht.dispose(),Et.dispose(),pe.dispose(),ze.dispose(),$e.dispose(),Q.dispose(),K.dispose(),fe.dispose(),Ie.dispose(),Ze.dispose(),Ze.removeEventListener("sessionstart",Ue),Ze.removeEventListener("sessionend",lt),H&&(H.dispose(),H=null),st.stop()};function dt(W){W.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function wt(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const W=ae.autoReset,ge=F.enabled,Se=F.autoUpdate,de=F.needsUpdate,Te=F.type;it(),ae.autoReset=W,F.enabled=ge,F.autoUpdate=Se,F.needsUpdate=de,F.type=Te}function vt(W){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",W.statusMessage)}function en(W){const ge=W.target;ge.removeEventListener("dispose",en),an(ge)}function an(W){jt(W),pe.remove(W)}function jt(W){const ge=pe.get(W).programs;ge!==void 0&&(ge.forEach(function(Se){Ie.releaseProgram(Se)}),W.isShaderMaterial&&Ie.releaseShaderCache(W))}this.renderBufferDirect=function(W,ge,Se,de,Te,$t){ge===null&&(ge=Z);const Rt=Te.isMesh&&Te.matrixWorld.determinant()<0,Kt=kI(W,ge,Se,de,Te);X.setMaterial(de,Rt);let tn=Se.index,yn=1;de.wireframe===!0&&(tn=Je.getWireframeAttribute(Se),yn=2);const L=Se.drawRange,Y=Se.attributes.position;let ue=L.start*yn,Pe=(L.start+L.count)*yn;$t!==null&&(ue=Math.max(ue,$t.start*yn),Pe=Math.min(Pe,($t.start+$t.count)*yn)),tn!==null?(ue=Math.max(ue,0),Pe=Math.min(Pe,tn.count)):Y!=null&&(ue=Math.max(ue,0),Pe=Math.min(Pe,Y.count));const Ve=Pe-ue;if(Ve<0||Ve===1/0)return;K.setup(Te,de,Kt,Se,tn);let ot,et=Le;if(tn!==null&&(ot=nt.get(tn),et=Qe,et.setIndex(ot)),Te.isMesh)de.wireframe===!0?(X.setLineWidth(de.wireframeLinewidth*ne()),et.setMode(1)):et.setMode(4);else if(Te.isLine){let ut=de.linewidth;ut===void 0&&(ut=1),X.setLineWidth(ut*ne()),Te.isLineSegments?et.setMode(1):Te.isLineLoop?et.setMode(2):et.setMode(3)}else Te.isPoints?et.setMode(0):Te.isSprite&&et.setMode(4);if(Te.isInstancedMesh)et.renderInstances(ue,Ve,Te.count);else if(Se.isInstancedBufferGeometry){const ut=Se._maxInstanceCount!==void 0?Se._maxInstanceCount:1/0,on=Math.min(Se.instanceCount,ut);et.renderInstances(ue,Ve,on)}else et.render(ue,Ve)},this.compile=function(W,ge){function Se(de,Te,$t){de.transparent===!0&&de.side===Wf&&de.forceSinglePass===!1?(de.side=Qa,de.needsUpdate=!0,Js(de,Te,$t),de.side=vd,de.needsUpdate=!0,Js(de,Te,$t),de.side=Wf):Js(de,Te,$t)}d=Et.get(W),d.init(),p.push(d),W.traverseVisible(function(de){de.isLight&&de.layers.test(ge.layers)&&(d.pushLight(de),de.castShadow&&d.pushShadow(de))}),d.setupLights(m.useLegacyLights),W.traverse(function(de){const Te=de.material;if(Te)if(Array.isArray(Te))for(let $t=0;$t<Te.length;$t++){const Rt=Te[$t];Se(Rt,W,de)}else Se(Te,W,de)}),p.pop(),d=null};let ie=null;function ye(W){ie&&ie(W)}function Ue(){st.stop()}function lt(){st.start()}const st=new tee;st.setAnimationLoop(ye),typeof self<"u"&&st.setContext(self),this.setAnimationLoop=function(W){ie=W,Ze.setAnimationLoop(W),W===null?st.stop():st.start()},Ze.addEventListener("sessionstart",Ue),Ze.addEventListener("sessionend",lt),this.render=function(W,ge){if(ge!==void 0&&ge.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(g===!0)return;W.matrixWorldAutoUpdate===!0&&W.updateMatrixWorld(),ge.parent===null&&ge.matrixWorldAutoUpdate===!0&&ge.updateMatrixWorld(),Ze.enabled===!0&&Ze.isPresenting===!0&&(Ze.cameraAutoUpdate===!0&&Ze.updateCamera(ge),ge=Ze.getCamera()),W.isScene===!0&&W.onBeforeRender(m,W,ge,b),d=Et.get(W,p.length),d.init(),p.push(d),te.multiplyMatrices(ge.projectionMatrix,ge.matrixWorldInverse),P.setFromProjectionMatrix(te),B=this.localClippingEnabled,O=U.init(this.clippingPlanes,B),f=ht.get(W,h.length),f.init(),h.push(f),qn(W,ge,0,m.sortObjects),f.finish(),m.sortObjects===!0&&f.sort(M,A),O===!0&&U.beginShadows();const Se=d.state.shadowsArray;if(F.render(Se,W,ge),O===!0&&U.endShadows(),this.info.autoReset===!0&&this.info.reset(),be.render(f,W),d.setupLights(m.useLegacyLights),ge.isArrayCamera){const de=ge.cameras;for(let Te=0,$t=de.length;Te<$t;Te++){const Rt=de[Te];Ur(f,W,Rt,Rt.viewport)}}else Ur(f,W,ge);b!==null&&(j.updateMultisampleRenderTarget(b),j.updateRenderTargetMipmap(b)),W.isScene===!0&&W.onAfterRender(m,W,ge),K.resetDefaultState(),x=-1,w=null,p.pop(),p.length>0?d=p[p.length-1]:d=null,h.pop(),h.length>0?f=h[h.length-1]:f=null};function qn(W,ge,Se,de){if(W.visible===!1)return;if(W.layers.test(ge.layers)){if(W.isGroup)Se=W.renderOrder;else if(W.isLOD)W.autoUpdate===!0&&W.update(ge);else if(W.isLight)d.pushLight(W),W.castShadow&&d.pushShadow(W);else if(W.isSprite){if(!W.frustumCulled||P.intersectsSprite(W)){de&&q.setFromMatrixPosition(W.matrixWorld).applyMatrix4(te);const Rt=Q.update(W),Kt=W.material;Kt.visible&&f.push(W,Rt,Kt,Se,q.z,null)}}else if((W.isMesh||W.isLine||W.isPoints)&&(W.isSkinnedMesh&&W.skeleton.frame!==ae.render.frame&&(W.skeleton.update(),W.skeleton.frame=ae.render.frame),!W.frustumCulled||P.intersectsObject(W))){de&&q.setFromMatrixPosition(W.matrixWorld).applyMatrix4(te);const Rt=Q.update(W),Kt=W.material;if(Array.isArray(Kt)){const tn=Rt.groups;for(let yn=0,L=tn.length;yn<L;yn++){const Y=tn[yn],ue=Kt[Y.materialIndex];ue&&ue.visible&&f.push(W,Rt,ue,Se,q.z,Y)}}else Kt.visible&&f.push(W,Rt,Kt,Se,q.z,null)}}const $t=W.children;for(let Rt=0,Kt=$t.length;Rt<Kt;Rt++)qn($t[Rt],ge,Se,de)}function Ur(W,ge,Se,de){const Te=W.opaque,$t=W.transmissive,Rt=W.transparent;d.setupLightsView(Se),O===!0&&U.setGlobalState(m.clippingPlanes,Se),$t.length>0&&Ui(Te,ge,Se),de&&X.viewport(S.copy(de)),Te.length>0&&mo(Te,ge,Se),$t.length>0&&mo($t,ge,Se),Rt.length>0&&mo(Rt,ge,Se),X.buffers.depth.setTest(!0),X.buffers.depth.setMask(!0),X.buffers.color.setMask(!0),X.setPolygonOffset(!1)}function Ui(W,ge,Se){const de=we.isWebGL2;H===null&&(H=new gp(1024,1024,{generateMipmaps:!0,type:ve.has("EXT_color_buffer_half_float")?gx:hp,minFilter:mx,samples:de&&s===!0?4:0}));const Te=m.getRenderTarget();m.setRenderTarget(H),m.clear();const $t=m.toneMapping;m.toneMapping=Lc,mo(W,ge,Se),m.toneMapping=$t,j.updateMultisampleRenderTarget(H),j.updateRenderTargetMipmap(H),m.setRenderTarget(Te)}function mo(W,ge,Se){const de=ge.isScene===!0?ge.overrideMaterial:null;for(let Te=0,$t=W.length;Te<$t;Te++){const Rt=W[Te],Kt=Rt.object,tn=Rt.geometry,yn=de===null?Rt.material:de,L=Rt.group;Kt.layers.test(Se.layers)&&vr(Kt,ge,Se,tn,yn,L)}}function vr(W,ge,Se,de,Te,$t){W.onBeforeRender(m,ge,Se,de,Te,$t),W.modelViewMatrix.multiplyMatrices(Se.matrixWorldInverse,W.matrixWorld),W.normalMatrix.getNormalMatrix(W.modelViewMatrix),Te.onBeforeRender(m,ge,Se,de,W,$t),Te.transparent===!0&&Te.side===Wf&&Te.forceSinglePass===!1?(Te.side=Qa,Te.needsUpdate=!0,m.renderBufferDirect(Se,ge,de,Te,W,$t),Te.side=vd,Te.needsUpdate=!0,m.renderBufferDirect(Se,ge,de,Te,W,$t),Te.side=Wf):m.renderBufferDirect(Se,ge,de,Te,W,$t),W.onAfterRender(m,ge,Se,de,Te,$t)}function Js(W,ge,Se){ge.isScene!==!0&&(ge=Z);const de=pe.get(W),Te=d.state.lights,$t=d.state.shadowsArray,Rt=Te.state.version,Kt=Ie.getParameters(W,Te.state,$t,ge,Se),tn=Ie.getProgramCacheKey(Kt);let yn=de.programs;de.environment=W.isMeshStandardMaterial?ge.environment:null,de.fog=ge.fog,de.envMap=(W.isMeshStandardMaterial?$e:ze).get(W.envMap||de.environment),yn===void 0&&(W.addEventListener("dispose",en),yn=new Map,de.programs=yn);let L=yn.get(tn);if(L!==void 0){if(de.currentProgram===L&&de.lightsStateVersion===Rt)return go(W,Kt),L}else Kt.uniforms=Ie.getUniforms(W),W.onBuild(Se,Kt,m),W.onBeforeCompile(Kt,m),L=Ie.acquireProgram(Kt,tn),yn.set(tn,L),de.uniforms=Kt.uniforms;const Y=de.uniforms;(!W.isShaderMaterial&&!W.isRawShaderMaterial||W.clipping===!0)&&(Y.clippingPlanes=U.uniform),go(W,Kt),de.needsLights=Vm(W),de.lightsStateVersion=Rt,de.needsLights&&(Y.ambientLightColor.value=Te.state.ambient,Y.lightProbe.value=Te.state.probe,Y.directionalLights.value=Te.state.directional,Y.directionalLightShadows.value=Te.state.directionalShadow,Y.spotLights.value=Te.state.spot,Y.spotLightShadows.value=Te.state.spotShadow,Y.rectAreaLights.value=Te.state.rectArea,Y.ltc_1.value=Te.state.rectAreaLTC1,Y.ltc_2.value=Te.state.rectAreaLTC2,Y.pointLights.value=Te.state.point,Y.pointLightShadows.value=Te.state.pointShadow,Y.hemisphereLights.value=Te.state.hemi,Y.directionalShadowMap.value=Te.state.directionalShadowMap,Y.directionalShadowMatrix.value=Te.state.directionalShadowMatrix,Y.spotShadowMap.value=Te.state.spotShadowMap,Y.spotLightMatrix.value=Te.state.spotLightMatrix,Y.spotLightMap.value=Te.state.spotLightMap,Y.pointShadowMap.value=Te.state.pointShadowMap,Y.pointShadowMatrix.value=Te.state.pointShadowMatrix);const ue=L.getUniforms(),Pe=uE.seqWithValue(ue.seq,Y);return de.currentProgram=L,de.uniformsList=Pe,L}function go(W,ge){const Se=pe.get(W);Se.outputEncoding=ge.outputEncoding,Se.instancing=ge.instancing,Se.skinning=ge.skinning,Se.morphTargets=ge.morphTargets,Se.morphNormals=ge.morphNormals,Se.morphColors=ge.morphColors,Se.morphTargetsCount=ge.morphTargetsCount,Se.numClippingPlanes=ge.numClippingPlanes,Se.numIntersection=ge.numClipIntersection,Se.vertexAlphas=ge.vertexAlphas,Se.vertexTangents=ge.vertexTangents,Se.toneMapping=ge.toneMapping}function kI(W,ge,Se,de,Te){ge.isScene!==!0&&(ge=Z),j.resetTextureUnits();const $t=ge.fog,Rt=de.isMeshStandardMaterial?ge.environment:null,Kt=b===null?m.outputEncoding:b.isXRRenderTarget===!0?b.texture.encoding:pp,tn=(de.isMeshStandardMaterial?$e:ze).get(de.envMap||Rt),yn=de.vertexColors===!0&&!!Se.attributes.color&&Se.attributes.color.itemSize===4,L=!!de.normalMap&&!!Se.attributes.tangent,Y=!!Se.morphAttributes.position,ue=!!Se.morphAttributes.normal,Pe=!!Se.morphAttributes.color,Ve=de.toneMapped?m.toneMapping:Lc,ot=Se.morphAttributes.position||Se.morphAttributes.normal||Se.morphAttributes.color,et=ot!==void 0?ot.length:0,ut=pe.get(de),on=d.state.lights;if(O===!0&&(B===!0||W!==w)){const Oa=W===w&&de.id===x;U.setState(de,W,Oa)}let Ln=!1;de.version===ut.__version?(ut.needsLights&&ut.lightsStateVersion!==on.state.version||ut.outputEncoding!==Kt||Te.isInstancedMesh&&ut.instancing===!1||!Te.isInstancedMesh&&ut.instancing===!0||Te.isSkinnedMesh&&ut.skinning===!1||!Te.isSkinnedMesh&&ut.skinning===!0||ut.envMap!==tn||de.fog===!0&&ut.fog!==$t||ut.numClippingPlanes!==void 0&&(ut.numClippingPlanes!==U.numPlanes||ut.numIntersection!==U.numIntersection)||ut.vertexAlphas!==yn||ut.vertexTangents!==L||ut.morphTargets!==Y||ut.morphNormals!==ue||ut.morphColors!==Pe||ut.toneMapping!==Ve||we.isWebGL2===!0&&ut.morphTargetsCount!==et)&&(Ln=!0):(Ln=!0,ut.__version=de.version);let wi=ut.currentProgram;Ln===!0&&(wi=Js(de,ge,Te));let Ss=!1,ii=!1,vo=!1;const Cs=wi.getUniforms(),lh=ut.uniforms;if(X.useProgram(wi.program)&&(Ss=!0,ii=!0,vo=!0),de.id!==x&&(x=de.id,ii=!0),Ss||w!==W){if(Cs.setValue(G,"projectionMatrix",W.projectionMatrix),we.logarithmicDepthBuffer&&Cs.setValue(G,"logDepthBufFC",2/(Math.log(W.far+1)/Math.LN2)),w!==W&&(w=W,ii=!0,vo=!0),de.isShaderMaterial||de.isMeshPhongMaterial||de.isMeshToonMaterial||de.isMeshStandardMaterial||de.envMap){const Oa=Cs.map.cameraPosition;Oa!==void 0&&Oa.setValue(G,q.setFromMatrixPosition(W.matrixWorld))}(de.isMeshPhongMaterial||de.isMeshToonMaterial||de.isMeshLambertMaterial||de.isMeshBasicMaterial||de.isMeshStandardMaterial||de.isShaderMaterial)&&Cs.setValue(G,"isOrthographic",W.isOrthographicCamera===!0),(de.isMeshPhongMaterial||de.isMeshToonMaterial||de.isMeshLambertMaterial||de.isMeshBasicMaterial||de.isMeshStandardMaterial||de.isShaderMaterial||de.isShadowMaterial||Te.isSkinnedMesh)&&Cs.setValue(G,"viewMatrix",W.matrixWorldInverse)}if(Te.isSkinnedMesh){Cs.setOptional(G,Te,"bindMatrix"),Cs.setOptional(G,Te,"bindMatrixInverse");const Oa=Te.skeleton;Oa&&(we.floatVertexTextures?(Oa.boneTexture===null&&Oa.computeBoneTexture(),Cs.setValue(G,"boneTexture",Oa.boneTexture,j),Cs.setValue(G,"boneTextureSize",Oa.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const MI=Se.morphAttributes;if((MI.position!==void 0||MI.normal!==void 0||MI.color!==void 0&&we.isWebGL2===!0)&&Be.update(Te,Se,wi),(ii||ut.receiveShadow!==Te.receiveShadow)&&(ut.receiveShadow=Te.receiveShadow,Cs.setValue(G,"receiveShadow",Te.receiveShadow)),de.isMeshGouraudMaterial&&de.envMap!==null&&(lh.envMap.value=tn,lh.flipEnvMap.value=tn.isCubeTexture&&tn.isRenderTargetTexture===!1?-1:1),ii&&(Cs.setValue(G,"toneMappingExposure",m.toneMappingExposure),ut.needsLights&&AI(lh,vo),$t&&de.fog===!0&&Ne.refreshFogUniforms(lh,$t),Ne.refreshMaterialUniforms(lh,de,k,T,H),uE.upload(G,ut.uniformsList,lh,j)),de.isShaderMaterial&&de.uniformsNeedUpdate===!0&&(uE.upload(G,ut.uniformsList,lh,j),de.uniformsNeedUpdate=!1),de.isSpriteMaterial&&Cs.setValue(G,"center",Te.center),Cs.setValue(G,"modelViewMatrix",Te.modelViewMatrix),Cs.setValue(G,"normalMatrix",Te.normalMatrix),Cs.setValue(G,"modelMatrix",Te.matrixWorld),de.isShaderMaterial||de.isRawShaderMaterial){const Oa=de.uniformsGroups;for(let NI=0,D1e=Oa.length;NI<D1e;NI++)if(we.isWebGL2){const NW=Oa[NI];fe.update(NW,wi),fe.bind(NW,wi)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return wi}function AI(W,ge){W.ambientLightColor.needsUpdate=ge,W.lightProbe.needsUpdate=ge,W.directionalLights.needsUpdate=ge,W.directionalLightShadows.needsUpdate=ge,W.pointLights.needsUpdate=ge,W.pointLightShadows.needsUpdate=ge,W.spotLights.needsUpdate=ge,W.spotLightShadows.needsUpdate=ge,W.rectAreaLights.needsUpdate=ge,W.hemisphereLights.needsUpdate=ge}function Vm(W){return W.isMeshLambertMaterial||W.isMeshToonMaterial||W.isMeshPhongMaterial||W.isMeshStandardMaterial||W.isShadowMaterial||W.isShaderMaterial&&W.lights===!0}this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(W,ge,Se){pe.get(W.texture).__webglTexture=ge,pe.get(W.depthTexture).__webglTexture=Se;const de=pe.get(W);de.__hasExternalTextures=!0,de.__hasExternalTextures&&(de.__autoAllocateDepthBuffer=Se===void 0,de.__autoAllocateDepthBuffer||ve.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),de.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(W,ge){const Se=pe.get(W);Se.__webglFramebuffer=ge,Se.__useDefaultFramebuffer=ge===void 0},this.setRenderTarget=function(W,ge=0,Se=0){b=W,v=ge,y=Se;let de=!0,Te=null,$t=!1,Rt=!1;if(W){const tn=pe.get(W);tn.__useDefaultFramebuffer!==void 0?(X.bindFramebuffer(36160,null),de=!1):tn.__webglFramebuffer===void 0?j.setupRenderTarget(W):tn.__hasExternalTextures&&j.rebindTextures(W,pe.get(W.texture).__webglTexture,pe.get(W.depthTexture).__webglTexture);const yn=W.texture;(yn.isData3DTexture||yn.isDataArrayTexture||yn.isCompressedArrayTexture)&&(Rt=!0);const L=pe.get(W).__webglFramebuffer;W.isWebGLCubeRenderTarget?(Te=L[ge],$t=!0):we.isWebGL2&&W.samples>0&&j.useMultisampledRTT(W)===!1?Te=pe.get(W).__webglMultisampledFramebuffer:Te=L,S.copy(W.viewport),C.copy(W.scissor),_=W.scissorTest}else S.copy(N).multiplyScalar(k).floor(),C.copy($).multiplyScalar(k).floor(),_=D;if(X.bindFramebuffer(36160,Te)&&we.drawBuffers&&de&&X.drawBuffers(W,Te),X.viewport(S),X.scissor(C),X.setScissorTest(_),$t){const tn=pe.get(W.texture);G.framebufferTexture2D(36160,36064,34069+ge,tn.__webglTexture,Se)}else if(Rt){const tn=pe.get(W.texture),yn=ge||0;G.framebufferTextureLayer(36160,36064,tn.__webglTexture,Se||0,yn)}x=-1},this.readRenderTargetPixels=function(W,ge,Se,de,Te,$t,Rt){if(!(W&&W.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Kt=pe.get(W).__webglFramebuffer;if(W.isWebGLCubeRenderTarget&&Rt!==void 0&&(Kt=Kt[Rt]),Kt){X.bindFramebuffer(36160,Kt);try{const tn=W.texture,yn=tn.format,L=tn.type;if(yn!==_l&&pt.convert(yn)!==G.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Y=L===gx&&(ve.has("EXT_color_buffer_half_float")||we.isWebGL2&&ve.has("EXT_color_buffer_float"));if(L!==hp&&pt.convert(L)!==G.getParameter(35738)&&!(L===Hh&&(we.isWebGL2||ve.has("OES_texture_float")||ve.has("WEBGL_color_buffer_float")))&&!Y){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ge>=0&&ge<=W.width-de&&Se>=0&&Se<=W.height-Te&&G.readPixels(ge,Se,de,Te,pt.convert(yn),pt.convert(L),$t)}finally{const tn=b!==null?pe.get(b).__webglFramebuffer:null;X.bindFramebuffer(36160,tn)}}},this.copyFramebufferToTexture=function(W,ge,Se=0){const de=Math.pow(2,-Se),Te=Math.floor(ge.image.width*de),$t=Math.floor(ge.image.height*de);j.setTexture2D(ge,0),G.copyTexSubImage2D(3553,Se,0,0,W.x,W.y,Te,$t),X.unbindTexture()},this.copyTextureToTexture=function(W,ge,Se,de=0){const Te=ge.image.width,$t=ge.image.height,Rt=pt.convert(Se.format),Kt=pt.convert(Se.type);j.setTexture2D(Se,0),G.pixelStorei(37440,Se.flipY),G.pixelStorei(37441,Se.premultiplyAlpha),G.pixelStorei(3317,Se.unpackAlignment),ge.isDataTexture?G.texSubImage2D(3553,de,W.x,W.y,Te,$t,Rt,Kt,ge.image.data):ge.isCompressedTexture?G.compressedTexSubImage2D(3553,de,W.x,W.y,ge.mipmaps[0].width,ge.mipmaps[0].height,Rt,ge.mipmaps[0].data):G.texSubImage2D(3553,de,W.x,W.y,Rt,Kt,ge.image),de===0&&Se.generateMipmaps&&G.generateMipmap(3553),X.unbindTexture()},this.copyTextureToTexture3D=function(W,ge,Se,de,Te=0){if(m.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const $t=W.max.x-W.min.x+1,Rt=W.max.y-W.min.y+1,Kt=W.max.z-W.min.z+1,tn=pt.convert(de.format),yn=pt.convert(de.type);let L;if(de.isData3DTexture)j.setTexture3D(de,0),L=32879;else if(de.isDataArrayTexture)j.setTexture2DArray(de,0),L=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}G.pixelStorei(37440,de.flipY),G.pixelStorei(37441,de.premultiplyAlpha),G.pixelStorei(3317,de.unpackAlignment);const Y=G.getParameter(3314),ue=G.getParameter(32878),Pe=G.getParameter(3316),Ve=G.getParameter(3315),ot=G.getParameter(32877),et=Se.isCompressedTexture?Se.mipmaps[0]:Se.image;G.pixelStorei(3314,et.width),G.pixelStorei(32878,et.height),G.pixelStorei(3316,W.min.x),G.pixelStorei(3315,W.min.y),G.pixelStorei(32877,W.min.z),Se.isDataTexture||Se.isData3DTexture?G.texSubImage3D(L,Te,ge.x,ge.y,ge.z,$t,Rt,Kt,tn,yn,et.data):Se.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),G.compressedTexSubImage3D(L,Te,ge.x,ge.y,ge.z,$t,Rt,Kt,tn,et.data)):G.texSubImage3D(L,Te,ge.x,ge.y,ge.z,$t,Rt,Kt,tn,yn,et),G.pixelStorei(3314,Y),G.pixelStorei(32878,ue),G.pixelStorei(3316,Pe),G.pixelStorei(3315,Ve),G.pixelStorei(32877,ot),Te===0&&de.generateMipmaps&&G.generateMipmap(L),X.unbindTexture()},this.initTexture=function(W){W.isCubeTexture?j.setTextureCube(W,0):W.isData3DTexture?j.setTexture3D(W,0):W.isDataArrayTexture||W.isCompressedArrayTexture?j.setTexture2DArray(W,0):j.setTexture2D(W,0),X.unbindTexture()},this.resetState=function(){v=0,y=0,b=null,X.reset(),K.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Object.defineProperties(T5.prototype,{physicallyCorrectLights:{get:function(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights},set:function(t){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!t}}});class gMe extends T5{}gMe.prototype.isWebGL1Renderer=!0;class vMe extends Ps{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class k5 extends $w{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Vn(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const XG=new me,YG=new me,KG=new Mi,cD=new jQ,JS=new DA;class yMe extends Ps{constructor(e=new qu,n=new k5){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let i=1,s=n.count;i<s;i++)XG.fromBufferAttribute(n,i-1),YG.fromBufferAttribute(n,i),r[i]=r[i-1],r[i]+=XG.distanceTo(YG);e.setAttribute("lineDistance",new Ml(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,a=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),JS.copy(r.boundingSphere),JS.applyMatrix4(i),JS.radius+=s,e.ray.intersectsSphere(JS)===!1)return;KG.copy(i).invert(),cD.copy(e.ray).applyMatrix4(KG);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,u=new me,c=new me,f=new me,d=new me,h=this.isLineSegments?2:1,p=r.index,g=r.attributes.position;if(p!==null){const v=Math.max(0,a.start),y=Math.min(p.count,a.start+a.count);for(let b=v,x=y-1;b<x;b+=h){const w=p.getX(b),S=p.getX(b+1);if(u.fromBufferAttribute(g,w),c.fromBufferAttribute(g,S),cD.distanceSqToSegment(u,c,d,f)>l)continue;d.applyMatrix4(this.matrixWorld);const _=e.ray.origin.distanceTo(d);_<e.near||_>e.far||n.push({distance:_,point:f.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else{const v=Math.max(0,a.start),y=Math.min(g.count,a.start+a.count);for(let b=v,x=y-1;b<x;b+=h){if(u.fromBufferAttribute(g,b),c.fromBufferAttribute(g,b+1),cD.distanceSqToSegment(u,c,d,f)>l)continue;d.applyMatrix4(this.matrixWorld);const S=e.ray.origin.distanceTo(d);S<e.near||S>e.far||n.push({distance:S,point:f.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}const ZG=new me,JG=new me;class bMe extends yMe{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[];for(let i=0,s=n.count;i<s;i+=2)ZG.fromBufferAttribute(n,i),JG.fromBufferAttribute(n,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+ZG.distanceTo(JG);e.setAttribute("lineDistance",new Ml(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class xMe extends Ps{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new Vn(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class wMe extends xMe{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class QG{constructor(e=1,n=0,r=0){return this.radius=e,this.phi=n,this.theta=r,this}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(ia(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class _Me extends bMe{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new qu;i.setAttribute("position",new Ml(n,3)),i.setAttribute("color",new Ml(r,3));const s=new k5({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,n,r){const i=new Vn,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(n),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:_5}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=_5);const eH={type:"change"},fD={type:"start"},tH={type:"end"};class SMe extends em{constructor(e,n){super(),this.object=e,this.domElement=n,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new me,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:qm.ROTATE,MIDDLE:qm.DOLLY,RIGHT:qm.PAN},this.touches={ONE:Xm.ROTATE,TWO:Xm.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return o.phi},this.getAzimuthalAngle=function(){return o.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(K){K.addEventListener("keydown",Et),this._domElementKeyEvents=K},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",Et),this._domElementKeyEvents=null},this.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(eH),r.update(),s=i.NONE},this.update=function(){const K=new me,fe=new mp().setFromUnitVectors(e.up,new me(0,1,0)),it=fe.clone().invert(),Ze=new me,dt=new mp,wt=2*Math.PI;return function(){const en=r.object.position;K.copy(en).sub(r.target),K.applyQuaternion(fe),o.setFromVector3(K),r.autoRotate&&s===i.NONE&&E(C()),r.enableDamping?(o.theta+=l.theta*r.dampingFactor,o.phi+=l.phi*r.dampingFactor):(o.theta+=l.theta,o.phi+=l.phi);let an=r.minAzimuthAngle,jt=r.maxAzimuthAngle;return isFinite(an)&&isFinite(jt)&&(an<-Math.PI?an+=wt:an>Math.PI&&(an-=wt),jt<-Math.PI?jt+=wt:jt>Math.PI&&(jt-=wt),an<=jt?o.theta=Math.max(an,Math.min(jt,o.theta)):o.theta=o.theta>(an+jt)/2?Math.max(an,o.theta):Math.min(jt,o.theta)),o.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,o.phi)),o.makeSafe(),o.radius*=u,o.radius=Math.max(r.minDistance,Math.min(r.maxDistance,o.radius)),r.enableDamping===!0?r.target.addScaledVector(c,r.dampingFactor):r.target.add(c),K.setFromSpherical(o),K.applyQuaternion(it),en.copy(r.target).add(K),r.object.lookAt(r.target),r.enableDamping===!0?(l.theta*=1-r.dampingFactor,l.phi*=1-r.dampingFactor,c.multiplyScalar(1-r.dampingFactor)):(l.set(0,0,0),c.set(0,0,0)),u=1,f||Ze.distanceToSquared(r.object.position)>a||8*(1-dt.dot(r.object.quaternion))>a?(r.dispatchEvent(eH),Ze.copy(r.object.position),dt.copy(r.object.quaternion),f=!1,!0):!1}}(),this.dispose=function(){r.domElement.removeEventListener("contextmenu",be),r.domElement.removeEventListener("pointerdown",$e),r.domElement.removeEventListener("pointercancel",Q),r.domElement.removeEventListener("wheel",ht),r.domElement.removeEventListener("pointermove",nt),r.domElement.removeEventListener("pointerup",Je),r._domElementKeyEvents!==null&&(r._domElementKeyEvents.removeEventListener("keydown",Et),r._domElementKeyEvents=null)};const r=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=i.NONE;const a=1e-6,o=new QG,l=new QG;let u=1;const c=new me;let f=!1;const d=new _n,h=new _n,p=new _n,m=new _n,g=new _n,v=new _n,y=new _n,b=new _n,x=new _n,w=[],S={};function C(){return 2*Math.PI/60/60*r.autoRotateSpeed}function _(){return Math.pow(.95,r.zoomSpeed)}function E(K){l.theta-=K}function T(K){l.phi-=K}const k=function(){const K=new me;return function(it,Ze){K.setFromMatrixColumn(Ze,0),K.multiplyScalar(-it),c.add(K)}}(),M=function(){const K=new me;return function(it,Ze){r.screenSpacePanning===!0?K.setFromMatrixColumn(Ze,1):(K.setFromMatrixColumn(Ze,0),K.crossVectors(r.object.up,K)),K.multiplyScalar(it),c.add(K)}}(),A=function(){const K=new me;return function(it,Ze){const dt=r.domElement;if(r.object.isPerspectiveCamera){const wt=r.object.position;K.copy(wt).sub(r.target);let vt=K.length();vt*=Math.tan(r.object.fov/2*Math.PI/180),k(2*it*vt/dt.clientHeight,r.object.matrix),M(2*Ze*vt/dt.clientHeight,r.object.matrix)}else r.object.isOrthographicCamera?(k(it*(r.object.right-r.object.left)/r.object.zoom/dt.clientWidth,r.object.matrix),M(Ze*(r.object.top-r.object.bottom)/r.object.zoom/dt.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();function N(K){r.object.isPerspectiveCamera?u/=K:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom*K)),r.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function $(K){r.object.isPerspectiveCamera?u*=K:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/K)),r.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function D(K){d.set(K.clientX,K.clientY)}function P(K){y.set(K.clientX,K.clientY)}function O(K){m.set(K.clientX,K.clientY)}function B(K){h.set(K.clientX,K.clientY),p.subVectors(h,d).multiplyScalar(r.rotateSpeed);const fe=r.domElement;E(2*Math.PI*p.x/fe.clientHeight),T(2*Math.PI*p.y/fe.clientHeight),d.copy(h),r.update()}function H(K){b.set(K.clientX,K.clientY),x.subVectors(b,y),x.y>0?N(_()):x.y<0&&$(_()),y.copy(b),r.update()}function te(K){g.set(K.clientX,K.clientY),v.subVectors(g,m).multiplyScalar(r.panSpeed),A(v.x,v.y),m.copy(g),r.update()}function q(K){K.deltaY<0?$(_()):K.deltaY>0&&N(_()),r.update()}function Z(K){let fe=!1;switch(K.code){case r.keys.UP:K.ctrlKey||K.metaKey||K.shiftKey?T(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):A(0,r.keyPanSpeed),fe=!0;break;case r.keys.BOTTOM:K.ctrlKey||K.metaKey||K.shiftKey?T(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):A(0,-r.keyPanSpeed),fe=!0;break;case r.keys.LEFT:K.ctrlKey||K.metaKey||K.shiftKey?E(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):A(r.keyPanSpeed,0),fe=!0;break;case r.keys.RIGHT:K.ctrlKey||K.metaKey||K.shiftKey?E(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):A(-r.keyPanSpeed,0),fe=!0;break}fe&&(K.preventDefault(),r.update())}function ne(){if(w.length===1)d.set(w[0].pageX,w[0].pageY);else{const K=.5*(w[0].pageX+w[1].pageX),fe=.5*(w[0].pageY+w[1].pageY);d.set(K,fe)}}function G(){if(w.length===1)m.set(w[0].pageX,w[0].pageY);else{const K=.5*(w[0].pageX+w[1].pageX),fe=.5*(w[0].pageY+w[1].pageY);m.set(K,fe)}}function he(){const K=w[0].pageX-w[1].pageX,fe=w[0].pageY-w[1].pageY,it=Math.sqrt(K*K+fe*fe);y.set(0,it)}function ve(){r.enableZoom&&he(),r.enablePan&&G()}function we(){r.enableZoom&&he(),r.enableRotate&&ne()}function X(K){if(w.length==1)h.set(K.pageX,K.pageY);else{const it=pt(K),Ze=.5*(K.pageX+it.x),dt=.5*(K.pageY+it.y);h.set(Ze,dt)}p.subVectors(h,d).multiplyScalar(r.rotateSpeed);const fe=r.domElement;E(2*Math.PI*p.x/fe.clientHeight),T(2*Math.PI*p.y/fe.clientHeight),d.copy(h)}function ae(K){if(w.length===1)g.set(K.pageX,K.pageY);else{const fe=pt(K),it=.5*(K.pageX+fe.x),Ze=.5*(K.pageY+fe.y);g.set(it,Ze)}v.subVectors(g,m).multiplyScalar(r.panSpeed),A(v.x,v.y),m.copy(g)}function pe(K){const fe=pt(K),it=K.pageX-fe.x,Ze=K.pageY-fe.y,dt=Math.sqrt(it*it+Ze*Ze);b.set(0,dt),x.set(0,Math.pow(b.y/y.y,r.zoomSpeed)),N(x.y),y.copy(b)}function j(K){r.enableZoom&&pe(K),r.enablePan&&ae(K)}function ze(K){r.enableZoom&&pe(K),r.enableRotate&&X(K)}function $e(K){r.enabled!==!1&&(w.length===0&&(r.domElement.setPointerCapture(K.pointerId),r.domElement.addEventListener("pointermove",nt),r.domElement.addEventListener("pointerup",Je)),Be(K),K.pointerType==="touch"?U(K):Ie(K))}function nt(K){r.enabled!==!1&&(K.pointerType==="touch"?F(K):Ne(K))}function Je(K){Le(K),w.length===0&&(r.domElement.releasePointerCapture(K.pointerId),r.domElement.removeEventListener("pointermove",nt),r.domElement.removeEventListener("pointerup",Je)),r.dispatchEvent(tH),s=i.NONE}function Q(K){Le(K)}function Ie(K){let fe;switch(K.button){case 0:fe=r.mouseButtons.LEFT;break;case 1:fe=r.mouseButtons.MIDDLE;break;case 2:fe=r.mouseButtons.RIGHT;break;default:fe=-1}switch(fe){case qm.DOLLY:if(r.enableZoom===!1)return;P(K),s=i.DOLLY;break;case qm.ROTATE:if(K.ctrlKey||K.metaKey||K.shiftKey){if(r.enablePan===!1)return;O(K),s=i.PAN}else{if(r.enableRotate===!1)return;D(K),s=i.ROTATE}break;case qm.PAN:if(K.ctrlKey||K.metaKey||K.shiftKey){if(r.enableRotate===!1)return;D(K),s=i.ROTATE}else{if(r.enablePan===!1)return;O(K),s=i.PAN}break;default:s=i.NONE}s!==i.NONE&&r.dispatchEvent(fD)}function Ne(K){switch(s){case i.ROTATE:if(r.enableRotate===!1)return;B(K);break;case i.DOLLY:if(r.enableZoom===!1)return;H(K);break;case i.PAN:if(r.enablePan===!1)return;te(K);break}}function ht(K){r.enabled===!1||r.enableZoom===!1||s!==i.NONE||(K.preventDefault(),r.dispatchEvent(fD),q(K),r.dispatchEvent(tH))}function Et(K){r.enabled===!1||r.enablePan===!1||Z(K)}function U(K){switch(Qe(K),w.length){case 1:switch(r.touches.ONE){case Xm.ROTATE:if(r.enableRotate===!1)return;ne(),s=i.TOUCH_ROTATE;break;case Xm.PAN:if(r.enablePan===!1)return;G(),s=i.TOUCH_PAN;break;default:s=i.NONE}break;case 2:switch(r.touches.TWO){case Xm.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ve(),s=i.TOUCH_DOLLY_PAN;break;case Xm.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;we(),s=i.TOUCH_DOLLY_ROTATE;break;default:s=i.NONE}break;default:s=i.NONE}s!==i.NONE&&r.dispatchEvent(fD)}function F(K){switch(Qe(K),s){case i.TOUCH_ROTATE:if(r.enableRotate===!1)return;X(K),r.update();break;case i.TOUCH_PAN:if(r.enablePan===!1)return;ae(K),r.update();break;case i.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;j(K),r.update();break;case i.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;ze(K),r.update();break;default:s=i.NONE}}function be(K){r.enabled!==!1&&K.preventDefault()}function Be(K){w.push(K)}function Le(K){delete S[K.pointerId];for(let fe=0;fe<w.length;fe++)if(w[fe].pointerId==K.pointerId){w.splice(fe,1);return}}function Qe(K){let fe=S[K.pointerId];fe===void 0&&(fe=new _n,S[K.pointerId]=fe),fe.set(K.pageX,K.pageY)}function pt(K){const fe=K.pointerId===w[0].pointerId?w[1]:w[0];return S[fe.pointerId]}r.domElement.addEventListener("contextmenu",be),r.domElement.addEventListener("pointerdown",$e),r.domElement.addEventListener("pointercancel",Q),r.domElement.addEventListener("wheel",ht,{passive:!1}),this.update()}}function yc(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aee(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}/*!
 * GSAP 3.11.5
 * https://greensock.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var to={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},d0={duration:.5,overwrite:!1,delay:0},A5,ps,jr,Do=1e8,Kn=1/Do,UO=Math.PI*2,CMe=UO/4,EMe=0,oee=Math.sqrt,TMe=Math.cos,kMe=Math.sin,Ni=function(e){return typeof e=="string"},Mr=function(e){return typeof e=="function"},jc=function(e){return typeof e=="number"},M5=function(e){return typeof e>"u"},Iu=function(e){return typeof e=="object"},pa=function(e){return e!==!1},N5=function(){return typeof window<"u"},QS=function(e){return Mr(e)||Ni(e)},lee=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},ms=Array.isArray,VO=/(?:-?\.?\d|\.)+/gi,uee=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Ng=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,dD=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,cee=/[+-]=-?[.\d]+/,fee=/[^,'"\[\]\s]+/gi,AMe=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Sr,Eo,WO,$5,so={},WE={},dee,hee=function(e){return(WE=yp(e,so))&&xa},I5=function(e,n){return console.warn("Invalid property",e,"set to",n,"Missing plugin? gsap.registerPlugin()")},GE=function(e,n){return!n&&console.warn(e)},pee=function(e,n){return e&&(so[e]=n)&&WE&&(WE[e]=n)||so},yx=function(){return 0},MMe={suppressEvents:!0,isStart:!0,kill:!1},cE={suppressEvents:!0,kill:!1},NMe={suppressEvents:!0},D5={},od=[],GO={},mee,Wa={},hD={},nH=30,fE=[],R5="",O5=function(e){var n=e[0],r,i;if(Iu(n)||Mr(n)||(e=[e]),!(r=(n._gsap||{}).harness)){for(i=fE.length;i--&&!fE[i].targetTest(n););r=fE[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new zee(e[i],r)))||e.splice(i,1);return e},ep=function(e){return e._gsap||O5(Ro(e))[0]._gsap},gee=function(e,n,r){return(r=e[n])&&Mr(r)?e[n]():M5(r)&&e.getAttribute&&e.getAttribute(n)||r},ma=function(e,n){return(e=e.split(",")).forEach(n)||e},Or=function(e){return Math.round(e*1e5)/1e5||0},Wi=function(e){return Math.round(e*1e7)/1e7||0},Ug=function(e,n){var r=n.charAt(0),i=parseFloat(n.substr(2));return e=parseFloat(e),r==="+"?e+i:r==="-"?e-i:r==="*"?e*i:e/i},$Me=function(e,n){for(var r=n.length,i=0;e.indexOf(n[i])<0&&++i<r;);return i<r},HE=function(){var e=od.length,n=od.slice(0),r,i;for(GO={},od.length=0,r=0;r<e;r++)i=n[r],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},vee=function(e,n,r,i){od.length&&!ps&&HE(),e.render(n,r,i||ps&&n<0&&(e._initted||e._startAt)),od.length&&!ps&&HE()},yee=function(e){var n=parseFloat(e);return(n||n===0)&&(e+"").match(fee).length<2?n:Ni(e)?e.trim():e},bee=function(e){return e},Jo=function(e,n){for(var r in n)r in e||(e[r]=n[r]);return e},IMe=function(e){return function(n,r){for(var i in r)i in n||i==="duration"&&e||i==="ease"||(n[i]=r[i])}},yp=function(e,n){for(var r in n)e[r]=n[r];return e},rH=function t(e,n){for(var r in n)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(e[r]=Iu(n[r])?t(e[r]||(e[r]={}),n[r]):n[r]);return e},jE=function(e,n){var r={},i;for(i in e)i in n||(r[i]=e[i]);return r},H1=function(e){var n=e.parent||Sr,r=e.keyframes?IMe(ms(e.keyframes)):Jo;if(pa(e.inherit))for(;n;)r(e,n.vars.defaults),n=n.parent||n._dp;return e},DMe=function(e,n){for(var r=e.length,i=r===n.length;i&&r--&&e[r]===n[r];);return r<0},xee=function(e,n,r,i,s){r===void 0&&(r="_first"),i===void 0&&(i="_last");var a=e[i],o;if(s)for(o=n[s];a&&a[s]>o;)a=a._prev;return a?(n._next=a._next,a._next=n):(n._next=e[r],e[r]=n),n._next?n._next._prev=n:e[i]=n,n._prev=a,n.parent=n._dp=e,n},FA=function(e,n,r,i){r===void 0&&(r="_first"),i===void 0&&(i="_last");var s=n._prev,a=n._next;s?s._next=a:e[r]===n&&(e[r]=a),a?a._prev=s:e[i]===n&&(e[i]=s),n._next=n._prev=n.parent=null},yd=function(e,n){e.parent&&(!n||e.parent.autoRemoveChildren)&&e.parent.remove(e),e._act=0},tp=function(e,n){if(e&&(!n||n._end>e._dur||n._start<0))for(var r=e;r;)r._dirty=1,r=r.parent;return e},RMe=function(e){for(var n=e.parent;n&&n.parent;)n._dirty=1,n.totalDuration(),n=n.parent;return e},HO=function(e,n,r,i){return e._startAt&&(ps?e._startAt.revert(cE):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(n,!0,i))},OMe=function t(e){return!e||e._ts&&t(e.parent)},iH=function(e){return e._repeat?h0(e._tTime,e=e.duration()+e._rDelay)*e:0},h0=function(e,n){var r=Math.floor(e/=n);return e&&r===e?r-1:r},qE=function(e,n){return(e-n._start)*n._ts+(n._ts>=0?0:n._dirty?n.totalDuration():n._tDur)},LA=function(e){return e._end=Wi(e._start+(e._tDur/Math.abs(e._ts||e._rts||Kn)||0))},PA=function(e,n){var r=e._dp;return r&&r.smoothChildTiming&&e._ts&&(e._start=Wi(r._time-(e._ts>0?n/e._ts:((e._dirty?e.totalDuration():e._tDur)-n)/-e._ts)),LA(e),r._dirty||tp(r,e)),e},wee=function(e,n){var r;if((n._time||n._initted&&!n._dur)&&(r=qE(e.rawTime(),n),(!n._dur||Iw(0,n.totalDuration(),r)-n._tTime>Kn)&&n.render(r,!0)),tp(e,n)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(r=e;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;e._zTime=-Kn}},uu=function(e,n,r,i){return n.parent&&yd(n),n._start=Wi((jc(r)?r:r||e!==Sr?Co(e,r,n):e._time)+n._delay),n._end=Wi(n._start+(n.totalDuration()/Math.abs(n.timeScale())||0)),xee(e,n,"_first","_last",e._sort?"_start":0),jO(n)||(e._recent=n),i||wee(e,n),e._ts<0&&PA(e,e._tTime),e},_ee=function(e,n){return(so.ScrollTrigger||I5("scrollTrigger",n))&&so.ScrollTrigger.create(n,e)},See=function(e,n,r,i,s){if(L5(e,n,s),!e._initted)return 1;if(!r&&e._pt&&!ps&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&mee!==ja.frame)return od.push(e),e._lazy=[s,i],1},FMe=function t(e){var n=e.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||t(n))},jO=function(e){var n=e.data;return n==="isFromStart"||n==="isStart"},LMe=function(e,n,r,i){var s=e.ratio,a=n<0||!n&&(!e._start&&FMe(e)&&!(!e._initted&&jO(e))||(e._ts<0||e._dp._ts<0)&&!jO(e))?0:1,o=e._rDelay,l=0,u,c,f;if(o&&e._repeat&&(l=Iw(0,e._tDur,n),c=h0(l,o),e._yoyo&&c&1&&(a=1-a),c!==h0(e._tTime,o)&&(s=1-a,e.vars.repeatRefresh&&e._initted&&e.invalidate())),a!==s||ps||i||e._zTime===Kn||!n&&e._zTime){if(!e._initted&&See(e,n,i,r,l))return;for(f=e._zTime,e._zTime=n||(r?Kn:0),r||(r=n&&!f),e.ratio=a,e._from&&(a=1-a),e._time=0,e._tTime=l,u=e._pt;u;)u.r(a,u.d),u=u._next;n<0&&HO(e,n,r,!0),e._onUpdate&&!r&&Oo(e,"onUpdate"),l&&e._repeat&&!r&&e.parent&&Oo(e,"onRepeat"),(n>=e._tDur||n<0)&&e.ratio===a&&(a&&yd(e,1),!r&&!ps&&(Oo(e,a?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=n)},PMe=function(e,n,r){var i;if(r>n)for(i=e._first;i&&i._start<=r;){if(i.data==="isPause"&&i._start>n)return i;i=i._next}else for(i=e._last;i&&i._start>=r;){if(i.data==="isPause"&&i._start<n)return i;i=i._prev}},p0=function(e,n,r,i){var s=e._repeat,a=Wi(n)||0,o=e._tTime/e._tDur;return o&&!i&&(e._time*=a/e._dur),e._dur=a,e._tDur=s?s<0?1e10:Wi(a*(s+1)+e._rDelay*s):a,o>0&&!i&&PA(e,e._tTime=e._tDur*o),e.parent&&LA(e),r||tp(e.parent,e),e},sH=function(e){return e instanceof oa?tp(e):p0(e,e._dur)},zMe={_start:0,endTime:yx,totalDuration:yx},Co=function t(e,n,r){var i=e.labels,s=e._recent||zMe,a=e.duration()>=Do?s.endTime(!1):e._dur,o,l,u;return Ni(n)&&(isNaN(n)||n in i)?(l=n.charAt(0),u=n.substr(-1)==="%",o=n.indexOf("="),l==="<"||l===">"?(o>=0&&(n=n.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(n.substr(1))||0)*(u?(o<0?s:r).totalDuration()/100:1)):o<0?(n in i||(i[n]=a),i[n]):(l=parseFloat(n.charAt(o-1)+n.substr(o+1)),u&&r&&(l=l/100*(ms(r)?r[0]:r).totalDuration()),o>1?t(e,n.substr(0,o-1),r)+l:a+l)):n==null?a:+n},j1=function(e,n,r){var i=jc(n[1]),s=(i?2:1)+(e<2?0:1),a=n[s],o,l;if(i&&(a.duration=n[1]),a.parent=r,e){for(o=a,l=r;l&&!("immediateRender"in o);)o=l.vars.defaults||{},l=pa(l.vars.inherit)&&l.parent;a.immediateRender=pa(o.immediateRender),e<2?a.runBackwards=1:a.startAt=n[s-1]}return new si(n[0],a,n[s+1])},Pd=function(e,n){return e||e===0?n(e):n},Iw=function(e,n,r){return r<e?e:r>n?n:r},us=function(e,n){return!Ni(e)||!(n=AMe.exec(e))?"":n[1]},BMe=function(e,n,r){return Pd(r,function(i){return Iw(e,n,i)})},qO=[].slice,Cee=function(e,n){return e&&Iu(e)&&"length"in e&&(!n&&!e.length||e.length-1 in e&&Iu(e[0]))&&!e.nodeType&&e!==Eo},UMe=function(e,n,r){return r===void 0&&(r=[]),e.forEach(function(i){var s;return Ni(i)&&!n||Cee(i,1)?(s=r).push.apply(s,Ro(i)):r.push(i)})||r},Ro=function(e,n,r){return jr&&!n&&jr.selector?jr.selector(e):Ni(e)&&!r&&(WO||!m0())?qO.call((n||$5).querySelectorAll(e),0):ms(e)?UMe(e,r):Cee(e)?qO.call(e,0):e?[e]:[]},XO=function(e){return e=Ro(e)[0]||GE("Invalid scope")||{},function(n){var r=e.current||e.nativeElement||e;return Ro(n,r.querySelectorAll?r:r===e?GE("Invalid scope")||$5.createElement("div"):e)}},Eee=function(e){return e.sort(function(){return .5-Math.random()})},Tee=function(e){if(Mr(e))return e;var n=Iu(e)?e:{each:e},r=np(n.ease),i=n.from||0,s=parseFloat(n.base)||0,a={},o=i>0&&i<1,l=isNaN(i)||o,u=n.axis,c=i,f=i;return Ni(i)?c=f={center:.5,edges:.5,end:1}[i]||0:!o&&l&&(c=i[0],f=i[1]),function(d,h,p){var m=(p||n).length,g=a[m],v,y,b,x,w,S,C,_,E;if(!g){if(E=n.grid==="auto"?0:(n.grid||[1,Do])[1],!E){for(C=-Do;C<(C=p[E++].getBoundingClientRect().left)&&E<m;);E--}for(g=a[m]=[],v=l?Math.min(E,m)*c-.5:i%E,y=E===Do?0:l?m*f/E-.5:i/E|0,C=0,_=Do,S=0;S<m;S++)b=S%E-v,x=y-(S/E|0),g[S]=w=u?Math.abs(u==="y"?x:b):oee(b*b+x*x),w>C&&(C=w),w<_&&(_=w);i==="random"&&Eee(g),g.max=C-_,g.min=_,g.v=m=(parseFloat(n.amount)||parseFloat(n.each)*(E>m?m-1:u?u==="y"?m/E:E:Math.max(E,m/E))||0)*(i==="edges"?-1:1),g.b=m<0?s-m:s,g.u=us(n.amount||n.each)||0,r=r&&m<0?Fee(r):r}return m=(g[d]-g.min)/g.max||0,Wi(g.b+(r?r(m):m)*g.v)+g.u}},YO=function(e){var n=Math.pow(10,((e+"").split(".")[1]||"").length);return function(r){var i=Wi(Math.round(parseFloat(r)/e)*e*n);return(i-i%1)/n+(jc(r)?0:us(r))}},kee=function(e,n){var r=ms(e),i,s;return!r&&Iu(e)&&(i=r=e.radius||Do,e.values?(e=Ro(e.values),(s=!jc(e[0]))&&(i*=i)):e=YO(e.increment)),Pd(n,r?Mr(e)?function(a){return s=e(a),Math.abs(s-a)<=i?s:a}:function(a){for(var o=parseFloat(s?a.x:a),l=parseFloat(s?a.y:0),u=Do,c=0,f=e.length,d,h;f--;)s?(d=e[f].x-o,h=e[f].y-l,d=d*d+h*h):d=Math.abs(e[f]-o),d<u&&(u=d,c=f);return c=!i||u<=i?e[c]:a,s||c===a||jc(a)?c:c+us(a)}:YO(e))},Aee=function(e,n,r,i){return Pd(ms(e)?!n:r===!0?!!(r=0):!i,function(){return ms(e)?e[~~(Math.random()*e.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((e-r/2+Math.random()*(n-e+r*.99))/r)*r*i)/i})},VMe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(i){return n.reduce(function(s,a){return a(s)},i)}},WMe=function(e,n){return function(r){return e(parseFloat(r))+(n||us(r))}},GMe=function(e,n,r){return Nee(e,n,0,1,r)},Mee=function(e,n,r){return Pd(r,function(i){return e[~~n(i)]})},HMe=function t(e,n,r){var i=n-e;return ms(e)?Mee(e,t(0,e.length),n):Pd(r,function(s){return(i+(s-e)%i)%i+e})},jMe=function t(e,n,r){var i=n-e,s=i*2;return ms(e)?Mee(e,t(0,e.length-1),n):Pd(r,function(a){return a=(s+(a-e)%s)%s||0,e+(a>i?s-a:a)})},bx=function(e){for(var n=0,r="",i,s,a,o;~(i=e.indexOf("random(",n));)a=e.indexOf(")",i),o=e.charAt(i+7)==="[",s=e.substr(i+7,a-i-7).match(o?fee:VO),r+=e.substr(n,i-n)+Aee(o?s:+s[0],o?0:+s[1],+s[2]||1e-5),n=a+1;return r+e.substr(n,e.length-n)},Nee=function(e,n,r,i,s){var a=n-e,o=i-r;return Pd(s,function(l){return r+((l-e)/a*o||0)})},qMe=function t(e,n,r,i){var s=isNaN(e+n)?0:function(h){return(1-h)*e+h*n};if(!s){var a=Ni(e),o={},l,u,c,f,d;if(r===!0&&(i=1)&&(r=null),a)e={p:e},n={p:n};else if(ms(e)&&!ms(n)){for(c=[],f=e.length,d=f-2,u=1;u<f;u++)c.push(t(e[u-1],e[u]));f--,s=function(p){p*=f;var m=Math.min(d,~~p);return c[m](p-m)},r=n}else i||(e=yp(ms(e)?[]:{},e));if(!c){for(l in n)F5.call(o,e,l,"get",n[l]);s=function(p){return B5(p,o)||(a?e.p:e)}}}return Pd(r,s)},aH=function(e,n,r){var i=e.labels,s=Do,a,o,l;for(a in i)o=i[a]-n,o<0==!!r&&o&&s>(o=Math.abs(o))&&(l=a,s=o);return l},Oo=function(e,n,r){var i=e.vars,s=i[n],a=jr,o=e._ctx,l,u,c;if(s)return l=i[n+"Params"],u=i.callbackScope||e,r&&od.length&&HE(),o&&(jr=o),c=l?s.apply(u,l):s.call(u),jr=a,c},v1=function(e){return yd(e),e.scrollTrigger&&e.scrollTrigger.kill(!!ps),e.progress()<1&&Oo(e,"onInterrupt"),e},$g,$ee=[],Iee=function(e){if(!N5()){$ee.push(e);return}e=!e.name&&e.default||e;var n=e.name,r=Mr(e),i=n&&!r&&e.init?function(){this._props=[]}:e,s={init:yx,render:B5,add:F5,kill:u3e,modifier:l3e,rawVars:0},a={targetTest:0,get:0,getSetter:z5,aliases:{},register:0};if(m0(),e!==i){if(Wa[n])return;Jo(i,Jo(jE(e,s),a)),yp(i.prototype,yp(s,jE(e,a))),Wa[i.prop=n]=i,e.targetTest&&(fE.push(i),D5[n]=1),n=(n==="css"?"CSS":n.charAt(0).toUpperCase()+n.substr(1))+"Plugin"}pee(n,i),e.register&&e.register(xa,i,ga)},Xn=255,y1={aqua:[0,Xn,Xn],lime:[0,Xn,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Xn],navy:[0,0,128],white:[Xn,Xn,Xn],olive:[128,128,0],yellow:[Xn,Xn,0],orange:[Xn,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Xn,0,0],pink:[Xn,192,203],cyan:[0,Xn,Xn],transparent:[Xn,Xn,Xn,0]},pD=function(e,n,r){return e+=e<0?1:e>1?-1:0,(e*6<1?n+(r-n)*e*6:e<.5?r:e*3<2?n+(r-n)*(2/3-e)*6:n)*Xn+.5|0},Dee=function(e,n,r){var i=e?jc(e)?[e>>16,e>>8&Xn,e&Xn]:0:y1.black,s,a,o,l,u,c,f,d,h,p;if(!i){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),y1[e])i=y1[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),a=e.charAt(2),o=e.charAt(3),e="#"+s+s+a+a+o+o+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return i=parseInt(e.substr(1,6),16),[i>>16,i>>8&Xn,i&Xn,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),i=[e>>16,e>>8&Xn,e&Xn]}else if(e.substr(0,3)==="hsl"){if(i=p=e.match(VO),!n)l=+i[0]%360/360,u=+i[1]/100,c=+i[2]/100,a=c<=.5?c*(u+1):c+u-c*u,s=c*2-a,i.length>3&&(i[3]*=1),i[0]=pD(l+1/3,s,a),i[1]=pD(l,s,a),i[2]=pD(l-1/3,s,a);else if(~e.indexOf("="))return i=e.match(uee),r&&i.length<4&&(i[3]=1),i}else i=e.match(VO)||y1.transparent;i=i.map(Number)}return n&&!p&&(s=i[0]/Xn,a=i[1]/Xn,o=i[2]/Xn,f=Math.max(s,a,o),d=Math.min(s,a,o),c=(f+d)/2,f===d?l=u=0:(h=f-d,u=c>.5?h/(2-f-d):h/(f+d),l=f===s?(a-o)/h+(a<o?6:0):f===a?(o-s)/h+2:(s-a)/h+4,l*=60),i[0]=~~(l+.5),i[1]=~~(u*100+.5),i[2]=~~(c*100+.5)),r&&i.length<4&&(i[3]=1),i},Ree=function(e){var n=[],r=[],i=-1;return e.split(ld).forEach(function(s){var a=s.match(Ng)||[];n.push.apply(n,a),r.push(i+=a.length+1)}),n.c=r,n},oH=function(e,n,r){var i="",s=(e+i).match(ld),a=n?"hsla(":"rgba(",o=0,l,u,c,f;if(!s)return e;if(s=s.map(function(d){return(d=Dee(d,n,1))&&a+(n?d[0]+","+d[1]+"%,"+d[2]+"%,"+d[3]:d.join(","))+")"}),r&&(c=Ree(e),l=r.c,l.join(i)!==c.c.join(i)))for(u=e.replace(ld,"1").split(Ng),f=u.length-1;o<f;o++)i+=u[o]+(~l.indexOf(o)?s.shift()||a+"0,0,0,0)":(c.length?c:s.length?s:r).shift());if(!u)for(u=e.split(ld),f=u.length-1;o<f;o++)i+=u[o]+s[o];return i+u[f]},ld=function(){var t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in y1)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),XMe=/hsl[a]?\(/,Oee=function(e){var n=e.join(" "),r;if(ld.lastIndex=0,ld.test(n))return r=XMe.test(n),e[1]=oH(e[1],r),e[0]=oH(e[0],r,Ree(e[1])),!0},xx,ja=function(){var t=Date.now,e=500,n=33,r=t(),i=r,s=1e3/240,a=s,o=[],l,u,c,f,d,h,p=function m(g){var v=t()-i,y=g===!0,b,x,w,S;if(v>e&&(r+=v-n),i+=v,w=i-r,b=w-a,(b>0||y)&&(S=++f.frame,d=w-f.time*1e3,f.time=w=w/1e3,a+=b+(b>=s?4:s-b),x=1),y||(l=u(m)),x)for(h=0;h<o.length;h++)o[h](w,d,S,g)};return f={time:0,frame:0,tick:function(){p(!0)},deltaRatio:function(g){return d/(1e3/(g||60))},wake:function(){dee&&(!WO&&N5()&&(Eo=WO=window,$5=Eo.document||{},so.gsap=xa,(Eo.gsapVersions||(Eo.gsapVersions=[])).push(xa.version),hee(WE||Eo.GreenSockGlobals||!Eo.gsap&&Eo||{}),c=Eo.requestAnimationFrame,$ee.forEach(Iee)),l&&f.sleep(),u=c||function(g){return setTimeout(g,a-f.time*1e3+1|0)},xx=1,p(2))},sleep:function(){(c?Eo.cancelAnimationFrame:clearTimeout)(l),xx=0,u=yx},lagSmoothing:function(g,v){e=g||1/0,n=Math.min(v||33,e)},fps:function(g){s=1e3/(g||240),a=f.time*1e3+s},add:function(g,v,y){var b=v?function(x,w,S,C){g(x,w,S,C),f.remove(b)}:g;return f.remove(g),o[y?"unshift":"push"](b),m0(),b},remove:function(g,v){~(v=o.indexOf(g))&&o.splice(v,1)&&h>=v&&h--},_listeners:o},f}(),m0=function(){return!xx&&ja.wake()},gn={},YMe=/^[\d.\-M][\d.\-,\s]/,KMe=/["']/g,ZMe=function(e){for(var n={},r=e.substr(1,e.length-3).split(":"),i=r[0],s=1,a=r.length,o,l,u;s<a;s++)l=r[s],o=s!==a-1?l.lastIndexOf(","):l.length,u=l.substr(0,o),n[i]=isNaN(u)?u.replace(KMe,"").trim():+u,i=l.substr(o+1).trim();return n},JMe=function(e){var n=e.indexOf("(")+1,r=e.indexOf(")"),i=e.indexOf("(",n);return e.substring(n,~i&&i<r?e.indexOf(")",r+1):r)},QMe=function(e){var n=(e+"").split("("),r=gn[n[0]];return r&&n.length>1&&r.config?r.config.apply(null,~e.indexOf("{")?[ZMe(n[1])]:JMe(e).split(",").map(yee)):gn._CE&&YMe.test(e)?gn._CE("",e):r},Fee=function(e){return function(n){return 1-e(1-n)}},Lee=function t(e,n){for(var r=e._first,i;r;)r instanceof oa?t(r,n):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==n&&(r.timeline?t(r.timeline,n):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=n)),r=r._next},np=function(e,n){return e&&(Mr(e)?e:gn[e]||QMe(e))||n},tm=function(e,n,r,i){r===void 0&&(r=function(l){return 1-n(1-l)}),i===void 0&&(i=function(l){return l<.5?n(l*2)/2:1-n((1-l)*2)/2});var s={easeIn:n,easeOut:r,easeInOut:i},a;return ma(e,function(o){gn[o]=so[o]=s,gn[a=o.toLowerCase()]=r;for(var l in s)gn[a+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=gn[o+"."+l]=s[l]}),s},Pee=function(e){return function(n){return n<.5?(1-e(1-n*2))/2:.5+e((n-.5)*2)/2}},mD=function t(e,n,r){var i=n>=1?n:1,s=(r||(e?.3:.45))/(n<1?n:1),a=s/UO*(Math.asin(1/i)||0),o=function(c){return c===1?1:i*Math.pow(2,-10*c)*kMe((c-a)*s)+1},l=e==="out"?o:e==="in"?function(u){return 1-o(1-u)}:Pee(o);return s=UO/s,l.config=function(u,c){return t(e,u,c)},l},gD=function t(e,n){n===void 0&&(n=1.70158);var r=function(a){return a?--a*a*((n+1)*a+n)+1:0},i=e==="out"?r:e==="in"?function(s){return 1-r(1-s)}:Pee(r);return i.config=function(s){return t(e,s)},i};ma("Linear,Quad,Cubic,Quart,Quint,Strong",function(t,e){var n=e<5?e+1:e;tm(t+",Power"+(n-1),e?function(r){return Math.pow(r,n)}:function(r){return r},function(r){return 1-Math.pow(1-r,n)},function(r){return r<.5?Math.pow(r*2,n)/2:1-Math.pow((1-r)*2,n)/2})});gn.Linear.easeNone=gn.none=gn.Linear.easeIn;tm("Elastic",mD("in"),mD("out"),mD());(function(t,e){var n=1/e,r=2*n,i=2.5*n,s=function(o){return o<n?t*o*o:o<r?t*Math.pow(o-1.5/e,2)+.75:o<i?t*(o-=2.25/e)*o+.9375:t*Math.pow(o-2.625/e,2)+.984375};tm("Bounce",function(a){return 1-s(1-a)},s)})(7.5625,2.75);tm("Expo",function(t){return t?Math.pow(2,10*(t-1)):0});tm("Circ",function(t){return-(oee(1-t*t)-1)});tm("Sine",function(t){return t===1?1:-TMe(t*CMe)+1});tm("Back",gD("in"),gD("out"),gD());gn.SteppedEase=gn.steps=so.SteppedEase={config:function(e,n){e===void 0&&(e=1);var r=1/e,i=e+(n?0:1),s=n?1:0,a=1-Kn;return function(o){return((i*Iw(0,a,o)|0)+s)*r}}};d0.ease=gn["quad.out"];ma("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(t){return R5+=t+","+t+"Params,"});var zee=function(e,n){this.id=EMe++,e._gsap=this,this.target=e,this.harness=n,this.get=n?n.get:gee,this.set=n?n.getSetter:z5},g0=function(){function t(n){this.vars=n,this._delay=+n.delay||0,(this._repeat=n.repeat===1/0?-2:n.repeat||0)&&(this._rDelay=n.repeatDelay||0,this._yoyo=!!n.yoyo||!!n.yoyoEase),this._ts=1,p0(this,+n.duration,1,1),this.data=n.data,jr&&(this._ctx=jr,jr.data.push(this)),xx||ja.wake()}var e=t.prototype;return e.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},e.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},e.totalDuration=function(r){return arguments.length?(this._dirty=0,p0(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(r,i){if(m0(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(PA(this,r),!s._dp||s.parent||wee(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&uu(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===Kn||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),vee(this,r,i)),this},e.time=function(r,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+iH(this))%(this._dur+this._rDelay)||(r?this._dur:0),i):this._time},e.totalProgress=function(r,i){return arguments.length?this.totalTime(this.totalDuration()*r,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(r,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+iH(this),i):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(r,i){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*s,i):this._repeat?h0(this._tTime,s)+1:1},e.timeScale=function(r){if(!arguments.length)return this._rts===-Kn?0:this._rts;if(this._rts===r)return this;var i=this.parent&&this._ts?qE(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-Kn?0:this._rts,this.totalTime(Iw(-Math.abs(this._delay),this._tDur,i),!0),LA(this),RMe(this)},e.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(m0(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Kn&&(this._tTime-=Kn)))),this):this._ps},e.startTime=function(r){if(arguments.length){this._start=r;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&uu(i,this,r-this._delay),this}return this._start},e.endTime=function(r){return this._start+(pa(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(r){var i=this.parent||this._dp;return i?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?qE(i.rawTime(r),this):this._tTime:this._tTime},e.revert=function(r){r===void 0&&(r=NMe);var i=ps;return ps=r,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),ps=i,this},e.globalTime=function(r){for(var i=this,s=arguments.length?r:i.rawTime();i;)s=i._start+s/(i._ts||1),i=i._dp;return!this.parent&&this._sat?this._sat.vars.immediateRender?-1:this._sat.globalTime(r):s},e.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,sH(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(r){if(arguments.length){var i=this._time;return this._rDelay=r,sH(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},e.seek=function(r,i){return this.totalTime(Co(this,r),pa(i))},e.restart=function(r,i){return this.play().totalTime(r?-this._delay:0,pa(i))},e.play=function(r,i){return r!=null&&this.seek(r,i),this.reversed(!1).paused(!1)},e.reverse=function(r,i){return r!=null&&this.seek(r||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(r,i){return r!=null&&this.seek(r,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-Kn:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Kn,this},e.isActive=function(){var r=this.parent||this._dp,i=this._start,s;return!!(!r||this._ts&&this._initted&&r.isActive()&&(s=r.rawTime(!0))>=i&&s<this.endTime(!0)-Kn)},e.eventCallback=function(r,i,s){var a=this.vars;return arguments.length>1?(i?(a[r]=i,s&&(a[r+"Params"]=s),r==="onUpdate"&&(this._onUpdate=i)):delete a[r],this):a[r]},e.then=function(r){var i=this;return new Promise(function(s){var a=Mr(r)?r:bee,o=function(){var u=i.then;i.then=null,Mr(a)&&(a=a(i))&&(a.then||a===i)&&(i.then=u),s(a),i.then=u};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?o():i._prom=o})},e.kill=function(){v1(this)},t}();Jo(g0.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Kn,_prom:0,_ps:!1,_rts:1});var oa=function(t){aee(e,t);function e(r,i){var s;return r===void 0&&(r={}),s=t.call(this,r)||this,s.labels={},s.smoothChildTiming=!!r.smoothChildTiming,s.autoRemoveChildren=!!r.autoRemoveChildren,s._sort=pa(r.sortChildren),Sr&&uu(r.parent||Sr,yc(s),i),r.reversed&&s.reverse(),r.paused&&s.paused(!0),r.scrollTrigger&&_ee(yc(s),r.scrollTrigger),s}var n=e.prototype;return n.to=function(i,s,a){return j1(0,arguments,this),this},n.from=function(i,s,a){return j1(1,arguments,this),this},n.fromTo=function(i,s,a,o){return j1(2,arguments,this),this},n.set=function(i,s,a){return s.duration=0,s.parent=this,H1(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new si(i,s,Co(this,a),1),this},n.call=function(i,s,a){return uu(this,si.delayedCall(0,i,s),a)},n.staggerTo=function(i,s,a,o,l,u,c){return a.duration=s,a.stagger=a.stagger||o,a.onComplete=u,a.onCompleteParams=c,a.parent=this,new si(i,a,Co(this,l)),this},n.staggerFrom=function(i,s,a,o,l,u,c){return a.runBackwards=1,H1(a).immediateRender=pa(a.immediateRender),this.staggerTo(i,s,a,o,l,u,c)},n.staggerFromTo=function(i,s,a,o,l,u,c,f){return o.startAt=a,H1(o).immediateRender=pa(o.immediateRender),this.staggerTo(i,s,o,l,u,c,f)},n.render=function(i,s,a){var o=this._time,l=this._dirty?this.totalDuration():this._tDur,u=this._dur,c=i<=0?0:Wi(i),f=this._zTime<0!=i<0&&(this._initted||!u),d,h,p,m,g,v,y,b,x,w,S,C;if(this!==Sr&&c>l&&i>=0&&(c=l),c!==this._tTime||a||f){if(o!==this._time&&u&&(c+=this._time-o,i+=this._time-o),d=c,x=this._start,b=this._ts,v=!b,f&&(u||(o=this._zTime),(i||!s)&&(this._zTime=i)),this._repeat){if(S=this._yoyo,g=u+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(g*100+i,s,a);if(d=Wi(c%g),c===l?(m=this._repeat,d=u):(m=~~(c/g),m&&m===c/g&&(d=u,m--),d>u&&(d=u)),w=h0(this._tTime,g),!o&&this._tTime&&w!==m&&this._tTime-w*g-this._dur<=0&&(w=m),S&&m&1&&(d=u-d,C=1),m!==w&&!this._lock){var _=S&&w&1,E=_===(S&&m&1);if(m<w&&(_=!_),o=_?0:u,this._lock=1,this.render(o||(C?0:Wi(m*g)),s,!u)._lock=0,this._tTime=c,!s&&this.parent&&Oo(this,"onRepeat"),this.vars.repeatRefresh&&!C&&(this.invalidate()._lock=1),o&&o!==this._time||v!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(u=this._dur,l=this._tDur,E&&(this._lock=2,o=_?u:-1e-4,this.render(o,!0),this.vars.repeatRefresh&&!C&&this.invalidate()),this._lock=0,!this._ts&&!v)return this;Lee(this,C)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(y=PMe(this,Wi(o),Wi(d)),y&&(c-=d-(d=y._start))),this._tTime=c,this._time=d,this._act=!b,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,o=0),!o&&d&&!s&&!m&&(Oo(this,"onStart"),this._tTime!==c))return this;if(d>=o&&i>=0)for(h=this._first;h;){if(p=h._next,(h._act||d>=h._start)&&h._ts&&y!==h){if(h.parent!==this)return this.render(i,s,a);if(h.render(h._ts>0?(d-h._start)*h._ts:(h._dirty?h.totalDuration():h._tDur)+(d-h._start)*h._ts,s,a),d!==this._time||!this._ts&&!v){y=0,p&&(c+=this._zTime=-Kn);break}}h=p}else{h=this._last;for(var T=i<0?i:d;h;){if(p=h._prev,(h._act||T<=h._end)&&h._ts&&y!==h){if(h.parent!==this)return this.render(i,s,a);if(h.render(h._ts>0?(T-h._start)*h._ts:(h._dirty?h.totalDuration():h._tDur)+(T-h._start)*h._ts,s,a||ps&&(h._initted||h._startAt)),d!==this._time||!this._ts&&!v){y=0,p&&(c+=this._zTime=T?-Kn:Kn);break}}h=p}}if(y&&!s&&(this.pause(),y.render(d>=o?0:-Kn)._zTime=d>=o?1:-1,this._ts))return this._start=x,LA(this),this.render(i,s,a);this._onUpdate&&!s&&Oo(this,"onUpdate",!0),(c===l&&this._tTime>=this.totalDuration()||!c&&o)&&(x===this._start||Math.abs(b)!==Math.abs(this._ts))&&(this._lock||((i||!u)&&(c===l&&this._ts>0||!c&&this._ts<0)&&yd(this,1),!s&&!(i<0&&!o)&&(c||o||!l)&&(Oo(this,c===l&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(c<l&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(i,s){var a=this;if(jc(s)||(s=Co(this,s,i)),!(i instanceof g0)){if(ms(i))return i.forEach(function(o){return a.add(o,s)}),this;if(Ni(i))return this.addLabel(i,s);if(Mr(i))i=si.delayedCall(0,i);else return this}return this!==i?uu(this,i,s):this},n.getChildren=function(i,s,a,o){i===void 0&&(i=!0),s===void 0&&(s=!0),a===void 0&&(a=!0),o===void 0&&(o=-Do);for(var l=[],u=this._first;u;)u._start>=o&&(u instanceof si?s&&l.push(u):(a&&l.push(u),i&&l.push.apply(l,u.getChildren(!0,s,a)))),u=u._next;return l},n.getById=function(i){for(var s=this.getChildren(1,1,1),a=s.length;a--;)if(s[a].vars.id===i)return s[a]},n.remove=function(i){return Ni(i)?this.removeLabel(i):Mr(i)?this.killTweensOf(i):(FA(this,i),i===this._recent&&(this._recent=this._last),tp(this))},n.totalTime=function(i,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Wi(ja.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),t.prototype.totalTime.call(this,i,s),this._forcing=0,this):this._tTime},n.addLabel=function(i,s){return this.labels[i]=Co(this,s),this},n.removeLabel=function(i){return delete this.labels[i],this},n.addPause=function(i,s,a){var o=si.delayedCall(0,s||yx,a);return o.data="isPause",this._hasPause=1,uu(this,o,Co(this,i))},n.removePause=function(i){var s=this._first;for(i=Co(this,i);s;)s._start===i&&s.data==="isPause"&&yd(s),s=s._next},n.killTweensOf=function(i,s,a){for(var o=this.getTweensOf(i,a),l=o.length;l--;)Hf!==o[l]&&o[l].kill(i,s);return this},n.getTweensOf=function(i,s){for(var a=[],o=Ro(i),l=this._first,u=jc(s),c;l;)l instanceof si?$Me(l._targets,o)&&(u?(!Hf||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&a.push(l):(c=l.getTweensOf(o,s)).length&&a.push.apply(a,c),l=l._next;return a},n.tweenTo=function(i,s){s=s||{};var a=this,o=Co(a,i),l=s,u=l.startAt,c=l.onStart,f=l.onStartParams,d=l.immediateRender,h,p=si.to(a,Jo({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:o,overwrite:"auto",duration:s.duration||Math.abs((o-(u&&"time"in u?u.time:a._time))/a.timeScale())||Kn,onStart:function(){if(a.pause(),!h){var g=s.duration||Math.abs((o-(u&&"time"in u?u.time:a._time))/a.timeScale());p._dur!==g&&p0(p,g,0,1).render(p._time,!0,!0),h=1}c&&c.apply(p,f||[])}},s));return d?p.render(0):p},n.tweenFromTo=function(i,s,a){return this.tweenTo(s,Jo({startAt:{time:Co(this,i)}},a))},n.recent=function(){return this._recent},n.nextLabel=function(i){return i===void 0&&(i=this._time),aH(this,Co(this,i))},n.previousLabel=function(i){return i===void 0&&(i=this._time),aH(this,Co(this,i),1)},n.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+Kn)},n.shiftChildren=function(i,s,a){a===void 0&&(a=0);for(var o=this._first,l=this.labels,u;o;)o._start>=a&&(o._start+=i,o._end+=i),o=o._next;if(s)for(u in l)l[u]>=a&&(l[u]+=i);return tp(this)},n.invalidate=function(i){var s=this._first;for(this._lock=0;s;)s.invalidate(i),s=s._next;return t.prototype.invalidate.call(this,i)},n.clear=function(i){i===void 0&&(i=!0);for(var s=this._first,a;s;)a=s._next,this.remove(s),s=a;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),tp(this)},n.totalDuration=function(i){var s=0,a=this,o=a._last,l=Do,u,c,f;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-i:i));if(a._dirty){for(f=a.parent;o;)u=o._prev,o._dirty&&o.totalDuration(),c=o._start,c>l&&a._sort&&o._ts&&!a._lock?(a._lock=1,uu(a,o,c-o._delay,1)._lock=0):l=c,c<0&&o._ts&&(s-=c,(!f&&!a._dp||f&&f.smoothChildTiming)&&(a._start+=c/a._ts,a._time-=c,a._tTime-=c),a.shiftChildren(-c,!1,-1/0),l=0),o._end>s&&o._ts&&(s=o._end),o=u;p0(a,a===Sr&&a._time>s?a._time:s,1,1),a._dirty=0}return a._tDur},e.updateRoot=function(i){if(Sr._ts&&(vee(Sr,qE(i,Sr)),mee=ja.frame),ja.frame>=nH){nH+=to.autoSleep||120;var s=Sr._first;if((!s||!s._ts)&&to.autoSleep&&ja._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||ja.sleep()}}},e}(g0);Jo(oa.prototype,{_lock:0,_hasPause:0,_forcing:0});var e3e=function(e,n,r,i,s,a,o){var l=new ga(this._pt,e,n,0,1,Hee,null,s),u=0,c=0,f,d,h,p,m,g,v,y;for(l.b=r,l.e=i,r+="",i+="",(v=~i.indexOf("random("))&&(i=bx(i)),a&&(y=[r,i],a(y,e,n),r=y[0],i=y[1]),d=r.match(dD)||[];f=dD.exec(i);)p=f[0],m=i.substring(u,f.index),h?h=(h+1)%5:m.substr(-5)==="rgba("&&(h=1),p!==d[c++]&&(g=parseFloat(d[c-1])||0,l._pt={_next:l._pt,p:m||c===1?m:",",s:g,c:p.charAt(1)==="="?Ug(g,p)-g:parseFloat(p)-g,m:h&&h<4?Math.round:0},u=dD.lastIndex);return l.c=u<i.length?i.substring(u,i.length):"",l.fp=o,(cee.test(i)||v)&&(l.e=0),this._pt=l,l},F5=function(e,n,r,i,s,a,o,l,u,c){Mr(i)&&(i=i(s||0,e,a));var f=e[n],d=r!=="get"?r:Mr(f)?u?e[n.indexOf("set")||!Mr(e["get"+n.substr(3)])?n:"get"+n.substr(3)](u):e[n]():f,h=Mr(f)?u?s3e:Wee:P5,p;if(Ni(i)&&(~i.indexOf("random(")&&(i=bx(i)),i.charAt(1)==="="&&(p=Ug(d,i)+(us(d)||0),(p||p===0)&&(i=p))),!c||d!==i||KO)return!isNaN(d*i)&&i!==""?(p=new ga(this._pt,e,n,+d||0,i-(d||0),typeof f=="boolean"?o3e:Gee,0,h),u&&(p.fp=u),o&&p.modifier(o,this,e),this._pt=p):(!f&&!(n in e)&&I5(n,i),e3e.call(this,e,n,d,i,h,l||to.stringFilter,u))},t3e=function(e,n,r,i,s){if(Mr(e)&&(e=q1(e,s,n,r,i)),!Iu(e)||e.style&&e.nodeType||ms(e)||lee(e))return Ni(e)?q1(e,s,n,r,i):e;var a={},o;for(o in e)a[o]=q1(e[o],s,n,r,i);return a},Bee=function(e,n,r,i,s,a){var o,l,u,c;if(Wa[e]&&(o=new Wa[e]).init(s,o.rawVars?n[e]:t3e(n[e],i,s,a,r),r,i,a)!==!1&&(r._pt=l=new ga(r._pt,s,e,0,1,o.render,o,0,o.priority),r!==$g))for(u=r._ptLookup[r._targets.indexOf(s)],c=o._props.length;c--;)u[o._props[c]]=l;return o},Hf,KO,L5=function t(e,n,r){var i=e.vars,s=i.ease,a=i.startAt,o=i.immediateRender,l=i.lazy,u=i.onUpdate,c=i.onUpdateParams,f=i.callbackScope,d=i.runBackwards,h=i.yoyoEase,p=i.keyframes,m=i.autoRevert,g=e._dur,v=e._startAt,y=e._targets,b=e.parent,x=b&&b.data==="nested"?b.vars.targets:y,w=e._overwrite==="auto"&&!A5,S=e.timeline,C,_,E,T,k,M,A,N,$,D,P,O,B;if(S&&(!p||!s)&&(s="none"),e._ease=np(s,d0.ease),e._yEase=h?Fee(np(h===!0?s:h,d0.ease)):0,h&&e._yoyo&&!e._repeat&&(h=e._yEase,e._yEase=e._ease,e._ease=h),e._from=!S&&!!i.runBackwards,!S||p&&!i.stagger){if(N=y[0]?ep(y[0]).harness:0,O=N&&i[N.prop],C=jE(i,D5),v&&(v._zTime<0&&v.progress(1),n<0&&d&&o&&!m?v.render(-1,!0):v.revert(d&&g?cE:MMe),v._lazy=0),a){if(yd(e._startAt=si.set(y,Jo({data:"isStart",overwrite:!1,parent:b,immediateRender:!0,lazy:!v&&pa(l),startAt:null,delay:0,onUpdate:u,onUpdateParams:c,callbackScope:f,stagger:0},a))),e._startAt._dp=0,e._startAt._sat=e,n<0&&(ps||!o&&!m)&&e._startAt.revert(cE),o&&g&&n<=0&&r<=0){n&&(e._zTime=n);return}}else if(d&&g&&!v){if(n&&(o=!1),E=Jo({overwrite:!1,data:"isFromStart",lazy:o&&!v&&pa(l),immediateRender:o,stagger:0,parent:b},C),O&&(E[N.prop]=O),yd(e._startAt=si.set(y,E)),e._startAt._dp=0,e._startAt._sat=e,n<0&&(ps?e._startAt.revert(cE):e._startAt.render(-1,!0)),e._zTime=n,!o)t(e._startAt,Kn,Kn);else if(!n)return}for(e._pt=e._ptCache=0,l=g&&pa(l)||l&&!g,_=0;_<y.length;_++){if(k=y[_],A=k._gsap||O5(y)[_]._gsap,e._ptLookup[_]=D={},GO[A.id]&&od.length&&HE(),P=x===y?_:x.indexOf(k),N&&($=new N).init(k,O||C,e,P,x)!==!1&&(e._pt=T=new ga(e._pt,k,$.name,0,1,$.render,$,0,$.priority),$._props.forEach(function(H){D[H]=T}),$.priority&&(M=1)),!N||O)for(E in C)Wa[E]&&($=Bee(E,C,e,P,k,x))?$.priority&&(M=1):D[E]=T=F5.call(e,k,E,"get",C[E],P,x,0,i.stringFilter);e._op&&e._op[_]&&e.kill(k,e._op[_]),w&&e._pt&&(Hf=e,Sr.killTweensOf(k,D,e.globalTime(n)),B=!e.parent,Hf=0),e._pt&&l&&(GO[A.id]=1)}M&&jee(e),e._onInit&&e._onInit(e)}e._onUpdate=u,e._initted=(!e._op||e._pt)&&!B,p&&n<=0&&S.render(Do,!0,!0)},n3e=function(e,n,r,i,s,a,o){var l=(e._pt&&e._ptCache||(e._ptCache={}))[n],u,c,f,d;if(!l)for(l=e._ptCache[n]=[],f=e._ptLookup,d=e._targets.length;d--;){if(u=f[d][n],u&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==n&&u.fp!==n;)u=u._next;if(!u)return KO=1,e.vars[n]="+=0",L5(e,o),KO=0,1;l.push(u)}for(d=l.length;d--;)c=l[d],u=c._pt||c,u.s=(i||i===0)&&!s?i:u.s+(i||0)+a*u.c,u.c=r-u.s,c.e&&(c.e=Or(r)+us(c.e)),c.b&&(c.b=u.s+us(c.b))},r3e=function(e,n){var r=e[0]?ep(e[0]).harness:0,i=r&&r.aliases,s,a,o,l;if(!i)return n;s=yp({},n);for(a in i)if(a in s)for(l=i[a].split(","),o=l.length;o--;)s[l[o]]=s[a];return s},i3e=function(e,n,r,i){var s=n.ease||i||"power1.inOut",a,o;if(ms(n))o=r[e]||(r[e]=[]),n.forEach(function(l,u){return o.push({t:u/(n.length-1)*100,v:l,e:s})});else for(a in n)o=r[a]||(r[a]=[]),a==="ease"||o.push({t:parseFloat(e),v:n[a],e:s})},q1=function(e,n,r,i,s){return Mr(e)?e.call(n,r,i,s):Ni(e)&&~e.indexOf("random(")?bx(e):e},Uee=R5+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Vee={};ma(Uee+",id,stagger,delay,duration,paused,scrollTrigger",function(t){return Vee[t]=1});var si=function(t){aee(e,t);function e(r,i,s,a){var o;typeof i=="number"&&(s.duration=i,i=s,s=null),o=t.call(this,a?i:H1(i))||this;var l=o.vars,u=l.duration,c=l.delay,f=l.immediateRender,d=l.stagger,h=l.overwrite,p=l.keyframes,m=l.defaults,g=l.scrollTrigger,v=l.yoyoEase,y=i.parent||Sr,b=(ms(r)||lee(r)?jc(r[0]):"length"in i)?[r]:Ro(r),x,w,S,C,_,E,T,k;if(o._targets=b.length?O5(b):GE("GSAP target "+r+" not found. https://greensock.com",!to.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=h,p||d||QS(u)||QS(c)){if(i=o.vars,x=o.timeline=new oa({data:"nested",defaults:m||{},targets:y&&y.data==="nested"?y.vars.targets:b}),x.kill(),x.parent=x._dp=yc(o),x._start=0,d||QS(u)||QS(c)){if(C=b.length,T=d&&Tee(d),Iu(d))for(_ in d)~Uee.indexOf(_)&&(k||(k={}),k[_]=d[_]);for(w=0;w<C;w++)S=jE(i,Vee),S.stagger=0,v&&(S.yoyoEase=v),k&&yp(S,k),E=b[w],S.duration=+q1(u,yc(o),w,E,b),S.delay=(+q1(c,yc(o),w,E,b)||0)-o._delay,!d&&C===1&&S.delay&&(o._delay=c=S.delay,o._start+=c,S.delay=0),x.to(E,S,T?T(w,E,b):0),x._ease=gn.none;x.duration()?u=c=0:o.timeline=0}else if(p){H1(Jo(x.vars.defaults,{ease:"none"})),x._ease=np(p.ease||i.ease||"none");var M=0,A,N,$;if(ms(p))p.forEach(function(D){return x.to(b,D,">")}),x.duration();else{S={};for(_ in p)_==="ease"||_==="easeEach"||i3e(_,p[_],S,p.easeEach);for(_ in S)for(A=S[_].sort(function(D,P){return D.t-P.t}),M=0,w=0;w<A.length;w++)N=A[w],$={ease:N.e,duration:(N.t-(w?A[w-1].t:0))/100*u},$[_]=N.v,x.to(b,$,M),M+=$.duration;x.duration()<u&&x.to({},{duration:u-x.duration()})}}u||o.duration(u=x.duration())}else o.timeline=0;return h===!0&&!A5&&(Hf=yc(o),Sr.killTweensOf(b),Hf=0),uu(y,yc(o),s),i.reversed&&o.reverse(),i.paused&&o.paused(!0),(f||!u&&!p&&o._start===Wi(y._time)&&pa(f)&&OMe(yc(o))&&y.data!=="nested")&&(o._tTime=-Kn,o.render(Math.max(0,-c)||0)),g&&_ee(yc(o),g),o}var n=e.prototype;return n.render=function(i,s,a){var o=this._time,l=this._tDur,u=this._dur,c=i<0,f=i>l-Kn&&!c?l:i<Kn?0:i,d,h,p,m,g,v,y,b,x;if(!u)LMe(this,i,s,a);else if(f!==this._tTime||!i||a||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==c){if(d=f,b=this.timeline,this._repeat){if(m=u+this._rDelay,this._repeat<-1&&c)return this.totalTime(m*100+i,s,a);if(d=Wi(f%m),f===l?(p=this._repeat,d=u):(p=~~(f/m),p&&p===f/m&&(d=u,p--),d>u&&(d=u)),v=this._yoyo&&p&1,v&&(x=this._yEase,d=u-d),g=h0(this._tTime,m),d===o&&!a&&this._initted)return this._tTime=f,this;p!==g&&(b&&this._yEase&&Lee(b,v),this.vars.repeatRefresh&&!v&&!this._lock&&(this._lock=a=1,this.render(Wi(m*p),!0).invalidate()._lock=0))}if(!this._initted){if(See(this,c?i:d,a,s,f))return this._tTime=0,this;if(o!==this._time)return this;if(u!==this._dur)return this.render(i,s,a)}if(this._tTime=f,this._time=d,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=y=(x||this._ease)(d/u),this._from&&(this.ratio=y=1-y),d&&!o&&!s&&!p&&(Oo(this,"onStart"),this._tTime!==f))return this;for(h=this._pt;h;)h.r(y,h.d),h=h._next;b&&b.render(i<0?i:!d&&v?-Kn:b._dur*b._ease(d/this._dur),s,a)||this._startAt&&(this._zTime=i),this._onUpdate&&!s&&(c&&HO(this,i,s,a),Oo(this,"onUpdate")),this._repeat&&p!==g&&this.vars.onRepeat&&!s&&this.parent&&Oo(this,"onRepeat"),(f===this._tDur||!f)&&this._tTime===f&&(c&&!this._onUpdate&&HO(this,i,!0,!0),(i||!u)&&(f===this._tDur&&this._ts>0||!f&&this._ts<0)&&yd(this,1),!s&&!(c&&!o)&&(f||o||v)&&(Oo(this,f===l?"onComplete":"onReverseComplete",!0),this._prom&&!(f<l&&this.timeScale()>0)&&this._prom()))}return this},n.targets=function(){return this._targets},n.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),t.prototype.invalidate.call(this,i)},n.resetTo=function(i,s,a,o){xx||ja.wake(),this._ts||this.play();var l=Math.min(this._dur,(this._dp._time-this._start)*this._ts),u;return this._initted||L5(this,l),u=this._ease(l/this._dur),n3e(this,i,s,a,o,u,l)?this.resetTo(i,s,a,o):(PA(this,0),this.parent||xee(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(i,s){if(s===void 0&&(s="all"),!i&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?v1(this):this;if(this.timeline){var a=this.timeline.totalDuration();return this.timeline.killTweensOf(i,s,Hf&&Hf.vars.overwrite!==!0)._first||v1(this),this.parent&&a!==this.timeline.totalDuration()&&p0(this,this._dur*this.timeline._tDur/a,0,1),this}var o=this._targets,l=i?Ro(i):o,u=this._ptLookup,c=this._pt,f,d,h,p,m,g,v;if((!s||s==="all")&&DMe(o,l))return s==="all"&&(this._pt=0),v1(this);for(f=this._op=this._op||[],s!=="all"&&(Ni(s)&&(m={},ma(s,function(y){return m[y]=1}),s=m),s=r3e(o,s)),v=o.length;v--;)if(~l.indexOf(o[v])){d=u[v],s==="all"?(f[v]=s,p=d,h={}):(h=f[v]=f[v]||{},p=s);for(m in p)g=d&&d[m],g&&((!("kill"in g.d)||g.d.kill(m)===!0)&&FA(this,g,"_pt"),delete d[m]),h!=="all"&&(h[m]=1)}return this._initted&&!this._pt&&c&&v1(this),this},e.to=function(i,s){return new e(i,s,arguments[2])},e.from=function(i,s){return j1(1,arguments)},e.delayedCall=function(i,s,a,o){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:s,onReverseComplete:s,onCompleteParams:a,onReverseCompleteParams:a,callbackScope:o})},e.fromTo=function(i,s,a){return j1(2,arguments)},e.set=function(i,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(i,s)},e.killTweensOf=function(i,s,a){return Sr.killTweensOf(i,s,a)},e}(g0);Jo(si.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});ma("staggerTo,staggerFrom,staggerFromTo",function(t){si[t]=function(){var e=new oa,n=qO.call(arguments,0);return n.splice(t==="staggerFromTo"?5:4,0,0),e[t].apply(e,n)}});var P5=function(e,n,r){return e[n]=r},Wee=function(e,n,r){return e[n](r)},s3e=function(e,n,r,i){return e[n](i.fp,r)},a3e=function(e,n,r){return e.setAttribute(n,r)},z5=function(e,n){return Mr(e[n])?Wee:M5(e[n])&&e.setAttribute?a3e:P5},Gee=function(e,n){return n.set(n.t,n.p,Math.round((n.s+n.c*e)*1e6)/1e6,n)},o3e=function(e,n){return n.set(n.t,n.p,!!(n.s+n.c*e),n)},Hee=function(e,n){var r=n._pt,i="";if(!e&&n.b)i=n.b;else if(e===1&&n.e)i=n.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*e):Math.round((r.s+r.c*e)*1e4)/1e4)+i,r=r._next;i+=n.c}n.set(n.t,n.p,i,n)},B5=function(e,n){for(var r=n._pt;r;)r.r(e,r.d),r=r._next},l3e=function(e,n,r,i){for(var s=this._pt,a;s;)a=s._next,s.p===i&&s.modifier(e,n,r),s=a},u3e=function(e){for(var n=this._pt,r,i;n;)i=n._next,n.p===e&&!n.op||n.op===e?FA(this,n,"_pt"):n.dep||(r=1),n=i;return!r},c3e=function(e,n,r,i){i.mSet(e,n,i.m.call(i.tween,r,i.mt),i)},jee=function(e){for(var n=e._pt,r,i,s,a;n;){for(r=n._next,i=s;i&&i.pr>n.pr;)i=i._next;(n._prev=i?i._prev:a)?n._prev._next=n:s=n,(n._next=i)?i._prev=n:a=n,n=r}e._pt=s},ga=function(){function t(n,r,i,s,a,o,l,u,c){this.t=r,this.s=s,this.c=a,this.p=i,this.r=o||Gee,this.d=l||this,this.set=u||P5,this.pr=c||0,this._next=n,n&&(n._prev=this)}var e=t.prototype;return e.modifier=function(r,i,s){this.mSet=this.mSet||this.set,this.set=c3e,this.m=r,this.mt=s,this.tween=i},t}();ma(R5+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(t){return D5[t]=1});so.TweenMax=so.TweenLite=si;so.TimelineLite=so.TimelineMax=oa;Sr=new oa({sortChildren:!1,defaults:d0,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});to.stringFilter=Oee;var v0=[],dE={},f3e=[],lH=0,vD=function(e){return(dE[e]||f3e).map(function(n){return n()})},ZO=function(){var e=Date.now(),n=[];e-lH>2&&(vD("matchMediaInit"),v0.forEach(function(r){var i=r.queries,s=r.conditions,a,o,l,u;for(o in i)a=Eo.matchMedia(i[o]).matches,a&&(l=1),a!==s[o]&&(s[o]=a,u=1);u&&(r.revert(),l&&n.push(r))}),vD("matchMediaRevert"),n.forEach(function(r){return r.onMatch(r)}),lH=e,vD("matchMedia"))},qee=function(){function t(n,r){this.selector=r&&XO(r),this.data=[],this._r=[],this.isReverted=!1,n&&this.add(n)}var e=t.prototype;return e.add=function(r,i,s){Mr(r)&&(s=i,i=r,r=Mr);var a=this,o=function(){var u=jr,c=a.selector,f;return u&&u!==a&&u.data.push(a),s&&(a.selector=XO(s)),jr=a,f=i.apply(a,arguments),Mr(f)&&a._r.push(f),jr=u,a.selector=c,a.isReverted=!1,f};return a.last=o,r===Mr?o(a):r?a[r]=o:o},e.ignore=function(r){var i=jr;jr=null,r(this),jr=i},e.getTweens=function(){var r=[];return this.data.forEach(function(i){return i instanceof t?r.push.apply(r,i.getTweens()):i instanceof si&&!(i.parent&&i.parent.data==="nested")&&r.push(i)}),r},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(r,i){var s=this;if(r){var a=this.getTweens();this.data.forEach(function(l){l.data==="isFlip"&&(l.revert(),l.getChildren(!0,!0,!1).forEach(function(u){return a.splice(a.indexOf(u),1)}))}),a.map(function(l){return{g:l.globalTime(0),t:l}}).sort(function(l,u){return u.g-l.g||-1}).forEach(function(l){return l.t.revert(r)}),this.data.forEach(function(l){return!(l instanceof g0)&&l.revert&&l.revert(r)}),this._r.forEach(function(l){return l(r,s)}),this.isReverted=!0}else this.data.forEach(function(l){return l.kill&&l.kill()});if(this.clear(),i){var o=v0.indexOf(this);~o&&v0.splice(o,1)}},e.revert=function(r){this.kill(r||{})},t}(),d3e=function(){function t(n){this.contexts=[],this.scope=n}var e=t.prototype;return e.add=function(r,i,s){Iu(r)||(r={matches:r});var a=new qee(0,s||this.scope),o=a.conditions={},l,u,c;this.contexts.push(a),i=a.add("onMatch",i),a.queries=r;for(u in r)u==="all"?c=1:(l=Eo.matchMedia(r[u]),l&&(v0.indexOf(a)<0&&v0.push(a),(o[u]=l.matches)&&(c=1),l.addListener?l.addListener(ZO):l.addEventListener("change",ZO)));return c&&i(a),this},e.revert=function(r){this.kill(r||{})},e.kill=function(r){this.contexts.forEach(function(i){return i.kill(r,!0)})},t}(),XE={registerPlugin:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(function(i){return Iee(i)})},timeline:function(e){return new oa(e)},getTweensOf:function(e,n){return Sr.getTweensOf(e,n)},getProperty:function(e,n,r,i){Ni(e)&&(e=Ro(e)[0]);var s=ep(e||{}).get,a=r?bee:yee;return r==="native"&&(r=""),e&&(n?a((Wa[n]&&Wa[n].get||s)(e,n,r,i)):function(o,l,u){return a((Wa[o]&&Wa[o].get||s)(e,o,l,u))})},quickSetter:function(e,n,r){if(e=Ro(e),e.length>1){var i=e.map(function(c){return xa.quickSetter(c,n,r)}),s=i.length;return function(c){for(var f=s;f--;)i[f](c)}}e=e[0]||{};var a=Wa[n],o=ep(e),l=o.harness&&(o.harness.aliases||{})[n]||n,u=a?function(c){var f=new a;$g._pt=0,f.init(e,r?c+r:c,$g,0,[e]),f.render(1,f),$g._pt&&B5(1,$g)}:o.set(e,l);return a?u:function(c){return u(e,l,r?c+r:c,o,1)}},quickTo:function(e,n,r){var i,s=xa.to(e,yp((i={},i[n]="+=0.1",i.paused=!0,i),r||{})),a=function(l,u,c){return s.resetTo(n,l,u,c)};return a.tween=s,a},isTweening:function(e){return Sr.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=np(e.ease,d0.ease)),rH(d0,e||{})},config:function(e){return rH(to,e||{})},registerEffect:function(e){var n=e.name,r=e.effect,i=e.plugins,s=e.defaults,a=e.extendTimeline;(i||"").split(",").forEach(function(o){return o&&!Wa[o]&&!so[o]&&GE(n+" effect requires "+o+" plugin.")}),hD[n]=function(o,l,u){return r(Ro(o),Jo(l||{},s),u)},a&&(oa.prototype[n]=function(o,l,u){return this.add(hD[n](o,Iu(l)?l:(u=l)&&{},this),u)})},registerEase:function(e,n){gn[e]=np(n)},parseEase:function(e,n){return arguments.length?np(e,n):gn},getById:function(e){return Sr.getById(e)},exportRoot:function(e,n){e===void 0&&(e={});var r=new oa(e),i,s;for(r.smoothChildTiming=pa(e.smoothChildTiming),Sr.remove(r),r._dp=0,r._time=r._tTime=Sr._time,i=Sr._first;i;)s=i._next,(n||!(!i._dur&&i instanceof si&&i.vars.onComplete===i._targets[0]))&&uu(r,i,i._start-i._delay),i=s;return uu(Sr,r,0),r},context:function(e,n){return e?new qee(e,n):jr},matchMedia:function(e){return new d3e(e)},matchMediaRefresh:function(){return v0.forEach(function(e){var n=e.conditions,r,i;for(i in n)n[i]&&(n[i]=!1,r=1);r&&e.revert()})||ZO()},addEventListener:function(e,n){var r=dE[e]||(dE[e]=[]);~r.indexOf(n)||r.push(n)},removeEventListener:function(e,n){var r=dE[e],i=r&&r.indexOf(n);i>=0&&r.splice(i,1)},utils:{wrap:HMe,wrapYoyo:jMe,distribute:Tee,random:Aee,snap:kee,normalize:GMe,getUnit:us,clamp:BMe,splitColor:Dee,toArray:Ro,selector:XO,mapRange:Nee,pipe:VMe,unitize:WMe,interpolate:qMe,shuffle:Eee},install:hee,effects:hD,ticker:ja,updateRoot:oa.updateRoot,plugins:Wa,globalTimeline:Sr,core:{PropTween:ga,globals:pee,Tween:si,Timeline:oa,Animation:g0,getCache:ep,_removeLinkedListItem:FA,reverting:function(){return ps},context:function(e){return e&&jr&&(jr.data.push(e),e._ctx=jr),jr},suppressOverwrites:function(e){return A5=e}}};ma("to,from,fromTo,delayedCall,set,killTweensOf",function(t){return XE[t]=si[t]});ja.add(oa.updateRoot);$g=XE.to({},{duration:0});var h3e=function(e,n){for(var r=e._pt;r&&r.p!==n&&r.op!==n&&r.fp!==n;)r=r._next;return r},p3e=function(e,n){var r=e._targets,i,s,a;for(i in n)for(s=r.length;s--;)a=e._ptLookup[s][i],a&&(a=a.d)&&(a._pt&&(a=h3e(a,i)),a&&a.modifier&&a.modifier(n[i],e,r[s],i))},yD=function(e,n){return{name:e,rawVars:1,init:function(i,s,a){a._onInit=function(o){var l,u;if(Ni(s)&&(l={},ma(s,function(c){return l[c]=1}),s=l),n){l={};for(u in s)l[u]=n(s[u]);s=l}p3e(o,s)}}}},xa=XE.registerPlugin({name:"attr",init:function(e,n,r,i,s){var a,o,l;this.tween=r;for(a in n)l=e.getAttribute(a)||"",o=this.add(e,"setAttribute",(l||0)+"",n[a],i,s,0,0,a),o.op=a,o.b=l,this._props.push(a)},render:function(e,n){for(var r=n._pt;r;)ps?r.set(r.t,r.p,r.b,r):r.r(e,r.d),r=r._next}},{name:"endArray",init:function(e,n){for(var r=n.length;r--;)this.add(e,r,e[r]||0,n[r],0,0,0,0,0,1)}},yD("roundProps",YO),yD("modifiers"),yD("snap",kee))||XE;si.version=oa.version=xa.version="3.11.5";dee=1;N5()&&m0();gn.Power0;gn.Power1;gn.Power2;gn.Power3;gn.Power4;gn.Linear;gn.Quad;gn.Cubic;gn.Quart;gn.Quint;gn.Strong;gn.Elastic;gn.Back;gn.SteppedEase;gn.Bounce;gn.Sine;gn.Expo;gn.Circ;/*!
 * CSSPlugin 3.11.5
 * https://greensock.com
 *
 * Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var uH,jf,Vg,U5,jh,cH,V5,m3e=function(){return typeof window<"u"},qc={},$h=180/Math.PI,Wg=Math.PI/180,lg=Math.atan2,fH=1e8,W5=/([A-Z])/g,g3e=/(left|right|width|margin|padding|x)/i,v3e=/[\s,\(]\S/,mu={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},JO=function(e,n){return n.set(n.t,n.p,Math.round((n.s+n.c*e)*1e4)/1e4+n.u,n)},y3e=function(e,n){return n.set(n.t,n.p,e===1?n.e:Math.round((n.s+n.c*e)*1e4)/1e4+n.u,n)},b3e=function(e,n){return n.set(n.t,n.p,e?Math.round((n.s+n.c*e)*1e4)/1e4+n.u:n.b,n)},x3e=function(e,n){var r=n.s+n.c*e;n.set(n.t,n.p,~~(r+(r<0?-.5:.5))+n.u,n)},Xee=function(e,n){return n.set(n.t,n.p,e?n.e:n.b,n)},Yee=function(e,n){return n.set(n.t,n.p,e!==1?n.b:n.e,n)},w3e=function(e,n,r){return e.style[n]=r},_3e=function(e,n,r){return e.style.setProperty(n,r)},S3e=function(e,n,r){return e._gsap[n]=r},C3e=function(e,n,r){return e._gsap.scaleX=e._gsap.scaleY=r},E3e=function(e,n,r,i,s){var a=e._gsap;a.scaleX=a.scaleY=r,a.renderTransform(s,a)},T3e=function(e,n,r,i,s){var a=e._gsap;a[n]=r,a.renderTransform(s,a)},Cr="transform",Nl=Cr+"Origin",k3e=function t(e,n){var r=this,i=this.target,s=i.style;if(e in qc){if(this.tfm=this.tfm||{},e!=="transform")e=mu[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return r.tfm[a]=xc(i,a)}):this.tfm[e]=i._gsap.x?i._gsap[e]:xc(i,e);else return mu.transform.split(",").forEach(function(a){return t.call(r,a,n)});if(this.props.indexOf(Cr)>=0)return;i._gsap.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(Nl,n,"")),e=Cr}(s||n)&&this.props.push(e,n,s[e])},Kee=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},A3e=function(){var e=this.props,n=this.target,r=n.style,i=n._gsap,s,a;for(s=0;s<e.length;s+=3)e[s+1]?n[e[s]]=e[s+2]:e[s+2]?r[e[s]]=e[s+2]:r.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(W5,"-$1").toLowerCase());if(this.tfm){for(a in this.tfm)i[a]=this.tfm[a];i.svg&&(i.renderTransform(),n.setAttribute("data-svg-origin",this.svgo||"")),s=V5(),(!s||!s.isStart)&&!r[Cr]&&(Kee(r),i.uncache=1)}},Zee=function(e,n){var r={target:e,props:[],revert:A3e,save:k3e};return e._gsap||xa.core.getCache(e),n&&n.split(",").forEach(function(i){return r.save(i)}),r},Jee,QO=function(e,n){var r=jf.createElementNS?jf.createElementNS((n||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):jf.createElement(e);return r.style?r:jf.createElement(e)},_u=function t(e,n,r){var i=getComputedStyle(e);return i[n]||i.getPropertyValue(n.replace(W5,"-$1").toLowerCase())||i.getPropertyValue(n)||!r&&t(e,y0(n)||n,1)||""},dH="O,Moz,ms,Ms,Webkit".split(","),y0=function(e,n,r){var i=n||jh,s=i.style,a=5;if(e in s&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);a--&&!(dH[a]+e in s););return a<0?null:(a===3?"ms":a>=0?dH[a]:"")+e},eF=function(){m3e()&&window.document&&(uH=window,jf=uH.document,Vg=jf.documentElement,jh=QO("div")||{style:{}},QO("div"),Cr=y0(Cr),Nl=Cr+"Origin",jh.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Jee=!!y0("perspective"),V5=xa.core.reverting,U5=1)},bD=function t(e){var n=QO("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=this.parentNode,i=this.nextSibling,s=this.style.cssText,a;if(Vg.appendChild(n),n.appendChild(this),this.style.display="block",e)try{a=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=t}catch{}else this._gsapBBox&&(a=this._gsapBBox());return r&&(i?r.insertBefore(this,i):r.appendChild(this)),Vg.removeChild(n),this.style.cssText=s,a},hH=function(e,n){for(var r=n.length;r--;)if(e.hasAttribute(n[r]))return e.getAttribute(n[r])},Qee=function(e){var n;try{n=e.getBBox()}catch{n=bD.call(e,!0)}return n&&(n.width||n.height)||e.getBBox===bD||(n=bD.call(e,!0)),n&&!n.width&&!n.x&&!n.y?{x:+hH(e,["x","cx","x1"])||0,y:+hH(e,["y","cy","y1"])||0,width:0,height:0}:n},ete=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&Qee(e))},wx=function(e,n){if(n){var r=e.style;n in qc&&n!==Nl&&(n=Cr),r.removeProperty?((n.substr(0,2)==="ms"||n.substr(0,6)==="webkit")&&(n="-"+n),r.removeProperty(n.replace(W5,"-$1").toLowerCase())):r.removeAttribute(n)}},qf=function(e,n,r,i,s,a){var o=new ga(e._pt,n,r,0,1,a?Yee:Xee);return e._pt=o,o.b=i,o.e=s,e._props.push(r),o},pH={deg:1,rad:1,turn:1},M3e={grid:1,flex:1},bd=function t(e,n,r,i){var s=parseFloat(r)||0,a=(r+"").trim().substr((s+"").length)||"px",o=jh.style,l=g3e.test(n),u=e.tagName.toLowerCase()==="svg",c=(u?"client":"offset")+(l?"Width":"Height"),f=100,d=i==="px",h=i==="%",p,m,g,v;return i===a||!s||pH[i]||pH[a]?s:(a!=="px"&&!d&&(s=t(e,n,r,"px")),v=e.getCTM&&ete(e),(h||a==="%")&&(qc[n]||~n.indexOf("adius"))?(p=v?e.getBBox()[l?"width":"height"]:e[c],Or(h?s/p*f:s/100*p)):(o[l?"width":"height"]=f+(d?a:i),m=~n.indexOf("adius")||i==="em"&&e.appendChild&&!u?e:e.parentNode,v&&(m=(e.ownerSVGElement||{}).parentNode),(!m||m===jf||!m.appendChild)&&(m=jf.body),g=m._gsap,g&&h&&g.width&&l&&g.time===ja.time&&!g.uncache?Or(s/g.width*f):((h||a==="%")&&!M3e[_u(m,"display")]&&(o.position=_u(e,"position")),m===e&&(o.position="static"),m.appendChild(jh),p=jh[c],m.removeChild(jh),o.position="absolute",l&&h&&(g=ep(m),g.time=ja.time,g.width=m[c]),Or(d?p*s/f:p&&s?f/p*s:0))))},xc=function(e,n,r,i){var s;return U5||eF(),n in mu&&n!=="transform"&&(n=mu[n],~n.indexOf(",")&&(n=n.split(",")[0])),qc[n]&&n!=="transform"?(s=Sx(e,i),s=n!=="transformOrigin"?s[n]:s.svg?s.origin:KE(_u(e,Nl))+" "+s.zOrigin+"px"):(s=e.style[n],(!s||s==="auto"||i||~(s+"").indexOf("calc("))&&(s=YE[n]&&YE[n](e,n,r)||_u(e,n)||gee(e,n)||(n==="opacity"?1:0))),r&&!~(s+"").trim().indexOf(" ")?bd(e,n,s,r)+r:s},N3e=function(e,n,r,i){if(!r||r==="none"){var s=y0(n,e,1),a=s&&_u(e,s,1);a&&a!==r?(n=s,r=a):n==="borderColor"&&(r=_u(e,"borderTopColor"))}var o=new ga(this._pt,e.style,n,0,1,Hee),l=0,u=0,c,f,d,h,p,m,g,v,y,b,x,w;if(o.b=r,o.e=i,r+="",i+="",i==="auto"&&(e.style[n]=i,i=_u(e,n)||i,e.style[n]=r),c=[r,i],Oee(c),r=c[0],i=c[1],d=r.match(Ng)||[],w=i.match(Ng)||[],w.length){for(;f=Ng.exec(i);)g=f[0],y=i.substring(l,f.index),p?p=(p+1)%5:(y.substr(-5)==="rgba("||y.substr(-5)==="hsla(")&&(p=1),g!==(m=d[u++]||"")&&(h=parseFloat(m)||0,x=m.substr((h+"").length),g.charAt(1)==="="&&(g=Ug(h,g)+x),v=parseFloat(g),b=g.substr((v+"").length),l=Ng.lastIndex-b.length,b||(b=b||to.units[n]||x,l===i.length&&(i+=b,o.e+=b)),x!==b&&(h=bd(e,n,m,b)||0),o._pt={_next:o._pt,p:y||u===1?y:",",s:h,c:v-h,m:p&&p<4||n==="zIndex"?Math.round:0});o.c=l<i.length?i.substring(l,i.length):""}else o.r=n==="display"&&i==="none"?Yee:Xee;return cee.test(i)&&(o.e=0),this._pt=o,o},mH={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},$3e=function(e){var n=e.split(" "),r=n[0],i=n[1]||"50%";return(r==="top"||r==="bottom"||i==="left"||i==="right")&&(e=r,r=i,i=e),n[0]=mH[r]||r,n[1]=mH[i]||i,n.join(" ")},I3e=function(e,n){if(n.tween&&n.tween._time===n.tween._dur){var r=n.t,i=r.style,s=n.u,a=r._gsap,o,l,u;if(s==="all"||s===!0)i.cssText="",l=1;else for(s=s.split(","),u=s.length;--u>-1;)o=s[u],qc[o]&&(l=1,o=o==="transformOrigin"?Nl:Cr),wx(r,o);l&&(wx(r,Cr),a&&(a.svg&&r.removeAttribute("transform"),Sx(r,1),a.uncache=1,Kee(i)))}},YE={clearProps:function(e,n,r,i,s){if(s.data!=="isFromStart"){var a=e._pt=new ga(e._pt,n,r,0,0,I3e);return a.u=i,a.pr=-10,a.tween=s,e._props.push(r),1}}},_x=[1,0,0,1,0,0],tte={},nte=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},gH=function(e){var n=_u(e,Cr);return nte(n)?_x:n.substr(7).match(uee).map(Or)},G5=function(e,n){var r=e._gsap||ep(e),i=e.style,s=gH(e),a,o,l,u;return r.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?_x:s):(s===_x&&!e.offsetParent&&e!==Vg&&!r.svg&&(l=i.display,i.display="block",a=e.parentNode,(!a||!e.offsetParent)&&(u=1,o=e.nextElementSibling,Vg.appendChild(e)),s=gH(e),l?i.display=l:wx(e,"display"),u&&(o?a.insertBefore(e,o):a?a.appendChild(e):Vg.removeChild(e))),n&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},tF=function(e,n,r,i,s,a){var o=e._gsap,l=s||G5(e,!0),u=o.xOrigin||0,c=o.yOrigin||0,f=o.xOffset||0,d=o.yOffset||0,h=l[0],p=l[1],m=l[2],g=l[3],v=l[4],y=l[5],b=n.split(" "),x=parseFloat(b[0])||0,w=parseFloat(b[1])||0,S,C,_,E;r?l!==_x&&(C=h*g-p*m)&&(_=x*(g/C)+w*(-m/C)+(m*y-g*v)/C,E=x*(-p/C)+w*(h/C)-(h*y-p*v)/C,x=_,w=E):(S=Qee(e),x=S.x+(~b[0].indexOf("%")?x/100*S.width:x),w=S.y+(~(b[1]||b[0]).indexOf("%")?w/100*S.height:w)),i||i!==!1&&o.smooth?(v=x-u,y=w-c,o.xOffset=f+(v*h+y*m)-v,o.yOffset=d+(v*p+y*g)-y):o.xOffset=o.yOffset=0,o.xOrigin=x,o.yOrigin=w,o.smooth=!!i,o.origin=n,o.originIsAbsolute=!!r,e.style[Nl]="0px 0px",a&&(qf(a,o,"xOrigin",u,x),qf(a,o,"yOrigin",c,w),qf(a,o,"xOffset",f,o.xOffset),qf(a,o,"yOffset",d,o.yOffset)),e.setAttribute("data-svg-origin",x+" "+w)},Sx=function(e,n){var r=e._gsap||new zee(e);if("x"in r&&!n&&!r.uncache)return r;var i=e.style,s=r.scaleX<0,a="px",o="deg",l=getComputedStyle(e),u=_u(e,Nl)||"0",c,f,d,h,p,m,g,v,y,b,x,w,S,C,_,E,T,k,M,A,N,$,D,P,O,B,H,te,q,Z,ne,G;return c=f=d=m=g=v=y=b=x=0,h=p=1,r.svg=!!(e.getCTM&&ete(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(i[Cr]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[Cr]!=="none"?l[Cr]:"")),i.scale=i.rotate=i.translate="none"),C=G5(e,r.svg),r.svg&&(r.uncache?(O=e.getBBox(),u=r.xOrigin-O.x+"px "+(r.yOrigin-O.y)+"px",P=""):P=!n&&e.getAttribute("data-svg-origin"),tF(e,P||u,!!P||r.originIsAbsolute,r.smooth!==!1,C)),w=r.xOrigin||0,S=r.yOrigin||0,C!==_x&&(k=C[0],M=C[1],A=C[2],N=C[3],c=$=C[4],f=D=C[5],C.length===6?(h=Math.sqrt(k*k+M*M),p=Math.sqrt(N*N+A*A),m=k||M?lg(M,k)*$h:0,y=A||N?lg(A,N)*$h+m:0,y&&(p*=Math.abs(Math.cos(y*Wg))),r.svg&&(c-=w-(w*k+S*A),f-=S-(w*M+S*N))):(G=C[6],Z=C[7],H=C[8],te=C[9],q=C[10],ne=C[11],c=C[12],f=C[13],d=C[14],_=lg(G,q),g=_*$h,_&&(E=Math.cos(-_),T=Math.sin(-_),P=$*E+H*T,O=D*E+te*T,B=G*E+q*T,H=$*-T+H*E,te=D*-T+te*E,q=G*-T+q*E,ne=Z*-T+ne*E,$=P,D=O,G=B),_=lg(-A,q),v=_*$h,_&&(E=Math.cos(-_),T=Math.sin(-_),P=k*E-H*T,O=M*E-te*T,B=A*E-q*T,ne=N*T+ne*E,k=P,M=O,A=B),_=lg(M,k),m=_*$h,_&&(E=Math.cos(_),T=Math.sin(_),P=k*E+M*T,O=$*E+D*T,M=M*E-k*T,D=D*E-$*T,k=P,$=O),g&&Math.abs(g)+Math.abs(m)>359.9&&(g=m=0,v=180-v),h=Or(Math.sqrt(k*k+M*M+A*A)),p=Or(Math.sqrt(D*D+G*G)),_=lg($,D),y=Math.abs(_)>2e-4?_*$h:0,x=ne?1/(ne<0?-ne:ne):0),r.svg&&(P=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!nte(_u(e,Cr)),P&&e.setAttribute("transform",P))),Math.abs(y)>90&&Math.abs(y)<270&&(s?(h*=-1,y+=m<=0?180:-180,m+=m<=0?180:-180):(p*=-1,y+=y<=0?180:-180)),n=n||r.uncache,r.x=c-((r.xPercent=c&&(!n&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-c)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+a,r.y=f-((r.yPercent=f&&(!n&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-f)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+a,r.z=d+a,r.scaleX=Or(h),r.scaleY=Or(p),r.rotation=Or(m)+o,r.rotationX=Or(g)+o,r.rotationY=Or(v)+o,r.skewX=y+o,r.skewY=b+o,r.transformPerspective=x+a,(r.zOrigin=parseFloat(u.split(" ")[2])||0)&&(i[Nl]=KE(u)),r.xOffset=r.yOffset=0,r.force3D=to.force3D,r.renderTransform=r.svg?R3e:Jee?rte:D3e,r.uncache=0,r},KE=function(e){return(e=e.split(" "))[0]+" "+e[1]},xD=function(e,n,r){var i=us(n);return Or(parseFloat(n)+parseFloat(bd(e,"x",r+"px",i)))+i},D3e=function(e,n){n.z="0px",n.rotationY=n.rotationX="0deg",n.force3D=0,rte(e,n)},dh="0deg",Db="0px",hh=") ",rte=function(e,n){var r=n||this,i=r.xPercent,s=r.yPercent,a=r.x,o=r.y,l=r.z,u=r.rotation,c=r.rotationY,f=r.rotationX,d=r.skewX,h=r.skewY,p=r.scaleX,m=r.scaleY,g=r.transformPerspective,v=r.force3D,y=r.target,b=r.zOrigin,x="",w=v==="auto"&&e&&e!==1||v===!0;if(b&&(f!==dh||c!==dh)){var S=parseFloat(c)*Wg,C=Math.sin(S),_=Math.cos(S),E;S=parseFloat(f)*Wg,E=Math.cos(S),a=xD(y,a,C*E*-b),o=xD(y,o,-Math.sin(S)*-b),l=xD(y,l,_*E*-b+b)}g!==Db&&(x+="perspective("+g+hh),(i||s)&&(x+="translate("+i+"%, "+s+"%) "),(w||a!==Db||o!==Db||l!==Db)&&(x+=l!==Db||w?"translate3d("+a+", "+o+", "+l+") ":"translate("+a+", "+o+hh),u!==dh&&(x+="rotate("+u+hh),c!==dh&&(x+="rotateY("+c+hh),f!==dh&&(x+="rotateX("+f+hh),(d!==dh||h!==dh)&&(x+="skew("+d+", "+h+hh),(p!==1||m!==1)&&(x+="scale("+p+", "+m+hh),y.style[Cr]=x||"translate(0, 0)"},R3e=function(e,n){var r=n||this,i=r.xPercent,s=r.yPercent,a=r.x,o=r.y,l=r.rotation,u=r.skewX,c=r.skewY,f=r.scaleX,d=r.scaleY,h=r.target,p=r.xOrigin,m=r.yOrigin,g=r.xOffset,v=r.yOffset,y=r.forceCSS,b=parseFloat(a),x=parseFloat(o),w,S,C,_,E;l=parseFloat(l),u=parseFloat(u),c=parseFloat(c),c&&(c=parseFloat(c),u+=c,l+=c),l||u?(l*=Wg,u*=Wg,w=Math.cos(l)*f,S=Math.sin(l)*f,C=Math.sin(l-u)*-d,_=Math.cos(l-u)*d,u&&(c*=Wg,E=Math.tan(u-c),E=Math.sqrt(1+E*E),C*=E,_*=E,c&&(E=Math.tan(c),E=Math.sqrt(1+E*E),w*=E,S*=E)),w=Or(w),S=Or(S),C=Or(C),_=Or(_)):(w=f,_=d,S=C=0),(b&&!~(a+"").indexOf("px")||x&&!~(o+"").indexOf("px"))&&(b=bd(h,"x",a,"px"),x=bd(h,"y",o,"px")),(p||m||g||v)&&(b=Or(b+p-(p*w+m*C)+g),x=Or(x+m-(p*S+m*_)+v)),(i||s)&&(E=h.getBBox(),b=Or(b+i/100*E.width),x=Or(x+s/100*E.height)),E="matrix("+w+","+S+","+C+","+_+","+b+","+x+")",h.setAttribute("transform",E),y&&(h.style[Cr]=E)},O3e=function(e,n,r,i,s){var a=360,o=Ni(s),l=parseFloat(s)*(o&&~s.indexOf("rad")?$h:1),u=l-i,c=i+u+"deg",f,d;return o&&(f=s.split("_")[1],f==="short"&&(u%=a,u!==u%(a/2)&&(u+=u<0?a:-a)),f==="cw"&&u<0?u=(u+a*fH)%a-~~(u/a)*a:f==="ccw"&&u>0&&(u=(u-a*fH)%a-~~(u/a)*a)),e._pt=d=new ga(e._pt,n,r,i,u,y3e),d.e=c,d.u="deg",e._props.push(r),d},vH=function(e,n){for(var r in n)e[r]=n[r];return e},F3e=function(e,n,r){var i=vH({},r._gsap),s="perspective,force3D,transformOrigin,svgOrigin",a=r.style,o,l,u,c,f,d,h,p;i.svg?(u=r.getAttribute("transform"),r.setAttribute("transform",""),a[Cr]=n,o=Sx(r,1),wx(r,Cr),r.setAttribute("transform",u)):(u=getComputedStyle(r)[Cr],a[Cr]=n,o=Sx(r,1),a[Cr]=u);for(l in qc)u=i[l],c=o[l],u!==c&&s.indexOf(l)<0&&(h=us(u),p=us(c),f=h!==p?bd(r,l,u,p):parseFloat(u),d=parseFloat(c),e._pt=new ga(e._pt,o,l,f,d-f,JO),e._pt.u=p||0,e._props.push(l));vH(o,i)};ma("padding,margin,Width,Radius",function(t,e){var n="Top",r="Right",i="Bottom",s="Left",a=(e<3?[n,r,i,s]:[n+s,n+r,i+r,i+s]).map(function(o){return e<2?t+o:"border"+o+t});YE[e>1?"border"+t:t]=function(o,l,u,c,f){var d,h;if(arguments.length<4)return d=a.map(function(p){return xc(o,p,u)}),h=d.join(" "),h.split(d[0]).length===5?d[0]:h;d=(c+"").split(" "),h={},a.forEach(function(p,m){return h[p]=d[m]=d[m]||d[(m-1)/2|0]}),o.init(l,h,f)}});var ite={name:"css",register:eF,targetTest:function(e){return e.style&&e.nodeType},init:function(e,n,r,i,s){var a=this._props,o=e.style,l=r.vars.startAt,u,c,f,d,h,p,m,g,v,y,b,x,w,S,C,_;U5||eF(),this.styles=this.styles||Zee(e),_=this.styles.props,this.tween=r;for(m in n)if(m!=="autoRound"&&(c=n[m],!(Wa[m]&&Bee(m,n,r,i,e,s)))){if(h=typeof c,p=YE[m],h==="function"&&(c=c.call(r,i,e,s),h=typeof c),h==="string"&&~c.indexOf("random(")&&(c=bx(c)),p)p(this,e,m,c,r)&&(C=1);else if(m.substr(0,2)==="--")u=(getComputedStyle(e).getPropertyValue(m)+"").trim(),c+="",ld.lastIndex=0,ld.test(u)||(g=us(u),v=us(c)),v?g!==v&&(u=bd(e,m,u,v)+v):g&&(c+=g),this.add(o,"setProperty",u,c,i,s,0,0,m),a.push(m),_.push(m,0,o[m]);else if(h!=="undefined"){if(l&&m in l?(u=typeof l[m]=="function"?l[m].call(r,i,e,s):l[m],Ni(u)&&~u.indexOf("random(")&&(u=bx(u)),us(u+"")||(u+=to.units[m]||us(xc(e,m))||""),(u+"").charAt(1)==="="&&(u=xc(e,m))):u=xc(e,m),d=parseFloat(u),y=h==="string"&&c.charAt(1)==="="&&c.substr(0,2),y&&(c=c.substr(2)),f=parseFloat(c),m in mu&&(m==="autoAlpha"&&(d===1&&xc(e,"visibility")==="hidden"&&f&&(d=0),_.push("visibility",0,o.visibility),qf(this,o,"visibility",d?"inherit":"hidden",f?"inherit":"hidden",!f)),m!=="scale"&&m!=="transform"&&(m=mu[m],~m.indexOf(",")&&(m=m.split(",")[0]))),b=m in qc,b){if(this.styles.save(m),x||(w=e._gsap,w.renderTransform&&!n.parseTransform||Sx(e,n.parseTransform),S=n.smoothOrigin!==!1&&w.smooth,x=this._pt=new ga(this._pt,o,Cr,0,1,w.renderTransform,w,0,-1),x.dep=1),m==="scale")this._pt=new ga(this._pt,w,"scaleY",w.scaleY,(y?Ug(w.scaleY,y+f):f)-w.scaleY||0,JO),this._pt.u=0,a.push("scaleY",m),m+="X";else if(m==="transformOrigin"){_.push(Nl,0,o[Nl]),c=$3e(c),w.svg?tF(e,c,0,S,0,this):(v=parseFloat(c.split(" ")[2])||0,v!==w.zOrigin&&qf(this,w,"zOrigin",w.zOrigin,v),qf(this,o,m,KE(u),KE(c)));continue}else if(m==="svgOrigin"){tF(e,c,1,S,0,this);continue}else if(m in tte){O3e(this,w,m,d,y?Ug(d,y+c):c);continue}else if(m==="smoothOrigin"){qf(this,w,"smooth",w.smooth,c);continue}else if(m==="force3D"){w[m]=c;continue}else if(m==="transform"){F3e(this,c,e);continue}}else m in o||(m=y0(m)||m);if(b||(f||f===0)&&(d||d===0)&&!v3e.test(c)&&m in o)g=(u+"").substr((d+"").length),f||(f=0),v=us(c)||(m in to.units?to.units[m]:g),g!==v&&(d=bd(e,m,u,v)),this._pt=new ga(this._pt,b?w:o,m,d,(y?Ug(d,y+f):f)-d,!b&&(v==="px"||m==="zIndex")&&n.autoRound!==!1?x3e:JO),this._pt.u=v||0,g!==v&&v!=="%"&&(this._pt.b=u,this._pt.r=b3e);else if(m in o)N3e.call(this,e,m,u,y?y+c:c);else if(m in e)this.add(e,m,u||e[m],y?y+c:c,i,s);else if(m!=="parseTransform"){I5(m,c);continue}b||(m in o?_.push(m,0,o[m]):_.push(m,1,u||e[m])),a.push(m)}}C&&jee(this)},render:function(e,n){if(n.tween._time||!V5())for(var r=n._pt;r;)r.r(e,r.d),r=r._next;else n.styles.revert()},get:xc,aliases:mu,getSetter:function(e,n,r){var i=mu[n];return i&&i.indexOf(",")<0&&(n=i),n in qc&&n!==Nl&&(e._gsap.x||xc(e,"x"))?r&&cH===r?n==="scale"?C3e:S3e:(cH=r||{})&&(n==="scale"?E3e:T3e):e.style&&!M5(e.style[n])?w3e:~n.indexOf("-")?_3e:z5(e,n)},core:{_removeProperty:wx,_getMatrix:G5}};xa.utils.checkPrefix=y0;xa.core.getStyleSaver=Zee;(function(t,e,n,r){var i=ma(t+","+e+","+n,function(s){qc[s]=1});ma(e,function(s){to.units[s]="deg",tte[s]=1}),mu[i[13]]=t+","+e,ma(r,function(s){var a=s.split(":");mu[a[1]]=i[a[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");ma("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(t){to.units[t]="px"});xa.registerPlugin(ite);var hE=xa.registerPlugin(ite)||xa;hE.core.Tween;const L3e=t=>(sl("data-v-9e1cf1f3"),t=t(),al(),t),P3e={class:"main"},z3e=L3e(()=>V("div",{class:"threeshow"},null,-1)),B3e=[z3e],U3e=Zi({__name:"threeDemo",setup(t){return Wl(()=>{const e=new vMe,n=new Mo(75,window.innerWidth/window.innerHeight,.1,1e3);n.position.set(0,0,10),e.add(n);const r=new mv(1,1,1),i=new S5({color:16776960}),s=new pu(r,i),a=new T5({antialias:!0});window.innerWidth<=460?a.setSize(340,400):a.setSize(672,400);const o=new SMe(n,a.domElement);o.enableDamping=!0,new _Me(10),s.position.x=0,s.scale.set(1,1,1),s.scale.x=2,hE.to(s.position,{x:5,duration:5,repeat:2,yoyo:!0,onComplete:()=>{console.log("动画完成")},onStart:()=>{console.log("动画开始")}}),hE.to(s.rotation,{x:2*Math.PI,duration:5});for(let f=0;f<50;f++){const d=new qu,h=new Float32Array(9);for(let v=0;v<9;v++)h[v]=Math.random()*4-2;d.setAttribute("position",new Al(h,3));let p=new Vn(Math.random(),Math.random(),Math.random());const m=new k5({color:p,linewidth:2,linecap:"butt",linejoin:"butt"}),g=new pu(d,m);hE.to(g.rotation,{y:2*Math.PI,duration:3,repeat:-1,yoyo:!0}),e.add(g)}const l=new wMe(268435455,.5);e.add(l);function u(){o.update(),a.render(e,n),requestAnimationFrame(u)}u(),window.addEventListener("resize",()=>{n.aspect=window.innerWidth/window.innerHeight,n.updateProjectionMatrix(),a.setPixelRatio(window.devicePixelRatio)}),document.querySelector(".threeshow").appendChild(a.domElement)}),(e,n)=>(De(),Re("div",P3e,B3e))}});const V3e=xs(U3e,[["__scopeId","data-v-9e1cf1f3"]]);function yH(t){return t!==null&&typeof t=="object"&&"constructor"in t&&t.constructor===Object}function H5(t={},e={}){Object.keys(e).forEach(n=>{typeof t[n]>"u"?t[n]=e[n]:yH(e[n])&&yH(t[n])&&Object.keys(e[n]).length>0&&H5(t[n],e[n])})}const ste={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Su(){const t=typeof document<"u"?document:{};return H5(t,ste),t}const W3e={document:ste,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(t){return typeof setTimeout>"u"?(t(),null):setTimeout(t,0)},cancelAnimationFrame(t){typeof setTimeout>"u"||clearTimeout(t)}};function uo(){const t=typeof window<"u"?window:{};return H5(t,W3e),t}function G3e(t){const e=t;Object.keys(e).forEach(n=>{try{e[n]=null}catch{}try{delete e[n]}catch{}})}function nF(t,e=0){return setTimeout(t,e)}function Cx(){return Date.now()}function H3e(t){const e=uo();let n;return e.getComputedStyle&&(n=e.getComputedStyle(t,null)),!n&&t.currentStyle&&(n=t.currentStyle),n||(n=t.style),n}function j3e(t,e="x"){const n=uo();let r,i,s;const a=H3e(t);return n.WebKitCSSMatrix?(i=a.transform||a.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map(o=>o.replace(",",".")).join(", ")),s=new n.WebKitCSSMatrix(i==="none"?"":i)):(s=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),r=s.toString().split(",")),e==="x"&&(n.WebKitCSSMatrix?i=s.m41:r.length===16?i=parseFloat(r[12]):i=parseFloat(r[4])),e==="y"&&(n.WebKitCSSMatrix?i=s.m42:r.length===16?i=parseFloat(r[13]):i=parseFloat(r[5])),i||0}function eC(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function q3e(t){return typeof window<"u"&&typeof window.HTMLElement<"u"?t instanceof HTMLElement:t&&(t.nodeType===1||t.nodeType===11)}function Ga(...t){const e=Object(t[0]),n=["__proto__","constructor","prototype"];for(let r=1;r<t.length;r+=1){const i=t[r];if(i!=null&&!q3e(i)){const s=Object.keys(Object(i)).filter(a=>n.indexOf(a)<0);for(let a=0,o=s.length;a<o;a+=1){const l=s[a],u=Object.getOwnPropertyDescriptor(i,l);u!==void 0&&u.enumerable&&(eC(e[l])&&eC(i[l])?i[l].__swiper__?e[l]=i[l]:Ga(e[l],i[l]):!eC(e[l])&&eC(i[l])?(e[l]={},i[l].__swiper__?e[l]=i[l]:Ga(e[l],i[l])):e[l]=i[l])}}}return e}function tC(t,e,n){t.style.setProperty(e,n)}function ate({swiper:t,targetPosition:e,side:n}){const r=uo(),i=-t.translate;let s=null,a;const o=t.params.speed;t.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(t.cssModeFrameID);const l=e>i?"next":"prev",u=(f,d)=>l==="next"&&f>=d||l==="prev"&&f<=d,c=()=>{a=new Date().getTime(),s===null&&(s=a);const f=Math.max(Math.min((a-s)/o,1),0),d=.5-Math.cos(f*Math.PI)/2;let h=i+d*(e-i);if(u(h,e)&&(h=e),t.wrapperEl.scrollTo({[n]:h}),u(h,e)){t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout(()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[n]:h})}),r.cancelAnimationFrame(t.cssModeFrameID);return}t.cssModeFrameID=r.requestAnimationFrame(c)};c()}function gu(t,e=""){return[...t.children].filter(n=>n.matches(e))}function j5(t,e=[]){const n=document.createElement(t);return n.classList.add(...Array.isArray(e)?e:[e]),n}function X3e(t,e){const n=[];for(;t.previousElementSibling;){const r=t.previousElementSibling;e?r.matches(e)&&n.push(r):n.push(r),t=r}return n}function Y3e(t,e){const n=[];for(;t.nextElementSibling;){const r=t.nextElementSibling;e?r.matches(e)&&n.push(r):n.push(r),t=r}return n}function Xf(t,e){return uo().getComputedStyle(t,null).getPropertyValue(e)}function Ex(t){let e=t,n;if(e){for(n=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(n+=1);return n}}function ote(t,e){const n=[];let r=t.parentElement;for(;r;)e?r.matches(e)&&n.push(r):n.push(r),r=r.parentElement;return n}function rF(t,e,n){const r=uo();return n?t[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(r.getComputedStyle(t,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(r.getComputedStyle(t,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom")):t.offsetWidth}let wD;function K3e(){const t=uo(),e=Su();return{smoothScroll:e.documentElement&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch)}}function lte(){return wD||(wD=K3e()),wD}let _D;function Z3e({userAgent:t}={}){const e=lte(),n=uo(),r=n.navigator.platform,i=t||n.navigator.userAgent,s={ios:!1,android:!1},a=n.screen.width,o=n.screen.height,l=i.match(/(Android);?[\s\/]+([\d.]+)?/);let u=i.match(/(iPad).*OS\s([\d_]+)/);const c=i.match(/(iPod)(.*OS\s([\d_]+))?/),f=!u&&i.match(/(iPhone\sOS|iOS)\s([\d_]+)/),d=r==="Win32";let h=r==="MacIntel";const p=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!u&&h&&e.touch&&p.indexOf(`${a}x${o}`)>=0&&(u=i.match(/(Version)\/([\d.]+)/),u||(u=[0,1,"13_0_0"]),h=!1),l&&!d&&(s.os="android",s.android=!0),(u||f||c)&&(s.os="ios",s.ios=!0),s}function J3e(t={}){return _D||(_D=Z3e(t)),_D}let SD;function Q3e(){const t=uo();let e=!1;function n(){const r=t.navigator.userAgent.toLowerCase();return r.indexOf("safari")>=0&&r.indexOf("chrome")<0&&r.indexOf("android")<0}if(n()){const r=String(t.navigator.userAgent);if(r.includes("Version/")){const[i,s]=r.split("Version/")[1].split(" ")[0].split(".").map(a=>Number(a));e=i<16||i===16&&s<2}}return{isSafari:e||n(),needPerspectiveFix:e,isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent)}}function eNe(){return SD||(SD=Q3e()),SD}function tNe({swiper:t,on:e,emit:n}){const r=uo();let i=null,s=null;const a=()=>{!t||t.destroyed||!t.initialized||(n("beforeResize"),n("resize"))},o=()=>{!t||t.destroyed||!t.initialized||(i=new ResizeObserver(c=>{s=r.requestAnimationFrame(()=>{const{width:f,height:d}=t;let h=f,p=d;c.forEach(({contentBoxSize:m,contentRect:g,target:v})=>{v&&v!==t.el||(h=g?g.width:(m[0]||m).inlineSize,p=g?g.height:(m[0]||m).blockSize)}),(h!==f||p!==d)&&a()})}),i.observe(t.el))},l=()=>{s&&r.cancelAnimationFrame(s),i&&i.unobserve&&t.el&&(i.unobserve(t.el),i=null)},u=()=>{!t||t.destroyed||!t.initialized||n("orientationchange")};e("init",()=>{if(t.params.resizeObserver&&typeof r.ResizeObserver<"u"){o();return}r.addEventListener("resize",a),r.addEventListener("orientationchange",u)}),e("destroy",()=>{l(),r.removeEventListener("resize",a),r.removeEventListener("orientationchange",u)})}function nNe({swiper:t,extendParams:e,on:n,emit:r}){const i=[],s=uo(),a=(u,c={})=>{const f=s.MutationObserver||s.WebkitMutationObserver,d=new f(h=>{if(t.__preventObserver__)return;if(h.length===1){r("observerUpdate",h[0]);return}const p=function(){r("observerUpdate",h[0])};s.requestAnimationFrame?s.requestAnimationFrame(p):s.setTimeout(p,0)});d.observe(u,{attributes:typeof c.attributes>"u"?!0:c.attributes,childList:typeof c.childList>"u"?!0:c.childList,characterData:typeof c.characterData>"u"?!0:c.characterData}),i.push(d)},o=()=>{if(t.params.observer){if(t.params.observeParents){const u=ote(t.el);for(let c=0;c<u.length;c+=1)a(u[c])}a(t.el,{childList:t.params.observeSlideChildren}),a(t.wrapperEl,{attributes:!1})}},l=()=>{i.forEach(u=>{u.disconnect()}),i.splice(0,i.length)};e({observer:!1,observeParents:!1,observeSlideChildren:!1}),n("init",o),n("destroy",l)}const rNe={on(t,e,n){const r=this;if(!r.eventsListeners||r.destroyed||typeof e!="function")return r;const i=n?"unshift":"push";return t.split(" ").forEach(s=>{r.eventsListeners[s]||(r.eventsListeners[s]=[]),r.eventsListeners[s][i](e)}),r},once(t,e,n){const r=this;if(!r.eventsListeners||r.destroyed||typeof e!="function")return r;function i(...s){r.off(t,i),i.__emitterProxy&&delete i.__emitterProxy,e.apply(r,s)}return i.__emitterProxy=e,r.on(t,i,n)},onAny(t,e){const n=this;if(!n.eventsListeners||n.destroyed||typeof t!="function")return n;const r=e?"unshift":"push";return n.eventsAnyListeners.indexOf(t)<0&&n.eventsAnyListeners[r](t),n},offAny(t){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const n=e.eventsAnyListeners.indexOf(t);return n>=0&&e.eventsAnyListeners.splice(n,1),e},off(t,e){const n=this;return!n.eventsListeners||n.destroyed||!n.eventsListeners||t.split(" ").forEach(r=>{typeof e>"u"?n.eventsListeners[r]=[]:n.eventsListeners[r]&&n.eventsListeners[r].forEach((i,s)=>{(i===e||i.__emitterProxy&&i.__emitterProxy===e)&&n.eventsListeners[r].splice(s,1)})}),n},emit(...t){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsListeners)return e;let n,r,i;return typeof t[0]=="string"||Array.isArray(t[0])?(n=t[0],r=t.slice(1,t.length),i=e):(n=t[0].events,r=t[0].data,i=t[0].context||e),r.unshift(i),(Array.isArray(n)?n:n.split(" ")).forEach(a=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach(o=>{o.apply(i,[a,...r])}),e.eventsListeners&&e.eventsListeners[a]&&e.eventsListeners[a].forEach(o=>{o.apply(i,r)})}),e}};function iNe(){const t=this;let e,n;const r=t.el;typeof t.params.width<"u"&&t.params.width!==null?e=t.params.width:e=r.clientWidth,typeof t.params.height<"u"&&t.params.height!==null?n=t.params.height:n=r.clientHeight,!(e===0&&t.isHorizontal()||n===0&&t.isVertical())&&(e=e-parseInt(Xf(r,"padding-left")||0,10)-parseInt(Xf(r,"padding-right")||0,10),n=n-parseInt(Xf(r,"padding-top")||0,10)-parseInt(Xf(r,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(n)&&(n=0),Object.assign(t,{width:e,height:n,size:t.isHorizontal()?e:n}))}function sNe(){const t=this;function e(k){return t.isHorizontal()?k:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[k]}function n(k,M){return parseFloat(k.getPropertyValue(e(M))||0)}const r=t.params,{wrapperEl:i,slidesEl:s,size:a,rtlTranslate:o,wrongRTL:l}=t,u=t.virtual&&r.virtual.enabled,c=u?t.virtual.slides.length:t.slides.length,f=gu(s,`.${t.params.slideClass}, swiper-slide`),d=u?t.virtual.slides.length:f.length;let h=[];const p=[],m=[];let g=r.slidesOffsetBefore;typeof g=="function"&&(g=r.slidesOffsetBefore.call(t));let v=r.slidesOffsetAfter;typeof v=="function"&&(v=r.slidesOffsetAfter.call(t));const y=t.snapGrid.length,b=t.slidesGrid.length;let x=r.spaceBetween,w=-g,S=0,C=0;if(typeof a>"u")return;typeof x=="string"&&x.indexOf("%")>=0&&(x=parseFloat(x.replace("%",""))/100*a),t.virtualSize=-x,f.forEach(k=>{o?k.style.marginLeft="":k.style.marginRight="",k.style.marginBottom="",k.style.marginTop=""}),r.centeredSlides&&r.cssMode&&(tC(i,"--swiper-centered-offset-before",""),tC(i,"--swiper-centered-offset-after",""));const _=r.grid&&r.grid.rows>1&&t.grid;_&&t.grid.initSlides(d);let E;const T=r.slidesPerView==="auto"&&r.breakpoints&&Object.keys(r.breakpoints).filter(k=>typeof r.breakpoints[k].slidesPerView<"u").length>0;for(let k=0;k<d;k+=1){E=0;let M;if(f[k]&&(M=f[k]),_&&t.grid.updateSlide(k,M,d,e),!(f[k]&&Xf(M,"display")==="none")){if(r.slidesPerView==="auto"){T&&(f[k].style[e("width")]="");const A=getComputedStyle(M),N=M.style.transform,$=M.style.webkitTransform;if(N&&(M.style.transform="none"),$&&(M.style.webkitTransform="none"),r.roundLengths)E=t.isHorizontal()?rF(M,"width",!0):rF(M,"height",!0);else{const D=n(A,"width"),P=n(A,"padding-left"),O=n(A,"padding-right"),B=n(A,"margin-left"),H=n(A,"margin-right"),te=A.getPropertyValue("box-sizing");if(te&&te==="border-box")E=D+B+H;else{const{clientWidth:q,offsetWidth:Z}=M;E=D+P+O+B+H+(Z-q)}}N&&(M.style.transform=N),$&&(M.style.webkitTransform=$),r.roundLengths&&(E=Math.floor(E))}else E=(a-(r.slidesPerView-1)*x)/r.slidesPerView,r.roundLengths&&(E=Math.floor(E)),f[k]&&(f[k].style[e("width")]=`${E}px`);f[k]&&(f[k].swiperSlideSize=E),m.push(E),r.centeredSlides?(w=w+E/2+S/2+x,S===0&&k!==0&&(w=w-a/2-x),k===0&&(w=w-a/2-x),Math.abs(w)<1/1e3&&(w=0),r.roundLengths&&(w=Math.floor(w)),C%r.slidesPerGroup===0&&h.push(w),p.push(w)):(r.roundLengths&&(w=Math.floor(w)),(C-Math.min(t.params.slidesPerGroupSkip,C))%t.params.slidesPerGroup===0&&h.push(w),p.push(w),w=w+E+x),t.virtualSize+=E+x,S=E,C+=1}}if(t.virtualSize=Math.max(t.virtualSize,a)+v,o&&l&&(r.effect==="slide"||r.effect==="coverflow")&&(i.style.width=`${t.virtualSize+r.spaceBetween}px`),r.setWrapperSize&&(i.style[e("width")]=`${t.virtualSize+r.spaceBetween}px`),_&&t.grid.updateWrapperSize(E,h,e),!r.centeredSlides){const k=[];for(let M=0;M<h.length;M+=1){let A=h[M];r.roundLengths&&(A=Math.floor(A)),h[M]<=t.virtualSize-a&&k.push(A)}h=k,Math.floor(t.virtualSize-a)-Math.floor(h[h.length-1])>1&&h.push(t.virtualSize-a)}if(u&&r.loop){const k=m[0]+x;if(r.slidesPerGroup>1){const M=Math.ceil((t.virtual.slidesBefore+t.virtual.slidesAfter)/r.slidesPerGroup),A=k*r.slidesPerGroup;for(let N=0;N<M;N+=1)h.push(h[h.length-1]+A)}for(let M=0;M<t.virtual.slidesBefore+t.virtual.slidesAfter;M+=1)r.slidesPerGroup===1&&h.push(h[h.length-1]+k),p.push(p[p.length-1]+k),t.virtualSize+=k}if(h.length===0&&(h=[0]),r.spaceBetween!==0){const k=t.isHorizontal()&&o?"marginLeft":e("marginRight");f.filter((M,A)=>!r.cssMode||r.loop?!0:A!==f.length-1).forEach(M=>{M.style[k]=`${x}px`})}if(r.centeredSlides&&r.centeredSlidesBounds){let k=0;m.forEach(A=>{k+=A+(r.spaceBetween?r.spaceBetween:0)}),k-=r.spaceBetween;const M=k-a;h=h.map(A=>A<0?-g:A>M?M+v:A)}if(r.centerInsufficientSlides){let k=0;if(m.forEach(M=>{k+=M+(r.spaceBetween?r.spaceBetween:0)}),k-=r.spaceBetween,k<a){const M=(a-k)/2;h.forEach((A,N)=>{h[N]=A-M}),p.forEach((A,N)=>{p[N]=A+M})}}if(Object.assign(t,{slides:f,snapGrid:h,slidesGrid:p,slidesSizesGrid:m}),r.centeredSlides&&r.cssMode&&!r.centeredSlidesBounds){tC(i,"--swiper-centered-offset-before",`${-h[0]}px`),tC(i,"--swiper-centered-offset-after",`${t.size/2-m[m.length-1]/2}px`);const k=-t.snapGrid[0],M=-t.slidesGrid[0];t.snapGrid=t.snapGrid.map(A=>A+k),t.slidesGrid=t.slidesGrid.map(A=>A+M)}if(d!==c&&t.emit("slidesLengthChange"),h.length!==y&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),p.length!==b&&t.emit("slidesGridLengthChange"),r.watchSlidesProgress&&t.updateSlidesOffset(),!u&&!r.cssMode&&(r.effect==="slide"||r.effect==="fade")){const k=`${r.containerModifierClass}backface-hidden`,M=t.el.classList.contains(k);d<=r.maxBackfaceHiddenSlides?M||t.el.classList.add(k):M&&t.el.classList.remove(k)}}function aNe(t){const e=this,n=[],r=e.virtual&&e.params.virtual.enabled;let i=0,s;typeof t=="number"?e.setTransition(t):t===!0&&e.setTransition(e.params.speed);const a=o=>r?e.getSlideIndexByData(o):e.slides[o];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(o=>{n.push(o)});else for(s=0;s<Math.ceil(e.params.slidesPerView);s+=1){const o=e.activeIndex+s;if(o>e.slides.length&&!r)break;n.push(a(o))}else n.push(a(e.activeIndex));for(s=0;s<n.length;s+=1)if(typeof n[s]<"u"){const o=n[s].offsetHeight;i=o>i?o:i}(i||i===0)&&(e.wrapperEl.style.height=`${i}px`)}function oNe(){const t=this,e=t.slides,n=t.isElement?t.isHorizontal()?t.wrapperEl.offsetLeft:t.wrapperEl.offsetTop:0;for(let r=0;r<e.length;r+=1)e[r].swiperSlideOffset=(t.isHorizontal()?e[r].offsetLeft:e[r].offsetTop)-n}function lNe(t=this&&this.translate||0){const e=this,n=e.params,{slides:r,rtlTranslate:i,snapGrid:s}=e;if(r.length===0)return;typeof r[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let a=-t;i&&(a=t),r.forEach(o=>{o.classList.remove(n.slideVisibleClass)}),e.visibleSlidesIndexes=[],e.visibleSlides=[];for(let o=0;o<r.length;o+=1){const l=r[o];let u=l.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(u-=r[0].swiperSlideOffset);const c=(a+(n.centeredSlides?e.minTranslate():0)-u)/(l.swiperSlideSize+n.spaceBetween),f=(a-s[0]+(n.centeredSlides?e.minTranslate():0)-u)/(l.swiperSlideSize+n.spaceBetween),d=-(a-u),h=d+e.slidesSizesGrid[o];(d>=0&&d<e.size-1||h>1&&h<=e.size||d<=0&&h>=e.size)&&(e.visibleSlides.push(l),e.visibleSlidesIndexes.push(o),r[o].classList.add(n.slideVisibleClass)),l.progress=i?-c:c,l.originalProgress=i?-f:f}}function uNe(t){const e=this;if(typeof t>"u"){const c=e.rtlTranslate?-1:1;t=e&&e.translate&&e.translate*c||0}const n=e.params,r=e.maxTranslate()-e.minTranslate();let{progress:i,isBeginning:s,isEnd:a,progressLoop:o}=e;const l=s,u=a;if(r===0)i=0,s=!0,a=!0;else{i=(t-e.minTranslate())/r;const c=Math.abs(t-e.minTranslate())<1,f=Math.abs(t-e.maxTranslate())<1;s=c||i<=0,a=f||i>=1,c&&(i=0),f&&(i=1)}if(n.loop){const c=e.getSlideIndexByData(0),f=e.getSlideIndexByData(e.slides.length-1),d=e.slidesGrid[c],h=e.slidesGrid[f],p=e.slidesGrid[e.slidesGrid.length-1],m=Math.abs(t);m>=d?o=(m-d)/p:o=(m+p-h)/p,o>1&&(o-=1)}Object.assign(e,{progress:i,progressLoop:o,isBeginning:s,isEnd:a}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&e.updateSlidesProgress(t),s&&!l&&e.emit("reachBeginning toEdge"),a&&!u&&e.emit("reachEnd toEdge"),(l&&!s||u&&!a)&&e.emit("fromEdge"),e.emit("progress",i)}function cNe(){const t=this,{slides:e,params:n,slidesEl:r,activeIndex:i}=t,s=t.virtual&&n.virtual.enabled,a=l=>gu(r,`.${n.slideClass}${l}, swiper-slide${l}`)[0];e.forEach(l=>{l.classList.remove(n.slideActiveClass,n.slideNextClass,n.slidePrevClass)});let o;if(s)if(n.loop){let l=i-t.virtual.slidesBefore;l<0&&(l=t.virtual.slides.length+l),l>=t.virtual.slides.length&&(l-=t.virtual.slides.length),o=a(`[data-swiper-slide-index="${l}"]`)}else o=a(`[data-swiper-slide-index="${i}"]`);else o=e[i];if(o){o.classList.add(n.slideActiveClass);let l=Y3e(o,`.${n.slideClass}, swiper-slide`)[0];n.loop&&!l&&(l=e[0]),l&&l.classList.add(n.slideNextClass);let u=X3e(o,`.${n.slideClass}, swiper-slide`)[0];n.loop&&!u===0&&(u=e[e.length-1]),u&&u.classList.add(n.slidePrevClass)}t.emitSlidesClasses()}function fNe(t){const{slidesGrid:e,params:n}=t,r=t.rtlTranslate?t.translate:-t.translate;let i;for(let s=0;s<e.length;s+=1)typeof e[s+1]<"u"?r>=e[s]&&r<e[s+1]-(e[s+1]-e[s])/2?i=s:r>=e[s]&&r<e[s+1]&&(i=s+1):r>=e[s]&&(i=s);return n.normalizeSlideIndex&&(i<0||typeof i>"u")&&(i=0),i}function dNe(t){const e=this,n=e.rtlTranslate?e.translate:-e.translate,{snapGrid:r,params:i,activeIndex:s,realIndex:a,snapIndex:o}=e;let l=t,u;const c=d=>{let h=d-e.virtual.slidesBefore;return h<0&&(h=e.virtual.slides.length+h),h>=e.virtual.slides.length&&(h-=e.virtual.slides.length),h};if(typeof l>"u"&&(l=fNe(e)),r.indexOf(n)>=0)u=r.indexOf(n);else{const d=Math.min(i.slidesPerGroupSkip,l);u=d+Math.floor((l-d)/i.slidesPerGroup)}if(u>=r.length&&(u=r.length-1),l===s){u!==o&&(e.snapIndex=u,e.emit("snapIndexChange")),e.params.loop&&e.virtual&&e.params.virtual.enabled&&(e.realIndex=c(l));return}let f;e.virtual&&i.virtual.enabled&&i.loop?f=c(l):e.slides[l]?f=parseInt(e.slides[l].getAttribute("data-swiper-slide-index")||l,10):f=l,Object.assign(e,{snapIndex:u,realIndex:f,previousIndex:s,activeIndex:l}),e.emit("activeIndexChange"),e.emit("snapIndexChange"),a!==f&&e.emit("realIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&e.emit("slideChange")}function hNe(t){const e=this,n=e.params,r=t.closest(`.${n.slideClass}, swiper-slide`);let i=!1,s;if(r){for(let a=0;a<e.slides.length;a+=1)if(e.slides[a]===r){i=!0,s=a;break}}if(r&&i)e.clickedSlide=r,e.virtual&&e.params.virtual.enabled?e.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):e.clickedIndex=s;else{e.clickedSlide=void 0,e.clickedIndex=void 0;return}n.slideToClickedSlide&&e.clickedIndex!==void 0&&e.clickedIndex!==e.activeIndex&&e.slideToClickedSlide()}const pNe={updateSize:iNe,updateSlides:sNe,updateAutoHeight:aNe,updateSlidesOffset:oNe,updateSlidesProgress:lNe,updateProgress:uNe,updateSlidesClasses:cNe,updateActiveIndex:dNe,updateClickedSlide:hNe};function mNe(t=this.isHorizontal()?"x":"y"){const e=this,{params:n,rtlTranslate:r,translate:i,wrapperEl:s}=e;if(n.virtualTranslate)return r?-i:i;if(n.cssMode)return i;let a=j3e(s,t);return r&&(a=-a),a||0}function gNe(t,e){const n=this,{rtlTranslate:r,params:i,wrapperEl:s,progress:a}=n;let o=0,l=0;const u=0;n.isHorizontal()?o=r?-t:t:l=t,i.roundLengths&&(o=Math.floor(o),l=Math.floor(l)),i.cssMode?s[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-o:-l:i.virtualTranslate||(s.style.transform=`translate3d(${o}px, ${l}px, ${u}px)`),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?o:l;let c;const f=n.maxTranslate()-n.minTranslate();f===0?c=0:c=(t-n.minTranslate())/f,c!==a&&n.updateProgress(t),n.emit("setTranslate",n.translate,e)}function vNe(){return-this.snapGrid[0]}function yNe(){return-this.snapGrid[this.snapGrid.length-1]}function bNe(t=0,e=this.params.speed,n=!0,r=!0,i){const s=this,{params:a,wrapperEl:o}=s;if(s.animating&&a.preventInteractionOnTransition)return!1;const l=s.minTranslate(),u=s.maxTranslate();let c;if(r&&t>l?c=l:r&&t<u?c=u:c=t,s.updateProgress(c),a.cssMode){const f=s.isHorizontal();if(e===0)o[f?"scrollLeft":"scrollTop"]=-c;else{if(!s.support.smoothScroll)return ate({swiper:s,targetPosition:-c,side:f?"left":"top"}),!0;o.scrollTo({[f?"left":"top"]:-c,behavior:"smooth"})}return!0}return e===0?(s.setTransition(0),s.setTranslate(c),n&&(s.emit("beforeTransitionStart",e,i),s.emit("transitionEnd"))):(s.setTransition(e),s.setTranslate(c),n&&(s.emit("beforeTransitionStart",e,i),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(d){!s||s.destroyed||d.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,n&&s.emit("transitionEnd"))}),s.wrapperEl.addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd))),!0}const xNe={getTranslate:mNe,setTranslate:gNe,minTranslate:vNe,maxTranslate:yNe,translateTo:bNe};function wNe(t,e){const n=this;n.params.cssMode||(n.wrapperEl.style.transitionDuration=`${t}ms`),n.emit("setTransition",t,e)}function ute({swiper:t,runCallbacks:e,direction:n,step:r}){const{activeIndex:i,previousIndex:s}=t;let a=n;if(a||(i>s?a="next":i<s?a="prev":a="reset"),t.emit(`transition${r}`),e&&i!==s){if(a==="reset"){t.emit(`slideResetTransition${r}`);return}t.emit(`slideChangeTransition${r}`),a==="next"?t.emit(`slideNextTransition${r}`):t.emit(`slidePrevTransition${r}`)}}function _Ne(t=!0,e){const n=this,{params:r}=n;r.cssMode||(r.autoHeight&&n.updateAutoHeight(),ute({swiper:n,runCallbacks:t,direction:e,step:"Start"}))}function SNe(t=!0,e){const n=this,{params:r}=n;n.animating=!1,!r.cssMode&&(n.setTransition(0),ute({swiper:n,runCallbacks:t,direction:e,step:"End"}))}const CNe={setTransition:wNe,transitionStart:_Ne,transitionEnd:SNe};function ENe(t=0,e=this.params.speed,n=!0,r,i){typeof t=="string"&&(t=parseInt(t,10));const s=this;let a=t;a<0&&(a=0);const{params:o,snapGrid:l,slidesGrid:u,previousIndex:c,activeIndex:f,rtlTranslate:d,wrapperEl:h,enabled:p}=s;if(s.animating&&o.preventInteractionOnTransition||!p&&!r&&!i)return!1;const m=Math.min(s.params.slidesPerGroupSkip,a);let g=m+Math.floor((a-m)/s.params.slidesPerGroup);g>=l.length&&(g=l.length-1);const v=-l[g];if(o.normalizeSlideIndex)for(let b=0;b<u.length;b+=1){const x=-Math.floor(v*100),w=Math.floor(u[b]*100),S=Math.floor(u[b+1]*100);typeof u[b+1]<"u"?x>=w&&x<S-(S-w)/2?a=b:x>=w&&x<S&&(a=b+1):x>=w&&(a=b)}if(s.initialized&&a!==f&&(!s.allowSlideNext&&v<s.translate&&v<s.minTranslate()||!s.allowSlidePrev&&v>s.translate&&v>s.maxTranslate()&&(f||0)!==a))return!1;a!==(c||0)&&n&&s.emit("beforeSlideChangeStart"),s.updateProgress(v);let y;if(a>f?y="next":a<f?y="prev":y="reset",d&&-v===s.translate||!d&&v===s.translate)return s.updateActiveIndex(a),o.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),o.effect!=="slide"&&s.setTranslate(v),y!=="reset"&&(s.transitionStart(n,y),s.transitionEnd(n,y)),!1;if(o.cssMode){const b=s.isHorizontal(),x=d?v:-v;if(e===0){const w=s.virtual&&s.params.virtual.enabled;w&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),w&&!s._cssModeVirtualInitialSet&&s.params.initialSlide>0?(s._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{h[b?"scrollLeft":"scrollTop"]=x})):h[b?"scrollLeft":"scrollTop"]=x,w&&requestAnimationFrame(()=>{s.wrapperEl.style.scrollSnapType="",s._immediateVirtual=!1})}else{if(!s.support.smoothScroll)return ate({swiper:s,targetPosition:x,side:b?"left":"top"}),!0;h.scrollTo({[b?"left":"top"]:x,behavior:"smooth"})}return!0}return s.setTransition(e),s.setTranslate(v),s.updateActiveIndex(a),s.updateSlidesClasses(),s.emit("beforeTransitionStart",e,r),s.transitionStart(n,y),e===0?s.transitionEnd(n,y):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(x){!s||s.destroyed||x.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(n,y))}),s.wrapperEl.addEventListener("transitionend",s.onSlideToWrapperTransitionEnd)),!0}function TNe(t=0,e=this.params.speed,n=!0,r){typeof t=="string"&&(t=parseInt(t,10));const i=this;let s=t;return i.params.loop&&(i.virtual&&i.params.virtual.enabled?s=s+i.virtual.slidesBefore:s=i.getSlideIndexByData(s)),i.slideTo(s,e,n,r)}function kNe(t=this.params.speed,e=!0,n){const r=this,{enabled:i,params:s,animating:a}=r;if(!i)return r;let o=s.slidesPerGroup;s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(o=Math.max(r.slidesPerViewDynamic("current",!0),1));const l=r.activeIndex<s.slidesPerGroupSkip?1:o,u=r.virtual&&s.virtual.enabled;if(s.loop){if(a&&!u&&s.loopPreventsSliding)return!1;r.loopFix({direction:"next"}),r._clientLeft=r.wrapperEl.clientLeft}return s.rewind&&r.isEnd?r.slideTo(0,t,e,n):r.slideTo(r.activeIndex+l,t,e,n)}function ANe(t=this.params.speed,e=!0,n){const r=this,{params:i,snapGrid:s,slidesGrid:a,rtlTranslate:o,enabled:l,animating:u}=r;if(!l)return r;const c=r.virtual&&i.virtual.enabled;if(i.loop){if(u&&!c&&i.loopPreventsSliding)return!1;r.loopFix({direction:"prev"}),r._clientLeft=r.wrapperEl.clientLeft}const f=o?r.translate:-r.translate;function d(v){return v<0?-Math.floor(Math.abs(v)):Math.floor(v)}const h=d(f),p=s.map(v=>d(v));let m=s[p.indexOf(h)-1];if(typeof m>"u"&&i.cssMode){let v;s.forEach((y,b)=>{h>=y&&(v=b)}),typeof v<"u"&&(m=s[v>0?v-1:v])}let g=0;if(typeof m<"u"&&(g=a.indexOf(m),g<0&&(g=r.activeIndex-1),i.slidesPerView==="auto"&&i.slidesPerGroup===1&&i.slidesPerGroupAuto&&(g=g-r.slidesPerViewDynamic("previous",!0)+1,g=Math.max(g,0))),i.rewind&&r.isBeginning){const v=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1;return r.slideTo(v,t,e,n)}return r.slideTo(g,t,e,n)}function MNe(t=this.params.speed,e=!0,n){const r=this;return r.slideTo(r.activeIndex,t,e,n)}function NNe(t=this.params.speed,e=!0,n,r=.5){const i=this;let s=i.activeIndex;const a=Math.min(i.params.slidesPerGroupSkip,s),o=a+Math.floor((s-a)/i.params.slidesPerGroup),l=i.rtlTranslate?i.translate:-i.translate;if(l>=i.snapGrid[o]){const u=i.snapGrid[o],c=i.snapGrid[o+1];l-u>(c-u)*r&&(s+=i.params.slidesPerGroup)}else{const u=i.snapGrid[o-1],c=i.snapGrid[o];l-u<=(c-u)*r&&(s-=i.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,i.slidesGrid.length-1),i.slideTo(s,t,e,n)}function $Ne(){const t=this,{params:e,slidesEl:n}=t,r=e.slidesPerView==="auto"?t.slidesPerViewDynamic():e.slidesPerView;let i=t.clickedIndex,s;const a=t.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(t.animating)return;s=parseInt(t.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?i<t.loopedSlides-r/2||i>t.slides.length-t.loopedSlides+r/2?(t.loopFix(),i=t.getSlideIndex(gu(n,`${a}[data-swiper-slide-index="${s}"]`)[0]),nF(()=>{t.slideTo(i)})):t.slideTo(i):i>t.slides.length-r?(t.loopFix(),i=t.getSlideIndex(gu(n,`${a}[data-swiper-slide-index="${s}"]`)[0]),nF(()=>{t.slideTo(i)})):t.slideTo(i)}else t.slideTo(i)}const INe={slideTo:ENe,slideToLoop:TNe,slideNext:kNe,slidePrev:ANe,slideReset:MNe,slideToClosest:NNe,slideToClickedSlide:$Ne};function DNe(t){const e=this,{params:n,slidesEl:r}=e;if(!n.loop||e.virtual&&e.params.virtual.enabled)return;gu(r,`.${n.slideClass}, swiper-slide`).forEach((s,a)=>{s.setAttribute("data-swiper-slide-index",a)}),e.loopFix({slideRealIndex:t,direction:n.centeredSlides?void 0:"next"})}function RNe({slideRealIndex:t,slideTo:e=!0,direction:n,setTranslate:r,activeSlideIndex:i,byController:s,byMousewheel:a}={}){const o=this;if(!o.params.loop)return;o.emit("beforeLoopFix");const{slides:l,allowSlidePrev:u,allowSlideNext:c,slidesEl:f,params:d}=o;if(o.allowSlidePrev=!0,o.allowSlideNext=!0,o.virtual&&d.virtual.enabled){e&&(!d.centeredSlides&&o.snapIndex===0?o.slideTo(o.virtual.slides.length,0,!1,!0):d.centeredSlides&&o.snapIndex<d.slidesPerView?o.slideTo(o.virtual.slides.length+o.snapIndex,0,!1,!0):o.snapIndex===o.snapGrid.length-1&&o.slideTo(o.virtual.slidesBefore,0,!1,!0)),o.allowSlidePrev=u,o.allowSlideNext=c,o.emit("loopFix");return}const h=d.slidesPerView==="auto"?o.slidesPerViewDynamic():Math.ceil(parseFloat(d.slidesPerView,10));let p=d.loopedSlides||h;p%d.slidesPerGroup!==0&&(p+=d.slidesPerGroup-p%d.slidesPerGroup),o.loopedSlides=p;const m=[],g=[];let v=o.activeIndex;typeof i>"u"?i=o.getSlideIndex(o.slides.filter(S=>S.classList.contains(d.slideActiveClass))[0]):v=i;const y=n==="next"||!n,b=n==="prev"||!n;let x=0,w=0;if(i<p){x=Math.max(p-i,d.slidesPerGroup);for(let S=0;S<p-i;S+=1){const C=S-Math.floor(S/l.length)*l.length;m.push(l.length-C-1)}}else if(i>o.slides.length-p*2){w=Math.max(i-(o.slides.length-p*2),d.slidesPerGroup);for(let S=0;S<w;S+=1){const C=S-Math.floor(S/l.length)*l.length;g.push(C)}}if(b&&m.forEach(S=>{f.prepend(o.slides[S])}),y&&g.forEach(S=>{f.append(o.slides[S])}),o.recalcSlides(),d.watchSlidesProgress&&o.updateSlidesOffset(),e){if(m.length>0&&b)if(typeof t>"u"){const S=o.slidesGrid[v],_=o.slidesGrid[v+x]-S;a?o.setTranslate(o.translate-_):(o.slideTo(v+x,0,!1,!0),r&&(o.touches[o.isHorizontal()?"startX":"startY"]+=_))}else r&&o.slideToLoop(t,0,!1,!0);else if(g.length>0&&y)if(typeof t>"u"){const S=o.slidesGrid[v],_=o.slidesGrid[v-w]-S;a?o.setTranslate(o.translate-_):(o.slideTo(v-w,0,!1,!0),r&&(o.touches[o.isHorizontal()?"startX":"startY"]+=_))}else o.slideToLoop(t,0,!1,!0)}if(o.allowSlidePrev=u,o.allowSlideNext=c,o.controller&&o.controller.control&&!s){const S={slideRealIndex:t,slideTo:!1,direction:n,setTranslate:r,activeSlideIndex:i,byController:!0};Array.isArray(o.controller.control)?o.controller.control.forEach(C=>{!C.destroyed&&C.params.loop&&C.loopFix(S)}):o.controller.control instanceof o.constructor&&o.controller.control.params.loop&&o.controller.control.loopFix(S)}o.emit("loopFix")}function ONe(){const t=this,{params:e,slidesEl:n}=t;if(!e.loop||t.virtual&&t.params.virtual.enabled)return;t.recalcSlides();const r=[];t.slides.forEach(i=>{const s=typeof i.swiperSlideIndex>"u"?i.getAttribute("data-swiper-slide-index")*1:i.swiperSlideIndex;r[s]=i}),t.slides.forEach(i=>{i.removeAttribute("data-swiper-slide-index")}),r.forEach(i=>{n.append(i)}),t.recalcSlides(),t.slideTo(t.realIndex,0)}const FNe={loopCreate:DNe,loopFix:RNe,loopDestroy:ONe};function LNe(t){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const n=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),n.style.cursor="move",n.style.cursor=t?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function PNe(){const t=this;t.params.watchOverflow&&t.isLocked||t.params.cssMode||(t.isElement&&(t.__preventObserver__=!0),t[t.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1}))}const zNe={setGrabCursor:LNe,unsetGrabCursor:PNe};function BNe(t,e=this){function n(r){if(!r||r===Su()||r===uo())return null;r.assignedSlot&&(r=r.assignedSlot);const i=r.closest(t);return!i&&!r.getRootNode?null:i||n(r.getRootNode().host)}return n(e)}function UNe(t){const e=this,n=Su(),r=uo(),i=e.touchEventsData;i.evCache.push(t);const{params:s,touches:a,enabled:o}=e;if(!o||!s.simulateTouch&&t.pointerType==="mouse"||e.animating&&s.preventInteractionOnTransition)return;!e.animating&&s.cssMode&&s.loop&&e.loopFix();let l=t;l.originalEvent&&(l=l.originalEvent);let u=l.target;if(s.touchEventsTarget==="wrapper"&&!e.wrapperEl.contains(u)||"which"in l&&l.which===3||"button"in l&&l.button>0||i.isTouched&&i.isMoved)return;const c=!!s.noSwipingClass&&s.noSwipingClass!=="",f=t.composedPath?t.composedPath():t.path;c&&l.target&&l.target.shadowRoot&&f&&(u=f[0]);const d=s.noSwipingSelector?s.noSwipingSelector:`.${s.noSwipingClass}`,h=!!(l.target&&l.target.shadowRoot);if(s.noSwiping&&(h?BNe(d,u):u.closest(d))){e.allowClick=!0;return}if(s.swipeHandler&&!u.closest(s.swipeHandler))return;a.currentX=l.pageX,a.currentY=l.pageY;const p=a.currentX,m=a.currentY,g=s.edgeSwipeDetection||s.iOSEdgeSwipeDetection,v=s.edgeSwipeThreshold||s.iOSEdgeSwipeThreshold;if(g&&(p<=v||p>=r.innerWidth-v))if(g==="prevent")t.preventDefault();else return;Object.assign(i,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=p,a.startY=m,i.touchStartTime=Cx(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,s.threshold>0&&(i.allowThresholdMove=!1);let y=!0;u.matches(i.focusableElements)&&(y=!1,u.nodeName==="SELECT"&&(i.isTouched=!1)),n.activeElement&&n.activeElement.matches(i.focusableElements)&&n.activeElement!==u&&n.activeElement.blur();const b=y&&e.allowTouchMove&&s.touchStartPreventDefault;(s.touchStartForcePreventDefault||b)&&!u.isContentEditable&&l.preventDefault(),e.params.freeMode&&e.params.freeMode.enabled&&e.freeMode&&e.animating&&!s.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",l)}function VNe(t){const e=Su(),n=this,r=n.touchEventsData,{params:i,touches:s,rtlTranslate:a,enabled:o}=n;if(!o||!i.simulateTouch&&t.pointerType==="mouse")return;let l=t;if(l.originalEvent&&(l=l.originalEvent),!r.isTouched){r.startMoving&&r.isScrolling&&n.emit("touchMoveOpposite",l);return}const u=r.evCache.findIndex(S=>S.pointerId===l.pointerId);u>=0&&(r.evCache[u]=l);const c=r.evCache.length>1?r.evCache[0]:l,f=c.pageX,d=c.pageY;if(l.preventedByNestedSwiper){s.startX=f,s.startY=d;return}if(!n.allowTouchMove){l.target.matches(r.focusableElements)||(n.allowClick=!1),r.isTouched&&(Object.assign(s,{startX:f,startY:d,prevX:n.touches.currentX,prevY:n.touches.currentY,currentX:f,currentY:d}),r.touchStartTime=Cx());return}if(i.touchReleaseOnEdges&&!i.loop){if(n.isVertical()){if(d<s.startY&&n.translate<=n.maxTranslate()||d>s.startY&&n.translate>=n.minTranslate()){r.isTouched=!1,r.isMoved=!1;return}}else if(f<s.startX&&n.translate<=n.maxTranslate()||f>s.startX&&n.translate>=n.minTranslate())return}if(e.activeElement&&l.target===e.activeElement&&l.target.matches(r.focusableElements)){r.isMoved=!0,n.allowClick=!1;return}if(r.allowTouchCallbacks&&n.emit("touchMove",l),l.targetTouches&&l.targetTouches.length>1)return;s.currentX=f,s.currentY=d;const h=s.currentX-s.startX,p=s.currentY-s.startY;if(n.params.threshold&&Math.sqrt(h**2+p**2)<n.params.threshold)return;if(typeof r.isScrolling>"u"){let S;n.isHorizontal()&&s.currentY===s.startY||n.isVertical()&&s.currentX===s.startX?r.isScrolling=!1:h*h+p*p>=25&&(S=Math.atan2(Math.abs(p),Math.abs(h))*180/Math.PI,r.isScrolling=n.isHorizontal()?S>i.touchAngle:90-S>i.touchAngle)}if(r.isScrolling&&n.emit("touchMoveOpposite",l),typeof r.startMoving>"u"&&(s.currentX!==s.startX||s.currentY!==s.startY)&&(r.startMoving=!0),r.isScrolling||n.zoom&&n.params.zoom&&n.params.zoom.enabled&&r.evCache.length>1){r.isTouched=!1;return}if(!r.startMoving)return;n.allowClick=!1,!i.cssMode&&l.cancelable&&l.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&l.stopPropagation();let m=n.isHorizontal()?h:p,g=n.isHorizontal()?s.currentX-s.previousX:s.currentY-s.previousY;i.oneWayMovement&&(m=Math.abs(m)*(a?1:-1),g=Math.abs(g)*(a?1:-1)),s.diff=m,m*=i.touchRatio,a&&(m=-m,g=-g);const v=n.touchesDirection;n.swipeDirection=m>0?"prev":"next",n.touchesDirection=g>0?"prev":"next";const y=n.params.loop&&!i.cssMode;if(!r.isMoved){if(y&&n.loopFix({direction:n.swipeDirection}),r.startTranslate=n.getTranslate(),n.setTransition(0),n.animating){const S=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});n.wrapperEl.dispatchEvent(S)}r.allowMomentumBounce=!1,i.grabCursor&&(n.allowSlideNext===!0||n.allowSlidePrev===!0)&&n.setGrabCursor(!0),n.emit("sliderFirstMove",l)}let b;r.isMoved&&v!==n.touchesDirection&&y&&Math.abs(m)>=1&&(n.loopFix({direction:n.swipeDirection,setTranslate:!0}),b=!0),n.emit("sliderMove",l),r.isMoved=!0,r.currentTranslate=m+r.startTranslate;let x=!0,w=i.resistanceRatio;if(i.touchReleaseOnEdges&&(w=0),m>0?(y&&!b&&r.currentTranslate>(i.centeredSlides?n.minTranslate()-n.size/2:n.minTranslate())&&n.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),r.currentTranslate>n.minTranslate()&&(x=!1,i.resistance&&(r.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+r.startTranslate+m)**w))):m<0&&(y&&!b&&r.currentTranslate<(i.centeredSlides?n.maxTranslate()+n.size/2:n.maxTranslate())&&n.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:n.slides.length-(i.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(parseFloat(i.slidesPerView,10)))}),r.currentTranslate<n.maxTranslate()&&(x=!1,i.resistance&&(r.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-r.startTranslate-m)**w))),x&&(l.preventedByNestedSwiper=!0),!n.allowSlideNext&&n.swipeDirection==="next"&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!n.allowSlidePrev&&n.swipeDirection==="prev"&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),!n.allowSlidePrev&&!n.allowSlideNext&&(r.currentTranslate=r.startTranslate),i.threshold>0)if(Math.abs(m)>i.threshold||r.allowThresholdMove){if(!r.allowThresholdMove){r.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,r.currentTranslate=r.startTranslate,s.diff=n.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY;return}}else{r.currentTranslate=r.startTranslate;return}!i.followFinger||i.cssMode||((i.freeMode&&i.freeMode.enabled&&n.freeMode||i.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),n.params.freeMode&&i.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(r.currentTranslate),n.setTranslate(r.currentTranslate))}function WNe(t){const e=this,n=e.touchEventsData,r=n.evCache.findIndex(b=>b.pointerId===t.pointerId);if(r>=0&&n.evCache.splice(r,1),["pointercancel","pointerout","pointerleave"].includes(t.type)&&!(t.type==="pointercancel"&&(e.browser.isSafari||e.browser.isWebView)))return;const{params:i,touches:s,rtlTranslate:a,slidesGrid:o,enabled:l}=e;if(!l||!i.simulateTouch&&t.pointerType==="mouse")return;let u=t;if(u.originalEvent&&(u=u.originalEvent),n.allowTouchCallbacks&&e.emit("touchEnd",u),n.allowTouchCallbacks=!1,!n.isTouched){n.isMoved&&i.grabCursor&&e.setGrabCursor(!1),n.isMoved=!1,n.startMoving=!1;return}i.grabCursor&&n.isMoved&&n.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const c=Cx(),f=c-n.touchStartTime;if(e.allowClick){const b=u.path||u.composedPath&&u.composedPath();e.updateClickedSlide(b&&b[0]||u.target),e.emit("tap click",u),f<300&&c-n.lastClickTime<300&&e.emit("doubleTap doubleClick",u)}if(n.lastClickTime=Cx(),nF(()=>{e.destroyed||(e.allowClick=!0)}),!n.isTouched||!n.isMoved||!e.swipeDirection||s.diff===0||n.currentTranslate===n.startTranslate){n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;return}n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;let d;if(i.followFinger?d=a?e.translate:-e.translate:d=-n.currentTranslate,i.cssMode)return;if(e.params.freeMode&&i.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:d});return}let h=0,p=e.slidesSizesGrid[0];for(let b=0;b<o.length;b+=b<i.slidesPerGroupSkip?1:i.slidesPerGroup){const x=b<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;typeof o[b+x]<"u"?d>=o[b]&&d<o[b+x]&&(h=b,p=o[b+x]-o[b]):d>=o[b]&&(h=b,p=o[o.length-1]-o[o.length-2])}let m=null,g=null;i.rewind&&(e.isBeginning?g=e.params.virtual&&e.params.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(m=0));const v=(d-o[h])/p,y=h<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;if(f>i.longSwipesMs){if(!i.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(v>=i.longSwipesRatio?e.slideTo(i.rewind&&e.isEnd?m:h+y):e.slideTo(h)),e.swipeDirection==="prev"&&(v>1-i.longSwipesRatio?e.slideTo(h+y):g!==null&&v<0&&Math.abs(v)>i.longSwipesRatio?e.slideTo(g):e.slideTo(h))}else{if(!i.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(u.target===e.navigation.nextEl||u.target===e.navigation.prevEl)?u.target===e.navigation.nextEl?e.slideTo(h+y):e.slideTo(h):(e.swipeDirection==="next"&&e.slideTo(m!==null?m:h+y),e.swipeDirection==="prev"&&e.slideTo(g!==null?g:h))}}let bH;function xH(){const t=this,{params:e,el:n}=t;if(n&&n.offsetWidth===0)return;e.breakpoints&&t.setBreakpoint();const{allowSlideNext:r,allowSlidePrev:i,snapGrid:s}=t,a=t.virtual&&t.params.virtual.enabled;t.allowSlideNext=!0,t.allowSlidePrev=!0,t.updateSize(),t.updateSlides(),t.updateSlidesClasses();const o=a&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&t.isEnd&&!t.isBeginning&&!t.params.centeredSlides&&!o?t.slideTo(t.slides.length-1,0,!1,!0):t.params.loop&&!a?t.slideToLoop(t.realIndex,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0),t.autoplay&&t.autoplay.running&&t.autoplay.paused&&(clearTimeout(bH),bH=setTimeout(()=>{t.autoplay&&t.autoplay.running&&t.autoplay.paused&&t.autoplay.resume()},500)),t.allowSlidePrev=i,t.allowSlideNext=r,t.params.watchOverflow&&s!==t.snapGrid&&t.checkOverflow()}function GNe(t){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&t.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(t.stopPropagation(),t.stopImmediatePropagation())))}function HNe(){const t=this,{wrapperEl:e,rtlTranslate:n,enabled:r}=t;if(!r)return;t.previousTranslate=t.translate,t.isHorizontal()?t.translate=-e.scrollLeft:t.translate=-e.scrollTop,t.translate===0&&(t.translate=0),t.updateActiveIndex(),t.updateSlidesClasses();let i;const s=t.maxTranslate()-t.minTranslate();s===0?i=0:i=(t.translate-t.minTranslate())/s,i!==t.progress&&t.updateProgress(n?-t.translate:t.translate),t.emit("setTranslate",t.translate,!1)}const pE=(t,e)=>{if(!t||t.destroyed||!t.params)return;const n=()=>t.isElement?"swiper-slide":`.${t.params.slideClass}`,r=e.closest(n());if(r){const i=r.querySelector(`.${t.params.lazyPreloaderClass}`);i&&i.remove()}};function jNe(t){const e=this;pE(e,t.target),e.update()}let wH=!1;function qNe(){}const cte=(t,e)=>{const n=Su(),{params:r,el:i,wrapperEl:s,device:a}=t,o=!!r.nested,l=e==="on"?"addEventListener":"removeEventListener",u=e;i[l]("pointerdown",t.onTouchStart,{passive:!1}),n[l]("pointermove",t.onTouchMove,{passive:!1,capture:o}),n[l]("pointerup",t.onTouchEnd,{passive:!0}),n[l]("pointercancel",t.onTouchEnd,{passive:!0}),n[l]("pointerout",t.onTouchEnd,{passive:!0}),n[l]("pointerleave",t.onTouchEnd,{passive:!0}),(r.preventClicks||r.preventClicksPropagation)&&i[l]("click",t.onClick,!0),r.cssMode&&s[l]("scroll",t.onScroll),r.updateOnWindowResize?t[u](a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",xH,!0):t[u]("observerUpdate",xH,!0),i[l]("load",t.onLoad,{capture:!0})};function XNe(){const t=this,e=Su(),{params:n}=t;t.onTouchStart=UNe.bind(t),t.onTouchMove=VNe.bind(t),t.onTouchEnd=WNe.bind(t),n.cssMode&&(t.onScroll=HNe.bind(t)),t.onClick=GNe.bind(t),t.onLoad=jNe.bind(t),wH||(e.addEventListener("touchstart",qNe),wH=!0),cte(t,"on")}function YNe(){cte(this,"off")}const KNe={attachEvents:XNe,detachEvents:YNe},_H=(t,e)=>t.grid&&e.grid&&e.grid.rows>1;function ZNe(){const t=this,{realIndex:e,initialized:n,params:r,el:i}=t,s=r.breakpoints;if(!s||s&&Object.keys(s).length===0)return;const a=t.getBreakpoint(s,t.params.breakpointsBase,t.el);if(!a||t.currentBreakpoint===a)return;const l=(a in s?s[a]:void 0)||t.originalParams,u=_H(t,r),c=_H(t,l),f=r.enabled;u&&!c?(i.classList.remove(`${r.containerModifierClass}grid`,`${r.containerModifierClass}grid-column`),t.emitContainerClasses()):!u&&c&&(i.classList.add(`${r.containerModifierClass}grid`),(l.grid.fill&&l.grid.fill==="column"||!l.grid.fill&&r.grid.fill==="column")&&i.classList.add(`${r.containerModifierClass}grid-column`),t.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(m=>{const g=r[m]&&r[m].enabled,v=l[m]&&l[m].enabled;g&&!v&&t[m].disable(),!g&&v&&t[m].enable()});const d=l.direction&&l.direction!==r.direction,h=r.loop&&(l.slidesPerView!==r.slidesPerView||d);d&&n&&t.changeDirection(),Ga(t.params,l);const p=t.params.enabled;Object.assign(t,{allowTouchMove:t.params.allowTouchMove,allowSlideNext:t.params.allowSlideNext,allowSlidePrev:t.params.allowSlidePrev}),f&&!p?t.disable():!f&&p&&t.enable(),t.currentBreakpoint=a,t.emit("_beforeBreakpoint",l),h&&n&&(t.loopDestroy(),t.loopCreate(e),t.updateSlides()),t.emit("breakpoint",l)}function JNe(t,e="window",n){if(!t||e==="container"&&!n)return;let r=!1;const i=uo(),s=e==="window"?i.innerHeight:n.clientHeight,a=Object.keys(t).map(o=>{if(typeof o=="string"&&o.indexOf("@")===0){const l=parseFloat(o.substr(1));return{value:s*l,point:o}}return{value:o,point:o}});a.sort((o,l)=>parseInt(o.value,10)-parseInt(l.value,10));for(let o=0;o<a.length;o+=1){const{point:l,value:u}=a[o];e==="window"?i.matchMedia(`(min-width: ${u}px)`).matches&&(r=l):u<=n.clientWidth&&(r=l)}return r||"max"}const QNe={setBreakpoint:ZNe,getBreakpoint:JNe};function e$e(t,e){const n=[];return t.forEach(r=>{typeof r=="object"?Object.keys(r).forEach(i=>{r[i]&&n.push(e+i)}):typeof r=="string"&&n.push(e+r)}),n}function t$e(){const t=this,{classNames:e,params:n,rtl:r,el:i,device:s}=t,a=e$e(["initialized",n.direction,{"free-mode":t.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:r},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&n.grid.fill==="column"},{android:s.android},{ios:s.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);e.push(...a),i.classList.add(...e),t.emitContainerClasses()}function n$e(){const t=this,{el:e,classNames:n}=t;e.classList.remove(...n),t.emitContainerClasses()}const r$e={addClasses:t$e,removeClasses:n$e};function i$e(){const t=this,{isLocked:e,params:n}=t,{slidesOffsetBefore:r}=n;if(r){const i=t.slides.length-1,s=t.slidesGrid[i]+t.slidesSizesGrid[i]+r*2;t.isLocked=t.size>s}else t.isLocked=t.snapGrid.length===1;n.allowSlideNext===!0&&(t.allowSlideNext=!t.isLocked),n.allowSlidePrev===!0&&(t.allowSlidePrev=!t.isLocked),e&&e!==t.isLocked&&(t.isEnd=!1),e!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock")}const s$e={checkOverflow:i$e},SH={init:!0,direction:"horizontal",oneWayMovement:!1,touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopedSlides:null,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",runCallbacksOnInit:!0,_emitClasses:!1};function a$e(t,e){return function(r={}){const i=Object.keys(r)[0],s=r[i];if(typeof s!="object"||s===null){Ga(e,r);return}if(["navigation","pagination","scrollbar"].indexOf(i)>=0&&t[i]===!0&&(t[i]={auto:!0}),!(i in t&&"enabled"in s)){Ga(e,r);return}t[i]===!0&&(t[i]={enabled:!0}),typeof t[i]=="object"&&!("enabled"in t[i])&&(t[i].enabled=!0),t[i]||(t[i]={enabled:!1}),Ga(e,r)}}const CD={eventsEmitter:rNe,update:pNe,translate:xNe,transition:CNe,slide:INe,loop:FNe,grabCursor:zNe,events:KNe,breakpoints:QNe,checkOverflow:s$e,classes:r$e},ED={};let Tx=class gc{constructor(...e){let n,r;e.length===1&&e[0].constructor&&Object.prototype.toString.call(e[0]).slice(8,-1)==="Object"?r=e[0]:[n,r]=e,r||(r={}),r=Ga({},r),n&&!r.el&&(r.el=n);const i=Su();if(r.el&&typeof r.el=="string"&&i.querySelectorAll(r.el).length>1){const l=[];return i.querySelectorAll(r.el).forEach(u=>{const c=Ga({},r,{el:u});l.push(new gc(c))}),l}const s=this;s.__swiper__=!0,s.support=lte(),s.device=J3e({userAgent:r.userAgent}),s.browser=eNe(),s.eventsListeners={},s.eventsAnyListeners=[],s.modules=[...s.__modules__],r.modules&&Array.isArray(r.modules)&&s.modules.push(...r.modules);const a={};s.modules.forEach(l=>{l({params:r,swiper:s,extendParams:a$e(r,a),on:s.on.bind(s),once:s.once.bind(s),off:s.off.bind(s),emit:s.emit.bind(s)})});const o=Ga({},SH,a);return s.params=Ga({},o,ED,r),s.originalParams=Ga({},s.params),s.passedParams=Ga({},r),s.params&&s.params.on&&Object.keys(s.params.on).forEach(l=>{s.on(l,s.params.on[l])}),s.params&&s.params.onAny&&s.onAny(s.params.onAny),Object.assign(s,{enabled:s.params.enabled,el:n,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return s.params.direction==="horizontal"},isVertical(){return s.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:s.params.allowSlideNext,allowSlidePrev:s.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:s.params.focusableElements,lastClickTime:Cx(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,evCache:[]},allowClick:!0,allowTouchMove:s.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),s.emit("_swiper"),s.params.init&&s.init(),s}getSlideIndex(e){const{slidesEl:n,params:r}=this,i=gu(n,`.${r.slideClass}, swiper-slide`),s=Ex(i[0]);return Ex(e)-s}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter(n=>n.getAttribute("data-swiper-slide-index")*1===e)[0])}recalcSlides(){const e=this,{slidesEl:n,params:r}=e;e.slides=gu(n,`.${r.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,n){const r=this;e=Math.min(Math.max(e,0),1);const i=r.minTranslate(),a=(r.maxTranslate()-i)*e+i;r.translateTo(a,typeof n>"u"?0:n),r.updateActiveIndex(),r.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const n=e.el.className.split(" ").filter(r=>r.indexOf("swiper")===0||r.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",n.join(" "))}getSlideClasses(e){const n=this;return n.destroyed?"":e.className.split(" ").filter(r=>r.indexOf("swiper-slide")===0||r.indexOf(n.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const n=[];e.slides.forEach(r=>{const i=e.getSlideClasses(r);n.push({slideEl:r,classNames:i}),e.emit("_slideClass",r,i)}),e.emit("_slideClasses",n)}slidesPerViewDynamic(e="current",n=!1){const r=this,{params:i,slides:s,slidesGrid:a,slidesSizesGrid:o,size:l,activeIndex:u}=r;let c=1;if(i.centeredSlides){let f=s[u].swiperSlideSize,d;for(let h=u+1;h<s.length;h+=1)s[h]&&!d&&(f+=s[h].swiperSlideSize,c+=1,f>l&&(d=!0));for(let h=u-1;h>=0;h-=1)s[h]&&!d&&(f+=s[h].swiperSlideSize,c+=1,f>l&&(d=!0))}else if(e==="current")for(let f=u+1;f<s.length;f+=1)(n?a[f]+o[f]-a[u]<l:a[f]-a[u]<l)&&(c+=1);else for(let f=u-1;f>=0;f-=1)a[u]-a[f]<l&&(c+=1);return c}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:n,params:r}=e;r.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(a=>{a.complete&&pE(e,a)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function i(){const a=e.rtlTranslate?e.translate*-1:e.translate,o=Math.min(Math.max(a,e.maxTranslate()),e.minTranslate());e.setTranslate(o),e.updateActiveIndex(),e.updateSlidesClasses()}let s;e.params.freeMode&&e.params.freeMode.enabled?(i(),e.params.autoHeight&&e.updateAutoHeight()):((e.params.slidesPerView==="auto"||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?s=e.slideTo(e.slides.length-1,0,!1,!0):s=e.slideTo(e.activeIndex,0,!1,!0),s||i()),r.watchOverflow&&n!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,n=!0){const r=this,i=r.params.direction;return e||(e=i==="horizontal"?"vertical":"horizontal"),e===i||e!=="horizontal"&&e!=="vertical"||(r.el.classList.remove(`${r.params.containerModifierClass}${i}`),r.el.classList.add(`${r.params.containerModifierClass}${e}`),r.emitContainerClasses(),r.params.direction=e,r.slides.forEach(s=>{e==="vertical"?s.style.width="":s.style.height=""}),r.emit("changeDirection"),n&&r.update()),r}changeLanguageDirection(e){const n=this;n.rtl&&e==="rtl"||!n.rtl&&e==="ltr"||(n.rtl=e==="rtl",n.rtlTranslate=n.params.direction==="horizontal"&&n.rtl,n.rtl?(n.el.classList.add(`${n.params.containerModifierClass}rtl`),n.el.dir="rtl"):(n.el.classList.remove(`${n.params.containerModifierClass}rtl`),n.el.dir="ltr"),n.update())}mount(e){const n=this;if(n.mounted)return!0;let r=e||n.params.el;if(typeof r=="string"&&(r=document.querySelector(r)),!r)return!1;r.swiper=n,r.shadowEl&&(n.isElement=!0);const i=()=>`.${(n.params.wrapperClass||"").trim().split(" ").join(".")}`;let a=(()=>r&&r.shadowRoot&&r.shadowRoot.querySelector?r.shadowRoot.querySelector(i()):gu(r,i())[0])();return!a&&n.params.createElements&&(a=j5("div",n.params.wrapperClass),r.append(a),gu(r,`.${n.params.slideClass}`).forEach(o=>{a.append(o)})),Object.assign(n,{el:r,wrapperEl:a,slidesEl:n.isElement?r:a,mounted:!0,rtl:r.dir.toLowerCase()==="rtl"||Xf(r,"direction")==="rtl",rtlTranslate:n.params.direction==="horizontal"&&(r.dir.toLowerCase()==="rtl"||Xf(r,"direction")==="rtl"),wrongRTL:Xf(a,"display")==="-webkit-box"}),!0}init(e){const n=this;return n.initialized||n.mount(e)===!1||(n.emit("beforeInit"),n.params.breakpoints&&n.setBreakpoint(),n.addClasses(),n.updateSize(),n.updateSlides(),n.params.watchOverflow&&n.checkOverflow(),n.params.grabCursor&&n.enabled&&n.setGrabCursor(),n.params.loop&&n.virtual&&n.params.virtual.enabled?n.slideTo(n.params.initialSlide+n.virtual.slidesBefore,0,n.params.runCallbacksOnInit,!1,!0):n.slideTo(n.params.initialSlide,0,n.params.runCallbacksOnInit,!1,!0),n.params.loop&&n.loopCreate(),n.attachEvents(),[...n.el.querySelectorAll('[loading="lazy"]')].forEach(i=>{i.complete?pE(n,i):i.addEventListener("load",s=>{pE(n,s.target)})}),n.initialized=!0,n.emit("init"),n.emit("afterInit")),n}destroy(e=!0,n=!0){const r=this,{params:i,el:s,wrapperEl:a,slides:o}=r;return typeof r.params>"u"||r.destroyed||(r.emit("beforeDestroy"),r.initialized=!1,r.detachEvents(),i.loop&&r.loopDestroy(),n&&(r.removeClasses(),s.removeAttribute("style"),a.removeAttribute("style"),o&&o.length&&o.forEach(l=>{l.classList.remove(i.slideVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),r.emit("destroy"),Object.keys(r.eventsListeners).forEach(l=>{r.off(l)}),e!==!1&&(r.el.swiper=null,G3e(r)),r.destroyed=!0),null}static extendDefaults(e){Ga(ED,e)}static get extendedDefaults(){return ED}static get defaults(){return SH}static installModule(e){gc.prototype.__modules__||(gc.prototype.__modules__=[]);const n=gc.prototype.__modules__;typeof e=="function"&&n.indexOf(e)<0&&n.push(e)}static use(e){return Array.isArray(e)?(e.forEach(n=>gc.installModule(n)),gc):(gc.installModule(e),gc)}};Object.keys(CD).forEach(t=>{Object.keys(CD[t]).forEach(e=>{Tx.prototype[e]=CD[t][e]})});Tx.use([tNe,nNe]);function fte(t,e,n,r){return t.params.createElements&&Object.keys(r).forEach(i=>{if(!n[i]&&n.auto===!0){let s=gu(t.el,`.${r[i]}`)[0];s||(s=j5("div",r[i]),s.className=r[i],t.el.append(s)),n[i]=s,e[i]=s}}),n}function o$e({swiper:t,extendParams:e,on:n,emit:r}){e({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),t.navigation={nextEl:null,prevEl:null};const i=p=>(Array.isArray(p)||(p=[p].filter(m=>!!m)),p);function s(p){let m;return p&&typeof p=="string"&&t.isElement&&(m=t.el.shadowRoot.querySelector(p),m)?m:(p&&(typeof p=="string"&&(m=[...document.querySelectorAll(p)]),t.params.uniqueNavElements&&typeof p=="string"&&m.length>1&&t.el.querySelectorAll(p).length===1&&(m=t.el.querySelector(p))),p&&!m?p:m)}function a(p,m){const g=t.params.navigation;p=i(p),p.forEach(v=>{v&&(v.classList[m?"add":"remove"](...g.disabledClass.split(" ")),v.tagName==="BUTTON"&&(v.disabled=m),t.params.watchOverflow&&t.enabled&&v.classList[t.isLocked?"add":"remove"](g.lockClass))})}function o(){const{nextEl:p,prevEl:m}=t.navigation;if(t.params.loop){a(m,!1),a(p,!1);return}a(m,t.isBeginning&&!t.params.rewind),a(p,t.isEnd&&!t.params.rewind)}function l(p){p.preventDefault(),!(t.isBeginning&&!t.params.loop&&!t.params.rewind)&&(t.slidePrev(),r("navigationPrev"))}function u(p){p.preventDefault(),!(t.isEnd&&!t.params.loop&&!t.params.rewind)&&(t.slideNext(),r("navigationNext"))}function c(){const p=t.params.navigation;if(t.params.navigation=fte(t,t.originalParams.navigation,t.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(p.nextEl||p.prevEl))return;let m=s(p.nextEl),g=s(p.prevEl);Object.assign(t.navigation,{nextEl:m,prevEl:g}),m=i(m),g=i(g);const v=(y,b)=>{y&&y.addEventListener("click",b==="next"?u:l),!t.enabled&&y&&y.classList.add(...p.lockClass.split(" "))};m.forEach(y=>v(y,"next")),g.forEach(y=>v(y,"prev"))}function f(){let{nextEl:p,prevEl:m}=t.navigation;p=i(p),m=i(m);const g=(v,y)=>{v.removeEventListener("click",y==="next"?u:l),v.classList.remove(...t.params.navigation.disabledClass.split(" "))};p.forEach(v=>g(v,"next")),m.forEach(v=>g(v,"prev"))}n("init",()=>{t.params.navigation.enabled===!1?h():(c(),o())}),n("toEdge fromEdge lock unlock",()=>{o()}),n("destroy",()=>{f()}),n("enable disable",()=>{let{nextEl:p,prevEl:m}=t.navigation;p=i(p),m=i(m),[...p,...m].filter(g=>!!g).forEach(g=>g.classList[t.enabled?"remove":"add"](t.params.navigation.lockClass))}),n("click",(p,m)=>{let{nextEl:g,prevEl:v}=t.navigation;g=i(g),v=i(v);const y=m.target;if(t.params.navigation.hideOnClick&&!v.includes(y)&&!g.includes(y)){if(t.pagination&&t.params.pagination&&t.params.pagination.clickable&&(t.pagination.el===y||t.pagination.el.contains(y)))return;let b;g.length?b=g[0].classList.contains(t.params.navigation.hiddenClass):v.length&&(b=v[0].classList.contains(t.params.navigation.hiddenClass)),r(b===!0?"navigationShow":"navigationHide"),[...g,...v].filter(x=>!!x).forEach(x=>x.classList.toggle(t.params.navigation.hiddenClass))}});const d=()=>{t.el.classList.remove(...t.params.navigation.navigationDisabledClass.split(" ")),c(),o()},h=()=>{t.el.classList.add(...t.params.navigation.navigationDisabledClass.split(" ")),f()};Object.assign(t.navigation,{enable:d,disable:h,update:o,init:c,destroy:f})}function Bf(t=""){return`.${t.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function l$e({swiper:t,extendParams:e,on:n,emit:r}){const i="swiper-pagination";e({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:v=>v,formatFractionTotal:v=>v,bulletClass:`${i}-bullet`,bulletActiveClass:`${i}-bullet-active`,modifierClass:`${i}-`,currentClass:`${i}-current`,totalClass:`${i}-total`,hiddenClass:`${i}-hidden`,progressbarFillClass:`${i}-progressbar-fill`,progressbarOppositeClass:`${i}-progressbar-opposite`,clickableClass:`${i}-clickable`,lockClass:`${i}-lock`,horizontalClass:`${i}-horizontal`,verticalClass:`${i}-vertical`,paginationDisabledClass:`${i}-disabled`}}),t.pagination={el:null,bullets:[]};let s,a=0;const o=v=>(Array.isArray(v)||(v=[v].filter(y=>!!y)),v);function l(){return!t.params.pagination.el||!t.pagination.el||Array.isArray(t.pagination.el)&&t.pagination.el.length===0}function u(v,y){const{bulletActiveClass:b}=t.params.pagination;v&&(v=v[`${y==="prev"?"previous":"next"}ElementSibling`],v&&(v.classList.add(`${b}-${y}`),v=v[`${y==="prev"?"previous":"next"}ElementSibling`],v&&v.classList.add(`${b}-${y}-${y}`)))}function c(v){const y=v.target.closest(Bf(t.params.pagination.bulletClass));if(!y)return;v.preventDefault();const b=Ex(y)*t.params.slidesPerGroup;if(t.params.loop){if(t.realIndex===b)return;(b<t.loopedSlides||b>t.slides.length-t.loopedSlides)&&t.loopFix({direction:b<t.loopedSlides?"prev":"next",activeSlideIndex:b,slideTo:!1}),t.slideToLoop(b)}else t.slideTo(b)}function f(){const v=t.rtl,y=t.params.pagination;if(l())return;let b=t.pagination.el;b=o(b);let x;const w=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,S=t.params.loop?Math.ceil(w/t.params.slidesPerGroup):t.snapGrid.length;if(t.params.loop?x=t.params.slidesPerGroup>1?Math.floor(t.realIndex/t.params.slidesPerGroup):t.realIndex:typeof t.snapIndex<"u"?x=t.snapIndex:x=t.activeIndex||0,y.type==="bullets"&&t.pagination.bullets&&t.pagination.bullets.length>0){const C=t.pagination.bullets;let _,E,T;if(y.dynamicBullets&&(s=rF(C[0],t.isHorizontal()?"width":"height",!0),b.forEach(k=>{k.style[t.isHorizontal()?"width":"height"]=`${s*(y.dynamicMainBullets+4)}px`}),y.dynamicMainBullets>1&&t.previousIndex!==void 0&&(a+=x-(t.previousIndex||0),a>y.dynamicMainBullets-1?a=y.dynamicMainBullets-1:a<0&&(a=0)),_=Math.max(x-a,0),E=_+(Math.min(C.length,y.dynamicMainBullets)-1),T=(E+_)/2),C.forEach(k=>{const M=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(A=>`${y.bulletActiveClass}${A}`)].map(A=>typeof A=="string"&&A.includes(" ")?A.split(" "):A).flat();k.classList.remove(...M)}),b.length>1)C.forEach(k=>{const M=Ex(k);M===x&&k.classList.add(...y.bulletActiveClass.split(" ")),y.dynamicBullets&&(M>=_&&M<=E&&k.classList.add(...`${y.bulletActiveClass}-main`.split(" ")),M===_&&u(k,"prev"),M===E&&u(k,"next"))});else{const k=C[x];if(k&&k.classList.add(...y.bulletActiveClass.split(" ")),y.dynamicBullets){const M=C[_],A=C[E];for(let N=_;N<=E;N+=1)C[N]&&C[N].classList.add(...`${y.bulletActiveClass}-main`.split(" "));u(M,"prev"),u(A,"next")}}if(y.dynamicBullets){const k=Math.min(C.length,y.dynamicMainBullets+4),M=(s*k-s)/2-T*s,A=v?"right":"left";C.forEach(N=>{N.style[t.isHorizontal()?A:"top"]=`${M}px`})}}b.forEach((C,_)=>{if(y.type==="fraction"&&(C.querySelectorAll(Bf(y.currentClass)).forEach(E=>{E.textContent=y.formatFractionCurrent(x+1)}),C.querySelectorAll(Bf(y.totalClass)).forEach(E=>{E.textContent=y.formatFractionTotal(S)})),y.type==="progressbar"){let E;y.progressbarOpposite?E=t.isHorizontal()?"vertical":"horizontal":E=t.isHorizontal()?"horizontal":"vertical";const T=(x+1)/S;let k=1,M=1;E==="horizontal"?k=T:M=T,C.querySelectorAll(Bf(y.progressbarFillClass)).forEach(A=>{A.style.transform=`translate3d(0,0,0) scaleX(${k}) scaleY(${M})`,A.style.transitionDuration=`${t.params.speed}ms`})}y.type==="custom"&&y.renderCustom?(C.innerHTML=y.renderCustom(t,x+1,S),_===0&&r("paginationRender",C)):(_===0&&r("paginationRender",C),r("paginationUpdate",C)),t.params.watchOverflow&&t.enabled&&C.classList[t.isLocked?"add":"remove"](y.lockClass)})}function d(){const v=t.params.pagination;if(l())return;const y=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length;let b=t.pagination.el;b=o(b);let x="";if(v.type==="bullets"){let w=t.params.loop?Math.ceil(y/t.params.slidesPerGroup):t.snapGrid.length;t.params.freeMode&&t.params.freeMode.enabled&&w>y&&(w=y);for(let S=0;S<w;S+=1)v.renderBullet?x+=v.renderBullet.call(t,S,v.bulletClass):x+=`<${v.bulletElement} class="${v.bulletClass}"></${v.bulletElement}>`}v.type==="fraction"&&(v.renderFraction?x=v.renderFraction.call(t,v.currentClass,v.totalClass):x=`<span class="${v.currentClass}"></span> / <span class="${v.totalClass}"></span>`),v.type==="progressbar"&&(v.renderProgressbar?x=v.renderProgressbar.call(t,v.progressbarFillClass):x=`<span class="${v.progressbarFillClass}"></span>`),t.pagination.bullets=[],b.forEach(w=>{v.type!=="custom"&&(w.innerHTML=x||""),v.type==="bullets"&&t.pagination.bullets.push(...w.querySelectorAll(Bf(v.bulletClass)))}),v.type!=="custom"&&r("paginationRender",b[0])}function h(){t.params.pagination=fte(t,t.originalParams.pagination,t.params.pagination,{el:"swiper-pagination"});const v=t.params.pagination;if(!v.el)return;let y;typeof v.el=="string"&&t.isElement&&(y=t.el.shadowRoot.querySelector(v.el)),!y&&typeof v.el=="string"&&(y=[...document.querySelectorAll(v.el)]),y||(y=v.el),!(!y||y.length===0)&&(t.params.uniqueNavElements&&typeof v.el=="string"&&Array.isArray(y)&&y.length>1&&(y=[...t.el.querySelectorAll(v.el)],y.length>1&&(y=y.filter(b=>ote(b,".swiper")[0]===t.el)[0])),Array.isArray(y)&&y.length===1&&(y=y[0]),Object.assign(t.pagination,{el:y}),y=o(y),y.forEach(b=>{v.type==="bullets"&&v.clickable&&b.classList.add(v.clickableClass),b.classList.add(v.modifierClass+v.type),b.classList.add(t.isHorizontal()?v.horizontalClass:v.verticalClass),v.type==="bullets"&&v.dynamicBullets&&(b.classList.add(`${v.modifierClass}${v.type}-dynamic`),a=0,v.dynamicMainBullets<1&&(v.dynamicMainBullets=1)),v.type==="progressbar"&&v.progressbarOpposite&&b.classList.add(v.progressbarOppositeClass),v.clickable&&b.addEventListener("click",c),t.enabled||b.classList.add(v.lockClass)}))}function p(){const v=t.params.pagination;if(l())return;let y=t.pagination.el;y&&(y=o(y),y.forEach(b=>{b.classList.remove(v.hiddenClass),b.classList.remove(v.modifierClass+v.type),b.classList.remove(t.isHorizontal()?v.horizontalClass:v.verticalClass),v.clickable&&b.removeEventListener("click",c)})),t.pagination.bullets&&t.pagination.bullets.forEach(b=>b.classList.remove(...v.bulletActiveClass.split(" ")))}n("init",()=>{t.params.pagination.enabled===!1?g():(h(),d(),f())}),n("activeIndexChange",()=>{typeof t.snapIndex>"u"&&f()}),n("snapIndexChange",()=>{f()}),n("snapGridLengthChange",()=>{d(),f()}),n("destroy",()=>{p()}),n("enable disable",()=>{let{el:v}=t.pagination;v&&(v=o(v),v.forEach(y=>y.classList[t.enabled?"remove":"add"](t.params.pagination.lockClass)))}),n("lock unlock",()=>{f()}),n("click",(v,y)=>{const b=y.target;let{el:x}=t.pagination;if(Array.isArray(x)||(x=[x].filter(w=>!!w)),t.params.pagination.el&&t.params.pagination.hideOnClick&&x&&x.length>0&&!b.classList.contains(t.params.pagination.bulletClass)){if(t.navigation&&(t.navigation.nextEl&&b===t.navigation.nextEl||t.navigation.prevEl&&b===t.navigation.prevEl))return;const w=x[0].classList.contains(t.params.pagination.hiddenClass);r(w===!0?"paginationShow":"paginationHide"),x.forEach(S=>S.classList.toggle(t.params.pagination.hiddenClass))}});const m=()=>{t.el.classList.remove(t.params.pagination.paginationDisabledClass);let{el:v}=t.pagination;v&&(v=o(v),v.forEach(y=>y.classList.remove(t.params.pagination.paginationDisabledClass))),h(),d(),f()},g=()=>{t.el.classList.add(t.params.pagination.paginationDisabledClass);let{el:v}=t.pagination;v&&(v=o(v),v.forEach(y=>y.classList.add(t.params.pagination.paginationDisabledClass))),p()};Object.assign(t.pagination,{enable:m,disable:g,render:d,update:f,init:h,destroy:p})}function u$e({swiper:t,extendParams:e,on:n}){e({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null}}),t.a11y={clicked:!1};let r=null;function i(A){const N=r;N.length!==0&&(N.innerHTML="",N.innerHTML=A)}const s=A=>(Array.isArray(A)||(A=[A].filter(N=>!!N)),A);function a(A=16){const N=()=>Math.round(16*Math.random()).toString(16);return"x".repeat(A).replace(/x/g,N)}function o(A){A=s(A),A.forEach(N=>{N.setAttribute("tabIndex","0")})}function l(A){A=s(A),A.forEach(N=>{N.setAttribute("tabIndex","-1")})}function u(A,N){A=s(A),A.forEach($=>{$.setAttribute("role",N)})}function c(A,N){A=s(A),A.forEach($=>{$.setAttribute("aria-roledescription",N)})}function f(A,N){A=s(A),A.forEach($=>{$.setAttribute("aria-controls",N)})}function d(A,N){A=s(A),A.forEach($=>{$.setAttribute("aria-label",N)})}function h(A,N){A=s(A),A.forEach($=>{$.setAttribute("id",N)})}function p(A,N){A=s(A),A.forEach($=>{$.setAttribute("aria-live",N)})}function m(A){A=s(A),A.forEach(N=>{N.setAttribute("aria-disabled",!0)})}function g(A){A=s(A),A.forEach(N=>{N.setAttribute("aria-disabled",!1)})}function v(A){if(A.keyCode!==13&&A.keyCode!==32)return;const N=t.params.a11y,$=A.target;t.pagination&&t.pagination.el&&($===t.pagination.el||t.pagination.el.contains(A.target))&&!A.target.matches(Bf(t.params.pagination.bulletClass))||(t.navigation&&t.navigation.nextEl&&$===t.navigation.nextEl&&(t.isEnd&&!t.params.loop||t.slideNext(),t.isEnd?i(N.lastSlideMessage):i(N.nextSlideMessage)),t.navigation&&t.navigation.prevEl&&$===t.navigation.prevEl&&(t.isBeginning&&!t.params.loop||t.slidePrev(),t.isBeginning?i(N.firstSlideMessage):i(N.prevSlideMessage)),t.pagination&&$.matches(Bf(t.params.pagination.bulletClass))&&$.click())}function y(){if(t.params.loop||t.params.rewind||!t.navigation)return;const{nextEl:A,prevEl:N}=t.navigation;N&&(t.isBeginning?(m(N),l(N)):(g(N),o(N))),A&&(t.isEnd?(m(A),l(A)):(g(A),o(A)))}function b(){return t.pagination&&t.pagination.bullets&&t.pagination.bullets.length}function x(){return b()&&t.params.pagination.clickable}function w(){const A=t.params.a11y;b()&&t.pagination.bullets.forEach(N=>{t.params.pagination.clickable&&(o(N),t.params.pagination.renderBullet||(u(N,"button"),d(N,A.paginationBulletMessage.replace(/\{\{index\}\}/,Ex(N)+1)))),N.matches(Bf(t.params.pagination.bulletActiveClass))?N.setAttribute("aria-current","true"):N.removeAttribute("aria-current")})}const S=(A,N,$)=>{o(A),A.tagName!=="BUTTON"&&(u(A,"button"),A.addEventListener("keydown",v)),d(A,$),f(A,N)},C=()=>{t.a11y.clicked=!0},_=()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{t.destroyed||(t.a11y.clicked=!1)})})},E=A=>{if(t.a11y.clicked)return;const N=A.target.closest(`.${t.params.slideClass}, swiper-slide`);if(!N||!t.slides.includes(N))return;const $=t.slides.indexOf(N)===t.activeIndex,D=t.params.watchSlidesProgress&&t.visibleSlides&&t.visibleSlides.includes(N);$||D||A.sourceCapabilities&&A.sourceCapabilities.firesTouchEvents||(t.isHorizontal()?t.el.scrollLeft=0:t.el.scrollTop=0,t.slideTo(t.slides.indexOf(N),0))},T=()=>{const A=t.params.a11y;A.itemRoleDescriptionMessage&&c(t.slides,A.itemRoleDescriptionMessage),A.slideRole&&u(t.slides,A.slideRole);const N=t.slides.length;A.slideLabelMessage&&t.slides.forEach(($,D)=>{const P=t.params.loop?parseInt($.getAttribute("data-swiper-slide-index"),10):D,O=A.slideLabelMessage.replace(/\{\{index\}\}/,P+1).replace(/\{\{slidesLength\}\}/,N);d($,O)})},k=()=>{const A=t.params.a11y;t.el.append(r);const N=t.el;A.containerRoleDescriptionMessage&&c(N,A.containerRoleDescriptionMessage),A.containerMessage&&d(N,A.containerMessage);const $=t.wrapperEl,D=A.id||$.getAttribute("id")||`swiper-wrapper-${a(16)}`,P=t.params.autoplay&&t.params.autoplay.enabled?"off":"polite";h($,D),p($,P),T();let{nextEl:O,prevEl:B}=t.navigation?t.navigation:{};O=s(O),B=s(B),O&&O.forEach(H=>S(H,D,A.nextSlideMessage)),B&&B.forEach(H=>S(H,D,A.prevSlideMessage)),x()&&(Array.isArray(t.pagination.el)?t.pagination.el:[t.pagination.el]).forEach(te=>{te.addEventListener("keydown",v)}),t.el.addEventListener("focus",E,!0),t.el.addEventListener("pointerdown",C,!0),t.el.addEventListener("pointerup",_,!0)};function M(){r&&r.length>0&&r.remove();let{nextEl:A,prevEl:N}=t.navigation?t.navigation:{};A=s(A),N=s(N),A&&A.forEach($=>$.removeEventListener("keydown",v)),N&&N.forEach($=>$.removeEventListener("keydown",v)),x()&&(Array.isArray(t.pagination.el)?t.pagination.el:[t.pagination.el]).forEach(D=>{D.removeEventListener("keydown",v)}),t.el.removeEventListener("focus",E,!0),t.el.removeEventListener("pointerdown",C,!0),t.el.removeEventListener("pointerup",_,!0)}n("beforeInit",()=>{r=j5("span",t.params.a11y.notificationClass),r.setAttribute("aria-live","assertive"),r.setAttribute("aria-atomic","true"),t.isElement&&r.setAttribute("slot","container-end")}),n("afterInit",()=>{t.params.a11y.enabled&&k()}),n("slidesLengthChange snapGridLengthChange slidesGridLengthChange",()=>{t.params.a11y.enabled&&T()}),n("fromEdge toEdge afterInit lock unlock",()=>{t.params.a11y.enabled&&y()}),n("paginationUpdate",()=>{t.params.a11y.enabled&&w()}),n("destroy",()=>{t.params.a11y.enabled&&M()})}function c$e({swiper:t,extendParams:e,on:n,emit:r,params:i}){t.autoplay={running:!1,paused:!1,timeLeft:0},e({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let s,a,o=i&&i.autoplay?i.autoplay.delay:3e3,l=i&&i.autoplay?i.autoplay.delay:3e3,u,c=new Date().getTime,f,d,h,p,m,g;function v(D){!t||t.destroyed||!t.wrapperEl||D.target===t.wrapperEl&&(t.wrapperEl.removeEventListener("transitionend",v),_())}const y=()=>{if(t.destroyed||!t.autoplay.running)return;t.autoplay.paused?f=!0:f&&(l=u,f=!1);const D=t.autoplay.paused?u:c+l-new Date().getTime();t.autoplay.timeLeft=D,r("autoplayTimeLeft",D,D/o),a=requestAnimationFrame(()=>{y()})},b=()=>{let D;return t.virtual&&t.params.virtual.enabled?D=t.slides.filter(O=>O.classList.contains("swiper-slide-active"))[0]:D=t.slides[t.activeIndex],D?parseInt(D.getAttribute("data-swiper-autoplay"),10):void 0},x=D=>{if(t.destroyed||!t.autoplay.running)return;cancelAnimationFrame(a),y();let P=typeof D>"u"?t.params.autoplay.delay:D;o=t.params.autoplay.delay,l=t.params.autoplay.delay;const O=b();!Number.isNaN(O)&&O>0&&typeof D>"u"&&(P=O,o=O,l=O),u=P;const B=t.params.speed,H=()=>{!t||t.destroyed||(t.params.autoplay.reverseDirection?!t.isBeginning||t.params.loop||t.params.rewind?(t.slidePrev(B,!0,!0),r("autoplay")):t.params.autoplay.stopOnLastSlide||(t.slideTo(t.slides.length-1,B,!0,!0),r("autoplay")):!t.isEnd||t.params.loop||t.params.rewind?(t.slideNext(B,!0,!0),r("autoplay")):t.params.autoplay.stopOnLastSlide||(t.slideTo(0,B,!0,!0),r("autoplay")),t.params.cssMode&&(c=new Date().getTime(),requestAnimationFrame(()=>{x()})))};return P>0?(clearTimeout(s),s=setTimeout(()=>{H()},P)):requestAnimationFrame(()=>{H()}),P},w=()=>{t.autoplay.running=!0,x(),r("autoplayStart")},S=()=>{t.autoplay.running=!1,clearTimeout(s),cancelAnimationFrame(a),r("autoplayStop")},C=(D,P)=>{if(t.destroyed||!t.autoplay.running)return;clearTimeout(s),D||(g=!0);const O=()=>{r("autoplayPause"),t.params.autoplay.waitForTransition?t.wrapperEl.addEventListener("transitionend",v):_()};if(t.autoplay.paused=!0,P){m&&(u=t.params.autoplay.delay),m=!1,O();return}u=(u||t.params.autoplay.delay)-(new Date().getTime()-c),!(t.isEnd&&u<0&&!t.params.loop)&&(u<0&&(u=0),O())},_=()=>{t.isEnd&&u<0&&!t.params.loop||t.destroyed||!t.autoplay.running||(c=new Date().getTime(),g?(g=!1,x(u)):x(),t.autoplay.paused=!1,r("autoplayResume"))},E=()=>{if(t.destroyed||!t.autoplay.running)return;const D=Su();D.visibilityState==="hidden"&&(g=!0,C(!0)),D.visibilityState==="visible"&&_()},T=D=>{D.pointerType==="mouse"&&(g=!0,C(!0))},k=D=>{D.pointerType==="mouse"&&t.autoplay.paused&&_()},M=()=>{t.params.autoplay.pauseOnMouseEnter&&(t.el.addEventListener("pointerenter",T),t.el.addEventListener("pointerleave",k))},A=()=>{t.el.removeEventListener("pointerenter",T),t.el.removeEventListener("pointerleave",k)},N=()=>{Su().addEventListener("visibilitychange",E)},$=()=>{Su().removeEventListener("visibilitychange",E)};n("init",()=>{t.params.autoplay.enabled&&(M(),N(),c=new Date().getTime(),w())}),n("destroy",()=>{A(),$(),t.autoplay.running&&S()}),n("beforeTransitionStart",(D,P,O)=>{t.destroyed||!t.autoplay.running||(O||!t.params.autoplay.disableOnInteraction?C(!0,!0):S())}),n("sliderFirstMove",()=>{if(!(t.destroyed||!t.autoplay.running)){if(t.params.autoplay.disableOnInteraction){S();return}d=!0,h=!1,g=!1,p=setTimeout(()=>{g=!0,h=!0,C(!0)},200)}}),n("touchEnd",()=>{if(!(t.destroyed||!t.autoplay.running||!d)){if(clearTimeout(p),clearTimeout(s),t.params.autoplay.disableOnInteraction){h=!1,d=!1;return}h&&t.params.cssMode&&_(),h=!1,d=!1}}),n("slideChange",()=>{t.destroyed||!t.autoplay.running||(m=!0)}),Object.assign(t.autoplay,{start:w,stop:S,pause:C,resume:_})}function bp(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function Yf(t,e){const n=["__proto__","constructor","prototype"];Object.keys(e).filter(r=>n.indexOf(r)<0).forEach(r=>{typeof t[r]>"u"?t[r]=e[r]:bp(e[r])&&bp(t[r])&&Object.keys(e[r]).length>0?e[r].__swiper__?t[r]=e[r]:Yf(t[r],e[r]):t[r]=e[r]})}function dte(t={}){return t.navigation&&typeof t.navigation.nextEl>"u"&&typeof t.navigation.prevEl>"u"}function hte(t={}){return t.pagination&&typeof t.pagination.el>"u"}function pte(t={}){return t.scrollbar&&typeof t.scrollbar.el>"u"}function mte(t=""){const e=t.split(" ").map(r=>r.trim()).filter(r=>!!r),n=[];return e.forEach(r=>{n.indexOf(r)<0&&n.push(r)}),n.join(" ")}function f$e(t=""){return t?t.includes("swiper-wrapper")?t:`swiper-wrapper ${t}`:"swiper-wrapper"}const gte=["eventsPrefix","modules","init","_direction","oneWayMovement","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopedSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideNextClass","slidePrevClass","wrapperClass","lazyPreloaderClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control","injectStyles","injectStylesUrls"];function CH(t={},e=!0){const n={on:{}},r={},i={};Yf(n,Tx.defaults),Yf(n,Tx.extendedDefaults),n._emitClasses=!0,n.init=!1;const s={},a=gte.map(l=>l.replace(/_/,"")),o=Object.assign({},t);return Object.keys(o).forEach(l=>{typeof t[l]>"u"||(a.indexOf(l)>=0?bp(t[l])?(n[l]={},i[l]={},Yf(n[l],t[l]),Yf(i[l],t[l])):(n[l]=t[l],i[l]=t[l]):l.search(/on[A-Z]/)===0&&typeof t[l]=="function"?e?r[`${l[2].toLowerCase()}${l.substr(3)}`]=t[l]:n.on[`${l[2].toLowerCase()}${l.substr(3)}`]=t[l]:s[l]=t[l])}),["navigation","pagination","scrollbar"].forEach(l=>{n[l]===!0&&(n[l]={}),n[l]===!1&&delete n[l]}),{params:n,passedParams:i,rest:s,events:r}}function d$e({el:t,nextEl:e,prevEl:n,paginationEl:r,scrollbarEl:i,swiper:s},a){dte(a)&&e&&n&&(s.params.navigation.nextEl=e,s.originalParams.navigation.nextEl=e,s.params.navigation.prevEl=n,s.originalParams.navigation.prevEl=n),hte(a)&&r&&(s.params.pagination.el=r,s.originalParams.pagination.el=r),pte(a)&&i&&(s.params.scrollbar.el=i,s.originalParams.scrollbar.el=i),s.init(t)}function h$e(t,e,n,r,i){const s=[];if(!e)return s;const a=l=>{s.indexOf(l)<0&&s.push(l)};if(n&&r){const l=r.map(i),u=n.map(i);l.join("")!==u.join("")&&a("children"),r.length!==n.length&&a("children")}return gte.filter(l=>l[0]==="_").map(l=>l.replace(/_/,"")).forEach(l=>{if(l in t&&l in e)if(bp(t[l])&&bp(e[l])){const u=Object.keys(t[l]),c=Object.keys(e[l]);u.length!==c.length?a(l):(u.forEach(f=>{t[l][f]!==e[l][f]&&a(l)}),c.forEach(f=>{t[l][f]!==e[l][f]&&a(l)}))}else t[l]!==e[l]&&a(l)}),s}function TD(t,e,n){t===void 0&&(t={});const r=[],i={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]},s=(a,o)=>{Array.isArray(a)&&a.forEach(l=>{const u=typeof l.type=="symbol";o==="default"&&(o="container-end"),u&&l.children?s(l.children,"default"):l.type&&(l.type.name==="SwiperSlide"||l.type.name==="AsyncComponentWrapper")?r.push(l):i[o]&&i[o].push(l)})};return Object.keys(t).forEach(a=>{if(typeof t[a]!="function")return;const o=t[a]();s(o,a)}),n.value=e.value,e.value=r,{slides:r,slots:i}}function p$e({swiper:t,slides:e,passedParams:n,changedParams:r,nextEl:i,prevEl:s,scrollbarEl:a,paginationEl:o}){const l=r.filter(_=>_!=="children"&&_!=="direction"&&_!=="wrapperClass"),{params:u,pagination:c,navigation:f,scrollbar:d,virtual:h,thumbs:p}=t;let m,g,v,y,b,x,w,S;r.includes("thumbs")&&n.thumbs&&n.thumbs.swiper&&u.thumbs&&!u.thumbs.swiper&&(m=!0),r.includes("controller")&&n.controller&&n.controller.control&&u.controller&&!u.controller.control&&(g=!0),r.includes("pagination")&&n.pagination&&(n.pagination.el||o)&&(u.pagination||u.pagination===!1)&&c&&!c.el&&(v=!0),r.includes("scrollbar")&&n.scrollbar&&(n.scrollbar.el||a)&&(u.scrollbar||u.scrollbar===!1)&&d&&!d.el&&(y=!0),r.includes("navigation")&&n.navigation&&(n.navigation.prevEl||s)&&(n.navigation.nextEl||i)&&(u.navigation||u.navigation===!1)&&f&&!f.prevEl&&!f.nextEl&&(b=!0);const C=_=>{t[_]&&(t[_].destroy(),_==="navigation"?(t.isElement&&(t[_].prevEl.remove(),t[_].nextEl.remove()),u[_].prevEl=void 0,u[_].nextEl=void 0,t[_].prevEl=void 0,t[_].nextEl=void 0):(t.isElement&&t[_].el.remove(),u[_].el=void 0,t[_].el=void 0))};r.includes("loop")&&t.isElement&&(u.loop&&!n.loop?x=!0:!u.loop&&n.loop?w=!0:S=!0),l.forEach(_=>{if(bp(u[_])&&bp(n[_]))Yf(u[_],n[_]);else{const E=n[_];(E===!0||E===!1)&&(_==="navigation"||_==="pagination"||_==="scrollbar")?E===!1&&C(_):u[_]=n[_]}}),l.includes("controller")&&!g&&t.controller&&t.controller.control&&u.controller&&u.controller.control&&(t.controller.control=u.controller.control),r.includes("children")&&e&&h&&u.virtual.enabled&&(h.slides=e,h.update(!0)),r.includes("children")&&e&&u.loop&&(S=!0),m&&p.init()&&p.update(!0),g&&(t.controller.control=u.controller.control),v&&(t.isElement&&(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-pagination"),t.el.shadowEl.appendChild(o)),o&&(u.pagination.el=o),c.init(),c.render(),c.update()),y&&(t.isElement&&(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-scrollbar"),t.el.shadowEl.appendChild(a)),a&&(u.scrollbar.el=a),d.init(),d.updateSize(),d.setTranslate()),b&&(t.isElement&&((!i||typeof i=="string")&&(i=document.createElement("div"),i.classList.add("swiper-button-next"),t.el.shadowEl.appendChild(i)),(!s||typeof s=="string")&&(s=document.createElement("div"),s.classList.add("swiper-button-prev"),t.el.shadowEl.appendChild(s))),i&&(u.navigation.nextEl=i),s&&(u.navigation.prevEl=s),f.init(),f.update()),r.includes("allowSlideNext")&&(t.allowSlideNext=n.allowSlideNext),r.includes("allowSlidePrev")&&(t.allowSlidePrev=n.allowSlidePrev),r.includes("direction")&&t.changeDirection(n.direction,!1),(x||S)&&t.loopDestroy(),(w||S)&&t.loopCreate(),t.update()}function m$e(t,e,n){if(!n)return null;const r=c=>{let f=c;return c<0?f=e.length+c:f>=e.length&&(f=f-e.length),f},i=t.value.isHorizontal()?{[t.value.rtlTranslate?"right":"left"]:`${n.offset}px`}:{top:`${n.offset}px`},{from:s,to:a}=n,o=t.value.params.loop?-e.length:0,l=t.value.params.loop?e.length*2:e.length,u=[];for(let c=o;c<l;c+=1)c>=s&&c<=a&&u.push(e[r(c)]);return u.map(c=>(c.props||(c.props={}),c.props.style||(c.props.style={}),c.props.swiperRef=t,c.props.style=i,ko(c.type,{...c.props},c.children)))}const g$e=t=>{!t||t.destroyed||!t.params.virtual||t.params.virtual&&!t.params.virtual.enabled||(t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.parallax&&t.params.parallax&&t.params.parallax.enabled&&t.parallax.setTranslate())},v$e={name:"Swiper",props:{tag:{type:String,default:"div"},wrapperTag:{type:String,default:"div"},modules:{type:Array,default:void 0},init:{type:Boolean,default:void 0},direction:{type:String,default:void 0},oneWayMovement:{type:Boolean,default:void 0},touchEventsTarget:{type:String,default:void 0},initialSlide:{type:Number,default:void 0},speed:{type:Number,default:void 0},cssMode:{type:Boolean,default:void 0},updateOnWindowResize:{type:Boolean,default:void 0},resizeObserver:{type:Boolean,default:void 0},nested:{type:Boolean,default:void 0},focusableElements:{type:String,default:void 0},width:{type:Number,default:void 0},height:{type:Number,default:void 0},preventInteractionOnTransition:{type:Boolean,default:void 0},userAgent:{type:String,default:void 0},url:{type:String,default:void 0},edgeSwipeDetection:{type:[Boolean,String],default:void 0},edgeSwipeThreshold:{type:Number,default:void 0},autoHeight:{type:Boolean,default:void 0},setWrapperSize:{type:Boolean,default:void 0},virtualTranslate:{type:Boolean,default:void 0},effect:{type:String,default:void 0},breakpoints:{type:Object,default:void 0},spaceBetween:{type:[Number,String],default:void 0},slidesPerView:{type:[Number,String],default:void 0},maxBackfaceHiddenSlides:{type:Number,default:void 0},slidesPerGroup:{type:Number,default:void 0},slidesPerGroupSkip:{type:Number,default:void 0},slidesPerGroupAuto:{type:Boolean,default:void 0},centeredSlides:{type:Boolean,default:void 0},centeredSlidesBounds:{type:Boolean,default:void 0},slidesOffsetBefore:{type:Number,default:void 0},slidesOffsetAfter:{type:Number,default:void 0},normalizeSlideIndex:{type:Boolean,default:void 0},centerInsufficientSlides:{type:Boolean,default:void 0},watchOverflow:{type:Boolean,default:void 0},roundLengths:{type:Boolean,default:void 0},touchRatio:{type:Number,default:void 0},touchAngle:{type:Number,default:void 0},simulateTouch:{type:Boolean,default:void 0},shortSwipes:{type:Boolean,default:void 0},longSwipes:{type:Boolean,default:void 0},longSwipesRatio:{type:Number,default:void 0},longSwipesMs:{type:Number,default:void 0},followFinger:{type:Boolean,default:void 0},allowTouchMove:{type:Boolean,default:void 0},threshold:{type:Number,default:void 0},touchMoveStopPropagation:{type:Boolean,default:void 0},touchStartPreventDefault:{type:Boolean,default:void 0},touchStartForcePreventDefault:{type:Boolean,default:void 0},touchReleaseOnEdges:{type:Boolean,default:void 0},uniqueNavElements:{type:Boolean,default:void 0},resistance:{type:Boolean,default:void 0},resistanceRatio:{type:Number,default:void 0},watchSlidesProgress:{type:Boolean,default:void 0},grabCursor:{type:Boolean,default:void 0},preventClicks:{type:Boolean,default:void 0},preventClicksPropagation:{type:Boolean,default:void 0},slideToClickedSlide:{type:Boolean,default:void 0},loop:{type:Boolean,default:void 0},loopedSlides:{type:Number,default:void 0},loopPreventsSliding:{type:Boolean,default:void 0},rewind:{type:Boolean,default:void 0},allowSlidePrev:{type:Boolean,default:void 0},allowSlideNext:{type:Boolean,default:void 0},swipeHandler:{type:Boolean,default:void 0},noSwiping:{type:Boolean,default:void 0},noSwipingClass:{type:String,default:void 0},noSwipingSelector:{type:String,default:void 0},passiveListeners:{type:Boolean,default:void 0},containerModifierClass:{type:String,default:void 0},slideClass:{type:String,default:void 0},slideActiveClass:{type:String,default:void 0},slideVisibleClass:{type:String,default:void 0},slideNextClass:{type:String,default:void 0},slidePrevClass:{type:String,default:void 0},wrapperClass:{type:String,default:void 0},lazyPreloaderClass:{type:String,default:void 0},runCallbacksOnInit:{type:Boolean,default:void 0},observer:{type:Boolean,default:void 0},observeParents:{type:Boolean,default:void 0},observeSlideChildren:{type:Boolean,default:void 0},a11y:{type:[Boolean,Object],default:void 0},autoplay:{type:[Boolean,Object],default:void 0},controller:{type:Object,default:void 0},coverflowEffect:{type:Object,default:void 0},cubeEffect:{type:Object,default:void 0},fadeEffect:{type:Object,default:void 0},flipEffect:{type:Object,default:void 0},creativeEffect:{type:Object,default:void 0},cardsEffect:{type:Object,default:void 0},hashNavigation:{type:[Boolean,Object],default:void 0},history:{type:[Boolean,Object],default:void 0},keyboard:{type:[Boolean,Object],default:void 0},mousewheel:{type:[Boolean,Object],default:void 0},navigation:{type:[Boolean,Object],default:void 0},pagination:{type:[Boolean,Object],default:void 0},parallax:{type:[Boolean,Object],default:void 0},scrollbar:{type:[Boolean,Object],default:void 0},thumbs:{type:Object,default:void 0},virtual:{type:[Boolean,Object],default:void 0},zoom:{type:[Boolean,Object],default:void 0},grid:{type:[Object],default:void 0},freeMode:{type:[Boolean,Object],default:void 0},enabled:{type:Boolean,default:void 0}},emits:["_beforeBreakpoint","_containerClasses","_slideClass","_slideClasses","_swiper","_freeModeNoMomentumRelease","activeIndexChange","afterInit","autoplay","autoplayStart","autoplayStop","autoplayPause","autoplayResume","autoplayTimeLeft","beforeDestroy","beforeInit","beforeLoopFix","beforeResize","beforeSlideChangeStart","beforeTransitionStart","breakpoint","changeDirection","click","disable","doubleTap","doubleClick","destroy","enable","fromEdge","hashChange","hashSet","init","keyPress","lock","loopFix","momentumBounce","navigationHide","navigationShow","navigationPrev","navigationNext","observerUpdate","orientationchange","paginationHide","paginationRender","paginationShow","paginationUpdate","progress","reachBeginning","reachEnd","realIndexChange","resize","scroll","scrollbarDragEnd","scrollbarDragMove","scrollbarDragStart","setTransition","setTranslate","slideChange","slideChangeTransitionEnd","slideChangeTransitionStart","slideNextTransitionEnd","slideNextTransitionStart","slidePrevTransitionEnd","slidePrevTransitionStart","slideResetTransitionStart","slideResetTransitionEnd","sliderMove","sliderFirstMove","slidesLengthChange","slidesGridLengthChange","snapGridLengthChange","snapIndexChange","swiper","tap","toEdge","touchEnd","touchMove","touchMoveOpposite","touchStart","transitionEnd","transitionStart","unlock","update","virtualUpdate","zoomChange"],setup(t,e){let{slots:n,emit:r}=e;const{tag:i,wrapperTag:s}=t,a=Mt("swiper"),o=Mt(null),l=Mt(!1),u=Mt(!1),c=Mt(null),f=Mt(null),d=Mt(null),h={value:[]},p={value:[]},m=Mt(null),g=Mt(null),v=Mt(null),y=Mt(null),{params:b,passedParams:x}=CH(t,!1);TD(n,h,p),d.value=x,p.value=h.value;const w=()=>{TD(n,h,p),l.value=!0};b.onAny=function(_){for(var E=arguments.length,T=new Array(E>1?E-1:0),k=1;k<E;k++)T[k-1]=arguments[k];r(_,...T)},Object.assign(b.on,{_beforeBreakpoint:w,_containerClasses(_,E){a.value=E}});const S={...b};if(delete S.wrapperClass,f.value=new Tx(S),f.value.virtual&&f.value.params.virtual.enabled){f.value.virtual.slides=h.value;const _={cache:!1,slides:h.value,renderExternal:E=>{o.value=E},renderExternalUpdate:!1};Yf(f.value.params.virtual,_),Yf(f.value.originalParams.virtual,_)}TQ(()=>{!u.value&&f.value&&(f.value.emitSlidesClasses(),u.value=!0);const{passedParams:_}=CH(t,!1),E=h$e(_,d.value,h.value,p.value,T=>T.props&&T.props.key);d.value=_,(E.length||l.value)&&f.value&&!f.value.destroyed&&p$e({swiper:f.value,slides:h.value,passedParams:_,changedParams:E,nextEl:m.value,prevEl:g.value,scrollbarEl:y.value,paginationEl:v.value}),l.value=!1}),MQ("swiper",f),kQ(o,()=>{O1e(()=>{g$e(f.value)})}),Wl(()=>{c.value&&(d$e({el:c.value,nextEl:m.value,prevEl:g.value,paginationEl:v.value,scrollbarEl:y.value,swiper:f.value},b),r("swiper",f.value))}),AQ(()=>{f.value&&!f.value.destroyed&&f.value.destroy(!0,!1)});function C(_){return b.virtual?m$e(f,_,o.value):(_.forEach((E,T)=>{E.props||(E.props={}),E.props.swiperRef=f,E.props.swiperSlideIndex=T}),_)}return()=>{const{slides:_,slots:E}=TD(n,h,p);return ko(i,{ref:c,class:mte(a.value)},[E["container-start"],ko(s,{class:f$e(b.wrapperClass)},[E["wrapper-start"],C(_),E["wrapper-end"]]),dte(t)&&[ko("div",{ref:g,class:"swiper-button-prev"}),ko("div",{ref:m,class:"swiper-button-next"})],pte(t)&&ko("div",{ref:y,class:"swiper-scrollbar"}),hte(t)&&ko("div",{ref:v,class:"swiper-pagination"}),E["container-end"]])}}},y$e={name:"SwiperSlide",props:{tag:{type:String,default:"div"},swiperRef:{type:Object,required:!1},swiperSlideIndex:{type:Number,default:void 0,required:!1},zoom:{type:Boolean,default:void 0,required:!1},lazy:{type:Boolean,default:!1,required:!1},virtualIndex:{type:[String,Number],default:void 0}},setup(t,e){let{slots:n}=e,r=!1;const{swiperRef:i}=t,s=Mt(null),a=Mt("swiper-slide"),o=Mt(!1);function l(f,d,h){d===s.value&&(a.value=h)}Wl(()=>{!i||!i.value||(i.value.on("_slideClass",l),r=!0)}),F1e(()=>{r||!i||!i.value||(i.value.on("_slideClass",l),r=!0)}),TQ(()=>{!s.value||!i||!i.value||(typeof t.swiperSlideIndex<"u"&&(s.value.swiperSlideIndex=t.swiperSlideIndex),i.value.destroyed&&a.value!=="swiper-slide"&&(a.value="swiper-slide"))}),AQ(()=>{!i||!i.value||i.value.off("_slideClass",l)});const u=L1e(()=>({isActive:a.value.indexOf("swiper-slide-active")>=0,isVisible:a.value.indexOf("swiper-slide-visible")>=0,isPrev:a.value.indexOf("swiper-slide-prev")>=0,isNext:a.value.indexOf("swiper-slide-next")>=0}));MQ("swiperSlide",u);const c=()=>{o.value=!0};return()=>ko(t.tag,{class:mte(`${a.value}`),ref:s,"data-swiper-slide-index":typeof t.virtualIndex>"u"&&i&&i.value&&i.value.params.loop?t.swiperSlideIndex:t.virtualIndex,onLoadCapture:c},t.zoom?ko("div",{class:"swiper-zoom-container","data-swiper-zoom":typeof t.zoom=="number"?t.zoom:void 0},[n.default&&n.default(u.value),t.lazy&&!o.value&&ko("div",{class:"swiper-lazy-preloader"})]):[n.default&&n.default(u.value),t.lazy&&!o.value&&ko("div",{class:"swiper-lazy-preloader"})])}};const b$e={components:{Swiper:v$e,SwiperSlide:y$e},setup(){return{onSwiper:n=>{},onSlideChange:()=>{},modules:[c$e,l$e,u$e,o$e]}}};const Dw=t=>(sl("data-v-0cd8b0d4"),t=t(),al(),t),x$e={class:"main"},w$e={class:"box_bg"},_$e={class:"bgcontain"},S$e=pv('<div class="left" data-v-0cd8b0d4><div class="title" data-v-0cd8b0d4><div class="logo" data-v-0cd8b0d4></div><ul data-v-0cd8b0d4><li data-v-0cd8b0d4>首页</li><li data-v-0cd8b0d4>职位库</li><li data-v-0cd8b0d4>备考资料</li><li data-v-0cd8b0d4>热门好课</li><li data-v-0cd8b0d4>师资介绍</li><li data-v-0cd8b0d4>关于我们</li></ul></div></div><div class="right" data-v-0cd8b0d4><div class="phone" data-v-0cd8b0d4></div></div>',2),C$e={class:"center"},E$e=Dw(()=>V("div",{class:"centerleft"},[V("ul",null,[V("li",null,"国家公务员"),V("li",null,"地方公务员"),V("li",null,"事业单位"),V("li",null,"教师资格"),V("li",null,"银行招聘"),V("li",null,"国企招聘")])],-1)),T$e={class:"centeright"},k$e=Dw(()=>V("img",{src:"https://attachment.gwy.com/img/202301131620460177838.jpg"},null,-1)),A$e=Dw(()=>V("img",{src:"https://stark-attachment.pxo.cn/img/202211151020530183082.jpg"},null,-1)),M$e=Dw(()=>V("img",{src:"https://stark-attachment.pxo.cn/img/202211102012580108891.jpg"},null,-1)),N$e=Dw(()=>V("img",{src:"https://attachment.gwy.com/img/202303150846260135328.jpg"},null,-1)),$$e=pv('<div class="bottom" data-v-0cd8b0d4><div class="left" data-v-0cd8b0d4><div class="top" data-v-0cd8b0d4><div class="logo" data-v-0cd8b0d4></div><div class="words" data-v-0cd8b0d4>职位搜索表</div><div data-v-0cd8b0d4><input type="text" id="typeId" placeholder="请选择省份" data-v-0cd8b0d4></div><div data-v-0cd8b0d4><input type="text" id="typeId" placeholder="请选择时间" data-v-0cd8b0d4></div><div class="btn" data-v-0cd8b0d4>查询</div></div><div class="bottom" data-v-0cd8b0d4><span data-v-0cd8b0d4>热门推荐：</span><ul data-v-0cd8b0d4><li data-v-0cd8b0d4><a target="_blank" href="https://www.gwy.com/gjgwy/248726.html" data-v-0cd8b0d4>国家公务员成绩已发布</a><div class="hotIcon" data-v-0cd8b0d4></div></li><li data-v-0cd8b0d4><a target="_blank" href="https://www.gwy.com/gjgwy/249333.html" data-v-0cd8b0d4>国考调剂公告|名单</a></li><li data-v-0cd8b0d4><a target="_blank" href="https://www.gwy.com/lngwy/249083.html" data-v-0cd8b0d4>辽宁成绩查询</a></li><li data-v-0cd8b0d4><a target="_blank" href="https://www.gwy.com/hljgwy/248775.html" data-v-0cd8b0d4>黑龙江成绩查询入口</a></li><li data-v-0cd8b0d4><a target="_blank" href="https://www.gwy.com/xjgwy/249766.html" data-v-0cd8b0d4>新疆兵团成绩</a></li></ul></div></div><div class="right" data-v-0cd8b0d4><div data-v-0cd8b0d4><div data-v-0cd8b0d4>微信扫一扫</div><div data-v-0cd8b0d4>咨询老师获取</div><div data-v-0cd8b0d4>获取2023省考院长私教营优惠</div></div><div class="shareCode" data-v-0cd8b0d4></div></div></div>',1);function I$e(t,e,n,r,i,s){const a=IO("SwiperSlide"),o=IO("Swiper");return De(),Re("div",x$e,[V("div",w$e,[V("div",_$e,[S$e,V("div",C$e,[E$e,V("div",T$e,[Fh(o,{modules:r.modules,"slides-per-view":1,loop:!0,speed:1200,effect:"fade",pagination:{clickable:!0},autoplay:{delay:2500,disableOnInteraction:!1},grabCursor:!0},{default:Eb(()=>[Fh(a,null,{default:Eb(()=>[k$e]),_:1}),Fh(a,null,{default:Eb(()=>[A$e]),_:1}),Fh(a,null,{default:Eb(()=>[M$e]),_:1}),Fh(a,null,{default:Eb(()=>[N$e]),_:1})]),_:1},8,["modules"])])]),$$e])])])}const D$e=xs(b$e,[["render",I$e],["__scopeId","data-v-0cd8b0d4"]]);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R$e=1e-7,O$e=1e-4;class q5{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class zA{refCount(e){return bo("refCount")}incRef(e){return bo("incRef")}timerAvailable(){return!0}time(e){return bo("time")}read(e){return bo("read")}readSync(e){return bo("readSync")}numDataIds(){return bo("numDataIds")}disposeData(e,n){return bo("disposeData")}write(e,n,r){return bo("write")}move(e,n,r,i,s){return bo("move")}memory(){return bo("memory")}floatPrecision(){return bo("floatPrecision")}epsilon(){return this.floatPrecision()===32?R$e:O$e}dispose(){return bo("dispose")}}function bo(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BA(t){let e=t.length,n=0,r=0;for(;e>0;)r=Math.random()*e|0,e--,n=t[e],t[e]=t[r],t[r]=n}function F$e(t,e){if(t.length!==e.length)throw Error(`Array sizes must match to be shuffled together First array length was ${t.length}Second array length was ${e.length}`);let n=t.length,r,i,s=0;for(;n>0;)s=Math.random()*n|0,n--,r=t[n],i=e[n],t[n]=t[s],e[n]=e[s],t[s]=r,e[s]=i}function kx(t,e,n){return Math.max(t,Math.min(e,n))}function X5(t){return t%2===0?t:t+1}function vte(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function L$e(t,e){const n=Math.random();return e*n+(1-n)*t}function P$e(t,e){let n=0;for(let r=0;r<t.length;r++){const i=Number(t[r])-Number(e[r]);n+=i*i}return n}function R(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function mi(t,e,n=""){R(Tn(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function nm(t){R(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function Xc(t,e=[],n=!1){if(e==null&&(e=[]),Array.isArray(t)||Ci(t)&&!n)for(let r=0;r<t.length;++r)Xc(t[r],e,n);else e.push(t);return e}function Ee(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function z$e(t){return t.length===0}function Tn(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function ni(t){return t%1===0}function B$e(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{const e=Math.exp(2*t);return(e-1)/(e+1)}}function ZE(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function U$e(t){const e=new Uint32Array(t);for(let n=0;n<t;++n)e[n]=n;return BA(e),e}function rp(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function iF(t,e=r=>0,n){return new Promise((r,i)=>{let s=0;const a=()=>{if(t()){r();return}s++;const o=e(s);if(n!=null&&s>=n){i();return}setTimeout(a,o)};a()})}function Y5(t,e){let n=1,r=-1;for(let s=0;s<t.length;++s)if(t[s]>=0)n*=t[s];else if(t[s]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${s}`);r=s}else if(t[s]<0)throw Error(`Shapes can not be < 0. Found ${t[s]} at dim ${s}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const i=t.slice();return i[r]=e/n,i}function Xt(t,e){const n=e.length;return t=t==null?e.map((r,i)=>i):[].concat(t),R(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),R(t.every(r=>ni(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function zd(t,e){const n=[],r=[],i=e!=null&&Array.isArray(e)&&e.length===0,s=e==null||i?null:Xt(e,t).sort();let a=0;for(let o=0;o<t.length;++o){if(s!=null){if(s[a]===o&&t[o]!==1)throw new Error(`Can't squeeze axis ${o} since its dim '${t[o]}' is not 1`);(s[a]==null||s[a]>o)&&t[o]===1&&(n.push(t[o]),r.push(o)),s[a]<=o&&a++}t[o]!==1&&(n.push(t[o]),r.push(o))}return{newShape:n,keptDims:r}}function fi(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else throw new Error(`Unknown data type ${t}`);return n}function rm(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function yte(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function bte(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function K5(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function Ci(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function JE(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function xte(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function vu(t){return typeof t=="string"||t instanceof String}function wte(t){return typeof t=="boolean"}function QE(t){return typeof t=="number"}function vv(t){return Array.isArray(t)?vv(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array?"int32":QE(t)?"float32":vu(t)?"string":wte(t)?"bool":"float32"}function xd(t){return!!(t&&t.constructor&&t.call&&t.apply)}function eT(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function It(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function _te(t,e,n){const r=new Array;if(e.length===1){const i=e[0];for(let s=0;s<i;s++)r[s]=n[t+s]}else{const i=e[0],s=e.slice(1),a=s.reduce((o,l)=>o*l);for(let o=0;o<i;o++)r[o]=_te(t+o*a,s,n)}return r}function no(t,e){if(t.length===0)return e[0];const n=t.reduce((r,i)=>r*i);if(n===0)return[];if(n!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}.`);return _te(0,t,e)}function Z5(t,e){const n=$i(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function $i(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function J5(t,e){const n=t.reduce((r,i)=>r*i,1);if(e==null||e==="float32")return no(t,new Float32Array(n));if(e==="int32")return no(t,new Int32Array(n));if(e==="bool")return no(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function Q5(t){t.forEach(e=>{R(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function $l(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let i=0;i<t.length-1;++i)r+=n[i]*t[i];return r}function yv(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let i=0;i<r.length-1;++i)r[i]=Math.floor(t/n[i]),t-=r[i]*n[i];return r[r.length-1]=t,r}function xp(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EH="tfjsflags";class Ste{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${n}.`),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const i=this.urlFlags[e];console.warn(`Setting feature override from URL ${e}: ${i}.`),this.set(e,i)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(xp(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=V$e(this.global.location.search);EH in e&&e[EH].split(",").forEach(r=>{const[i,s]=r.split(":");this.urlFlags[i]=G$e(i,s)})}}function V$e(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(W$e(e,r[0],r[1]),r.join("="))),e}function W$e(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function G$e(t,e){if(e=e.toLowerCase(),e==="true"||e==="false")return e==="true";if(`${+e}`===e)return+e;throw new Error(`Could not parse value flag value ${e} for flag ${t}.`)}function Ce(){return e4}let e4=null;function H$e(t){e4=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let kD;function Cte(){if(kD==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");kD=t}return kD}function j$e(){const t=Cte();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function t4(t,e){const n=j$e();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const Rw="Abs",bv="Acos",xv="Acosh",im="Add",Ow="AddN",UA="All",VA="Any",Fw="ArgMax",Lw="ArgMin",wv="Asin",_v="Asinh",Sv="Atan",Cv="Atanh",Ev="Atan2",Pw="AvgPool",WA="AvgPoolGrad",zw="AvgPool3D",GA="AvgPool3DGrad",Bw="BatchMatMul",Uw="BatchToSpaceND",HA="Bincount",Ete="BroadcastTo",Tv="Cast",kv="Ceil",Av="ClipByValue",jA="Complex",Vw="ComplexAbs",Ww="Concat",Gw="Conv2D",qA="Conv2DBackpropFilter",Hw="Conv2DBackpropInput",jw="Conv3D",XA="Conv3DBackpropFilterV2",YA="Conv3DBackpropInputV2",Mv="Cos",Nv="Cosh",qw="Cumsum",KA="CropAndResize",ZA="DenseBincount",JA="DepthToSpace",Xw="DepthwiseConv2dNative",QA="DepthwiseConv2dNativeBackpropFilter",eM="DepthwiseConv2dNativeBackpropInput",tM="Diag",Yw="Dilation2D",tT="Dilation2DBackpropInput",nT="Dilation2DBackpropFilter",$v="RealDiv",Iv="Elu",nM="EluGrad",Dv="Erf",Kw="Equal",Rv="Exp",Zw="ExpandDims",Ov="Expm1",rM="FFT",iM="Fill",sM="FlipLeftRight",Fv="Floor",Lv="FloorDiv",Jw="FusedBatchNorm",Qw="GatherV2",aM="GatherNd",e_="Greater",Pv="GreaterEqual",zv="Identity",oM="IFFT",lM="Imag",Bv="IsFinite",Uv="IsInf",Vv="IsNan",t_="LeakyRelu",n_="Less",r_="LessEqual",uM="LinSpace",Wv="Log",Gv="Log1p",i_="LogicalAnd",s_="LogicalNot",a_="LogicalOr",Tte="LogSoftmax",o_="LRN",cM="LRNGrad",l_="Max",Hv="Maximum",u_="MaxPool",fM="MaxPoolGrad",c_="MaxPool3D",dM="MaxPool3DGrad",hM="MaxPoolWithArgmax",f_="Mean",d_="Min",jv="Minimum",h_="MirrorPad",qv="Mod",pM="Multinomial",Xv="Multiply",p_="Neg",m_="NotEqual",mM="NonMaxSuppressionV3",gM="NonMaxSuppressionV4",vM="NonMaxSuppressionV5",g_="OnesLike",v_="OneHot",y_="Pack",b_="PadV2",q$e="Pool",Yv="Pow",x_="Prelu",yM="Prod",bM="Range",xM="Real",Kv="Reciprocal",Zv="Relu",w_="Reshape",__="ResizeNearestNeighbor",wM="ResizeNearestNeighborGrad",S_="ResizeBilinear",_M="ResizeBilinearGrad",Jv="Relu6",C_="Reverse",Qv="Round",ey="Rsqrt",SM="ScatterNd",E_="Select",ty="Selu",T_="Slice",ny="Sin",ry="Sinh",iy="Sign",sy="Sigmoid",ay="Softplus",oy="Sqrt",k_="Sum",A_="SpaceToBatchND",M_="SplitV",N_="Softmax",ly="SquaredDifference",CM="Square",uy="Sub",EM="SparseToDense",TM="StridedSlice",cy="Tan",fy="Tanh",dy="Tile",kM="TopK",$_="Transpose",AM="Unique",I_="Unpack",D_="UnsortedSegmentSum",R_="ZerosLike",hy="Step",rT="FromPixels",MM="RotateWithOffset",Ax="_FusedMatMul",Mx="FusedConv2D",Nx="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b0=t4("kernelRegistry",()=>new Map),$x=t4("gradRegistry",()=>new Map);function iT(t,e){const n=n4(t,e);return b0.get(n)}function sF(t){return $x.get(t)}function sT(t){const e=b0.entries(),n=[];for(;;){const{done:r,value:i}=e.next();if(r)break;const[s,a]=i,[o]=s.split("_");o===t&&n.push(a)}return n}function NM(t){const{kernelName:e,backendName:n}=t,r=n4(e,n);b0.has(r)&&console.warn(`The kernel '${e}' for backend '${n}' is already registered`),b0.set(r,t)}function kte(t){const{kernelName:e}=t;$x.has(e)&&Ce().getBool("DEBUG")&&console.warn(`Overriding the gradient for '${e}'`),$x.set(e,t)}function X$e(t,e){const n=n4(t,e);if(!b0.has(n))throw new Error(`The kernel '${t}' for backend '${e}' is not registered`);b0.delete(n)}function Y$e(t){if(!$x.has(t))throw new Error(`The gradient '${t}' for backend is not registered`);$x.delete(t)}function K$e(t,e){sT(t).forEach(r=>{const i=Object.assign({},r,{backendName:e});NM(i)})}function n4(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function of(t,e){return e==="string"?sm(t):Bd([t],e)}function Z$e(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function Bd(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=Xc(t)),Ce().getBool("DEBUG")&&yte(t,e),Z$e(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function Gi(){return Ce().platform.now()}function Ate(t,e){return Ce().platform.fetch(t,e)}function sm(t,e="utf-8"){return e=e||"utf-8",Ce().platform.encode(t,e)}function wp(t,e="utf-8"){return e=e||"utf-8",Ce().platform.decode(t,e)}const J$e=Object.freeze(Object.defineProperty({__proto__:null,arraysEqual:Tn,assert:R,assertNonNegativeIntegerDimensions:Q5,assertNonNull:nm,assertShapesMatch:mi,bytesFromStringArray:xte,bytesPerElement:JE,checkConversionForErrors:yte,clamp:kx,computeStrides:It,createScalarValue:of,createShuffledIndices:U$e,decodeString:wp,distSquared:P$e,encodeString:sm,fetch:Ate,flatten:Xc,getArrayFromDType:rm,getTypedArrayFromDType:fi,hasEncodingLoss:K5,indexToLoc:yv,inferDtype:vv,inferFromImplicitShape:Y5,isBoolean:wte,isFunction:xd,isInt:ni,isNumber:QE,isPromise:xp,isScalarShape:z$e,isString:vu,isTypedArray:Ci,isValidDtype:bte,locToIndex:$l,makeOnesTypedArray:Z5,makeZerosNestedTypedArray:J5,makeZerosTypedArray:$i,nearestDivisor:eT,nearestLargerEven:X5,now:Gi,parseAxisParam:Xt,randUniform:L$e,repeatedTry:iF,rightPad:rp,shuffle:BA,shuffleCombo:F$e,sizeFromShape:Ee,sizeToSquarishShape:ZE,squeezeShape:zd,sum:vte,tanh:B$e,toNestedArray:no,toTypedArray:Bd},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Q$e{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new tIe)}profileKernel(e,n,r){let i;const s=()=>{i=r()};let a;const o=Gi();if(this.backendTimer.timerAvailable()?a=this.backendTimer.time(s):(s(),i.map(u=>u.dataSync()),a=Promise.resolve({kernelMs:Gi()-o})),Ce().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let u=0;u<i.length;u++){const c=i[u];c.data().then(f=>{eIe(f,c.dtype,e)})}return{kernelName:e,outputs:i,inputs:n,timeMs:a.then(u=>u.kernelMs),extraInfo:a.then(u=>u.getExtraProfileInfo!=null?u.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:i,inputs:s,extraInfo:a}=e;r.forEach(o=>{Promise.all([o.data(),i,a]).then(l=>{this.logger.logKernelProfile(n,o,l[0],l[1],s,l[2])})})}}function eIe(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const i=t[r];if(isNaN(i)||!isFinite(i))return console.warn(`Found ${i} in the result of '${n}'`),!0}return!1}class tIe{logKernelProfile(e,n,r,i,s,a){const o=typeof i=="number"?rp(`${i}ms`,9):i.error,l=rp(e,25),u=n.rank,c=n.size,f=rp(n.shape.toString(),14);let d="";for(const h in s){const p=s[h];if(p!=null){const m=p.shape||n.shape,g=m.length;d+=`${h}: ${g}D ${g>0?m:""} `}}console.log(`%c${l}	%c${o}	%c${u}D ${f}	%c${c}	%c${d}	%c${a}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nIe(t,e,n){const r={},i={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const u=t[l],c=u.inputs;for(const f in c){const d=c[f];let h=!1;for(let p=0;p<e.length;p++)if(r[d.id]){u.outputs.forEach(m=>r[m.id]=!0),h=!0,i[u.id]=!0;break}if(h)break}}const s={};s[n.id]=!0;const a={};for(let l=t.length-1;l>=0;l--){const u=t[l],c=u.inputs;for(let f=0;f<u.outputs.length;f++)if(s[u.outputs[f].id]){for(const d in c)s[c[d].id]=!0,a[u.id]=!0;break}}const o=[];for(let l=0;l<t.length;l++){const u=t[l];if(i[u.id]&&a[u.id]){const c={};for(const d in u.inputs){const h=u.inputs[d];r[h.id]&&(c[d]=h)}const f=Object.assign({},u);f.inputs=c,f.outputs=u.outputs,o.push(f)}}return o}function rIe(t,e,n,r){for(let i=e.length-1;i>=0;i--){const s=e[i],a=[];if(s.outputs.forEach(l=>{const u=t[l.id];u!=null?a.push(u):a.push(null)}),s.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${s.kernelName}.`);const o=s.gradient(a);for(const l in s.inputs){if(!(l in o))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(o)}.`);const u=n(()=>o[l]());if(u.dtype!=="float32")throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${u.dtype}'`);const c=s.inputs[l];if(!Tn(u.shape,c.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input '${l}' has shape '${u.shape}', which does not match the shape of the input '${c.shape}'`);if(t[c.id]==null)t[c.id]=u;else{const f=t[c.id];t[c.id]=r(f,u),f.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TH=20,Rb=3,AD=7;function iIe(t,e,n,r){const i=It(e),s=sIe(t,e,n,i),a=e.length,o=mE(t,e,n,i,s),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${a}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(o.map(u=>"    "+u).join(`
`)),l.join(`
`)}function sIe(t,e,n,r){const i=Ee(e),s=r[r.length-1],a=new Array(s).fill(0),o=e.length,l=n==="complex64"?x1(t):t;if(o>1)for(let u=0;u<i/s;u++){const c=u*s;for(let f=0;f<s;f++)a[f]=Math.max(a[f],b1(l[c+f],0,n).length)}return a}function b1(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(AD))} + ${parseFloat(t[1].toFixed(AD))}j`:vu(t)?r=`'${t}'`:n==="bool"?r=Mte(t):r=parseFloat(t.toFixed(AD)).toString(),rp(r,e)}function Mte(t){return t===0?"false":"true"}function mE(t,e,n,r,i,s=!0){const a=n==="complex64"?2:1,o=e[0],l=e.length;if(l===0){if(n==="complex64"){const m=x1(t);return[b1(m[0],0,n)]}return n==="bool"?[Mte(t[0])]:[t[0].toString()]}if(l===1){if(o>TH){const g=Rb*a;let v=Array.from(t.slice(0,g)),y=Array.from(t.slice((o-Rb)*a,o*a));return n==="complex64"&&(v=x1(v),y=x1(y)),["["+v.map((b,x)=>b1(b,i[x],n)).join(", ")+", ..., "+y.map((b,x)=>b1(b,i[o-Rb+x],n)).join(", ")+"]"]}return["["+(n==="complex64"?x1(t):Array.from(t)).map((g,v)=>b1(g,i[v],n)).join(", ")+"]"]}const u=e.slice(1),c=r.slice(1),f=r[0]*a,d=[];if(o>TH){for(let m=0;m<Rb;m++){const g=m*f,v=g+f;d.push(...mE(t.slice(g,v),u,n,c,i,!1))}d.push("...");for(let m=o-Rb;m<o;m++){const g=m*f,v=g+f;d.push(...mE(t.slice(g,v),u,n,c,i,m===o-1))}}else for(let m=0;m<o;m++){const g=m*f,v=g+f;d.push(...mE(t.slice(g,v),u,n,c,i,m===o-1))}const h=l===2?",":"";d[0]="["+d[0]+h;for(let m=1;m<d.length-1;m++)d[m]=" "+d[m]+h;let p=`,
`;for(let m=2;m<l;m++)p+=`
`;return d[d.length-1]=" "+d[d.length-1]+"]"+(s?"":p),d}function x1(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Kr{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=Ee(e),r!=null){const i=r.length;R(i===this.size,()=>`Length of values '${i}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||rm(n,this.size),this.strides=It(e)}set(e,...n){n.length===0&&(n=[0]),R(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const i of e){if(i<0||i>=this.shape[n]){const s=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(s)}n++}let r=e[e.length-1];for(let i=0;i<e.length-1;++i)r+=this.strides[i]*e[i];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return cu().makeTensor(this.values,this.shape,this.dtype)}}let cu=null,_g=null;function aIe(t){cu=t}function oIe(t){_g=t}class kn{constructor(e,n,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=Ee(e),this.strides=It(e),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return _g.buffer(this.shape,this.dtype,e)}bufferSync(){return _g.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return no(this.shape,e)}arraySync(){return no(this.shape,this.dataSync())}async data(){this.throwIfDisposed();const e=cu().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>wp(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataSync(){this.throwIfDisposed();const e=cu().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>wp(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await cu().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(cu().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return _g.print(this,e)}clone(){return this.throwIfDisposed(),_g.clone(this)}toString(e=!1){const n=this.dataSync();return iIe(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),_g.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),cu().makeVariable(this,e,n,r)}}Object.defineProperty(kn,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function xe(){return t4("Tensor",()=>kn)}xe();class Ix extends kn{constructor(e,n,r,i){super(e.shape,e.dtype,e.dataId,i),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!Tn(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);cu().disposeTensor(this),this.dataId=e.dataId,cu().incRef(this,null)}dispose(){cu().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(Ix,Symbol.hasInstance,{value:t=>t instanceof kn&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var aF;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(aF||(aF={}));var oF;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(oF||(oF={}));var lF;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(lF||(lF={}));var uF;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(uF||(uF={}));var cF;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(cF||(cF={}));const lIe={float32:uF,int32:oF,bool:lF,complex64:cF};function wa(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return lIe[t][e]}function $M(t){return wa(t,"int32")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mr(t,e){if(t.dtype===e.dtype)return[t,e];const n=wa(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function Nte(t,e){R(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)}function IM(t,e){return e.some(n=>n.id===t.id)}function Yc(t){const e=[];return $te(t,e,new Set),e}function $te(t,e,n){if(t==null)return;if(t instanceof kn){e.push(t);return}if(!uIe(t))return;const r=t;for(const i in r){const s=r[i];n.has(s)||(n.add(s),$te(s,e,n))}}function uIe(t){return Array.isArray(t)||typeof t=="object"}const cIe=Object.freeze(Object.defineProperty({__proto__:null,assertTypesMatch:Nte,getTensorsInContainer:Yc,isTensorInList:IM,makeTypesMatch:mr},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MD(t){return t.kernelName!=null}class kH{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class x0{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new kH}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(console.warn(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new Q$e(this.backendInstance),!0}setupRegisteredKernels(){sT(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){sT(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof zA)&&typeof r.then=="function"){const i=++this.pendingBackendInitId,s=r.then(a=>i<this.pendingBackendInitId?!1:(this.registry[e]=a,this.pendingBackendInit=null,!0)).catch(a=>(i<this.pendingBackendInitId||(this.pendingBackendInit=null,console.warn(`Initialization of backend ${e} failed`),console.warn(a.stack||a.message)),!1));return this.pendingBackendInit=s,{success:s,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return console.warn(`Initialization of backend ${e} failed`),console.warn(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:i,asyncInit:s}=this.initializeBackend(r);if(s||i)return{name:r,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),i=r.backend,s=this.readSync(n),a=i.refCount(n);i.disposeData(n,!0),r.backend=e,e.move(n,s,r.shape,r.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let i;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(i),()=>(i=n(),i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),i))}scopedRun(e,n,r){e();try{const i=r();return n(),i}catch(i){throw n(),i}}nextTensorId(){return x0.nextTensorId++}nextVariableId(){return x0.nextVariableId++}clone(e){const n=J.runKernel(zv,{x:e}),r={x:e},i=a=>({x:()=>{const o="float32",l={x:a},u={dtype:o};return J.runKernel(Tv,l,u)}}),s=[];return this.addTapeNode(this.state.activeScope.name,r,[n],i,s,{}),n}runKernel(e,n,r){if(!(iT(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const i=this.backend.numDataIds();let s=0;r.forEach(l=>{s+=l.dtype==="complex64"?3:1});const a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=i-n-s-a;if(o>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${o} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const i=this.isTapeOn(),s=this.state.numBytes,a=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let o;this.backendName==null&&this.backend;let l;const u=MD(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(MD(e)){const{kernelName:p,inputs:m,attrs:g}=e;this.backendName==null&&this.backend;const v=iT(p,this.backendName);R(v!=null,()=>`Cannot find registered kernel '${p}' for backend '${this.backendName}'`),o=()=>{const y=this.backend.numDataIds();l=v.kernelFunc({inputs:m,attrs:g,backend:this.backend});const b=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(p,y,b);const x=b.map(w=>{if(w.rank!=null)return w;const{dataId:S,shape:C,dtype:_}=w;return this.makeTensorFromDataId(S,C,_)});if(i){const w=this.getTensorsForGradient(p,m,x);r=this.saveTensorsForBackwardMode(w)}return x}}else{const{forwardFunc:p}=e,m=g=>{i&&(r=g.map(v=>this.keep(this.clone(v))))};o=()=>{const g=this.backend.numDataIds();l=this.tidy(()=>p(this.backend,m));const v=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,g,v),v}}const{inputs:c,attrs:f}=e,d=MD(e)?null:e.backwardsFunc;let h;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=o():(h=this.profiler.profileKernel(u,c,()=>o()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(h),n=h.outputs)}),i&&this.addTapeNode(u,c,n,d,r,f),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(p=>c[p]!=null?c[p].shape:null),outputShapes:n.map(p=>p.shape),kernelTimeMs:h.timeMs,extraInfo:h.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const i=sF(e);if(i!=null){const s=i.inputsToSave||[],a=i.outputsToSave||[];let o;i.saveAllInputs?(R(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),o=Object.keys(n).map(u=>n[u])):o=s.map(u=>n[u]);const l=r.filter((u,c)=>a[c]);return o.concat(l)}return[]}makeTensor(e,n,r,i){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",i=i||this.backend;let s=e;r==="string"&&vu(e[0])&&(s=e.map(l=>sm(l)));const a=i.write(s,n,r),o=new kn(n,r,a,this.nextTensorId());if(this.trackTensor(o,i),r==="string"){const l=this.state.tensorInfo.get(a),u=xte(s);this.state.numBytes+=u-l.bytes,l.bytes=u}return o}makeTensorFromDataId(e,n,r,i){r=r||"float32";const s=new kn(n,r,e,this.nextTensorId());return this.trackTensor(s,i),s}makeVariable(e,n=!0,r,i){r=r||this.nextVariableId().toString(),i!=null&&i!==e.dtype&&(e=e.cast(i));const s=new Ix(e,n,r,this.nextTensorId());if(this.state.registeredVariables[s.name]!=null)throw new Error(`Variable with name ${s.name} was already registered`);return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*JE(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof Ix||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*JE(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(i=>i.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const i of this.state.activeProfile.kernels)i.kernelTimeMs=await i.kernelTimeMs,i.extraInfo=await i.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,i,s,a){const o={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:s},l=sF(e);l!=null&&(i=l.gradFunc),i!=null&&(o.gradient=u=>(u=u.map((c,f)=>{if(c==null){const d=r[f],h=$i(d.size,d.dtype);return this.makeTensor(h,d.shape,d.dtype)}return c}),i(u.length>1?u:u[0],s,a))),this.state.activeTape.push(o)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=Yc(e),r=new Set(n.map(s=>s.id));for(let s=0;s<this.state.activeScope.track.length;s++){const a=this.state.activeScope.track[s];!a.kept&&!r.has(a.id)&&a.dispose()}const i=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(s=>{!s.kept&&s.scopeId===i.id&&this.track(s)})}gradients(e,n,r,i=!1){if(R(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const s=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));R(s instanceof kn,()=>"The result y returned by f() must be a tensor.");const a=nIe(this.state.activeTape,n,s);if(!i&&a.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const o={};o[s.id]=r??fIe(s.shape),rIe(o,a,u=>this.tidy(u),dIe);const l=n.map(u=>o[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(const c of u.saved)c.dispose()}),this.state.activeTape=null),{value:s,grads:l}})}customGrad(e){return R(xd(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{R(n.every(o=>o instanceof kn),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const i={};n.forEach((o,l)=>{i[l]=o});const s=(o,l)=>(r=e(...n,l),R(r.value instanceof kn,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),R(xd(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),a=(o,l)=>{const u=r.gradFunc(o,l),c=Array.isArray(u)?u:[u];R(c.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),R(c.every(d=>d instanceof kn),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const f={};return c.forEach((d,h)=>{f[h]=()=>d}),f};return this.runKernelFunc({forwardFunc:s,backwardsFunc:a,inputs:i})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}async time(e){const n=Gi(),r=await this.backend.time(e);return r.wallMs=Gi()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new kH;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}x0.nextTensorId=0;x0.nextVariableId=0;function fIe(t){const e=Z5(Ee(t),"float32");return J.makeTensor(e,t,"float32")}function Ite(){const t=Cte();if(t._tfengine==null){const e=new Ste(t);t._tfengine=new x0(e)}return H$e(t._tfengine.ENV),aIe(()=>t._tfengine),t._tfengine}const J=Ite();function dIe(t,e){const n={a:t,b:e};return J.runKernel(im,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hIe(){return typeof navigator<"u"&&navigator!=null}function Dte(){if(hIe()){const t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function r4(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}const pIe=Object.freeze(Object.defineProperty({__proto__:null,isBrowser:r4,isMobile:Dte},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Du=Ce();Du.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Du.registerFlag("IS_BROWSER",()=>r4());Du.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Du.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Du.registerFlag("PROD",()=>!1);Du.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Du.getBool("DEBUG"));Du.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Du.registerFlag("IS_TEST",()=>!1);Du.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>!0);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ru(t,e){let n=t;if(Ci(t))return e==="string"?[]:[t.length];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||Ci(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&Ce().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&Rte(t,r,[]),r}function Rte(t,e,n){if(n=n||[],!Array.isArray(t)&&!Ci(t)){R(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}R(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),R(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let i=0;i<t.length;++i)Rte(t[i],r,n.concat(i))}function AH(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function z(t,e,n,r="numeric"){if(t instanceof kn)return AH(r,t.dtype,e,n),t;let i=vv(t);if(i!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),AH(r,i,e,n),t==null||!Ci(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const s=Ru(t,i);!Ci(t)&&!Array.isArray(t)&&(t=[t]);const o=i!=="string"?Bd(t,i):Xc(t,[],!0);return J.makeTensor(o,s,i)}function Dx(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((s,a)=>z(s,`${e}[${a}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ote="__op";function ee(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+Ote;const i=(...s)=>{J.startScope(n);try{const a=r(...s);return xp(a)&&console.error("Cannot return a Promise inside of tidy."),J.endScope(a),a}catch(a){throw J.endScope(null),a}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mIe(t,e){const n=z(t,"real","complex"),r=z(e,"imag","complex");mi(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const i={real:n,imag:r};return J.runKernel(jA,i)}const wd=ee({complex_:mIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ud(t,e,n,r){if(r==null&&(r=vv(t)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Ci(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){Q5(e);const i=Ee(e),s=Ee(n);R(i===s,()=>`Based on the provided shape, [${e}], the tensor should have ${i} values but has ${s}`);for(let a=0;a<n.length;++a){const o=n[a],l=a===n.length-1?o!==Ee(e.slice(a)):!0;R(n[a]===e[a]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!Ci(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?Bd(t,r):Xc(t,[],!0),J.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Il(t,e,n){const r=Ru(t,n);return Ud(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fF={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aT=4;async function dF(t,e){const n=[],r=[],i=Array.isArray(t)?t.map(a=>a.name):Object.keys(t);for(let a=0;a<i.length;++a){const o=i[a],l=Array.isArray(t)?t[a].tensor:t[o];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${o}': ${l.dtype}`);const u={name:o,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const c=new Promise(async f=>{const d=await l.bytes(),h=d.reduce((g,v)=>g+v.length,0)+aT*d.length,p=new Uint8Array(h);let m=0;for(let g=0;g<d.length;g++){const v=d[g],y=new Uint8Array(new Uint32Array([v.length]).buffer);p.set(y,m),m+=aT,p.set(v,m),m+=v.length}f(p)});r.push(c)}else r.push(l.data());e!=null&&(u.group=e),n.push(u)}const s=await Promise.all(r);return{data:gIe(s),specs:n}}function DM(t,e){const n={};let r,i=0;for(const s of e){const a=s.name,o=s.dtype,l=s.shape,u=Ee(l);let c;if("quantization"in s){const f=s.quantization;if(f.dtype==="uint8"||f.dtype==="uint16"){if(!("min"in f&&"scale"in f))throw new Error(`Weight ${s.name} with quantization ${f.dtype} doesn't have corresponding metadata min and scale.`)}else if(f.dtype==="float16"){if(o!=="float32")throw new Error(`Weight ${s.name} is quantized with ${f.dtype} which only supports weights of type float32 not ${o}.`)}else throw new Error(`Weight ${s.name} has unknown quantization dtype ${f.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const d=fF[f.dtype],h=t.slice(i,i+u*d),p=f.dtype==="uint8"?new Uint8Array(h):new Uint16Array(h);if(o==="float32")if(f.dtype==="uint8"||f.dtype==="uint16"){c=new Float32Array(p.length);for(let m=0;m<p.length;m++){const g=p[m];c[m]=g*f.scale+f.min}}else if(f.dtype==="float16")r===void 0&&(r=_Ie()),c=r(p);else throw new Error(`Unsupported quantization type ${f.dtype} for weight type float32.`);else if(o==="int32"){if(f.dtype!=="uint8"&&f.dtype!=="uint16")throw new Error(`Unsupported quantization type ${f.dtype} for weight type int32.`);c=new Int32Array(p.length);for(let m=0;m<p.length;m++){const g=p[m];c[m]=Math.round(g*f.scale+f.min)}}else throw new Error(`Unsupported dtype in weight '${a}': ${o}`);i+=u*d}else if(o==="string"){const f=Ee(s.shape);c=[];for(let d=0;d<f;d++){const h=new Uint32Array(t.slice(i,i+aT))[0];i+=aT;const p=new Uint8Array(t.slice(i,i+h));c.push(p),i+=h}}else{const f=fF[o],d=t.slice(i,i+u*f);if(o==="float32")c=new Float32Array(d);else if(o==="int32")c=new Int32Array(d);else if(o==="bool")c=new Uint8Array(d);else if(o==="complex64"){c=new Float32Array(d);const h=new Float32Array(c.length/2),p=new Float32Array(c.length/2);for(let v=0;v<h.length;v++)h[v]=c[v*2],p[v]=c[v*2+1];const m=Il(h,l,"float32"),g=Il(p,l,"float32");n[a]=wd(m,g),m.dispose(),g.dispose()}else throw new Error(`Unsupported dtype in weight '${a}': ${o}`);i+=u*f}o!=="complex64"&&(n[a]=Il(c,l,o))}return n}function gIe(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(s=>{if(e+=s.byteLength,n.push(s.byteLength===s.buffer.byteLength?s:new s.constructor(s)),!(s instanceof Float32Array||s instanceof Int32Array||s instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${s.constructor.name}`)});const r=new Uint8Array(e);let i=0;return n.forEach(s=>{r.set(new Uint8Array(s.buffer),i),i+=s.byteLength}),r.buffer}const i4=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function MH(t){return i4?Buffer.byteLength(t):new Blob([t]).size}function vIe(t){if(i4)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function yIe(t){if(i4){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function RM(t){if(t.length===1)return t[0];let e=0;t.forEach(i=>{e+=i.byteLength});const n=new Uint8Array(e);let r=0;return t.forEach(i=>{n.set(new Uint8Array(i),r),r+=i.byteLength}),n.buffer}function NH(t){const e="/";for(t=t.trim();t.endsWith(e);)t=t.slice(0,t.length-1);const n=t.split(e);return n[n.length-1]}function O_(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:MH(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:MH(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:t.weightData.byteLength}}function bIe(){const t=n=>{let r=n<<13,i=0;for(;!(r&8388608);)i-=8388608,r<<=1;return r&=-8388609,i+=947912704,r|i},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function xIe(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function wIe(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function _Ie(){const t=bIe(),e=xIe(),n=wIe();return r=>{const i=new ArrayBuffer(4*r.length),s=new Uint32Array(i);for(let a=0;a<r.length;a++){const o=r[a],l=t[n[o>>10]+(o&1023)]+e[o>>10];s[a]=l}return new Float32Array(i)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fr{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return fr.instance==null&&(fr.instance=new fr),fr.instance}static registerSaveRouter(e){fr.getInstance().saveRouters.push(e)}static registerLoadRouter(e){fr.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return fr.getHandlers(e,"save")}static getLoadHandlers(e,n){return fr.getHandlers(e,"load",n)}static getHandlers(e,n,r){const i=[];return(n==="load"?fr.getInstance().loadRouters:fr.getInstance().saveRouters).forEach(a=>{const o=a(e,r);o!==null&&i.push(o)}),i}}const SIe=t=>fr.registerSaveRouter(t),CIe=t=>fr.registerLoadRouter(t),s4=t=>fr.getSaveHandlers(t),a4=(t,e)=>fr.getLoadHandlers(t,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hF="tensorflowjs",pF=1,qh="models_store",Kf="model_info_store";function Fte(){if(!Ce().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function mF(t){const e=t.result;e.createObjectStore(qh,{keyPath:"modelPath"}),e.createObjectStore(Kf,{keyPath:"modelPath"})}class _p{constructor(e){if(this.indexedDB=Fte(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,i)=>{const s=this.indexedDB.open(hF,pF);s.onupgradeneeded=()=>mF(s),s.onsuccess=()=>{const a=s.result;if(n==null){const o=a.transaction(qh,"readonly"),u=o.objectStore(qh).get(this.modelPath);u.onsuccess=()=>{if(u.result==null)return a.close(),i(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(u.result.modelArtifacts)},u.onerror=c=>(a.close(),i(u.error)),o.oncomplete=()=>a.close()}else{const o=O_(n),l=a.transaction(Kf,"readwrite");let u=l.objectStore(Kf);const c=u.put({modelPath:this.modelPath,modelArtifactsInfo:o});let f;c.onsuccess=()=>{f=a.transaction(qh,"readwrite");const h=f.objectStore(qh).put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:o});h.onsuccess=()=>r({modelArtifactsInfo:o}),h.onerror=p=>{u=l.objectStore(Kf);const m=u.delete(this.modelPath);m.onsuccess=()=>(a.close(),i(h.error)),m.onerror=g=>(a.close(),i(h.error))}},c.onerror=d=>(a.close(),i(c.error)),l.oncomplete=()=>{f==null?a.close():f.oncomplete=()=>a.close()}}},s.onerror=a=>i(s.error)})}}_p.URL_SCHEME="indexeddb://";const Lte=t=>Ce().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(_p.URL_SCHEME)?EIe(t.slice(_p.URL_SCHEME.length)):null;fr.registerSaveRouter(Lte);fr.registerLoadRouter(Lte);function EIe(t){return new _p(t)}function TIe(t){return t.startsWith(_p.URL_SCHEME)?t.slice(_p.URL_SCHEME.length):t}class kIe{constructor(){this.indexedDB=Fte()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(hF,pF);r.onupgradeneeded=()=>mF(r),r.onsuccess=()=>{const i=r.result,s=i.transaction(Kf,"readonly"),o=s.objectStore(Kf).getAll();o.onsuccess=()=>{const l={};for(const u of o.result)l[u.modelPath]=u.modelArtifactsInfo;e(l)},o.onerror=l=>(i.close(),n(o.error)),s.oncomplete=()=>i.close()},r.onerror=i=>n(r.error)})}async removeModel(e){return e=TIe(e),new Promise((n,r)=>{const i=this.indexedDB.open(hF,pF);i.onupgradeneeded=()=>mF(i),i.onsuccess=()=>{const s=i.result,a=s.transaction(Kf,"readwrite"),o=a.objectStore(Kf),l=o.get(e);let u;l.onsuccess=()=>{if(l.result==null)return s.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const c=o.delete(e),f=()=>{u=s.transaction(qh,"readwrite");const h=u.objectStore(qh).delete(e);h.onsuccess=()=>n(l.result.modelArtifactsInfo),h.onerror=p=>r(l.error)};c.onsuccess=f,c.onerror=d=>(f(),s.close(),r(l.error))}},l.onerror=c=>(s.close(),r(l.error)),a.oncomplete=()=>{u==null?s.close():u.oncomplete=()=>s.close()}},i.onerror=s=>r(i.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ac="/",Sg="tensorflowjs_models",Pte="info",AIe="model_topology",MIe="weight_specs",NIe="weight_data",$Ie="model_metadata";function zte(t){return{info:[Sg,t,Pte].join(Ac),topology:[Sg,t,AIe].join(Ac),weightSpecs:[Sg,t,MIe].join(Ac),weightData:[Sg,t,NIe].join(Ac),modelMetadata:[Sg,t,$Ie].join(Ac)}}function IIe(t){const e=t.split(Ac);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(Ac)}function DIe(t){return t.startsWith(Sp.URL_SCHEME)?t.slice(Sp.URL_SCHEME.length):t}class Sp{constructor(e){if(!Ce().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=zte(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),i=O_(e);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,vIe(e.weightData));const s={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};return e.signature!=null&&(s.signature=e.signature),e.userDefinedMetadata!=null&&(s.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(s.modelInitializer=e.modelInitializer),this.LS.setItem(this.keys.modelMetadata,JSON.stringify(s)),{modelArtifactsInfo:i}}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${i.modelTopologyBytes}, weightSpecsBytes=${i.weightSpecsBytes}, weightDataBytes=${i.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const i=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(i==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=i;const s=this.LS.getItem(this.keys.modelMetadata);if(s!=null){const o=JSON.parse(s);n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,o.signature!=null&&(n.signature=o.signature),o.userDefinedMetadata!=null&&(n.userDefinedMetadata=o.userDefinedMetadata),o.modelInitializer!=null&&(n.modelInitializer=o.modelInitializer)}const a=this.LS.getItem(this.keys.weightData);if(a==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=yIe(a),n}}Sp.URL_SCHEME="localstorage://";const Bte=t=>Ce().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Sp.URL_SCHEME)?RIe(t.slice(Sp.URL_SCHEME.length)):null;fr.registerSaveRouter(Bte);fr.registerLoadRouter(Bte);function RIe(t){return new Sp(t)}class OIe{constructor(){R(Ce().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),R(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=Sg+Ac,r=Ac+Pte;for(let i=0;i<this.LS.length;++i){const s=this.LS.key(i);if(s.startsWith(n)&&s.endsWith(r)){const a=IIe(s);e[a]=JSON.parse(this.LS.getItem(s))}}return e}async removeModel(e){e=DIe(e);const n=zte(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return this.LS.removeItem(n.info),this.LS.removeItem(n.topology),this.LS.removeItem(n.weightSpecs),this.LS.removeItem(n.weightData),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gg="://";class la{constructor(){this.managers={}}static getInstance(){return la.instance==null&&(la.instance=new la),la.instance}static registerManager(e,n){R(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(Gg)&&(e=e.slice(0,e.indexOf(Gg))),R(e.length>0,()=>"scheme must not be an empty string.");const r=la.getInstance();R(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=this.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(this.getInstance().managers)}}function gE(t){if(t.indexOf(Gg)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${la.getSchemes().join(",")}`);return{scheme:t.split(Gg)[0],path:t.split(Gg)[1]}}async function Ute(t,e,n=!1){R(t!==e,()=>`Old path and new path are the same: '${t}'`);const r=fr.getLoadHandlers(t);R(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),R(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);const i=r[0],s=fr.getSaveHandlers(e);R(s.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),R(s.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);const a=s[0],o=gE(t).scheme,l=gE(t).path,u=o===gE(t).scheme,c=await i.load();n&&u&&await la.getManager(o).removeModel(l);const f=await a.save(c);return n&&!u&&await la.getManager(o).removeModel(l),f.modelArtifactsInfo}async function FIe(){const t=la.getSchemes(),e={};for(const n of t){const r=await la.getManager(n).listModels();for(const i in r){const s=n+Gg+i;e[s]=r[i]}}return e}async function LIe(t){const e=gE(t);return la.getManager(e.scheme).removeModel(e.path)}async function PIe(t,e){return Ute(t,e,!1)}async function zIe(t,e){return Ute(t,e,!0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BIe{fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}}if(Ce().get("IS_BROWSER")){Ce().setPlatform("browser",new BIe);try{la.registerManager(Sp.URL_SCHEME,new OIe)}catch{}try{la.registerManager(_p.URL_SCHEME,new kIe)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UIe={importFetch:()=>require("node-fetch")};let ND;class VIe{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return Ce().global.fetch!=null?Ce().global.fetch(e,n):(ND==null&&(ND=UIe.importFetch()),ND(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}}Ce().get("IS_NODE")&&Ce().setPlatform("node",new VIe);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jt(t,e="float32",n){return e=e||"float32",Q5(t),new Kr(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WIe(t,e){const n=z(t,"x","cast");if(!bte(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},i={dtype:e};return J.runKernel(Tv,r,i)}const ft=ee({cast_:WIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GIe(t){const n={x:z(t,"x","clone","string_or_numeric")};return J.runKernel(zv,n)}const ud=ee({clone_:GIe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vte(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ite();const HIe={buffer:Jt,cast:ft,clone:ud,print:Vte};oIe(HIe);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jIe="model",qIe=".json",XIe=".weights.bin";function $H(t){return new Promise(e=>setTimeout(e)).then(t)}class Cp{constructor(e){if(!Ce().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(Cp.URL_SCHEME)&&(e=e.slice(Cp.URL_SCHEME.length)),(e==null||e.length===0)&&(e=jIe),this.modelTopologyFileName=e+qIe,this.weightDataFileName=e+XIe}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const n=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],i={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:r};e.signature!=null&&(i.signature=e.signature),e.userDefinedMetadata!=null&&(i.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(i.modelInitializer=e.modelInitializer);const s=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),a=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor;if(a.download=this.modelTopologyFileName,a.href=s,await $H(()=>a.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const o=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;o.download=this.weightDataFileName,o.href=n,await $H(()=>o.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:O_(e)}}}}Cp.URL_SCHEME="downloads://";class YIe{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.files=e}async load(){const e=this.files[0],n=this.files.slice(1);return new Promise((r,i)=>{const s=new FileReader;s.onload=a=>{const o=JSON.parse(a.target.result),l=o.modelTopology;if(l==null){i(new Error(`modelTopology field is missing from file ${e.name}`));return}n.length===0&&r({modelTopology:l});const u=o.weightsManifest;if(u==null){i(new Error(`weightManifest field is missing from file ${e.name}`));return}let c;try{c=this.checkManifestAndWeightFiles(u,n)}catch(p){i(p);return}const f=[],d=[],h=[];u.forEach(p=>{p.paths.forEach(m=>{d.push(m),h.push(null)}),f.push(...p.weights)}),u.forEach(p=>{p.paths.forEach(m=>{const g=new FileReader;g.onload=v=>{const y=v.target.result,b=d.indexOf(m);if(h[b]=y,h.indexOf(null)===-1){const x={modelTopology:l,weightSpecs:f,weightData:RM(h),format:o.format,generatedBy:o.generatedBy,convertedBy:o.convertedBy};o.signature!=null&&(x.signature=o.signature),o.userDefinedMetadata!=null&&(x.userDefinedMetadata=o.userDefinedMetadata),o.modelInitializer!=null&&(x.modelInitializer=o.modelInitializer),r(x)}},g.onerror=v=>i(`Failed to weights data from file of path '${m}'.`),g.readAsArrayBuffer(c[m])})})},s.onerror=a=>i(`Failed to read model topology and weights manifest JSON from file '${e.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),s.readAsText(e)})}checkManifestAndWeightFiles(e,n){const r=[],i=n.map(a=>NH(a.name)),s={};for(const a of e)a.paths.forEach(o=>{const l=NH(o);if(r.indexOf(l)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${l}'`);if(r.push(l),i.indexOf(l)===-1)throw new Error(`Weight file with basename '${l}' is not provided.`);s[o]=n[i.indexOf(l)]});if(r.length!==n.length)throw new Error(`Mismatch in the number of files in weights manifest (${r.length}) and the number of weight files provided (${n.length}).`);return s}}const KIe=t=>Ce().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Cp.URL_SCHEME)?ZIe(t.slice(Cp.URL_SCHEME.length)):null;fr.registerSaveRouter(KIe);function ZIe(t="model"){return new Cp(t)}function JIe(t){return new YIe(t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IH(t,e,n,r){a(t),n=n??0,r=r??1,o(n,r);let i=0;const s=l=>(l.then(u=>{const c=n+ ++i/t.length*(r-n);return e(c),u}),l);function a(l){R(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function o(l,u){R(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),R(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${u}`),R(u>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${u}`)}return Promise.all(t.map(s))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Wte(t,e){e==null&&(e={});const n=e.fetchFunc==null?Ce().platform.fetch:e.fetchFunc,r=t.map(f=>n(f,e.requestInit,{isBinary:!0})),i=0,s=.5,o=(e.onProgress==null?await Promise.all(r):await IH(r,e.onProgress,i,s)).map(f=>f.arrayBuffer()),l=.5,u=1;return e.onProgress==null?await Promise.all(o):await IH(o,e.onProgress,l,u)}async function Gte(t,e="",n,r){return Hte(a=>Wte(a,{requestInit:r}))(t,e,n)}function Hte(t){return async(e,n="",r)=>{const i=e.map(()=>!1),s={},a=r!=null?r.map(()=>!1):[],o=[];if(e.forEach((h,p)=>{let m=0;h.weights.forEach(g=>{const v="quantization"in g?g.quantization.dtype:g.dtype,y=fF[v]*Ee(g.shape),b=()=>{i[p]=!0,s[p]==null&&(s[p]=[]),s[p].push({manifestEntry:g,groupOffset:m,sizeBytes:y})};r!=null?r.forEach((x,w)=>{x===g.name&&(b(),a[w]=!0)}):b(),o.push(g.name),m+=y})}),!a.every(h=>h)){const h=r.filter((p,m)=>!a[m]);throw new Error(`Could not find weights in manifest with names: ${h.join(", ")}. 
Manifest JSON has weights with names: ${o.join(", ")}.`)}const l=i.reduce((h,p,m)=>(p&&h.push(m),h),[]),u=[];l.forEach(h=>{e[h].paths.forEach(p=>{const m=n+(n.endsWith("/")?"":"/")+p;u.push(m)})});const c=await t(u),f={};let d=0;return l.forEach(h=>{const p=e[h].paths.length;let m=0;for(let x=0;x<p;x++)m+=c[d+x].byteLength;const g=new ArrayBuffer(m),v=new Uint8Array(g);let y=0;for(let x=0;x<p;x++){const w=new Uint8Array(c[d+x]);v.set(w,y),y+=w.byteLength}s[h].forEach(x=>{const w=g.slice(x.groupOffset,x.groupOffset+x.sizeBytes),S=DM(w,[x.manifestEntry]);for(const C in S)f[C]=S[C]}),d+=p}),f}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QIe="application/octet-stream",eDe="application/json";class o4{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(R(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=Ce().platform.fetch,R(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&R(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],i={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:r};e.signature!=null&&(i.signature=e.signature),e.userDefinedMetadata!=null&&(i.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(i.modelInitializer=e.modelInitializer),n.body.append("model.json",new Blob([JSON.stringify(i)],{type:eDe}),"model.json"),e.weightData!=null&&n.body.append("model.weights.bin",new Blob([e.weightData],{type:QIe}),"model.weights.bin");const s=await this.fetch(this.path,n);if(s.ok)return{modelArtifactsInfo:O_(e),responses:[s]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${s.status}.`)}async load(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let m=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?m+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":m+=" Please make sure the server is serving valid JSON for this request.",new Error(m)}const r=n.modelTopology,i=n.weightsManifest,s=n.generatedBy,a=n.convertedBy,o=n.format,l=n.signature,u=n.userDefinedMetadata;if(r==null&&i==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);let c,f;i!=null&&([c,f]=await this.loadWeights(i));const d={modelTopology:r,weightSpecs:c,weightData:f,generatedBy:s,convertedBy:a,format:o};l!=null&&(d.signature=l),u!=null&&(d.userDefinedMetadata=u);const h=n.modelInitializer;return h&&(d.modelInitializer=h),d}async loadWeights(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,i]=tDe(n),s=this.weightPathPrefix||r,a=[];for(const c of e)a.push(...c.weights);const o=[],l=[];for(const c of e)for(const f of c.paths)this.weightUrlConverter!=null?l.push(this.weightUrlConverter(f)):o.push(s+f+i);this.weightUrlConverter&&o.push(...await Promise.all(l));const u=await Wte(o,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[a,RM(u)]}}o4.URL_SCHEME_REGEX=/^https?:\/\//;function tDe(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),i=n>e?t.substring(n):"";return[r+"/",i]}function gF(t){return t.match(o4.URL_SCHEME_REGEX)!=null}const jte=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>gF(r)):n=gF(t),n)return l4(t,e)}return null};fr.registerSaveRouter(jte);fr.registerLoadRouter(jte);function l4(t,e){return new o4(t,e)}function oT(t,e){return l4(t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $D{constructor(e){this.modelArtifacts=e}async load(){return this.modelArtifacts}}class nDe{constructor(e){this.saveHandler=e}async save(e){return this.saveHandler(e)}}function rDe(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new $D(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new $D({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new $D({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))}function iDe(t){return new nDe(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sDe=Object.freeze(Object.defineProperty({__proto__:null,browserFiles:JIe,browserHTTPRequest:oT,concatenateArrayBuffers:RM,copyModel:PIe,decodeWeights:DM,encodeWeights:dF,fromMemory:rDe,getLoadHandlers:a4,getModelArtifactsInfoForJSON:O_,getSaveHandlers:s4,http:l4,isHTTPScheme:gF,listModels:FIe,loadWeights:Gte,moveModel:zIe,registerLoadRouter:CIe,registerSaveRouter:SIe,removeModel:LIe,weightsLoaderFactory:Hte,withSaveHandler:iDe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aDe(t,e,n=!1,r=!1){let i=z(t,"a","matMul"),s=z(e,"b","matMul");[i,s]=mr(i,s);const a={a:i,b:s},o={transposeA:n,transposeB:r};return J.runKernel(Bw,a,o)}const hn=ee({matMul_:aDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oDe(t,e,n=1,r=0){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const s={indices:z(t,"indices","oneHot","int32")},a={depth:e,onValue:n,offValue:r};return J.runKernel(v_,s,a)}const w0=ee({oneHot_:oDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lDe(t,e){const n=z(t,"x","transpose");if(e==null&&(e=n.shape.map((s,a)=>a).reverse()),R(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of perm ${e}.`),e.forEach(s=>{R(s>=0&&s<n.rank,()=>`All entries in 'perm' must be between 0 and ${n.rank-1} but got ${e}`)}),n.rank<=1)return n.clone();const r={x:n},i={perm:e};return J.runKernel($_,r,i)}const $n=ee({transpose_:lDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uDe(t,e,n){const r=z(t,"labels","confusionMatrix"),i=z(e,"predictions","confusionMatrix");R(n==null||n>0&&Number.isInteger(n),()=>`If provided, numClasses must be a positive integer, but got ${n}`),R(r.rank===1,()=>`Expected the rank of labels to be 1, but got ${r.rank}`),R(i.rank===1,()=>`Expected the rank of predictions to be 1, but got ${i.rank}`),R(r.shape[0]===i.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${i.shape[0]}. Labels and predictions should have the same number of elements.`),R(n>0&&Number.isInteger(n),()=>`numClasses is required to be a positive integer, but got ${n}`);const s=w0(ft(r,"int32"),n),a=w0(ft(i,"int32"),n),o=$n(s),l=hn(o,a);return ft(l,"int32")}const cDe=ee({confusionMatrix_:uDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fDe=Object.freeze(Object.defineProperty({__proto__:null,confusionMatrix:cDe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qte(t,e,n){if(nm(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=Ru(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Ud(t,e,r,n)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let ug;function dDe(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,i=!1,s=!1,a=!1,o=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)i=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)s=!0;else if(t.getContext!=null)a=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)o=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(i&&i&&t.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(iT(rT,J.backendName)!=null){const p={pixels:t},m={numChannels:e};return J.runKernel(rT,p,m)}const[u,c]=i?[t.videoWidth,t.videoHeight]:[t.width,t.height];let f;a?f=t.getContext("2d").getImageData(0,0,u,c).data:r||n?f=t.data:(s||i||o)&&(ug==null&&(ug=document.createElement("canvas").getContext("2d")),ug.canvas.width=u,ug.canvas.height=c,ug.drawImage(t,0,0,u,c),f=ug.getImageData(0,0,u,c).data);let d;if(e===4)d=new Int32Array(f);else{const p=u*c;d=new Int32Array(p*e);for(let m=0;m<p;m++)for(let g=0;g<e;++g)d[m*e+g]=f[m*4+g]}return qte(d,[c,u,e],"int32")}async function hDe(t,e){let n=z(t,"img","toPixels");if(!(t instanceof kn)){const u=n;n=ft(u,"int32"),u.dispose()}if(n.rank!==2&&n.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${n.rank}.`);const[r,i]=n.shape.slice(0,2),s=n.rank===2?1:n.shape[2];if(s>4||s===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${s}`);if(n.dtype!=="float32"&&n.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${n.dtype}. Please use float32 or int32 tensors.`);const a=await n.data(),o=n.dtype==="float32"?255:1,l=new Uint8ClampedArray(i*r*4);for(let u=0;u<r*i;++u){const c=[0,0,0,255];for(let d=0;d<s;d++){const h=a[u*s+d];if(n.dtype==="float32"){if(h<0||h>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${h}.`)}else if(n.dtype==="int32"&&(h<0||h>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${h}.`);s===1?(c[0]=h*o,c[1]=h*o,c[2]=h*o):c[d]=h*o}const f=u*4;l[f+0]=Math.round(c[0]),l[f+1]=Math.round(c[1]),l[f+2]=Math.round(c[2]),l[f+3]=Math.round(c[3])}if(e!=null){e.width=i,e.height=r;const u=e.getContext("2d"),c=new ImageData(l,i,r);u.putImageData(c,0,0)}return n!==t&&n.dispose(),l}const Xte=ee({fromPixels_:dDe}),pDe=Object.freeze(Object.defineProperty({__proto__:null,fromPixels:Xte,toPixels:hDe},Symbol.toStringTag,{value:"Module"}));function OM(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(Ee(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const i=e.shape,s=i[i.length-1];let a=1;for(let f=0;f<i.length-1;++f)a*=i[f];const o=t.shape,l=i.slice();l.pop();let u=1;for(let f=s;f<n;++f)u*=o[f],l.push(o[f]);const c=[...It(t.shape).map(f=>f/u),1].slice(0,s);return[l,a,u,c]}const mDe=Object.freeze(Object.defineProperty({__proto__:null,prepareAndValidate:OM},Symbol.toStringTag,{value:"Module"}));function u4(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,i=e.rank>1?e.rank-1:1,s=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${i}.`;if(n.rank<i)throw new Error(s+` update.rank < ${i}. `);if(t.length<r+(n.rank-i))throw new Error(s+` Output shape length < ${r+(n.rank-i)}`);if(n.rank!==i+t.length-r)throw new Error(s+` update.rank != ${i+t.length-r}`);for(let a=0;a<i;++a)if(n.shape[a]!==e.shape[a])throw new Error(s+` updates.shape[${a}] (${n.shape[a]}) != indices.shape[${a}] (${e.shape[a]}).`);for(let a=0;a<n.rank-i;++a)if(n.shape[a+i]!==t[a+r])throw new Error(s+` updates.shape[${a+i}] (${n.shape[a+i]}) != shape[${a+i}] (${t[a+i]})`)}function c4(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}u4(n,e,t)}function py(t,e,n){const r=e.shape.length,i=r>1?e.shape[r-1]:1,s=n.length;let a=1;for(let f=i;f<s;++f)a*=n[f];const o=i<1?1:i,l=Ee(e.shape)/o,u=[...It(n.slice(0,i)),1],c=Ee(n);return{sliceRank:i,numUpdates:l,sliceSize:a,strides:u,outputSize:c}}const gDe=Object.freeze(Object.defineProperty({__proto__:null,calculateShapes:py,validateInput:c4,validateUpdateShape:u4},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f4(t,e,n){const r=t.shape.length;R(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),R(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let i=0;i<r;++i)R(e[i]+n[i]<=t.shape[i],()=>`Error in slice${r}D: begin[${i}] + size[${i}] (${e[i]+n[i]}) would overflow input.shape[${i}] (${t.shape[i]})`)}function vE(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function Yte(t,e,n){const r=[];for(let i=0;i<t.length;i++)r[i]=Math.ceil((e[i]-t[i])/n[i]);return r}function Kte(t,e,n,r){const i=[...t];for(let s=i.length;s<r.length;s++)i.push(1);for(let s=0;s<n;s++)s===0?i[e]=1:(i.splice(e,0,1),i.pop());return i}function Zte(t,e,n){return n<=t?n:n-(e-1)}function Jte(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function Qte(t,e,n,r,i,s,a,o,l){const u=t.length;let c=new Array(u),f=new Array(u),d=new Array(u);if(e.length&&n>0){const h=e[0],p=n+1;c=ene(a,h,p,r,t),f=tne(o,h,p,i,t),d=Kte(s,h,p,t)}else for(let h=0;h<u;h++)c[h]=rne(a,r,s,t,h,l),f[h]=ine(o,i,s,t,h,l),d[h]=nne(s,h,l);return{begin:c,end:f,strides:d}}function ene(t,e,n,r,i){const s=[...i],a=Jte(n,e);for(let o=0;o<s.length;o++)if(a.indexOf(o)>-1)s[o]=0;else{const l=Zte(e,n,o);let u=r[l];t&1<<l&&(u=0),s[o]=u}return s}function tne(t,e,n,r,i){const s=[...i],a=Jte(n,e);for(let o=0;o<s.length;o++)if(a.indexOf(o)>-1)s[o]=Number.MAX_SAFE_INTEGER;else{const l=Zte(e,n,o);let u=r[l];t&1<<l&&(u=Number.MAX_SAFE_INTEGER),s[o]=u}for(let o=0;o<s.length;o++){const l=i[o];s[o]<0&&(s[o]+=l),s[o]=kx(0,s[o],i[o])}return s}function nne(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function rne(t,e,n,r,i,s){let a=e[i];const o=n[i]||1;(t&1<<i||s&1<<i||a==null)&&(o>0?a=Number.MIN_SAFE_INTEGER:a=Number.MAX_SAFE_INTEGER);const l=r[i];return a<0&&(a+=l),a=kx(0,a,l-1),a}function ine(t,e,n,r,i,s){let a=e[i];const o=n[i]||1;(t&1<<i||s&1<<i||a==null)&&(o>0?a=Number.MAX_SAFE_INTEGER:a=Number.MIN_SAFE_INTEGER);const l=r[i];return a<0&&(a+=l),o>0?a=kx(0,a,l):a=kx(-1,a,l-1),a}function d4(t,e,n){let r=n.length;for(let i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(let i=r+1;i<n.length;i++)if(e[i]>0||n[i]!==t[i])return!1;return!0}function h4(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function FM(t,e,n){let r;const i=t.shape.length;typeof e=="number"?r=[e,...new Array(i-1).fill(0)]:e.length<i?r=e.concat(new Array(i-e.length).fill(0)):r=e.slice(),r.forEach(a=>{R(a!==-1,()=>"slice() does not support negative begin indexing.")});let s;return n==null?s=new Array(i).fill(-1):typeof n=="number"?s=[n,...new Array(i-1).fill(-1)]:n.length<i?s=n.concat(new Array(i-n.length).fill(-1)):s=n,s=s.map((a,o)=>a>=0?a:(R(a===-1,()=>`Negative size values should be exactly -1 but got ${a} for the slice() size at index ${o}.`),t.shape[o]-r[o])),[r,s]}function p4(t,e,n,r,i,s,a,o,l){let u=e.slice(),c=n.slice(),f=r;r==null&&(f=new Array(u.length));const d=vE(a);if(d.length>1)throw new Error("Multiple ellipses in slice is not allowed.");if(a!==0&&o!==0)throw new Error("Using both ellipsisMask and newAxisMask is not yet supported.");if(a!==0&&l!==0)throw new Error("Using both ellipsisMask and shrinkAxisMask is not yet supported.");const h=t.length-u.length,p=vE(o),m=t.slice();p.forEach(C=>{u[C]=0,c[C]=1,m.splice(C,0,1)});const{begin:g,end:v,strides:y}=Qte(m,d,h,u,c,f,i,s,a);u=g,c=v,f=y;const b=vE(l);b.forEach(C=>{c[C]=u[C]+1,f[C]=1});const x=Yte(u,c,f),w=x.filter((C,_)=>b.indexOf(_)===-1);return{nonStrided:f.every(C=>C===1),$begin:u,$end:c,$strides:f,size:x,newShape:m,outShape:w}}const sne=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:f4,computeFlatOffset:h4,computeOutShape:Yte,getNormalizedAxes:Qte,isSliceContinous:d4,maskToAxes:vE,parseSliceParams:FM,sliceInfo:p4,startForAxis:rne,startIndicesWithElidedDims:ene,stopForAxis:ine,stopIndicesWithElidedDims:tne,stridesForAxis:nne,stridesWithElidedDims:Kte},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class am{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class qa{constructor(){this.classNameMap={}}static getMap(){return qa.instance==null&&(qa.instance=new qa),qa.instance}static register(e){qa.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function Oe(t){R(t.className!=null,()=>"Class being registered does not have the static className property defined."),R(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),R(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),qa.register(t)}const vDe=Object.freeze(Object.defineProperty({__proto__:null,Serializable:am,SerializationMap:qa,registerClass:Oe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yDe=.001,ane=.1;function bDe(t,e,n){return n==null&&(n=m4()),vF(t,e,(r,i)=>g4(r,i,n))}function m4(){return J.backend.floatPrecision()===32?yDe:ane}function vF(t,e,n){let r=!0;if((Ci(t)||Ci(e))&&(r=!1),Ci(t)&&Ci(e)&&(r=!0),r){const a=t.constructor.name,o=e.constructor.name;if(a!==o)throw new Error(`Arrays are of different type. Actual: ${a}. Expected: ${o}`)}if(Array.isArray(t)&&Array.isArray(e)){const a=Ru(t),o=Ru(e);if(!Tn(a,o))throw new Error(`Arrays have different shapes. Actual: [${a}]. Expected: [${o}]`)}const i=Ci(t)?t:Xc(t),s=Ci(e)?e:Xc(e);if(i.length!==s.length)throw new Error(`Arrays have different lengths actual: ${i.length} vs expected: ${s.length}.
Actual:   ${i}.
Expected: ${s}.`);for(let a=0;a<s.length;++a){const o=i[a],l=s[a];if(!n(o,l))throw new Error(`Arrays differ: actual[${a}] = ${o}, expected[${a}] = ${l}.
Actual:   ${i}.
Expected: ${s}.`)}}function xDe(t,e){t().then(()=>e.fail(),()=>e())}function wDe(t,e){const n=typeof e=="string"||typeof e=="number"||typeof e=="boolean"?[e]:e;return vu(t)||vu(t[0])||vu(e)||vu(e[0])?vF(t,n,(r,i)=>r==i):vF(t,e,(r,i)=>g4(r,i,0))}function _De(t,e,n){if(n==null&&(n=m4()),!g4(t,e,n))throw new Error(`Numbers differ: actual === ${t}, expected === ${e}`)}function g4(t,e,n){return!isFinite(t)&&!isFinite(e)?!0:!(isNaN(t)||isNaN(e)||Math.abs(t-e)>n)}function SDe(t,e,n){for(let r=0;r<t.length;r++)if(t[r]<e||t[r]>n)throw new Error(`Value out of range:${t[r]} low: ${e}, high: ${n}`)}function CDe(t,e){expect(new Float32Array(t)).toEqual(new Float32Array(e))}function one(t){for(let e=0;e<t.length;e++){const n=t[e];Array.isArray(n)?one(n):t[e]=sm(n)}return t}const EDe=Object.freeze(Object.defineProperty({__proto__:null,TEST_EPSILON_FLOAT16:ane,encodeStrings:one,expectArrayBuffersEqual:CDe,expectArraysClose:bDe,expectArraysEqual:wDe,expectNumbersClose:_De,expectPromiseToFail:xDe,expectValuesInRange:SDe,testEpsilon:m4},Symbol.toStringTag,{value:"Module"}));/** @license See the LICENSE file. */const lne="3.1.0";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TDe(){Ce().set("PROD",!0)}function kDe(){Ce().set("DEBUG",!0)}function ADe(){Ce().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function MDe(t){Ce().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function NDe(){J.disposeVariables()}function wc(){return J}function lT(){return J.memory()}function $De(t){return J.profile(t)}function oe(t,e){return J.tidy(t,e)}function Pt(t){Yc(t).forEach(n=>n.dispose())}function ai(t){return J.keep(t)}function IDe(t){return J.time(t)}function DDe(t){return J.setBackend(t)}function RDe(){return J.ready()}function ODe(){return J.backendName}function FDe(t){J.removeBackend(t)}function LDe(t){return J.findBackend(t)}function PDe(t){return J.findBackendFactory(t)}function v4(t,e,n=1){return J.registerBackend(t,e,n)}function une(){return J.backend}function zDe(t,e){Ce().setPlatform(t,e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BDe(t,e){let n=z(t,"a","add"),r=z(e,"b","add");[n,r]=mr(n,r);const i={a:n,b:r};return J.runKernel(im,i)}const We=ee({add_:BDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UDe(t,e){let n=z(t,"a","floorDiv"),r=z(e,"b","floorDiv");[n,r]=mr(n,r);const i={a:n,b:r};return J.runKernel(Lv,i)}const LM=ee({floorDiv_:UDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VDe(t,e){let n=z(t,"a","div"),r=z(e,"b","div");if([n,r]=mr(n,r),n.dtype==="int32"&&r.dtype==="int32")return LM(n,r);const i={a:n,b:r},s={};return J.runKernel($v,i,s)}const kt=ee({div_:VDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WDe(t,e){let n=z(t,"a","mul"),r=z(e,"b","mul");[n,r]=mr(n,r);const i={a:n,b:r};return J.runKernel(Xv,i)}const se=ee({mul_:WDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GDe(t){const e=z(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return J.runKernel(Vw,n)}else{const n={x:e};return J.runKernel(Rw,n)}}const Wr=ee({abs_:GDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HDe(t){const n={x:z(t,"x","acos")};return J.runKernel(bv,n)}const y4=ee({acos_:HDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jDe(t){const n={x:z(t,"x","acosh")};return J.runKernel(xv,n)}const b4=ee({acosh_:jDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qDe(t){R(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),R(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);const e=t.map((i,s)=>z(i,`tensors${s}`,"addN")),n=e[0];e.forEach(i=>{if(i.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(i=>{if(!Tn(i.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=e;return J.runKernel(Ow,r)}const cne=ee({addN_:qDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XDe(t,e=null,n=!1){const i={x:z(t,"x","all","bool")},s={axis:e,keepDims:n};return J.runKernel(UA,i,s)}const PM=ee({all_:XDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YDe(t,e=null,n=!1){const i={x:z(t,"x","any","bool")},s={axis:e,keepDims:n};return J.runKernel(VA,i,s)}const Rx=ee({any_:YDe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KDe(t,e=0){const r={x:z(t,"x","argMax")},i={axis:e};return J.runKernel(Fw,r,i)}const Ox=ee({argMax_:KDe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZDe(t,e=0){const r={x:z(t,"x","argMin")},i={axis:e};return J.runKernel(Lw,r,i)}const x4=ee({argMin_:ZDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JDe(t){const n={x:z(t,"x","asin")};return J.runKernel(wv,n)}const w4=ee({asin_:JDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QDe(t){const n={x:z(t,"x","asinh")};return J.runKernel(_v,n)}const _4=ee({asinh_:QDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eRe(t){const n={x:z(t,"x","atan")};return J.runKernel(Sv,n)}const S4=ee({atan_:eRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tRe(t,e){let n=z(t,"a","atan2"),r=z(e,"b","atan2");[n,r]=mr(n,r);const i={a:n,b:r};return J.runKernel(Ev,i)}const C4=ee({atan2_:tRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nRe(t){const n={x:z(t,"x","atanh")};return J.runKernel(Cv,n)}const E4=ee({atanh_:nRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F_(t,e,n,r,i="NHWC",s){const a=t[3],o=[...e,a],l=uf(i);return gi(t,o,n,s,r,null,null,l)}function ol(t,e,n,r,i,s,a="channelsLast"){const[o,l]=uT(e);let u;if(a==="channelsLast")u=[o,l,t[3],t[3]];else if(a==="channelsFirst")u=[o,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${a}`);return gi(t,u,n,r,i,s,!1,a)}function lf(t,e,n,r,i,s,a="NDHWC"){const[o,l,u]=yF(e);let c,f;if(a==="NDHWC")f="channelsLast",c=[o,l,u,t[4],t[4]];else if(a==="NCDHW")f="channelsFirst",c=[o,l,u,t[1],t[1]];else throw new Error(`Unknown dataFormat ${a}`);return Vd(t,c,n,r,i,!1,f,s)}function gi(t,e,n,r,i,s,a=!1,o="channelsLast"){let[l,u,c,f]=[-1,-1,-1,-1];if(o==="channelsLast")[l,u,c,f]=t;else if(o==="channelsFirst")[l,f,u,c]=t;else throw new Error(`Unknown dataFormat ${o}`);const[d,h,,p]=e,[m,g]=uT(n),[v,y]=uT(r),b=Hg(d,v),x=Hg(h,y),{padInfo:w,outHeight:S,outWidth:C}=sRe(i,u,c,m,g,b,x,s,o),_=a?p*f:p;let E;return o==="channelsFirst"?E=[l,_,S,C]:o==="channelsLast"&&(E=[l,S,C,_]),{batchSize:l,dataFormat:o,inHeight:u,inWidth:c,inChannels:f,outHeight:S,outWidth:C,outChannels:_,padInfo:w,strideHeight:m,strideWidth:g,filterHeight:d,filterWidth:h,effectiveFilterHeight:b,effectiveFilterWidth:x,dilationHeight:v,dilationWidth:y,inShape:t,outShape:E,filterShape:e}}function Vd(t,e,n,r,i,s=!1,a="channelsLast",o){let[l,u,c,f,d]=[-1,-1,-1,-1,-1];if(a==="channelsLast")[l,u,c,f,d]=t;else if(a==="channelsFirst")[l,d,u,c,f]=t;else throw new Error(`Unknown dataFormat ${a}`);const[h,p,m,,g]=e,[v,y,b]=yF(n),[x,w,S]=yF(r),C=Hg(h,x),_=Hg(p,w),E=Hg(m,S),{padInfo:T,outDepth:k,outHeight:M,outWidth:A}=aRe(i,u,c,f,v,y,b,C,_,E,o),N=s?g*d:g;let $;return a==="channelsFirst"?$=[l,N,k,M,A]:a==="channelsLast"&&($=[l,k,M,A,N]),{batchSize:l,dataFormat:a,inDepth:u,inHeight:c,inWidth:f,inChannels:d,outDepth:k,outHeight:M,outWidth:A,outChannels:N,padInfo:T,strideDepth:v,strideHeight:y,strideWidth:b,filterDepth:h,filterHeight:p,filterWidth:m,effectiveFilterDepth:C,effectiveFilterHeight:_,effectiveFilterWidth:E,dilationDepth:x,dilationHeight:w,dilationWidth:S,inShape:t,outShape:$,filterShape:e}}function rRe(t,e,n,r,i){r==null&&(r=T4(t,e,n));const s=t[0],a=t[1],o=ip((s-e+2*r)/n+1,i),l=ip((a-e+2*r)/n+1,i);return[o,l]}function iRe(t,e,n,r,i,s){i==null&&(i=T4(t,e,r));const a=t[0],o=t[1],l=t[2],u=ip((a-e+2*i)/r+1,s),c=ip((o-e+2*i)/r+1,s),f=ip((l-e+2*i)/r+1,s);return[u,c,f,n]}function T4(t,e,n,r=1){const i=Hg(e,r);return Math.floor((t[0]*(n-1)-n+i)/2)}function uT(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function yF(t){return typeof t=="number"?[t,t,t]:t}function Hg(t,e){return e<=1?t:t+(t-1)*(e-1)}function sRe(t,e,n,r,i,s,a,o,l){let u,c,f;if(typeof t=="number"){u={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const h=rRe([e,n],s,r,t,o);c=h[0],f=h[1]}else if(t==="same"){c=Math.ceil(e/r),f=Math.ceil(n/i);const d=Math.max(0,(c-1)*r+s-e),h=Math.max(0,(f-1)*i+a-n),p=Math.floor(d/2),m=d-p,g=Math.floor(h/2),v=h-g;u={top:p,bottom:m,left:g,right:v,type:"SAME"}}else if(t==="valid")u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-s+1)/r),f=Math.ceil((n-a+1)/i);else if(typeof t=="object"){const d=l==="channelsLast"?t[1][0]:t[2][0],h=l==="channelsLast"?t[1][1]:t[2][1],p=l==="channelsLast"?t[2][0]:t[3][0],m=l==="channelsLast"?t[2][1]:t[3][1];u={top:d,bottom:h,left:p,right:m,type:d===0&&h===0&&p===0&&m===0?"VALID":"EXPLICIT"},c=ip((e-s+d+h)/r+1,o),f=ip((n-a+p+m)/i+1,o)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:u,outHeight:c,outWidth:f}}function aRe(t,e,n,r,i,s,a,o,l,u,c){let f,d,h,p;if(typeof t=="number"){f={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const g=iRe([e,n,r,1],o,1,i,t,c);d=g[0],h=g[1],p=g[2]}else if(t==="same"){d=Math.ceil(e/i),h=Math.ceil(n/s),p=Math.ceil(r/a);const m=(d-1)*i+o-e,g=(h-1)*s+l-n,v=(p-1)*a+u-r,y=Math.floor(m/2),b=m-y,x=Math.floor(g/2),w=g-x,S=Math.floor(v/2),C=v-S;f={top:x,bottom:w,left:S,right:C,front:y,back:b,type:"SAME"}}else if(t==="valid")f={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},d=Math.ceil((e-o+1)/i),h=Math.ceil((n-l+1)/s),p=Math.ceil((r-u+1)/a);else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:f,outDepth:d,outHeight:h,outWidth:p}}function ip(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function _d(t){const[e,n,r]=uT(t);return e===1&&n===1&&r===1}function Ri(t,e){return _d(t)||_d(e)}function uf(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oRe(t,e){const r={x:z(t,"x","reshape","string_or_numeric")},i={shape:e};return J.runKernel(w_,r,i)}const ce=ee({reshape_:oRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lRe(t,e,n,r,i){const s=z(t,"x","avgPool","float32"),a=1;R(Ri(n,a),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`);let o=s,l=!1;s.rank===3&&(l=!0,o=ce(s,[1,s.shape[0],s.shape[1],s.shape[2]])),R(o.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${o.rank}.`),i!=null&&R(ni(r),()=>`Error in avgPool: pad must be an integer when using, dimRoundingMode ${i} but got pad ${r}.`);const u={x:o},c={filterSize:e,strides:n,pad:r,dimRoundingMode:i};let f=J.runKernel(Pw,u,c);return f=ft(f,s.dtype),l?ce(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const L_=ee({avgPool_:lRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uRe(t,e,n,r,i,s="NDHWC"){const a=z(t,"x","avgPool3d","float32");let o=a,l=!1;a.rank===4&&(l=!0,o=ce(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),R(o.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${o.rank}.`),R(s==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),i!=null&&R(ni(r),()=>`Error in avgPool3d: pad must be an integer when using, dimRoundingMode ${i} but got pad ${r}.`);const u={x:o},c={filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:s};let f=J.runKernel(zw,u,c);return f=ft(f,o.dtype),l?ce(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const k4=ee({avgPool3d_:uRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cRe(t,e=0){R(t.length>=1,()=>"Pass at least one tensor to concat");const n=Dx(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(s=>{if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${s.dtype}. `)}),n.length===1)return ud(n[0]);const r=n,i={axis:e};return J.runKernel(Ww,r,i)}const Er=ee({concat_:cRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fRe(t){const n={x:z(t,"x","sigmoid")};return J.runKernel(sy,n)}const Cu=ee({sigmoid_:fRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dRe(t,e,n){const r=z(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const i={x:r},s={begin:e,size:n};return J.runKernel(T_,i,s)}const pn=ee({slice_:dRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hRe(t){const n={x:z(t,"x","tanh")};return J.runKernel(fy,n)}const _0=ee({tanh_:hRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pRe(t,e,n,r,i,s){const a=z(t,"forgetBias","basicLSTMCell"),o=z(e,"lstmKernel","basicLSTMCell"),l=z(n,"lstmBias","basicLSTMCell"),u=z(r,"data","basicLSTMCell"),c=z(i,"c","basicLSTMCell"),f=z(s,"h","basicLSTMCell"),d=Er([u,f],1),h=hn(d,o),p=We(h,l),m=p.shape[0],g=p.shape[1]/4,v=[m,g],y=pn(p,[0,0],v),b=pn(p,[0,g],v),x=pn(p,[0,g*2],v),w=pn(p,[0,g*3],v),S=We(se(Cu(y),_0(b)),se(c,Cu(We(a,x)))),C=se(_0(S),Cu(w));return[S,C]}const mRe=ee({basicLSTMCell_:pRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gRe(t,e,n){const r=z(t,"x","batchToSpaceND"),i=e.reduce((o,l)=>o*l);R(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),R(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),R(r.shape[0]%i===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${i}`);const s={x:r},a={blockShape:e,crops:n};return J.runKernel(Uw,s,a)}const P_=ee({batchToSpaceND_:gRe});function vRe(t){let e;return t.rank===0||t.rank===1?e=ce(t,[1,1,1,t.size]):t.rank===2?e=ce(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=ce(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yRe(t,e,n,r,i,s){s==null&&(s=.001);const a=z(t,"x","batchNorm"),o=z(e,"mean","batchNorm"),l=z(n,"variance","batchNorm");let u;i!=null&&(u=z(i,"scale","batchNorm"));let c;r!=null&&(c=z(r,"offset","batchNorm")),R(o.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),R(c==null||o.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),R(u==null||o.rank===u.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const d={x:vRe(a),scale:u,offset:c,mean:o,variance:l},h={varianceEpsilon:s},p=J.runKernel(Jw,d,h);return ce(p,a.shape)}const Ep=ee({batchNorm_:yRe});function bRe(t,e,n,r,i,s){const a=z(t,"x","batchNorm"),o=z(e,"mean","batchNorm"),l=z(n,"variance","batchNorm");let u;i!=null&&(u=z(i,"scale","batchNorm"));let c;return r!=null&&(c=z(r,"offset","batchNorm")),R(a.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${a.rank}.`),R(o.rank===2||o.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${o.rank}.`),R(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),u!=null&&R(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`),c!=null&&R(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`),Ep(a,o,l,c,u,s)}const fne=ee({batchNorm2d_:bRe});function xRe(t,e,n,r,i,s){const a=z(t,"x","batchNorm"),o=z(e,"mean","batchNorm"),l=z(n,"variance","batchNorm");let u;i!=null&&(u=z(i,"scale","batchNorm"));let c;return r!=null&&(c=z(r,"offset","batchNorm")),R(a.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${a.rank}.`),R(o.rank===3||o.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${o.rank}.`),R(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),u!=null&&R(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`),c!=null&&R(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`),Ep(a,o,l,c,u,s)}const dne=ee({batchNorm3d_:xRe});function wRe(t,e,n,r,i,s){const a=z(t,"x","batchNorm"),o=z(e,"mean","batchNorm"),l=z(n,"variance","batchNorm");let u;i!=null&&(u=z(i,"scale","batchNorm"));let c;return r!=null&&(c=z(r,"offset","batchNorm")),R(a.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${a.rank}.`),R(o.rank===4||o.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${o.rank}.`),R(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),u!=null&&R(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`),c!=null&&R(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`),Ep(a,o,l,c,u,s)}const hne=ee({batchNorm4d_:wRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Re(t,e,n){const r=z(t,"x","bincount"),i=z(e,"weights","bincount");R(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),R(n>=0,()=>`size must be non-negative, but got ${n}.`),R(i.size===r.size||i.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${i.shape}.`);const s={x:r,weights:i},a={size:n};return J.runKernel(HA,s,a)}const pne=ee({bincount_:_Re});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SRe(t,e){let n=z(t,"broadcastTo","x");const r=n.shape;if(e.some(u=>!(u>0)||u%1!==0))throw new Error(`broadcastTo(): Invalid broadcast shape [${e}].`);if(e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const u=n.shape.slice();for(;u.length<e.length;)u.unshift(1);n=ce(n,u)}const i=n.shape,s=Array.from(e);for(let u=e.length-1;u>=0;u--)if(i[u]===e[u])s[u]=1;else if(n.shape[u]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(s.map((u,c)=>u>1?c:-1).filter(u=>u>=0).length===0)return ud(n);const o={x:n},l={reps:s};return J.runKernel(dy,o,l)}const Fx=ee({broadcastTo_:SRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CRe(t){const n={x:z(t,"x","ceil")};return J.runKernel(kv,n)}const A4=ee({ceil_:CRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ERe(t,e,n){const r=z(t,"x","clipByValue");R(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`);const i={x:r},s={clipValueMin:e,clipValueMax:n};return J.runKernel(Av,i,s)}const zs=ee({clipByValue_:ERe});function TRe(t){return Er(t,0)}const mne=ee({concat1d_:TRe});function kRe(t,e){return Er(t,e)}const gne=ee({concat2d_:kRe});function ARe(t,e){return Er(t,e)}const vne=ee({concat3d_:ARe});function MRe(t,e){return Er(t,e)}const yne=ee({concat4d_:MRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NRe(t,e,n,r,i="NHWC",s=[1,1],a){const o=z(t,"x","conv2d"),l=z(e,"filter","conv2d");let u=o,c=!1;o.rank===3&&(c=!0,u=ce(o,[1,o.shape[0],o.shape[1],o.shape[2]])),R(u.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),R(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),a!=null&&R(ni(r),()=>`Error in conv2d: pad must be an integer when using, dimRoundingMode ${a} but got pad ${r}.`);const f=i==="NHWC"?u.shape[3]:u.shape[1];R(f===l.shape[2],()=>`Error in conv2d: depth of input (${f}) must match input depth for filter ${l.shape[2]}.`),R(Ri(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);const d={x:u,filter:l},h={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:a},p=J.runKernel(Gw,d,h);return c?ce(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const Kc=ee({conv2d_:NRe});function $Re(t,e,n,r,i="NWC",s=1,a){const o=z(t,"x","conv1d"),l=z(e,"filter","conv1d");let u=o,c=!1;o.rank===2&&(c=!0,u=ce(o,[1,o.shape[0],o.shape[1]])),R(u.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),R(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),a!=null&&R(ni(r),()=>`Error in conv1d: pad must be an integer when using, dimRoundingMode ${a} but got pad ${r}.`),R(u.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`),R(Ri(n,s),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${s}'`),R(i==="NWC",()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`);const f=ce(l,[1,l.shape[0],l.shape[1],l.shape[2]]),d=ce(u,[u.shape[0],1,u.shape[1],u.shape[2]]),g=Kc(d,f,[1,n],r,"NHWC",[1,s],a);return c?ce(g,[g.shape[2],g.shape[3]]):ce(g,[g.shape[0],g.shape[2],g.shape[3]])}const zM=ee({conv1d_:$Re});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IRe(t,e,n,r,i,s="NHWC",a){R(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let o=t,l=e,u=!1;e.rank===3&&(u=!0,l=ce(e,[1,e.shape[0],e.shape[1],e.shape[2]]),o=[1,t[0],t[1],t[2]]),R(o.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${o.length}.`),R(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),R(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const c=s==="NHWC"?o[3]:o[1],f=s==="NHWC"?l.shape[3]:l.shape[1];R(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`),R(f===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${f}) must match output depth for filter ${n.shape[3]}.`),a!=null&&R(ni(i),()=>`Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode ${a} but got pad ${i}.`);const d={dy:l,filter:n},h={strides:r,pad:i,dataFormat:s,dimRoundingMode:a,inputShape:o},p=J.runKernel(Hw,d,h);return u?ce(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const M4=ee({conv2DBackpropInput_:IRe});function DRe(t,e,n,r,i,s){const a=z(t,"x","conv2dTranspose"),o=z(e,"filter","conv2dTranspose");return M4(n,a,o,r,i,"NHWC",s)}const BM=ee({conv2dTranspose_:DRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RRe(t,e,n,r,i="NDHWC",s=[1,1,1]){const a=z(t,"x","conv3d"),o=z(e,"filter","conv3d");let l=a,u=!1;a.rank===4&&(u=!0,l=ce(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),R(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),R(o.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${o.rank}.`),R(l.shape[4]===o.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${o.shape[3]}.`),R(Ri(n,s),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),R(i==="NDHWC",()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`);const c={x:l,filter:o},f={strides:n,pad:r,dataFormat:i,dilations:s},d=J.runKernel(jw,c,f);return u?ce(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const N4=ee({conv3d_:RRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ORe(t,e,n,r,i){R(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let s=t,a=e,o=!1;e.rank===4&&(o=!0,a=ce(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),s=[1,t[0],t[1],t[2],t[3]]);const l=s[4],u=a.shape[4];R(s.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${s.length}.`),R(a.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${a.rank}`),R(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),R(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),R(u===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`);const c={dy:a,filter:n},f={pad:i,strides:r,inputShape:s},d=J.runKernel(YA,c,f);return o?ce(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const bne=ee({conv3DBackpropInput_:ORe});function FRe(t,e,n,r,i){const s=z(t,"x","conv3dTranspose"),a=z(e,"filter","conv3dTranspose");return bne(n,s,a,r,i)}const LRe=ee({conv3dTranspose_:FRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PRe(t){const n={x:z(t,"x","cos")};return J.runKernel(Mv,n)}const z_=ee({cos_:PRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zRe(t){const n={x:z(t,"x","cosh")};return J.runKernel(Nv,n)}const UM=ee({cosh_:zRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BRe(t,e=0,n=!1,r=!1){const s={x:z(t,"x","cumsum")},a={axis:e,exclusive:n,reverse:r};return J.runKernel(qw,s,a)}const VM=ee({cumsum_:BRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function URe(t,e,n,r=!1){const i=z(t,"x","denseBincount"),s=z(e,"weights","denseBincount");R(i.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${i.dtype}`),R(i.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${i.rank}.`),R(n>=0,()=>`size must be non-negative, but got ${n}.`),R(s.size===i.size||s.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${i.shape}, weights shape: ${s.shape}.`);const a={x:i,weights:s},o={size:n,binaryOutput:r};return J.runKernel(ZA,a,o)}const xne=ee({denseBincount_:URe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VRe(t,e,n="NHWC"){const r=z(t,"x","depthToSpace"),i=n==="NHWC"?r.shape[1]:r.shape[2],s=n==="NHWC"?r.shape[2]:r.shape[3],a=n==="NHWC"?r.shape[3]:r.shape[1];R(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e}  for depthToSpace with input shape
    ${r.shape}`),R(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e} for depthToSpace with input shape
        ${r.shape}`),R(a%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${a} for depthToSpace with input shape ${r.shape}`);const o={x:r},l={blockSize:e,dataFormat:n};return J.runKernel(JA,o,l)}const $4=ee({depthToSpace_:VRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WRe(t,e,n,r,i="NHWC",s=[1,1],a){const o=z(t,"x","depthwiseConv2d"),l=z(e,"filter","depthwiseConv2d");let u=o,c=!1;o.rank===3&&(c=!0,u=ce(o,[1,o.shape[0],o.shape[1],o.shape[2]])),R(u.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`),R(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`),R(u.shape[3]===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${u.shape[3]}) must match the inChannels dimension in filter ${l.shape[2]}.`),a!=null&&R(ni(r),()=>`Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode ${a} but got pad ${r}.`);const f={x:u,filter:l},d={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:a},h=J.runKernel(Xw,f,d);return c?ce(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const my=ee({depthwiseConv2d_:WRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GRe(t){const n={x:z(t,"x","diag")};return J.runKernel(tM,n)}const HRe=ee({diag_:GRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jRe(t,e,n,r,i=[1,1],s="NHWC"){const a=z(t,"x","dilation2d"),o=z(e,"filter","dilation2d");R(a.rank===3||a.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${a.rank}.`),R(o.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${o.rank}.`),R(s==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${s}`);let l=a,u=!1;a.rank===3&&(l=ce(a,[1,a.shape[0],a.shape[1],a.shape[2]]),u=!0);const c={x:l,filter:o},f={strides:n,pad:r,dilations:i},d=J.runKernel(Yw,c,f);return u?ce(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const I4=ee({dilation2d_:jRe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lx(t,e){const n=t.length,r=[];for(let i=0;i<n;i++){const s=n-1-i,a=t[s]||1;(e[e.length-1-i]||1)>1&&a===1&&r.unshift(s)}return r}function Qr(t,e){const n=[];for(let r=0;r<e.length;r++){const i=t[t.length-r-1],s=e.length-r-1,a=e[s];(i==null||i===1&&a>1)&&n.unshift(s)}return n}function cn(t,e){const n=[],r=Math.max(t.length,e.length);for(let i=0;i<r;i++){let s=t[t.length-i-1];s==null&&(s=1);let a=e[e.length-i-1];if(a==null&&(a=1),s===1)n.unshift(a);else if(a===1)n.unshift(s);else if(s!==a){const o=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(o)}else n.unshift(s)}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qRe(t,e){let n=z(t,"a","equal"),r=z(e,"b","equal");[n,r]=mr(n,r),cn(n.shape,r.shape);const i={a:n,b:r};return J.runKernel(Kw,i)}const Wd=ee({equal_:qRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XRe(t,e,n){const r=z(e,"a","where"),i=z(n,"b","where"),s=z(t,"condition","where","bool"),a=cn(r.shape,i.shape),o=Fx(r,a),l=Fx(i,a);s.rank===1&&R(s.shape[0]===r.shape[0],()=>"The first dimension of `a` must match the size of `condition`."),s.rank!==1&&mi(s.shape,l.shape,"Error in where: ");const u={condition:s,t:o,e:l};return J.runKernel(E_,u)}const Bs=ee({where_:XRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YRe(t){const n={x:z(t,"x","zerosLike")};return J.runKernel(R_,n)}const fn=ee({zerosLike_:YRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KRe(t,e){let n=z(t,"a","div"),r=z(e,"b","div");[n,r]=mr(n,r);const i=kt(n,r),s=fn(i),a=Wd(r,s);return Bs(a,s,i)}const D4=ee({divNoNan_:KRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZRe(t,e){const n=z(t,"t1","dot"),r=z(e,"t2","dot");R((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const i=n.rank===1?n.size:n.shape[1],s=r.rank===1?r.size:r.shape[0];if(R(i===s,()=>`Error in dot: inner dimensions of inputs must match, but got ${i} and ${s}.`),n.rank===1&&r.rank===1){const a=ce(n,[1,-1]),o=ce(r,[-1,1]),l=hn(a,o);return ce(l,[])}else if(n.rank===1&&r.rank===2){const a=ce(n,[1,-1]),o=ce(r,[r.shape[0],r.shape[1]]),l=hn(a,o);return ce(l,[l.size])}else if(n.rank===2&&r.rank===1){const a=ce(r,[-1,1]),o=hn(n,a);return ce(o,[o.size])}else{const a=ce(r,[r.shape[0],r.shape[1]]);return hn(n,a)}}const wne=ee({dot_:ZRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JRe(t){const n={x:z(t,"x","elu")};return J.runKernel(Iv,n)}const gy=ee({elu_:JRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QRe(t){let e=z(t,"x","erf");R(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=ft(e,"float32"));const n={x:e};return J.runKernel(Dv,n)}const R4=ee({erf_:QRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eOe(t){const n={x:z(t,"x","exp")};return J.runKernel(Rv,n)}const ao=ee({exp_:eOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tOe(t,e=0){const n=z(t,"x","expandDims","string_or_numeric");R(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},i={dim:e};return J.runKernel(Zw,r,i)}const sa=ee({expandDims_:tOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nOe(t){const n={x:z(t,"x","expm1")};return J.runKernel(Ov,n)}const O4=ee({expm1_:nOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rOe(t,e){const n=z(t,"x","tile","string_or_numeric");R(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},i={reps:e};return J.runKernel(dy,r,i)}const cd=ee({tile_:rOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iOe(t,e,n,r="float32"){e==null&&(e=t);const i=Jt([t,e],r),s=t<=e?t:e;for(let o=0;o<s;++o)i.set(1,o,o);const a=ce(i.toTensor(),[t,e]);if(n==null)return a;if(n.length===1)return cd(sa(a,0),[n[0],1,1]);if(n.length===2)return cd(sa(sa(a,0),0),[n[0],n[1],1,1]);if(n.length===3)return cd(sa(sa(sa(a,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const F4=ee({eye_:iOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B_(t,e,n){const r={shape:t,value:e,dtype:n};return J.runKernel(iM,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sOe(t){const n={x:z(t,"x","floor")};return J.runKernel(Fv,n)}const vy=ee({floor_:sOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aOe(t,e,n=0,r=0){const i=z(t,"x","gather"),s=z(e,"indices","gather","int32"),a={x:i,indices:s},o={axis:n,batchDims:r};return J.runKernel(Qw,a,o)}const Tp=ee({gather_:aOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oOe(t,e){let n=z(t,"a","greater"),r=z(e,"b","greater");[n,r]=mr(n,r),cn(n.shape,r.shape);const i={a:n,b:r};return J.runKernel(e_,i)}const ll=ee({greater_:oOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lOe(t,e){let n=z(t,"a","greaterEqual"),r=z(e,"b","greaterEqual");[n,r]=mr(n,r),cn(n.shape,r.shape);const i={a:n,b:r};return J.runKernel(Pv,i)}const Gd=ee({greaterEqual_:lOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uOe(t){const n={input:z(t,"input","imag")};return J.runKernel(lM,n)}const WM=ee({imag_:uOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cOe(t){const n={x:z(t,"x","isFinite")};return J.runKernel(Bv,n)}const _ne=ee({isFinite_:cOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fOe(t){const n={x:z(t,"x","isInf")};return J.runKernel(Uv,n)}const Sne=ee({isInf_:fOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dOe(t){const n={x:z(t,"x","isNaN")};return J.runKernel(Vv,n)}const Cne=ee({isNaN_:dOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hOe(t,e=.2){const r={x:z(t,"x","leakyRelu")},i={alpha:e};return J.runKernel(t_,r,i)}const U_=ee({leakyRelu_:hOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pOe(t,e){let n=z(t,"a","less"),r=z(e,"b","less");[n,r]=mr(n,r),cn(n.shape,r.shape);const i={a:n,b:r};return J.runKernel(n_,i)}const GM=ee({less_:pOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mOe(t,e){let n=z(t,"a","lessEqual"),r=z(e,"b","lessEqual");[n,r]=mr(n,r),cn(n.shape,r.shape);const i={a:n,b:r};return J.runKernel(r_,i)}const om=ee({lessEqual_:mOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L4(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:t,stop:e,num:n};return J.runKernel(uM,{},r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gOe(t,e=5,n=1,r=1,i=.5){const s=z(t,"x","localResponseNormalization");R(s.rank===4||s.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${s.rank}.`),R(ni(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let a=s,o=!1;s.rank===3&&(o=!0,a=ce(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const l={x:a},u={depthRadius:e,bias:n,alpha:r,beta:i},c=J.runKernel(o_,l,u);return o?ce(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const P4=ee({localResponseNormalization_:gOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vOe(t){const n={x:z(t,"x","log")};return J.runKernel(Wv,n)}const _a=ee({log_:vOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yOe(t){const n={x:z(t,"x","log1p")};return J.runKernel(Gv,n)}const HM=ee({log1p_:yOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bOe(t){return R(xd(t),()=>"The f passed in grad(f) must be a function"),(e,n)=>{const r=z(e,"x","tf.grad","string_or_numeric"),i=n!=null?z(n,"dy","tf.grad"):null;return J.tidy(()=>{const{value:s,grads:a}=J.gradients(()=>t(r),[r],i);return i!=null&&mi(s.shape,i.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),jM(a),a[0]})}}function xOe(t){return R(xd(t),()=>"The f passed in grads(f) must be a function"),(e,n)=>{R(Array.isArray(e),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");const r=Dx(e,"args","tf.grads","string_or_numeric"),i=n!=null?z(n,"dy","tf.grads"):null;return J.tidy(()=>{const{value:s,grads:a}=J.gradients(()=>t(...r),r,i);return i!=null&&mi(s.shape,i.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),jM(a),a})}}function wOe(t){return R(xd(t),()=>"The f passed in valueAndGrad(f) must be a function"),(e,n)=>{R(e instanceof kn,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),R(n==null||n instanceof kn,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");const{grads:r,value:i}=J.gradients(()=>t(e),[e],n);return jM(r),{grad:r[0],value:i}}}function _Oe(t){return R(xd(t),()=>"The f passed in valueAndGrads(f) must be a function"),(e,n)=>{R(Array.isArray(e)&&e.every(i=>i instanceof kn),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),R(n==null||n instanceof kn,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");const r=J.gradients(()=>t(...e),e,n);return n!=null&&mi(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),jM(r.grads),r}}function Ene(t,e){R(xd(t),()=>"The f passed in variableGrads(f) must be a function"),R(e==null||Array.isArray(e)&&e.every(u=>u instanceof Ix),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const u in J.registeredVariables)e.push(J.registeredVariables[u])}const r=n?e.filter(u=>!u.trainable):null,i=e.length;e=e.filter(u=>u.trainable),R(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${i} variables is trainable.`);const s=!0,{value:a,grads:o}=J.gradients(t,e,null,s);R(o.some(u=>u!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),R(a.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${a.rank} tensor`);const l={};return e.forEach((u,c)=>{o[c]!=null&&(l[u.name]=o[c])}),r!=null&&r.forEach(u=>l[u.name]=null),{value:a,grads:l}}function Ou(t){return J.customGrad(t)}function jM(t){if(t.filter(n=>n==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SOe(t){const n={x:z(t,"x","neg")};return J.runKernel(p_,n)}const pr=ee({neg_:SOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function COe(t){const n={x:z(t,"x","softplus")};return J.runKernel(ay,n)}const yy=ee({softplus_:COe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EOe(t){const e=z(t,"x","logSigmoid");return Ou(r=>({value:pr(yy(pr(r))),gradFunc:a=>se(a,Cu(pr(r)))}))(e)}const Tne=ee({logSigmoid_:EOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TOe(t,e=null,n=!1){const i={x:z(t,"x","max")},s={reductionIndices:e,keepDims:n};return J.runKernel(l_,i,s)}const ro=ee({max_:TOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kOe(t,e){let n=z(t,"a","sub"),r=z(e,"b","sub");[n,r]=mr(n,r);const i={a:n,b:r};return J.runKernel(uy,i)}const yt=ee({sub_:kOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AOe(t,e=null,n=!1){let r=z(t,"x","sum");r.dtype==="bool"&&(r=ft(r,"int32"));const i={x:r},s={axis:e,keepDims:n};return J.runKernel(k_,i,s)}const Tt=ee({sum_:AOe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MOe(t,e=-1){const n=z(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return Ou((i,s)=>{const o=ro(i,e,!0),l=yt(i,o),u=yt(ft(l,"float32"),_a(Tt(ao(l),e,!0)));return s([u]),{value:u,gradFunc:(f,d)=>{const[h]=d,p=!0,m=ao(h);return yt(f,se(Tt(f,e,p),m))}}})(n)}const qM=ee({logSoftmax_:MOe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z4(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function kne(t,e,n){const r=t.length+e.length,i=[];let s=0,a=0;for(let o=0;o<r;o++)n.indexOf(o)===-1?i.push(t[s++]):i.push(e[a++]);return i}function vi(t,e){const n=[],r=t.length;for(let s=0;s<r;s++)e.indexOf(s)===-1&&n.push(t[s]);const i=e.map(s=>t[s]);return[n,i]}function $r(t,e){const n=e.map(r=>1);return kne(t,n,e)}function Oi(t,e,n){R(z4(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function Ir(t,e){if(z4(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function by(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function zr(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NOe(t,e=null,n=!1){const r=z(t,"x","logSumExp"),i=Xt(e,r.shape),s=ro(r,i,!0),a=yt(r,s),o=ao(a),l=Tt(o,i),u=_a(l),c=We(ce(s,u.shape),u);if(n){const f=$r(c.shape,i);return ce(c,f)}return c}const B4=ee({logSumExp_:NOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Oe(t,e){const n=z(t,"a","logicalAnd","bool"),r=z(e,"b","logicalAnd","bool");cn(n.shape,r.shape);const i={a:n,b:r};return J.runKernel(i_,i)}const Qo=ee({logicalAnd_:$Oe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IOe(t){const n={x:z(t,"x","logicalNot","bool")};return J.runKernel(s_,n)}const V_=ee({logicalNot_:IOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DOe(t,e){const n=z(t,"a","logicalOr","bool"),r=z(e,"b","logicalOr","bool");cn(n.shape,r.shape);const i={a:n,b:r};return J.runKernel(a_,i)}const XM=ee({logicalOr_:DOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ROe(t,e){const n=z(t,"a","logicalXor","bool"),r=z(e,"b","logicalXor","bool");return cn(n.shape,r.shape),Qo(XM(t,e),V_(Qo(t,e)))}const Ane=ee({logicalXor_:ROe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OOe(t,e,n,r,i){const s=z(t,"x","maxPool"),a=1;let o=s,l=!1;s.rank===3&&(l=!0,o=ce(s,[1,s.shape[0],s.shape[1],s.shape[2]])),R(o.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${o.rank}.`),R(Ri(n,a),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),i!=null&&R(ni(r),()=>`Error in maxPool: pad must be an integer when using, dimRoundingMode ${i} but got pad ${r}.`);const u={x:o},c={filterSize:e,strides:n,pad:r,dimRoundingMode:i},f=J.runKernel(u_,u,c);return l?ce(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const W_=ee({maxPool_:OOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FOe(t,e=[1,1,1],n,r,i,s="NDHWC"){const a=z(t,"x","maxPool3d");let o=a,l=!1;a.rank===4&&(l=!0,o=ce(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),R(o.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${o.rank}.`),R(s==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),i!=null&&R(ni(r),()=>`Error in maxPool3d: pad must be an integer when using, dimRoundingMode ${i} but got pad ${r}.`);const u={x:o},c={filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:s},f=J.runKernel(c_,u,c);return l?ce(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const U4=ee({maxPool3d_:FOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LOe(t,e,n,r,i=!1){const a={x:z(t,"x","maxPoolWithArgmax")},o={filterSize:e,strides:n,pad:r,includeBatchInIndex:i},l=J.runKernel(hM,a,o);return{result:l[0],indexes:l[1]}}const Mne=ee({maxPoolWithArgmax_:LOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function POe(t,e){let n=z(t,"a","maximum"),r=z(e,"b","maximum");[n,r]=mr(n,r),n.dtype==="bool"&&(n=ft(n,"int32"),r=ft(r,"int32")),cn(n.shape,r.shape);const i={a:n,b:r};return J.runKernel(Hv,i)}const Xu=ee({maximum_:POe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zOe(t,e=null,n=!1){const i={x:z(t,"x","mean")},s={axis:e,keepDims:n};return J.runKernel(f_,i,s)}const dr=ee({mean_:zOe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BOe(t,e=null,n=!1){const i={x:z(t,"x","min")},s={axis:e,keepDims:n};return J.runKernel(d_,i,s)}const S0=ee({min_:BOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UOe(t,e){let n=z(t,"a","minimum"),r=z(e,"b","minimum");[n,r]=mr(n,r),n.dtype==="bool"&&(n=ft(n,"int32"),r=ft(r,"int32")),cn(n.shape,r.shape);const i={a:n,b:r};return J.runKernel(jv,i)}const xy=ee({minimum_:UOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VOe(t,e,n){R(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=z(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");R(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const i=n==="reflect"?1:0;for(let o=0;o<r.rank;o++)R(e[o].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),R(e[o][0]>=0&&e[o][0]<=r.shape[o]-i&&e[o][1]>=0&&e[o][1]<=r.shape[o]-i,()=>`Padding in dimension ${o} cannot be greater than or equal to ${r.shape[o]-i} or less than 0 for input of shape ${r.shape}`);const s={paddings:e,mode:n},a={x:r};return J.runKernel(h_,a,s)}const V4=ee({mirrorPad_:VOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WOe(t,e){let n=z(t,"a","mod"),r=z(e,"b","mod");[n,r]=mr(n,r);const i={a:n,b:r};return J.runKernel(qv,i)}const W4=ee({mod_:WOe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GOe(t){const e=z(t,"x","square"),n={};return J.runKernel("Square",{x:e},n)}const Bn=ee({square_:GOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HOe(t,e=null,n=!1){t=z(t,"x","moments");const r=Xt(e,t.shape),i=dr(t,r,n);let s=i.shape;n||(s=$r(i.shape,r));const a=Bn(yt(ft(t,"float32"),ce(i,s))),o=dr(a,r,n);return{mean:i,variance:o}}const YM=ee({moments_:HOe});function jOe(t,e,n,r){const i=z(e,"data","multiRNNCell"),s=Dx(n,"c","multiRNNCell"),a=Dx(r,"h","multiRNNCell");let o=i;const l=[];for(let f=0;f<t.length;f++){const d=t[f](o,s[f],a[f]);l.push(d[0]),l.push(d[1]),o=d[1]}const u=[],c=[];for(let f=0;f<l.length;f+=2)u.push(l[f]),c.push(l[f+1]);return[u,c]}const qOe=ee({multiRNNCell_:jOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XOe(t,e,n,r=!1){const i=z(t,"logits","multinomial"),s=i.size,a=i.rank;if(s<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${s}.`);if(a>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${a}`);n=n||Math.random();const l={logits:a===1?ce(i,[1,-1]):i},u={numSamples:e,seed:n,normalized:r},c=J.runKernel(pM,l,u);return a===1?ce(c,[c.size]):c}const Nne=ee({multinomial_:XOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YOe(t,e){let n=z(t,"a","notEqual"),r=z(e,"b","notEqual");[n,r]=mr(n,r),cn(n.shape,r.shape);const i={a:n,b:r};return J.runKernel(m_,i)}const kp=ee({notEqual_:YOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fr(t,e="float32"){if(e==="complex64"){const r=Fr(t,"float32"),i=Fr(t,"float32");return wd(r,i)}const n=$i(Ee(t),e);return J.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yu(t,e="float32"){if(e==="complex64"){const r=Yu(t,"float32"),i=Fr(t,"float32");return wd(r,i)}const n=Z5(Ee(t),e);return J.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KOe(t){const n={x:z(t,"x","onesLike")};return J.runKernel(g_,n)}const Sa=ee({onesLike_:KOe});function ZOe(t,e){const n=z(t,"v1","outerProduct"),r=z(e,"v2","outerProduct");R(n.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);const i=ce(n,[-1,1]),s=ce(r,[1,-1]);return hn(i,s)}const JOe=ee({outerProduct_:ZOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QOe(t,e,n=0){const r=z(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const i={paddings:e,constantValue:n},s={x:r};return J.runKernel(b_,s,i)}const cf=ee({pad_:QOe});function eFe(t,e,n=0){return R(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),cf(t,[e],n)}const tFe=ee({pad1d_:eFe});function nFe(t,e,n=0){return R(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),cf(t,e,n)}const rFe=ee({pad2d_:nFe});function iFe(t,e,n=0){return R(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),cf(t,e,n)}const sFe=ee({pad3d_:iFe});function aFe(t,e,n=0){return R(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),cf(t,e,n)}const oFe=ee({pad4d_:aFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lFe(t,e,n){const r=z(t,"x","spaceToBatchND");R(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),R(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),R(r.shape.reduce((a,o,l)=>l>0&&l<=e.length?a&&(o+n[l-1][0]+n[l-1][1])%e[l-1]===0:a,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const i={x:r},s={blockShape:e,paddings:n};return J.runKernel(A_,i,s)}const G_=ee({spaceToBatchND_:lFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uFe(t,e,n,r,i,s){i==null&&(i=[1,1]),s==null&&(s=1),r===0&&(r="valid");const a=z(t,"x","maxPool");let o=a,l=!1;a.rank===3&&(l=!0,o=ce(a,[1,a.shape[0],a.shape[1],a.shape[2]])),R(Ri(s,i),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${s} and dilations '${i}'`);const u=ol(o.shape,e,s,i,r),c=[u.dilationHeight,u.dilationWidth];let f;r==="same"?f=fFe([u.filterHeight,u.filterWidth],c):f=[[0,0],[0,0]];const d=c[0]===1&&c[1]===1,[h,p]=cFe([u.inHeight,u.inWidth],c,f),m=d?r:"valid",g=d?o:G_(o,c,h),y=(n==="avg"?()=>L_(g,e,s,m):()=>W_(g,e,s,m))(),b=d?y:P_(y,c,p);return l?ce(b,[b.shape[1],b.shape[2],b.shape[3]]):b}function cFe(t,e,n){const r=n.map(c=>c[0]),i=n.map(c=>c[1]),s=t.concat(r,i),a=e.map((c,f)=>(c-s[f]%c)%c),o=i.map((c,f)=>c+a[f]),l=e.map((c,f)=>[r[f],o[f]]),u=e.map((c,f)=>[0,a[f]]);return[l,u]}function fFe(t,e){const r=t.map((a,o)=>a+(a-1)*(e[o]-1)).map(a=>a-1),i=r.map(a=>Math.floor(a/2)),s=r.map((a,o)=>a-i[o]);return r.map((a,o)=>[i[o],s[o]])}const $ne=ee({pool_:uFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dFe(t,e){let n=z(t,"base","pow"),r=z(e,"exp","pow");[n,r]=mr(n,r);const i={a:n,b:r};return J.runKernel(Yv,i)}const Zc=ee({pow_:dFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hFe(t,e){const n=z(t,"x","prelu"),r=z(e,"alpha","prelu"),i={x:n,alpha:r};return J.runKernel(x_,i)}const H_=ee({prelu_:hFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pFe(t,e=null,n=!1){let r=z(t,"x","prod");r.dtype==="bool"&&(r=ft(r,"int32"));const i={x:r},s={axis:e,keepDims:n};return J.runKernel(yM,i,s)}const KM=ee({prod_:pFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mFe(t,e,n){const r=Ee(t);let i=null;if(n==null||n==="float32")i=new Float32Array(r);else if(n==="int32")i=new Int32Array(r);else if(n==="bool")i=new Uint8Array(r);else throw new Error(`Unknown data type ${n}`);for(let s=0;s<r;s++)i[s]=e();return J.makeTensor(i,t,n)}const gFe=ee({rand_:mFe});var bF={},vFe={get exports(){return bF},set exports(t){bF=t}};(function(t){(function(e,n,r){function i(l){var u=this,c=o();u.next=function(){var f=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=f-(u.c=f|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function s(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function a(l,u){var c=new i(l),f=u&&u.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,f&&(typeof f=="object"&&s(f,c),d.state=function(){return s(c,{})}),d}function o(){var l=4022871197,u=function(c){c=c.toString();for(var f=0;f<c.length;f++){l+=c.charCodeAt(f);var d=.02519603282416938*l;l=d>>>0,d-=l,d*=l,l=d>>>0,d-=l,l+=d*4294967296}return(l>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=a:r&&r.amd?r(function(){return a}):this.alea=a})(Ft,t,!1)})(vFe);var xF={},yFe={get exports(){return xF},set exports(t){xF=t}};(function(t){(function(e,n,r){function i(o){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var f=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^f^f>>>8},o===(o|0)?l.x=o:u+=o;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function s(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l}function a(o,l){var u=new i(o),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&s(c,u),f.state=function(){return s(u,{})}),f}n&&n.exports?n.exports=a:r&&r.amd?r(function(){return a}):this.xor128=a})(Ft,t,!1)})(yFe);var wF={},bFe={get exports(){return wF},set exports(t){wF=t}};(function(t){(function(e,n,r){function i(o){var l=this,u="";l.next=function(){var f=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(f^f<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,o===(o|0)?l.x=o:u+=o;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function s(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l.v=o.v,l.d=o.d,l}function a(o,l){var u=new i(o),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&s(c,u),f.state=function(){return s(u,{})}),f}n&&n.exports?n.exports=a:r&&r.amd?r(function(){return a}):this.xorwow=a})(Ft,t,!1)})(bFe);var _F={},xFe={get exports(){return _F},set exports(t){_F=t}};(function(t){(function(e,n,r){function i(o){var l=this;l.next=function(){var c=l.x,f=l.i,d,h;return d=c[f],d^=d>>>7,h=d^d<<24,d=c[f+1&7],h^=d^d>>>10,d=c[f+3&7],h^=d^d>>>3,d=c[f+4&7],h^=d^d<<7,d=c[f+7&7],d=d^d<<13,h^=d^d<<9,c[f]=h,l.i=f+1&7,h};function u(c,f){var d,h=[];if(f===(f|0))h[0]=f;else for(f=""+f,d=0;d<f.length;++d)h[d&7]=h[d&7]<<15^f.charCodeAt(d)+h[d+1&7]<<13;for(;h.length<8;)h.push(0);for(d=0;d<8&&h[d]===0;++d);for(d==8?h[7]=-1:h[d],c.x=h,c.i=0,d=256;d>0;--d)c.next()}u(l,o)}function s(o,l){return l.x=o.x.slice(),l.i=o.i,l}function a(o,l){o==null&&(o=+new Date);var u=new i(o),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(c.x&&s(c,u),f.state=function(){return s(u,{})}),f}n&&n.exports?n.exports=a:r&&r.amd?r(function(){return a}):this.xorshift7=a})(Ft,t,!1)})(xFe);var SF={},wFe={get exports(){return SF},set exports(t){SF=t}};(function(t){(function(e,n,r){function i(o){var l=this;l.next=function(){var c=l.w,f=l.X,d=l.i,h,p;return l.w=c=c+1640531527|0,p=f[d+34&127],h=f[d=d+1&127],p^=p<<13,h^=h<<17,p^=p>>>15,h^=h>>>12,p=f[d]=p^h,l.i=d,p+(c^c>>>16)|0};function u(c,f){var d,h,p,m,g,v=[],y=128;for(f===(f|0)?(h=f,f=null):(f=f+"\0",h=0,y=Math.max(y,f.length)),p=0,m=-32;m<y;++m)f&&(h^=f.charCodeAt((m+32)%f.length)),m===0&&(g=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,m>=0&&(g=g+1640531527|0,d=v[m&127]^=h+g,p=d==0?p+1:0);for(p>=128&&(v[(f&&f.length||0)&127]=-1),p=127,m=4*128;m>0;--m)h=v[p+34&127],d=v[p=p+1&127],h^=h<<13,d^=d<<17,h^=h>>>15,d^=d>>>12,v[p]=h^d;c.w=g,c.X=v,c.i=p}u(l,o)}function s(o,l){return l.i=o.i,l.w=o.w,l.X=o.X.slice(),l}function a(o,l){o==null&&(o=+new Date);var u=new i(o),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(c.X&&s(c,u),f.state=function(){return s(u,{})}),f}n&&n.exports?n.exports=a:r&&r.amd?r(function(){return a}):this.xor4096=a})(Ft,t,!1)})(wFe);var CF={},_Fe={get exports(){return CF},set exports(t){CF=t}};(function(t){(function(e,n,r){function i(o){var l=this,u="";l.next=function(){var f=l.b,d=l.c,h=l.d,p=l.a;return f=f<<25^f>>>7^d,d=d-h|0,h=h<<24^h>>>8^p,p=p-f|0,l.b=f=f<<20^f>>>12^d,l.c=d=d-h|0,l.d=h<<16^d>>>16^p,l.a=p-f|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,o===Math.floor(o)?(l.a=o/4294967296|0,l.b=o|0):u+=o;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function s(o,l){return l.a=o.a,l.b=o.b,l.c=o.c,l.d=o.d,l}function a(o,l){var u=new i(o),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&s(c,u),f.state=function(){return s(u,{})}),f}n&&n.exports?n.exports=a:r&&r.amd?r(function(){return a}):this.tychei=a})(Ft,t,!1)})(_Fe);var EF={},SFe={get exports(){return EF},set exports(t){EF=t}};const CFe={},EFe=Object.freeze(Object.defineProperty({__proto__:null,default:CFe},Symbol.toStringTag,{value:"Module"})),TFe=Qp(EFe);(function(t){(function(e,n){var r=this,i=256,s=6,a=52,o="random",l=n.pow(i,s),u=n.pow(2,a),c=u*2,f=i-1,d;function h(x,w,S){var C=[];w=w==!0?{entropy:!0}:w||{};var _=v(g(w.entropy?[x,b(e)]:x??y(),3),C),E=new p(C),T=function(){for(var k=E.g(s),M=l,A=0;k<u;)k=(k+A)*i,M*=i,A=E.g(1);for(;k>=c;)k/=2,M/=2,A>>>=1;return(k+A)/M};return T.int32=function(){return E.g(4)|0},T.quick=function(){return E.g(4)/4294967296},T.double=T,v(b(E.S),e),(w.pass||S||function(k,M,A,N){return N&&(N.S&&m(N,E),k.state=function(){return m(E,{})}),A?(n[o]=k,M):k})(T,_,"global"in w?w.global:this==n,w.state)}n["seed"+o]=h;function p(x){var w,S=x.length,C=this,_=0,E=C.i=C.j=0,T=C.S=[];for(S||(x=[S++]);_<i;)T[_]=_++;for(_=0;_<i;_++)T[_]=T[E=f&E+x[_%S]+(w=T[_])],T[E]=w;(C.g=function(k){for(var M,A=0,N=C.i,$=C.j,D=C.S;k--;)M=D[N=f&N+1],A=A*i+D[f&(D[N]=D[$=f&$+M])+(D[$]=M)];return C.i=N,C.j=$,A})(i)}function m(x,w){return w.i=x.i,w.j=x.j,w.S=x.S.slice(),w}function g(x,w){var S=[],C=typeof x,_;if(w&&C=="object")for(_ in x)try{S.push(g(x[_],w-1))}catch{}return S.length?S:C=="string"?x:x+"\0"}function v(x,w){for(var S=x+"",C,_=0;_<S.length;)w[f&_]=f&(C^=w[f&_]*19)+S.charCodeAt(_++);return b(w)}function y(){try{var x;return d&&(x=d.randomBytes)?x=x(i):(x=new Uint8Array(i),(r.crypto||r.msCrypto).getRandomValues(x)),b(x)}catch{var w=r.navigator,S=w&&w.plugins;return[+new Date,r,S,r.screen,b(e)]}}function b(x){return String.fromCharCode.apply(0,x)}if(v(n.random(),e),t.exports){t.exports=h;try{d=TFe}catch{}}})([],Math)})(SFe);var kFe=bF,AFe=xF,MFe=wF,NFe=_F,$Fe=SF,IFe=CF,lm=EF;lm.alea=kFe;lm.xor128=AFe;lm.xorwow=MFe;lm.xorshift7=NFe;lm.xor4096=$Fe;lm.tychei=IFe;var wy=lm;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class G4{constructor(e,n,r,i,s){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const a=s||Math.random();this.random=wy.alea(a.toString())}nextValue(){if(!isNaN(this.nextVal)){const i=this.nextVal;return this.nextVal=NaN,i}let e,n,r=!1;for(;!r;){let i,s,a;do i=2*this.random()-1,s=2*this.random()-1,a=i*i+s*s;while(a>=1||a===0);const o=Math.sqrt(-2*Math.log(a)/a);e=this.mean+this.stdDev*i*o,n=this.mean+this.stdDev*s*o,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class DFe{constructor(e,n,r,i){this.alpha=e,this.beta=1/n,this.dtype=r;const s=i||Math.random();this.randu=wy.alea(s.toString()),this.randn=new G4(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,n,r,i,s,a;for(;;){do i=this.randn.nextValue(),a=1+this.c*i;while(a<=0);if(a*=a*a,e=i*i,n=1-.331*e*e,r=.5*e+this.d*(1-a+Math.log(a)),s=this.randu(),s<n||Math.log(s)<r)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class RFe{constructor(e=0,n=1,r,i){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=wy.alea(i)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OFe(t,e,n=1,r="float32",i){if(n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);const s=new DFe(e,n,r,i),a=Jt(t,r);for(let o=0;o<a.values.length;o++)a.values[o]=s.nextValue();return a.toTensor()}const FFe=ee({randomGamma_:OFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LFe(t,e=0,n=1,r,i){if(r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const s=new G4(e,n,r,!1,i),a=Jt(t,r);for(let o=0;o<a.values.length;o++)a.values[o]=s.nextValue();return a.toTensor()}const Ine=ee({randomNormal_:LFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PFe(t,e=0,n=1,r="float32",i){const s=Jt(t,r),a=new RFe(e,n,null,i);for(let o=0;o<s.values.length;o++)s.values[o]=a.nextValue();return s.toTensor()}const _y=ee({randomUniform_:PFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cT(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const i={start:t,stop:e,step:n,dtype:r};return J.runKernel(bM,{},i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zFe(t){const n={input:z(t,"input","real")};return J.runKernel(xM,n)}const Px=ee({real_:zFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BFe(t){const n={x:z(t,"x","reciprocal")};return J.runKernel(Kv,n)}const H4=ee({reciprocal_:BFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UFe(t){const n={x:z(t,"x","relu")};return J.runKernel(Zv,n)}const Ku=ee({relu_:UFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VFe(t){const n={x:z(t,"x","relu6")};return J.runKernel(Jv,n)}const ZM=ee({relu6_:VFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WFe(t,e){const r={x:z(t,"x","reverse")},i={dims:e};return J.runKernel(C_,r,i)}const Ca=ee({reverse_:WFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GFe(t){const e=z(t,"x","reverse");return R(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),Ca(e,0)}const HFe=ee({reverse1d_:GFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jFe(t,e){const n=z(t,"x","reverse");return R(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),Ca(n,e)}const qFe=ee({reverse2d_:jFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XFe(t,e){const n=z(t,"x","reverse");return R(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),Ca(n,e)}const YFe=ee({reverse3d_:XFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KFe(t,e){const n=z(t,"x","reverse");return R(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),Ca(n,e)}const ZFe=ee({reverse4d_:KFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JFe(t){const n={x:z(t,"x","round")};return J.runKernel(Qv,n)}const j4=ee({round_:JFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QFe(t){const n={x:z(t,"x","rsqrt")};return J.runKernel(ey,n)}const JM=ee({rsqrt_:QFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function St(t,e){if((Ci(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Ci(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Ud(t,[],[],e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eLe(t){const n={x:z(t,"x","selu")};return J.runKernel(ty,n)}const QM=ee({selu_:eLe});function tLe(t,e,n,r,i,s=[1,1],a="NHWC"){const o=z(t,"x","separableConv2d"),l=z(e,"depthwiseFilter","separableConv2d"),u=z(n,"pointwiseFilter","separableConv2d");let c=o,f=!1;if(o.rank===3&&(f=!0,c=ce(o,[1,o.shape[0],o.shape[1],o.shape[2]])),a==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");R(c.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),R(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),R(u.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),R(u.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`),R(u.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`);const d=l.shape[2],h=l.shape[3];R(u.shape[2]===d*h,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${d*h}, but got ${u.shape[2]}.`);const p=my(c,l,r,i,a,s),g=Kc(p,u,1,"valid",a);return f?ce(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const q4=ee({separableConv2d_:tLe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function nLe(t,e){const n=z(t,"x","setdiff1d"),r=z(e,"y","setdiff1d");R(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),R(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),R(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const i=await n.data(),s=await r.data(),a=new Set(s);let o=0;for(let c=0;c<i.length;c++)a.has(i[c])||o++;const l=new Kr([o],n.dtype),u=new Kr([o],"int32");for(let c=0,f=0;c<i.length;c++)a.has(i[c])||(l.values[f]=i[c],u.values[f]=c,f++);return[l.toTensor(),u.toTensor()]}const Dne=nLe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rLe(t){const n={x:z(t,"x","sign")};return J.runKernel(iy,n)}const X4=ee({sign_:rLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iLe(t){const n={x:z(t,"x","sin")};return J.runKernel(ny,n)}const e3=ee({sin_:iLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sLe(t){const n={x:z(t,"x","sinh")};return J.runKernel(ry,n)}const t3=ee({sinh_:sLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aLe(t,e,n){const r=z(t,"x","slice1d");return R(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),pn(r,[e],[n])}const n3=ee({slice1d_:aLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oLe(t,e,n){const r=z(t,"x","slice2d");return R(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),pn(r,e,n)}const Y4=ee({slice2d_:oLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lLe(t,e,n){const r=z(t,"x","slice3d");return R(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),pn(r,e,n)}const r3=ee({slice3d_:lLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uLe(t,e,n){const r=z(t,"x","slice4d");return R(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),pn(r,e,n)}const zx=ee({slice4d_:uLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cLe(t,e=-1){const n=z(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},i={dim:e};return J.runKernel(N_,r,i)}const j_=ee({softmax_:cLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fLe(t){R(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return J.runKernel(rM,e)}const q_=ee({fft_:fLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dLe(t){R(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return J.runKernel(oM,e)}const C0=ee({ifft_:dLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hLe(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const i=ce(t,[n,e]);r=C0(i)}else{const i=[n,2*(e-1)],s=ce(Px(t),[n,e]),a=ce(WM(t),[n,e]),o=Ca(pn(s,[0,1],[n,e-2]),1),l=se(Ca(pn(a,[0,1],[n,e-2]),1),St(-1)),u=Er([s,o],1),c=Er([a,l],1),f=ce(wd(u,c),[i[0],i[1]]);r=C0(f)}if(r=Px(r),t.rank===3&&t.shape[0]!==0){const i=r,s=t.shape[0];r=ce(r,[s,r.shape[0]/s,r.shape[1]]),i.dispose()}return r}const i3=ee({irfft_:hLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pLe(t,e,n=0){const i={x:z(t,"x","split")},s={numOrSizeSplits:e,axis:n};return J.runKernel(M_,i,s)}const gs=ee({split_:pLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mLe(t,e){R(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let i;if(e!=null&&e<n){const p=t.shape.map(g=>0),m=t.shape.map(g=>g);m[t.shape.length-1]=e,i=pn(t,p,m),n=e}else if(e!=null&&e>n){const p=t.shape.map(m=>m);p[t.shape.length-1]=e-n,i=Er([t,Fr(p)],t.shape.length-1),n=e}else i=t;const s=fn(i),a=ce(wd(i,s),[r,n]),o=q_(a),l=Math.floor(n/2)+1,u=Px(o),c=WM(o),f=gs(u,[l,n-l],u.shape.length-1),d=gs(c,[l,n-l],c.shape.length-1),h=i.shape.slice();return h[i.shape.length-1]=l,ce(wd(f[0],d[0]),h)}const X_=ee({rfft_:mLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gLe(t){const n={x:z(t,"x","sqrt")};return J.runKernel(oy,n)}const Ii=ee({sqrt_:gLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vLe(t,e){let n=z(t,"a","squaredDifference"),r=z(e,"b","squaredDifference");[n,r]=mr(n,r),cn(n.shape,r.shape);const i={a:n,b:r},s={};return J.runKernel(ly,i,s)}const s3=ee({squaredDifference_:vLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yLe(t,e){const n=z(t,"x","squeeze");return ce(n,zd(n.shape,e).newShape)}const Sd=ee({squeeze_:yLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bLe(t,e=0){const n=Dx(t,"tensors","stack","string_or_numeric");R(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&R(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,i={axis:e};return J.runKernel(y_,r,i)}const Ea=ee({stack_:bLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xLe(t,e=0){const r={x:z(t,"x","step")},i={alpha:e};return J.runKernel(hy,r,i)}const Sy=ee({step_:xLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wLe(t,e,n,r,i=0,s=0,a=0,o=0,l=0){const c={x:z(t,"x","stridedSlice")},f={begin:e,end:n,strides:r,beginMask:i,endMask:s,ellipsisMask:a,newAxisMask:o,shrinkAxisMask:l};return J.runKernel(TM,c,f)}const K4=ee({stridedSlice_:wLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Le(t){const n={x:z(t,"x","tan")};return J.runKernel(cy,n)}const Z4=ee({tan_:_Le});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Us(t,e){nm(t);const n=Ru(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Ud(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pc(t,e,n){if(nm(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=Ru(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Ud(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SLe(t,e,n){if(nm(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=Ru(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Ud(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CLe(t,e,n){if(nm(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const r=Ru(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Ud(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ELe(t,e,n){if(nm(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const r=Ru(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,Ud(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TLe(t,e=1,n=!0){const r=z(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const i=r.shape[r.shape.length-1];if(e>i)throw new Error(`'k' passed to topk() must be <= the last dimension (${i}) but got ${e}`);const s={x:r},a={k:e,sorted:n},[o,l]=J.runKernel(kM,s,a);return{values:o,indices:l}}const J4=ee({topk_:TLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kLe(t,e=0,n=1,r,i){if(r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const s=new G4(e,n,r,!0,i),a=Jt(t,r);for(let o=0;o<a.values.length;o++)a.values[o]=s.nextValue();return a.toTensor()}const a3=ee({truncatedNormal_:kLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ALe(t,e=0){const n=z(t,"x","unique","string_or_numeric");R(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},i={axis:e},[s,a]=J.runKernel(AM,r,i);return{values:s,indices:a}}const fT=ee({unique_:ALe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MLe(t,e,n){const r=z(t,"x","unsortedSegmentSum"),i=z(e,"segmentIds","unsortedSegmentSum","int32");R(ni(n),()=>"numSegments must be of dtype int");const s={x:r,segmentIds:i},a={numSegments:n};return J.runKernel(D_,s,a)}const Q4=ee({unsortedSegmentSum_:MLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NLe(t,e=0){const n=z(t,"x","unstack","string_or_numeric");R(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},i={axis:e};return J.runKernel(I_,r,i)}const el=ee({unstack_:NLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rne(t,e=!0,n,r){return J.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o3(t,e){const n=[];for(let s=0;s<e.length;s++)e[s]&&n.push(s);const r=Jt(t,"int32"),i=Jt([n.length,t.length],"int32");for(let s=0;s<n.length;s++){const a=r.indexToLoc(n[s]),o=s*t.length;i.values.set(a,o)}return i.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function $Le(t){const e=z(t,"condition","whereAsync","bool"),n=await e.data(),r=o3(e.shape,n);return t!==e&&e.dispose(),r}const ez=$Le;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function ILe(t,e,n){const r=z(t,"tensor","boolMask"),i=z(e,"mask","boolMask","bool"),s=n??0,a=i.rank,o=r.shape;R(a>0,()=>"mask cannot be scalar"),mi(o.slice(s,s+a),i.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let m=s;m<s+a;m++)l*=o[m];const u=o.slice(0,s).concat([l],o.slice(s+a)),c=ce(r,u),f=ce(i,[-1]),d=await ez(f),h=Sd(d,[1]),p=Tp(c,h,s);return t!==r&&r.dispose(),e!==i&&i.dispose(),h.dispose(),c.dispose(),f.dispose(),d.dispose(),p}const DLe=ILe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RLe(t,e="euclidean",n=null,r=!1){t=z(t,"x","norm");const i=One(t,e,n);let s=i.shape;if(r){const a=Xt(n,t.shape);s=$r(i.shape,a)}return ce(i,s)}function One(t,e,n=null){if(t.rank===0)return Wr(t);if(t.rank!==1&&n===null)return One(ce(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return Tt(Wr(t),n);if(e===1/0)return ro(Wr(t),n);if(e===-1/0)return S0(Wr(t),n);if(e==="euclidean"||e===2)return Ii(Tt(Zc(Wr(t),St(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return ro(Tt(Wr(t),n[0]),n[1]-1);if(e===1/0)return ro(Tt(Wr(t),n[1]),n[0]);if(e===-1/0)return S0(Tt(Wr(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return Ii(Tt(Bn(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const l3=ee({norm_:RLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OLe(t,e,n,r,i=!0){const s=z(t,"v","movingAverage"),a=z(e,"x","movingAverage"),o=z(n,"decay","movingAverage");Nte(s,a),R(Tn(s.shape,a.shape),()=>"Shape mismatch in v and x");const l=St(1),u=yt(l,o);let c=se(yt(a,s),u);if(i){R(r!=null,()=>"When using zeroDebias: true, step is required.");const f=z(r,"step","movingAverage");c=kt(c,yt(l,Zc(o,f)))}return We(s,c)}const FLe=ee({movingAverage_:OLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LLe(t,e,n){const r=z(t,"indices","scatterND","int32"),i=z(e,"updates","scatterND");c4(i,r,n);const s={indices:r,updates:i},a={shape:n};return J.runKernel(SM,s,a)}const Fne=ee({scatterND_:LLe});function PLe(t,e,n,r){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);const i=t.rank>0?t.shape[0]:1,s=t.rank>1?t.shape[1]:1;if(n.length!==s)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${s}.`);const a=e.size;if(!(e.rank===0||e.rank===1&&a===i))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${i}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zLe(t,e,n,r=0){const i=z(t,"sparseIndices","sparseToDense","int32"),s=z(e,"sparseValues","sparseToDense"),a=z(r,"defaultValue","sparseToDense",s.dtype);PLe(i,s,n,a);const o={sparseIndices:i,sparseValues:s,defaultValue:a},l={outputShape:n};return J.runKernel(EM,o,l)}const tz=ee({sparseToDense_:zLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BLe(t,e){const n=z(e,"indices","gatherND","int32"),i={params:z(t,"x","gatherND"),indices:n};return J.runKernel(aM,i)}const Lne=ee({gatherND_:BLe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ULe(t,e){if(e==null)return t.shape.slice();if(Tn(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VLe(t,e,n,r){const i=z(t,"x","dropout");if(R(i.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`),R(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof kn?i.clone():i;const s=ULe(i,n),a=1-e,o=kt(vy(We(_y(s,0,1,"float32",r),a)),a);return se(i,o)}const Pne=ee({dropout_:VLe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zne(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function nz(t,e,n){const r=1-t%2,i=new Float32Array(t);for(let s=0;s<t;++s){const a=2*Math.PI*s/(t+r-1);i[s]=e-n*Math.cos(a)}return Us(i,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function WLe(t,e,n=1){const r=z(t,"predictions","inTopK"),i=z(e,"targets","inTopK");R(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),R(r.rank-1===i.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${i.rank}`),mi(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const s=r.shape[r.shape.length-1];R(n>0&&n<=s,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${s}), but got ${n}`);const a=await r.data(),o=await i.data(),[l,u]=[a.length/s,s],c=fi("bool",l);for(let f=0;f<l;f++){const d=f*u,h=a.subarray(d,d+u),p=[];for(let m=0;m<h.length;m++)p.push({value:h[m],index:m});p.sort((m,g)=>g.value-m.value),c[f]=0;for(let m=0;m<n;m++)if(p[m].index===o[f]){c[f]=1;break}}return t!==r&&r.dispose(),e!==i&&i.dispose(),Il(c,i.shape,"bool")}const GLe=WLe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HLe(t,e,n,r,i,s="NHWC",a){let o=t;t.rank===3&&(o=ce(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=ce(e,[1,e.shape[0],e.shape[1],e.shape[2]])),R(o.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${o.shape}.`),R(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),R(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const u=s==="NHWC"?o.shape[3]:o.shape[1],c=s==="NHWC"?l.shape[3]:l.shape[1];R(u===n[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`),R(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`),a!=null&&R(ni(i),()=>`Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode ${a} but got pad ${i}.`);const f={x:o,dy:l},d={strides:r,pad:i,dataFormat:s,dimRoundingMode:a,filterShape:n};return J.runKernel(qA,f,d)}const rz=ee({conv2DBackpropFilter_:HLe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u3(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return se(t,Sy(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function c3(t,e){let n=e;const r=Qr(t.shape,e.shape);return r.length>0&&(n=Tt(n,r)),ce(n,t.shape)}function f3(t,e,n,r){if(e==="linear")return t;if(e==="relu")return Ku(t);if(e==="elu")return gy(t);if(e==="relu6")return ZM(t);if(e==="prelu")return H_(t,n);if(e==="leakyrelu")return U_(t,r);throw new Error(`Unknown fused activation ${e}.`)}const d3=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jLe({x:t,filter:e,strides:n,pad:r,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:a,bias:o,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(l=l||"linear",d3(J.state.gradientDepth,l)===!1){let w=Kc(t,e,n,r,i,s,a);return o!=null&&(w=We(w,o)),f3(w,l,u,c)}const f=z(t,"x","conv2d"),d=z(e,"filter","conv2d");let h=f,p=!1;f.rank===3&&(p=!0,h=ce(f,[1,f.shape[0],f.shape[1],f.shape[2]])),R(h.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${h.rank}.`),R(d.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${d.rank}.`),a!=null&&R(ni(r),()=>`Error in fused conv2d: pad must be an integer when using, dimRoundingMode ${a} but got pad ${r}.`),R(h.shape[3]===d.shape[2],()=>`Error in conv2d: depth of input (${h.shape[3]}) must match input depth for filter ${d.shape[2]}.`),R(Ri(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),R(i==="NHWC",()=>`Error in conv2d: got dataFormat of ${i} but only NHWC is currently supported.`);const m=gi(h.shape,d.shape,n,s,r,a);let g;o!=null&&(g=z(o,"bias","fused conv2d"),[g]=mr(g,f),cn(m.outShape,g.shape));let v;u!=null&&(v=z(u,"prelu weights","fused conv2d"));const y=(w,S)=>{const[C,_,E,T]=S,k=u3(w,E,l);R(_d(s),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);const M=M4(_.shape,k,C,n,r),A=rz(_,k,C.shape,n,r),N=[M,A];if(T!=null){const $=c3(T,k);N.push($)}return N},b={x:h,filter:d,bias:g,preluActivationWeights:v},x={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:a,activation:l,leakyreluAlpha:c};return o==null?Ou((S,C,_)=>{let E=J.runKernel(Mx,b,x);return _([C,S,E]),p&&(E=ce(E,[E.shape[1],E.shape[2],E.shape[3]])),{value:E,gradFunc:y}})(h,d):Ou((S,C,_,E)=>{let T=J.runKernel(Mx,b,x);return E([C,S,T,_]),p&&(T=ce(T,[T.shape[1],T.shape[2],T.shape[3]])),{value:T,gradFunc:y}})(h,d,g)}const iz=ee({fusedConv2d_:jLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qLe(t,e,n,r,i,s=[1,1],a){let o=t;t.rank===3&&(o=ce(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=ce(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={x:o,dy:l},c={strides:r,pad:i,dimRoundingMode:a,dilations:s,filterShape:n};return J.runKernel(QA,u,c)}const Bne=ee({depthwiseConv2dNativeBackpropFilter_:qLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XLe(t,e,n,r,i,s=[1,1],a){let o=e,l=!1;e.rank===3&&(l=!0,o=ce(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={dy:o,filter:n},c={strides:r,pad:i,dimRoundingMode:a,dilations:s,inputShape:t},f=J.runKernel(eM,u,c);return l?ce(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const Une=ee({depthwiseConv2dNativeBackpropInput_:XLe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YLe({x:t,filter:e,strides:n,pad:r,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:a,bias:o,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(d3(J.state.gradientDepth,l)===!1){let w=my(t,e,n,r,i,s,a);return o!=null&&(w=We(w,o)),f3(w,l,u,c)}const f=z(t,"x","depthwiseConv2d"),d=z(e,"filter","depthwiseConv2d");let h=f,p=!1;f.rank===3&&(p=!0,h=ce(f,[1,f.shape[0],f.shape[1],f.shape[2]])),R(h.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${h.rank}.`),R(d.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${d.rank}.`),R(h.shape[3]===d.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${h.shape[3]}) must match the inChannels dimension in filter ${d.shape[2]}.`),s==null&&(s=[1,1]),R(Ri(n,s),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),a!=null&&R(ni(r),()=>`Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode ${a} but got pad ${r}.`);const m=gi(h.shape,d.shape,n,s,r,a,!0);let g;o!=null&&(g=z(o,"bias","fused conv2d"),[g]=mr(g,f),cn(m.outShape,g.shape));let v;u!=null&&(v=z(u,"prelu weights","fused depthwiseConv2d"));const y=(w,S)=>{R(_d(s),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`);const[C,_,E,T]=S,k=u3(w,E,l),M=Une(_.shape,k,C,n,r,s,a),A=Bne(_,k,C.shape,n,r,s,a);if(T!=null){const N=c3(g,k);return[M,A,N]}return[M,A]},b={x:h,filter:d,bias:g,preluActivationWeights:v},x={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:a,activation:l,leakyreluAlpha:c};return o==null?Ou((S,C,_)=>{let E=J.runKernel(Nx,b,x);return _([C,S,E]),p&&(E=ce(E,[E.shape[1],E.shape[2],E.shape[3]])),{value:E,gradFunc:y}})(h,d):Ou((S,C,_,E)=>{let T=J.runKernel(Nx,b,x);return E([C,S,T,_]),p&&(T=ce(T,[T.shape[1],T.shape[2],T.shape[3]])),{value:T,gradFunc:y}})(h,d,g)}const Vne=ee({fusedDepthwiseConv2d_:YLe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KLe({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:i,activation:s="linear",preluActivationWeights:a,leakyreluAlpha:o}){if(d3(J.state.gradientDepth,s)===!1){let T=hn(t,e,n,r);return i!=null&&(T=We(T,i)),f3(T,s,a,o)}let l=z(t,"a","fused matMul"),u=z(e,"b","fused matMul");[l,u]=mr(l,u);const c=n?l.shape[l.rank-2]:l.shape[l.rank-1],f=r?u.shape[u.rank-1]:u.shape[u.rank-2],d=n?l.shape[l.rank-1]:l.shape[l.rank-2],h=r?u.shape[u.rank-2]:u.shape[u.rank-1],p=l.shape.slice(0,-2),m=u.shape.slice(0,-2),g=Ee(p),v=Ee(m);R(l.rank>=2&&u.rank>=2&&l.rank===u.rank,()=>`Error in fused matMul: inputs must have the same rank of at least 2, got ranks ${l.rank} and ${u.rank}.`),R(Tn(p,m),()=>`Error in fused matMul: outer dimensions (${p}) and (${m}) of Tensors with shapes ${l.shape} and ${u.shape} must match.`),R(c===f,()=>`Error in fused matMul: inner shapes (${c}) and (${f}) of Tensors with shapes ${l.shape} and ${u.shape} and transposeA=${n} and transposeB=${r} must match.`);const y=l.shape.slice(0,-2).concat([d,h]),b=n?ce(l,[g,c,d]):ce(l,[g,d,c]),x=r?ce(u,[v,h,f]):ce(u,[v,f,h]);let w;i!=null&&(w=z(i,"bias","fused matMul"),[w]=mr(w,l),cn(y,w.shape));let S;a!=null&&(S=z(a,"prelu weights","fused matMul"));const C=(T,k)=>{const[M,A,N,$]=k,D=u3(ce(T,N.shape),N,s);let P,O;if(!n&&!r?(P=hn(D,A,!1,!0),O=hn(M,D,!0,!1)):!n&&r?(P=hn(D,A,!1,!1),O=hn(D,M,!0,!1)):n&&!r?(P=hn(A,D,!1,!0),O=hn(M,D,!1,!1)):(P=hn(A,D,!0,!0),O=hn(D,M,!0,!0)),i!=null){const B=c3($,D);return[P,O,B]}else return[P,O]},_={a:b,b:x,bias:w,preluActivationWeights:S},E={transposeA:n,transposeB:r,activation:s,leakyreluAlpha:o};return i==null?Ou((k,M,A)=>{const N=J.runKernel(Ax,_,E);return A([k,M,N]),{value:ce(N,y),gradFunc:C}})(b,x):Ou((k,M,A,N)=>{const $=J.runKernel(Ax,_,E);return N([k,M,$,A]),{value:ce($,y),gradFunc:C}})(b,x,w)}const dT=ee({fusedMatMul_:KLe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZLe=Object.freeze(Object.defineProperty({__proto__:null,conv2d:iz,depthwiseConv2d:Vne,matMul:dT},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JLe(t){return nz(t,.54,.46)}const QLe=ee({hammingWindow_:JLe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ePe(t){return nz(t,.5,.5)}const Wne=ee({hannWindow_:ePe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tPe(t,e,n,r=!1,i=0){let s=0;const a=[];for(;s+e<=t.size;)a.push(pn(t,s,e)),s+=n;if(r)for(;s<t.size;){const o=s+e-t.size,l=Er([pn(t,s,e-o),B_([o],i)]);a.push(l),s+=n}return a.length===0?Pc([],[0,e]):ce(Er(a),[a.length,e])}const Gne=ee({frame_:tPe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nPe(t,e,n,r,i=Wne){r==null&&(r=zne(e));const s=Gne(t,e,n),a=se(s,i(e)),o=[];for(let l=0;l<s.shape[0];l++)o.push(X_(pn(a,[l,0],[1,e]),r));return Er(o)}const rPe=ee({stft_:nPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iPe(t,e,n,r,i="bilinear",s=0){const a=z(t,"image","cropAndResize"),o=z(e,"boxes","cropAndResize","float32"),l=z(n,"boxInd","cropAndResize","int32"),u=o.shape[0];R(a.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${a.rank}.`),R(o.rank===2&&o.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${o.shape}.`),R(l.rank===1&&l.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${o.shape}.`),R(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),R(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),R(i==="bilinear"||i==="nearest",()=>`method must be bilinear or nearest, but was ${i}`);const c={image:a,boxes:o,boxInd:l},f={method:i,extrapolationValue:s,cropSize:r};return J.runKernel(KA,c,f)}const sPe=ee({cropAndResize_:iPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aPe(t){const e=z(t,"image","flipLeftRight","float32");R(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return J.runKernel(sM,n,{})}const oPe=ee({flipLeftRight_:aPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lPe(t,e,n=0,r=.5){const i=z(t,"image","rotateWithOffset","float32");R(i.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`);const s={image:i},a={radians:e,fillValue:n,center:r};return J.runKernel(MM,s,a)}const uPe=ee({rotateWithOffset_:lPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cy(t,e,n,r,i,s){r==null&&(r=.5),i==null&&(i=Number.NEGATIVE_INFINITY),s==null&&(s=0);const a=t.shape[0];return n=Math.min(n,a),R(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),R(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),R(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),R(e.rank===1,()=>"scores must be a 1D tensor"),R(e.shape[0]===a,()=>`scores has incompatible shape with boxes. Expected ${a}, but was ${e.shape[0]}`),R(0<=s&&s<=1,()=>`softNmsSigma must be in [0, 1], but was '${s}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cPe(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const s=z(t,"boxes","nonMaxSuppression"),a=z(e,"scores","nonMaxSuppression"),o=Cy(s,a,n,r,i);n=o.maxOutputSize,r=o.iouThreshold,i=o.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:i};return J.runKernel(mM,{boxes:s,scores:a},l)}const fPe=ee({nonMaxSuppression_:cPe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dPe(t,e,n){const r=hPe(t,e,n),i=r<0?-(r+1):r;t.splice(i,0,e)}function hPe(t,e,n){return mPe(t,e,n||pPe)}function pPe(t,e){return t>e?1:t<e?-1:0}function mPe(t,e,n){let r=0,i=t.length,s=0,a=!1;for(;r<i;){s=r+(i-r>>>1);const o=n(e,t[s]);o>0?r=s+1:(i=s,a=!o)}return a?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h3(t,e,n,r,i){return sz(t,e,n,r,i,0)}function p3(t,e,n,r,i,s){return sz(t,e,n,r,i,0,!1,s,!0)}function m3(t,e,n,r,i,s){return sz(t,e,n,r,i,s,!0)}function sz(t,e,n,r,i,s,a=!1,o=!1,l=!1){const u=[];for(let g=0;g<e.length;g++)e[g]>i&&u.push({score:e[g],boxIndex:g,suppressBeginIndex:0});u.sort(DH);const c=s>0?-.5/s:0,f=[],d=[];for(;f.length<n&&u.length>0;){const g=u.pop(),{score:v,boxIndex:y,suppressBeginIndex:b}=g;if(v<i)break;let x=!1;for(let w=f.length-1;w>=b;--w){const S=gPe(t,y,f[w]);if(S>=r){x=!0;break}if(g.score=g.score*vPe(r,c,S),g.score<=i)break}g.suppressBeginIndex=f.length,x||(g.score===v?(f.push(y),d.push(g.score)):g.score>i&&dPe(u,g,DH))}const h=f.length,p=n-h;o&&p>0&&(f.push(...new Array(p).fill(0)),d.push(...new Array(p).fill(0)));const m={selectedIndices:f};return a&&(m.selectedScores=d),l&&(m.validOutputs=h),m}function gPe(t,e,n){const r=t.subarray(e*4,e*4+4),i=t.subarray(n*4,n*4+4),s=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),o=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(i[0],i[2]),c=Math.min(i[1],i[3]),f=Math.max(i[0],i[2]),d=Math.max(i[1],i[3]),h=(o-s)*(l-a),p=(f-u)*(d-c);if(h<=0||p<=0)return 0;const m=Math.max(s,u),g=Math.max(a,c),v=Math.min(o,f),y=Math.min(l,d),b=Math.max(v-m,0)*Math.max(y-g,0);return b/(h+p-b)}function vPe(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function DH(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function yPe(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const s=z(t,"boxes","nonMaxSuppressionAsync"),a=z(e,"scores","nonMaxSuppressionAsync"),o=Cy(s,a,n,r,i);n=o.maxOutputSize,r=o.iouThreshold,i=o.scoreThreshold;const l=await Promise.all([s.data(),a.data()]),u=l[0],c=l[1],{selectedIndices:f}=h3(u,c,n,r,i);return s!==t&&s.dispose(),a!==e&&a.dispose(),Us(f,"int32")}const bPe=yPe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xPe(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=0){const a=z(t,"boxes","nonMaxSuppression"),o=z(e,"scores","nonMaxSuppression"),l=Cy(a,o,n,r,i,s);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,s=l.softNmsSigma;const u={boxes:a,scores:o},c={maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:s},f=J.runKernel(vM,u,c);return{selectedIndices:f[0],selectedScores:f[1]}}const wPe=ee({nonMaxSuppressionWithScore_:xPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function _Pe(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=0){const a=z(t,"boxes","nonMaxSuppressionAsync"),o=z(e,"scores","nonMaxSuppressionAsync"),l=Cy(a,o,n,r,i,s);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,s=l.softNmsSigma;const u=await Promise.all([a.data(),o.data()]),c=u[0],f=u[1],{selectedIndices:d,selectedScores:h}=m3(c,f,n,r,i,s);return a!==t&&a.dispose(),o!==e&&o.dispose(),{selectedIndices:Us(d,"int32"),selectedScores:Us(h)}}const SPe=_Pe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CPe(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=!1){const a=z(t,"boxes","nonMaxSuppression"),o=z(e,"scores","nonMaxSuppression"),l=Cy(a,o,n,r,i,null),u=l.maxOutputSize,c=l.iouThreshold,f=l.scoreThreshold,d={boxes:a,scores:o},h={maxOutputSize:u,iouThreshold:c,scoreThreshold:f,padToMaxOutputSize:s},p=J.runKernel(gM,d,h);return{selectedIndices:p[0],validOutputs:p[1]}}const EPe=ee({nonMaxSuppressionPadded_:CPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function TPe(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=!1){const a=z(t,"boxes","nonMaxSuppressionAsync"),o=z(e,"scores","nonMaxSuppressionAsync"),l=Cy(a,o,n,r,i,null),u=l.maxOutputSize,c=l.iouThreshold,f=l.scoreThreshold,[d,h]=await Promise.all([a.data(),o.data()]),{selectedIndices:p,validOutputs:m}=p3(d,h,u,c,f,s);return a!==t&&a.dispose(),o!==e&&o.dispose(),{selectedIndices:Us(p,"int32"),validOutputs:St(m,"int32")}}const kPe=TPe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function APe(t,e,n=!1,r=!1){const i=z(t,"images","resizeBilinear");R(i.rank===3||i.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${i.rank}.`),R(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),R(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let s=i,a=!1;i.rank===3&&(a=!0,s=ce(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const o={images:s},l={alignCorners:n,halfPixelCenters:r,size:e},u=J.runKernel(S_,o,l);return a?ce(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const Hne=ee({resizeBilinear_:APe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MPe(t,e,n=!1,r=!1){const i=z(t,"images","resizeNearestNeighbor");R(i.rank===3||i.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${i.rank}.`),R(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),R(i.dtype==="float32"||i.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),R(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let s=i,a=!1;i.rank===3&&(a=!0,s=ce(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const o={images:s},l={alignCorners:n,halfPixelCenters:r,size:e},u=J.runKernel(__,o,l);return a?ce(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const jne=ee({resizeNearestNeighbor_:MPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NPe(t,e,n){R(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),R(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`);const r=z(t,"a","bandPart");R(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const i=r.shape,[s,a]=r.shape.slice(-2);if(!(e<=s))throw new Error(`bandPart(): numLower (${e}) must not be greater than the number of rows (${s}).`);if(!(n<=a))throw new Error(`bandPart(): numUpper (${n}) must not be greater than the number of columns (${a}).`);e<0&&(e=s),n<0&&(n=a);const o=ce(cT(0,s,1,"int32"),[-1,1]),l=cT(0,a,1,"int32"),u=yt(o,l),c=Qo(om(u,St(+e,"int32")),Gd(u,St(-n,"int32"))),f=Fr([s,a],r.dtype);return ce(Ea(el(ce(r,[-1,s,a])).map(d=>Bs(c,d,f))),i)}const $Pe=ee({bandPart_:NPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IPe(t){let e;if(Array.isArray(t)){e=!1,R(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const i=t[0].shape[0];for(let s=1;s<t.length;++s)R(t[s].shape[0]===i,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[s].shape[0]} vs. ${i})`)}else e=!0,t=gs(t,t.shape[0],0).map(i=>Sd(i,[0]));R(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let i=0;i<t.length;++i)n.push(J.tidy(()=>{let s=r[i];if(i>0)for(let a=0;a<i;++a){const o=se(Tt(se(n[a],s)),n[a]);s=yt(s,o)}return kt(s,l3(s,"euclidean"))}));return e?Ea(n,0):n}const DPe=ee({gramSchmidt_:IPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RPe(t,e=!1){if(R(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return RH(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,u)=>l*u),r=el(ce(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],s=[];r.forEach(l=>{const[u,c]=RH(l,e);i.push(u),s.push(c)});const a=ce(Ea(i,0),t.shape),o=ce(Ea(s,0),t.shape);return[a,o]}}function RH(t,e=!1){return J.tidy(()=>{R(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let i=F4(n),s=ud(t);const a=Pc([[1]],[1,1]);let o=ud(a);const l=n>=r?r:n;for(let u=0;u<l;++u){const c=s,f=o,d=i;[o,s,i]=J.tidy(()=>{const h=pn(s,[u,u],[n-u,1]),p=l3(h),m=pn(s,[u,u],[1,1]),g=Bs(ll(m,0),Pc([[-1]]),Pc([[1]])),v=yt(m,se(g,p)),y=kt(h,v);y.shape[0]===1?o=ud(a):o=Er([a,pn(y,[1,0],[y.shape[0]-1,y.shape[1]])],0);const b=pr(kt(hn(g,v),p)),x=pn(s,[u,0],[n-u,r]),w=se(b,o),S=$n(o);if(u===0)s=yt(x,hn(w,hn(S,x)));else{const E=yt(x,hn(w,hn(S,x)));s=Er([pn(s,[0,0],[u,r]),E],0)}const C=$n(w),_=pn(i,[0,u],[n,i.shape[1]-u]);if(u===0)i=yt(_,hn(hn(_,o),C));else{const E=yt(_,hn(hn(_,o),C));i=Er([pn(i,[0,0],[n,u]),E],1)}return[o,s,i]}),Pt([c,f,d])}return!e&&n>r&&(i=pn(i,[0,0],[n,r]),s=pn(s,[0,0],[r,r])),[i,s]})}const OPe=ee({qr_:RPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var cs;(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(cs||(cs={}));function FPe(t,e,n=cs.SUM_BY_NONZERO_WEIGHTS){const r=z(t,"losses","computeWeightedLoss");let i=null;e!=null&&(i=z(e,"weights","computeWeightedLoss"));const s=i==null?r:se(r,i);if(n===cs.NONE)return s;if(n===cs.SUM)return Tt(s);if(n===cs.MEAN){if(i==null)return dr(s);{const a=r.size/i.size,o=kt(Tt(s),Tt(i));return a>1?kt(o,St(a)):o}}if(n===cs.SUM_BY_NONZERO_WEIGHTS){if(i==null)return kt(Tt(s),St(r.size));{const a=se(i,Yu(r.shape)),o=ft(Tt(kp(a,St(0))),"float32");return kt(Tt(s),o)}}throw Error(`Unknown reduction: ${n}`)}const ff=ee({computeWeightedLoss_:FPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LPe(t,e,n,r=cs.SUM_BY_NONZERO_WEIGHTS){const i=z(t,"labels","absoluteDifference"),s=z(e,"predictions","absoluteDifference");let a=null;n!=null&&(a=z(n,"weights","absoluteDifference")),mi(i.shape,s.shape,"Error in absoluteDifference: ");const o=Wr(yt(i,s));return ff(o,a,r)}const PPe=ee({absoluteDifference_:LPe});function zPe(t,e,n,r,i=cs.SUM_BY_NONZERO_WEIGHTS){const s=z(t,"labels","cosineDistance"),a=z(e,"predictions","cosineDistance");let o=null;r!=null&&(o=z(r,"weights","cosineDistance")),mi(s.shape,a.shape,"Error in cosineDistance: ");const l=St(1),u=yt(l,Tt(se(s,a),n,!0));return ff(u,o,i)}const BPe=ee({cosineDistance_:zPe});function UPe(t,e,n,r=cs.SUM_BY_NONZERO_WEIGHTS){let i=z(t,"labels","hingeLoss");const s=z(e,"predictions","hingeLoss");let a=null;n!=null&&(a=z(n,"weights","hingeLoss")),mi(i.shape,s.shape,"Error in hingeLoss: ");const o=St(1);i=yt(se(St(2),i),o);const l=Ku(yt(o,se(i,s)));return ff(l,a,r)}const VPe=ee({hingeLoss_:UPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WPe(t,e,n,r=1,i=cs.SUM_BY_NONZERO_WEIGHTS){const s=z(t,"labels","huberLoss"),a=z(e,"predictions","huberLoss");let o=null;n!=null&&(o=z(n,"weights","huberLoss")),mi(s.shape,a.shape,"Error in huberLoss: ");const l=St(r),u=Wr(yt(a,s)),c=xy(u,l),f=yt(u,c),d=We(se(St(.5),Bn(c)),se(l,f));return ff(d,o,i)}const GPe=ee({huberLoss_:WPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HPe(t,e,n,r=1e-7,i=cs.SUM_BY_NONZERO_WEIGHTS){const s=z(t,"labels","logLoss"),a=z(e,"predictions","logLoss");let o=null;n!=null&&(o=z(n,"weights","logLoss")),mi(s.shape,a.shape,"Error in logLoss: ");const l=St(1),u=St(r),c=pr(se(s,_a(We(a,u)))),f=se(yt(l,s),_a(We(yt(l,a),u))),d=yt(c,f);return ff(d,o,i)}const jPe=ee({logLoss_:HPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qPe(t,e,n,r=cs.SUM_BY_NONZERO_WEIGHTS){const i=z(t,"labels","meanSquaredError"),s=z(e,"predictions","meanSquaredError");let a=null;n!=null&&(a=z(n,"weights","meanSquaredError")),mi(i.shape,s.shape,"Error in meanSquaredError: ");const o=s3(i,s);return ff(o,a,r)}const XPe=ee({meanSquaredError_:qPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YPe(t,e){const n=z(t,"labels","sigmoidCrossEntropyWithLogits"),r=z(e,"logits","sigmoidCrossEntropyWithLogits");mi(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const i=Ku(r),s=se(r,n),a=HM(ao(pr(Wr(r))));return We(yt(i,s),a)}function KPe(t,e,n,r=0,i=cs.SUM_BY_NONZERO_WEIGHTS){let s=z(t,"multiClassLabels","sigmoidCrossEntropy");const a=z(e,"logits","sigmoidCrossEntropy");let o=null;if(n!=null&&(o=z(n,"weights","sigmoidCrossEntropy")),mi(s.shape,a.shape,"Error in sigmoidCrossEntropy: "),r>0){const u=St(r),c=St(1),f=St(.5);s=We(se(s,yt(c,u)),se(f,u))}const l=YPe(s,a);return ff(l,o,i)}const ZPe=ee({sigmoidCrossEntropy_:KPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JPe(t,e,n=-1){if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${n}`);return Ou((i,s,a)=>{const l=B4(s,[n],!0),u=yt(ft(s,"float32"),l);a([i,u]);const c=pr(se(u,i));return{value:Tt(c,[n]),gradFunc:(h,p)=>{const[m,g]=p,v=$r(h.shape,[n]);return[se(ce(h,v),yt(ft(m,"float32"),ao(g))),se(ce(h,v),yt(ao(g),ft(m,"float32")))]}}})(t,e)}function QPe(t,e,n,r=0,i=cs.SUM_BY_NONZERO_WEIGHTS){let s=z(t,"onehotLabels","softmaxCrossEntropy");const a=z(e,"logits","softmaxCrossEntropy");let o=null;if(n!=null&&(o=z(n,"weights","softmaxCrossEntropy")),mi(s.shape,a.shape,"Error in softmaxCrossEntropy: "),r>0){const u=St(r),c=St(1),f=St(s.shape[1]);s=We(se(s,yt(c,u)),kt(u,f))}const l=JPe(s,a);return ff(l,o,i)}const e5e=ee({softmaxCrossEntropy_:QPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t5e={fft:q_,ifft:C0,rfft:X_,irfft:i3},n5e={hammingWindow:QLe,hannWindow:Wne,frame:Gne,stft:rPe},fd={flipLeftRight:oPe,resizeNearestNeighbor:jne,resizeBilinear:Hne,rotateWithOffset:uPe,cropAndResize:sPe,nonMaxSuppression:fPe,nonMaxSuppressionAsync:bPe,nonMaxSuppressionWithScore:wPe,nonMaxSuppressionWithScoreAsync:SPe,nonMaxSuppressionPadded:EPe,nonMaxSuppressionPaddedAsync:kPe},qne={bandPart:$Pe,gramSchmidt:DPe,qr:OPe},r5e={absoluteDifference:PPe,computeWeightedLoss:ff,cosineDistance:BPe,hingeLoss:VPe,huberLoss:GPe,logLoss:jPe,meanSquaredError:XPe,sigmoidCrossEntropy:ZPe,softmaxCrossEntropy:e5e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class df extends am{minimize(e,n=!1,r){const{value:i,grads:s}=this.computeGradients(e,r);if(r!=null){const a=r.map(o=>({name:o.name,tensor:s[o.name]}));this.applyGradients(a)}else this.applyGradients(s);return Pt(s),n?i:(i.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return Ene(e,n)}dispose(){this.iterations_!=null&&Pt(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:St(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(df,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class g3 extends df{constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=J.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=J.registeredVariables[r],a=!1;this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accum_grad`,variable:oe(()=>fn(s).variable(a))}),this.accumulatedUpdates[i]==null&&(this.accumulatedUpdates[i]={originalName:`${r}/accum_var`,variable:oe(()=>fn(s).variable(a))});const o=Array.isArray(e)?e[i].tensor:e[r];if(o==null)return;const l=this.accumulatedGrads[i].variable,u=this.accumulatedUpdates[i].variable;oe(()=>{const c=We(se(l,this.rho),se(Bn(o),1-this.rho)),f=se(kt(Ii(We(u,this.epsilon)),Ii(We(l,this.epsilon))),o),d=We(se(u,this.rho),se(Bn(f),1-this.rho));l.assign(c),u.assign(d);const h=We(se(f,-this.learningRate),s);s.assign(h)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(Pt(this.accumulatedGrads.map(e=>e.variable)),Pt(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}g3.className="Adadelta";Oe(g3);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class v3 extends df{constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=J.registeredVariables[r];this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accumulator`,variable:oe(()=>B_(s.shape,this.initialAccumulatorValue).variable(!1))});const a=Array.isArray(e)?e[i].tensor:e[r];if(a==null)return;const o=this.accumulatedGrads[i].variable;oe(()=>{const l=We(o,Bn(a));o.assign(l);const u=We(se(kt(a,Ii(We(l,J.backend.epsilon()))),-this.learningRate),s);s.assign(u)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&Pt(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}v3.className="Adagrad";Oe(v3);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class y3 extends df{constructor(e,n,r,i=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=i,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],oe(()=>{this.accBeta1=St(n).variable(),this.accBeta2=St(r).variable()}),i==null&&(this.epsilon=J.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);oe(()=>{const r=yt(1,this.accBeta1),i=yt(1,this.accBeta2);n.forEach((s,a)=>{const o=J.registeredVariables[s],l=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${s}/m`,variable:oe(()=>fn(o).variable(l))}),this.accumulatedSecondMoment[a]==null&&(this.accumulatedSecondMoment[a]={originalName:`${s}/v`,variable:oe(()=>fn(o).variable(l))});const u=Array.isArray(e)?e[a].tensor:e[s];if(u==null)return;const c=this.accumulatedFirstMoment[a].variable,f=this.accumulatedSecondMoment[a].variable,d=We(se(c,this.beta1),se(u,1-this.beta1)),h=We(se(f,this.beta2),se(Bn(u),1-this.beta2)),p=kt(d,r),m=kt(h,i);c.assign(d),f.assign(h);const g=We(se(kt(p,We(Ii(m),this.epsilon)),-this.learningRate),o);o.assign(g)}),this.accBeta1.assign(se(this.accBeta1,this.beta1)),this.accBeta2.assign(se(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Pt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&Pt(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),oe(()=>{this.accBeta1.assign(Zc(this.beta1,this.iterations_+1)),this.accBeta2.assign(Zc(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}y3.className="Adam";Oe(y3);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class b3 extends df{constructor(e,n,r,i=null,s=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=i,this.decay=s,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],oe(()=>{this.iteration=St(0).variable(),this.accBeta1=St(n).variable()}),i==null&&(this.epsilon=J.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);oe(()=>{const r=yt(1,this.accBeta1),i=kt(-this.learningRate,We(se(this.iteration,this.decay),1));n.forEach((s,a)=>{const o=J.registeredVariables[s],l=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${s}/m`,variable:fn(o).variable(l)}),this.accumulatedWeightedInfNorm[a]==null&&(this.accumulatedWeightedInfNorm[a]={originalName:`${s}/v`,variable:fn(o).variable(l)});const u=Array.isArray(e)?e[a].tensor:e[s];if(u==null)return;const c=this.accumulatedFirstMoment[a].variable,f=this.accumulatedWeightedInfNorm[a].variable,d=We(se(c,this.beta1),se(u,1-this.beta1)),h=se(f,this.beta2),p=Wr(u),m=Xu(h,p);c.assign(d),f.assign(m);const g=We(se(kt(i,r),kt(d,We(m,this.epsilon))),o);o.assign(g)}),this.iteration.assign(We(this.iteration,1)),this.accBeta1.assign(se(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Pt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&Pt(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}b3.className="Adamax";Oe(b3);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Y_ extends df{constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=Array.isArray(e)?e[i].tensor:e[r];if(s==null)return;const a=J.registeredVariables[r];oe(()=>{const o=We(se(this.c,s),a);a.assign(o)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=ai(St(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}Y_.className="SGD";Oe(Y_);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class x3 extends Y_{constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=St(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=J.registeredVariables[r];this.accumulations[i]==null&&(this.accumulations[i]={originalName:`${r}/momentum`,variable:oe(()=>fn(s).variable(!1))});const a=this.accumulations[i].variable,o=Array.isArray(e)?e[i].tensor:e[r];o!=null&&oe(()=>{let l;const u=We(se(this.m,a),o);this.useNesterov?l=We(se(this.c,We(o,se(u,this.m))),s):l=We(se(this.c,u),s),a.assign(u),s.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&Pt(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}x3.className="Momentum";Oe(x3);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class w3 extends df{constructor(e,n=.9,r=0,i=null,s=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=i,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=s,i==null&&(this.epsilon=J.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=J.registeredVariables[r],a=!1;this.accumulatedMeanSquares[i]==null&&(this.accumulatedMeanSquares[i]={originalName:`${r}/rms`,variable:oe(()=>fn(s).variable(a))}),this.accumulatedMoments[i]==null&&(this.accumulatedMoments[i]={originalName:`${r}/momentum`,variable:oe(()=>fn(s).variable(a))}),this.accumulatedMeanGrads[i]==null&&this.centered&&(this.accumulatedMeanGrads[i]={originalName:`${r}/mg`,variable:oe(()=>fn(s).variable(a))});const o=Array.isArray(e)?e[i].tensor:e[r];if(o==null)return;const l=this.accumulatedMeanSquares[i].variable,u=this.accumulatedMoments[i].variable;oe(()=>{const c=We(se(l,this.decay),se(Bn(o),1-this.decay));if(this.centered){const f=this.accumulatedMeanGrads[i].variable,d=We(se(f,this.decay),se(o,1-this.decay)),h=kt(se(o,this.learningRate),Ii(yt(c,We(Bn(d),this.epsilon)))),p=We(se(u,this.momentum),h);l.assign(c),f.assign(d),u.assign(p);const m=yt(s,p);s.assign(m)}else{const f=We(se(l,this.decay),se(Bn(o),1-this.decay)),d=We(se(u,this.momentum),kt(se(o,this.learningRate),Ii(We(f,this.epsilon))));l.assign(f),u.assign(d);const h=yt(s,d);s.assign(h)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&Pt(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&Pt(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&Pt(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}w3.className="RMSProp";Oe(w3);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ph{static sgd(e){return new Y_(e)}static momentum(e,n,r=!1){return new x3(e,n,r)}static rmsprop(e,n=.9,r=0,i=null,s=!1){return new w3(e,n,r,i,s)}static adam(e=.001,n=.9,r=.999,i=null){return new y3(e,n,r,i)}static adadelta(e=.001,n=.95,r=null){return new g3(e,n,r)}static adamax(e=.002,n=.9,r=.999,i=null,s=0){return new b3(e,n,r,i,s)}static adagrad(e,n=.1){return new v3(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ff={sgd:ph.sgd,momentum:ph.momentum,adadelta:ph.adadelta,adagrad:ph.adagrad,rmsprop:ph.rmsprop,adamax:ph.adamax,adam:ph.adam};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i5e=(()=>typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t())();function yE(){return new Promise(t=>i5e(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function az(t,e){const n=t[0].length;t.forEach((i,s)=>{R(i.length===n,()=>`Error in concat${n}D: rank of tensors[${s}] must be the same as the rank of the rest (${n})`)}),R(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((i,s)=>{for(let a=0;a<n;a++)R(a===e||i[a]===r[a],()=>`Error in concat${n}D: Shape of tensors[${s}] (${i}) does not match the shape of the rest (${r}) along the non-concatenated axis ${s}.`)})}function zc(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oz=30;function _3(t){return t<=oz?t:eT(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lz(t,e,n){const r=n*(typeof t=="number"?t:t[0]),i=e*(typeof t=="number"?t:t[1]);return[r,i]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K_(t,e,n,r=!0){let i=[];if(r)i=i.concat(e.slice(0)),i.push(t[0]/n),i=i.concat(t.slice(1));else{i=i.concat(t[0]);const s=e.length;for(let a=0;a<s;++a)i=i.concat([t[a+1]/e[a],e[a]]);i=i.concat(t.slice(s+1))}return i}function Z_(t,e,n=!0){const r=[];if(n){r.push(e);for(let i=e+1;i<t;++i)i<=2*e?(r.push(i),r.push(i-(e+1))):r.push(i)}else{const i=[],s=[];for(let a=1;a<t;++a)a>=e*2+1||a%2===1?s.push(a):i.push(a);r.push(...i),r.push(0),r.push(...s)}return r}function J_(t,e,n,r=!0){const i=[];r?i.push(t[0]/n):i.push(t[0]*n);for(let s=1;s<t.length;++s)s<=e.length?r?i.push(e[s-1]*t[s]):i.push(t[s]/e[s-1]):i.push(t[s]);return i}function uz(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function cz(t,e,n){const r=t.slice(0,1);for(let i=0;i<n;++i)r.push(t[i+1]-e[i][0]-e[i][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S3=1.7580993408473768,C3=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fz=.3275911,dz=.254829592,hz=-.284496736,pz=1.421413741,mz=-1.453152027,gz=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ey(...t){Ce().getBool("IS_TEST")||console.warn(...t)}function s5e(...t){Ce().getBool("IS_TEST")||console.log(...t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jc(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function Xne(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function Yne(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=0;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function Kne(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=2;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function vz(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function Zne(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function Jne(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let i=0;i<Math.ceil(t/2);i++){const s=(e?2:-2)*Math.PI*(i/t);n[i]=Math.cos(s),r[i]=Math.sin(s)}return{real:n,imag:r}}function Qne(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),i=Math.cos(r),s=Math.sin(r);return{real:i,imag:s}}function yz(t,e,n=0){let r=[];if(typeof e=="number")R(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const i=e.reduce((a,o)=>(o===-1&&(a+=1),a),0);R(i<=1,()=>"There should be only one negative value in split array.");const s=e.indexOf(-1);if(s!==-1){const a=e.reduce((o,l)=>l>0?o+l:o);e[s]=t.shape[n]-a}R(t.shape[n]===e.reduce((a,o)=>a+o),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ere(t,e){let n=!1,r;for(t<=oz?(r=t,n=!0):r=eT(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=eT(t,r+1);return r}function tre(t,e,n){const r=[],i=t.length;for(let s=0;s<i;s++)s!==e?r.push(t[s]):r.push(n);return r}function bz(t,e,n,r){const i=e.shape.length,s=t.shape.length;if(r!==0&&(r<-i||r>i))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${r}`);if(r<0&&(r+=i),r>s)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${s}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let f=0;f<r;++f)if(t.shape[f]!==e.shape[f])throw new Error(`x.shape[${f}]: ${t.shape[f]} should be equal to indices.shape[${f}]: ${e.shape[f]}.`);const a=t.shape[n],o=[];let l=1,u=1,c=1;for(let f=0;f<r;++f)o.push(t.shape[f]),l*=t.shape[f];for(let f=r;f<n;f++)o.push(t.shape[f]),u*=t.shape[f];for(let f=r;f<i;f++)o.push(e.shape[f]);for(let f=n+1;f<s;f++)o.push(t.shape[f]),c*=t.shape[f];return{batchSize:l,sliceSize:c,outerSize:u,dimSize:a,outputShape:o}}const a5e=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:bz,computeOutShape:tre,segOpComputeOptimalWindowSize:ere},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xz(t){try{return t.map(e=>wp(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function nre(t){return t.map(e=>sm(e))}const rre=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:dz,ERF_A2:hz,ERF_A3:pz,ERF_A4:mz,ERF_A5:gz,ERF_P:fz,PARALLELIZE_THRESHOLD:oz,SELU_SCALE:C3,SELU_SCALEALPHA:S3,applyActivation:f3,assertAndGetBroadcastShape:cn,assertAxesAreInnerMostDims:Oi,assertParamsConsistent:az,assignToTypedArray:Zne,axesAreInnerMostDims:z4,calculateShapes:py,combineLocations:kne,complexWithEvenIndex:Yne,complexWithOddIndex:Kne,computeConv2DInfo:gi,computeConv3DInfo:Vd,computeDefaultPad:T4,computeDilation2DInfo:F_,computeOptimalWindowSize:_3,computeOutAndReduceShapes:vi,computeOutShape:zc,computePool2DInfo:ol,computePool3DInfo:lf,convertConv2DDataFormat:uf,eitherStridesOrDilationsAreOne:Ri,expandShapeToKeepDim:$r,exponent:Qne,exponents:Jne,fromStringArrayToUint8:nre,fromUint8ToStringArray:xz,getAxesPermutation:Ir,getBroadcastDims:Lx,getComplexWithIndex:vz,getFusedBiasGradient:c3,getFusedDyActivation:u3,getImageCenter:lz,getInnerMostAxes:zr,getPermuted:Z_,getReductionAxes:Qr,getReshaped:K_,getReshapedPermuted:J_,getSliceBeginCoords:uz,getSliceSize:cz,getUndoAxesPermutation:by,log:s5e,mergeRealAndImagArrays:Jc,prepareAndValidate:OM,prepareSplitSize:yz,segment_util:a5e,shouldFuse:d3,slice_util:sne,splitRealAndImagArrays:Xne,tupleValuesAreOne:_d,upcastType:wa,validateInput:c4,validateUpdateShape:u4,warn:Ey},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o5e=Object.freeze(Object.defineProperty({__proto__:null,nonMaxSuppressionV3Impl:h3,nonMaxSuppressionV4Impl:p3,nonMaxSuppressionV5Impl:m3,whereImpl:o3},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ire={kernelName:Rw,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>se(t,Sy(ft(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l5e={kernelName:bv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Bn(ft(n,"float32")),i=Ii(yt(St(1),r));return pr(kt(t,i))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u5e={kernelName:xv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Ii(yt(Bn(ft(n,"float32")),1));return kt(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c5e={kernelName:im,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=cn(n.shape,r.shape);return{a:()=>{let o=t;const l=Qr(n.shape,i);return l.length>0&&(o=Tt(o,l)),ce(o,n.shape)},b:()=>{let o=t;const l=Qr(r.shape,i);return l.length>0&&(o=Tt(o,l)),ce(o,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f5e={kernelName:Ow,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((r,i)=>{n[i]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d5e={kernelName:Fw,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>fn(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h5e={kernelName:Lw,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>fn(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p5e={kernelName:wv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>kt(t,Ii(yt(St(1),Bn(ft(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m5e={kernelName:_v,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Ii(We(St(1),Bn(ft(n,"float32"))));return kt(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g5e={kernelName:Ev,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=cn(n.shape,r.shape);return{a:()=>{const o=We(Bn(n),Bn(r));let l=se(t,kt(r,o));const u=Qr(n.shape,i);return u.length>0&&(l=Tt(l,u)),ce(l,n.shape)},b:()=>{const o=We(Bn(n),Bn(r));let l=pr(se(t,kt(n,o)));const u=Qr(r.shape,i);return u.length>0&&(l=Tt(l,u)),ce(l,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v5e={kernelName:Sv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>kt(t,We(Bn(ft(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y5e={kernelName:Cv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>kt(t,yt(St(1),Bn(ft(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b5e(t,e,n,r,i,s){const a=z(t,"dy","avgPool3dGrad"),o=z(e,"input","avgPool3dGrad");let l=a,u=o,c=!1;o.rank===4&&(c=!0,l=ce(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),u=ce(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),R(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),R(u.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${u.rank}.`),s!=null&&R(ni(i),()=>`Error in avgPool3dGrad: pad must be an integer when using, dimRoundingMode ${s} but got pad ${i}.`);const f={dy:l,input:u},d={filterSize:n,strides:r,pad:i,dimRoundingMode:s},h=J.runKernel(GA,f,d);return c?ce(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const x5e=ee({avgPool3dGrad_:b5e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w5e={kernelName:zw,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:i,strides:s,pad:a,dimRoundingMode:o}=n;return{x:()=>x5e(t,r,i,s,a,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _5e(t,e,n,r,i){const s=z(t,"dy","avgPoolGrad"),a=z(e,"input","avgPoolGrad");R(a.rank===s.rank,()=>`Rank of input (${a.rank}) does not match rank of dy (${s.rank})`);let o=a,l=s,u=!1;a.rank===3&&(u=!0,o=ce(a,[1,a.shape[0],a.shape[1],a.shape[2]]),l=ce(s,[1,s.shape[0],s.shape[1],s.shape[2]])),R(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),R(o.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${o.rank}.`);const c={dy:l,input:o},f={filterSize:n,strides:r,pad:i},d=J.runKernel(WA,c,f);return u?ce(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const S5e=ee({avgPoolGrad_:_5e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C5e={kernelName:Pw,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:i,strides:s,pad:a}=n;return{x:()=>S5e(t,r,i,s,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E5e={kernelName:Bw,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,i]=e,{transposeA:s,transposeB:a}=n;return!s&&!a?{a:()=>hn(t,i,!1,!0),b:()=>hn(r,t,!0,!1)}:!s&&a?{a:()=>hn(t,i,!1,!1),b:()=>hn(t,r,!0,!1)}:s&&!a?{a:()=>hn(i,t,!1,!0),b:()=>hn(r,t,!1,!1)}:{a:()=>hn(i,t,!0,!0),b:()=>hn(t,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T5e={kernelName:Uw,gradFunc:(t,e,n)=>{const{blockShape:r,crops:i}=n;return{x:()=>G_(t,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k5e={kernelName:Ete,gradFunc:(t,e,n)=>{const r=n,i=r.inputShape,s=r.shape,a=Array.from(s);for(let l=i.length-1;l>=0;l--)if(i[l]===s[l])a[l]=1;else if(i[l]!==1)throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${s}].`);const o=[];for(let l=0;l<a.length;l++)a[l]>1&&o.push(l);return{x:()=>Tt(t,o,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A5e={kernelName:Tv,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M5e={kernelName:kv,gradFunc:t=>({x:()=>fn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N5e={kernelName:Av,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:i,clipValueMax:s}=n;return{x:()=>Bs(Qo(Gd(r,i),om(r,s)),t,fn(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $5e={kernelName:Vw,inputsToSave:["x"],gradFunc:ire.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I5e={kernelName:Ww,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(l=>l.shape),{axis:i}=n,s=Xt(i,e[0].shape)[0],a=r.map(l=>l[s]);return gs(t,a,s).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D5e={kernelName:Gw,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,{dilations:s,strides:a,pad:o,dataFormat:l}=n;return R(_d(s),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`),{x:()=>M4(r.shape,t,i,a,o,l),filter:()=>rz(r,t,i.shape,a,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R5e={kernelName:Hw,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,{strides:s,pad:a,dataFormat:o,dimRoundingMode:l}=n;return{dy:()=>Kc(t,i,s,a,o,1,l),filter:()=>rz(t,r,i.shape,s,a,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O5e(t,e,n,r,i){let s=t;t.rank===4&&(s=ce(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let a=e;a.rank===4&&(a=ce(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),R(s.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${s.shape}.`),R(a.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${a.shape}.`),R(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),R(s.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${s.shape[4]}) must match input depth in filter (${n[3]}.`),R(a.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${a.shape[4]}) must match output depth for filter (${n[4]}).`);const o={x:s,dy:a},l={strides:r,pad:i,filterShape:n};return J.runKernel(XA,o,l)}const F5e=ee({conv3DBackpropFilter_:O5e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L5e={kernelName:jw,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:i,pad:s}=n;R(_d(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[a,o]=e;return{x:()=>bne(a.shape,t,o,i,s),filter:()=>F5e(a,t,o.shape,i,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P5e={kernelName:Mv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>se(pr(e3(ft(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z5e={kernelName:Nv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>se(t3(ft(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B5e={kernelName:qw,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i,exclusive:s,reverse:a}=n;return{x:()=>{const o=Ir([i],r.rank);let l=VM(t,i,s,!a);return o!=null&&(l=$n(l,o)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U5e={kernelName:Xw,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:i,pad:s,dimRoundingMode:a}=n,o=r??[1,1];R(_d(o),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`);const[l,u]=e;return R(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),R(u.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${u.rank}.`),R(l.shape[3]===u.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`),R(Ri(i,o),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${i} and dilations '${o}'.`),a!=null&&R(ni(s),()=>`Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode ${a} but got pad ${s}.`),{x:()=>Une(l.shape,t,u,i,s,r,a),filter:()=>Bne(l,t,u.shape,i,s,r,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V5e={kernelName:Yw,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,s={x:r,filter:i,dy:t},a={x:r,filter:i,dy:t};return{x:()=>J.runKernel(tT,s,n),filter:()=>J.runKernel(nT,a,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W5e={kernelName:Iv,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>J.runKernel(nM,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G5e={kernelName:Dv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=se(ao(pr(Bn(n))),2/Math.sqrt(Math.PI));return{x:()=>se(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H5e={kernelName:Rv,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>se(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j5e={kernelName:Zw,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>ce(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q5e={kernelName:Ov,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>se(t,ao(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X5e={kernelName:Fv,gradFunc:t=>({x:()=>fn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y5e={kernelName:Lv,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=cn(n.shape,r.shape);return{a:()=>{const o=kt(t,ft(r,"float32")),l=Qr(n.shape,i);return l.length>0?ce(Tt(o,l),n.shape):o},b:()=>{let o=se(t,ft(n,"float32"));const l=Qr(r.shape,i);l.length>0&&(o=ce(Tt(o,l),r.shape));const u=Bn(r);return pr(kt(o,ft(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K5e={kernelName:Jw,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[i,s,a,o]=e,l=o??St(1),u=Qr(s.shape,i.shape),c=[];if(s.rank===1){for(let x=0;x<i.shape.length-1;++x)c.push(i.shape[x]);c.push(1)}const f=yt(i,s),d=se(t,l),h=JM(We(a,St(r))),p=se(se(se(h,h),h),St(-.5));return{x:()=>s.rank===1?ce(se(se(t,cd(ce(h,[1,1,1,s.shape[0]]),c)),l),i.shape):ce(se(se(t,h),l),i.shape),mean:()=>{let x=se(se(h,St(-1)),d);return s.rank===1&&(x=Tt(x,u)),ce(x,s.shape)},variance:()=>{let x=se(se(p,f),d);return s.rank===1&&(x=Tt(x,u)),ce(x,s.shape)},scale:()=>{const x=se(f,h);let w=se(t,x);return s.rank===1&&(w=Tt(w,u)),ce(w,s.shape)},offset:()=>{let x=t;return s.rank===1&&(x=Tt(x,u)),ce(x,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z5e={kernelName:Qw,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,i]=e,{axis:s}=n,a=Xt(s,r.shape)[0];return{x:()=>{const l=r.shape,u=i.size,c=l.slice(0,a),f=c.length,d=l.slice(s,l.length).slice(1),h=d.length,p=OH(0,f),m=OH(f+1,f+1+h),g=FH([c,[u],d]),v=ce(t,g),y=ce(i,[u]),b=FH([[f],p,m]),x=$n(v,b);let w=Q4(x,y,r.shape[a]);const S=by(b);return w=$n(w,S),w},indices:()=>i}}};function OH(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function FH(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J5e={kernelName:Pv,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>fn(n),b:()=>fn(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q5e={kernelName:zv,gradFunc:t=>({x:()=>ft(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e4e={kernelName:Bv,gradFunc:t=>({x:()=>fn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t4e={kernelName:Uv,gradFunc:t=>({x:()=>fn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n4e={kernelName:Vv,gradFunc:t=>({x:()=>fn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r4e={kernelName:t_,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:i}=n,s=ll(r,0);return{x:()=>Bs(s,t,se(t,i))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i4e={kernelName:Gv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>kt(t,We(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s4e={kernelName:Wv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>kt(t,ft(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a4e={kernelName:Tte,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n;return{logits:()=>{const a=ao(r);return yt(t,se(Tt(t,i,!0),a))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o4e(t,e,n,r=5,i=1,s=1,a=.5){const o={x:t,y:e,dy:n},l={depthRadius:r,bias:i,alpha:s,beta:a};return J.runKernel(cM,o,l)}const l4e=ee({localResponseNormalizationBackprop_:o4e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u4e={kernelName:o_,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{depthRadius:s,bias:a,alpha:o,beta:l}=n;return{x:()=>l4e(r,i,t,s,a,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sre(t,e,n,r){return e.rank<n.rank&&(e=ce(e,$r(e.shape,r))),t.rank<n.rank&&(t=ce(t,$r(t.shape,r))),{x:()=>se(t,ft(Wd(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LH={kernelName:l_,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:i}=r,s=e[0],a=e[1],o=Xt(i,s.shape),l=sre(t,a,s,o);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c4e={kernelName:Hv,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>se(t,ft(Gd(n,r),"float32")),b:()=>se(t,ft(GM(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f4e(t,e,n,r,i,s,a){const o=z(t,"dy","maxPool3dGrad"),l=z(e,"input","maxPool3dGrad"),u=z(n,"output","maxPool3dGrad");let c=o,f=l,d=u,h=!1;l.rank===4&&(h=!0,c=ce(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),f=ce(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),d=ce(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),R(c.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`),R(f.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${f.rank}.`),R(d.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${d.rank}.`),a!=null&&R(ni(s),()=>`Error in maxPool3dGrad: pad must be an integer when using, dimRoundingMode ${a} but got pad ${s}.`);const p={dy:c,input:f,output:d},m={filterSize:r,strides:i,pad:s,dimRoundingMode:a},g=J.runKernel(dM,p,m);return h?ce(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const d4e=ee({maxPool3dGrad_:f4e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h4e={kernelName:c_,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{filterSize:s,strides:a,pad:o,dimRoundingMode:l}=n;return{x:()=>d4e(t,r,i,s,a,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p4e(t,e,n,r,i,s,a){const o=z(t,"dy","maxPoolGrad"),l=z(e,"input","maxPoolGrad"),u=z(n,"output","maxPoolGrad");R(l.rank===o.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${o.rank})`),R(o.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${o.rank}.`),R(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),a!=null&&R(ni(s),()=>`Error in maxPoolGrad: pad must be an integer when using, dimRoundingMode ${a} but got pad ${s}.`);const c={dy:o,input:l,output:u},f={filterSize:r,strides:i,pad:s,dimRoundingMode:a};return J.runKernel(fM,c,f)}const m4e=ee({maxPoolGrad_:p4e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g4e={kernelName:u_,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{filterSize:s,strides:a,pad:o}=n;return{x:()=>m4e(t,r,i,s,a,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v4e={kernelName:f_,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n,s=Xt(i,r.shape),o=vi(r.shape,s)[1],l=Ee(o);return{x:()=>{const c=r.shape.slice();s.forEach(h=>{c[h]=1});const f=ce(t,c);return kt(se(f,Yu(r.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y4e={kernelName:d_,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:i}=r,[s,a]=e,o=Xt(i,s.shape),l=sre(t,a,s,o);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b4e={kernelName:jv,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>se(t,ft(om(n,r),"float32")),b:()=>se(t,ft(ll(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x4e={kernelName:h_,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:i}=n,s=i.map(a=>a[0]);return{x:()=>pn(t,s,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w4e={kernelName:qv,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=cn(n.shape,r.shape);return{a:()=>{const o=Qr(n.shape,i);return o.length>0?ce(Tt(t,o),n.shape):t},b:()=>{const o=se(t,pr(vy(kt(n,r)))),l=Qr(r.shape,i);return l.length>0?ce(Tt(o,l),r.shape):o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _4e={kernelName:Xv,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=cn(n.shape,r.shape);return{a:()=>{const o=se(t,ft(r,"float32")),l=Qr(n.shape,i);return l.length>0?ce(Tt(o,l),n.shape):o},b:()=>{const o=se(t,ft(n,"float32")),l=Qr(r.shape,i);return l.length>0?ce(Tt(o,l),r.shape):o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S4e={kernelName:p_,gradFunc:t=>({x:()=>pr(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C4e={kernelName:v_,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>Fr(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E4e={kernelName:g_,gradFunc:t=>({x:()=>fn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T4e={kernelName:y_,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return el(t,r).map(s=>()=>s)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PH={kernelName:b_,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:i}=n,s=i.map(a=>a[0]);return{x:()=>pn(t,s,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k4e={kernelName:Yv,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,i]=e,s=n,a=r,o=cn(s.shape,a.shape);return{a:()=>{const c=ft(a,"float32");let f=se(t,se(c,Zc(s,yt(c,St(1)))));const d=Qr(s.shape,o);return d.length>0&&(f=Tt(f,d)),ce(f,s.shape)},b:()=>{const c=ll(s,0),f=Bs(c,_a(s),fn(s));let d=se(t,se(i,f));const h=Qr(a.shape,o);return h.length>0&&(d=Tt(d,h)),ce(d,a.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A4e={kernelName:x_,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,i=ll(n,0);return{x:()=>Bs(i,t,se(t,r)),alpha:()=>{let s=Bs(i,fn(t),se(t,n));const a=Qr(r.shape,t.shape);return a.length>0&&(s=Tt(s,a)),ce(s,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M4e={kernelName:$v,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=cn(n.shape,r.shape);return{a:()=>{const o=kt(t,ft(r,"float32")),l=Qr(n.shape,i);return l.length>0?ce(Tt(o,l),n.shape):o},b:()=>{let o=se(t,ft(n,"float32"));const l=Qr(r.shape,i);l.length>0&&(o=ce(Tt(o,l),r.shape));const u=Bn(r);return pr(kt(o,ft(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N4e={kernelName:Kv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>kt(t,pr(Bn(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $4e={kernelName:Jv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=se(om(n,6),Sy(n));return{x:()=>se(t,ft(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I4e={kernelName:Zv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>se(t,ft(Sy(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D4e={kernelName:w_,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ce(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R4e={kernelName:S_,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,i={dy:t,images:r};return{images:()=>J.runKernel(_M,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O4e={kernelName:__,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,i={dy:t,images:r};return{images:()=>J.runKernel(wM,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F4e={kernelName:C_,gradFunc:(t,e,n)=>{const{dims:r}=n,i=Xt(r,t.shape);return{x:()=>Ca(t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L4e={kernelName:Qv,gradFunc:t=>({x:()=>fn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P4e={kernelName:ey,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>pr(kt(t,se(Zc(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z4e={kernelName:E_,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>ft(fn(n),"float32"),t:()=>se(t,ft(n,t.dtype)),e:()=>se(t,ft(V_(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B4e={kernelName:ty,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=ll(n,St(0)),i=St(S3),s=St(C3),a=se(t,s),o=se(se(t,i),ao(ft(n,"float32")));return Bs(r,a,o)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U4e={kernelName:sy,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>se(t,se(n,yt(St(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V4e={kernelName:iy,gradFunc:t=>({x:()=>fn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W4e={kernelName:ny,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>se(z_(ft(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G4e={kernelName:ry,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>se(UM(ft(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H4e={kernelName:T_,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:i,size:s}=n,a=r.shape,[o,l]=FM(r,i,s),u=[];for(let c=0;c<t.rank;c++)u.push([o[c],a[c]-o[c]-l[c]]);return{x:()=>cf(t,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j4e={kernelName:N_,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:i}=n,s=!0,a=se(t,r);return{logits:()=>yt(a,se(Tt(a,[i],s),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q4e={kernelName:ay,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>se(t,Cu(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zH={kernelName:A_,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:i}=n;return{x:()=>P_(t,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BH={kernelName:M_,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>Er(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X4e={kernelName:oy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>kt(t,se(Ii(ft(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y4e={kernelName:CM,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>se(t,se(ft(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K4e={kernelName:ly,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=St(2);return{a:()=>se(t,se(i,yt(n,r))),b:()=>se(t,se(i,yt(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z4e={kernelName:hy,gradFunc:t=>({x:()=>fn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J4e={kernelName:uy,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=cn(n.shape,r.shape);return{a:()=>{let o=t;const l=Qr(n.shape,i);return l.length>0&&(o=Tt(o,l)),ce(o,n.shape)},b:()=>{let o=t;const l=Qr(r.shape,i);return l.length>0&&(o=Tt(o,l)),ce(pr(o),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q4e={kernelName:k_,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,i=r.shape.slice(),{axis:s}=n;Xt(s,r.shape).forEach(u=>{i[u]=1});const o=ce(t,i),l=se(o,Yu(r.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eze={kernelName:cy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>kt(t,Bn(z_(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tze={kernelName:fy,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>se(yt(St(1),Bn(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nze={kernelName:dy,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:i}=n;return{x:()=>{let a=fn(r);if(r.rank===1)for(let o=0;o<i[0];++o)a=We(a,pn(t,[o*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let o=0;o<i[0];++o)for(let l=0;l<i[1];++l)a=We(a,pn(t,[o*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let o=0;o<i[0];++o)for(let l=0;l<i[1];++l)for(let u=0;u<i[2];++u)a=We(a,pn(t,[o*r.shape[0],l*r.shape[1],u*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let o=0;o<i[0];++o)for(let l=0;l<i[1];++l)for(let u=0;u<i[2];++u)for(let c=0;c<i[3];++c)a=We(a,pn(t,[o*r.shape[0],l*r.shape[1],u*r.shape[2],c*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rze={kernelName:$_,gradFunc:(t,e,n)=>{const r=n,{perm:i}=r,s=by(i);return{x:()=>$n(t,s)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ize={kernelName:I_,gradFunc:(t,e,n)=>{const r=n,{axis:i}=r;return{value:()=>Ea(t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sze={kernelName:D_,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>aze(t,n)}}};function aze(t,e){const n=Xu(e,fn(e)),r=Tp(t,n);let i=Gd(e,St(0,"int32"));const s=r.rank-i.rank;for(let o=0;o<s;++o)i=sa(i,o+1);i=Qo(i,Yu(r.shape,"bool"));const a=fn(r);return Bs(i,r,a)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oze={kernelName:R_,gradFunc:t=>({x:()=>fn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lze=[ire,l5e,u5e,c5e,f5e,d5e,h5e,p5e,m5e,g5e,v5e,y5e,w5e,C5e,E5e,T5e,k5e,A5e,M5e,N5e,$5e,I5e,R5e,D5e,L5e,P5e,z5e,B5e,U5e,V5e,M4e,W5e,G5e,H5e,j5e,q5e,Y5e,X5e,K5e,Z5e,J5e,Q5e,e4e,t4e,n4e,r4e,i4e,s4e,a4e,u4e,LH,LH,c4e,h4e,g4e,v4e,y4e,b4e,x4e,w4e,_4e,S4e,C4e,E4e,T4e,PH,PH,k4e,A4e,N4e,$4e,I4e,D4e,R4e,O4e,F4e,L4e,P4e,z4e,B4e,U4e,V4e,W4e,G4e,H4e,j4e,q4e,zH,zH,BH,BH,X4e,K4e,Y4e,Z4e,J4e,Q4e,eze,tze,nze,rze,ize,sze,oze];for(const t of lze)kte(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.abs=function(){return this.throwIfDisposed(),Wr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.acos=function(){return this.throwIfDisposed(),y4(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.acosh=function(){return this.throwIfDisposed(),b4(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.add=function(t){return this.throwIfDisposed(),We(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.all=function(t,e){return this.throwIfDisposed(),PM(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.any=function(t,e){return this.throwIfDisposed(),Rx(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.argMax=function(t){return this.throwIfDisposed(),Ox(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.argMin=function(t){return this.throwIfDisposed(),x4(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.asScalar=function(){return this.throwIfDisposed(),R(this.size===1,()=>"The array must have only 1 element."),ce(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.asType=function(t){return this.throwIfDisposed(),ft(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.as1D=function(){return this.throwIfDisposed(),ce(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.as2D=function(t,e){return this.throwIfDisposed(),ce(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),ce(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),ce(this,[t,e,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.as5D=function(t,e,n,r,i){return this.throwIfDisposed(),ce(this,[t,e,n,r,i])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.asin=function(){return this.throwIfDisposed(),w4(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.asinh=function(){return this.throwIfDisposed(),_4(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.atan=function(){return this.throwIfDisposed(),S4(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.atan2=function(t){return this.throwIfDisposed(),C4(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.atanh=function(){return this.throwIfDisposed(),E4(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),L_(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),P_(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.batchNorm=function(t,e,n,r,i){return this.throwIfDisposed(),Ep(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.broadcastTo=function(t){return this.throwIfDisposed(),Fx(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.cast=function(t){return this.throwIfDisposed(),ft(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.ceil=function(){return this.throwIfDisposed(),A4(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),zs(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof kn&&(t=[t]),Er([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.conv1d=function(t,e,n,r,i,s){return this.throwIfDisposed(),zM(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.conv2dTranspose=function(t,e,n,r,i){return this.throwIfDisposed(),BM(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.conv2d=function(t,e,n,r,i,s){return this.throwIfDisposed(),Kc(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.cos=function(){return this.throwIfDisposed(),z_(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.cosh=function(){return this.throwIfDisposed(),UM(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),VM(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),$4(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.depthwiseConv2d=function(t,e,n,r,i,s){return this.throwIfDisposed(),my(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.dilation2d=function(t,e,n,r,i){return this.throwIfDisposed(),I4(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.divNoNan=function(t){return this.throwIfDisposed(),D4(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.div=function(t){return this.throwIfDisposed(),kt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.dot=function(t){return this.throwIfDisposed(),wne(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.elu=function(){return this.throwIfDisposed(),gy(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.equal=function(t){return this.throwIfDisposed(),Wd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.erf=function(){return this.throwIfDisposed(),R4(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.exp=function(){return this.throwIfDisposed(),ao(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.expandDims=function(t){return this.throwIfDisposed(),sa(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.expm1=function(){return this.throwIfDisposed(),O4(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.fft=function(){return this.throwIfDisposed(),q_(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.flatten=function(){return this.throwIfDisposed(),ce(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.floor=function(){return this.throwIfDisposed(),vy(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.floorDiv=function(t){return this.throwIfDisposed(),LM(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.gather=function(t,e){return this.throwIfDisposed(),Tp(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.greaterEqual=function(t){return this.throwIfDisposed(),Gd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.greater=function(t){return this.throwIfDisposed(),ll(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.ifft=function(){return this.throwIfDisposed(),C0(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.irfft=function(){return this.throwIfDisposed(),i3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.isFinite=function(){return this.throwIfDisposed(),_ne(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.isInf=function(){return this.throwIfDisposed(),Sne(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.isNaN=function(){return this.throwIfDisposed(),Cne(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.leakyRelu=function(t){return this.throwIfDisposed(),U_(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.lessEqual=function(t){return this.throwIfDisposed(),om(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.less=function(t){return this.throwIfDisposed(),GM(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),P4(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.logSigmoid=function(){return this.throwIfDisposed(),Tne(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.logSoftmax=function(t){return this.throwIfDisposed(),qM(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),B4(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.log=function(){return this.throwIfDisposed(),_a(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.log1p=function(){return this.throwIfDisposed(),HM(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.logicalAnd=function(t){return this.throwIfDisposed(),Qo(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.logicalNot=function(){return this.throwIfDisposed(),V_(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.logicalOr=function(t){return this.throwIfDisposed(),XM(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.logicalXor=function(t){return this.throwIfDisposed(),Ane(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),hn(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),W_(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.max=function(t,e){return this.throwIfDisposed(),ro(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.maximum=function(t){return this.throwIfDisposed(),Xu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.mean=function(t,e){return this.throwIfDisposed(),dr(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.min=function(t,e){return this.throwIfDisposed(),S0(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.minimum=function(t){return this.throwIfDisposed(),xy(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),V4(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.mod=function(t){return this.throwIfDisposed(),W4(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.mul=function(t){return this.throwIfDisposed(),se(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.neg=function(){return this.throwIfDisposed(),pr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.norm=function(t,e,n){return this.throwIfDisposed(),l3(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.notEqual=function(t){return this.throwIfDisposed(),kp(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),w0(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.onesLike=function(){return this.throwIfDisposed(),Sa(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.pad=function(t,e){return this.throwIfDisposed(),cf(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.pool=function(t,e,n,r,i){return this.throwIfDisposed(),$ne(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.pow=function(t){return this.throwIfDisposed(),Zc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.prelu=function(t){return this.throwIfDisposed(),H_(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.prod=function(t,e){return this.throwIfDisposed(),KM(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.reciprocal=function(){return this.throwIfDisposed(),H4(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.relu=function(){return this.throwIfDisposed(),Ku(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.relu6=function(){return this.throwIfDisposed(),ZM(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.reshapeAs=function(t){return this.throwIfDisposed(),ce(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.reshape=function(t){return this.throwIfDisposed(),ce(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),Hne(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),jne(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.reverse=function(t){return this.throwIfDisposed(),Ca(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.rfft=function(){return this.throwIfDisposed(),X_(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.round=function(){return this.throwIfDisposed(),j4(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.rsqrt=function(){return this.throwIfDisposed(),JM(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.selu=function(){return this.throwIfDisposed(),QM(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.separableConv2d=function(t,e,n,r,i,s){return this.throwIfDisposed(),q4(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.sigmoid=function(){return this.throwIfDisposed(),Cu(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.sign=function(){return this.throwIfDisposed(),X4(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.sin=function(){return this.throwIfDisposed(),e3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.sinh=function(){return this.throwIfDisposed(),t3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.slice=function(t,e){return this.throwIfDisposed(),pn(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.softmax=function(t){return this.throwIfDisposed(),j_(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.softplus=function(){return this.throwIfDisposed(),yy(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),G_(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.split=function(t,e){return this.throwIfDisposed(),gs(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.sqrt=function(){return this.throwIfDisposed(),Ii(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.square=function(){return this.throwIfDisposed(),Bn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.squaredDifference=function(t){return this.throwIfDisposed(),s3(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.squeeze=function(t){return this.throwIfDisposed(),Sd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof kn?[this,t]:[this,...t];return Ea(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.step=function(t){return this.throwIfDisposed(),Sy(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.stridedSlice=function(t,e,n,r,i,s,a,o){return this.throwIfDisposed(),K4(this,t,e,n,r,i,s,a,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.sub=function(t){return this.throwIfDisposed(),yt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.sum=function(t,e){return this.throwIfDisposed(),Tt(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.tan=function(){return this.throwIfDisposed(),Z4(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.tanh=function(){return this.throwIfDisposed(),_0(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.tile=function(t){return this.throwIfDisposed(),cd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.toBool=function(){return this.throwIfDisposed(),ft(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.toFloat=function(){return this.throwIfDisposed(),ft(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.toInt=function(){return this.throwIfDisposed(),ft(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.topk=function(t,e){return this.throwIfDisposed(),J4(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.transpose=function(t){return this.throwIfDisposed(),$n(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.unique=function(t){return this.throwIfDisposed(),fT(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),Q4(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.unstack=function(t){return this.throwIfDisposed(),el(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.where=function(t,e){return this.throwIfDisposed(),Bs(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.zerosLike=function(){return this.throwIfDisposed(),fn(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let ID;function Xr(){return ID==null&&(ID=une().epsilon()),ID}function zl(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class ou extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ou.prototype)}}class Fo extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Fo.prototype)}}class re extends Error{constructor(e){super(e),Object.setPrototypeOf(this,re.prototype)}}class zt extends Error{constructor(e){super(e),Object.setPrototypeOf(this,zt.prototype)}}class wz extends Error{constructor(e){super(e),Object.setPrototypeOf(this,wz.prototype)}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ap(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function lu(t,e){if(!t)throw new wz(e)}function UH(t,e){let n=0;for(const r of t)r===e&&n++;return n}function Ms(t){return t.length===1?t[0]:t}function tr(t){return Array.isArray(t)?t:[t]}function _c(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function Ph(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let xo={};function _z(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function TF(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>TF(e));else{const e=Object.keys(t);for(const n of e){const r=t[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[n]=r.value:TF(r))}}}function Q_(t,e={},n={},r="object",i=!1){if(typeof t=="string"){const s=t;let a;if(s in n)a=n[s];else if(s in xo)a=xo[s];else if(a=e[s],a==null)throw new re(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return a}else{const s=t;if(s.className==null||s.config==null)throw new re(`${r}: Improper config format: ${JSON.stringify(s)}.
'className' and 'config' must set.`);const a=s.className;let o,l;if(a in n?[o,l]=n[a]:a in xo?[o,l]=xo.className:a in e&&([o,l]=e[a]),o==null)throw new re(`Unknown ${r}: ${a}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const u={};for(const h of Object.keys(xo))u[h]=xo[h];for(const h of Object.keys(n))u[h]=n[h];const c=s.config;c.customObjects=u;const f=Object.assign({},xo);for(const h of Object.keys(n))xo[h]=n[h];TF(s.config);const d=l(o,s.config,n,i);return xo=Object.assign({},f),d}else{const u=Object.assign({},xo);for(const f of Object.keys(n))xo[f]=n[f];const c=new o(s.config);return xo=Object.assign({},u),c}}}function uze(t,e){return t<e?-1:t>e?1:0}function nC(t,e){return-1*uze(t,e)}function dd(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function cze(t){if(t==null)throw new re(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function um(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new re(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function Sz(t,e,n=0,r=1/0){return lu(n>=0),lu(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(i=>typeof i===e)}function oi(t,e){Array.isArray(t)?(R(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,r)=>oi(n,`element ${r+1} of ${e}`))):R(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${are(t)}.`)}function are(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>are(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function fze(t,e){let n=Gi(),r;return(...s)=>{const a=Gi();return a-n<e||(n=a,r=t(...s)),r}}function ore(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Cz(t,e){return oe(()=>Ii(Tt(se(t,t),e,!0)))}class e2 extends am{getConfig(){return{}}}class Ez extends e2{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return oe(()=>{const n=Cz(e,this.axis),r=zs(n,0,this.maxValue);return se(e,kt(r,We(Xr(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}Ez.className="MaxNorm";Oe(Ez);class Tz extends e2{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return oe(()=>kt(e,We(Xr(),Cz(e,this.axis))))}getConfig(){return{axis:this.axis}}}Tz.className="UnitNorm";Oe(Tz);class kz extends e2{apply(e){return Ku(e)}}kz.className="NonNeg";Oe(kz);class Az extends e2{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return oe(()=>{const n=Cz(e,this.axis),r=We(se(this.rate,zs(n,this.minValue,this.maxValue)),se(1-this.rate,n));return se(e,kt(r,We(Xr(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}Az.className="MinMaxNorm";Oe(Az);const VH={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Zr(t){return _z(t)}function WH(t,e={}){return Q_(t,qa.getMap().classNameMap,e,"constraint")}function Jr(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in VH?VH[t]:t,config:{}};return WH(n)}else return t instanceof e2?t:WH(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function dze(t){return new Ez(t)}function hze(t){return new Tz(t)}function pze(){return new kz}function mze(t){return new Az(t)}const gze=Object.freeze(Object.defineProperty({__proto__:null,maxNorm:dze,minMaxNorm:mze,nonNeg:pze,unitNorm:hze},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const vze=["channelsFirst","channelsLast"],yze=["nearest","bilinear"],bze=["valid","same","causal"],xze=["max","avg"],wze=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const cg=new Map;function Dr(t){um(vze,"DataFormat",t)}function _ze(t){um(yze,"InterpolationFormat",t)}function co(t){um(bze,"PaddingMode",t)}function lre(t){um(xze,"PoolMode",t)}const X1=[],GH="/";function sp(t,e){X1.push(t);try{const n=e();return X1.pop(),n}catch(n){throw X1.pop(),n}}function Sze(){return X1.length===0?"":X1.join(GH)+GH}function ure(t){if(!fre(t))throw new Error("Not a valid tensor name: '"+t+"'");return Sze()+t}function cre(t){if(!fre(t))throw new Error("Not a valid tensor name: '"+t+"'");cg.has(t)||cg.set(t,0);const e=cg.get(t);if(cg.set(t,cg.get(t)+1),e>0){const n=`${t}_${e}`;return cg.set(n,1),n}else return t}const Cze=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function fre(t){return!!t.match(Cze)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Eze(t){return t===parseInt(t.toString(),10)}function hd(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let r=1;for(let i=e;i<n;++i)r*=t[i];return r}function dre(t){return t=Array.isArray(t)?new Float32Array(t):t,Us(t)}function E0(t){return S0(dre(t)).dataSync()[0]}function Cd(t){return ro(dre(t)).dataSync()[0]}function Bl(t,e){if(e<t)throw new re(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function t2(t,e){return t.asType(e)}function n2(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),t.reshape(n)}function Tze(t,e){return oe(()=>{if(t.shape.length!==2)throw new re(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=n2(t,1);return kF(n,[1,e,1])})}function kze(t){const e=[hd(t.shape)];return t.reshape(e)}function Aze(t){if(t.rank<=1)throw new re(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],hd(t.shape,1)];return t.reshape(e)}function ap(t,e,n){return oe(()=>{switch(t.rank){case 1:return n3(t,e,n);case 2:return Y4(t,[e,0],[n,t.shape[1]]);case 3:return r3(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return zx(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return pn(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return pn(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new re(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function DD(t,e,n){return oe(()=>{switch(t.rank){case 1:return n3(t,e,n);case 2:return Y4(t,[0,e],[t.shape[0],n]);case 3:return r3(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return zx(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new re(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function rC(t,e,n,r){return oe(()=>{switch(t.rank){case 1:return n3(t,e,n);case 2:switch(r){case 1:return ap(t,e,n);case 2:return DD(t,e,n);default:throw new re(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return ap(t,e,n);case 2:return r3(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return DD(t,e,n);default:throw new re(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return ap(t,e,n);case 2:return zx(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return zx(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return DD(t,e,n);default:throw new re(`The axis is not within the rank of the tensor ${r}`)}default:throw new re(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function Mz(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),Er(t,e)}function HH(t,e){switch(t.rank){case 1:return mne([t,e]);case 2:return gne([t,e],0);case 3:return vne([t,e],0);case 4:return yne([t,e],0);default:throw new re(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function kF(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new re(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return cd(t,e)}function E3(t,e=0,n=1,r,i){return Ine(t,e,n,r,i)}function Eu(t,e,n,r){if(t.rank<2||e.rank<2)throw new zt(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const i=t.shape.slice(-1)[0],s=e.shape.slice(-2)[0];if(i!==s)throw new zt(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return dT({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?AF(t.rank,r,zl()):null,activation:n});{const i=t.shape.slice(),s=i.pop();t=t.reshape([-1,s]);const a=e.shape.slice(),o=a.pop(),l=a.pop(),u=[...a,o],c=Array.from({length:e.rank},(p,m)=>m===0?e.rank-2:m<=e.rank-2?m-1:m);e=e.transpose(c).reshape([l,-1]);const f=[...i,...u];return dT({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?AF(t.rank,r,zl()):null,activation:n}).reshape(f)}}function hre(t,e,n){return oe(()=>(Array.isArray(e)?e=Us(e,"int32"):e=e.toInt(),Tp(t,e,n)))}function r2(t){return se(t,t)}function AF(t,e,n){const r=e.shape;if(e.rank!==1&&e.rank!==t)throw new re(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return r.length===1?e.reshape([1,r[0],1,1,1]):e.reshape([1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?e.reshape([1,1,1,1,r[0]]):e.reshape([1].concat(r))}else if(t===4){if(n==="channelsFirst")return r.length===1?e.reshape([1,r[0],1,1]):e.reshape([1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?e.reshape([1,1,1,r[0]]):e.reshape([1].concat(r))}else if(t===3){if(n==="channelsFirst")return r.length===1?e.reshape([1,r[0],1]):e.reshape([1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?e.reshape([1,1,r[0]]):e.reshape([1].concat(r))}else if(t<3)return e;throw new re(`Unsupported input rank by biasAdd: ${e.rank}`)}function Zu(t,e,n){return oe(()=>(n==null&&(n=zl()),Dr(n),t.add(AF(t.rank,e,n))))}function Mze(t,e=1){if(e!==1)throw new zt(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return gy(t)}function Nze(t){return oe(()=>kt(t,Wr(t).add(1)))}function pre(t,e,n,r){return oe(()=>Pne(t,e,n,r))}function $ze(t){return oe(()=>{const e=We(.5,se(.2,t));return zs(e,0,1)})}function i2(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Ize=["fanIn","fanOut","fanAvg"],Dze=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Rze(t){um(Ize,"FanMode",t)}function Oze(t){um(Dze,"Distribution",t)}class ul extends am{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class Nz extends ul{apply(e,n){return Fr(e,n)}}Nz.className="Zeros";Oe(Nz);class T3 extends ul{apply(e,n){return Yu(e,n)}}T3.className="Ones";Oe(T3);class $z extends ul{constructor(e){if(super(),typeof e!="object")throw new re(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new re(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return oe(()=>se(St(this.value),Yu(e,n)))}getConfig(){return{value:this.value}}}$z.className="Constant";Oe($z);class Iz extends ul{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return _y(e,this.minval,this.maxval,n)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}Iz.className="RandomUniform";Oe(Iz);class Dz extends ul{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new zt(`randomNormal does not support dType ${n}.`);return E3(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}Dz.className="RandomNormal";Oe(Dz);class Rz extends ul{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new zt(`truncatedNormal does not support dType ${n}.`);return a3(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}Rz.className="TruncatedNormal";Oe(Rz);let Oz=class extends ul{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return oe(()=>{if(e.length!==2||e[0]!==e[1])throw new re("Identity matrix initializer can only be used for 2D square matrices.");return se(this.gain,F4(e[0]))})}getConfig(){return{gain:this.gain}}};Oz.className="Identity";Oe(Oz);function Fze(t,e="channelsLast"){let n,r;if(Dr(e),t.length===2)n=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const i=hd(t,2);n=t[1]*i,r=t[0]*i}else if(e==="channelsLast"){const i=hd(t,0,t.length-2);n=t[t.length-2]*i,r=t[t.length-1]*i}}else{const i=hd(t);n=Math.sqrt(i),r=Math.sqrt(i)}return[n,r]}class Vs extends ul{constructor(e){if(super(),e.scale<0)throw new re(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,Rze(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,Oze(this.distribution),this.seed=e.seed}apply(e,n){const r=Fze(e),i=r[0],s=r[1];let a=this.scale;if(this.mode==="fanIn"?a/=Math.max(1,i):this.mode==="fanOut"?a/=Math.max(1,s):a/=Math.max(1,(i+s)/2),this.distribution==="normal"){const o=Math.sqrt(a);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new zt(`${this.getClassName()} does not support dType ${n}.`);return a3(e,0,o,n,this.seed)}else{const o=Math.sqrt(3*a);return _y(e,-o,o,n)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}Vs.className="VarianceScaling";Oe(Vs);class k3 extends Vs{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Vs.className}}k3.className="GlorotUniform";Oe(k3);class A3 extends Vs{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Vs.className}}A3.className="GlorotNormal";Oe(A3);class M3 extends Vs{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Vs.className}}M3.className="HeNormal";Oe(M3);class N3 extends Vs{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Vs.className}}N3.className="HeUniform";Oe(N3);class $3 extends Vs{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Vs.className}}$3.className="LeCunNormal";Oe($3);class I3 extends Vs{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Vs.className}}I3.className="LeCunNormal";Oe(I3);class Fz extends ul{constructor(e){if(super(),this.DEFAULT_GAIN=1,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed,this.seed!=null)throw new zt("Random seed is not implemented for Orthogonal Initializer yet.")}apply(e,n){return oe(()=>{if(e.length<2)throw new zt("Shape must be at least 2D.");e[0]*e[1]>2e3&&console.warn(`Orthogonal initializer is being called on a matrix with more than 2000 (${e[0]*e[1]}) elements: Slowness may result.`);const r=e[0]>e[1]?[e[1],e[0]]:e,i=E3(r,0,1,"float32");let s=qne.gramSchmidt(i);return e[0]>e[1]&&(s=s.transpose()),se(this.gain,s)})}getConfig(){return{gain:this.gain,seed:this.seed}}}Fz.className="Orthogonal";Oe(Fz);const jH={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function qH(t,e={}){return Q_(t,qa.getMap().classNameMap,e,"initializer")}function hr(t){return _z(t)}function or(t){if(typeof t=="string"){const e=t in jH?jH[t]:t;if(e==="GlorotNormal")return new A3;if(e==="GlorotUniform")return new k3;if(e==="HeNormal")return new M3;if(e==="HeUniform")return new N3;if(e==="LeCunNormal")return new $3;if(e==="LeCunUniform")return new I3;{const n={};return n.className=e,n.config={},qH(n)}}else return t instanceof ul?t:qH(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Lze(){return new Nz}function Pze(){return new T3}function zze(t){return new $z(t)}function Bze(t){return new Iz(t)}function Uze(t){return new Dz(t)}function Vze(t){return new Rz(t)}function Wze(t){return new Oz(t)}function Gze(t){return new Vs(t)}function Hze(t){return new k3(t)}function jze(t){return new A3(t)}function qze(t){return new M3(t)}function Xze(t){return new N3(t)}function Yze(t){return new $3(t)}function Kze(t){return new I3(t)}function Zze(t){return new Fz(t)}const Jze=Object.freeze(Object.defineProperty({__proto__:null,constant:zze,glorotNormal:jze,glorotUniform:Hze,heNormal:qze,heUniform:Xze,identity:Wze,leCunNormal:Yze,leCunUniform:Kze,ones:Pze,orthogonal:Zze,randomNormal:Uze,randomUniform:Bze,truncatedNormal:Vze,varianceScaling:Gze,zeros:Lze},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Qze=0;function mre(){return Qze++}const iC={};function D3(t=""){return t in iC||(iC[t]=0),iC[t]+=1,t+iC[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function MF(t){return Array.isArray(t)&&Array.isArray(t[0])}function hT(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function Wt(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new re(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function Gn(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new re(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function pT(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((r,i)=>r*i);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const XH="Variable";class gre{constructor(e,n="float32",r=XH,i=!0,s=null){this.dtype=n??"float32",this.shape=e.shape,this.id=mre(),r=r??XH,this.originalName=ure(r),this.name=cre(this.originalName),this.trainable_=i,this.constraint=s,this.val=Rne(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),e6e(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function e6e(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function NF(t){return t.map(e=>e.read())}function Lz(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class li{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class Tl{constructor(e,n,r,i,s,a,o){this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=i,this.callArgs=s,this.outputTensorIndex=o,this.id=mre(),a!=null&&(this.originalName=ure(a),this.name=cre(this.originalName)),this.rank=n.length}}let t6e=0,R3=class{constructor(e,n){this.callArgs=n,this.id=t6e++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},n6e=0;class mn extends am{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=n6e++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const r=this.getClassName();n=_c(r)+"_"+D3(r)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let s=null;e.batchSize!=null&&(s=e.batchSize),r=[s].concat(e.inputShape)}this.batchInputShape=r;let i=e.dtype;i==null&&(i=e.inputDType),i==null&&(i="float32"),this.dtype=i}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new Fo(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new re(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return Ms(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return Ms(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new ou(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new ou(`Layer ${this.name} is not connected, no input to return.`);return Ms(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new ou(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new ou(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Ms(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){if(e=tr(e),this.inputSpec==null||this.inputSpec.length===0)return;const n=tr(this.inputSpec);if(e.length!==n.length)throw new re(`Layer ${this.name} expects ${n.length} inputs, but it received ${e.length} input tensors. Input received: ${e}`);for(let r=0;r<e.length;r++){const i=e[r],s=n[r];if(s==null)continue;const a=i.rank;if(s.ndim!=null&&a!==s.ndim)throw new re(`Input ${r} is incompatible with layer ${this.name}: expected ndim=${s.ndim}, found ndim=${a}`);if(s.maxNDim!=null&&a>s.maxNDim)throw new re(`Input ${r} is incompatible with layer ${this.name}: expected max_ndim=${s.maxNDim}, found ndim=${a}`);if(s.minNDim!=null&&a<s.minNDim)throw new re(`Input ${r} is incompatible with layer ${this.name}: expected min_ndim=${s.minNDim}, found ndim=${a}.`);if(s.dtype!=null&&i.dtype!==s.dtype)throw new re(`Input ${r} is incompatible with layer ${this.name} : expected dtype=${s.dtype}, found dtype=${i.dtype}.`);if(s.axes){const o=i.shape;for(const l in s.axes){const u=Number(l),c=s.axes[l],f=u>=0?o[u]:o[o.length+u];if(c!=null&&[c,null].indexOf(f)===-1)throw new re(`Input ${r} is incompatible with layer ${this.name}: expected axis ${u} of input shape to have value ${c} but got shape ${o}.`)}}if(s.shape!=null)for(let o=0;o<s.shape.length;++o){const l=s.shape[o],u=i.shape[o];if(l!=null&&u!=null&&l!==u)throw new re(`Input ${r} is incompatible with layer ${this.name}: expected shape=${s.shape}, found shape=${i.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const r=tr(e);let i=!0;for(const a of r)if(!(a instanceof Tl)){i=!1;break}let s=!0;for(const a of r)if(a instanceof Tl){s=!1;break}if(i===s)throw new re("Arguments to apply() must be all SymbolicTensors or all Tensors");return sp(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const a=[];for(const o of tr(e))a.push(o.shape);this.build(Ms(a)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&s&&(this._refCount=1)}if(this.assertInputCompatibility(e),s){let a=this.call(e,n);const o=tr(a),l=[];for(let u of o)r.indexOf(u)!==-1&&(u=u.clone()),l.push(u);if(a=Ms(l),this.activityRegularizer!=null)throw new zt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return a}else{const a=r6e(e),o=this.computeOutputShape(a);let l;const u=i6e(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?a[0]:a),o!=null&&o.length>0&&Array.isArray(o[0])?l=o.map((c,f)=>new Tl(u,c,this,tr(e),n,this.name,f)):l=new Tl(u,o,this,tr(e),n,this.name),this.addInboundNode(e,l,null,null,a,o,n),this._refCount++,this.activityRegularizer!=null)throw new zt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,i)=>{r!=null&&e[i]!=null&&e[i]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new ou(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new ou(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Fo(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return pT(this.weights)}build(e){this.built=!0}getWeights(e=!1){return NF(e?this.trainableWeights:this.weights)}setWeights(e){oe(()=>{const n=this.weights;if(n.length!==e.length)throw new re(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const r=[],i=NF(n);for(let s=0;s<i.length;++s){const a=i[s],o=n[s],l=e[s];if(!Tn(a.shape,l.shape))throw new re(`Layer weight shape ${a.shape} not compatible with provided weight shape ${l.shape}`);r.push([o,l])}Lz(r)})}addWeight(e,n,r,i,s,a,o){if(this._addedWeightNames.indexOf(e)!==-1)throw new re(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(i=or("zeros"));const l=i.apply(n,r),u=new gre(l,r,e,a,o);return l.dispose(),s!=null&&this.addLoss(()=>s.apply(u.read())),a==null&&(a=!0),a?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=tr(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}addInboundNode(e,n,r,i,s,a,o=null){const l=tr(e);n=tr(n),r=tr(r),i=tr(i),s=hT(s),a=hT(a);const u=[],c=[],f=[];for(const d of l)u.push(d.sourceLayer),c.push(d.nodeIndex),f.push(d.tensorIndex);new R3({outboundLayer:this,inboundLayers:u,nodeIndices:c,tensorIndices:f,inputTensors:l,outputTensors:n,inputMasks:r,outputMasks:i,inputShapes:s,outputShapes:a},o);for(let d=0;d<n.length;d++)n[d].sourceLayer=this,n[d].nodeIndex=this.inboundNodes.length-1,n[d].tensorIndex=d}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function r6e(t){t=tr(t);const e=[];for(const n of t)e.push(n.shape);return Ms(e)}function i6e(t){return"float32"}function vre(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const r=e.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const i=[];for(let s=0;s<r.inboundLayers.length;s++){const a=r.inputTensors[s],o=r.inboundLayers[s],l=r.nodeIndices[s],u=vre(a,o,l);for(const c of u)i.indexOf(c)===-1&&i.push(c)}return i}}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Ty extends mn{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:D3("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new re("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new re("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new re("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const i=new Tl(this.dtype,this.batchInputShape,this,[],{},this.name);i.nodeIndex=0,i.tensorIndex=0,new R3({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[i],outputTensors:[i],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new re(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}Ty.className="InputLayer";Oe(Ty);function yre(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new re("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new Ty({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function Df(t){if(t==null)return;const e=[],n=[],r=[];for(const i in t){const s=t[i];if(typeof s!="number"){const a=s;e.push(a.data()),n.push(i),r.push(a)}}if(e.length>0){const i=await Promise.all(e);for(let s=0;s<i.length;++s)t[n[s]]=i[s][0];Pt(r)}}function bre(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var YH;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(YH||(YH={}));const s6e=125;class T0{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class xre{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class a6e extends T0{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const i in n){const s=n[i];if(typeof s=="number")this.totals.hasOwnProperty(i)||(this.totals[i]=0),this.totals[i]=this.totals[i]+s*r;else{let a;i in this.totals?a=this.totals[i]:this.totals[i]=0;const o=oe(()=>We(this.totals[i],se(s,r)));this.totals[i]=o,a!=null&&a.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:oe(()=>{const i=se(kt(1,this.seen),this.totals[r]);n[r]=i,this.totals[r].dispose(),ai(n[r])}))}}class wre extends T0{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const e=[],n=[],r=[];for(const s in this.history){const a=this.history[s];for(let o=0;o<a.length;++o)if(typeof a[o]!="number"){const l=a[o];e.push(l.data()),n.push(s),r.push(o)}}const i=await Promise.all(e);for(let s=0;s<i.length;++s)this.history[n[s]][r[s]].dispose(),this.history[n[s]][r[s]]=i[s][0]}}class _re extends T0{constructor(e,n){if(super(),this.currentEpoch=0,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=s6e),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");QE(this.yieldEvery)&&(this.maybeWait=fze(this.maybeWait.bind(this),this.yieldEvery)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,r){const i=[];this.yield!=null&&(await Df(r),i.push(this.yield(e,n,r))),i.push(yE()),await Promise.all(i)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await Df(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const r=[];this.epochEnd!=null&&(await Df(n),r.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&r.push(yE()),await Promise.all(r)}async onBatchBegin(e,n){this.batchBegin!=null&&(await Df(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const r=[];this.batchEnd!=null&&(await Df(n),r.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?r.push(yE()):QE(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await Df(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await Df(e),await this.trainEnd(e))}}function Sre(t,e){return t==null&&(t={}),t instanceof T0?[t]:Array.isArray(t)&&t[0]instanceof T0?t:tr(t).map(r=>new _re(r,e))}class Ba{constructor(){}static registerCallbackConstructor(e,n){R(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),Ba.checkForDuplicate(n),Ba.constructors[e]==null&&(Ba.constructors[e]=[]),Ba.constructors[e].push(n)}static checkForDuplicate(e){for(const n in Ba.constructors)Ba.constructors[+n].forEach(i=>{if(i===e)throw new re("Duplicate callback constructor.")})}static clear(){Ba.constructors={}}static createCallbacks(e){const n=[];for(const r in Ba.constructors){const i=+r;e>=i&&n.push(...Ba.constructors[i])}return n.map(r=>new r)}}Ba.constructors={};function Cre(t,e,n,r,i,s,a,o,l){const u=new wre,c=[new a6e,...Ba.createCallbacks(e)];t!=null&&c.push(...t),c.push(u);const f=new xre(c);return f.setParams({epochs:n,initialEpoch:r,samples:i,steps:s,batchSize:a,verbose:e,doValidation:o,metrics:l}),{callbackList:f,history:u}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Dl(t,e={},n=!1){return Q_(t,qa.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function mT(t,e){return oe(()=>{t.dtype!=="float32"&&(t=t.asType("float32"));const n=Tt(r2(t),e,!0),r=B_(n.shape,Xr()),i=Ii(Xu(n,r));return kt(t,i)})}function cm(t,e){return oe(()=>dr(r2(yt(e,t)),-1))}function O3(t,e){return oe(()=>dr(Wr(yt(e,t)),-1))}function ky(t,e){return oe(()=>{const n=yt(t,e),r=zs(Wr(t),Xr(),Number.MAX_VALUE),i=Wr(kt(n,r));return se(100,dr(i,-1))})}function o6e(t,e){return oe(()=>{const n=zs(e,Xr(),Number.MAX_VALUE),r=_a(We(1,n)),i=zs(t,Xr(),Number.MAX_VALUE),s=_a(We(1,i));return dr(r2(yt(r,s)),-1)})}function l6e(t,e){return oe(()=>{const n=Xu(0,yt(1,se(t,e)));return dr(r2(n),-1)})}function u6e(t,e){return oe(()=>{const n=Xu(0,yt(1,se(t,e)));return dr(n,-1)})}function c6e(t,e){return oe(()=>{const n=Tt(se(t,e),-1),r=ro(se(yt(1,t),e),-1);return Xu(0,We(1,yt(r,n)))})}function f6e(t,e){return oe(()=>{const n=Math.log(2),r=yt(e,t),i=yt(We(r,yy(se(-2,r))),n);return dr(i,-1)})}function Bx(t,e,n=!1){return oe(()=>{if(n)e=j_(e);else{const r=Tt(e,e.shape.length-1,!0);e=kt(e,r)}return e=zs(e,Xr(),1-Xr()),pr(Tt(se(t.toFloat(),_a(e)),e.shape.length-1))})}function gT(t,e,n=!1){return oe(()=>{const r=vy(kze(t)).toInt();e=zs(e,Xr(),1-Xr());const i=e.shape,s=w0(r,i[i.length-1]).reshape(i);return Bx(s,e,n)})}function d6e(t,e){if(!Tn(t.shape,e.shape))throw new re(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return oe(()=>{const n=e.relu(),r=e.abs().neg();return n.sub(e.mul(t)).add(r.exp().log1p())})}function F3(t,e){return oe(()=>{let n;return n=zs(e,Xr(),1-Xr()),n=_a(kt(n,yt(1,n))),dr(d6e(t,n),-1)})}function h6e(t,e){return oe(()=>{const n=zs(t,Xr(),1),r=zs(e,Xr(),1);return Tt(se(t,_a(kt(n,r))),-1)})}function p6e(t,e){return oe(()=>{const n=_a(We(Xr(),e));return dr(yt(e,se(t,n)),-1)})}function Pz(t,e){return oe(()=>{const n=mT(t,-1),r=mT(e,-1),i=se(n,r);return pr(Tt(i,-1))})}const vT={meanSquaredError:cm,meanAbsoluteError:O3,meanAbsolutePercentageError:ky,meanSquaredLogarithmicError:o6e,squaredHinge:l6e,hinge:u6e,categoricalHinge:c6e,logcosh:f6e,categoricalCrossentropy:Bx,sparseCategoricalCrossentropy:gT,binaryCrossentropy:F3,kullbackLeiblerDivergence:h6e,poisson:p6e,cosineProximity:Pz};function RD(t){if(typeof t=="string"){if(t in vT)return vT[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new re(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function zz(t,e){return oe(()=>{const n=se(.5,Sa(e)),r=t2(ll(e,n),t.dtype);return dr(Wd(t,r),-1)})}function Bz(t,e){return oe(()=>t2(Wd(Ox(t,-1),Ox(e,-1)),"float32"))}function Ere(t,e){return oe(()=>Qo(t.equal(1),e.equal(1)).sum().cast("float32"))}function m6e(t,e){return oe(()=>Qo(t.equal(1),e.equal(0)).sum().cast("float32"))}function g6e(t,e){return oe(()=>Qo(t.equal(0),e.equal(1)).sum().cast("float32"))}function Tre(t,e){return oe(()=>{const n=Ere(t,e),r=g6e(t,e),i=n.add(r);return Bs(ll(i,0),n.div(i),0).cast("float32")})}function v6e(t,e){return oe(()=>{const n=Ere(t,e),r=m6e(t,e),i=n.add(r);return Bs(ll(i,0),n.div(i),0).cast("float32")})}function kre(t,e){return F3(t,e)}function Are(t,e){return t.rank===e.rank&&(t=t.squeeze([t.rank-1])),e=e.argMax(-1),e.dtype!==t.dtype&&(e=e.asType(t.dtype)),Wd(t,e).asType("float32")}const y6e=cm,b6e=cm,x6e=O3,w6e=O3,_6e=ky,S6e=ky,Uz=Bx,C6e=Pz,Mre=gT,yT={binaryAccuracy:zz,categoricalAccuracy:Bz,precision:Tre,categoricalCrossentropy:Uz,sparseCategoricalCrossentropy:Mre,mse:y6e,MSE:b6e,mae:x6e,MAE:w6e,mape:_6e,MAPE:S6e,cosine:C6e};function E6e(t){if(typeof t=="string"&&t in yT)return yT[t];if(typeof t!="string"&&t!=null)return t;throw new re(`Unknown metric ${t}`)}function sC(t){if(lu(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(vT))if(vT[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(yT))if(yT[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function T6e(t){const e={Adagrad:()=>Ff.adagrad(.01),Adadelta:()=>Ff.adadelta(1,.95,Xr()),Adam:()=>Ff.adam(.001,.9,.999,Xr()),Adamax:()=>Ff.adamax(.002,.9,.999,Xr(),0),RMSProp:()=>Ff.rmsprop(.001,.9,0,Xr()),SGD:()=>Ff.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new re(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const KH=1*1024*1024;function ZH(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!$F(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>KH&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${KH}.`)}}function $F(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!$F(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!$F(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function k6e(t,e,n,r=console.log){const i=M6e(t),s=["Layer (type)","Output shape","Param #"];i?(e=e||65,n=n||[.45,.85,1]):(e=e||98,n=n||[.33,.55,.67,1]),n[n.length-1]<=1&&(n=n.map(c=>Math.floor(e*c)));let a;if(!i){s.push("Receives inputs"),a=[];for(const c in t.nodesByDepth)a.push(...t.nodesByDepth[c])}r("_".repeat(e)),bT(s,n,r),r("=".repeat(e));const o=t.layers;for(let c=0;c<o.length;++c)i?N6e(o[c],n,r):$6e(o[c],n,a,r),r((c===o.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const l=A6e(t),u=pT(t.nonTrainableWeights);r(`Total params: ${l+u}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${u}`),r("_".repeat(e))}function A6e(t){let e;return t.collectedTrainableWeights!=null?e=pT(t.collectedTrainableWeights):e=pT(t.trainableWeights),e}function M6e(t){let e=!0;const n=[],r=[];for(const i in t.nodesByDepth)n.push(t.nodesByDepth[i]);for(const i of n){if(i.length>1||i.length===1&&i[0].inboundLayers.length>1){e=!1;break}r.push(...i)}if(e)for(const i of t.layers){let s=!1;for(const a of i.inboundNodes)if(r.indexOf(a)!==-1)if(s){e=!1;break}else s=!0;if(!e)break}return e}function bT(t,e,n=console.log){let r="";for(let i=0;i<t.length;++i)i>0&&(r=r.slice(0,r.length-1)+" "),r+=t[i],r=r.slice(0,e[i]),r+=" ".repeat(e[i]-r.length);n(r)}function N6e(t,e,n){let r;try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const i=t.name,s=t.getClassName(),a=[`${i} (${s})`,r,t.countParams().toString()];bT(a,e,n)}function $6e(t,e,n,r){let i;try{i=JSON.stringify(t.outputShape)}catch{i="multiple"}const s=[];for(const c of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(c)===-1))for(let f=0;f<c.inboundLayers.length;++f){const d=c.inboundLayers[f].name,h=c.nodeIndices[f],p=c.tensorIndices[f];s.push(`${d}[${h}][${p}]`)}const a=t.name,o=t.getClassName(),l=s.length===0?"":s[0],u=[`${a} (${o})`,i,t.countParams().toString(),l];bT(u,e,r);for(let c=1;c<s.length;++c)bT(["","","",s[c]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Nre(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function Ux(t,e){if(t===null)return null;if(typeof t=="string")return Ph(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let i=0;i<r;++i){const s=t[i];Nre(e,i,s)?n.push(s):n.push(Ux(s,e))}return n}else{const n={};for(const r of Object.keys(t)){const i=t[r];if(r==="name"&&typeof i=="string")n[r]=i;else{const s=Ph(r);n[s]=Ux(i,s)}}return n}}function IF(t,e){if(t==null)return null;if(typeof t=="string")return _c(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let i=0;i<r;++i){const s=t[i];Nre(e,i,s)?n.push(s):n.push(IF(s,e))}return n}else{const n={};for(const r of Object.keys(t)){const i=t[r],s=_c(r);(r==="name"||r==="className")&&typeof i=="string"?n[s]=i:n[s]=IF(i,r)}return n}}/** @license See the LICENSE file. */const L3="3.1.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function I6e(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return ft(e,t.dtype)}catch{throw new re(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class Zf{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof Zf)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=I6e(e,n),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new re(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof Tl){if(this.id2Value[e.id]==null)throw new re(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new re(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof Tl){if(this.id2Value[e.id]==null)throw new re(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new re(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&Pt(this.id2Mask)}}const OD={},JH={};function w1(t,e,n,r){const i=n==null?!1:n.training,s=Array.isArray(t),a=s?t:[t],o=a.map(p=>p.name),l=[],u=e.names();for(const p of o)u.indexOf(p)!==-1?l.push(e.getValue(p)):l.push(null);r!=null&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);const c=o.join(",")+"|"+e.names().join(",");let f,d;if(OD[c]==null){const p=D6e(a,e);f=p.sorted,d=p.recipientCounts,OD[c]=f,JH[c]=d}f=OD[c],d={},i||Object.assign(d,JH[c]);const h=new Zf(e);for(let p=0;p<f.length;++p){if(r!=null){const E=lT().numTensors;E>r.maxNumTensors&&(r.maxNumTensors=E),E<r.minNumTensors&&(r.minNumTensors=E)}const m=f[p],g=m.sourceLayer;if(g instanceof Ty)continue;const v=[],y=[],b=[];let x=!1;for(const E of m.inputs){const T=h.getValue(E),k=h.getMask(E);v.push(T),y.push(k),k!=null&&(x=!0),i||(d[E.name]--,d[E.name]===0&&!e.hasKey(E)&&o.indexOf(E.name)===-1&&!T.isDisposed&&E.sourceLayer.stateful!==!0&&b.push(T))}x&&(n=n||{},n.mask=y[0]);const w=tr(g.apply(v,n));let S=null;g.supportsMasking&&(S=g.computeMask(v,y));const C=O6e(m),_=Array.isArray(C)?C:[C];for(let E=0;E<_.length;++E){h.hasKey(_[E])||h.add(_[E],w[E],Array.isArray(S)?S[0]:S);const T=o.indexOf(_[E].name);T!==-1&&(l[T]=w[E])}i||Pt(b)}return h.disposeMasks(),s?l:l[0]}function D6e(t,e){R(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(t.length===1){const i=QH(t[0],e);n=i.sorted,r=i.recipientMap}else{const i=new Set;for(const s of t){const{sorted:a,recipientMap:o}=QH(s,e);for(const l of a)i.has(l.name)||(n.push(l),i.add(l.name));for(const l in o)r[l]==null&&(r[l]=new Set),o[l].forEach(u=>r[l].add(u))}}return{sorted:n,recipientCounts:R6e(r)}}function R6e(t){const e={};for(const n in t)e[n]=t[n].size;return e}function QH(t,e){const n=new Set,r=[],i={};for(const o of e.names())n.add(o);const s=[],a=[];for(s.push(t);s.length>0;){const o=s[s.length-1];if(n.has(o.name)){s.pop();continue}const l=a[a.length-1]===s.length-1;if(o.inputs.length===0||l)s.pop(),r.push(o),n.add(o.name),l&&a.pop();else{a.push(s.length-1);for(const u of o.inputs)i[u.name]==null&&(i[u.name]=new Set),i[u.name].add(o.name),!n.has(u.name)&&s.push(u)}}return{sorted:r,recipientMap:i}}function O6e(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(const i of t.sourceLayer.inboundNodes[r].outputTensors)if(i.id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class gl extends mn{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const y=this.getClassName().toLowerCase();this.name=D3(y)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],dd(this.inputs).length!==this.inputs.length)throw new re(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(y=>y.name)}`);dd(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(y=>y.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const y of this.outputs){const b=y.sourceLayer,x=y.nodeIndex,w=y.tensorIndex;this.outputLayers.push(b),this.outputLayersNodeIndices.push(x),this.outputLayersTensorIndices.push(w)}for(const y of this.inputs){const b=y.sourceLayer,x=y.nodeIndex,w=y.tensorIndex;lu(x===0,"input layer has >1 nodes"),lu(w===0,"input layer has >1 tensors"),this.inputLayers.push(b),this.inputLayersNodeIndices.push(x),this.inputLayersTensorIndices.push(w)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let y=0;y<this.inputLayers.length;y++){const b=this.inputLayers[y];if(!(b instanceof Ty))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${y} (0-based) originates from layer type ${b.getClassName()}.`);this.inputNames.push(b.name),this.feedInputShapes.push(b.batchInputShape),this.feedInputNames.push(b.name)}for(const y of this.outputLayers)this.outputNames.push(y.name);this.internalInputShapes=this.inputs.map(y=>y.shape),this.internalOutputShapes=this.outputs.map(y=>y.shape);const n={},r={},i={},s={},a={},o=[],l=(y,b,x,w,S,C)=>{(w==null||S==null||C==null)&&(w=y.sourceLayer,S=y.nodeIndex,C=y.tensorIndex);const _=w.inboundNodes[S];if(x.indexOf(_)!==-1)throw new Fo(`The tensor ${y.name} at layer "${w.name}" is part of a cycle.`);if(b.indexOf(_)!==-1)return;this.containerNodes.add(gl.nodeKey(w,S)),w.id in a||(a[w.id]=Object.keys(a).length),x.indexOf(_)===-1&&x.push(_);const E=_.inboundLayers.length;for(let T=0;T<E;T++){const k=_.inputTensors[T],M=_.inboundLayers[T],A=_.nodeIndices[T],N=_.tensorIndices[T];l(k,b,x,M,A,N)}for(b.push(_);x.indexOf(_)>=0;)x.splice(x.indexOf(_),1);o.push(_)},u=[],c=[];for(const y of this.outputs)l(y,u,c);const f=o.slice().reverse();for(const y of f){r[y.id]=y,y.id in n||(n[y.id]=0);let b=n[y.id];const x=i[y.outboundLayer.id]==null?0:i[y.outboundLayer.id];b=Math.max(b,x),i[y.outboundLayer.id]=b,s[y.outboundLayer.id]=y.outboundLayer,n[y.id]=b;for(let w=0;w<y.inboundLayers.length;w++){const S=y.inboundLayers[w],C=y.nodeIndices[w],_=S.inboundNodes[C],E=n[_.id]==null?0:n[_.id];n[_.id]=Math.max(b+1,E),r[_.id]=_}}const d={};for(const y in n){const b=n[y];b in d||(d[b]=[]),d[b].push(r[y])}const h={};for(const y in i){const b=i[y];b in h||(h[b]=[]),h[b].push(s[y])}let p=Object.keys(h).map(y=>parseInt(y,10)).sort(nC);this.layers=[];for(const y of p){const b=h[y];b.sort((x,w)=>{const S=a[x.id],C=a[w.id];return S<C?-1:S>C?1:0});for(const x of b)x instanceof gl&&this.internalContainerRefs.push(x),this.layers.push(x)}this.layersByDepth=h,p=Object.keys(d).map(y=>parseInt(y,10)).sort(nC);const m=this.inputs.slice(),g=[];for(const y of p)for(const b of d[y]){const x=b.outboundLayer;if(x!=null){for(const w of b.inputTensors)if(m.indexOf(w)===-1)throw new Fo(`Graph disconnected: cannot obtain value for tensor ${w} at layer "${x.name}". The following previous layers were accessed without issue: ${g}`);for(const w of b.outputTensors)m.push(w);g.push(x.name)}}this.nodesByDepth=d;const v=this.layers.map(y=>y.name);for(const y of v){const b=v.filter(x=>x===y).length;if(b!==1)throw new Fo(`The name "${y}" is used ${b} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(v))}this.outboundNodes=[],this.inboundNodes=[],new R3({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(y=>null),outputMasks:this.outputs.map(y=>null),inputShapes:this.inputs.map(y=>y.shape),outputShapes:this.outputs.map(y=>y.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new re("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const r={};let i=0;for(const a of this.layers)for(const o of a.weights){if(r[o.originalName]!=null)throw new re(`Duplicate weight name: ${o.originalName}`);r[o.originalName]=o,i++}const s=[];for(const a in e){let o=a;if(r[a]==null){const l=a.split("/");o=l.slice(0,-2).concat([l[l.length-1]]).join("/")}if(r[o]!=null)s.push([r[o],e[a]]);else if(n)throw new re(`Provided weight data has no target variable: ${a}`);delete r[o]}if(n){const a=[];for(const o in r)a.push(o);if(a.length>0)throw new re(`${a.length} of ${i} weights are not set: ${a}`)}Lz(s)}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${L3}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const r=IF(this.updatedConfig());return n?JSON.stringify(r):r}call(e,n){return oe(()=>{e=tr(e);const r=new Zf;for(let i=0;i<this.inputs.length;++i)r.add(this.inputs[i],e[i]);return w1(this.outputs,r,n)})}computeMask(e,n){return oe(()=>{e=tr(e);let r;return n==null?r=Ap(null,e.length):r=tr(n),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const n=hT(e);if(n.length!==this.inputLayers.length)throw new re(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let o=0;o<n.length;o++){const l=this.inputLayers[o],u=n[o],c=l.name+"_0_0";r[c]=u}const i=Object.keys(this.nodesByDepth).map(o=>parseInt(o,10)).sort(nC);if(i.length>1)for(const o of i){const l=this.nodesByDepth[o];for(const u of l){const c=u.outboundLayer;if(this.inputLayers.map(m=>m.id).indexOf(c.id)!==-1)continue;const f=[];for(let m=0;m<u.inboundLayers.length;m++){const g=u.inboundLayers[m],v=u.nodeIndices[m],y=u.tensorIndices[m],b=`${g.name}_${v}_${y}`,x=r[b];f.push(x)}const d=c.computeOutputShape(Ms(f)),h=hT(d),p=c.inboundNodes.indexOf(u);for(let m=0;m<h.length;m++){const g=`${c.name}_${p}_${m}`;r[g]=h[m]}}}const s=[],a=[];for(let o=0;o<this.outputLayers.length;o++){const l=this.outputLayers[o],u=this.outputLayersNodeIndices[o],c=this.outputLayersTensorIndices[o],f=`${l.name}_${u}_${c}`;a.push(f)}for(let o=0;o<a.length;o++){const l=a[o];lu(l in r),s.push(r[l])}return Ms(s)}runInternalGraph(e,n){n==null&&(n=Ap(null,e.length));const r={};for(let l=0;l<this.inputs.length;++l){const u=this.inputs[l],c=e[l],f=n[l];r[u.id]=[c,f]}const i=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(nC);for(const l of i){const u=this.nodesByDepth[l];for(const c of u){const f=c.outboundLayer,d=c.inputTensors,h=c.outputTensors,p=new Array;for(const m of d)m.id in r&&p.push(r[m.id]);if(p.length===d.length){let m={},g,v,y,b;if(c.callArgs!=null&&(m=c.callArgs),p.length===1){const[x,w]=p[0];m.mask==null&&(m.mask=w),y=tr(f.call(x,m)),b=tr(f.computeMask(x,w)),g=[x],v=[w]}else g=p.map(x=>x[0]),v=p.map(x=>x[1]),m.mask==null&&(m.mask=v),y=tr(f.call(g,m)),b=tr(f.computeMask(g,v));if(f.activityRegularizer)throw new zt("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let x=0;x<h.length;++x){const w=h[x],S=y[x],C=b[x];r[w.id]=[S,C]}}}}const s=[],a=[],o=[];for(const l of this.outputs){lu(l.id in r,`Could not compute output ${l.name} : ${l.id}`);const[u,c]=r[l.id];o.push(u.shape),s.push(u),a.push(c)}return[s,a,o]}buildNodeConversionMap(e){const n={};let r;for(const i of this.layers){r=i instanceof gl?1:0;for(let s=0;s<i.inboundNodes.length;s++){const a=gl.nodeKey(i,s);this.containerNodes.has(a)&&(n[a]=r,r+=1)}}return n}getLayer(e,n){if(n!=null){if(this.layers.length<=n)throw new re(`Was asked to retrieve layer at index ${n}, but model only has ${this.layers.length} layer(s).`);return this.layers[n]}else if(e==null)throw new re("Provide either a layer name or layer index");for(const r of this.layers)if(r.name===e)return r;throw new re(`No such layer: ${e}`)}calculateLosses(){return oe(()=>{const e=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const i=gl.nodeKey(n,r);this.containerNodes.has(i)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const a of this.layers){const o=a.getClassName(),l=a.getConfig(),u=[];for(let f=0;f<a.inboundNodes.length;f++){const d=a.inboundNodes[f],h=gl.nodeKey(a,f);let p={};if(this.containerNodes.has(h)){if(d.callArgs)try{JSON.stringify(d.callArgs),p=d.callArgs}catch{console.warn(`Layer ${a.name} was passed non-serializable keyword arguments: ${d.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),p={}}if(d.inboundLayers.length>0){const m=[];for(let g=0;g<d.inboundLayers.length;g++){const v=d.inboundLayers[g],y=d.nodeIndices[g],b=d.tensorIndices[g],x=gl.nodeKey(v,y);let w=n[x];w==null&&(w=0),m.push([v.name,w,b,p])}u.push(m)}}}const c={};c.name=a.name,c.className=o,c.config=l,c.inboundNodes=u,r.push(c)}e.layers=r;const i=[];for(let a=0;a<this.inputLayers.length;a++){const o=this.inputLayers[a],l=this.inputLayersNodeIndices[a],u=gl.nodeKey(o,l);if(!this.containerNodes.has(u))continue;let c=n[u];c==null&&(c=0);const f=this.inputLayersTensorIndices[a];i.push([o.name,c,f])}e.inputLayers=i;const s=[];for(let a=0;a<this.outputLayers.length;a++){const o=this.outputLayers[a],l=this.outputLayersNodeIndices[a],u=gl.nodeKey(o,l);if(!this.containerNodes.has(u))continue;let c=n[u];c==null&&(c=0);const f=this.outputLayersTensorIndices[a];s.push([o.name,c,f])}return e.outputLayers=s,e}static fromConfig(e,n,r={},i=!1){const s={},a={};function o(g,v){g.name in a?a[g.name].push(v):a[g.name]=[v]}function l(g,v){const y=[];let b;for(const x of v){const w=x[0],S=x[1],C=x[2];if(b=x[3]==null?{}:x[3],!(w in s)){o(g,v);return}const _=s[w];if(_.inboundNodes.length<=S){o(g,v);return}const E=_.inboundNodes[S];y.push(E.outputTensors[C])}y.length>0&&g.apply(Ms(y),b)}function u(g){const v=g.name,y=Dl(g,n.customObjects!=null?n.customObjects:{});y.setFastWeightInitDuringBuild(i),s[v]=y,g.inboundNodes.forEach(x=>{if(!(x instanceof Array))throw new re(`Corrupted configuration, expected array for nodeData: ${x}`);o(y,x)})}const c=n.name,f=n.layers;for(const g of f)u(g);for(;!cze(a);)for(const g of f){const v=s[g.name];if(v.name in a){const y=a[v.name];delete a[v.name];for(const b of y)l(v,b)}}const d=[],h=[],p=n.inputLayers;for(const g of p){const v=g[0],y=g[1],b=g[2];lu(v in s);const w=s[v].inboundNodes[y].outputTensors;d.push(w[b])}const m=n.outputLayers;for(const g of m){const v=g[0],y=g[1],b=g[2];lu(v in s);const w=s[v].inboundNodes[y].outputTensors;h.push(w[b])}return new e({inputs:d,outputs:h,name:c})}get stateful(){if(this._stateful)throw new re("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){oe(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function F6e(t,e,n){const r=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(i=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const i=[];return e.forEach(s=>{s in t?i.push(t[s]):i.push(null)}),i}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function $re(t,e){return F6e(t,e,"classWeight")}async function Ire(t,e,n,r){if(e!=null||r!=null)throw new Error("Support sampleWeight is not implemented yet");if(n!=null){const i=oe(()=>{if(t.shape.length===1)return t.clone();if(t.shape.length===2){if(t.shape[1]>1)return t.argMax(1);if(t.shape[1]===1)return t.reshape([t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),s=Array.from(await i.data());Pt(i);const a=[];return s.forEach(o=>{if(n[o]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${o} exists in the data but not in classWeight`);a.push(n[o])}),Us(a,"float32")}else return null}function L6e(t,e){return se(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const P6e=32;function Dre(t,e){let n,r;const i=e;n=i.xs,r=i.ys,R(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const s=ej("input",t.inputNames,n),a=ej("output",t.outputNames,r),o=s[0].shape[0];R(s.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${s.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),R(a.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${a.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<s.length;l++)R(s[l].shape[0]===o,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${s[l].shape[0]}; expected  ${o} based on input ${t.inputNames[0]}.`);for(let l=0;l<a.length;l++)R(a[l].shape[0]===o,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${a[l].shape[0]}; expected  ${o} based on input ${t.inputNames[0]}.`);return{xs:s,ys:a}}function ej(t,e,n){if(n instanceof kn)return[n];if(Array.isArray(n))return R(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const i of e){if(n[i]==null)throw new re(`The feature data generated by the dataset lacks the required ${t} key '${i}'.`);r.push(n[i])}return r}}function z6e(t){if(t.length===3)throw new zt("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function B6e(t,e,n){const r=n.batchesPerEpoch!=null;if(R(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),R(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),R(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),R(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),R(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const i=n.validationData!=null;let s,a;if(i)if(tj(n.validationData))R(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const g=z6e(n.validationData);s=g.xs,a=g.ys}const o=t.makeTrainFunction(),l=t.getDedupedMetricsNames();let u;i?u=l.slice().concat(l.map(g=>"val_"+g)):u=l.slice();const c=Sre(n.callbacks,n.yieldEvery),f=n.verbose==null?1:n.verbose,{callbackList:d,history:h}=Cre(c,f,n.epochs,null,null,U6e(e,n),null,i,u);d.setModel(t),t.history=h,await d.onTrainBegin(),t.stopTraining_=!1;let p=n.initialEpoch==null?0:n.initialEpoch,m=await e.iterator();for(;p<n.epochs;){const g={};await d.onEpochBegin(p);let v=0,y=0;for(r||(m=await e.iterator());!r||v<n.batchesPerEpoch;){const b=await m.next();if(r&&b.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${v} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(b.value!=null){const{xs:x,ys:w}=Dre(t,b.value),S={};S.batch=y,S.size=x[0].shape[0],await d.onBatchBegin(y,S);const C=[];if(n.classWeight!=null){const T=$re(n.classWeight,t.outputNames);for(let k=0;k<T.length;++k)C.push(await Ire(w[k],null,T[k]))}const _=x.concat(w).concat(C),E=o(_);Pt(_);for(let T=0;T<l.length;++T){const k=l[T],M=E[T];S[k]=M,ai(M)}await d.onBatchEnd(y,S),bre(S),y++,v++}if(r?v>=n.batchesPerEpoch:b.done){if(i){let x;tj(n.validationData)?x=tr(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):x=tr(t.evaluate(s,a,{batchSize:n.validationBatchSize==null?P6e:n.validationBatchSize,verbose:0}));for(let w=0;w<t.metricsNames.length;++w)g[`val_${t.metricsNames[w]}`]=x[w]}break}if(t.stopTraining_)break}if(await d.onEpochEnd(p,g),p++,t.stopTraining_)break}return await d.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function U6e(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function tj(t){return typeof t.iterator=="function"}function V6e(t){return typeof t.next=="function"}async function W6e(t,e,n){n=n||{};const r=n.batches!=null,i=t.testFunction;let s=[];if(n.verbose>0)throw new zt("Verbose mode is not implemented yet.");R(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const a=V6e(e)?e:await e.iterator();let o=0,l=0;for(;!r||l<n.batches;){const u=await a.next();if(s=oe(()=>{if(u.value){const{xs:c,ys:f}=Dre(t,u.value),d=c.concat(f),h=oe(()=>i(d));if(Pt(d),l===0)for(let m=0;m<h.length;++m)s.push(St(0));const p=d[0].shape[0];for(let m=0;m<h.length;++m){const g=h[m],v=s[m];s[m]=oe(()=>We(s[m],se(p,g))),l>0&&Pt(v)}Pt(h),o+=p,++l}return s}),u.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let u=0;u<s.length;++u){const c=s[u];s[u]=kt(s[u],o),Pt(c)}return Ms(s)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function DF(t){R(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function _1(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(r=>ap(r,e,n-e)):ap(t,e,n-e)}function Vz(t,e){return oe(()=>t==null?null:Array.isArray(t)?t.map(n=>Vz(n,e)):hre(t,e.dtype==="int32"?e:e.toInt()))}function RF(t,e){const n=[];let r=0,i=null;for(;r<t;)i=r+e,i>=t&&(i=t),n.push([r,i]),r=i;return n}async function G6e(t,e,n,r,i,s,a,o,l,u,c,f,d,h,p){i==null&&(i=32),s==null&&(s=1),c==null&&(c=!0),d==null&&(d=0);let m=!1;if(l!=null&&u!=null&&(m=!0),p!=null&&(m=!0,h==null))throw new re("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const g=t.checkNumSamples(n,i,h,"steps_per_epoch");let v;g!=null&&(v=Bl(0,g)),a==null&&(a=1);const{callbackList:y,history:b}=Cre(o,a,s,d,g,h,i,m,f);y.setModel(t),t.history=b,await y.onTrainBegin(),t.stopTraining_=!1;for(let x=d;x<s;++x){await y.onEpochBegin(x);const w={};if(h!=null)throw new zt("stepsPerEpoch mode is not implemented yet.");{if(c==="batch")throw new zt("batch shuffling is not implemneted yet");c&&BA(v);const S=Us(v),C=RF(g,i);for(let _=0;_<C.length;++_){const E={};if(await y.onBatchBegin(_,E),oe(()=>{const T=C[_][0],k=C[_][1],M=ap(S,T,k-T);E.batch=_,E.size=k-T;const A=Vz(n,M),N=e(A);for(let $=0;$<r.length;++$){const D=r[$],P=N[$];E[D]=P,ai(P)}if(_===C.length-1&&m){const $=t.testLoop(l,u,i);for(let D=0;D<r.length;++D){const P=r[D],O=$[D];ai(O),w["val_"+P]=O}}}),await y.onBatchEnd(_,E),bre(E),t.stopTraining_)break}S.dispose()}if(await y.onEpochEnd(x,w),t.stopTraining_)break}return await y.onTrainEnd(),await t.history.syncData(),t.history}async function H6e(t,e,n,r={}){if(t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;let i,s,a,o,l,u,c;try{const f=r.batchSize==null?32:r.batchSize;DF(f);const d=!1,h=await t.standardizeUserData(e,n,r.sampleWeight,r.classWeight,d,f);i=h[0],s=h[1],c=h[2];let p=!1,m;if(r.validationData!=null&&r.validationData.length>0){if(p=!0,r.validationData.length===2)a=r.validationData[0],o=r.validationData[1];else throw r.validationData.length===3?new zt("validationData including sample weights is not supported yet."):new re(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const C=!0,_=await t.standardizeUserData(a,o,null,null,C,f);l=_[0],u=_[1],m=l.concat(u)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){p=!0;const C=Math.floor(i[0].shape[0]*(1-r.validationSplit)),_=i[0].shape[0];l=_1(i,C,_),i=_1(i,0,C),u=_1(s,C,_),s=_1(s,0,C),m=l.concat(u)}else r.validationSteps!=null&&(p=!0);const g=i.concat(s).concat(c);t.checkTrainableWeightsConsistency();const v=t.makeTrainFunction(),y=t.getDedupedMetricsNames();let b,x;p?(t.makeTestFunction(),b=t.testFunction,x=y.slice().concat(y.map(C=>"val_"+C))):(b=null,m=[],x=y.slice());const w=Sre(r.callbacks,r.yieldEvery);return await G6e(t,v,g,y,f,r.epochs,r.verbose,w,b,m,r.shuffle,x,r.initialEpoch,null,null)}finally{t.isTraining=!1,Xh(i,e),Xh(s,n),Xh(l,a),Xh(u,o),c!=null&&Pt(c)}}function Rre(t){const e=[];t instanceof kn&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(r.rank===1)e.push(n2(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function Xh(t,e){if(t==null)return;const n=[];if(e instanceof kn)n.push(e.id);else if(Array.isArray(e))e.forEach(i=>n.push(i.id));else if(e!=null)for(const i in e){const s=e[i];n.push(s.id)}const r=[];if(t instanceof kn)n.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(i=>{n.indexOf(i.id)===-1&&r.push(i)});else if(t!=null)for(const i in t){const s=t[i];n.indexOf(s.id)===-1&&r.push(s)}r.forEach(i=>{i.isDisposed||i.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function j6e(t){return t instanceof kn}function OF(t){return Array.isArray(t)}function nj(t){return!j6e(t)&&!OF(t)}function rj(t,e,n,r=!0,i=""){if(e==null||e.length===0){if(t!=null){let a=!1;if(OF(t)&&t.length>0)a=!0;else if(nj(t)){for(const o in t)if(t.hasOwnProperty(o)){a=!0;break}}else a=!0;if(a)throw new re(`Error when checking model ${i} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(a=>null);let s;if(nj(t)){t=t,s=[];for(const a of e){if(t[a]==null)throw new re(`No data provided for "${a}". Need data for each key in: ${e}`);s.push(t[a])}}else if(OF(t)){if(t=t,t.length!==e.length)throw new re(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);s=t}else{if(t=t,e.length>1)throw new re(`The model ${i} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);s=[t]}if(s=Rre(s),n!=null)for(let a=0;a<e.length;++a){if(n[a]==null)continue;const o=s[a];if(o.shape.length!==n[a].length)throw new re(`Error when checking ${i}: expected ${e[a]} to have ${n[a].length} dimension(s). but got array with shape ${o.shape}`);for(let l=0;l<n[a].length;++l){if(l===0&&!r)continue;const u=o.shape[l],c=n[a][l];if(c!=null&&c>=0&&u!==c)throw new re(`Error when checking ${i}: expected ${e[a]} to have shape [${n[a]}], but got array with shape [${o.shape}].`)}}return s}function q6e(t,e,n){const r=dd(t.map(s=>s.shape[0]));r.sort();const i=dd(e.map(s=>s.shape[0]));if(i.sort(),r.length>1)throw new re(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(s=>s.shape))}`);if(i.length>1)throw new re(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(s=>s.shape))}`);if(r.length>0&&i.length>0&&!Tn(r,i))throw new re(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${i[0]} target sample(s).`)}function X6e(t,e,n){const r=[cm,F3,Bx];for(let i=0;i<t.length;++i){const s=t[i],a=e[i],o=n[i];if(a!=null){if(a===Bx&&s.shape[s.shape.length-1]===1)throw new re(`You are passing a target array of shape ${s.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(a)!==-1){const l=s.shape.slice(1),u=o.slice(1);for(let c=0;c<l.length;++c){const f=l[c],d=u[c];if(d!=null&&f!==d)throw new re(`A target Tensor with shape ${s.shape} was passed for an output of shape ${o}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function ij(t,e,n,r=!0,i=""){let s;if(Array.isArray(t)){if(t.length!==e.length)throw new re(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);s=t}else{if(e.length>1)throw new re(`The model expects ${e.length} ${i} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);s=[t]}if(n!=null)for(let a=0;a<e.length;++a){if(n[a]==null)continue;const o=s[a];if(o.shape.length!==n[a].length)throw new re(`Error when checking ${i}: expected ${e[a]} to have ${n[a].length} dimension(s), but got array with shape ${JSON.stringify(o.shape)}`);for(let l=0;l<n[a].length;++l){if(l===0&&!r)continue;const u=o.shape[l],c=n[a][l];if(c!=null&&c!==u)throw new re(`Error when checking ${i}: expected ${e[a]} to have shape ${JSON.stringify(n[a])} but got array with shape ${JSON.stringify(o.shape)}.`)}}}function Y6e(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(r=>n);{const r=[];for(const i of e){let s=n.hasOwnProperty(i)?n[i]:[];Array.isArray(s)||(s=[s]),r.push(s)}return r}}const K6e="layers-model";class Bc extends gl{constructor(e){super(e),this.isTraining=!1}summary(e,n,r=console.log){if(!this.built)throw new re("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");k6e(this,e,n,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=T6e(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof df))throw new re("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const a in e.loss)if(this.outputNames.indexOf(a)===-1)throw new re(`Unknown entry in loss dictionary: "${a}". Only expected the following keys: ${this.outputNames}`);for(const a of this.outputNames)e.loss[a]==null&&console.warn(`Output "${a}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${a} during training`),n.push(RD(e.loss[a]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new re(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(o=>RD(o))}else{const a=RD(e.loss);this.outputs.forEach(o=>{n.push(a)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let a=0;a<this.outputs.length;++a){const o=this.internalOutputShapes[a],l=this.outputNames[a];this.feedOutputNames.push(l),this.feedOutputShapes.push(o),this.feedLossFns.push(this.lossFunctions[a])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],sp("loss",()=>{for(let a=0;a<this.outputs.length;++a){if(r.indexOf(a)!==-1)continue;const o=this.lossFunctions[a];this.outputs.length>1&&(this.metricsTensors.push([o,a]),this.metricsNames.push(this.outputNames[a]+"_loss"))}});const i=Y6e(e.metrics,this.outputNames),s=(a,o,l)=>{this.outputNames.length>1&&(o=this.outputNames[a]+"_"+o),this.metricsNames.push(o),this.metricsTensors.push([l,a])};sp("metric",()=>{for(let a=0;a<this.outputs.length;++a){if(r.indexOf(a)!==-1)continue;const o=i[a];(u=>{const c="";let f,d,h;for(const p of u){if(typeof p=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(p)!==-1){const g=this.internalOutputShapes[a];g[g.length-1]===1||this.lossFunctions[a]===F3?["accuracy","acc"].indexOf(p)!==-1?d=zz:["crossentropy","ce"].indexOf(p)!==-1&&(d=kre):this.lossFunctions[a]===gT?["accuracy","acc"].indexOf(p)!==-1?d=Are:["crossentropy","ce"].indexOf(p)!==-1&&(d=Mre):["accuracy","acc"].indexOf(p)!==-1?d=Bz:["crossentropy","ce"].indexOf(p)!==-1&&(d=Uz);let v;["accuracy","acc"].indexOf(p)!==-1?v="acc":["crossentropy","ce"].indexOf(p)!==-1&&(v="ce"),h=d,f=c+v}else h=E6e(p),f=c+sC(p);let m;sp(f,()=>{m=h}),s(a,f,m)}})(o)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,r={}){const i=r.batchSize==null?32:r.batchSize;DF(i);const s=!0,a=this.standardizeUserDataXY(e,n,s,i);try{const o=a[0].concat(a[1]);this.makeTestFunction();const l=this.testFunction,u=this.testLoop(l,o,i,r.verbose,r.steps);return Ms(u)}finally{Xh(a[0],e),Xh(a[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),W6e(this,e,n)}checkNumSamples(e,n,r,i="steps"){let s;if(r!=null){if(s=null,n!=null)throw new re(`If ${i} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?s=e[0].shape[0]:s=e.shape[0];else throw new re(`Either the input data should have a defined shape, or ${i} shoud be specified.`);return s}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new re("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),i=r?n:[n],s=this.retrieveSymbolicTensors(i),a=new Zf;if(e instanceof kn&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new re(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)a.add(this.inputs[l],e[l])}else for(const l of this.inputs){const u=e[l.name];if(u==null)throw new re(`No value is provided for the model's input ${l.name}`);a.add(l,u)}const o=w1(s,a);return r?o:o[0]}retrieveSymbolicTensors(e){const n=Ap(null,e.length);let r=e.length;for(const i of this.layers){const s=Array.isArray(i.output)?i.output:[i.output],a=s.map(o=>o.name);for(let o=0;o<e.length;++o){const l=a.indexOf(e[o]);if(l!==-1&&(n[o]=s[l],r--),r===0)break}if(r===0)break}if(r>0){const i=[];throw n.forEach((s,a)=>{s==null&&i.push(e[a])}),new re(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(i)}`)}return n}predictLoop(e,n=32,r=!1){return oe(()=>{const i=this.checkNumSamples(e);if(r)throw new zt("Verbose predictLoop() is not implemented yet.");const s=RF(i,n),a=this.outputs.map(o=>[]);for(let o=0;o<s.length;++o)oe(()=>{const u=s[o][0],c=s[o][1],f=_1(e,u,c),d=[];if(Array.isArray(f))for(let p=0;p<f.length;++p)d.push({key:this.inputs[p],value:f[p]});else d.push({key:this.inputs[0],value:f});const h=new Zf(d);return w1(this.outputs,h)}).forEach((u,c)=>a[c].push(u));return Ms(a.map(o=>Er(o,0)))})}predict(e,n={}){const r=Rre(e);ij(r,this.inputNames,this.feedInputShapes,!1);try{const i=n.batchSize==null?32:n.batchSize;return DF(i),this.predictLoop(r,i)}finally{Xh(r,e)}}predictOnBatch(e){ij(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,r=!0,i){if(this.optimizer_==null)throw new Fo("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const s=[];for(let a=0;a<this.feedOutputShapes.length;++a){const o=this.feedOutputShapes[a];this.feedLossFns[a]===gT?s.push(o.slice(0,o.length-1).concat([1])):s.push(o)}if(e=rj(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=rj(n,this.feedOutputNames,s,!1,"target"),q6e(e,n),X6e(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&i!=null&&i>0&&e[0].shape[0]%i!==0)throw new re(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${i}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,r,i,s=!0,a){const[o,l]=this.standardizeUserDataXY(e,n,s,a);if(r!=null)throw new Error("sample weight is not supported yet.");let u=null;if(i!=null){const c=$re(i,this.outputNames);u=[];for(let f=0;f<c.length;++f)u.push(await Ire(l[f],null,c[f]))}return[o,l,u]}testLoop(e,n,r,i=0,s){return oe(()=>{const a=this.checkNumSamples(n,r,s,"steps"),o=[];if(i>0)throw new zt("Verbose mode is not implemented yet.");if(s!=null)throw new zt("steps mode in testLoop() is not implemented yet");{const l=RF(a,r),u=Us(Bl(0,a));for(let c=0;c<l.length;++c){const f=l[c][0],d=l[c][1],h=ap(u,f,d-f),p=Vz(n,h),m=e(p);if(c===0)for(let g=0;g<m.length;++g)o.push(St(0));for(let g=0;g<m.length;++g){const v=m[g];o[g]=We(o[g],se(d-f,v))}}for(let c=0;c<o.length;++c)o[c]=kt(o[c],a)}return o})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let r=0;r<e.length;++r){const i=e[r];let s=i;if(UH(e,i)>1){const a=UH(e.slice(0,r),i);s+=`_${a}`}n.push(s)}return n}makeTrainFunction(){return e=>{const n=[],r=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),a=[],o=()=>{const f=[];for(let m=0;m<this.inputs.length;++m)f.push({key:this.inputs[m],value:r[m]});const d=new Zf(f),h=w1(this.outputs,d,{training:!0});let p;for(let m=0;m<this.lossFunctions.length;++m){const g=this.lossFunctions[m];let v=g(i[m],h[m]);s[m]!=null&&(v=L6e(v,s[m]));const y=dr(v);n.push(y),m===0?p=v:p=We(p,v)}for(let m=0;m<this.metricsTensors.length;++m){let g;if(this.outputs.length>1&&m<this.outputs.length)g=n[m];else{const v=this.metricsTensors[m][0],y=this.metricsTensors[m][1];g=dr(v(i[y],h[y]))}ai(g),a.push(g)}return p=dr(p),this.calculateLosses().forEach(m=>{p=We(p,m)}),p},l=this.collectedTrainableWeights.map(f=>f.read()),u=!0;return[this.optimizer_.minimize(o,u,l)].concat(a)}}makeTestFunction(){this.testFunction=e=>oe(()=>{const n=[];let r;const i=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=[];for(let u=0;u<this.inputs.length;++u)a.push({key:this.inputs[u],value:i[u]});const o=new Zf(a),l=w1(this.outputs,o);for(let u=0;u<this.lossFunctions.length;++u){const c=this.lossFunctions[u],f=dr(c(s[u],l[u]));u===0?r=f:r=We(r,f),n.push(r)}for(let u=0;u<this.metricsTensors.length;++u){const c=this.metricsTensors[u][0],f=this.metricsTensors[u][1],d=dr(c(s[f],l[f]));n.push(d)}return n})}async fit(e,n,r={}){return H6e(this,e,n,r)}async fitDataset(e,n){return B6e(this,e,n)}async trainOnBatch(e,n){const r=await this.standardizeUserData(e,n),i=r[0],s=r[1],o=this.makeTrainFunction()(i.concat(s)),l=[];for(const u of o){const c=await u.data();l.push(c[0])}return Pt(o),Ms(l)}getNamedWeights(e){const n=[],r=e!=null&&e.trainableOnly,i=r?this.trainableWeights:this.weights,s=this.getWeights(r);for(let a=0;a<i.length;++a)r&&!i[a].trainable||n.push({name:i[a].originalName,tensor:s[a]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=lT().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-lT().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=_c(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>_c(n))}else{const n=Object.keys(this.loss);e={};const r=this.loss;for(const i of n)if(typeof r[i]=="string")e[i]=_c(r[i]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[_c(sC(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>_c(sC(e)));{const e={};for(const n in this.metrics)e[n]=_c(sC(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=Ux(e.optimizer_config),r=Dl(n);let i;if(typeof e.loss=="string")i=Ph(e.loss);else if(Array.isArray(e.loss))i=e.loss.map(a=>Ph(a));else if(e.loss!=null){i={};for(const a in e.loss)i[a]=Ph(e.loss[a])}let s;if(Array.isArray(e.metrics))s=e.metrics.map(a=>Ph(a));else if(e.metrics!=null){s={};for(const a in e.metrics)s[a]=Ph(e.metrics[a])}this.compile({loss:i,metrics:s,optimizer:r})}async save(e,n){if(typeof e=="string"){const u=s4(e);if(u.length===0)throw new re(`Cannot find any save handlers for URL '${e}'`);if(u.length>1)throw new re(`Found more than one (${u.length}) save handlers for URL '${e}'`);e=u[0]}if(e.save==null)throw new re("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await dF(this.getNamedWeights(n)),i=!1,s=null,o={modelTopology:this.toJSON(s,i),format:K6e,generatedBy:`TensorFlow.js tfjs-layers v${L3}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){o.trainingConfig=this.getTrainingConfig();const u="optimizer",{data:c,specs:f}=await dF(await this.optimizer.getWeights(),u);r.specs.push(...f),r.data=RM([r.data,c])}return this.userDefinedMetadata!=null&&(ZH(this.userDefinedMetadata,this.name,!0),o.userDefinedMetadata=this.userDefinedMetadata),o.weightData=r.data,o.weightSpecs=r.specs,e.save(o)}setUserDefinedMetadata(e){ZH(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}Bc.className="Model";Oe(Bc);class Ore extends Bc{}Ore.className="Functional";Oe(Ore);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function Z6e(t,e){"modelTopology"in t||(t={modelTopology:t}),t=t;let n=t.modelTopology;n.model_config!=null&&(n=n.model_config);const r=Ux(n),i=Dl(r,e);if(t.weightsManifest!=null){const s=await Gte(t.weightsManifest,t.pathPrefix,i.weights.map(o=>o.originalName)),a={};for(const o of i.weights)a[o.originalName]=s[o.originalName];i.loadWeights(a),Pt(s)}return i}async function J6e(t,e){if(e==null&&(e={}),typeof t=="string"){const n=a4(t,e);if(n.length===0)n.push(oT(t,e));else if(n.length>1)throw new re(`Found more than one (${n.length}) load handlers for URL '${t}'`);t=n[0]}return Q6e(t,void 0,e)}async function Q6e(t,e,n){if(n==null&&(n={}),t.load==null)throw new re("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const r=await t.load();let i=r.modelTopology;i.model_config!=null&&(i=i.model_config);const s=n.strict==null?!0:n.strict,a=r.weightData!=null&&r.weightSpecs!=null&&s,o=Dl(Ux(i),e,a),l=r.trainingConfig;if(l!=null&&o.loadTrainingConfig(l),r.userDefinedMetadata!=null&&o.setUserDefinedMetadata(r.userDefinedMetadata),r.weightData!=null){if(r.weightSpecs==null)throw new re("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");const{modelWeights:u,optimizerWeights:c}=eBe(r.weightData,r.weightSpecs);o.loadWeights(u,s),o.optimizer!=null&&c.length>0&&await o.optimizer.setWeights(c),Pt(u),Pt(c.map(f=>f.tensor))}return o}function eBe(t,e){const n=DM(t,e),r={},i=[];return e.forEach(s=>{s.group==="optimizer"?i.push({name:s.name,tensor:n[s.name]}):r[s.name]=n[s.name]}),{modelWeights:r,optimizerWeights:i}}let P3=class FF extends Bc{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:D3("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new re(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof FF||e instanceof Bc;let r;if(n){if(r=e,r.outputs.length!==1)throw new re("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new re("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new re("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const i=yre({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(i)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new re(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new re("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=vre(this.outputs[0])}this.inboundNodes=[],new R3({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Ap(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(i=>i.shape),outputShapes:this.outputs[0].shape})}else{const i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(Gn(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Bc({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,r=console.log){this.built||this.build(),super.summary(e,n,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,r={}){if(!this.built)throw new Fo("The model needs to be compiled before being used.");return this.model.evaluate(e,n,r)}async evaluateDataset(e,n){if(!this.built)throw new Fo("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,r={}){if(!this.built)throw new Fo("The model needs to be compiled before being used.");return this.model.fit(e,n,r)}async fitDataset(e,n){if(!this.built)throw new Fo("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,r={},i=!1){let s,a={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new re("Legacy serialization format not supported yet.");s=n}else R(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),s=n.layers,delete n.layers,a=n;const o=new e(a);if(!(o instanceof FF))throw new zt(`Sequential.fromConfig called on non-Sequential input: ${o}`);for(const l of s){const c=Dl(l,void 0,i);i&&c.setFastWeightInitDuringBuild(!0),o.add(c)}return o}set stopTraining(e){if(this.model==null)throw new re("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new re("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),e.push(r)}return{name:this.name,layers:e}}};P3.className="Sequential";Oe(P3);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function tBe(t){return new Bc(t)}function Fre(t){return new P3(t)}function nBe(t,e){return e==null&&(e={}),J6e(t,e)}function Lre(t){return yre(t)}function rBe(t,e){Ba.registerCallbackConstructor(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let $a=class extends am{getConfig(){return{}}};class Pre extends $a{apply(e,n=1){return Mze(e,n)}}Pre.className="elu";Oe(Pre);class zre extends $a{apply(e){return QM(e)}}zre.className="selu";Oe(zre);class Bre extends $a{apply(e){return Ku(e)}}Bre.className="relu";Oe(Bre);class Ure extends $a{apply(e){return oe(()=>xy(6,Ku(e)))}}Ure.className="relu6";Oe(Ure);let Vre=class extends $a{apply(e){return e}};Vre.className="linear";Oe(Vre);class Wre extends $a{apply(e){return Cu(e)}}Wre.className="sigmoid";Oe(Wre);class Gre extends $a{apply(e){return $ze(e)}}Gre.className="hardSigmoid";Oe(Gre);class Hre extends $a{apply(e){return yy(e)}}Hre.className="softplus";Oe(Hre);class jre extends $a{apply(e){return Nze(e)}}jre.className="softsign";Oe(jre);class qre extends $a{apply(e){return _0(e)}}qre.className="tanh";Oe(qre);let Wz=class extends $a{apply(e,n=-1){return j_(e,n)}};Wz.className="softmax";Oe(Wz);class Xre extends $a{apply(e,n=-1){return qM(e,n)}}Xre.className="logSoftmax";Oe(Xre);class Yre extends $a{apply(e,n=1){return oe(()=>Cu(e.mul(n)).mul(e))}}Yre.className="swish";Oe(Yre);function Ed(t){return t.getClassName()}function FD(t,e={}){return Q_(t,qa.getMap().classNameMap,e,"activation")}function Td(t){if(t==null){const e={};return e.className="linear",e.config={},FD(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},FD(e)}else return t instanceof $a?t:FD(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Gz(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class Kre extends am{}class s2 extends Kre{constructor(e){super(),Gz(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return oe(()=>{let n=Fr([1]);return this.hasL1&&(n=We(n,Tt(se(this.l1,Wr(e))))),this.hasL2&&(n=We(n,Tt(se(this.l2,r2(e))))),n.asScalar()})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}s2.className="L1L2";Oe(s2);function iBe(t){return Gz(t),new s2({l1:t!=null?t.l1:null,l2:0})}function sBe(t){return Gz(t),new s2({l2:t!=null?t.l2:null,l1:0})}const sj={l1l2:"L1L2"};function Wn(t){return _z(t)}function aj(t,e={}){return Q_(t,qa.getMap().classNameMap,e,"regularizer")}function lr(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in sj?sj[t]:t,config:{}};return aj(n)}else return t instanceof Kre?t:aj(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Hz extends mn{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=Wt(e);let r=Ku(e);return this.maxValue!=null&&(r=zs(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}Hz.className="ReLU";Oe(Hz);class jz extends mn{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Wt(e);return U_(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}jz.className="LeakyReLU";Oe(jz);class qz extends mn{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=or(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=lr(e.alphaRegularizer),this.alphaConstraint=Jr(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new re(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=Gn(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const i of this.sharedAxes)n[i-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let i=1;i<e.length;++i)r[i]=e[i];this.inputSpec=[new li({ndim:e.length,axes:r})],this.built=!0}call(e,n){return e=Wt(e),H_(e,this.alpha.read())}getConfig(){const e={alphaInitializer:hr(this.alphaInitializer),alphaRegularizer:Wn(this.alphaRegularizer),alphaConstraint:Zr(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}qz.className="PReLU";Oe(qz);let Xz=class extends mn{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new zt(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Wt(e);return gy(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};Xz.className="ELU";Oe(Xz);class Yz extends mn{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const r=Wt(e);return r.mul(t2(r.greater(this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}Yz.className="ThresholdedReLU";Oe(Yz);class Kz extends mn{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new Wz().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){const r=Wt(e);return this.softmax(r,this.axis)}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}Kz.className="Softmax";Oe(Kz);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function jg(t,e,n){if(typeof t=="number")return Ap(t,e);if(t.length!==e)throw new re(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const i=t[r];if(!Eze(i))throw new re(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${i}`)}return t}function Rl(t,e,n,r,i=1){if(t==null)return t;const s=e+(e-1)*(i-1);let a;return n==="same"?a=t:a=t-s+1,Math.floor((a+r-1)/r)}function aC(t,e,n,r){if(t==null)return null;if(r==="valid")t=t*e+Cd([n-e,0]);else if(r==="same")t=t*e;else throw new re(`Unsupport padding mode: ${r}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Zz(t,e){return oe(()=>(Dr(e),e==="channelsFirst"?$n(t,[0,2,3,1]):t))}function Zre(t,e){return oe(()=>(Dr(e),e==="channelsFirst"?$n(t,[0,2,3,4,1]):t))}function aBe(t,e,n,r=1,i="valid",s,a=1){return oe(()=>{if(s==null&&(s=zl()),Dr(s),t.shape.length!==3)throw new re(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new re(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new re(`The bias for a conv1dWithBias operation should be 1, but is ${e.shape.length} instead`);if(s==="channelsFirst"&&(t=$n(t,[0,2,1])),i==="causal")throw new zt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let o=zM(t,e,r,i==="same"?"same":"valid","NWC",a);return n!=null&&(o=Zu(o,n)),o})}function oj(t,e,n,r=[1,1],i="valid",s,a,o=null){return oe(()=>{if(s==null&&(s=zl()),Dr(s),t.rank!==3&&t.rank!==4)throw new re(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new re(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=Zz(t,s);if(i==="causal")throw new zt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=iz({x:l,filter:e,strides:r,pad:i==="same"?"same":"valid",dilations:a,dataFormat:"NHWC",bias:n,activation:o}),s==="channelsFirst"&&(l=$n(l,[0,3,1,2])),l})}function oBe(t,e,n,r=[1,1,1],i="valid",s,a){return oe(()=>{if(s==null&&(s=zl()),Dr(s),t.rank!==4&&t.rank!==5)throw new re(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new re(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let o=Zre(t,s);if(i==="causal")throw new zt("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return o=N4(o,e,r,i==="same"?"same":"valid","NDHWC",a),n!=null&&(o=Zu(o,n)),s==="channelsFirst"&&(o=$n(o,[0,4,1,2,3])),o})}class z3 extends mn{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",z3.verifyArgs(n),this.rank=e,oi(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new zt(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=jg(n.kernelSize,e,"kernelSize"),this.strides=jg(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,co(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,Dr(this.dataFormat),this.activation=Td(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=or(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Jr(n.biasConstraint),this.biasRegularizer=lr(n.biasRegularizer),this.activityRegularizer=lr(n.activityRegularizer),this.dilationRate=jg(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new re(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new re(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new re(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(lu("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!Sz(e.kernelSize,"number",1,3))throw new re(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Ed(this.activation),useBias:this.useBias,biasInitializer:hr(this.biasInitializer),biasRegularizer:Wn(this.biasRegularizer),activityRegularizer:Wn(this.activityRegularizer),biasConstraint:Zr(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class Ay extends z3{constructor(e,n){super(e,n),this.kernel=null,Ay.verifyArgs(n),this.filters=n.filters,oi(this.filters,"filters"),this.kernelInitializer=or(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Jr(n.kernelConstraint),this.kernelRegularizer=lr(n.kernelRegularizer)}build(e){e=Gn(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new re(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],i=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(e,n){return oe(()=>{e=Wt(e);let r;const i=this.bias==null?null:this.bias.read(),s=ore(this.activation.getClassName());if(s!=null&&this.rank===2)r=oj(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate,s);else{if(this.rank===1)r=aBe(e,this.kernel.read(),i,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=oj(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=oBe(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new zt("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=Gn(e);const n=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let s=0;s<r.length;++s){const a=Rl(r[s],this.kernelSize[s],this.padding,this.strides[s],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[s]);n.push(a)}let i=[e[0]];return this.dataFormat==="channelsLast"?(i=i.concat(n),i.push(this.filters)):(i.push(this.filters),i=i.concat(n)),i}getConfig(){const e={filters:this.filters,kernelInitializer:hr(this.kernelInitializer),kernelRegularizer:Wn(this.kernelRegularizer),kernelConstraint:Zr(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new re(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class My extends Ay{constructor(e){super(2,e),My.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!Sz(e.kernelSize,"number",1,2))throw new re(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}My.className="Conv2D";Oe(My);class a2 extends Ay{constructor(e){super(3,e),a2.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new re(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}a2.className="Conv3D";Oe(a2);class Jz extends My{constructor(e){if(super(e),this.inputSpec=[new li({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new re(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Gn(e),e.length!==4)throw new re("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new re("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new li({ndim:4,axes:{[n]:r}})],this.built=!0}call(e,n){return oe(()=>{let r=Wt(e);if(r.shape.length!==4)throw new re(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const i=r.shape,s=i[0];let a,o;this.dataFormat==="channelsFirst"?(a=2,o=3):(a=1,o=2);const l=i[a],u=i[o],c=this.kernelSize[0],f=this.kernelSize[1],d=this.strides[0],h=this.strides[1],p=aC(l,d,c,this.padding),m=aC(u,h,f,this.padding),g=[s,p,m,this.filters];this.dataFormat!=="channelsLast"&&(r=$n(r,[0,2,3,1]));let v=BM(r,this.kernel.read(),g,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(v=$n(v,[0,3,1,2])),this.bias!=null&&(v=Zu(v,this.bias.read(),this.dataFormat)),this.activation!=null&&(v=this.activation.apply(v)),v})}computeOutputShape(e){e=Gn(e);const n=e.slice();let r,i,s;this.dataFormat==="channelsFirst"?(r=1,i=2,s=3):(r=3,i=1,s=2);const a=this.kernelSize[0],o=this.kernelSize[1],l=this.strides[0],u=this.strides[1];return n[r]=this.filters,n[i]=aC(n[i],l,a,this.padding),n[s]=aC(n[s],u,o,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}Jz.className="Conv2DTranspose";Oe(Jz);class Jre extends Ay{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new re("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new re("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new re(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=or(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=lr(n.depthwiseRegularizer),this.depthwiseConstraint=Jr(n.depthwiseConstraint),this.pointwiseInitializer=or(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=lr(n.pointwiseRegularizer),this.pointwiseConstraint=Jr(n.pointwiseConstraint)}build(e){if(e=Gn(e),e.length<this.rank+2)throw new re(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new re(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const r=e[n],i=this.kernelSize.concat([r,this.depthMultiplier]),s=[];for(let o=0;o<this.rank;++o)s.push(1);s.push(r*this.depthMultiplier,this.filters);const a=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",i,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,a,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",s,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,a,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,a,this.biasConstraint):this.bias=null,this.inputSpec=[new li({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(e,n){return oe(()=>{e=Wt(e);let r;if(this.rank===1)throw new zt("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=$n(e,[0,2,3,1])),r=q4(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=Zu(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=$n(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=hr(this.depthwiseInitializer),e.pointwiseInitializer=hr(this.pointwiseInitializer),e.depthwiseRegularizer=Wn(this.depthwiseRegularizer),e.pointwiseRegularizer=Wn(this.pointwiseRegularizer),e.depthwiseConstraint=Zr(this.depthwiseConstraint),e.pointwiseConstraint=Zr(this.pointwiseConstraint),e}}Jre.className="SeparableConv";class Qz extends Jre{constructor(e){super(2,e)}}Qz.className="SeparableConv2D";Oe(Qz);class o2 extends Ay{constructor(e){super(1,e),o2.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!Sz(e.kernelSize,"number",1,1))throw new re(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}o2.className="Conv1D";Oe(o2);class e6 extends mn{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return oe(()=>{if(e=Wt(e),this.dataFormat==="channelsLast"){const r=rC(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return rC(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=rC(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return rC(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}e6.className="Cropping2D";Oe(e6);class t6 extends mn{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Dr(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,_ze(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,r]}else{const n=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],n,r,e[3]]}}call(e,n){return oe(()=>{let r=Wt(e);const i=r.shape;if(this.dataFormat==="channelsFirst"){r=$n(r,[0,2,3,1]);const s=this.size[0]*i[2],a=this.size[1]*i[3],o=this.interpolation==="nearest"?r.resizeNearestNeighbor([s,a]):r.resizeBilinear([s,a]);return $n(o,[0,3,1,2])}else{const s=this.size[0]*i[1],a=this.size[1]*i[2];return this.interpolation==="nearest"?r.resizeNearestNeighbor([s,a]):r.resizeBilinear([s,a])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}t6.className="UpSampling2D";Oe(t6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function lBe(t,e,n=[1,1],r="valid",i,s){return oe(()=>{i==null&&(i=zl()),Dr(i);let a=Zz(t,i);if(t.rank!==4)throw new re(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new re(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return a=my(a,e,n,r==="same"?"same":"valid","NHWC",s),i==="channelsFirst"&&(a=$n(a,[0,3,1,2])),a})}class n6 extends z3{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=or(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Jr(e.depthwiseConstraint),this.depthwiseRegularizer=lr(e.depthwiseRegularizer)}build(e){if(e=Gn(e),e.length<4)throw new re(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new re(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const r=e[n],i=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",i,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return oe(()=>{e=Wt(e);let r=lBe(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=Zu(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=Gn(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],i=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,s=Rl(n,this.kernelSize[0],this.padding,this.strides[0]),a=Rl(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],i,s,a]:[e[0],s,a,i]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=hr(this.depthwiseInitializer),e.depthwiseRegularizer=Wn(this.depthwiseRegularizer),e.depthwiseConstraint=Zr(this.depthwiseRegularizer),e}}n6.className="DepthwiseConv2D";Oe(n6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Qre(t,e,n,r){if(Array.isArray(t)){if(e!=null||n!=null)throw new re("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function i(s){return s==null||Array.isArray(s)?s:[s]}return e=i(e),n=i(n),{inputs:t,initialState:e,constants:n}}function eie(t,e,n,r=!1,i,s,a=!1,o=!1){return oe(()=>{const l=e.shape.length;if(l<3)throw new re(`Input should be at least 3D, but is ${l}D.`);const u=[1,0].concat(Bl(2,l));if(e=$n(e,u),s!=null)throw new zt("The rnn() functoin of the deeplearn.js backend does not support constants yet.");a&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),i!=null&&(i=i.asType("bool").asType("float32"),i.rank===l-1&&(i=sa(i,-1)),i=$n(i,u)),r&&(e=Ca(e,0),i!=null&&(i=Ca(i,0)));const c=[];let f,d=n;const h=e.shape[0],p=el(e);let m;i!=null&&(m=el(i));for(let v=0;v<h;++v){const y=p[v],b=oe(()=>t(y,d));if(i==null)f=b[0],d=b[1];else{const x=oe(()=>{const w=m[v],S=Sa(w).sub(w),C=b[0].mul(w).add(d[0].mul(S)),_=d.map((E,T)=>b[1][T].mul(w).add(E.mul(S)));return{output:C,newStates:_}});f=x.output,d=x.newStates}o&&c.push(f)}let g;return o&&(g=Ea(c,1)),[f,g,d]})}class Gl extends mn{constructor(e){super(e);let n;if(e.cell==null)throw new re("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new V3({cells:e.cell}):n=e.cell,n.stateSize==null)throw new re("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new li({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Bl(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){MF(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let i;if(this.returnSequences?i=[e[0],e[1],r]:i=[e[0],r],this.returnState){const s=[];for(const a of n)s.push([e[0],a]);return[i].concat(s)}else return i}computeMask(e,n){return oe(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const i=this.states.map(s=>null);return[r].concat(i)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<e;++r)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new zt("Constants support is not implemented in RNN yet.");MF(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new li({shape:[n,null,...r]});const i=[e[0]].concat(e.slice(2));this.cell.build(i);let s;if(Array.isArray(this.cell.stateSize)?s=this.cell.stateSize:s=[this.cell.stateSize],this.stateSpec!=null){if(!Tn(this.stateSpec.map(a=>a.shape[a.shape.length-1]),s))throw new re(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=s.map(a=>new li({shape:[null,a]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){oe(()=>{if(!this.stateful)throw new ou("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new re("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>Fr([r,i])):this.states_=[Fr([r,this.cell.stateSize])];else if(e==null)Pt(this.states_),this.keptStates!=null&&(Pt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>Fr([r,i])):this.states_[0]=Fr([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new re(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):Pt(this.states_);for(let i=0;i<this.states_.length;++i){const s=e[i],a=Array.isArray(this.cell.stateSize)?this.cell.stateSize[i]:this.cell.stateSize,o=[r,a];if(!Tn(s.shape,o))throw new re(`State ${i} is incompatible with layer ${this.name}: expected shape=${o}, received shape=${s.shape}`);this.states_[i]=s}}this.states_=this.states_.map(i=>ai(i.clone()))})}apply(e,n){let r=n==null?null:n.initialState,i=n==null?null:n.constants;n==null&&(n={});const s=Qre(e,r,i,this.numConstants);e=s.inputs,r=s.initialState,i=s.constants;let a=[],o=[];if(r!=null){n.initialState=r,a=a.concat(r),this.stateSpec=[];for(const u of r)this.stateSpec.push(new li({shape:u.shape}));o=o.concat(this.stateSpec)}if(i!=null&&(n.constants=i,a=a.concat(i),this.numConstants=i.length),a[0]instanceof Tl){const u=[e].concat(a),c=this.inputSpec.concat(o),f=this.inputSpec;this.inputSpec=c;const d=super.apply(u,n);return this.inputSpec=f,d}else return super.apply(e,n)}call(e,n){return oe(()=>{const r=n==null?null:n.mask,i=n==null?null:n.training;let s=n==null?null:n.initialState;e=Wt(e),s==null&&(this.stateful?s=this.states_:s=this.getInitialState(e));const a=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(s.length!==a)throw new re(`RNN Layer has ${a} state(s) but was passed ${s.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const o={training:i},u=eie((p,m)=>{const g=this.cell.call([p].concat(m),o);return[g[0],g.slice(1)]},e,s,this.goBackwards,r,null,this.unroll,this.returnSequences),c=u[0],f=u[1],d=u[2];this.stateful&&this.resetStates(d,i);const h=this.returnSequences?f:c;return this.returnState?[h].concat(d):h})}getInitialState(e){return oe(()=>{let n=Fr(e.shape);return n=Tt(n,[1,2]),n=n2(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?kF(n,[1,r]):n):this.cell.stateSize>1?[kF(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===Gl.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign({},r,e,n)}static fromConfig(e,n,r={}){const i=n.cell,s=Dl(i,r);return new e(Object.assign(n,{cell:s}))}}Gl.className="RNN";Oe(Gl);class l2 extends mn{}class B3 extends l2{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,oi(this.units,"units"),this.activation=Td(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=or(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=or(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=or(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=lr(e.kernelRegularizer),this.recurrentRegularizer=lr(e.recurrentRegularizer),this.biasRegularizer=lr(e.biasRegularizer),this.kernelConstraint=Jr(e.kernelConstraint),this.recurrentConstraint=Jr(e.recurrentConstraint),this.biasConstraint=Jr(e.biasConstraint),this.dropout=E0([1,Cd([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=E0([1,Cd([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Gn(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return oe(()=>{if(e=e,e.length!==2)throw new re(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const i=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=kd({ones:()=>Sa(e),rate:this.dropout,training:i})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=kd({ones:()=>Sa(r),rate:this.recurrentDropout,training:i}));let s;const a=this.dropoutMask,o=this.recurrentDropoutMask;a!=null?s=Eu(se(e,a),this.kernel.read()):s=Eu(e,this.kernel.read()),this.bias!=null&&(s=Zu(s,this.bias.read())),o!=null&&(r=se(r,o));let l=We(s,Eu(r,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Ed(this.activation),useBias:this.useBias,kernelInitializer:hr(this.kernelInitializer),recurrentInitializer:hr(this.recurrentInitializer),biasInitializer:hr(this.biasInitializer),kernelRegularizer:Wn(this.kernelRegularizer),recurrentRegularizer:Wn(this.recurrentRegularizer),biasRegularizer:Wn(this.biasRegularizer),activityRegularizer:Wn(this.activityRegularizer),kernelConstraint:Zr(this.kernelConstraint),recurrentConstraint:Zr(this.recurrentConstraint),biasConstraint:Zr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign({},e,n)}}B3.className="SimpleRNNCell";Oe(B3);class r6 extends Gl{constructor(e){e.cell=new B3(e),super(e)}call(e,n){return oe(()=>{this.cell.dropoutMask!=null&&(Pt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Pt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}static fromConfig(e,n){return new e(n)}}r6.className="SimpleRNN";Oe(r6);class U3 extends l2{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new re("GRUCell does not support reset_after parameter set to true.");this.units=e.units,oi(this.units,"units"),this.activation=Td(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Td(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=or(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=or(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=or(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=lr(e.kernelRegularizer),this.recurrentRegularizer=lr(e.recurrentRegularizer),this.biasRegularizer=lr(e.biasRegularizer),this.kernelConstraint=Jr(e.kernelConstraint),this.recurrentConstraint=Jr(e.recurrentConstraint),this.biasConstraint=Jr(e.biasConstraint),this.dropout=E0([1,Cd([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=E0([1,Cd([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Gn(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return oe(()=>{if(e=e,e.length!==2)throw new re(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training==null?!1:n.training;let i=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=kd({ones:()=>Sa(e),rate:this.dropout,training:r,count:3})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=kd({ones:()=>Sa(i),rate:this.recurrentDropout,training:r,count:3}));const s=this.dropoutMask,a=this.recurrentDropoutMask;let o,l,u;0<this.dropout&&this.dropout<1&&(e=se(e,s[0]));let c=Eu(e,this.kernel.read());this.useBias&&(c=Zu(c,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(i=se(i,a[0]));const f=this.recurrentKernel.read(),[d,h]=gs(f,[2*this.units,this.units],f.rank-1),p=Eu(i,d),[m,g,v]=gs(c,3,c.rank-1),[y,b]=gs(p,2,p.rank-1);o=this.recurrentActivation.apply(We(m,y)),l=this.recurrentActivation.apply(We(g,b));const x=Eu(se(l,i),h);u=this.activation.apply(We(v,x));const w=We(se(o,i),se(We(1,pr(o)),u));return[w,w]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Ed(this.activation),recurrentActivation:Ed(this.recurrentActivation),useBias:this.useBias,kernelInitializer:hr(this.kernelInitializer),recurrentInitializer:hr(this.recurrentInitializer),biasInitializer:hr(this.biasInitializer),kernelRegularizer:Wn(this.kernelRegularizer),recurrentRegularizer:Wn(this.recurrentRegularizer),biasRegularizer:Wn(this.biasRegularizer),activityRegularizer:Wn(this.activityRegularizer),kernelConstraint:Zr(this.kernelConstraint),recurrentConstraint:Zr(this.recurrentConstraint),biasConstraint:Zr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign({},e,n)}}U3.className="GRUCell";Oe(U3);class i6 extends Gl{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new U3(e),super(e)}call(e,n){return oe(()=>{this.cell.dropoutMask!=null&&(Pt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Pt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}i6.className="GRU";Oe(i6);class u2 extends l2{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,oi(this.units,"units"),this.activation=Td(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Td(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=or(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=or(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=or(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=lr(e.kernelRegularizer),this.recurrentRegularizer=lr(e.recurrentRegularizer),this.biasRegularizer=lr(e.biasRegularizer),this.kernelConstraint=Jr(e.kernelConstraint),this.recurrentConstraint=Jr(e.recurrentConstraint),this.biasConstraint=Jr(e.biasConstraint),this.dropout=E0([1,Cd([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=E0([1,Cd([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=Gn(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let i;if(this.useBias){if(this.unitForgetBias){const s=this.biasInitializer,a=this.units;i=new(n=class extends ul{apply(l,u){const c=s.apply([a]),f=new T3().apply([a]),d=s.apply([a*2]);return HH(HH(c,f),d)}},n.className="CustomInit",n)}else i=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,i,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return oe(()=>{const r=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new re(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let i=e[1];const s=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=kd({ones:()=>Sa(e),rate:this.dropout,training:r,count:4})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=kd({ones:()=>Sa(i),rate:this.recurrentDropout,training:r,count:4}));const a=this.dropoutMask,o=this.recurrentDropoutMask;let l,u,c,f;0<this.dropout&&this.dropout<1&&(e=se(e,a[0]));let d=Eu(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(i=se(i,o[0])),d=We(d,Eu(i,this.recurrentKernel.read())),this.useBias&&(d=Zu(d,this.bias.read()));const[h,p,m,g]=gs(d,4,d.rank-1);l=this.recurrentActivation.apply(h),u=this.recurrentActivation.apply(p),c=We(se(u,s),se(l,this.activation.apply(m))),f=this.recurrentActivation.apply(g);const v=se(f,this.activation.apply(c));return[v,v,c]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Ed(this.activation),recurrentActivation:Ed(this.recurrentActivation),useBias:this.useBias,kernelInitializer:hr(this.kernelInitializer),recurrentInitializer:hr(this.recurrentInitializer),biasInitializer:hr(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Wn(this.kernelRegularizer),recurrentRegularizer:Wn(this.recurrentRegularizer),biasRegularizer:Wn(this.biasRegularizer),activityRegularizer:Wn(this.activityRegularizer),kernelConstraint:Zr(this.kernelConstraint),recurrentConstraint:Zr(this.recurrentConstraint),biasConstraint:Zr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign({},e,n)}}u2.className="LSTMCell";Oe(u2);class s6 extends Gl{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new u2(e),super(e)}call(e,n){return oe(()=>{this.cell.dropoutMask!=null&&(Pt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Pt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}s6.className="LSTM";Oe(s6);class V3 extends l2{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return oe(()=>{e=e;let r=e.slice(1);const i=[];for(const o of this.cells.slice().reverse())Array.isArray(o.stateSize)?i.push(r.splice(0,o.stateSize.length)):i.push(r.splice(0,1));i.reverse();const s=[];let a;for(let o=0;o<this.cells.length;++o){const l=this.cells[o];r=i[o],o===0?a=[e[0]].concat(r):a=[a[0]].concat(r),a=l.call(a,n),s.push(a.slice(1))}r=[];for(const o of s.slice().reverse())r.push(...o);return[a[0]].concat(r)})}build(e){MF(e)&&(e=e[0]),e=e;let n;this.cells.forEach((r,i)=>{sp(`RNNCell_${i}`,()=>{r.build(e),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=s=>({className:s.getClassName(),config:s.getConfig()}),i={cells:this.cells.map(n)};return Object.assign({},e,i)}static fromConfig(e,n,r={}){const i=[];for(const s of n.cells)i.push(Dl(s,r));return new e({cells:i})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return NF(e)}setWeights(e){const n=[];for(const r of this.cells){const i=r.weights.length,s=e.splice(i);for(let a=0;a<r.weights.length;++a)n.push([r.weights[a],s[a]])}Lz(n)}}V3.className="StackedRNNCells";Oe(V3);function kd(t){const{ones:e,rate:n,training:r=!1,count:i=1}=t,s=()=>pre(e(),n),a=()=>i2(s,e,r);return!i||i<=1?ai(a().clone()):Array(i).fill(void 0).map(a).map(l=>ai(l.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var uBe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class tie extends Gl{constructor(e){if(e.unroll)throw new zt("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new zt("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new li({ndim:5})]}call(e,n){return oe(()=>{if(this.cell.dropoutMask!=null&&(Pt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Pt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new re("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return oe(()=>{const{stateSize:n}=this.cell,r=e.shape,i=this.computeSingleOutputShape(r),s=[i[0],...i.slice(2)],a=Fr(s);return Array.isArray(n)?Array(n.length).fill(a):[a]})}resetStates(e,n=!1){oe(()=>{if(!this.stateful)throw new ou("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,i=this.computeSingleOutputShape(r),s=[i[0],...i.slice(2)];if(r[0]==null)throw new re("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Fr(s)):this.states_=[Fr(s)];else if(e==null)Pt(this.states_),this.keptStates!=null&&(Pt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Fr(s)):this.states_[0]=Fr(s);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new re(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):Pt(this.states_);for(let o=0;o<this.states_.length;++o){const l=e[o],u=s;if(!Tn(l.shape,u))throw new re(`State ${o} is incompatible with layer ${this.name}: expected shape=${u}, received shape=${l.shape}`);this.states_[o]=l}}this.states_=this.states_.map(o=>ai(o.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:r,kernelSize:i,padding:s,strides:a,dilationRate:o}=this.cell,l=n==="channelsFirst",u=e[l?3:2],c=e[l?4:3],f=Rl(u,i[0],s,a[0],o[0]),d=Rl(c,i[1],s,a[1],o[1]);return[...e.slice(0,2),...l?[r,f,d]:[f,d,r]]}}tie.className="ConvRNN2D";class W3 extends u2{constructor(e){const{filters:n,kernelSize:r,strides:i,padding:s,dataFormat:a,dilationRate:o}=e;super(Object.assign({},e,{units:n})),this.filters=n,oi(this.filters,"filters"),this.kernelSize=jg(r,2,"kernelSize"),this.kernelSize.forEach(l=>oi(l,"kernelSize")),this.strides=jg(i||1,2,"strides"),this.strides.forEach(l=>oi(l,"strides")),this.padding=s||"valid",co(this.padding),this.dataFormat=a||"channelsLast",Dr(this.dataFormat),this.dilationRate=jg(o||1,2,"dilationRate"),this.dilationRate.forEach(l=>oi(l,"dilationRate"))}build(e){var n;e=Gn(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new re(`The channel dimension of the input should be defined. Found ${e[r]}`);const i=e[r],s=4,a=this.kernelSize.concat([i,this.filters*s]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const o=this.kernelSize.concat([this.filters,this.filters*s]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",o,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const u=this.biasInitializer,c=this.filters;l=new(n=class extends ul{apply(d,h){const p=u.apply([c]),m=Yu([c]),g=u.apply([c*2]);return Mz([p,m,g])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*s],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return oe(()=>{if(e.length!==3)throw new re(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training||!1,i=e[0],s=e[1],a=e[2],o=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=kd({ones:()=>Sa(i),rate:this.dropout,training:r,count:o}));const l=this.dropoutMask,u=(H,te,q)=>!te||!te[q]?H:se(te[q],H);let c=u(i,l,0),f=u(i,l,1),d=u(i,l,2),h=u(i,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=kd({ones:()=>Sa(s),rate:this.recurrentDropout,training:r,count:o}));const p=this.recurrentDropoutMask;let m=u(s,p,0),g=u(s,p,1),v=u(s,p,2),y=u(s,p,3);const b=3,[x,w,S,C]=gs(this.kernel.read(),o,b),[_,E,T,k]=this.useBias?gs(this.bias.read(),o):[null,null,null,null];c=this.inputConv(c,x,_,this.padding),f=this.inputConv(f,w,E,this.padding),d=this.inputConv(d,S,T,this.padding),h=this.inputConv(h,C,k,this.padding);const[M,A,N,$]=gs(this.recurrentKernel.read(),o,b);m=this.recurrentConv(m,M),g=this.recurrentConv(g,A),v=this.recurrentConv(v,N),y=this.recurrentConv(y,$);const D=this.recurrentActivation.apply(We(c,m)),P=this.recurrentActivation.apply(We(f,g)),O=We(se(P,a),se(D,this.activation.apply(We(d,v)))),B=se(this.recurrentActivation.apply(We(h,y)),this.activation.apply(O));return[B,B,O]})}getConfig(){const e=super.getConfig(),n=uBe(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign({},n,r)}inputConv(e,n,r,i){const s=Kc(e,n,this.strides,i||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?Zu(s,r,this.dataFormat):s}recurrentConv(e,n){return Kc(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}W3.className="ConvLSTM2DCell";Oe(W3);class a6 extends tie{constructor(e){const n=new W3(e);super(Object.assign({},e,{cell:n}))}static fromConfig(e,n){return new e(n)}}a6.className="ConvLSTM2D";Oe(a6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class G3 extends mn{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,r=[];for(let i=0;i<this.noiseShape.length;++i)r.push(this.noiseShape[i]==null?n[i]:this.noiseShape[i]);return r}call(e,n){return oe(()=>{this.invokeCallHook(e,n);const r=Wt(e);if(0<this.rate&&this.rate<1){const i=n.training==null?!1:n.training,s=this.getNoiseShape(r);return i2(()=>pre(r,this.rate,s,this.seed),()=>r,i)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}G3.className="Dropout";Oe(G3);class o6 extends G3{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}o6.className="SpatialDropout1D";Oe(o6);class l6 extends mn{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,oi(this.units,"units"),this.activation=Td(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=or(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=or(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Jr(e.kernelConstraint),this.biasConstraint=Jr(e.biasConstraint),this.kernelRegularizer=lr(e.kernelRegularizer),this.biasRegularizer=lr(e.biasRegularizer),this.activityRegularizer=lr(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=Gn(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=Gn(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return oe(()=>{this.invokeCallHook(e,n);const r=Wt(e),i=ore(this.activation.getClassName());let s;return i!=null?s=Eu(r,this.kernel.read(),i,this.bias?this.bias.read():null):(s=Eu(r,this.kernel.read()),this.bias!=null&&(s=Zu(s,this.bias.read())),this.activation!=null&&(s=this.activation.apply(s))),s})}getConfig(){const e={units:this.units,activation:Ed(this.activation),useBias:this.useBias,kernelInitializer:hr(this.kernelInitializer),biasInitializer:hr(this.biasInitializer),kernelRegularizer:Wn(this.kernelRegularizer),biasRegularizer:Wn(this.biasRegularizer),activityRegularizer:Wn(this.activityRegularizer),kernelConstraint:Zr(this.kernelConstraint),biasConstraint:Zr(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}l6.className="Dense";Oe(l6);let u6=class extends mn{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=Gn(e);for(const n of e.slice(1))if(n==null)throw new re(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],hd(e,1)]}call(e,n){return oe(()=>{this.invokeCallHook(e,n);let r=Wt(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const i=[0];for(let s=2;s<r.rank;++s)i.push(s);i.push(1),r=r.transpose(i)}return Aze(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}};u6.className="Flatten";Oe(u6);class c6 extends mn{constructor(e){super(e),this.supportsMasking=!0,this.activation=Td(e.activation)}call(e,n){return oe(()=>{this.invokeCallHook(e,n);const r=Wt(e);return this.activation.apply(r)})}getConfig(){const e={activation:Ed(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}c6.className="Activation";Oe(c6);class f6 extends mn{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return oe(()=>(e=Wt(e),Tze(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}f6.className="RepeatVector";Oe(f6);class d6 extends mn{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const r="Total size of new array must be unchanged.",i=n.slice();let s=1,a=null;for(let l=0;l<i.length;++l){const u=i[l];if(this.isUnknown(u))if(a===null)a=l;else throw new re("Can only specifiy one unknown dimension.");else s*=u}const o=hd(e);if(a!==null){if(s===0||o%s!==0)throw new re(r);i[a]=o/s}else if(o!==s)throw new re(r);return i}computeOutputShape(e){let n=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return oe(()=>{this.invokeCallHook(e,n);const r=Wt(e),i=r.shape,s=i.slice(0,1).concat(this.fixUnknownDimension(i.slice(1),this.targetShape));return r.reshape(s)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}d6.className="Reshape";Oe(d6);class h6 extends mn{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=Bl(1,e.dims.length+1);if(!Tn(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new li({ndim:this.dims.length+1})]}computeOutputShape(e){e=Gn(e);const n=e.slice();return this.dims.forEach((r,i)=>{n[i+1]=e[r]}),n}call(e,n){return $n(Wt(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}h6.className="Permute";Oe(h6);class p6 extends mn{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const r=Wt(e),i=-1;return Rx(kp(r,this.maskValue),i)}call(e,n){return oe(()=>{this.invokeCallHook(e,n);const r=Wt(e),i=-1,s=!0,a=Rx(kp(r,this.maskValue),i,s);return r.mul(a.asType(r.dtype))})}}p6.className="Masking";Oe(p6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class m6 extends mn{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(tr(e.inputLength))}this.inputDim=e.inputDim,oi(this.inputDim,"inputDim"),this.outputDim=e.outputDim,oi(this.outputDim,"outputDim"),this.embeddingsInitializer=or(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=lr(e.embeddingsRegularizer),this.activityRegularizer=lr(e.activityRegularizer),this.embeddingsConstraint=Jr(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return oe(()=>this.maskZero?(e=Wt(e),kp(e,fn(e))):null)}computeOutputShape(e){if(e=Gn(e),this.inputLength==null)return[...e,this.outputDim];const n=tr(this.inputLength);if(n.length!==e.length-1)throw new re(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let i=0;i<n.length;++i){const s=n[i],a=e[i+1];if(s!=null&&a!=null&&s!==a)throw new re(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);s==null&&(n[r]=a),r++}}return[e[0],...n,this.outputDim]}call(e,n){return oe(()=>{this.invokeCallHook(e,n);let r=Wt(e);return r.dtype!=="int32"&&(r=t2(r,"int32")),hre(this.embeddings.read(),r.as1D()).reshape(Gn(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:hr(this.embeddingsInitializer),embeddingsRegularizer:Wn(this.embeddingsRegularizer),activityRegularizer:Wn(this.activityRegularizer),embeddingsConstraint:Zr(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}m6.className="Embedding";Oe(m6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class fm extends mn{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new zt}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const r=e.slice(0,e.length-n.length);for(let i=0;i<n.length;++i){const s=e[e.length-n.length+i],a=n[i];if(s==null||a==null||s<0||a<0)r.push(null);else if(s===1)r.push(a);else if(a===1)r.push(s);else{if(s!==a)throw new re("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));r.push(s)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[Gn(e)]),e=e,e.length<2)throw new re(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const s of e)s!=null&&s[0]!==null&&n.push(s[0]);if(n=dd(n),n.length>1)throw new re(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let s=1;s<e.length;++s){const a=e[s]==null?null:e[s].slice(1);r=this.computeElementwiseOpOutputShape(r,a)}const i=e.map(s=>s.length);e.indexOf(null)===-1&&dd(i).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return oe(()=>{if(e=e,this.reshapeRequired){const r=[],i=e.map(s=>s.rank);if(i.indexOf(null)===-1){const s=Cd(i);for(let a of e){const o=a.rank;for(let l=0;l<s-o;++l)a=n2(a,1);r.push(a)}return this.mergeFunction(r)}else{let s=!1;for(const l of e){const u=l.rank;if(u==null){const c=l.shape,f=c[0],d=c.slice(1).concat([f]);let h=l.reshape([f].concat(hd(c.slice(1))));h=$n(h,[1,0]),h=h.reshape(d),r.push(h),s=!0}else if(u>1){const c=Bl(1,u).concat([0]);r.push($n(l,c)),s=!0}else r.push(l)}let a=this.mergeFunction(r);const o=a.rank;if(s){if(o==null){const l=a.shape,u=l.length,c=l[u-1],f=[c].concat(l.slice(0,l.length-1));a=$n(a.reshape([-1,c]),[1,0]).reshape(f)}else if(o>1){const l=[o-1].concat(Bl(0,o-1));a=$n(a,l)}}return a}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let i=1;i<e.length;++i){const s=e[i]==null?null:e[i].slice(1);n=this.computeElementwiseOpOutputShape(n,s)}let r=[];for(const i of e)i!=null&&i[0]!==null&&r.push(i[0]);return r=dd(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(e,n){return oe(()=>{if(n==null)return null;if(!Array.isArray(n))throw new re("`mask` should be an Array");if(!Array.isArray(e))throw new re("`inputs` should be an Array");if(n.length!==e.length)throw new re(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(i=>i==null))return null;n=n.map(i=>i==null?i:sa(i,0));let r=n[0];for(let i=1;i<n.length-1;++i)r=Qo(r,n[i]);return r})}}class g6 extends fm{constructor(e){super(e)}mergeFunction(e){return oe(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=We(n,e[r]);return n})}}g6.className="Add";Oe(g6);class v6 extends fm{constructor(e){super(e)}mergeFunction(e){return oe(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=se(n,e[r]);return n})}}v6.className="Multiply";Oe(v6);class y6 extends fm{constructor(e){super(e)}mergeFunction(e){return oe(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=We(n,e[r]);return se(1/e.length,n)})}}y6.className="Average";Oe(y6);class b6 extends fm{constructor(e){super(e)}mergeFunction(e){return oe(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=Xu(n,e[r]);return n})}}b6.className="Maximum";Oe(b6);class x6 extends fm{constructor(e){super(e)}mergeFunction(e){return oe(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=xy(n,e[r]);return n})}}x6.className="Minimum";Oe(x6);class w6 extends fm{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new re("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const i of e)if(i!=null){n=!1;break}if(n)return;const r=[];for(let i=0;i<e.length;++i){const s=e[i].slice();s.splice(this.axis,1);let a=!1;for(const o of r)if(Tn(o,s)){a=!0;break}a||r.push(s)}if(r.length>1)throw new re("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return oe(()=>Mz(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new re("A `Concatenate` layer should be called on a list of inputs.");const n=e,r=n[0].slice(),i=this.axis<0?r.length+this.axis:this.axis;for(const s of n.slice(1)){if(r[i]==null||s[i]==null){r[i]=null;break}r[i]+=s[i]}return r}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new re("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new re("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new re(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return oe(()=>{let r=!0;if(n.forEach(a=>{if(a!=null){r=!1;return}}),r)return null;const i=[];for(let a=0;a<e.length;++a)n[a]==null?i.push(Sa(e[a]).asType("bool")):n[a].rank<e[a].rank?i.push(sa(n[a],-1)):i.push(n[a]);const s=Er(i,this.axis);return PM(s,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}w6.className="Concatenate";Oe(w6);function Ob(t,e){for(;t<0;)t+=e;return t}function cBe(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new zt("batchDot is not implemented for tensors of 4D or higher rank yet");if(R(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),R(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new zt("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,i=e.shape.length;n==null&&(n=[r-1,i-2]);const s=n;return oe(()=>{let a;if(r>i){a=r-i;const l=[];for(let u=0;u<a;++u)l.push(1);e=e.reshape(e.shape.concat(l))}else if(i>r){a=i-r;const l=[];for(let u=0;u<a;++u)l.push(1);t=t.reshape(t.shape.concat(l))}else a=0;let o;if(t.shape.length===2&&e.shape.length===2)s[0]===s[1]?o=t.mul(e).sum(s[0]):o=t.transpose([1,0]).mul(e).sum(s[1]);else{const l=s[0]!==t.shape.length-1,u=s[1]===e.shape.length-1;o=t.matMul(e,l,u)}if(a>0){let l;r>i?l=r+i-3:l=r-1;const u=[];for(let c=l;c<l+a;++c)u.push(c);o=o.squeeze(u)}return o.shape.length===1&&(o=o.expandDims(1)),o})}class _6 extends fm{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){R(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],r=e[1];if(n.length>3||r.length>3)throw new zt("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(n,r);if(n[i[0]]!==r[i[1]])throw new re(`Dimension incompatibility: ${n[i[0]]} !== ${r[i[1]]}`)}mergeFunction(e){if(e.length!==2)throw new re(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1],i;return Array.isArray(this.axes)?i=this.axes.map((s,a)=>Ob(s,e[a].shape.length)):i=[Ob(this.axes,n.shape.length),Ob(this.axes,r.shape.length)],this.normalize&&(n=mT(n,i[0]),r=mT(r,i[1])),cBe(n,r,i)}interpretAxes(e,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[Ob(this.axes,e.length),Ob(this.axes,n.length)],r}computeOutputShape(e){R(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new zt("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(n,r);n.splice(i[0],1),r.splice(i[1],1),r.splice(0,1);const s=n.concat(r);return s.length===1&&s.push(1),s}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}}_6.className="Dot";Oe(_6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class S6 extends mn{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return oe(()=>{this.invokeCallHook(e,n);const r=Wt(e);return i2(()=>E3(r.shape,0,this.stddev).add(r),()=>r,n.training||!1)})}}S6.className="GaussianNoise";Oe(S6);class C6 extends mn{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return oe(()=>{this.invokeCallHook(e,n);const r=Wt(e);return this.rate>0&&this.rate<1?i2(()=>{const s=Math.sqrt(this.rate/(1-this.rate));return r.mul(E3(r.shape,1,s))},()=>r,n.training||!1):r})}}C6.className="GaussianDropout";Oe(C6);class E6 extends mn{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||Wt(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return oe(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return i2(()=>{const s=Wt(e),a=1.6732632423543772,o=1.0507009873554805,l=-a*o;let u=Gd(_y(r),this.rate);u=t2(u,"float32");const c=((1-this.rate)*(1+this.rate*l**2))**-.5,f=-c*l*this.rate;return s.mul(u).add(u.add(-1).mul(l)).mul(c).add(f)},()=>Wt(e),n.training||!1)}return e})}}E6.className="AlphaDropout";Oe(E6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Vx(t,e,n,r,i,s=.001){let a;if(t.rank===2)a=fne(t,e,n,r,i,s);else if(t.rank===3)a=dne(t,e,n,r,i,s);else if(t.rank===4)a=hne(t,e,n,r,i,s);else throw new zt(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return a}function fBe(t,e,n,r,i=.001){return oe(()=>{const s=YM(t,r),a=s.mean,o=s.variance;return[Vx(t,a,o,n,e,i),a,o]})}function dBe(t,e,n,r,i=.001){return oe(()=>{const s=YM(t,r),a=s.mean,o=s.variance,l=[];for(const p of Bl(0,t.rank))r.indexOf(p)!==-1?l.push(1):l.push(t.shape[p]);const u=a.reshape(l),c=o.reshape(l),f=e==null?null:e.reshape(l),d=n==null?null:n.reshape(l);return[Vx(t,u,c,d,f,i),a,o]})}function hBe(t,e,n,r,i=.001){return Tn(r.slice().sort(),Bl(0,t.rank-1))?fBe(t,e,n,r,i):dBe(t,e,n,r,i)}class T6 extends mn{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=or(e.betaInitializer||"zeros"),this.gammaInitializer=or(e.gammaInitializer||"ones"),this.movingMeanInitializer=or(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=or(e.movingVarianceInitializer||"ones"),this.betaConstraint=Jr(e.betaConstraint),this.gammaConstraint=Jr(e.gammaConstraint),this.betaRegularizer=lr(e.betaRegularizer),this.gammaRegularizer=lr(e.gammaRegularizer)}build(e){e=Gn(e);const n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(r==null)throw new re(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new li({ndim:e.length,axes:{[n]:r}})];const i=[r];this.scale&&(this.gamma=this.addWeight("gamma",i,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",i,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",i,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",i,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return oe(()=>{const r=n.training==null?!1:n.training,i=Wt(e),s=i.shape,a=s.length,o=Bl(0,a),l=this.axis>=0?this.axis:this.axis+a;o.splice(l,1);const u=Ap(1,a);u[l]=s[l];const c=o.slice();c.sort();const f=!Tn(c,Bl(0,a).slice(0,a-1)),d=()=>{if(f){const y=this.movingMean.read().reshape(u),b=this.movingVariance.read().reshape(u),x=this.center?this.beta.read().reshape(u):null,w=this.scale?this.gamma.read().reshape(u):null;return Vx(i,y,b,x,w,this.epsilon)}else return Vx(i,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return d();const[h,p,m]=hBe(i,this.gamma.read(),this.beta.read(),o,this.epsilon),g=(y,b,x)=>{oe(()=>{const w=1-x,S=y.read(),C=S.sub(b).mul(w);y.write(S.sub(C))})};return(()=>{g(this.movingMean,p,this.momentum),g(this.movingVariance,m,this.momentum)})(),h})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:hr(this.betaInitializer),gammaInitializer:hr(this.gammaInitializer),movingMeanInitializer:hr(this.movingMeanInitializer),movingVarianceInitializer:hr(this.movingVarianceInitializer),betaRegularizer:Wn(this.betaRegularizer),gammaRegularizer:Wn(this.gammaRegularizer),betaConstraint:Zr(this.betaConstraint),gammaConstraint:Zr(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}T6.className="BatchNormalization";Oe(T6);class k6 extends mn{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=or(e.betaInitializer||"zeros"),this.gammaInitializer=or(e.gammaInitializer||"ones"),this.betaRegularizer=lr(e.betaRegularizer),this.gammaRegularizer=lr(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=Gn(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let s=0;s<this.axis.length;++s)this.axis[s]<0&&(this.axis[s]+=n);for(const s of this.axis)if(s<0||s>=n)throw new Error(`Invalid axis: ${s}`);if(this.axis.length!==dd(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(s=>e[s]),i=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,i):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,i):this.beta=null,this.built=!0}call(e,n){const r=Wt(e),i=r.shape,s=i.length;return oe(()=>{let{mean:o,variance:l}=YM(r,this.axis,!0);const u=Ap(1,s);for(const m of this.axis)u[m]=i[m];const c=m=>m!=null&&m.shape.length!==s&&this.axis!==[s-1]?m.reshape(u):m;let f=c(this.gamma.read()),d=c(this.beta.read());const h=[],p=[];for(let m=0;m<s;++m)this.axis.indexOf(m)!==-1?(h.push(i[m]),p.push(1)):(h.push(1),p.push(i[m]));return o=o.tile(h),l=l.tile(h),f=f.tile(p),d=d.tile(p),Vx(r,o,l,d,f,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:hr(this.betaInitializer),gammaInitializer:hr(this.gammaInitializer),betaRegularizer:Wn(this.betaRegularizer),gammaRegularizer:Wn(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}k6.className="LayerNormalization";Oe(k6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function pBe(t,e,n){return oe(()=>{if(t.rank!==4)throw new re(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new re("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=zl()),n!=="channelsLast"&&n!=="channelsFirst")throw new re(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],cf(t,r)})}class A6 extends mn{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?zl():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new re(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,r;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new re(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new re(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[n,r]}this.inputSpec=[new li({ndim:4})]}computeOutputShape(e){e=Gn(e);let n,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],n,r]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],n,r,e[3]])}call(e,n){return oe(()=>pBe(Wt(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}A6.className="ZeroPadding2D";Oe(A6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function H3(t,e,n,r,i,s){return oe(()=>{Dr(i),lre(s),co(r),n==null&&(n=[1,1]),r==null&&(r="valid"),i==null&&(i=zl()),s==null&&(s="max"),t=Zz(t,i);let a;const o=r==="same"?"same":"valid";return s==="max"?a=W_(t,e,n,o):a=L_(t,e,n,o),i==="channelsFirst"&&(a=$n(a,[0,3,1,2])),a})}function nie(t,e,n,r,i,s){return oe(()=>{Dr(i),lre(s),co(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),i==null&&(i=zl()),s==null&&(s="max"),t=Zre(t,i);let a;const o=r==="same"?"same":"valid";return s==="max"?a=U4(t,e,n,o):a=k4(t,e,n,o),i==="channelsFirst"&&(a=$n(a,[0,4,1,2,3])),a})}class rie extends mn{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new re(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(oi(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new re(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);oi(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,co(this.padding),this.inputSpec=[new li({ndim:3})]}computeOutputShape(e){e=Gn(e);const n=Rl(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return oe(()=>{this.invokeCallHook(e,n),e=n2(Wt(e),2);const r=this.poolingFunction(Wt(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Sd(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class M6 extends rie{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return Dr(s),co(i),H3(e,n,r,i,s,"max")}}M6.className="MaxPooling1D";Oe(M6);class N6 extends rie{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return Dr(s),co(i),H3(e,n,r,i,s,"avg")}}N6.className="AveragePooling1D";Oe(N6);class iie extends mn{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new re(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];oi(this.poolSize,"poolSize"),oi(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Dr(this.dataFormat),co(this.padding),this.inputSpec=[new li({ndim:4})]}computeOutputShape(e){e=Gn(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=Rl(n,this.poolSize[0],this.padding,this.strides[0]),r=Rl(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r]:[e[0],n,r,e[3]]}call(e,n){return oe(()=>(this.invokeCallHook(e,n),this.poolingFunction(Wt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class $6 extends iie{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return Dr(s),co(i),H3(e,n,r,i,s,"max")}}$6.className="MaxPooling2D";Oe($6);class I6 extends iie{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return Dr(s),co(i),H3(e,n,r,i,s,"avg")}}I6.className="AveragePooling2D";Oe(I6);class sie extends mn{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new re(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];oi(this.poolSize,"poolSize"),oi(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Dr(this.dataFormat),co(this.padding),this.inputSpec=[new li({ndim:5})]}computeOutputShape(e){e=Gn(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],i=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=Rl(n,this.poolSize[0],this.padding,this.strides[0]),r=Rl(r,this.poolSize[1],this.padding,this.strides[1]),i=Rl(i,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r,i]:[e[0],n,r,i,e[4]]}call(e,n){return oe(()=>(this.invokeCallHook(e,n),this.poolingFunction(Wt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class D6 extends sie{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return Dr(s),co(i),nie(e,n,r,i,s,"max")}}D6.className="MaxPooling3D";Oe(D6);class R6 extends sie{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return Dr(s),co(i),nie(e,n,r,i,s,"avg")}}R6.className="AveragePooling3D";Oe(R6);class aie extends mn{constructor(e){super(e),this.inputSpec=[new li({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new zt}}class O6 extends aie{constructor(e){super(e||{})}call(e,n){return oe(()=>{const r=Wt(e);return dr(r,1)})}}O6.className="GlobalAveragePooling1D";Oe(O6);class F6 extends aie{constructor(e){super(e||{})}call(e,n){return oe(()=>{const r=Wt(e);return ro(r,1)})}}F6.className="GlobalMaxPooling1D";Oe(F6);class oie extends mn{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Dr(this.dataFormat),this.inputSpec=[new li({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new zt}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class L6 extends oie{call(e,n){return oe(()=>{const r=Wt(e);return this.dataFormat==="channelsLast"?dr(r,[1,2]):dr(r,[2,3])})}}L6.className="GlobalAveragePooling2D";Oe(L6);class P6 extends oie{call(e,n){return oe(()=>{const r=Wt(e);return this.dataFormat==="channelsLast"?ro(r,[1,2]):ro(r,[2,3])})}}P6.className="GlobalMaxPooling2D";Oe(P6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class lie extends mn{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,r={}){const i=n.layer,s=Dl(i,r);delete n.layer;const a={layer:s};return Object.assign(a,n),new e(a)}}class z6 extends lie{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=Gn(e),e.length<3)throw new re(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=Gn(e);const n=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(n),i=e[1];return[r[0],i].concat(r.slice(1))}call(e,n){return oe(()=>(e=Wt(e),eie((a,o)=>[Wt(this.layer.call(a,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}z6.className="TimeDistributed";Oe(z6);function mBe(t){um(wze,"BidirectionalMergeMode",t)}const gBe="concat";class B6 extends lie{constructor(e){super(e);const n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=Dl(r),n.goBackwards=n.goBackwards!==!0;const i={};if(i.className=e.layer.getClassName(),i.config=n,this.backwardLayer=Dl(i),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?gBe:e.mergeMode,mBe(this.mergeMode),e.weights)throw new zt("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,r=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,i,s;return this.returnState&&(s=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,i=[r]):this.mergeMode==null?i=[r,r.slice()]:i=[r],this.returnState?this.mergeMode==null?i.concat(s).concat(s.slice()):[r].concat(s).concat(s.slice()):Ms(i)}apply(e,n){let r=n==null?null:n.initialState,i=n==null?null:n.constants;n==null&&(n={});const s=Qre(e,r,i,this.numConstants);if(e=s.inputs,r=s.initialState,i=s.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&i==null)return super.apply(e,n);const a=[],o=[];if(r!=null){const u=r.length;if(u%2>0)throw new re("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,a.push(...r);const c=r.map(f=>new li({shape:f.shape}));this.forwardLayer.stateSpec=c.slice(0,u/2),this.backwardLayer.stateSpec=c.slice(u/2),o.push(...c)}if(i!=null)throw new zt("Support for constants in Bidirectional layers is not implemented yet.");const l=a[0]instanceof Tl;for(const u of a)if(u instanceof Tl!==l)throw new re("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const u=[e].concat(a),c=this.inputSpec.concat(o),f=this.inputSpec;this.inputSpec=c;const d=super.apply(u,n);return this.inputSpec=f,d}else return super.apply(e,n)}call(e,n){return oe(()=>{const r=n.initialState;let i,s;if(r==null)i=this.forwardLayer.call(e,n),s=this.backwardLayer.call(e,n);else{const l=r.slice(0,r.length/2),u=r.slice(r.length/2);i=this.forwardLayer.call(e,Object.assign(n,{initialState:l})),s=this.backwardLayer.call(e,Object.assign(n,{initialState:u}))}let a;this.returnState&&(Array.isArray(i)&&(a=i.slice(1).concat(s.slice(1))),i=i[0],s=s[0]),this.returnSequences&&(s=Ca(s,1));let o;return this.mergeMode==="concat"?o=Mz([i,s]):this.mergeMode==="sum"?o=We(i,s):this.mergeMode==="ave"?o=se(.5,We(i,s)):this.mergeMode==="mul"?o=se(i,s):this.mergeMode==null&&(o=[i,s]),this.returnState?this.mergeMode==null?o.concat(a):[o].concat(a):o})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){sp(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),sp(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const s=this.forwardLayer.states.map(a=>null);return Array.isArray(r)?r.concat(s).concat(s):[r].concat(s).concat(s)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const r=Dl(n.layer);if(delete n.layer,n.numConstants!=null)throw new zt("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const i=n;return i.layer=r,new e(i)}}B6.className="Bidirectional";Oe(B6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function vBe(t){return new Ty(t)}function yBe(t){return new Xz(t)}function bBe(t){return new Hz(t)}function xBe(t){return new jz(t)}function wBe(t){return new qz(t)}function _Be(t){return new Kz(t)}function SBe(t){return new Yz(t)}function CBe(t){return new o2(t)}function EBe(t){return new My(t)}function TBe(t){return new Jz(t)}function kBe(t){return new a2(t)}function ABe(t){return new Qz(t)}function MBe(t){return new e6(t)}function NBe(t){return new t6(t)}function $Be(t){return new n6(t)}function IBe(t){return new c6(t)}function uie(t){return new l6(t)}function DBe(t){return new G3(t)}function RBe(t){return new o6(t)}function OBe(t){return new u6(t)}function FBe(t){return new f6(t)}function LBe(t){return new d6(t)}function PBe(t){return new h6(t)}function zBe(t){return new m6(t)}function BBe(t){return new g6(t)}function UBe(t){return new y6(t)}function VBe(t){return new w6(t)}function WBe(t){return new b6(t)}function GBe(t){return new x6(t)}function HBe(t){return new v6(t)}function jBe(t){return new _6(t)}function qBe(t){return new T6(t)}function XBe(t){return new k6(t)}function YBe(t){return new A6(t)}function U6(t){return new N6(t)}function KBe(t){return U6(t)}function ZBe(t){return U6(t)}function V6(t){return new I6(t)}function JBe(t){return V6(t)}function QBe(t){return V6(t)}function W6(t){return new R6(t)}function e8e(t){return W6(t)}function t8e(t){return W6(t)}function n8e(t){return new O6(t)}function r8e(t){return new L6(t)}function cie(t){return new F6(t)}function fie(t){return new P6(t)}function die(t){return new M6(t)}function hie(t){return new $6(t)}function i8e(t){return new D6(t)}function s8e(t){return new i6(t)}function a8e(t){return new U3(t)}function o8e(t){return new s6(t)}function l8e(t){return new u2(t)}function u8e(t){return new r6(t)}function c8e(t){return new B3(t)}function f8e(t){return new a6(t)}function d8e(t){return new W3(t)}function h8e(t){return new Gl(t)}function p8e(t){return new V3(t)}function m8e(t){return new B6(t)}function g8e(t){return new z6(t)}const v8e=cie,y8e=fie,b8e=die,x8e=hie;function w8e(t){return new S6(t)}function _8e(t){return new C6(t)}function S8e(t){return new E6(t)}function C8e(t){return new p6(t)}const E8e=Object.freeze(Object.defineProperty({__proto__:null,Layer:mn,RNN:Gl,RNNCell:l2,activation:IBe,add:BBe,alphaDropout:S8e,average:UBe,averagePooling1d:U6,averagePooling2d:V6,averagePooling3d:W6,avgPool1d:KBe,avgPool2d:JBe,avgPool3d:e8e,avgPooling1d:ZBe,avgPooling2d:QBe,avgPooling3d:t8e,batchNormalization:qBe,bidirectional:m8e,concatenate:VBe,conv1d:CBe,conv2d:EBe,conv2dTranspose:TBe,conv3d:kBe,convLstm2d:f8e,convLstm2dCell:d8e,cropping2D:MBe,dense:uie,depthwiseConv2d:$Be,dot:jBe,dropout:DBe,elu:yBe,embedding:zBe,flatten:OBe,gaussianDropout:_8e,gaussianNoise:w8e,globalAveragePooling1d:n8e,globalAveragePooling2d:r8e,globalMaxPool1d:v8e,globalMaxPool2d:y8e,globalMaxPooling1d:cie,globalMaxPooling2d:fie,gru:s8e,gruCell:a8e,input:Lre,inputLayer:vBe,layerNormalization:XBe,leakyReLU:xBe,lstm:o8e,lstmCell:l8e,masking:C8e,maxPool1d:b8e,maxPool2d:x8e,maxPooling1d:die,maxPooling2d:hie,maxPooling3d:i8e,maximum:WBe,minimum:GBe,multiply:HBe,permute:PBe,prelu:wBe,reLU:bBe,repeatVector:FBe,reshape:LBe,rnn:h8e,separableConv2d:ABe,simpleRNN:u8e,simpleRNNCell:c8e,softmax:_Be,spatialDropout1d:RBe,stackedRNNCells:p8e,thresholdedReLU:SBe,timeDistributed:g8e,upSampling2d:NBe,zeroPadding2d:YBe},Symbol.toStringTag,{value:"Module"}));function T8e(t,e){return zz(t,e)}function k8e(t,e){return kre(t,e)}function A8e(t,e){return Are(t,e)}function M8e(t,e){return Bz(t,e)}function N8e(t,e){return Uz(t,e)}function $8e(t,e){return Tre(t,e)}function I8e(t,e){return v6e(t,e)}function D8e(t,e){return Pz(t,e)}function R8e(t,e){return O3(t,e)}function O8e(t,e){return ky(t,e)}function F8e(t,e){return ky(t,e)}function L8e(t,e){return ky(t,e)}function P8e(t,e){return cm(t,e)}function z8e(t,e){return cm(t,e)}function B8e(t,e){return cm(t,e)}const U8e=Object.freeze(Object.defineProperty({__proto__:null,MAPE:F8e,MSE:z8e,binaryAccuracy:T8e,binaryCrossentropy:k8e,categoricalAccuracy:M8e,categoricalCrossentropy:N8e,cosineProximity:D8e,mape:L8e,meanAbsoluteError:R8e,meanAbsolutePercentageError:O8e,meanSquaredError:P8e,mse:B8e,precision:$8e,recall:I8e,sparseCategoricalAccuracy:A8e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const V8e=Object.freeze(Object.defineProperty({__proto__:null,modelFromJSON:Z6e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function W8e(t){return new s2(t)}function G8e(t){return iBe(t)}function H8e(t){return sBe(t)}const j8e=Object.freeze(Object.defineProperty({__proto__:null,l1:G8e,l1l2:W8e,l2:H8e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class pie extends T0{constructor(){super(...arguments),this.model=null}setModel(e){if(!(e instanceof Bc))throw new Error("model must be a LayersModel, not some other Container");this.model=e}}function oC(t,e){return t<e}function lj(t,e){return t>e}class mie extends pie{constructor(e){if(super(),e==null&&(e={}),e.restoreBestWeights)throw new zt("restoreBestWeights = True is not implemented in EarlyStopping yet.");this.monitor=e.monitor||"val_loss",this.minDelta=Math.abs(e.minDelta||0),this.patience=e.patience||0,this.verbose=e.verbose||0,this.mode=e.mode||"auto",this.baseline=e.baseline,["auto","min","max"].indexOf(this.mode)===-1&&(console.warn(`EarlyStopping mode '${this.mode}' is invalid. Falling back to mode 'auto'.`),this.mode="auto"),this.mode==="min"?this.monitorFunc=oC:this.mode==="max"?this.monitorFunc=lj:this.monitor.indexOf("acc")!==-1?this.monitorFunc=lj:this.monitorFunc=oC,this.monitorFunc===oC&&(this.minDelta*=-1)}async onTrainBegin(e){this.wait=0,this.stoppedEpoch=0,this.baseline!=null?this.best=this.baseline:this.best=this.monitorFunc===oC?1/0:-1/0}async onEpochEnd(e,n){await Df(n);const r=this.getMonitorValue(n);r!=null&&(this.monitorFunc(r-this.minDelta,this.best)?(this.best=r,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=e,this.model.stopTraining=!0)))}async onTrainEnd(e){this.stoppedEpoch>0&&this.verbose&&console.log(`Epoch ${this.stoppedEpoch}: early stopping.`)}getMonitorValue(e){e==null&&(e={});const n=e[this.monitor];return n==null&&console.warn(`Metric for EarlyStopping ${this.monitor} is not available. Available metrics are: ${Object.keys(e)}`),n}}function q8e(t){return new mie(t)}const X8e={earlyStopping:q8e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var vl;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF"})(vl||(vl={}));var uj;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(uj||(uj={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G6={};function Y8e(t,e){const n={tfOpName:t,category:"custom",inputs:[],attrs:[],customExecutor:e};G6[t]=n}function gie(t){return G6[t]}function K8e(t){delete G6[t]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I(t,e,n,r,i){const s=e.inputParams[t];if(s&&s.inputIndexStart!==void 0){const o=s.inputIndexStart,l=s.inputIndexEnd===0?void 0:s.inputIndexEnd===void 0?o+1:s.inputIndexEnd;if(s.type==="tensor")return Ds(e.inputNames[s.inputIndexStart],n,r,i);if(s.type==="tensors")return e.inputNames.slice(o,l).map(d=>Ds(d,n,r,i));const u=Ds(e.inputNames.slice(o)[0],n,r,i),c=u.dataSync();return s.type==="number"?c[0]:no(u.shape,c)}const a=e.attrParams[t];return a&&a.value}function Ds(t,e,n,r){const[i,s]=ta(t);if(r!=null){const o=r.getHashTableHandleByName(i);if(o!=null)return o}const a=n.currentContextIds.find(o=>!!e[xT(i,o)]);return a!==void 0?e[xT(i,a)][s]:void 0}function Z8e(t,e,n){return e[xT(t,n.currentContextId)]}function Sc(t,e){const[n,r]=ta(t);return[xT(n,e&&e.currentContextId),r]}function xT(t,e){return e?`${t}-${e}`:t}function ta(t){const e=t.split(":");return e.length===1?[t,0]:[e[0],Number(e[e.length-1])]}function bE(t,e,n){let r=I("pad",t,e,n);if(r==="explicit"){r=I("explicitPaddings",t,e,n);const i=[[0,0],[0,0],[0,0],[0,0]];for(let s=0;s<4;s++)i[s][0]=r[s*2],i[s][1]=r[s*2+1];return i}return r}function Cc(t){return t.kept?t:ud(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J8e=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Q8e=Object.freeze(Object.defineProperty({__proto__:null,json:J8e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e7e=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],t7e=Object.freeze(Object.defineProperty({__proto__:null,json:e7e},Symbol.toStringTag,{value:"Module"})),n7e=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]}],r7e=Object.freeze(Object.defineProperty({__proto__:null,json:n7e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i7e=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number"}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],s7e=Object.freeze(Object.defineProperty({__proto__:null,json:i7e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a7e=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],o7e=Object.freeze(Object.defineProperty({__proto__:null,json:a7e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l7e=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],u7e=Object.freeze(Object.defineProperty({__proto__:null,json:l7e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c7e=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],f7e=Object.freeze(Object.defineProperty({__proto__:null,json:c7e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d7e=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],h7e=Object.freeze(Object.defineProperty({__proto__:null,json:d7e},Symbol.toStringTag,{value:"Module"})),p7e=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]}],m7e=Object.freeze(Object.defineProperty({__proto__:null,json:p7e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g7e=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}],v7e=Object.freeze(Object.defineProperty({__proto__:null,json:g7e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y7e=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],b7e=Object.freeze(Object.defineProperty({__proto__:null,json:y7e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x7e=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],w7e=Object.freeze(Object.defineProperty({__proto__:null,json:x7e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _7e=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],S7e=Object.freeze(Object.defineProperty({__proto__:null,json:_7e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C7e=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],E7e=Object.freeze(Object.defineProperty({__proto__:null,json:C7e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T7e=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],k7e=Object.freeze(Object.defineProperty({__proto__:null,json:T7e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A7e=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],M7e=Object.freeze(Object.defineProperty({__proto__:null,json:A7e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N7e=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]}],$7e=Object.freeze(Object.defineProperty({__proto__:null,json:N7e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cj{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[Q8e,t7e,r7e,s7e,o7e,u7e,f7e,b7e,v7e,h7e,w7e,S7e,E7e,k7e,M7e,$7e,m7e],n=[].concat(...e.map(r=>r.json));this.opMappers=n.reduce((r,i)=>(r[i.tfOpName]=i,r),{})}transformGraph(e,n={}){const r=e.node,i=[],s=[],a=[],o=r.reduce((m,g)=>(m[g.name]=this.mapNode(g),g.op.startsWith("Placeholder")?i.push(m[g.name]):g.op==="Const"?s.push(m[g.name]):(g.input==null||g.input.length===0)&&a.push(m[g.name]),m),{});let l=[];const u=[];let c={},f={};n!=null&&(c=this.mapSignatureEntries(n.inputs),f=this.mapSignatureEntries(n.outputs));const d=Object.keys(o);d.forEach(m=>{const g=o[m];g.inputNames.forEach(v=>{const[y]=Sc(v);g.inputs.push(o[y]),o[y].children.push(g)})}),Object.keys(f).length===0?d.forEach(m=>{const g=o[m];g.children.length===0&&u.push(g)}):Object.keys(f).forEach(m=>{const[g]=Sc(m),v=o[g];v!=null&&(v.signatureKey=f[m],u.push(v))}),Object.keys(c).length>0?Object.keys(c).forEach(m=>{const[g]=Sc(m),v=o[g];v&&(v.signatureKey=c[m],l.push(v))}):l=i;let h={};e.library!=null&&e.library.function!=null&&(h=e.library.function.reduce((m,g)=>(m[g.signature.name]=this.mapFunction(g),m),{}));const p={nodes:o,inputs:l,outputs:u,weights:s,placeholders:i,signature:n,functions:h};return a.length>0&&(p.initNodes=a),p}mapSignatureEntries(e){return Object.keys(e||{}).reduce((n,r)=>(n[e[r].name]=r,n),{})}mapNode(e){const n=gie(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const r={name:e.name,op:e.op,category:n.category,inputNames:(e.input||[]).map(i=>i.startsWith("^")?i.substr(1):i),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr};return n.inputs!=null&&(r.inputParams=n.inputs.reduce((i,s)=>(i[s.name]={type:s.type,inputIndexStart:s.start,inputIndexEnd:s.end},i),{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce((i,s)=>{const a=s.type;let o;switch(s.type){case"string":o=LF(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=LF(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"string[]":o=GF(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=GF(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"number":o=zF(e.attr,s.tfName,s.defaultValue||0),o===void 0&&s.tfDeprecatedName&&(o=zF(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"number[]":o=WF(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=WF(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"bool":o=PF(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=PF(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"bool[]":o=jF(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=jF(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"shape":o=VF(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=VF(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"shape[]":o=HF(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=HF(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"dtype":o=BF(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=BF(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"dtype[]":o=UF(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=UF(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"func":o=fj(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=fj(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${s.type} for op: ${e.op}`)}return i[s.name]={value:o,type:a},i},{})),r}mapFunction(e){const n=e.nodeDef,r=[],i=[];let s={};n!=null&&(s=n.reduce((f,d)=>(f[d.name]=this.mapNode(d),d.op==="Const"&&i.push(f[d.name]),f),{}));const a=[],o=[];e.signature.inputArg.forEach(f=>{const[d]=Sc(f.name),h={name:d,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:H6(f.type),type:"dtype"}},children:[]};h.signatureKey=f.name,a.push(h),s[d]=h}),Object.keys(s).forEach(f=>{const d=s[f];d.inputNames.forEach(h=>{const[p]=Sc(h);d.inputs.push(s[p]),s[p].children.push(d)})});const u=e.ret;e.signature.outputArg.forEach(f=>{const[d,h]=Sc(u[f.name]),p=s[d];p!=null&&(p.defaultOutput=h,o.push(p))});const c=this.mapArgsToSignature(e);return{nodes:s,inputs:a,outputs:o,weights:i,placeholders:r,signature:c}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:e.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,e.ret),n),{})}}mapArgToTensorInfo(e,n){let r=e.name;return n!=null&&(r=n[r]),{name:r,dtype:e.type}}}function I7e(t){const e=Ce().global;if(typeof e.atob<"u")return e.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function vie(t,e){const n=Array.isArray(t)?String.fromCharCode.apply(null,t):I7e(t);return e?n:n.toLowerCase()}function LF(t,e,n,r=!1){const i=t[e];return i!=null?vie(i.s,r):n}function PF(t,e,n){const r=t[e];return r?r.b:n}function zF(t,e,n){const r=t[e]||{},i=r.i!=null?r.i:r.f!=null?r.f:n;return typeof i=="number"?i:parseInt(i,10)}function H6(t){switch(typeof t=="string"&&(t=vl[t]),t){case vl.DT_FLOAT:return"float32";case vl.DT_INT32:case vl.DT_INT64:case vl.DT_INT8:case vl.DT_UINT8:return"int32";case vl.DT_BOOL:return"bool";case vl.DT_DOUBLE:return"float32";case vl.DT_STRING:return"string";default:return null}}function fj(t,e,n){const r=t[e];return r&&r.func?r.func.name:n}function BF(t,e,n){const r=t[e];return r&&r.type?H6(r.type):n}function UF(t,e,n){const r=t[e];return r&&r.list&&r.list.type?r.list.type.map(i=>H6(i)):n}function yie(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function VF(t,e,n){const r=t[e];return r&&r.shape?yie(r.shape):n}function WF(t,e,n){const r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(i=>typeof i=="number"?i:parseInt(i,10)):n}function GF(t,e,n,r=!1){const i=t[e];return i&&i.list&&i.list.s?i.list.s.map(s=>vie(s,r)):n}function HF(t,e,n){const r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(i=>yie(i)):n}function jF(t,e,n){const r=t[e];return r&&r.list&&r.list.b?r.list.b:n}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class D7e{constructor(e,n,r){this.node=e,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(i=>this.getInput(i)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((i,s)=>(i[s]=this.getAttr(s),i),{}))}getInput(e){return Ds(e,this.tensorMap,this.context)}getAttr(e,n){const r=this.node.rawAttrs[e];if(r.tensor!=null)return Ds(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return zF(this.node.rawAttrs,e,n);if(r.s!=null)return LF(this.node.rawAttrs,e,n);if(r.b!=null)return PF(this.node.rawAttrs,e,n);if(r.shape!=null)return VF(this.node.rawAttrs,e,n);if(r.type!=null)return BF(this.node.rawAttrs,e,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return WF(this.node.rawAttrs,e,n);if(r.list.s!=null)return GF(this.node.rawAttrs,e,n);if(r.list.shape!=null)return HF(this.node.rawAttrs,e,n);if(r.list.b!=null)return jF(this.node.rawAttrs,e,n);if(r.list.type!=null)return UF(this.node.rawAttrs,e,n)}return n}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R7e=(t,e,n)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[We(I("a",t,e,n),I("b",t,e,n))];case"AddN":return[cne(I("tensors",t,e,n))];case"FloorMod":case"Mod":return[W4(I("a",t,e,n),I("b",t,e,n))];case"Mul":return[se(I("a",t,e,n),I("b",t,e,n))];case"RealDiv":case"Div":return[kt(I("a",t,e,n),I("b",t,e,n))];case"DivNoNan":return[D4(I("a",t,e,n),I("b",t,e,n))];case"FloorDiv":return[LM(I("a",t,e,n),I("b",t,e,n))];case"Sub":return[yt(I("a",t,e,n),I("b",t,e,n))];case"Minimum":return[xy(I("a",t,e,n),I("b",t,e,n))];case"Maximum":return[Xu(I("a",t,e,n),I("b",t,e,n))];case"Pow":return[Zc(I("a",t,e,n),I("b",t,e,n))];case"SquaredDifference":return[s3(I("a",t,e,n),I("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O7e=(t,e,n)=>{switch(t.op){case"Abs":case"ComplexAbs":return[Wr(I("x",t,e,n))];case"Acos":return[y4(I("x",t,e,n))];case"Acosh":return[b4(I("x",t,e,n))];case"Asin":return[w4(I("x",t,e,n))];case"Asinh":return[_4(I("x",t,e,n))];case"Atan":return[S4(I("x",t,e,n))];case"Atan2":return[C4(I("x",t,e,n),I("y",t,e,n))];case"Atanh":return[E4(I("x",t,e,n))];case"Ceil":return[A4(I("x",t,e,n))];case"Complex":return[wd(I("real",t,e,n),I("imag",t,e,n))];case"Cos":return[z_(I("x",t,e,n))];case"Cosh":return[UM(I("x",t,e,n))];case"Elu":return[gy(I("x",t,e,n))];case"Erf":return[R4(I("x",t,e,n))];case"Exp":return[ao(I("x",t,e,n))];case"Expm1":return[O4(I("x",t,e,n))];case"Floor":return[vy(I("x",t,e,n))];case"Log":return[_a(I("x",t,e,n))];case"Log1p":return[HM(I("x",t,e,n))];case"Imag":return[WM(I("x",t,e,n))];case"Neg":return[pr(I("x",t,e,n))];case"Reciprocal":return[H4(I("x",t,e,n))];case"Real":return[Px(I("x",t,e,n))];case"Relu":return[Ku(I("x",t,e,n))];case"Round":return[j4(I("x",t,e,n))];case"Selu":return[QM(I("x",t,e,n))];case"Sigmoid":return[Cu(I("x",t,e,n))];case"Sin":return[e3(I("x",t,e,n))];case"Sign":return[X4(I("x",t,e,n))];case"Sinh":return[t3(I("x",t,e,n))];case"Softplus":return[yy(I("x",t,e,n))];case"Sqrt":return[Ii(I("x",t,e,n))];case"Square":return[Bn(I("x",t,e,n))];case"Tanh":return[_0(I("x",t,e,n))];case"Tan":return[Z4(I("x",t,e,n))];case"ClipByValue":return[zs(I("x",t,e,n),I("clipValueMin",t,e,n),I("clipValueMax",t,e,n))];case"Relu6":return[ZM(I("x",t,e,n))];case"Rsqrt":return[JM(Ds(t.inputNames[0],e,n))];case"Prod":return[KM(I("x",t,e,n),I("axes",t,e,n))];case"LeakyRelu":return[U_(I("x",t,e,n),I("alpha",t,e,n))];case"Prelu":return[H_(I("x",t,e,n),I("alpha",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function To(t,e,n=""){if(!(typeof t=="number"||typeof e=="number")){R(t.length===e.length,()=>n+` Shapes ${t} and ${e} must match`);for(let r=0;r<t.length;r++){const i=t[r],s=e[r];R(i<0||s<0||i===s,()=>n+` Shapes ${t} and ${e} must match`)}}}function dj(t){return!(typeof t=="number"||t.some(e=>e<0))}function Fb(t,e,n){let r=qF(t,n);const i=!dj(r);if(i&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(i&&e.forEach(s=>{r=qF(s.shape,r)}),!dj(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function qF(t,e){if(typeof t=="number")return e;if(typeof e=="number")return t;if(t.length!==e.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${e}`);const n=[];for(let r=0;r<t.length;++r){const i=t[r],s=e[r];if(i>=0&&s>=0&&i!==s)throw new Error(`Incompatible shape during merge: ${t} vs. ${e}`);n[r]=i>=0?i:s}return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class F7e{constructor(e,n,r,i,s,a,o){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=i,this.identicalElementShapes=s,this.dynamicSize=a,this.clearAfterRead=o,this.tensors=[],this.closed_=!1,this.idTensor=St(0),ai(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const n=this.tensors[e];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(e){return e.map(n=>this.read(n))}write(e,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[e]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),To(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=n,ai(n),r.written=!0,this.tensors[e]=r}writeMany(e,n){if(e.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${n.length}.`);e.forEach((r,i)=>this.write(r,n[i]))}gather(e,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(e)e=e.slice(0,this.size());else{e=[];for(let i=0;i<this.size();i++)e.push(i)}if(e.length===0)return Il([],[0].concat(this.elementShape));const r=this.readMany(e);return To(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Ea(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return Il([],[0].concat(this.elementShape));const n=[];for(let i=0;i<this.size();i++)n.push(i);const r=this.readMany(n);return To(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),Er(r,0)}scatter(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,el(n,0))}split(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0;const i=e.map(l=>(r+=l,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const s=r===0?0:n.size/r,a=[];oe(()=>{n=ce(n,[1,r,s]);for(let l=0;l<e.length;++l){const c=[0,l===0?0:i[l-1],0],f=[1,e[l],s];a[l]=ce(pn(n,c,f),this.elementShape)}return a});const o=[];for(let l=0;l<e.length;l++)o[l]=l;this.writeMany(o,a)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ny{constructor(e,n,r,i=-1){this.tensors=e,this.elementShape=n,this.elementDtype=r,e!=null&&e.forEach(s=>{if(r!==s.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${s.dtype}`);To(n,s.shape,"TensorList shape mismatch: "),ai(s)}),this.idTensor=St(0),this.maxNumElements=i,ai(this.idTensor)}get id(){return this.idTensor.id}copy(){return new Ny([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);To(e,this.elementShape,"TensorList shape mismatch: ");const i=Fb(this.elementShape,this.tensors,e);return oe(()=>{const s=this.tensors.map(a=>ce(a,i));return Ea(s,0)})}popBack(e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=Fb(this.elementShape,this.tensors,e),i=this.tensors.pop();return To(i.shape,e,"TensorList shape mismatch: "),ce(i,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(To(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");ai(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);this.tensors.length=e}getItem(e,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);To(this.tensors[e].shape,n,"TensorList shape mismatch: ");const i=Fb(this.elementShape,this.tensors,n);return ce(this.tensors[e],i)}setItem(e,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);To(this.elementShape,n.shape,"TensorList shape mismatch: "),ai(n),this.tensors[e]=n}gather(e,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);To(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());const i=Fb(this.elementShape,this.tensors,r);return e.length===0?Il([],[0].concat(i)):oe(()=>{const s=e.map(a=>ce(this.tensors[a],i));return Ea(s,0)})}concat(e,n){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);To(this.elementShape,n,"TensorList shape mismatch: ");const r=Fb(this.elementShape,this.tensors,n);return this.size()===0?Il([],[0].concat(r)):oe(()=>{const i=this.tensors.map(s=>ce(s,r));return Er(i,0)})}}function L7e(t,e,n){const r=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);const i=t.shape.slice(1);To(i,e,"TensorList shape mismatch: ");const s=el(t);return new Ny(s,e,r)}function P7e(t,e,n){return new Ny([],t,e,n)}function z7e(t,e,n,r){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const i=Math.max(...e);if(r!=null&&r!==-1&&i>=r)throw new Error(`Max index must be < array size (${i}  vs. ${r})`);const s=new Ny([],n,t.dtype,r),a=el(t,0);return e.forEach((o,l)=>{s.setItem(o,a[l])}),s}function B7e(t,e,n){let r=0;const i=e.map(c=>(r+=c,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);const s=t.shape.slice(1),a=qF(s,n),o=r===0?0:t.size/r,l=oe(()=>{const c=[];t=ce(t,[1,r,o]);for(let f=0;f<e.length;++f){const h=[0,f===0?0:i[f-1],0],p=[1,e[f],o];c[f]=ce(pn(t,h,p),a)}return t.dispose(),c}),u=new Ny([],n,t.dtype,e.length);for(let c=0;c<l.length;c++)u.setItem(c,l[c]);return u}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U7e=async(t,e,n)=>{switch(t.op){case"If":case"StatelessIf":{const r=I("thenBranch",t,e,n),i=I("elseBranch",t,e,n),s=I("cond",t,e,n),a=I("args",t,e,n);return(await s.data())[0]?n.functionMap[r].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap):n.functionMap[i].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=I("body",t,e,n),i=I("cond",t,e,n),s=I("args",t,e,n),a=await n.functionMap[i].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap),o=s.map(c=>c.id);let l=await a[0].data();a.forEach(c=>{!c.kept&&o.indexOf(c.id)===-1&&c.dispose()});let u=s;for(;l[0];){const c=u;u=await n.functionMap[r].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);const f=u.map(h=>h.id);c.forEach(h=>{!h.kept&&o.indexOf(h.id)===-1&&f.indexOf(h.id)===-1&&h.dispose()});const d=await n.functionMap[i].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);l=await d[0].data(),d.forEach(h=>{!h.kept&&o.indexOf(h.id)===-1&&f.indexOf(h.id)===-1&&h.dispose()})}return u}case"LoopCond":{const r=I("pred",t,e,n);return[Cc(r)]}case"Switch":{const r=I("pred",t,e,n);let i=I("data",t,e,n);return i.kept||(i=Cc(i)),(await r.data())[0]?[void 0,i]:[i,void 0]}case"Merge":{const r=t.inputNames.find(i=>Ds(i,e,n)!==void 0);if(r){const i=Ds(r,e,n);return[Cc(i)]}return}case"Enter":{const r=I("frameName",t,e,n),i=I("tensor",t,e,n);return n.enterFrame(r),[Cc(i)]}case"Exit":{const r=I("tensor",t,e,n);return n.exitFrame(),[Cc(r)]}case"NextIteration":{const r=I("tensor",t,e,n);return n.nextIteration(),[Cc(r)]}case"TensorArrayV3":{const r=I("size",t,e,n),i=I("dtype",t,e,n),s=I("elementShape",t,e,n),a=I("dynamicSize",t,e,n),o=I("clearAfterRead",t,e,n),l=I("identicalElementShapes",t,e,n),u=I("name",t,e,n),c=new F7e(u,i,r,s,l,a,o);return n.addTensorArray(c),[c.idTensor,St(1)]}case"TensorArrayWriteV3":{const r=I("tensorArrayId",t,e,n),i=I("index",t,e,n),s=I("tensor",t,e,n),a=n.getTensorArray(r.id);return a.write(i,s),[a.idTensor]}case"TensorArrayReadV3":{const r=I("tensorArrayId",t,e,n),i=I("index",t,e,n);return[n.getTensorArray(r.id).read(i)]}case"TensorArrayGatherV3":{const r=I("tensorArrayId",t,e,n),i=I("indices",t,e,n),s=I("dtype",t,e,n);return[n.getTensorArray(r.id).gather(i,s)]}case"TensorArrayScatterV3":{const r=I("tensorArrayId",t,e,n),i=I("indices",t,e,n),s=I("tensor",t,e,n),a=n.getTensorArray(r.id);return a.scatter(i,s),[a.idTensor]}case"TensorArrayConcatV3":{const r=I("tensorArrayId",t,e,n),i=n.getTensorArray(r.id),s=I("dtype",t,e,n);return[i.concat(s)]}case"TensorArraySplitV3":{const r=I("tensorArrayId",t,e,n),i=I("tensor",t,e,n),s=I("lengths",t,e,n),a=n.getTensorArray(r.id);return a.split(s,i),[a.idTensor]}case"TensorArraySizeV3":{const r=I("tensorArrayId",t,e,n),i=n.getTensorArray(r.id);return[St(i.size(),"int32")]}case"TensorArrayCloseV3":{const r=I("tensorArrayId",t,e,n),i=n.getTensorArray(r.id);return i.clearAndClose(),[i.idTensor]}case"TensorListSetItem":{const r=I("tensorListId",t,e,n),i=I("index",t,e,n),s=I("tensor",t,e,n),a=n.getTensorList(r.id);return a.setItem(i,s),[a.idTensor]}case"TensorListGetItem":{const r=I("tensorListId",t,e,n),i=I("index",t,e,n),s=I("elementShape",t,e,n),a=I("elementDType",t,e,n);return[n.getTensorList(r.id).getItem(i,s,a)]}case"TensorListScatterV2":case"TensorListScatter":{const r=I("indices",t,e,n),i=I("tensor",t,e,n),s=I("elementShape",t,e,n),a=I("numElements",t,e,n),o=z7e(i,r,s,a);return n.addTensorList(o),[o.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=I("elementShape",t,e,n),i=I("elementDType",t,e,n);let s;t.op==="TensorListReserve"?s="numElements":s="maxNumElements";const a=I(s,t,e,n),o=P7e(r,i,a);return n.addTensorList(o),[o.idTensor]}case"TensorListGather":{const r=I("tensorListId",t,e,n),i=I("indices",t,e,n),s=I("elementShape",t,e,n),a=I("elementDType",t,e,n);return[n.getTensorList(r.id).gather(i,a,s)]}case"TensorListStack":{const r=I("tensorListId",t,e,n),i=I("elementShape",t,e,n),s=I("elementDType",t,e,n),a=I("numElements",t,e,n);return[n.getTensorList(r.id).stack(i,s,a)]}case"TensorListFromTensor":{const r=I("tensor",t,e,n),i=I("elementShape",t,e,n),s=I("elementDType",t,e,n),a=L7e(r,i,s);return n.addTensorList(a),[a.idTensor]}case"TensorListConcat":{const r=I("tensorListId",t,e,n),i=n.getTensorList(r.id),s=I("dtype",t,e,n),a=I("elementShape",t,e,n);return[i.concat(s,a)]}case"TensorListPushBack":{const r=I("tensorListId",t,e,n),i=I("tensor",t,e,n),s=n.getTensorList(r.id);return s.pushBack(i),[s.idTensor]}case"TensorListPopBack":{const r=I("tensorListId",t,e,n),i=I("elementShape",t,e,n),s=I("elementDType",t,e,n);return[n.getTensorList(r.id).popBack(i,s)]}case"TensorListSplit":{const r=I("tensor",t,e,n),i=I("elementShape",t,e,n),s=I("lengths",t,e,n),a=B7e(r,s,i);return n.addTensorList(a),[a.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hj(t,e,n){const[r,i]=I("fusedOps",t,e,n),s=r==="biasadd",a=i==="prelu",o=r==="fusedbatchnorm",l=I("numArgs",t,e,n);if(s){if(a&&l!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&l!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(o)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported.");const u=I("strides",t,e,n),c=bE(t,e,n),f=I("dataFormat",t,e,n).toUpperCase(),d=I("dilations",t,e,n),[h,p]=I("args",t,e,n),m=I("leakyreluAlpha",t,e,n);return{stride:u,pad:c,dataFormat:f,dilations:d,biasArg:h,preluArg:p,activationFunc:i,leakyreluAlpha:m}}const V7e=(t,e,n)=>{switch(t.op){case"Conv1D":{const r=I("stride",t,e,n),i=I("pad",t,e,n),s=I("dataFormat",t,e,n).toUpperCase(),a=I("dilation",t,e,n);return[zM(I("x",t,e,n),I("filter",t,e,n),r,i,s,a)]}case"Conv2D":{const r=I("strides",t,e,n),i=bE(t,e,n),s=I("dataFormat",t,e,n).toUpperCase(),a=I("dilations",t,e,n);return[Kc(I("x",t,e,n),I("filter",t,e,n),[r[1],r[2]],i,s,[a[1],a[2]])]}case"_FusedConv2D":{const{stride:r,pad:i,dataFormat:s,dilations:a,biasArg:o,preluArg:l,activationFunc:u,leakyreluAlpha:c}=hj(t,e,n);return[iz({x:I("x",t,e,n),filter:I("filter",t,e,n),strides:[r[1],r[2]],pad:i,dataFormat:s,dilations:[a[1],a[2]],bias:o,activation:u,preluActivationWeights:l,leakyreluAlpha:c})]}case"FusedDepthwiseConv2dNative":{const{stride:r,pad:i,dataFormat:s,dilations:a,biasArg:o,preluArg:l,activationFunc:u,leakyreluAlpha:c}=hj(t,e,n);return[Vne({x:I("x",t,e,n),filter:I("filter",t,e,n),strides:[r[1],r[2]],pad:i,dataFormat:s,dilations:[a[1],a[2]],bias:o,activation:u,preluActivationWeights:l,leakyreluAlpha:c})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const r=I("outputShape",t,e,n),i=I("strides",t,e,n),s=bE(t,e,n);return[BM(I("x",t,e,n),I("filter",t,e,n),r,[i[1],i[2]],s)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const r=I("strides",t,e,n),i=bE(t,e,n),s=I("dilations",t,e,n),a=I("dataFormat",t,e,n).toUpperCase();return[my(I("input",t,e,n),I("filter",t,e,n),[r[1],r[2]],i,a,[s[1],s[2]])]}case"Conv3D":{const r=I("strides",t,e,n),i=I("pad",t,e,n),s=I("dataFormat",t,e,n).toUpperCase(),a=I("dilations",t,e,n);return[N4(I("x",t,e,n),I("filter",t,e,n),[r[1],r[2],r[3]],i,s,[a[1],a[2],a[3]])]}case"AvgPool":{const r=I("strides",t,e,n),i=I("pad",t,e,n),s=I("kernelSize",t,e,n);return[L_(I("x",t,e,n),[s[1],s[2]],[r[1],r[2]],i)]}case"MaxPool":{const r=I("strides",t,e,n),i=I("pad",t,e,n),s=I("kernelSize",t,e,n);return[W_(I("x",t,e,n),[s[1],s[2]],[r[1],r[2]],i)]}case"MaxPoolWithArgmax":{const r=I("strides",t,e,n),i=I("pad",t,e,n),s=I("kernelSize",t,e,n),a=I("includeBatchInIndex",t,e,n),{result:o,indexes:l}=Mne(I("x",t,e,n),[s[1],s[2]],[r[1],r[2]],i,a);return[o,l]}case"AvgPool3D":{const r=I("strides",t,e,n),i=I("pad",t,e,n),s=I("kernelSize",t,e,n);return[k4(I("x",t,e,n),[s[1],s[2],s[3]],[r[1],r[2],r[3]],i)]}case"MaxPool3D":{const r=I("strides",t,e,n),i=I("pad",t,e,n),s=I("kernelSize",t,e,n);return[U4(I("x",t,e,n),[s[1],s[2],s[3]],[r[1],r[2],r[3]],i)]}case"Dilation2D":{const r=I("strides",t,e,n),i=I("pad",t,e,n),s=I("dilations",t,e,n),a=r[1],o=r[2],l=s[1],u=s[2];return[I4(I("x",t,e,n),I("filter",t,e,n),[a,o],i,[l,u],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W7e=(t,e,n)=>{switch(t.op){case"Fill":{const r=I("shape",t,e,n),i=I("dtype",t,e,n),s=I("value",t,e,n);return[B_(r,s,i)]}case"LinSpace":{const r=I("start",t,e,n),i=I("stop",t,e,n),s=I("num",t,e,n);return[L4(r,i,s)]}case"Multinomial":{const r=I("logits",t,e,n),i=I("numSamples",t,e,n),s=I("seed",t,e,n);return[Nne(r,i,s)]}case"OneHot":{const r=I("indices",t,e,n),i=I("depth",t,e,n),s=I("onValue",t,e,n),a=I("offValue",t,e,n);return[w0(r,i,s,a)]}case"Ones":return[Yu(I("shape",t,e,n),I("dtype",t,e,n))];case"OnesLike":return[Sa(I("x",t,e,n))];case"RandomUniform":return[_y(I("shape",t,e,n),I("minval",t,e,n),I("maxval",t,e,n),I("dtype",t,e,n))];case"Range":{const r=I("start",t,e,n),i=I("stop",t,e,n),s=I("step",t,e,n);return[cT(r,i,s,I("dtype",t,e,n))]}case"TruncatedNormal":{const r=I("shape",t,e,n),i=I("mean",t,e,n),s=I("stdDev",t,e,n),a=I("seed",t,e,n);return[a3(r,i,s,I("dtype",t,e,n),a)]}case"Zeros":return[Fr(I("shape",t,e,n),I("dtype",t,e,n))];case"ZerosLike":return[fn(I("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LD(t,e,n){const r=I("boxes",t,e,n),i=I("scores",t,e,n),s=I("maxOutputSize",t,e,n),a=I("iouThreshold",t,e,n),o=I("scoreThreshold",t,e,n),l=I("softNmsSigma",t,e,n);return{boxes:r,scores:i,maxOutputSize:s,iouThreshold:a,scoreThreshold:o,softNmsSigma:l}}const G7e=async(t,e,n)=>{switch(t.op){case"NonMaxSuppressionV5":{const{boxes:r,scores:i,maxOutputSize:s,iouThreshold:a,scoreThreshold:o,softNmsSigma:l}=LD(t,e,n),u=await fd.nonMaxSuppressionWithScoreAsync(r,i,s,a,o,l);return[u.selectedIndices,u.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:r,scores:i,maxOutputSize:s,iouThreshold:a,scoreThreshold:o}=LD(t,e,n),l=I("padToMaxOutputSize",t,e,n),u=await fd.nonMaxSuppressionPaddedAsync(r,i,s,a,o,l);return[u.selectedIndices,u.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:r,scores:i,maxOutputSize:s,iouThreshold:a,scoreThreshold:o}=LD(t,e,n);return[await fd.nonMaxSuppressionAsync(r,i,s,a,o)]}case"Where":{const r=ft(I("condition",t,e,n),"bool"),i=[await ez(r)];return r.dispose(),i}case"ListDiff":return Dne(I("x",t,e,n),I("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H7e=(t,e,n)=>{switch(t.op){case"TopKV2":{const r=I("x",t,e,n),i=I("k",t,e,n),s=I("sorted",t,e,n),a=J4(r,i,s);return[a.values,a.indices]}case"Unique":{const r=I("x",t,e,n),i=fT(r);return[i.values,i.indices]}case"UniqueV2":{const r=I("x",t,e,n),i=I("axis",t,e,n),s=fT(r,i);return[s.values,s.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j7e=(t,e,n)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":const r=I("default",t,e,n);return[Ds(t.name,e,n)||r];case"Placeholder":return[Ds(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const u=I("x",t,e,n);return[Cc(u)]}case"IdentityN":return I("x",t,e,n).map(u=>Cc(u));case"Snapshot":const i=I("x",t,e,n);return[Cc(i)];case"Shape":return[Us(I("x",t,e,n).shape,"int32")];case"ShapeN":return I("x",t,e,n).map(u=>Us(u.shape));case"Size":return[St(I("x",t,e,n).size,"int32")];case"Rank":return[St(I("x",t,e,n).rank,"int32")];case"NoOp":return[St(1)];case"Print":const s=I("x",t,e,n),a=I("data",t,e,n),o=I("message",t,e,n),l=I("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(o);for(let u=0;u<a.length;u++)console.log(Array.prototype.slice.call(a[u].dataSync()).slice(0,l));return[s];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class q7e{constructor(e,n){this.keyDType=e,this.valueDType=n,this.handle=St(0),this.tensorMap=new Map,ai(this.handle)}get id(){return this.handle.id}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}async import(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return this.tensorMap.forEach(i=>i.dispose()),this.tensorMap.clear(),oe(()=>{const i=el(n),s=r.length,a=i.length;R(s===a,()=>`The number of elements doesn't match, keys has ${s} elements, the values has ${a} elements.`);for(let o=0;o<s;o++){const l=r[o],u=i[o];ai(u),this.tensorMap.set(l,u)}return this.handle})}async find(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return oe(()=>{const i=[];for(let s=0;s<r.length;s++){const a=r[s],o=this.findWithDefault(a,n);i.push(o)}return Ea(i)})}findWithDefault(e,n){const r=this.tensorMap.get(e);return r??n}checkKeyAndValueTensor(e,n){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X7e=async(t,e,n,r)=>{switch(t.op){case"HashTable":case"HashTableV2":{const i=I("keyDType",t,e,n),s=I("valueDType",t,e,n),a=new q7e(i,s);return r.addHashTable(t.name,a),[a.handle]}case"LookupTableImport":case"LookupTableImportV2":{const i=I("tableHandle",t,e,n,r),s=I("keys",t,e,n),a=I("values",t,e,n);return[await r.getHashTableById(i.id).import(s,a)]}case"LookupTableFind":case"LookupTableFindV2":{const i=I("tableHandle",t,e,n,r),s=I("keys",t,e,n),a=I("defaultValue",t,e,n);return[await r.getHashTableById(i.id).find(s,a)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y7e=(t,e,n)=>{switch(t.op){case"ResizeBilinear":{const r=I("images",t,e,n),i=I("size",t,e,n),s=I("alignCorners",t,e,n),a=I("halfPixelCenters",t,e,n);return[fd.resizeBilinear(r,[i[0],i[1]],s,a)]}case"ResizeNearestNeighbor":{const r=I("images",t,e,n),i=I("size",t,e,n),s=I("alignCorners",t,e,n),a=I("halfPixelCenters",t,e,n);return[fd.resizeNearestNeighbor(r,[i[0],i[1]],s,a)]}case"CropAndResize":{const r=I("image",t,e,n),i=I("boxes",t,e,n),s=I("boxInd",t,e,n),a=I("cropSize",t,e,n),o=I("method",t,e,n),l=I("extrapolationValue",t,e,n);return[fd.cropAndResize(r,i,s,a,o,l)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K7e=(t,e,n)=>{switch(t.op){case"Equal":return[Wd(I("a",t,e,n),I("b",t,e,n))];case"NotEqual":return[kp(I("a",t,e,n),I("b",t,e,n))];case"Greater":return[ll(I("a",t,e,n),I("b",t,e,n))];case"GreaterEqual":return[Gd(I("a",t,e,n),I("b",t,e,n))];case"Less":return[GM(I("a",t,e,n),I("b",t,e,n))];case"LessEqual":return[om(I("a",t,e,n),I("b",t,e,n))];case"LogicalAnd":return[Qo(I("a",t,e,n),I("b",t,e,n))];case"LogicalNot":return[V_(I("a",t,e,n))];case"LogicalOr":return[XM(I("a",t,e,n),I("b",t,e,n))];case"Select":case"SelectV2":return[Bs(I("condition",t,e,n),I("a",t,e,n),I("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z7e=(t,e,n)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[hn(I("a",t,e,n),I("b",t,e,n),I("transposeA",t,e,n),I("transposeB",t,e,n))];case"Transpose":return[$n(I("x",t,e,n),I("perm",t,e,n))];case"_FusedMatMul":const[r,i]=I("fusedOps",t,e,n),s=r==="biasadd",a=i==="prelu",o=I("numArgs",t,e,n),l=I("leakyreluAlpha",t,e,n);if(s){if(a&&o!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&o!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[u,c]=I("args",t,e,n);return[dT({a:I("a",t,e,n),b:I("b",t,e,n),transposeA:I("transposeA",t,e,n),transposeB:I("transposeB",t,e,n),bias:u,activation:i,preluActivationWeights:c,leakyreluAlpha:l})];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J7e=(t,e,n)=>{switch(t.op){case"FusedBatchNorm":case"FusedBatchNormV2":return[Ep(I("x",t,e,n),I("mean",t,e,n),I("variance",t,e,n),I("offset",t,e,n),I("scale",t,e,n),I("epsilon",t,e,n))];case"FusedBatchNormV3":return[Ep(I("x",t,e,n),I("mean",t,e,n),I("variance",t,e,n),I("offset",t,e,n),I("scale",t,e,n),I("epsilon",t,e,n))];case"LRN":return[P4(I("x",t,e,n),I("radius",t,e,n),I("bias",t,e,n),I("alpha",t,e,n),I("beta",t,e,n))];case"Softmax":return[j_(I("x",t,e,n))];case"LogSoftmax":return[qM(I("x",t,e,n))];case"SparseToDense":return[tz(I("sparseIndices",t,e,n),I("outputShape",t,e,n),I("sparseValues",t,e,n),I("defaultValue",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q7e=(t,e,n)=>{switch(t.op){case"Max":{const a=I("axis",t,e,n),o=I("keepDims",t,e,n);return[ro(I("x",t,e,n),a,o)]}case"Mean":{const a=I("axis",t,e,n),o=I("keepDims",t,e,n);return[dr(I("x",t,e,n),a,o)]}case"Min":{const a=I("axis",t,e,n),o=I("keepDims",t,e,n);return[S0(I("x",t,e,n),a,o)]}case"Sum":{const a=I("axis",t,e,n),o=I("keepDims",t,e,n);return[Tt(I("x",t,e,n),a,o)]}case"All":{const a=I("axis",t,e,n),o=I("keepDims",t,e,n);return[PM(I("x",t,e,n),a,o)]}case"Any":{const a=I("axis",t,e,n),o=I("keepDims",t,e,n);return[Rx(I("x",t,e,n),a,o)]}case"ArgMax":{const a=I("axis",t,e,n);return[Ox(I("x",t,e,n),a)]}case"ArgMin":{const a=I("axis",t,e,n);return[x4(I("x",t,e,n),a)]}case"Prod":{const a=I("axis",t,e,n),o=I("keepDims",t,e,n);return[KM(I("x",t,e,n),a,o)]}case"Cumsum":{const a=I("axis",t,e,n),o=I("exclusive",t,e,n),l=I("reverse",t,e,n);return[VM(I("x",t,e,n),a,o,l)]}case"Bincount":const r=I("x",t,e,n),i=I("weights",t,e,n),s=I("size",t,e,n);return[pne(r,i,s)];case"DenseBincount":{const a=I("x",t,e,n),o=I("weights",t,e,n),l=I("size",t,e,n),u=I("binaryOutput",t,e,n);return[xne(a,o,l,u)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e9e=(t,e,n)=>{switch(t.op){case"ConcatV2":case"Concat":{const r=I("n",t,e,n),i=I("axis",t,e,n);let s=I("tensors",t,e,n);return s=s.slice(0,r),[Er(s,i)]}case"Gather":{const r=I("x",t,e,n),i=I("indices",t,e,n);return[Tp(r,ft(i,"int32"),0)]}case"GatherV2":{const r=I("axis",t,e,n),i=I("batchDims",t,e,n),s=I("x",t,e,n),a=I("indices",t,e,n);return[Tp(s,ft(a,"int32"),r,i)]}case"Reverse":{const r=I("dims",t,e,n),i=[];for(let a=0;a<r.length;a++)r[a]&&i.push(a);const s=I("x",t,e,n);return[Ca(s,i)]}case"ReverseV2":{const r=I("axis",t,e,n),i=I("x",t,e,n);return[Ca(i,r)]}case"Slice":{const r=I("begin",t,e,n),i=I("size",t,e,n);return[pn(I("x",t,e,n),r,i)]}case"StridedSlice":{const r=I("begin",t,e,n),i=I("end",t,e,n),s=I("strides",t,e,n),a=I("beginMask",t,e,n),o=I("endMask",t,e,n),l=I("ellipsisMask",t,e,n),u=I("newAxisMask",t,e,n),c=I("shrinkAxisMask",t,e,n),f=I("x",t,e,n);return[K4(f,r,i,s,a,o,l,u,c)]}case"Pack":return oe(()=>{const r=I("axis",t,e,n),i=I("tensors",t,e,n),s=i[0].shape,a=Sd(i[0]).shape,o=i.map(l=>{const u=Tn(l.shape,s);if(!u&&!Tn(Sd(l).shape,a))throw new Error("the input tensors shape does not match");return u?l:ce(l,s)});return[Ea(o,r)]});case"Unpack":{const r=I("axis",t,e,n),i=I("tensor",t,e,n);return el(i,r)}case"Tile":{const r=I("reps",t,e,n);return[cd(I("x",t,e,n),r)]}case"Split":case"SplitV":{const r=I("axis",t,e,n),i=I("numOrSizeSplits",t,e,n),s=I("x",t,e,n);return gs(s,i,r)}case"ScatterNd":{const r=I("indices",t,e,n),i=I("values",t,e,n),s=I("shape",t,e,n);return[Fne(r,i,s)]}case"GatherNd":{const r=I("x",t,e,n),i=I("indices",t,e,n);return[Lne(r,i)]}case"SparseToDense":{const r=I("sparseIndices",t,e,n),i=I("outputShape",t,e,n),s=I("sparseValues",t,e,n),a=I("defaultValue",t,e,n);return[tz(r,s,i,s.dtype===a.dtype?a:ft(a,s.dtype))]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t9e=(t,e,n)=>{switch(t.op){case"FFT":return[q_(I("x",t,e,n))];case"IFFT":return[C0(I("x",t,e,n))];case"RFFT":return[X_(I("x",t,e,n))];case"IRFFT":return[i3(I("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n9e=(t,e,n)=>{switch(t.op){case"Cast":return[ft(I("x",t,e,n),I("dtype",t,e,n))];case"ExpandDims":{const r=I("axis",t,e,n);return[sa(I("x",t,e,n),r)]}case"Squeeze":{const r=I("axis",t,e,n);return[Sd(I("x",t,e,n),r)]}case"Reshape":return[ce(I("x",t,e,n),I("shape",t,e,n))];case"MirrorPad":return[V4(I("x",t,e,n),I("padding",t,e,n),I("mode",t,e,n))];case"PadV2":case"Pad":return[cf(I("x",t,e,n),I("padding",t,e,n),I("constantValue",t,e,n))];case"SpaceToBatchND":{const r=I("blockShape",t,e,n),i=I("paddings",t,e,n);return[G_(I("x",t,e,n),r,i)]}case"BatchToSpaceND":{const r=I("blockShape",t,e,n),i=I("crops",t,e,n);return[P_(I("x",t,e,n),r,i)]}case"DepthToSpace":{const r=I("blockSize",t,e,n),i=I("dataFormat",t,e,n).toUpperCase();return[$4(I("x",t,e,n),r,i)]}case"BroadcastTo":return[Fx(I("x",t,e,n),I("shape",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pj(t,e,n,r){const i=((s,a,o)=>{switch(s.category){case"arithmetic":return oe(()=>R7e(s,a,o));case"basic_math":return oe(()=>O7e(s,a,o));case"control":return U7e(s,a,o);case"convolution":return oe(()=>V7e(s,a,o));case"creation":return oe(()=>W7e(s,a,o));case"dynamic":return G7e(s,a,o);case"evaluation":return oe(()=>H7e(s,a,o));case"image":return oe(()=>Y7e(s,a,o));case"graph":return oe(()=>j7e(s,a,o));case"logical":return oe(()=>K7e(s,a,o));case"matrices":return oe(()=>Z7e(s,a,o));case"normalization":return oe(()=>J7e(s,a,o));case"reduction":return oe(()=>Q7e(s,a,o));case"slice_join":return oe(()=>e9e(s,a,o));case"spectral":return oe(()=>t9e(s,a,o));case"transformation":return oe(()=>n9e(s,a,o));case"hash_table":return X7e(s,a,o,r);case"custom":const l=gie(s.op);if(l&&l.customExecutor)return l.customExecutor(new D7e(s,a,o));throw TypeError(`Custom op ${s.op} is not registered.`);default:throw TypeError(`Unknown op '${s.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return xp(i)?i.then(s=>[].concat(s)):[].concat(i)}class mj{constructor(e={},n={},r={},i={}){this.weightMap=e,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,n){return{id:e,frameName:n,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let n=0;n<this.contexts.length-1;n++){const r=this.contexts.slice(0,this.contexts.length-n);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(e);for(const n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gj(t,e,n,r){const i=new Set,s=[];let a=null,o=null;const l=new Set,u=Object.keys(t).map(d=>ta(d)[0]);let c=[];r!=null&&(c=r.map(d=>ta(d.name)[0]));const f=[...e];for(;f.length>0;){const d=f.pop();if((bie(d)||o9e(d)||l9e(d))&&a==null&&(a=d,o=a.children.map(h=>h.name).filter(h=>i.has(h))),i.add(d.name),n[d.name]==null&&u.indexOf(d.name)===-1&&c.indexOf(d.name)===-1){if(d.inputs.length===0){s.push(d.name);continue}d.inputs.forEach(h=>{l.has(h.name)||(l.add(h.name),f.push(h))})}}return{inputs:t,outputs:e,usedNodes:i,missingInputs:s,dynamicNode:a,syncInputs:o}}function r9e(t,e,n){const{usedNodes:r,inputs:i}=n,s=[],a=Object.keys(i).map(c=>ta(c)[0]).map(c=>t.nodes[c]),o=t.initNodes;a.forEach(c=>{r.has(c.name)&&s.push(c)}),t.weights.forEach(c=>{r.has(c.name)&&s.push(c)}),o!=null&&o.forEach(c=>{r.has(c.name)&&s.push(c)});const l=new Set,u=[];for(;s.length>0;){const c=s.pop();l.add(c.name),e[c.name]||u.push(c),c.children.forEach(f=>{!l.has(f.name)&&r.has(f.name)&&f.inputs.every(d=>l.has(d.name))&&s.push(f)})}return u}const i9e=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],s9e=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],a9e=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2"];function bie(t){return i9e.indexOf(t.op)>=0}function o9e(t){return s9e.indexOf(t.op)>=0}function l9e(t){return a9e.indexOf(t.op)>=0}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wT{constructor(e,n){this.graph=e,this.parent=n,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new wT(e.functions[r],this)})}get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const n=Object.keys(e).map(r=>e[r].map(i=>i.id));this._weightIds=[].concat(...n),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const n=e.signatureKey||e.name;return e.defaultOutput?`${n}:${e.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((e,n)=>(e[n]=this._functions[n].signature,e),{})}getCompilationKey(e,n){const r=e.map(s=>s.name).sort(),i=n.map(s=>s.name).sort();return r.join(this.SEPERATOR)+"--"+i.join(this.SEPERATOR)}compile(e,n){const r=gj(e,n,this.weightMap,this._initNodes),{missingInputs:i,dynamicNode:s,syncInputs:a}=r;if(s!=null)throw new Error(`This execution contains the node '${s.name}', which has the dynamic op '${s.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${a}]`);if(i.length>0){const o=n.map(u=>u.name),l=Object.keys(e);throw new Error(`Cannot compute the outputs [${o}] from the provided inputs [${l}]. Missing the following inputs: [${i}]`)}return r9e(this.graph,this.weightMap,r)}execute(e,n){e=this.mapInputs(e);const r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n);const i=r.map(f=>this.graph.nodes[ta(f)[0]]),s=n.map(f=>ta(f)[0]);let a=s.map(f=>this.graph.nodes[f]);a.length===0&&(a=this._outputs);const o=this.getCompilationKey(i,a);let l=this.compiledMap.get(o);l==null&&(l=this.compile(e,a),this.compiledMap.set(o,l));const u={},c={};return oe(()=>{const f=new mj(this.weightMap,u,c,this.functionExecutorMap),d=Object.assign({},this.weightMap);Object.keys(e).forEach(m=>{const[g,v]=ta(m),y=[];y[v]=e[m],d[g]=y});const h=this.getFrozenTensorIds(d),p={};for(let m=0;m<l.length;m++){const g=l[m];if(!d[g.name]){const v=pj(g,d,f,this._resourceManager);if(xp(v))throw new Error(`The execution of the op '${g.op}' returned a promise. Please use model.executeAsync() instead.`);d[g.name]=v,this.checkTensorForDisposal(g.name,g,d,f,h,s,p)}}return this.parent==null&&f.dispose(h),n.map(m=>Ds(m,d,f))})}getFrozenTensorIds(e){const n=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(i=>i.id)));return new Set(n)}checkTensorForDisposal(e,n,r,i,s,a,o){n.category==="control"||a.indexOf(e)!==-1||(r[e].forEach(l=>{l!=null&&(o[l.id]=(o[l.id]||0)+n.children.length)}),n.inputs.forEach(l=>{if(l.category!=="control"){const u=Z8e(l.name,r,i);u!=null&&u.forEach(c=>{if(c&&!s.has(c.id)){const f=o[c.id];f===1?(c.dispose(),delete o[c.id]):f!=null&&o[c.id]--}})}}))}async executeAsync(e,n){return this._executeAsync(e,n)}async _executeAsync(e,n,r=!1,i={},s={}){r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n));const a=new mj(this.weightMap,i,s,this.functionExecutorMap),o=await this.executeWithControlFlow(e,a,n,r),l=n.map(d=>Ds(d,o,a)),u=l.map(d=>d.id),c=Object.keys(e).map(d=>e[d].id),f=new Set([...u,...c,...this.weightIds]);return Object.keys(o).forEach(d=>{o[d].forEach(p=>{p&&!p.isDisposed&&!f.has(p.id)&&p.dispose()})}),this.parent==null&&a.dispose(f),l}async executeFunctionAsync(e,n,r){const i=e.reduce((s,a,o)=>(s[this.inputs[o].name]=a,s),{});return this._executeAsync(i,this.outputNodes,!0,n,r)}async executeWithControlFlow(e,n,r,i){const s=Object.keys(e),a=s.map(b=>this.graph.nodes[ta(b)[0]]),o=r.map(b=>ta(b)[0]);let l=o.map(b=>this.graph.nodes[b]);l.length===0&&(l=this._outputs);const{usedNodes:u,missingInputs:c,dynamicNode:f,syncInputs:d}=gj(e,l,this.weightMap,this._initNodes),h=[...a,...this.graph.weights,...this._initNodes||[]].map(b=>({node:b,contexts:n.currentContext})),p=Object.assign({},this.weightMap);Object.keys(e).forEach(b=>{const[x,w]=ta(b),S=[];S[w]=e[b],p[x]=S});const m={},g=this.getFrozenTensorIds(p),v={};for(;h.length>0;){const b=this.processStack(a,h,n,p,v,g,o,m,u);await Promise.all(b)}f==null&&!i&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const y=l.filter(b=>!bie(b)&&!Ds(b.name,p,n)).map(b=>b.name);if(y.length>0){let b="";throw f!=null&&(b=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${d}]`),new Error(`Cannot compute the outputs [${y}] from the provided inputs [${s}]. Consider providing the following inputs: [${c}]. ${b}`)}return p}processStack(e,n,r,i,s,a,o,l,u){const c=[];for(;n.length>0;){const f=n.pop();r.currentContext=f.contexts;let d="";if(f.node.op==="Enter"&&I("isConstant",f.node,i,r)&&([d]=Sc(f.node.name,r)),i[f.node.name]==null){const h=pj(f.node,i,r,this._resourceManager);d||([d]=Sc(f.node.name,r));const p=r.currentContext;xp(h)?c.push(h.then(m=>(i[d]=m,r.currentContext=p,this.checkTensorForDisposal(d,f.node,i,r,a,o,l),this.processChildNodes(f.node,n,r,i,s,u),m))):(i[d]=h,this.checkTensorForDisposal(d,f.node,i,r,a,o,l),this.processChildNodes(f.node,n,r,i,s,u))}else this.processChildNodes(f.node,n,r,i,s,u)}return c}processChildNodes(e,n,r,i,s,a){e.children.forEach(o=>{const[l]=Sc(o.name,r);s[l]||!a.has(o.name)||(o.op==="Merge"?o.inputNames.some(u=>!!Ds(u,i,r))&&(s[l]=!0,n.push({contexts:r.currentContext,node:o})):o.inputNames.every(u=>!!Ds(u,i,r))&&(s[l]=!0,n.push({contexts:r.currentContext,node:o})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(n=>n.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(n=>{const r=e[n],[i]=ta(n),s=this.graph.nodes[i];if(s.attrParams.shape&&s.attrParams.shape.value){const a=s.attrParams.shape.value,o=a.length===r.shape.length&&r.shape.every((l,u)=>a[u]===-1||a[u]===l);R(o,()=>`The shape of dict['${s.name}'] provided in model.execute(dict) must be [${a}], but was [${r.shape}]`)}s.attrParams.dtype&&s.attrParams.dtype.value&&R(r.dtype===s.attrParams.dtype.value,()=>`The dtype of dict['${s.name}'] provided in model.execute(dict) must be ${s.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){const n={};for(const r in e)if(this._signature!=null&&this._signature.inputs!=null&&this._signature.inputs[r]!=null){const i=this._signature.inputs[r];n[i.name]=e[r]}else n[r]=e[r];return n}checkInputs(e){const n=Object.keys(e).filter(r=>{const[i]=ta(r);return this.graph.nodes[i]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(e){return e.map(n=>this._signature!=null&&this._signature.outputs!=null&&this._signature.outputs[n]!=null?this._signature.outputs[n].name:n,{})}checkOutputs(e){e.forEach(n=>{const[r]=ta(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}}class u9e{constructor(e={},n={}){this.hashTableNameToHandle=e,this.hashTableMap=n}addHashTable(e,n){this.hashTableNameToHandle[e]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c9e="?tfjs-format=file",f9e="model.json";class xie{constructor(e,n={}){this.modelUrl=e,this.loadOptions=n,this.version="n/a",n==null&&(this.loadOptions={}),this.resourceManager=new u9e}get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=oT(e,this.loadOptions);else{const n=a4(e,this.loadOptions);if(n.length===0)n.push(oT(e,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[e]}'`);this.handler=n[0]}}async load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=await this.handler.load();return this.loadSync(e)}loadSync(e){this.artifacts=e;const n=this.artifacts.modelTopology;let r;this.artifacts.userDefinedMetadata!=null&&this.artifacts.userDefinedMetadata.signature!=null?r=this.artifacts.userDefinedMetadata.signature:r=this.artifacts.signature,this.signature=r,this.version=`${n.versions.producer}.${n.versions.minConsumer}`;const i=DM(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new wT(cj.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(i),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const s=cj.Instance.transformGraph(e.modelInitializer);this.initializer=new wT(s),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}async save(e,n){if(typeof e=="string"){const r=s4(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}predict(e,n){return this.execute(e,this.outputNodes)}normalizeInputs(e){if(!(e instanceof kn)&&!Array.isArray(e))return e;if(e=Array.isArray(e)?e:[e],e.length!==this.inputNodes.length)throw new Error(`Input tensor count mismatch,the graph model has ${this.inputNodes.length} placeholders, while there are ${e.length} input tensors.`);return this.inputNodes.reduce((n,r,i)=>(n[r]=e[i],n),{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}execute(e,n){e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=this.executor.execute(e,n);return r.length>1?r:r[0]}async executeAsync(e,n){e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=await this.executor.executeAsync(e,n);return r.length>1?r:r[0]}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((n,r)=>(n[r]=[e[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}async function d9e(t,e={}){if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&t.load==null&&(t.endsWith("/")||(t=t+"/"),t=`${t}${f9e}${c9e}`);const n=new xie(t,e);return await n.load(),n}/** @license See the LICENSE file. */const wie="3.1.0";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */function h9e(t,e){return _T(t,e)}function _T(t,e,n=new Map,r=new Set){if(t==null)return null;if(r.has(t))throw new Error("Circular references are not supported.");if(n.has(t))return n.get(t);const i=e(t);if(i.recurse&&i.value!==null)throw new Error("A deep map function may not return both a value and recurse=true.");if(i.recurse)if(k0(t)){const s=Array.isArray(t)?[]:{};r.add(t);for(const a in t){const o=t[a],l=_T(o,e,n,r);s[a]=l}return r.delete(t),s}else throw new Error(`Can't recurse into non-iterable type: ${t}`);else return n.set(t,i.value),i.value}function p9e(t,e=Sie){return _ie(t,e)}function _ie(t,e,n=new Set){const r=t[0];if(n.has(r))throw new Error("Circular references are not supported.");const i=e(t);if(i.recurse&&i.value!==null)throw new Error("A deep zip function may not return both a value and recurse=true.");if(i.recurse)if(k0(r)){const s=Array.isArray(r)?[]:{};n.add(r);for(const a in r){const o=t.map(u=>u[a]),l=_ie(o,e,n);s[a]=l}return n.delete(r),s}else throw new Error(`Can't recurse into non-iterable type: ${r}`);else return i.value}function Sie(t){return t===null?null:k0(t[0])?{value:null,recurse:!0}:{value:t,recurse:!1}}async function Cie(t,e){const n=new Map;_T(t,e,n);for(const i of Array.from(n.keys())){const s=n.get(i);if(xp(s)){const a=await s;n.set(i,a)}}return _T(t,e,n)}function k0(t){return t!=null&&!ArrayBuffer.isView(t)&&(Array.isArray(t)||typeof t=="object"&&!(t instanceof kn))}function m9e(t){return t==null||g9e(t)||Array.isArray(t)||typeof t=="object"&&t instanceof kn||Ci(t)}function g9e(t){return t===null||typeof t!="object"&&typeof t!="function"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */function v9e(t){return h9e(t,y9e)}function y9e(t){return t instanceof kn?{value:t.clone(),recurse:!1}:k0(t)?{value:null,recurse:!0}:{value:t,recurse:!1}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class Eie{constructor(e){if(this.capacity=e,this.begin=0,this.end=0,e==null)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(e<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(e),this.doubledCapacity=2*e}wrap(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}get(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}set(e,n){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=n}length(){let e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}isFull(){return this.length()===this.capacity}isEmpty(){return this.length()===0}push(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}pushAll(e){for(const n of e)this.push(n)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);const e=this.get(this.end);return this.set(this.end,void 0),e}unshift(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}shuffleExcise(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const n=this.wrap(this.begin+e),r=this.get(n);return this.set(n,this.pop()),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class j3 extends Eie{constructor(){super(j3.INITIAL_CAPACITY)}isFull(){return!1}push(e){super.isFull()&&this.expand(),super.push(e)}unshift(e){super.isFull()&&this.expand(),super.unshift(e)}expand(){const e=this.capacity*2,n=new Array(e),r=this.length();for(let i=0;i<r;i++)n[i]=this.get(this.wrap(this.begin+i));this.data=n,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=r}}j3.INITIAL_CAPACITY=32;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */function Tie(t){return new w9e(t)}function j6(t){return new _9e(t)}function b9e(t,e){return new kie(t,e)}function x9e(t,e=Jf.FAIL){return new $9e(t,e)}class di{async toArray(){const e=[];let n=await this.next();for(;!n.done;)e.push(n.value),n=await this.next();return e}async toArrayForTest(){const e=this.prefetch(100),n=[];let r=await e.next();for(;!r.done;)n.push(r.value),r=await e.next();return n}async resolveFully(){let e=await this.next();for(;!e.done;)e=await this.next()}async resolveWhile(e){let n=await this.next(),r=e(n.value);for(;!n.done&&r;)n=await this.next(),r=e(n.value)}handleErrors(e){return new M9e(this,e)}filter(e){return new k9e(this,e)}map(e){return new A9e(this,e)}mapAsync(e){return new vj(this,e)}serialMapAsync(e){return new vj(this,e).serial()}flatmap(e){return new N9e(this,e)}async forEachAsync(e){return this.map(e).resolveFully()}async serialForEach(e){return this.serialMapAsync(e).resolveWhile(n=>n===!0)}rowMajorBatch(e,n=!0){return new T9e(this,e,n)}columnMajorBatch(e,n=!0,r=Sie){return this.rowMajorBatch(e,n).map(s=>p9e(s,r))}concatenate(e,n){return new kie(Tie([this,e]),n)}take(e){return e<0||e==null?this:new E9e(this,e)}skip(e){return e<0||e==null?this:new C9e(this,e)}prefetch(e){return new Aie(this,e)}shuffle(e,n){return new I9e(this,e,n)}serial(){return new S9e(this)}}class w9e extends di{constructor(e){super(),this.items=e,this.trav=0}summary(){return`Array of ${this.items.length} items`}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};const e=this.items[this.trav];return this.trav++,{value:v9e(e),done:!1}}}class _9e extends di{constructor(e){super(),this.nextFn=e}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(e){throw e.message=`Error thrown while iterating through a dataset: ${e.message}`,e}}}class S9e extends di{constructor(e){super(),this.upstream=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Serial`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){return this.upstream.next()}}class C9e extends di{constructor(e,n){super(),this.upstream=e,this.maxCount=n,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Skip`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){const e=await this.upstream.next();if(e.done)return e;Pt(e.value)}return this.upstream.next()}}class E9e extends di{constructor(e,n){super(),this.upstream=e,this.maxCount=n,this.count=0}summary(){return`${this.upstream.summary()} -> Take`}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}}class T9e extends di{constructor(e,n,r=!0){super(),this.upstream=e,this.batchSize=n,this.enableSmallLastBatch=r,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> RowMajorBatch`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){const e=[];for(;e.length<this.batchSize;){const n=await this.upstream.next();if(n.done)return this.enableSmallLastBatch&&e.length>0?{value:e,done:!1}:{value:null,done:!0};e.push(n.value)}return{value:e,done:!1}}}class k9e extends di{constructor(e,n){super(),this.upstream=e,this.predicate=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Filter`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;){const e=await this.upstream.next();if(e.done||this.predicate(e.value))return e;Pt(e.value)}}}class A9e extends di{constructor(e,n){super(),this.upstream=e,this.transform=n}summary(){return`${this.upstream.summary()} -> Map`}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const n=Yc(e.value),r=this.transform(e.value),i=Yc(r);for(const s of n)IM(s,i)||s.dispose();return{value:r,done:!1}}}class M9e extends di{constructor(e,n){super(),this.upstream=e,this.handler=n,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> handleErrors`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch(e){if(!this.handler(e))return{value:null,done:!0}}}}class vj extends di{constructor(e,n){super(),this.upstream=e,this.transform=n}summary(){return`${this.upstream.summary()} -> AsyncMap`}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const n=Yc(e.value),r=await this.transform(e.value),i=Yc(r);for(const s of n)IM(s,i)||s.dispose();return{value:r,done:!1}}}class q6 extends di{constructor(){super(),this.outputQueue=new j3,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;this.outputQueue.length()===0;)if(!await this.pump())return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}}class N9e extends q6{constructor(e,n){super(),this.upstream=e,this.transform=n}summary(){return`${this.upstream.summary()} -> Flatmap`}async pump(){const e=await this.upstream.next();if(e.done)return!1;const n=Yc(e.value),r=this.transform(e.value),i=Yc(r);this.outputQueue.pushAll(r);for(const s of n)IM(s,i)||s.dispose();return!0}}class kie extends di{constructor(e,n){super(),this.baseErrorHandler=n,this.lastRead=null,this.iterator=null,this.moreIterators=e}summary(){return"TODO: fill in upstream of chained summaries -> Chained"}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(e){if(await e,this.iterator==null){const r=await this.moreIterators.next();if(r.done)return{value:null,done:!0};this.iterator=r.value,this.baseErrorHandler!=null&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}const n=await this.iterator.next();return n.done?(this.iterator=null,this.readFromChain(e)):n}}var Jf;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(Jf||(Jf={}));class $9e extends di{constructor(e,n=Jf.FAIL){super(),this.iterators=e,this.mismatchMode=n,this.count=0,this.currentPromise=null}summary(){return"{TODO: fill in upstream of zip summaries} -> Zip"}async nextState(e){await e;let n=0,r=0;function i(a){return a instanceof di?{value:a.next().then(l=>(n++,l.done&&r++,l.value)),recurse:!1}:{value:null,recurse:!0}}const s=await Cie(this.iterators,i);if(n===r)return{value:null,done:!0};if(r>0)switch(this.mismatchMode){case Jf.FAIL:throw new Error(`Zipped streams should have the same length. Mismatched at element ${this.count}.`);case Jf.SHORTEST:return{value:null,done:!0};case Jf.LONGEST:}return this.count++,{value:s,done:!1}}async next(){return this.currentPromise=this.nextState(this.currentPromise),this.currentPromise}}class Aie extends di{constructor(e,n){super(),this.upstream=e,this.bufferSize=n,this.buffer=new Eie(n)}summary(){return`${this.upstream.summary()} -> Prefetch`}refill(){for(;!this.buffer.isFull();){const e=this.upstream.next();this.buffer.push(e)}}next(){return this.refill(),this.buffer.shift()}}class I9e extends Aie{constructor(e,n,r){super(e,n),this.upstream=e,this.windowSize=n,this.upstreamExhausted=!1,this.random=wy.alea(r||Gi().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}randomInt(e){return Math.floor(this.random()*e)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){const e=this.chooseIndex(),n=await this.buffer.shuffleExcise(e);if(n.done)this.upstreamExhausted=!0;else return this.refill(),n}return{value:null,done:!0}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class $y{constructor(){this.size=null}batch(e,n=!0){const r=this;R(e>0,()=>`batchSize needs to be positive, but it is
      ${e}`);let i;return this.size===1/0||this.size==null?i=this.size:n?i=Math.ceil(this.size/e):i=Math.floor(this.size/e),ea(async()=>(await r.iterator()).columnMajorBatch(e,n,O9e),i)}concatenate(e){const n=this;let r;return this.size===1/0||e.size===1/0?r=1/0:this.size!=null&&e.size!=null?r=this.size+e.size:r=null,ea(async()=>(await n.iterator()).concatenate(await e.iterator()),r)}filter(e){const n=this;let r;return this.size===1/0?r=1/0:r=null,ea(async()=>(await n.iterator()).filter(i=>oe(()=>e(i))),r)}async forEachAsync(e){return(await this.iterator()).forEachAsync(e)}map(e){const n=this;return ea(async()=>(await n.iterator()).map(r=>oe(()=>e(r))),this.size)}mapAsync(e){const n=this;return ea(async()=>(await n.iterator()).mapAsync(e),this.size)}prefetch(e){if(e==null)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");const n=this;return ea(async()=>(await n.iterator()).prefetch(e),this.size)}repeat(e){const n=this;let r;return this.size!=null&&e>0?r=this.size*e:e===0?r=0:this.size!=null&&(e===void 0||e<0)?r=1/0:r=null,ea(async()=>{const i=j6(async()=>({value:await n.iterator(),done:!1}));return b9e(i.take(e))},r)}skip(e){const n=this;let r;return this.size!=null&&e>=0&&this.size>=e?r=this.size-e:this.size!=null&&(this.size<e||e===void 0||e<0)?r=0:r=null,ea(async()=>(await n.iterator()).skip(e),r)}shuffle(e,n,r=!0){if(e==null||e<0)throw this.size==null?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError(`\`Dataset.shuffle()\` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for \`tf.Tensor\`s), consider setting bufferSize to the dataset size (${this.size} elements)`);const i=this,s=wy.alea(n||Gi().toString());return ea(async()=>{let a=s.int32();return r&&(a+=s.int32()),(await i.iterator()).shuffle(e,a.toString())},this.size)}take(e){const n=this;let r;return this.size!=null&&this.size>e?r=e:this.size!=null&&this.size<=e?r=this.size:r=null,ea(async()=>(await n.iterator()).take(e),r)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}}$y.MAX_BUFFER_SIZE=1e4;function ea(t,e=null){return new class extends $y{constructor(){super(...arguments),this.size=e}async iterator(){return t()}}}function D9e(t){return ea(async()=>Tie(t),t.length)}function R9e(t){if(!k0(t))throw new Error("The argument to zip() must be an object or array.");let e;if(Array.isArray(t))for(let n=0;n<t.length;n++)e=e==null?t[n].size:Math.min(e,t[n].size);else if(t instanceof Object)for(const n in t)e=e==null?t[n].size:Math.min(e,t[n].size);return ea(async()=>{const n=await Cie(t,r=>{if(r instanceof $y)return{value:r.iterator(),recurse:!1};if(k0(r))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")});return x9e(n,Jf.SHORTEST)},e)}function O9e(t){if(t===null)return null;const e=t[0];return m9e(e)?{value:F9e(t),recurse:!1}:{value:null,recurse:!0}}function F9e(t){if(t.length===0)throw new Error("Can't make a batch of zero elements.");return t[0]instanceof kn?Ea(t):Il(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class Mie extends $y{constructor(e){super(),this.input=e}async iterator(){return(await this.input.iterator()).decodeUTF8().split(`
`).map(i=>(i.endsWith("\r")&&(i=i.slice(0,-1)),i))}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */const lC='"',Lb=Symbol("out"),yj=Symbol("field"),uC=Symbol("quote"),PD=Symbol("quoteafterquote"),bj=Symbol("quoteinquote");class Nie extends $y{constructor(e,n){super(),this.input=e,this.hasHeader=!0,this.fullColumnNames=null,this.columnNamesValidated=!1,this.columnConfigs=null,this.configuredColumnsOnly=!1,this.delimiter=",",this.delimWhitespace=!1,this.base=new Mie(e),n||(n={}),this.hasHeader=n.hasHeader!==!1,this.fullColumnNames=n.columnNames,this.columnConfigs=n.columnConfigs,this.configuredColumnsOnly=n.configuredColumnsOnly,n.delimWhitespace?(R(n.delimiter==null,()=>"Delimiter should not be provided when delimWhitespace is true."),this.delimWhitespace=!0,this.delimiter=" "):this.delimiter=n.delimiter?n.delimiter:","}async columnNames(){return this.columnNamesValidated||await this.setColumnNames(),this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames}async setColumnNames(){const e=await this.maybeReadHeaderLine();if(!this.fullColumnNames&&!e)throw new Error("Column names must be provided if there is no header line.");this.fullColumnNames&&e&&R(e.length===this.fullColumnNames.length,()=>"The length of provided columnNames ("+this.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+e.length.toString()+")."),this.fullColumnNames||(this.fullColumnNames=e);const n=this.fullColumnNames.reduce((i,s)=>(i[s]=i[s]+1||1,i),{}),r=Object.keys(n).filter(i=>n[i]>1);if(R(r.length===0,()=>"Duplicate column names found: "+r.toString()),this.columnConfigs){for(const i of Object.keys(this.columnConfigs))if(this.fullColumnNames.indexOf(i)===-1)throw new Error('The key "'+i+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").")}this.columnNamesValidated=!0}async maybeReadHeaderLine(){if(this.hasHeader){const n=await(await this.base.iterator()).next();if(n.done)throw new Error("No data was found for CSV parsing.");const r=n.value;return this.parseRow(r,!1)}else return null}async iterator(){this.columnNamesValidated||await this.setColumnNames();let e=await this.base.iterator();return this.hasHeader&&(e=e.skip(1)),e.map(n=>this.makeDataElement(n))}makeDataElement(e){const n=this.parseRow(e),r={},i={};for(let s=0;s<this.fullColumnNames.length;s++){const a=this.fullColumnNames[s],o=this.columnConfigs?this.columnConfigs[a]:null;if(!(this.configuredColumnsOnly&&!o)){const l=n[s];let u=null;if(l==="")if(o&&o.default!==void 0)u=o.default;else{if(o&&(o.required||o.isLabel))throw new Error(`Required column ${a} is empty in this line: ${e}`);u=void 0}else{const c=Number(l);if(isNaN(c))o&&o.dtype==="bool"?u=this.getBoolean(l):u=l;else if(!o||!o.dtype)u=c;else switch(o.dtype){case"float32":u=c;break;case"int32":u=Math.floor(c);break;case"bool":u=this.getBoolean(l);break;default:u=c}}o&&o.isLabel?i[a]=u:r[a]=u}}return Object.keys(i).length===0?r:{xs:r,ys:i}}getBoolean(e){return e==="1"||e.toLowerCase()==="true"?1:0}parseRow(e,n=!0){const r=[];let i=0;const s=e.length;let a=Lb;for(let o=0;o<s;o++)switch(a){case Lb:switch(e.charAt(o)){case lC:i=o+1,a=uC;break;case this.delimiter:if(i=o+1,this.delimiter===" "&&this.delimWhitespace)break;r.push(""),a=Lb;break;default:a=yj,i=o;break}break;case yj:switch(e.charAt(o)){case this.delimiter:r.push(e.substring(i,o)),a=Lb,i=o+1;break}break;case uC:switch(e.charAt(o)){case lC:a=PD;break}break;case PD:switch(e.charAt(o)){case this.delimiter:r.push(e.substring(i,o-1)),a=Lb,i=o+1;break;case lC:a=uC;break;default:a=bj;break}break;case bj:switch(e.charAt(o)){case lC:a=uC;break}break}if(a===PD?r.push(e.substring(i,s-1)):r.push(e.substring(i)),n&&r.length!==this.fullColumnNames.length)throw new Error(`Invalid row in csv file. Should have ${this.fullColumnNames.length} elements in a row, but got ${r}`);return r}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class X6 extends di{constructor(e){super(),this.microphoneConfig=e,this.isClosed=!1,this.fftSize=e.fftSize||1024;const n=Math.log2(this.fftSize);if(this.fftSize<0||n<4||n>14||!Number.isInteger(n))throw new Error(`Invalid fftSize: it must be a power of 2 between 2 to 4 and 2 to 14, but got ${this.fftSize}`);if(this.numFrames=e.numFramesPerSpectrogram||43,this.sampleRateHz=e.sampleRateHz,this.columnTruncateLength=e.columnTruncateLength||this.fftSize,this.audioTrackConstraints=e.audioTrackConstraints,this.smoothingTimeConstant=e.smoothingTimeConstant||0,this.includeSpectrogram=e.includeSpectrogram!==!1,this.includeWaveform=e.includeWaveform===!0,!this.includeSpectrogram&&!this.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.")}summary(){return"microphone"}static async create(e={}){if(Ce().get("IS_NODE"))throw new Error("microphone API is only supported in browser environment.");const n=new X6(e);return await n.start(),n}async start(){try{this.stream=await navigator.mediaDevices.getUserMedia({audio:this.audioTrackConstraints==null?!0:this.audioTrackConstraints,video:!1})}catch(r){throw new Error(`Error thrown while initializing video stream: ${r.message}`)}if(!this.stream)throw new Error("Could not obtain audio from microphone.");const e=window.AudioContext||window.webkitAudioContext;if(this.audioContext=new e,!this.sampleRateHz)this.sampleRateHz=this.audioContext.sampleRate;else if(this.audioContext.sampleRate!==this.sampleRateHz)throw new Error(`Mismatch in sampling rate: Expected: ${this.sampleRateHz}; Actual: ${this.audioContext.sampleRate}`);const n=this.audioContext.createMediaStreamSource(this.stream);this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=this.fftSize*2,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,n.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize)}async next(){if(this.isClosed)return{value:null,done:!0};let e,n;const r=await this.getAudioData();if(this.includeSpectrogram){const i=this.flattenQueue(r.freqDataQueue);e=this.getTensorFromAudioDataArray(i,[this.numFrames,this.columnTruncateLength,1])}if(this.includeWaveform){const i=this.flattenQueue(r.timeDataQueue);n=this.getTensorFromAudioDataArray(i,[this.numFrames*this.fftSize,1])}return{value:{spectrogram:e,waveform:n},done:!1}}async capture(){return(await this.next()).value}async getAudioData(){const e=[],n=[];let r=0;return new Promise(i=>{const s=setInterval(()=>{this.includeSpectrogram&&(this.analyser.getFloatFrequencyData(this.freqData),this.freqData[0]===-1/0&&i({freqDataQueue:e,timeDataQueue:n}),e.push(this.freqData.slice(0,this.columnTruncateLength))),this.includeWaveform&&(this.analyser.getFloatTimeDomainData(this.timeData),n.push(this.timeData.slice())),++r===this.numFrames&&(clearInterval(s),i({freqDataQueue:e,timeDataQueue:n}))},this.fftSize/this.sampleRateHz*1e3)})}stop(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),this.stream!=null&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())}toArray(){throw new Error("Can not convert infinite audio stream to array.")}getSampleRate(){return this.sampleRateHz}flattenQueue(e){const n=e[0].length,r=new Float32Array(e.length*n);return e.forEach((i,s)=>r.set(i,s*n)),r}getTensorFromAudioDataArray(e,n){const r=new Float32Array(Ee(n));return r.set(e,r.length-e.length),Il(r,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class Y6 extends di{constructor(e,n){if(super(),this.webcamVideoElement=e,this.webcamConfig=n,this.isClosed=!0,this.resize=!1,this.needToResize())if(this.resize=!0,this.cropSize=[this.webcamConfig.resizeHeight,this.webcamConfig.resizeWidth],this.cropBoxInd=Us([0],"int32"),this.webcamConfig.centerCrop){const r=this.webcamConfig.resizeWidth*1/this.webcamVideoElement.width,i=this.webcamConfig.resizeHeight*1/this.webcamVideoElement.height,s=(1-r)/2,a=(1-i)/2,o=s+r,l=i+a;this.cropBox=Pc([a,s,l,o],[1,4])}else this.cropBox=Pc([0,0,1,1],[1,4])}summary(){return"webcam"}static async create(e,n={}){if(Ce().get("IS_NODE"))throw new Error("tf.data.webcam is only supported in browser environment.");if(!e){if(e=document.createElement("video"),!n.resizeWidth||!n.resizeHeight)throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");e.width=n.resizeWidth,e.height=n.resizeHeight}const r=new Y6(e,n);return await r.start(),r}async start(){this.webcamConfig.facingMode&&R(this.webcamConfig.facingMode==="user"||this.webcamConfig.facingMode==="environment",()=>`Invalid webcam facing mode: ${this.webcamConfig.facingMode}. Please provide 'user' or 'environment'`);try{this.stream=await navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}})}catch(e){throw e.message=`Error thrown while initializing video stream: ${e.message}`,e}if(!this.stream)throw new Error("Could not obtain video from webcam.");try{this.webcamVideoElement.srcObject=this.stream}catch(e){console.log(e),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,new Promise(e=>{this.webcamVideoElement.onloadedmetadata=()=>{e()}})}async next(){if(this.isClosed)return{value:null,done:!0};let e;try{e=Xte(this.webcamVideoElement)}catch(n){throw new Error(`Error thrown converting video to pixels: ${JSON.stringify(n)}`)}if(this.resize)try{return{value:this.cropAndResizeFrame(e),done:!1}}catch(n){throw new Error(`Error thrown cropping the video: ${n.message}`)}finally{e.dispose()}else return{value:e,done:!1}}needToResize(){return!!(this.webcamConfig.resizeWidth&&this.webcamConfig.resizeHeight&&(this.webcamVideoElement.width!==this.webcamConfig.resizeWidth||this.webcamVideoElement.height!==this.webcamConfig.resizeHeight))}cropAndResizeFrame(e){return oe(()=>{const n=sa(ft(e,"float32"),0);let r;r=fd.cropAndResize(n,this.cropBox,this.cropBoxInd,this.cropSize,"bilinear");const i=r.shape;return ce(r,i.slice(1))})}async capture(){return(await this.next()).value}stop(){this.stream.getTracks().forEach(n=>n.stop());try{this.webcamVideoElement.srcObject=null}catch(n){console.log(n),this.webcamVideoElement.src=null}this.isClosed=!0}toArray(){throw new Error("Can not convert infinite video stream to array.")}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class $ie{}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class Iie extends di{split(e){return new L9e(this,e)}}class L9e extends Iie{constructor(e,n){super(),this.upstream=e,this.impl=new P9e(e,n)}summary(){return this.impl.summary()}async next(){return this.impl.next()}}class P9e extends q6{constructor(e,n){super(),this.upstream=e,this.separator=n,this.carryover=""}summary(){return`${this.upstream.summary()} -> Split('${this.separator}')`}async pump(){const e=await this.upstream.next();if(e.done)return this.carryover===""?!1:(this.outputQueue.push(this.carryover),this.carryover="",!0);const n=e.value.split(this.separator);n[0]=this.carryover+n[0];for(const r of n.slice(0,-1))this.outputQueue.push(r);return this.carryover=n[n.length-1],!0}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class z9e extends di{decodeUTF8(){return new B9e(this)}}class B9e extends Iie{constructor(e){super(),this.upstream=e,this.impl=new U9e(e)}summary(){return this.impl.summary()}async next(){return this.impl.next()}}class U9e extends q6{constructor(e){if(super(),this.upstream=e,Ce().get("IS_BROWSER"))this.decoder=new TextDecoder("utf-8");else{const{StringDecoder:n}=require("string_decoder");this.decoder=new n("utf8")}}summary(){return`${this.upstream.summary()} -> Utf8`}async pump(){const e=await this.upstream.next();let n;if(e.done)return!1;n=e.value;let r;return Ce().get("IS_BROWSER")?r=this.decoder.decode(n,{stream:!0}):r=this.decoder.write(Buffer.from(n.buffer)),this.outputQueue.push(r),!0}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class Die extends z9e{constructor(e,n={}){super(),this.file=e,this.options=n,R(e instanceof Uint8Array||(Ce().get("IS_BROWSER")?e instanceof File||e instanceof Blob:!1),()=>"FileChunkIterator only supports File, Blob and Uint8Array right now."),this.offset=n.offset||0,this.chunkSize=n.chunkSize||1024*1024}summary(){return`FileChunks ${this.file}`}async next(){return this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size)?{value:null,done:!0}:{value:await new Promise((n,r)=>{const i=this.offset+this.chunkSize;if(this.file instanceof Uint8Array)n(new Uint8Array(this.file.slice(this.offset,i)));else{const s=new FileReader;s.onload=o=>{let l=s.result;if(l instanceof ArrayBuffer&&(l=new Uint8Array(l)),!(l instanceof Uint8Array))return r(new TypeError("FileReader returned unknown type."));n(l)},s.onabort=o=>r(new Error("Aborted")),s.onerror=o=>r(new Error(o.type));const a=this.file.slice(this.offset,i);s.readAsArrayBuffer(a)}this.offset=i}),done:!1}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */async function V9e(t,e={}){let n,r;typeof t=="string"?n=t:(n=t.url,r=W9e(t));const i=await Ate(n,r);if(i.ok){const s=new Uint8Array(await i.arrayBuffer());return new Die(s,e)}else throw new Error(i.statusText)}const W9e=t=>({method:t.method,headers:t.headers,body:t.body,mode:t.mode,credentials:t.credentials,cache:t.cache,redirect:t.redirect,referrer:t.referrer,integrity:t.integrity});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */function Rie(t){return typeof t=="string"&&t.substr(0,7)==="file://"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class Oie extends $ie{constructor(e,n={}){super(),this.input=e,this.options=n}async iterator(){if(Rie(this.input)&&Ce().get("IS_NODE")){const e=require("fs");this.input=e.readFileSync(this.input.substr(7))}return new Die(this.input,this.options)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class Fie extends $ie{constructor(e,n={}){super(),this.url=e,this.fileOptions=n}async iterator(){return Rie(this.url)?new Oie(this.url,this.fileOptions).iterator():V9e(this.url,this.fileOptions)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */function Lie(t,e={}){return new Nie(new Fie(t),e)}function G9e(t){const e=j6(t);return ea(async()=>e)}function H9e(t){return ea(async()=>{const e=await t();return j6(()=>e.next())})}async function j9e(t,e){return Y6.create(t,e)}async function q9e(t){return X6.create(t)}/** @license See the LICENSE file. */const Pie="3.1.0";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X9e=Object.freeze(Object.defineProperty({__proto__:null,CSVDataset:Nie,Dataset:$y,FileDataSource:Oie,TextLineDataset:Mie,URLDataSource:Fie,array:D9e,csv:Lie,func:G9e,generator:H9e,microphone:q9e,version_data:Pie,webcam:j9e,zip:R9e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gt(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&R(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y9e=o3;class q3 extends zA{constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new q5(this,wc())}nextDataId(){return q3.nextDataId++}write(e,n,r){this.firstUse&&(this.firstUse=!1,Ce().get("IS_NODE")&&Ey(`
============================
Hi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));const i={id:this.nextDataId()};return this.data.set(i,{values:e,dtype:r,refCount:1}),i}makeTensorInfo(e,n,r){let i;if(n==="string"&&r!=null&&r.length>0&&vu(r[0])){const s=r.map(a=>sm(a));i=this.write(s,e,n)}else i=this.write(r,e,n);return{dataId:i,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,i,s){this.data.set(e,{values:n,dtype:i,refCount:s})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const i=this.readSync(r.real.dataId),s=this.readSync(r.imag.dataId);return Jc(i,s)}return this.data.get(e).values}bufferSync(e){const n=this.readSync(e.dataId);let r=n;if(e.dtype==="string")try{r=n.map(i=>wp(i))}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Jt(e.shape,e.dtype,r)}makeOutput(e,n,r){const i=this.write(e,n,r);return wc().makeTensorFromDataId(i,n,r,this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=Gi();return e(),{kernelMs:Gi()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){gt([e],"where");const n=this.readSync(e.dataId);return Y9e(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}q3.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zie(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const K9e=t=>{const{x:e}=t.inputs,n=t.backend;gt(e,"abs");let r=new Float32Array(Ee(e.shape));const i=n.data.get(e.dataId).values;return r=zie(i),n.makeOutput(r,e.shape,"float32")},Z9e={kernelName:Rw,backendName:"cpu",kernelFunc:K9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Br(t){return(e,n,r,i,s)=>{const a=cn(e,n),o=a.length,l=It(a),u=Ee(a),c=fi(s,u),f=e.length,d=n.length,h=It(e),p=It(n),m=Lx(e,a),g=Lx(n,a);if(m.length+g.length===0)for(let v=0;v<c.length;++v)c[v]=t(r[v%r.length],i[v%i.length]);else for(let v=0;v<c.length;++v){const y=yv(v,o,l),b=y.slice(-f);m.forEach(C=>b[C]=0);const x=$l(b,f,h),w=y.slice(-d);g.forEach(C=>w[C]=0);const S=$l(w,d,p);c[v]=t(r[x],i[S])}return[c,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ua(t){const{inputs:e,backend:n}=t,{real:r,imag:i}=e,s=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,o=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(o.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",s),imag:n.makeTensorInfo(i.shape,"float32",a)},o}const J9e={kernelName:jA,backendName:"cpu",kernelFunc:ua};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ST(t,e,n="float32"){if(n==="complex64"){const i=ST(t,e,"float32"),s=ST(t,e,"float32");return ua({inputs:{real:i,imag:s},backend:t})}const r=$i(Ee(e),n);return t.makeTensorInfo(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fu(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const Q9e={kernelName:zv,backendName:"cpu",kernelFunc:Fu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mp(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.data.get(r.dataId).complexTensorInfos.real,s=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,s)}const eUe={kernelName:xM,backendName:"cpu",kernelFunc:Mp};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ad(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dtype:s}=r;if(s==="complex64"){if(i.dtype==="complex64")return Fu({inputs:{x:i},backend:n});const a=ST(n,i.shape,i.dtype),o=Ad({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),l=ua({inputs:{real:o,imag:a},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),l}if(i.dtype==="complex64"){const a=Mp({inputs:{input:i},backend:n}),o=Ad({inputs:{x:a},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(a),o}if(!K5(i.dtype,s)){const a=Fu({inputs:{x:i},backend:n});return{dataId:a.dataId,shape:a.shape,dtype:s}}if(s==="int32"){const a=n.data.get(i.dataId).values,o=Int32Array.from(a);return n.makeTensorInfo(i.shape,"int32",o)}if(s==="bool"){const a=n.data.get(i.dataId).values,o=Bd([0],i.dtype),[l,u]=Br((c,f)=>c!==f?1:0)(i.shape,[],a,o,"bool");return n.makeTensorInfo(u,"bool",l)}throw new Error(`Error in Cast: failed to cast ${i.dtype} to ${s}`)}const tUe={kernelName:Tv,backendName:"cpu",kernelFunc:Ad};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yi(t,e,n,r){return n==null?({inputs:i,backend:s})=>{const{a,b:o}=i,l=s;gt([a,o],t);const u=l.data.get(a.dataId).values,c=l.data.get(o.dataId).values,f=r||a.dtype,[d,h]=e(a.shape,o.shape,u,c,f);return l.makeTensorInfo(h,f,d)}:({inputs:i,backend:s})=>{const{a,b:o}=i,l=s;if(a.dtype==="complex64"||o.dtype==="complex64"){const u=Ad({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),c=l.data.get(u.dataId),f=c.complexTensorInfos.real,d=c.complexTensorInfos.imag,h=l.data.get(f.dataId).values,p=l.data.get(d.dataId).values,m=Ad({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),g=l.data.get(m.dataId),v=g.complexTensorInfos.real,y=g.complexTensorInfos.imag,b=l.data.get(v.dataId).values,x=l.data.get(y.dataId).values,[w,S,C]=n(a.shape,o.shape,h,p,b,x),_=l.makeTensorInfo(C,"float32",w),E=l.makeTensorInfo(C,"float32",S),T=ua({inputs:{real:_,imag:E},backend:l});return l.disposeIntermediateTensorInfo(u),l.disposeIntermediateTensorInfo(m),l.disposeIntermediateTensorInfo(_),l.disposeIntermediateTensorInfo(E),T}else{const u=l.data.get(a.dataId).values,c=l.data.get(o.dataId).values,f=r||a.dtype,[d,h]=e(a.shape,o.shape,u,c,f);return l.makeTensorInfo(h,f,d)}}}function K6(t){return(e,n,r,i,s,a)=>{const o=cn(e,n),l=Ee(o),u=o.length,c=It(o),f=fi("float32",l),d=fi("float32",l),h=Lx(e,o),p=Lx(n,o),m=Jc(r,i),g=Jc(s,a),v=e.length,y=It(e),b=n.length,x=It(n);if(h.length+p.length===0)for(let w=0;w<f.length;w++){const S=w%m.length,C=w%g.length,_=t(m[S*2],m[S*2+1],g[C*2],g[C*2+1]);f[w]=_.real,d[w]=_.imag}else for(let w=0;w<f.length;w++){const S=yv(w,u,c),C=S.slice(-v);h.forEach(M=>C[M]=0);const _=$l(C,v,y),E=S.slice(-b);p.forEach(M=>E[M]=0);const T=$l(E,b,x),k=t(m[_*2],m[_*2+1],g[T*2],g[T*2+1]);f[w]=k.real,d[w]=k.imag}return[f,d,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bie=Br((t,e)=>t+e),nUe=K6((t,e,n,r)=>({real:t+n,imag:e+r})),c2=yi(im,Bie,nUe),rUe={kernelName:im,backendName:"cpu",kernelFunc:c2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z6(t,e,n,r,i){const s=Ee(r),a=$i(i,n);for(let o=0;o<t.length;o++){const l=t[o];if(l<0)throw new Error("Input x must be non-negative!");l>=i||(s>0?a[l]+=e[o]:a[l]+=1)}return a}function Uie(t,e,n,r=!1){const i=t.shape[0],s=t.shape[1],a=Jt([i,n],e.dtype);for(let o=0;o<i;o++)for(let l=0;l<s;l++){const u=t.get(o,l);if(u<0)throw new Error("Input x must be non-negative!");u>=n||(r?a.set(1,o,u):e.size>0?a.set(a.get(o,u)+e.get(o,l),o,u):a.set(a.get(o,u)+1,o,u))}return a}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iy(t){return(e,n,r)=>{const i=fi(n,e.length);for(let s=0;s<e.length;++s)i[s]=t(e[s],r);return i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fn(t,e,n){return({inputs:r,attrs:i,backend:s})=>{const{x:a}=r;if(gt(a,t),a.dtype==="string"||n==="string")throw new Error("unaryKernelFunc does not support string input/output");const o=s,l=o.data.get(a.dataId).values,u=Ee(a.shape),c=n||a.dtype,f=rm(c,u);for(let d=0;d<u;++d)f[d]=e(l[d],i);return o.makeTensorInfo(a.shape,c,f)}}function Dy(t,e,n){return({inputs:r,attrs:i,backend:s})=>{const{x:a}=r;if(gt(a,t),a.dtype==="string"||n==="string")throw new Error("unaryKernelFunc does not support string input/output");const o=s,l=o.data.get(a.dataId).values,u=n||a.dtype,c=e(l,u,i);return o.makeTensorInfo(a.shape,u,c)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vie=Iy(t=>Math.ceil(t)),iUe=Dy(kv,Vie),sUe={kernelName:kv,backendName:"cpu",kernelFunc:iUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wie(t,e,n,r){const i=rm(n,Ee(e));if(r&&n!=="string"){let s=0;t.forEach(a=>{const o=Ee(a.shape);i.set(a.vals,s),s+=o})}else{let s=0;t.forEach(a=>{const o=n==="string"?xz(a.vals):a.vals;let l=0;for(let u=0;u<a.shape[0];++u){const c=u*e[1]+s;for(let f=0;f<a.shape[1];++f)i[c+f]=o[l++]}s+=a.shape[1]})}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gie=Iy(t=>Math.exp(t)),Hie=Dy(Rv,Gie),aUe={kernelName:Rv,backendName:"cpu",kernelFunc:Hie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jie=Iy(t=>Math.expm1(t)),oUe=Dy(Ov,jie),lUe={kernelName:Ov,backendName:"cpu",kernelFunc:oUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qie=Iy(t=>Math.floor(t)),uUe=Dy(Fv,qie),cUe={kernelName:Fv,backendName:"cpu",kernelFunc:uUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xie(t,e,n){const r=Jt(n,t.dtype);for(let i=0;i<r.size;++i){const a=r.indexToLoc(i).slice(),o=a[0],l=a[2],u=e.locToIndex([o,l]);a[2]=e.values[u];const c=t.locToIndex(a);r.values[i]=t.values[c]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yie=Br((t,e)=>t>e?1:0),fUe=yi(e_,Yie,null,"bool"),dUe={kernelName:e_,backendName:"cpu",kernelFunc:fUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kie=Br((t,e)=>t<e?1:0),hUe=yi(n_,Kie,null,"bool"),pUe={kernelName:n_,backendName:"cpu",kernelFunc:hUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zie(t,e,n){const r=(e-t)/(n-1),i=$i(n,"float32");i[0]=t;for(let s=1;s<i.length;s++)i[s]=i[s-1]+r;return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jie=Iy(t=>Math.log(t)),mUe=Dy(Wv,Jie),gUe={kernelName:Wv,backendName:"cpu",kernelFunc:mUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qie(t,e,n,r){const i=fi(r,Ee(n));for(let s=0;s<i.length;++s){const a=s*e;let o=t[a];for(let l=0;l<e;++l){const u=t[a+l];u>o&&(o=u)}i[s]=o}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ese=Br((t,e)=>Math.max(t,e)),vUe=yi(Hv,ese),yUe={kernelName:Hv,backendName:"cpu",kernelFunc:vUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tse=Br((t,e)=>Math.min(t,e)),bUe=yi(jv,tse),xUe={kernelName:jv,backendName:"cpu",kernelFunc:bUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J6=Br((t,e)=>t*e),wUe=K6((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),Q6=yi(Xv,J6,wUe),_Ue={kernelName:Xv,backendName:"cpu",kernelFunc:Q6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nse(t,e,n){const r=of(-1,n);return J6([],e,r,t,n)}function SUe(t){const{inputs:e,backend:n}=t,{x:r}=e;gt(r,"neg");const i=n.data.get(r.dataId).values,[s,a]=nse(i,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,s)}const CUe={kernelName:p_,backendName:"cpu",kernelFunc:SUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rse=Br((t,e)=>t!==e?1:0),EUe=yi(m_,rse,null,"bool"),TUe={kernelName:m_,backendName:"cpu",kernelFunc:EUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eB(t,e,n,r,i){const s=e.length,a=Ee(e),o=It(e),l=It(i),u=fi(n,Ee(i));for(let c=0;c<a;++c){const f=yv(c,s,o),d=new Array(f.length);for(let p=0;p<d.length;p++)d[p]=f[r[p]];const h=$l(d,s,l);u[h]=t[c]}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tl(t){const{inputs:e,attrs:n,backend:r}=t,{x:i}=e,{perm:s}=n;gt(i,"transpose");const a=i.shape.length,o=new Array(a);for(let f=0;f<o.length;f++)o[f]=i.shape[s[f]];const l=r.data.get(i.dataId).values,u=eB(l,i.shape,i.dtype,s,o);return{dataId:r.write(u,o,i.dtype),shape:o,dtype:i.dtype}}const kUe={kernelName:$_,backendName:"cpu",kernelFunc:tl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ise(t,e,n,r){const[i,s]=vi(t,r),a=wa(e,"int32"),o=$i(Ee(i),a),l=Ee(s);for(let u=0;u<o.length;++u){const c=u*l;let f=1;for(let d=0;d<l;++d)f*=n[c+d];o[u]=f}return{outVals:o,outShape:i,outDtype:a}}function AUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r;gt(i,"prod");const o=i.shape.length,l=Xt(s,i.shape),u=Ir(l,o);let c=l,f=i;const d=[];u!=null&&(f=tl({inputs:{x:i},backend:n,attrs:{perm:u}}),d.push(f),c=zr(c.length,o));const h=n.data.get(f.dataId).values,{outVals:p,outShape:m,outDtype:g}=ise(f.shape,f.dtype,h,c);let v=m;return a&&(v=$r(m,l)),d.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.makeTensorInfo(v,g,p)}const MUe={kernelName:yM,backendName:"cpu",kernelFunc:AUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sse(t,e,n,r){const i=t===e,s=t<e&&n<0,a=e<t&&n>1;if(i||s||a)return $i(0,r);const o=Math.abs(Math.ceil((e-t)/n)),l=$i(o,r);e<t&&n===1&&(n=-1),l[0]=t;for(let u=1;u<l.length;u++)l[u]=l[u-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ase=Iy(t=>1/Math.sqrt(t)),NUe=Dy(ey,ase),$Ue={kernelName:ey,backendName:"cpu",kernelFunc:NUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ose(t,e,n,r,i){const s=d4(r,e,n),a=Ee(n),o=It(r);if(s){const f=h4(e,o);return i==="string"?t.slice(f,f+a):t.subarray(f,f+a)}const l=i==="string"?xz(t):t,u=Jt(r,i,l),c=Jt(n,i);for(let f=0;f<c.size;++f){const d=c.indexToLoc(f),h=d.map((p,m)=>p+e[m]);c.set(u.get(...h),...d)}return i==="string"?nre(c.values):c.values}function Np(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,size:a}=r;gt(i,"slice");const[o,l]=FM(i,s,a);f4(i,o,l);const u=n.data.get(i.dataId).values,c=ose(u,o,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,c)}const IUe={kernelName:T_,backendName:"cpu",kernelFunc:Np};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lse=Br((t,e)=>{const n=t-e;return n*n}),DUe=yi(ly,lse),RUe={kernelName:ly,backendName:"cpu",kernelFunc:DUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function use(t,e,n,r){const i=Jt(t,e.dtype);for(let s=0;s<i.size;s++){const a=i.indexToLoc(s),o=new Array(a.length);for(let l=0;l<o.length;l++)o[l]=a[l]*n[l]+r[l];i.set(e.get(...o),...a)}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cse=Br((t,e)=>t-e),OUe=K6((t,e,n,r)=>({real:t-n,imag:e-r})),tB=yi(uy,cse,OUe),FUe={kernelName:uy,backendName:"cpu",kernelFunc:tB};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fse(t,e){const n=new Array(t.rank);for(let i=0;i<n.length;i++)n[i]=t.shape[i]*e[i];const r=Jt(n,t.dtype);for(let i=0;i<r.values.length;++i){const s=r.indexToLoc(i),a=new Array(t.rank);for(let l=0;l<a.length;l++)a[l]=s[l]%t.shape[l];const o=t.locToIndex(a);r.values[i]=t.values[o]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dse(t,e,n,r,i){const s=e[e.length-1],[a,o]=[t.length/s,s],l=fi(n,a*r),u=fi("int32",a*r);for(let f=0;f<a;f++){const d=f*o,h=t.subarray(d,d+o),p=[];for(let y=0;y<h.length;y++)p.push({value:h[y],index:y});p.sort((y,b)=>b.value-y.value);const m=f*r,g=l.subarray(m,m+r),v=u.subarray(m,m+r);for(let y=0;y<r;y++)g[y]=p[y].value,v[y]=p[y].index}const c=e.slice();return c[c.length-1]=r,[Jt(c,n,l),Jt(c,"int32",u)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hse(t,e,n,r){const i=Xt(e,n)[0],s=[1,n[0],1];for(let p=0;p<i;p++)s[0]*=n[p];s[1]=n[i];for(let p=i+1;p<n.length;p++)s[2]*=n[p];const a={},o=new Int32Array(n[i]),l=new Kr(s,r,t),u=[],c=s[0]===1&&s[2]===1;for(let p=0;p<n[i];p++){let m;if(c)m=t[p].toString();else{const g=[];for(let v=0;v<s[0];v++)for(let y=0;y<s[2];y++)g.push(l.get(v,p,y));m=g.join(",")}if(a[m]!==void 0)o[p]=a[m];else{const g=Object.keys(a).length;a[m]=g,o[p]=g,u.push(p)}}const f=s.slice();f[1]=Object.keys(a).length;const d=new Kr(f,r);u.forEach((p,m)=>{for(let g=0;g<s[0];g++)for(let v=0;v<s[2];v++)d.set(l.get(g,p,v),g,m,v)});const h=n.slice();return h[i]=f[1],{outputValues:d.values,outputShape:h,indices:o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LUe=Object.freeze(Object.defineProperty({__proto__:null,addImpl:Bie,bincountImpl:Z6,bincountReduceImpl:Uie,ceilImpl:Vie,concatImpl:Wie,expImpl:Gie,expm1Impl:jie,floorImpl:qie,gatherV2Impl:Xie,greaterImpl:Yie,lessImpl:Kie,linSpaceImpl:Zie,logImpl:Jie,maxImpl:Qie,maximumImpl:ese,minimumImpl:tse,multiplyImpl:J6,negImpl:nse,notEqualImpl:rse,prodImpl:ise,rangeImpl:sse,rsqrtImpl:ase,simpleAbsImpl:zie,sliceImpl:ose,squaredDifferenceImpl:lse,stridedSliceImpl:use,subImpl:cse,tileImpl:fse,topKImpl:dse,transposeImpl:eB,uniqueImpl:hse},Symbol.toStringTag,{value:"Module"}));/** @license See the LICENSE file. */const PUe="3.1.0";/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */v4("cpu",()=>new q3,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pse=Fn(Iv,t=>t>=0?t:Math.exp(t)-1),zUe={kernelName:Iv,backendName:"cpu",kernelFunc:pse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mse(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{alpha:s}=r;gt([i],"leakyRelu");const a=Ee(i.shape),o=n.data.get(i.dataId).values,l=fi("float32",a);for(let u=0;u<o.length;u++)l[u]=o[u]<0?s*o[u]:o[u];return n.makeTensorInfo(i.shape,"float32",l)}const BUe={kernelName:t_,backendName:"cpu",kernelFunc:mse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UUe=Br((t,e)=>t<0?e*t:t);function gse(t){const{inputs:e,backend:n}=t,{x:r,alpha:i}=e;gt([r,i],"prelu");const s=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,[o,l]=UUe(r.shape,i.shape,s,a,r.dtype);return n.makeTensorInfo(l,r.dtype,o)}const VUe={kernelName:x_,backendName:"cpu",kernelFunc:gse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vse=Fn(Zv,t=>Math.max(0,t)),WUe={kernelName:Zv,backendName:"cpu",kernelFunc:vse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yse=Fn(Jv,t=>Math.min(Math.max(0,t),6)),GUe={kernelName:Jv,backendName:"cpu",kernelFunc:yse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nB(t,e,n,r,i){if(n==="linear")return Fu({inputs:{x:e},backend:t});if(n==="relu")return vse({inputs:{x:e},backend:t});if(n==="elu")return pse({inputs:{x:e},backend:t});if(n==="relu6")return yse({inputs:{x:e},backend:t});if(n==="prelu")return gse({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return mse({inputs:{x:e},backend:t,attrs:{alpha:i}});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ur(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{shape:s}=r,a=Ee(i.shape),o=Y5(s,a),l=Ee(o);R(a===l,()=>`The new shape (${o}) has ${l} elements and the old shape (${i.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`),n.incRef(i.dataId);const u=n.data.get(i.dataId);if(u.complexTensorInfos!=null){const c=u.complexTensorInfos.real,f=u.complexTensorInfos.imag;c.shape=o,f.shape=o}return{dataId:i.dataId,shape:o,dtype:i.dtype}}const HUe={kernelName:w_,backendName:"cpu",kernelFunc:ur};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bse(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s}=e,{transposeA:a,transposeB:o}=r;gt([i,s],"matMul");const l=i.shape.length,u=s.shape.length,c=a?i.shape[l-2]:i.shape[l-1],f=o?s.shape[u-1]:s.shape[u-2],d=a?i.shape[l-1]:i.shape[l-2],h=o?s.shape[u-2]:s.shape[u-1],p=i.shape.slice(0,-2),m=s.shape.slice(0,-2),g=Ee(p),v=Ee(m),y=g===v||g===1||v===1;R(l>=2&&u>=2&&y,()=>`Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input batch dimensions of (${p}) and (${m}).`);const x=(g>v?i.shape.slice(0,-2):s.shape.slice(0,-2)).concat([d,h]);R(c===f,()=>`Error in matMul: inner shapes (${c}) and (${f}) of Tensors with shapes ${i.shape} and ${s.shape} and transposeA=${a} and transposeB=${o} must match.`);const w=a?[g,c,d]:[g,d,c],S=o?[v,h,f]:[v,f,h],C=ur({inputs:{x:i},backend:n,attrs:{shape:w}}),_=ur({inputs:{x:s},backend:n,attrs:{shape:S}}),E=a?C.shape[1]:C.shape[2],T=a?C.shape[2]:C.shape[1],k=o?_.shape[1]:_.shape[2],M=Math.max(g,v),A=n.data.get(C.dataId).values,N=n.data.get(_.dataId).values,$=It(C.shape),D=It(_.shape),[P,O,B]=a?[$[0],1,$[1]]:[$[0],$[1],1],[H,te,q]=o?[1,D[1],D[0]]:[D[1],1,D[0]],Z=T*k,ne=Jt([M,T,k],C.dtype),G=ne.values,he=n.blockSize;for(let ve=0;ve<M;ve++)for(let we=0;we<T;we+=he)for(let X=0;X<k;X+=he)for(let ae=0;ae<E;ae+=he){const pe=Math.min(we+he,T),j=Math.min(X+he,k),ze=Math.min(ae+he,E);for(let $e=we;$e<pe;$e++)for(let nt=X;nt<j;nt++){let Je=0;for(let Q=ae;Q<ze;Q++){const Ie=Math.min(ve,g-1)*P,Ne=Math.min(ve,v-1)*q,ht=A[Ie+$e*O+Q*B],Et=N[Q*H+nt*te+Ne];Je+=ht*Et}G[ve*Z+($e*k+nt)]+=Je}}return n.disposeIntermediateTensorInfo(C),n.disposeIntermediateTensorInfo(_),n.makeTensorInfo(x,ne.dtype,ne.values)}const jUe={kernelName:Bw,backendName:"cpu",kernelFunc:bse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qUe(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s,bias:a,preluActivationWeights:o}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:f}=r;let d,h,p;const m=[];d=bse({inputs:{a:i,b:s},attrs:{transposeA:l,transposeB:u},backend:n}),a&&(h=c2({inputs:{a:d,b:a},backend:n}),m.push(d),d=h),c&&(p=nB(n,d,c,o,f),m.push(d),d=p);for(const v of m)n.disposeIntermediateTensorInfo(v);return d}const XUe={kernelName:Ax,backendName:"cpu",kernelFunc:qUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YUe=Fn(bv,t=>Math.acos(t)),KUe={kernelName:bv,backendName:"cpu",kernelFunc:YUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZUe=Fn(xv,t=>Math.acosh(t)),JUe={kernelName:xv,backendName:"cpu",kernelFunc:ZUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QUe(t){const{inputs:e,backend:n}=t,r=e;gt(e,"addN");const i=r.map(o=>n.data.get(o.dataId).values),s=Jt(r[0].shape,r[0].dtype),a=s.values;for(let o=0;o<r.length;o++){const l=i[o];for(let u=0;u<a.length;u++)a[u]+=l[u]}return n.makeTensorInfo(s.shape,s.dtype,s.values)}const eVe={kernelName:Ow,backendName:"cpu",kernelFunc:QUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r;gt(i,"all");const o=Xt(s,i.shape);let l=o;const u=Ir(l,i.shape.length);let c=i;u!=null&&(c=tl({inputs:{x:i},backend:n,attrs:{perm:u}}),l=zr(l.length,i.shape.length)),Oi("all",l,c.shape.length);const[f,d]=vi(c.shape,l),h=Ee(d),p=$i(Ee(f),c.dtype),m=n.data.get(c.dataId).values;for(let v=0;v<p.length;++v){const y=v*h;let b=m[y];for(let x=0;x<h;++x){const w=m[y+x];b=b&&w}p[v]=b}u!=null&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(f,c.dtype,p);if(a){const v=$r(f,o),y=ur({inputs:{x:g},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(g),y}return g}const nVe={kernelName:UA,backendName:"cpu",kernelFunc:tVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r;gt(i,"any");const o=Xt(s,i.shape);let l=o;const u=Ir(l,i.shape.length);let c=i;u!=null&&(c=tl({inputs:{x:i},backend:n,attrs:{perm:u}}),l=zr(l.length,i.shape.length)),Oi("any",l,c.shape.length);const[f,d]=vi(c.shape,l),h=Ee(d),p=$i(Ee(f),c.dtype),m=n.data.get(c.dataId).values;for(let v=0;v<p.length;++v){const y=v*h;let b=m[y];for(let x=0;x<h;++x){const w=m[y+x];b=b||w}p[v]=b}u!=null&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(f,c.dtype,p);if(a){const v=$r(f,o),y=ur({inputs:{x:g},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(g),y}return g}const iVe={kernelName:VA,backendName:"cpu",kernelFunc:rVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;gt(i,"argMax");let a=Xt(s,i.shape);const o=Ir(a,i.shape.length);let l=i;const u=[];o!=null&&(l=tl({inputs:{x:i},backend:n,attrs:{perm:o}}),u.push(l),a=zr(a.length,l.shape.length)),a=[a[0]],Oi("argMax",a,l.shape.length);const[c,f]=vi(l.shape,a),d=Ee(c),h=$i(d,"int32"),p=Ee(f),m=n.data.get(l.dataId).values;for(let g=0;g<h.length;++g){const v=g*p;let y=m[v],b=0;for(let x=0;x<p;++x){const w=m[v+x];w>y&&(y=w,b=x)}h[g]=b}return u.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.makeTensorInfo(c,"int32",h)}const aVe={kernelName:Fw,backendName:"cpu",kernelFunc:sVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;gt(i,"argMin");let a=Xt(s,i.shape);const o=Ir(a,i.shape.length);let l=i;const u=[];o!=null&&(l=tl({inputs:{x:i},backend:n,attrs:{perm:o}}),u.push(l),a=zr(a.length,l.shape.length)),a=[a[0]],Oi("argMin",a,l.shape.length);const[c,f]=vi(l.shape,a),d=Ee(c),h=$i(d,"int32"),p=Ee(f),m=n.data.get(l.dataId).values;for(let g=0;g<h.length;++g){const v=g*p;let y=m[v],b=0;for(let x=0;x<p;++x){const w=m[v+x];w<y&&(y=w,b=x)}h[g]=b}return u.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.makeTensorInfo(c,"int32",h)}const lVe={kernelName:Lw,backendName:"cpu",kernelFunc:oVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uVe=Fn(wv,t=>Math.asin(t)),cVe={kernelName:wv,backendName:"cpu",kernelFunc:uVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fVe=Fn(_v,t=>Math.asinh(t)),dVe={kernelName:_v,backendName:"cpu",kernelFunc:fVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hVe=Fn(Sv,t=>Math.atan(t)),pVe={kernelName:Sv,backendName:"cpu",kernelFunc:hVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mVe=Br((t,e)=>Math.atan2(t,e)),gVe=yi(Ev,mVe),vVe={kernelName:Ev,backendName:"cpu",kernelFunc:gVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yVe=Fn(Cv,t=>Math.atanh(t)),bVe={kernelName:Cv,backendName:"cpu",kernelFunc:yVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rB(t,e,n,r,i,s){const a=i.strideHeight,o=i.strideWidth,l=i.dilationHeight,u=i.dilationWidth,c=i.effectiveFilterHeight,f=i.effectiveFilterWidth,d=i.padInfo.top,h=i.padInfo.left,p=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=Jt(i.outShape,n),g=m.values,v=i.outShape[1]*i.outShape[2]*i.outShape[3],y=i.outShape[2]*i.outShape[3],b=i.outShape[3];for(let x=0;x<i.batchSize;++x){const w=x*v,S=x*r[0];for(let C=0;C<i.inChannels;++C)for(let _=0;_<i.outHeight;++_){const E=_*a-d,T=Math.max(0,E),k=Math.min(i.inHeight,c+E),M=w+_*y;for(let A=0;A<i.outWidth;++A){const N=A*o-h,$=Math.max(0,N),D=Math.min(i.inWidth,f+N);let P=p,O=0,B=0;for(let te=T;te<k;te+=l){const q=S+te*r[1];for(let Z=$;Z<D;Z+=u){const ne=q+Z*r[2],G=t[ne+C];s==="max"&&G>P?P=G:s==="avg"&&(O+=G,B++)}if(isNaN(P))break}const H=M+A*b+C;g[H]=s==="avg"?O/B:P}}}return m}function xse(t,e,n,r,i=!1,s=!1){const a=Jt(r.outShape,"int32"),o=r.strideHeight,l=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterHeight,d=r.effectiveFilterWidth,h=r.padInfo.top,p=r.padInfo.left,m=Jt(e,n,t);for(let g=0;g<r.batchSize;++g)for(let v=0;v<r.inChannels;++v)for(let y=0;y<r.outHeight;++y){const b=y*o-h;let x=b;for(;x<0;)x+=u;const w=Math.min(r.inHeight,f+b);for(let S=0;S<r.outWidth;++S){const C=S*l-p;let _=C;for(;_<0;)_+=c;const E=Math.min(r.inWidth,d+C);let T=Number.NEGATIVE_INFINITY,k=-1;for(let M=x;M<w;M+=u){const A=M-b;for(let N=_;N<E;N+=c){const $=N-C,D=m.get(g,M,N,v);D>T&&(T=D,i?k=s?((g*r.inHeight+M)*r.inWidth+N)*r.inChannels+v:(M*r.inWidth+N)*r.inChannels+v:k=A*d+$)}}a.set(k,g,y,S,v)}}return a}function wse(t,e,n,r,i,s){const a=i.strideDepth,o=i.strideHeight,l=i.strideWidth,u=i.dilationDepth,c=i.dilationHeight,f=i.dilationWidth,d=i.effectiveFilterDepth,h=i.effectiveFilterHeight,p=i.effectiveFilterWidth,m=i.padInfo.front,g=i.padInfo.top,v=i.padInfo.left,y=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=Jt(i.outShape,n),x=b.values,w=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],S=i.outShape[2]*i.outShape[3]*i.outShape[4],C=i.outShape[3]*i.outShape[4],_=i.outShape[4];for(let E=0;E<i.batchSize;++E){const T=E*w,k=E*r[0];for(let M=0;M<i.inChannels;++M)for(let A=0;A<i.outDepth;++A){const N=A*a-m;let $=N;for(;$<0;)$+=u;const D=Math.min(i.inDepth,d+N),P=T+A*S;for(let O=0;O<i.outHeight;++O){const B=O*o-g;let H=B;for(;H<0;)H+=c;const te=Math.min(i.inHeight,h+B),q=P+O*C;for(let Z=0;Z<i.outWidth;++Z){const ne=Z*l-v;let G=ne;for(;G<0;)G+=f;const he=Math.min(i.inWidth,p+ne),ve=q+Z*_;let we=y,X=0,ae=0;for(let j=$;j<D;j+=u){const ze=k+j*r[1];for(let $e=H;$e<te;$e+=c){const nt=ze+$e*r[2];for(let Je=G;Je<he;Je+=f){const Q=nt+Je*r[3],Ie=t[Q+M];if(s==="max"&&Ie>we?we=Ie:s==="avg"&&(X+=Ie,ae++),isNaN(we))break}if(isNaN(we))break}if(isNaN(we))break}const pe=ve+M;x[pe]=s==="avg"?X/ae:we}}}}return b}function xVe(t,e){const n=Jt(e.outShape,"int32"),r=e.strideDepth,i=e.strideHeight,s=e.strideWidth,a=e.dilationDepth,o=e.dilationHeight,l=e.dilationWidth,u=e.effectiveFilterDepth,c=e.effectiveFilterHeight,f=e.effectiveFilterWidth,d=e.padInfo.front,h=e.padInfo.top,p=e.padInfo.left;for(let m=0;m<e.batchSize;++m)for(let g=0;g<e.inChannels;++g)for(let v=0;v<e.outDepth;++v){const y=v*r-d;let b=y;for(;b<0;)b+=a;const x=Math.min(e.inDepth,u+y);for(let w=0;w<e.outHeight;++w){const S=w*i-h;let C=S;for(;C<0;)C+=o;const _=Math.min(e.inHeight,c+S);for(let E=0;E<e.outWidth;++E){const T=E*s-p;let k=T;for(;k<0;)k+=l;const M=Math.min(e.inWidth,f+T);let A=Number.NEGATIVE_INFINITY,N=-1;for(let $=b;$<x;$+=a){const D=$-y;for(let P=C;P<_;P+=o){const O=P-S;for(let B=k;B<M;B+=l){const H=B-T,te=t.get(m,$,P,B,g);te>=A&&(A=te,N=D*c*f+O*c+H)}}}n.set(N,m,v,w,E,g)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;gt(i,"avgPool");const{filterSize:s,strides:a,pad:o,dimRoundingMode:l}=r,u=1;R(Ri(a,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`);const c=ol(i.shape,s,a,u,o,l);let f;if(c.filterWidth===1&&c.filterHeight===1&&Tn(c.inShape,c.outShape))f=Fu({inputs:{x:i},backend:n});else{const d=n.data.get(i.dataId).values,h=It(i.shape),p=rB(d,i.shape,i.dtype,h,c,"avg");f=n.makeTensorInfo(c.outShape,i.dtype,p.values)}return f}const _Ve={kernelName:Pw,backendName:"cpu",kernelFunc:wVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:a,pad:o,dimRoundingMode:l,dataFormat:u}=r;gt(i,"avgPool3d");const c=lf(i.shape,s,a,1,o,l,u),f=n.data.get(i.dataId).values,d=wse(f,i.shape,i.dtype,It(i.shape),c,"avg");return n.makeTensorInfo(d.shape,"float32",d.values)}const CVe={kernelName:zw,backendName:"cpu",kernelFunc:SVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EVe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,{filterSize:a,strides:o,pad:l,dimRoundingMode:u}=r;gt([i,s],"avgPool3DGrad");const c=lf(s.shape,a,o,1,l,u),f=c.strideDepth,d=c.strideHeight,h=c.strideWidth,p=c.filterDepth,m=c.filterHeight,g=c.filterWidth,v=c.dilationDepth,y=c.dilationHeight,b=c.dilationWidth,x=c.effectiveFilterDepth,w=c.effectiveFilterHeight,S=c.effectiveFilterWidth,C=x-1-c.padInfo.front,_=S-1-c.padInfo.left,E=w-1-c.padInfo.top,T=Jt(s.shape,"float32"),k=1/(p*m*g),M=n.bufferSync(i);for(let A=0;A<c.batchSize;++A)for(let N=0;N<c.inChannels;++N)for(let $=0;$<c.inDepth;++$)for(let D=0;D<c.inHeight;++D)for(let P=0;P<c.inWidth;++P){const O=$-C,B=D-E,H=P-_;let te=0;for(let q=0;q<x;q+=v){const Z=(O+q)/f;if(!(Z<0||Z>=c.outDepth||Math.floor(Z)!==Z))for(let ne=0;ne<w;ne+=y){const G=(B+ne)/d;if(!(G<0||G>=c.outHeight||Math.floor(G)!==G))for(let he=0;he<S;he+=b){const ve=(H+he)/h;if(ve<0||ve>=c.outWidth||Math.floor(ve)!==ve)continue;const we=M.get(A,Z,G,ve,N);te+=we}}}T.set(te*k,A,$,D,P,N)}return n.makeTensorInfo(T.shape,T.dtype,T.values)}const TVe={kernelName:GA,backendName:"cpu",kernelFunc:EVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kVe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,a=s;gt([i,s],"avgPoolGrad");const{filterSize:o,strides:l,pad:u}=r,c=ol(a.shape,o,l,1,u),f=c.strideHeight,d=c.strideWidth,h=c.filterHeight,p=c.filterWidth,m=c.dilationHeight,g=c.dilationWidth,v=c.effectiveFilterHeight,y=c.effectiveFilterWidth,b=y-1-c.padInfo.left,x=v-1-c.padInfo.top,w=Jt(a.shape,"float32"),S=1/(h*p),C=n.data.get(i.dataId).values,_=Jt(i.shape,"float32",C);for(let E=0;E<c.batchSize;++E)for(let T=0;T<c.inChannels;++T)for(let k=0;k<c.inHeight;++k)for(let M=0;M<c.inWidth;++M){const A=k-x,N=M-b;let $=0;for(let D=0;D<v;D+=m){const P=(A+D)/f;if(!(P<0||P>=c.outHeight||Math.floor(P)!==P))for(let O=0;O<y;O+=g){const B=(N+O)/d;if(B<0||B>=c.outWidth||Math.floor(B)!==B)continue;const H=_.get(E,P,B,T);$+=H}}w.set($*S,E,k,M,T)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const AVe={kernelName:WA,backendName:"cpu",kernelFunc:kVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,scale:s,offset:a,mean:o,variance:l}=e;R(o.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),R(a==null||o.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),R(s==null||o.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),gt([i,o,l,s,a],"batchNorm");let{varianceEpsilon:u}=r;u==null&&(u=.001);const c=n.data.get(i.dataId).values,f=n.data.get(o.dataId).values,d=n.data.get(l.dataId).values,h=s?n.data.get(s.dataId).values:new Float32Array([1]),p=a?n.data.get(a.dataId).values:new Float32Array([0]),m=new Float32Array(c.length),g=p.length,v=h.length,y=d.length,b=f.length;let x=0,w=0,S=0,C=0;for(let _=0;_<c.length;++_)m[_]=p[x++]+(c[_]-f[w++])*h[S++]/Math.sqrt(d[C++]+u),x>=g&&(x=0),w>=b&&(w=0),S>=v&&(S=0),C>=y&&(C=0);return n.makeTensorInfo(i.shape,i.dtype,m)}const NVe={kernelName:Jw,backendName:"cpu",kernelFunc:MVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ve(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,crops:a}=r;gt([i],"batchToSpaceND");const o=s.reduce((v,y)=>v*y),l=K_(i.shape,s,o),u=Z_(l.length,s.length),c=J_(i.shape,s,o),f=uz(a,s.length),d=cz(c,a,s.length),h=ur({inputs:{x:i},backend:n,attrs:{shape:l}}),p=tl({inputs:{x:h},backend:n,attrs:{perm:u}}),m=ur({inputs:{x:p},backend:n,attrs:{shape:c}}),g=Np({inputs:{x:m},backend:n,attrs:{begin:f,size:d}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}const IVe={kernelName:Uw,backendName:"cpu",kernelFunc:$Ve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:a}=r,o=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,u=Z6(o,l,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,u)}const RVe={kernelName:HA,backendName:"cpu",kernelFunc:DVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OVe=Fn(Av,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),FVe={kernelName:Av,backendName:"cpu",kernelFunc:OVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LVe=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(Ee(e.shape)),i=n.data.get(e.dataId),s=i.complexTensorInfos.real,a=i.complexTensorInfos.imag,o=n.data.get(s.dataId).values,l=n.data.get(a.dataId).values;for(let u=0;u<o.length;u++){const c=o[u],f=l[u];r[u]=Math.hypot(c,f)}return n.makeOutput(r,e.shape,"float32")},PVe={kernelName:Vw,backendName:"cpu",kernelFunc:LVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A0(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.data.get(r.dataId).complexTensorInfos.imag,s=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,s)}const zVe={kernelName:lM,backendName:"cpu",kernelFunc:A0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M0(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r,s=Xt(i,e[0].shape)[0];let a=zc(e.map(m=>m.shape),s);if(Ee(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const o=e.filter(m=>Ee(m.shape)>0);if(o.length===1)return Fu({inputs:{x:o[0]},backend:n});const l=o.map(m=>m.shape);if(az(l,s),o[0].dtype==="complex64"){const m=o.map(x=>Mp({inputs:{input:x},backend:n})),g=o.map(x=>A0({inputs:{input:x},backend:n})),v=M0({inputs:m,backend:n,attrs:{axis:s}}),y=M0({inputs:g,backend:n,attrs:{axis:s}}),b=ua({inputs:{real:v,imag:y},backend:n});return m.forEach(x=>n.disposeIntermediateTensorInfo(x)),g.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),b}const u=o.map(m=>{const v=[-1,Ee(m.shape.slice(s))];return ur({inputs:{x:m},backend:n,attrs:{shape:v}})}),c=u.map(m=>({vals:n.data.get(m.dataId).values,shape:m.shape}));a=zc(u.map(m=>m.shape),1);const f=u[0].shape[0]===1,d=Wie(c,a,e[0].dtype,f),h=zc(o.map(m=>m.shape),s),p=n.makeTensorInfo(h,e[0].dtype,d);return u.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const BVe={kernelName:Ww,backendName:"cpu",kernelFunc:M0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _se(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:a,pad:o,dataFormat:l,dilations:u,dimRoundingMode:c}=r;gt([i,s],"conv2d");const f=uf(l),d=gi(i.shape,s.shape,a,u,o,c,!1,f),h=d.filterHeight,p=d.filterWidth,m=d.dilationHeight,g=d.dilationWidth,v=d.padInfo.left,y=d.padInfo.top,b=d.dataFormat==="channelsLast",x=new Kr(d.outShape,i.dtype),w=It(i.shape),S=It(s.shape),C=w[0],_=b?w[1]:w[2],E=b?w[2]:1,T=b?1:w[1],k=x.strides[0],M=b?x.strides[1]:x.strides[2],A=b?x.strides[2]:1,N=b?1:x.strides[1],$=n.data.get(i.dataId).values,D=n.data.get(s.dataId).values,P=x.values;for(let O=0;O<d.batchSize;++O){const B=O*C,H=O*k;for(let te=0;te<d.outHeight;++te){const q=H+te*M,Z=te*d.strideHeight-y;for(let ne=0;ne<h;++ne){const G=Z+ne*m;if(G<0||G>=d.inHeight)continue;const he=ne*S[0],ve=B+G*_;for(let we=0;we<d.outWidth;++we){const X=q+we*A,ae=we*d.strideWidth-v;for(let pe=0;pe<p;++pe){const j=ae+pe*g;if(j<0||j>=d.inWidth)continue;const ze=he+pe*S[1],$e=ve+j*E;let nt=ze;for(let Je=0;Je<d.inChannels;++Je){const Q=$[$e+Je*T];for(let Ie=0;Ie<d.outChannels;++Ie)P[X+Ie*N]+=Q*D[nt+Ie];nt+=d.outChannels}}}}}}return n.makeTensorInfo(x.shape,x.dtype,P)}const UVe={kernelName:Gw,backendName:"cpu",kernelFunc:_se};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:a,pad:o,dataFormat:l,dimRoundingMode:u,filterShape:c}=r;gt([i,s],"conv2dBackpropFilter");const f=uf(l),d=gi(i.shape,c,a,1,o,u,!1,f),{strideHeight:h,strideWidth:p,filterHeight:m,filterWidth:g}=d,v=d.dataFormat==="channelsLast",y=new Kr(d.filterShape,"float32"),b=d.padInfo.left,x=d.padInfo.top,w=n.data.get(i.dataId).values,S=n.data.get(s.dataId).values,C=new Kr(i.shape,i.dtype,w),_=new Kr(s.shape,s.dtype,S);for(let E=0;E<m;++E){const T=Math.max(0,Math.ceil((x-E)/h)),k=Math.min(d.outHeight,(d.inHeight+x-E)/h);for(let M=0;M<g;++M){const A=Math.max(0,Math.ceil((b-M)/p)),N=Math.min(d.outWidth,(d.inWidth+b-M)/p);for(let $=0;$<d.inChannels;++$)for(let D=0;D<d.outChannels;++D){let P=0;for(let O=0;O<d.batchSize;++O)for(let B=T;B<k;++B){const H=E+B*h-x;for(let te=A;te<N;++te){const q=M+te*p-b;v?P+=C.get(O,H,q,$)*_.get(O,B,te,D):P+=C.get(O,$,H,q)*_.get(O,D,B,te)}}y.set(P,E,M,$,D)}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const WVe={kernelName:qA,backendName:"cpu",kernelFunc:VVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GVe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{inputShape:a,strides:o,pad:l,dataFormat:u,dimRoundingMode:c}=r;gt([i,s],"conv2dBackpropInput");const f=It(s.shape),d=It(i.shape);let h=uf(u);const p=gi(a,s.shape,o,1,l,c,!1,h),m=new Kr(p.inShape,"float32"),g=m.values,v=n.data.get(i.dataId).values,y=n.data.get(s.dataId).values,[b,x,w]=f,{batchSize:S,filterHeight:C,filterWidth:_,inChannels:E,inHeight:T,inWidth:k,outChannels:M,outHeight:A,outWidth:N,strideHeight:$,strideWidth:D}=p;h=p.dataFormat;const P=C-1-p.padInfo.top,O=_-1-p.padInfo.left,B=h==="channelsLast",H=m.strides[0],te=B?m.strides[1]:m.strides[2],q=B?m.strides[2]:1,Z=B?1:m.strides[1],ne=d[0],G=B?d[1]:d[2],he=B?d[2]:1,ve=B?1:d[1];for(let we=0;we<S;++we)for(let X=0;X<E;++X)for(let ae=0;ae<T;++ae){const pe=ae-P,j=Math.max(0,Math.ceil(pe/$)),ze=Math.min(A,(C+pe)/$);for(let $e=0;$e<k;++$e){const nt=$e-O,Je=Math.max(0,Math.ceil(nt/D)),Q=Math.min(N,(_+nt)/D);let Ie=0;for(let ht=j;ht<ze;++ht){const Et=ht*$-pe;for(let U=Je;U<Q;++U){const F=U*D-nt,be=ne*we+G*ht+he*U,Be=b*(C-1-Et)+x*(_-1-F)+w*X;for(let Le=0;Le<M;++Le){const Qe=v[be+ve*Le],pt=y[Be+Le];Ie+=Qe*pt}}}const Ne=H*we+te*ae+q*$e+Z*X;g[Ne]=Ie}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const HVe={kernelName:Hw,backendName:"cpu",kernelFunc:GVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:a,pad:o,dilations:l}=r;gt([i,s],"conv3d");const u=Vd(i.shape,s.shape,a,l,o),{filterDepth:c,filterHeight:f,filterWidth:d,dilationDepth:h,dilationHeight:p,dilationWidth:m,padInfo:g}=u,v=g.front,y=g.left,b=g.top,x=new Kr(u.outShape,i.dtype),w=n.data.get(i.dataId).values,S=n.data.get(s.dataId).values,C=x.values,_=It(i.shape),E=It(s.shape);for(let T=0;T<u.batchSize;++T){const k=T*_[0],M=T*x.strides[0];for(let A=0;A<u.outDepth;++A){const N=M+A*x.strides[1],$=A*u.strideDepth-v;for(let D=0;D<c;++D){const P=$+D*h;if(P<0||P>=u.inDepth)continue;const O=D*E[0],B=k+P*_[1];for(let H=0;H<u.outHeight;++H){const te=N+H*x.strides[2],q=H*u.strideHeight-b;for(let Z=0;Z<f;++Z){const ne=q+Z*p;if(ne<0||ne>=u.inHeight)continue;const G=O+Z*E[1],he=B+ne*_[2];for(let ve=0;ve<u.outWidth;++ve){const we=te+ve*u.outChannels,X=ve*u.strideWidth-y;for(let ae=0;ae<d;++ae){const pe=X+ae*m;if(pe<0||pe>=u.inWidth)continue;const j=G+ae*E[2],ze=he+pe*u.inChannels;let $e=j;for(let nt=0;nt<u.inChannels;++nt){const Je=w[ze+nt];for(let Q=0;Q<u.outChannels;++Q)C[we+Q]+=Je*S[$e+Q];$e+=u.outChannels}}}}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const qVe={kernelName:jw,backendName:"cpu",kernelFunc:jVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:a,pad:o,filterShape:l}=r;gt([i,s],"conv3dBackpropFilterV2");const u=It(i.shape),c=It(s.shape),f=Vd(i.shape,l,a,1,o),d=f.strideDepth,h=f.strideHeight,p=f.strideWidth,m=f.filterDepth,g=f.filterHeight,v=f.filterWidth,y=new Kr(f.filterShape,"float32"),b=y.values,[x,w,S,C]=y.strides,_=n.data.get(s.dataId).values,[E,T,k,M]=c,A=n.data.get(i.dataId).values,[N,$,D,P]=u,O=f.padInfo.front,B=f.padInfo.left,H=f.padInfo.top;for(let te=0;te<m;++te){const q=Math.max(0,Math.ceil((O-te)/d)),Z=Math.min(f.outDepth,(f.inDepth+O-te)/d),ne=te*x;for(let G=0;G<g;++G){const he=Math.max(0,Math.ceil((H-G)/h)),ve=Math.min(f.outHeight,(f.inHeight+H-G)/h),we=G*w+ne;for(let X=0;X<v;++X){const ae=Math.max(0,Math.ceil((B-X)/p)),pe=Math.min(f.outWidth,(f.inWidth+B-X)/p),j=X*S+we;for(let ze=0;ze<f.inChannels;++ze){const $e=ze*C+j;for(let nt=0;nt<f.outChannels;++nt){let Je=0;for(let Q=0;Q<f.batchSize;++Q){const Ie=Q*N,Ne=Q*E;for(let ht=q;ht<Z;++ht){const U=(te+ht*d-O)*$+Ie,F=ht*T+Ne;for(let be=he;be<ve;++be){const Le=(G+be*h-H)*D+U,Qe=be*k+F;for(let pt=ae;pt<pe;++pt){const fe=(X+pt*p-B)*P+Le,it=pt*M+Qe;Je+=A[fe+ze]*_[it+nt]}}}}b[$e+nt]=Je}}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const YVe={kernelName:XA,backendName:"cpu",kernelFunc:XVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KVe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{pad:a,strides:o,inputShape:l}=r;gt([i],"conv3dBackpropInputV2");const u=It(i.shape),c=It(s.shape),f=Vd(l,s.shape,o,1,a),d=new Kr(f.inShape,"float32"),h=d.values,[p,m,g,v]=d.strides,y=n.data.get(i.dataId).values,[b,x,w,S]=u,C=n.data.get(s.dataId).values,[_,E,T,k]=c,{batchSize:M,filterDepth:A,filterHeight:N,filterWidth:$,inChannels:D,inDepth:P,inHeight:O,inWidth:B,outChannels:H,outDepth:te,outHeight:q,outWidth:Z,strideDepth:ne,strideHeight:G,strideWidth:he}=f,ve=A-1-f.padInfo.front,we=N-1-f.padInfo.top,X=$-1-f.padInfo.left;for(let ae=0;ae<M;++ae)for(let pe=0;pe<D;++pe)for(let j=0;j<P;++j){const ze=j-ve,$e=Math.max(0,Math.ceil(ze/ne)),nt=Math.min(te,(A+ze)/ne);for(let Je=0;Je<O;++Je){const Q=Je-we,Ie=Math.max(0,Math.ceil(Q/G)),Ne=Math.min(q,(N+Q)/G);for(let ht=0;ht<B;++ht){const Et=ht-X,U=Math.max(0,Math.ceil(Et/he)),F=Math.min(Z,($+Et)/he);let be=0;for(let Be=$e;Be<nt;++Be){const Le=Be*ne-ze;for(let Qe=Ie;Qe<Ne;++Qe){const pt=Qe*G-Q;for(let K=U;K<F;++K){const fe=K*he-Et,it=b*ae+x*Be+w*Qe+S*K,Ze=_*(A-1-Le)+E*(N-1-pt)+T*($-1-fe)+k*pe;for(let dt=0;dt<H;++dt){const wt=y[it+dt],vt=C[Ze+dt];be+=wt*vt}}}}h[p*ae+m*j+g*Je+v*ht+pe]=be}}}return n.makeTensorInfo(d.shape,d.dtype,d.values)}const ZVe={kernelName:YA,backendName:"cpu",kernelFunc:KVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JVe=Fn(Mv,t=>Math.cos(t)),QVe={kernelName:Mv,backendName:"cpu",kernelFunc:JVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eWe=Fn(Nv,t=>Math.cosh(t)),tWe={kernelName:Nv,backendName:"cpu",kernelFunc:eWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nWe(t){const{inputs:e,backend:n,attrs:r}=t,{image:i,boxes:s,boxInd:a}=e,{cropSize:o,method:l,extrapolationValue:u}=r,[c,f,d,h]=i.shape,p=s.shape[0],[m,g]=o,v=Jt([p,m,g,h],"float32"),y=n.data.get(s.dataId).values,b=n.data.get(a.dataId).values,x=n.data.get(i.dataId).values,w=It(i.shape),S=It(v.shape);for(let C=0;C<p;C++){const _=C*4,E=y[_],T=y[_+1],k=y[_+2],M=y[_+3],A=b[C];if(A>=c)continue;const N=m>1?(k-E)*(f-1)/(m-1):0,$=g>1?(M-T)*(d-1)/(g-1):0;for(let D=0;D<m;D++){const P=m>1?E*(f-1)+D*N:.5*(E+k)*(f-1);if(P<0||P>f-1){for(let O=0;O<g;O++)for(let B=0;B<h;B++){const H=B+O*S[2]+D*S[1]+C*S[0];v.values[H]=u}continue}if(l==="bilinear"){const O=Math.floor(P),B=Math.ceil(P),H=P-O;for(let te=0;te<g;te++){const q=g>1?T*(d-1)+te*$:.5*(T+M)*(d-1);if(q<0||q>d-1){for(let he=0;he<h;he++){const ve=he+te*S[2]+D*S[1]+C*S[0];v.values[ve]=u}continue}const Z=Math.floor(q),ne=Math.ceil(q),G=q-Z;for(let he=0;he<h;he++){let ve=he+Z*w[2]+O*w[1]+A*w[0];const we=x[ve];ve=he+ne*w[2]+O*w[1]+A*w[0];const X=x[ve];ve=he+Z*w[2]+B*w[1]+A*w[0];const ae=x[ve];ve=he+ne*w[2]+B*w[1]+A*w[0];const pe=x[ve],j=we+(X-we)*G,ze=ae+(pe-ae)*G;ve=he+te*S[2]+D*S[1]+C*S[0],v.values[ve]=j+(ze-j)*H}}}else for(let O=0;O<g;++O){const B=g>1?T*(d-1)+O*$:.5*(T+M)*(d-1);if(B<0||B>d-1){for(let q=0;q<h;q++){const Z=q+O*S[2]+D*S[1]+C*S[0];v.values[Z]=u}continue}const H=Math.round(B),te=Math.round(P);for(let q=0;q<h;q++){const Z=q+H*w[2]+te*w[1]+A*w[0],ne=q+O*S[2]+D*S[1]+C*S[0];v.values[ne]=x[Z]}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const rWe={kernelName:KA,backendName:"cpu",kernelFunc:nWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,exclusive:a,reverse:o}=r;gt(i,"cumsum");const l=Ir([s],i.shape.length);let u=i;l!=null&&(u=tl({inputs:{x:i},backend:n,attrs:{perm:l}}));const c=zr(1,i.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const f=wa(u.dtype,"int32"),d=$i(Ee(u.shape),f),h=n.data.get(u.dataId).values,p=u.shape[u.shape.length-1],m=o?(v,y)=>v+p-y-1:(v,y)=>v+y;for(let v=0;v<h.length;v+=p)for(let y=0;y<p;y++){const b=m(v,y);if(y===0)d[b]=a?0:h[b];else{const x=m(v,y-1);d[b]=a?h[x]+d[x]:h[b]+d[x]}}const g=n.makeTensorInfo(u.shape,f,d);if(l!=null){const v=by(l),y=tl({inputs:{x:g},backend:n,attrs:{perm:v}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(u),y}return g}const sWe={kernelName:qw,backendName:"cpu",kernelFunc:iWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:a,binaryOutput:o}=r;if(i.shape.length===1){const l=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,c=Z6(l,u,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,c)}else if(i.shape.length===2){const l=n.bufferSync(i),u=n.bufferSync(s),c=Uie(l,u,a,o);return n.makeTensorInfo(c.shape,s.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const oWe={kernelName:ZA,backendName:"cpu",kernelFunc:aWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockSize:s,dataFormat:a}=r;R(a==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${a}`),R(s>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${s}`);const o=i.shape[0],l=i.shape[1],u=i.shape[2],c=i.shape[3],f=l*s,d=u*s,h=c/(s*s),p=n.data.get(i.dataId).values,m=new Float32Array(o*f*d*h);let g=0;for(let v=0;v<o;++v)for(let y=0;y<f;++y){const b=Math.floor(y/s),x=y%s;for(let w=0;w<d;++w){const S=Math.floor(w/s),C=w%s,_=(x*s+C)*h;for(let E=0;E<h;++E){const k=E+_+c*(S+u*(b+l*v));m[g++]=p[k]}}}return n.makeTensorInfo([o,f,d,h],i.dtype,m)}const uWe={kernelName:JA,backendName:"cpu",kernelFunc:lWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sse(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:a,pad:o,dilations:l,dimRoundingMode:u}=r;gt([i,s],"depthwiseConv2DNative");const c=It(i.shape),f=It(s.shape);let d=l;d==null&&(d=[1,1]),R(Ri(a,d),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${d}'`);const h=gi(i.shape,s.shape,a,d,o,u,!0),{filterHeight:p,filterWidth:m,dilationHeight:g,dilationWidth:v,padInfo:y}=h,b=y.left,x=y.top,w=h.outChannels/h.inChannels,S=new Kr(h.outShape,i.dtype),C=n.data.get(i.dataId).values,_=n.data.get(s.dataId).values,E=S.values;for(let T=0;T<h.batchSize;++T){const k=T*c[0],M=T*S.strides[0];for(let A=0;A<h.outHeight;++A){const N=M+A*S.strides[1],$=A*h.strideHeight-b;for(let D=0;D<p;++D){const P=$+D*g;if(P<0||P>=h.inHeight)continue;const O=D*f[0],B=k+P*c[1];for(let H=0;H<h.outWidth;++H){const te=N+H*S.strides[2],q=H*h.strideWidth-x;for(let Z=0;Z<m;++Z){const ne=q+Z*v;if(ne<0||ne>=h.inWidth)continue;const G=O+Z*f[1],he=B+ne*h.inChannels;let ve=te,we=G;for(let X=0;X<h.inChannels;++X){const ae=C[he+X];for(let pe=0;pe<w;++pe)E[ve+pe]+=ae*_[we+pe];ve+=w,we+=w}}}}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const cWe={kernelName:Xw,backendName:"cpu",kernelFunc:Sse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:a,dilations:o,pad:l,dimRoundingMode:u,filterShape:c}=r;gt([i,s],"depthwiseConv2dNativeBackpropFilter");const f=gi(i.shape,c,a,o,l,u,!0),{strideHeight:d,strideWidth:h,filterHeight:p,filterWidth:m}=f,g=new Kr(f.filterShape,"float32"),v=f.padInfo.left,y=f.padInfo.top,b=f.outChannels/f.inChannels,x=n.data.get(i.dataId).values,w=new Kr(i.shape,i.dtype,x),S=n.data.get(s.dataId).values,C=new Kr(s.shape,s.dtype,S);for(let _=0;_<p;++_){const E=Math.max(0,Math.ceil((y-_)/d)),T=Math.min(f.outHeight,(f.inHeight+y-_)/d);for(let k=0;k<m;++k){const M=Math.max(0,Math.ceil((v-k)/h)),A=Math.min(f.outWidth,(f.inWidth+v-k)/h);for(let N=0;N<f.outChannels;++N){const $=Math.trunc(N/b),D=N%b;let P=0;for(let O=0;O<f.batchSize;++O)for(let B=E;B<T;++B){const H=_+B*d-y;for(let te=M;te<A;++te){const q=k+te*h-v;P+=w.get(O,H,q,$)*C.get(O,B,te,N)}}g.set(P,_,k,$,D)}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const dWe={kernelName:QA,backendName:"cpu",kernelFunc:fWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hWe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{strides:a,dilations:o,pad:l,dimRoundingMode:u,inputShape:c}=r;gt([i,s],"depthwiseConv2DNativeBackpropInput");const f=It(i.shape),d=It(s.shape),h=gi(c,s.shape,a,o,l,u,!0),p=new Kr(h.inShape,"float32"),m=p.values,[g,v,y]=p.strides,b=n.data.get(i.dataId).values,[x,w,S]=f,C=n.data.get(s.dataId).values,[_,E,T]=d,{batchSize:k,filterHeight:M,filterWidth:A,inChannels:N,inHeight:$,inWidth:D,outChannels:P,outHeight:O,outWidth:B,strideHeight:H,strideWidth:te}=h,q=M-1-h.padInfo.top,Z=A-1-h.padInfo.left,ne=P/N;for(let G=0;G<k;++G)for(let he=0;he<N;++he)for(let ve=0;ve<$;++ve){const we=ve-q,X=Math.max(0,Math.ceil(we/H)),ae=Math.min(O,(M+we)/H);for(let pe=0;pe<D;++pe){const j=pe-Z,ze=Math.max(0,Math.ceil(j/te)),$e=Math.min(B,(A+j)/te);let nt=0;for(let Je=X;Je<ae;++Je){const Q=Je*H-we;for(let Ie=ze;Ie<$e;++Ie){const Ne=Ie*te-j,ht=x*G+w*Je+S*Ie,Et=_*(M-1-Q)+E*(A-1-Ne)+T*he;for(let U=0;U<ne;++U){const F=he*ne+U,be=b[ht+F],Be=C[Et+U];nt+=be*Be}}}m[g*G+v*ve+y*pe+he]=nt}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const pWe={kernelName:eM,backendName:"cpu",kernelFunc:hWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mWe(t){const{inputs:e,backend:n}=t,{x:r}=e,i=Ee(r.shape),s=n.data.get(r.dataId).values,a=Jt([i,i],r.dtype),o=a.values;for(let u=0;u<s.length;u++)o[u*i+u]=s[u];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,a.dtype,a.values)}const gWe={kernelName:tM,backendName:"cpu",kernelFunc:mWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vWe={kernelName:Yw,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i}=t,{strides:s,pad:a,dilations:o}=n,l=e,u=l.data.get(r.dataId).values,c=r.shape.length,f=l.data.get(i.dataId).values,d=i.shape.length,{batchSize:h,inHeight:p,inWidth:m,inChannels:g,outHeight:v,outWidth:y,padInfo:b,strideHeight:x,strideWidth:w,filterHeight:S,filterWidth:C,dilationHeight:_,dilationWidth:E,outShape:T}=F_(r.shape,i.shape,s,a,"NHWC",o),k=Ee(T),M=T.length,A=rm(r.dtype,k);for(let $=0;$<h;++$)for(let D=0;D<v;++D){const P=D*x-b.top;for(let O=0;O<y;++O){const B=O*w-b.left;for(let H=0;H<g;++H){let te=Number.MIN_SAFE_INTEGER;for(let Z=0;Z<S;++Z){const ne=P+Z*_;if(ne>=0&&ne<p)for(let G=0;G<C;++G){const he=B+G*E;if(he>=0&&he<m){const ve=$l([$,ne,he,H],c,It(r.shape)),we=$l([Z,G,H],d,It(i.shape)),X=u[ve]+f[we];X>te&&(te=X)}}}const q=$l([$,D,O,H],M,It(T));A[q]=te}}}return{dataId:l.write(Bd(A,r.dtype),T,r.dtype),shape:T,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yWe={kernelName:nT,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i,dy:s}=t,{strides:a,pad:o,dilations:l}=n,u=e,c=no(r.shape,u.data.get(r.dataId).values),f=no(i.shape,u.data.get(i.dataId).values),{batchSize:d,inHeight:h,inWidth:p,inChannels:m,outHeight:g,outWidth:v,padInfo:y,strideHeight:b,strideWidth:x,filterHeight:w,filterWidth:S,dilationHeight:C,dilationWidth:_,outShape:E}=F_(r.shape,i.shape,a,o,"NHWC",l);R(s.rank===E.length,()=>`Error in ${nT}, dy must have the same rank as output ${E.length}, but got ${s.rank}`);const T=no(E,u.data.get(s.dataId).values),k=J5(i.shape,i.dtype);for(let A=0;A<d;++A)for(let N=0;N<g;++N){const $=N*b-y.top;for(let D=0;D<v;++D){const P=D*x-y.left;for(let O=0;O<m;++O){let B=Number.MIN_SAFE_INTEGER,H=0,te=0;for(let q=0;q<w;++q){const Z=$+q*C;if(Z>=0&&Z<h)for(let ne=0;ne<S;++ne){const G=P+ne*_;if(G>=0&&G<p){const he=c[A][Z][G][O]+f[q][ne][O];he>B&&(B=he,H=q,te=ne)}}}k[H][te][O]+=T[A][N][D][O]}}}return{dataId:u.write(Bd(k,r.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bWe={kernelName:tT,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i,dy:s}=t,{strides:a,pad:o,dilations:l}=n,u=e,c=no(r.shape,u.data.get(r.dataId).values),f=no(i.shape,u.data.get(i.dataId).values),{batchSize:d,inHeight:h,inWidth:p,inChannels:m,outHeight:g,outWidth:v,padInfo:y,strideHeight:b,strideWidth:x,filterHeight:w,filterWidth:S,dilationHeight:C,dilationWidth:_,outShape:E}=F_(r.shape,i.shape,a,o,"NHWC",l);R(s.rank===E.length,()=>`Error in ${tT}, dy must have the same rank as output ${E.length}, but got ${s.rank}`);const T=no(E,u.data.get(s.dataId).values),k=J5(r.shape,r.dtype);for(let A=0;A<d;++A)for(let N=0;N<g;++N){const $=N*b-y.top;for(let D=0;D<v;++D){const P=D*x-y.left;for(let O=0;O<m;++O){let B=Number.MIN_SAFE_INTEGER,H=$<0?0:$,te=P<0?0:P;for(let q=0;q<w;++q){const Z=$+q*C;if(Z>=0&&Z<h)for(let ne=0;ne<S;++ne){const G=P+ne*_;if(G>=0&&G<p){const he=c[A][Z][G][O]+f[q][ne][O];he>B&&(B=he,H=Z,te=G)}}}k[A][H][te][O]+=T[A][N][D][O]}}}return{dataId:u.write(Bd(k,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xWe(t){const{inputs:e,backend:n}=t,{dy:r,y:i}=e;gt([r,i],"eluGrad");const s=new Float32Array(Ee(i.shape)),a=n.data.get(i.dataId).values,o=n.data.get(r.dataId).values;for(let l=0;l<a.length;++l){const u=a[l];u>=1?s[l]=o[l]:s[l]=o[l]*(u+1)}return n.makeTensorInfo(i.shape,"float32",s)}const wWe={kernelName:nM,backendName:"cpu",kernelFunc:xWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _We=Br((t,e)=>t===e?1:0),Cse=yi(Kw,_We,null,"bool"),SWe={kernelName:Kw,backendName:"cpu",kernelFunc:Cse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CWe=fz,EWe=dz,TWe=hz,kWe=pz,AWe=mz,MWe=gz,NWe=Fn(Dv,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+CWe*n);return e*(1-((((MWe*r+AWe)*r+kWe)*r+TWe)*r+EWe)*r*Math.exp(-n*n))}),$We={kernelName:Dv,backendName:"cpu",kernelFunc:NWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CT(t){const{inputs:e,backend:n,attrs:r}=t,{input:i}=e,{dim:s}=r,a=i.shape.length,o=i.shape.slice();let l=s;return s<0&&(R(-(a+1)<=s,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),l=a+s+1),o.splice(l,0,1),ur({inputs:{x:i},backend:n,attrs:{shape:o}})}const IWe={kernelName:Zw,backendName:"cpu",kernelFunc:CT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DWe=Br((t,e)=>t/e),iB=yi($v,DWe),XF={kernelName:$v,backendName:"cpu",kernelFunc:iB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ese(t,e,n){const r=t.shape,i=r[0],s=r[1],a=n.data.get(t.dataId),o=a.complexTensorInfos.real,l=a.complexTensorInfos.imag,u=[i,s],c=Ee(u),f=fi("float32",c),d=fi("float32",c);for(let g=0;g<i;g++){const v=Np({inputs:{x:o},backend:n,attrs:{begin:[g,0],size:[1,s]}}),y=Np({inputs:{x:l},backend:n,attrs:{begin:[g,0],size:[1,s]}}),b=ua({inputs:{real:v,imag:y},backend:n}),{real:x,imag:w}=RWe(b,e,n),S=Jc(x,w);for(let C=0;C<s;C++){const _=vz(S,C);f[g*s+C]=_.real,d[g*s+C]=_.imag}n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b)}const h=n.makeTensorInfo(u,"float32",f),p=n.makeTensorInfo(u,"float32",d),m=ua({inputs:{real:h,imag:p},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),m}function RWe(t,e,n){const r=Ee(t.shape),i=n.data.get(t.dataId),s=n.data.get(i.complexTensorInfos.real.dataId).values,a=n.data.get(i.complexTensorInfos.imag.dataId).values;if(OWe(r)){const o=YF(s,a,r,e,n),l=[t.shape[0],t.shape[1]];if(e){const u=n.makeTensorInfo(l,"float32",o.real),c=n.makeTensorInfo(l,"float32",o.imag),f=n.makeTensorInfo([],"float32",of(r,"float32")),d=Fu({inputs:{x:f},backend:n}),h=XF.kernelFunc({inputs:{a:u,b:f},backend:n}),p=XF.kernelFunc({inputs:{a:c,b:d},backend:n}),m=n.data.get(h.dataId).values,g=n.data.get(p.dataId).values;return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),{real:m,imag:g}}return o}else{const o=Jc(s,a),l=FWe(o,r,e);return Xne(l)}}function OWe(t){return(t&t-1)===0}function YF(t,e,n,r,i){if(n===1)return{real:t,imag:e};const s=Jc(t,e),a=n/2,o=Yne(s),l=o.real,u=o.imag,c=[l.length],f=i.makeTensorInfo(c,"float32",l),d=i.makeTensorInfo(c,"float32",u),h=ua({inputs:{real:f,imag:d},backend:i}),p=Kne(s),m=p.real,g=p.imag,v=[m.length],y=i.makeTensorInfo(v,"float32",m),b=i.makeTensorInfo(v,"float32",g),x=ua({inputs:{real:y,imag:b},backend:i}),w=YF(l,u,a,r,i),S=w.real,C=w.imag,_=[S.length],E=i.makeTensorInfo(_,"float32",S),T=i.makeTensorInfo(_,"float32",C),k=ua({inputs:{real:E,imag:T},backend:i}),M=YF(m,g,a,r,i),A=M.real,N=M.imag,$=[A.length],D=i.makeTensorInfo($,"float32",A),P=i.makeTensorInfo($,"float32",N),O=ua({inputs:{real:D,imag:P},backend:i}),B=Jne(n,r),H=[B.real.length],te=i.makeTensorInfo(H,"float32",B.real),q=i.makeTensorInfo(H,"float32",B.imag),Z=ua({inputs:{real:te,imag:q},backend:i}),ne=Q6({inputs:{a:Z,b:O},backend:i}),G=c2({inputs:{a:k,b:ne},backend:i}),he=tB({inputs:{a:k,b:ne},backend:i}),ve=Mp({inputs:{input:G},backend:i}),we=Mp({inputs:{input:he},backend:i}),X=A0({inputs:{input:G},backend:i}),ae=A0({inputs:{input:he},backend:i}),pe=M0({inputs:[ve,we],backend:i,attrs:{axis:0}}),j=M0({inputs:[X,ae],backend:i,attrs:{axis:0}}),ze=i.data.get(pe.dataId).values,$e=i.data.get(j.dataId).values;return i.disposeIntermediateTensorInfo(f),i.disposeIntermediateTensorInfo(d),i.disposeIntermediateTensorInfo(h),i.disposeIntermediateTensorInfo(y),i.disposeIntermediateTensorInfo(b),i.disposeIntermediateTensorInfo(x),i.disposeIntermediateTensorInfo(E),i.disposeIntermediateTensorInfo(T),i.disposeIntermediateTensorInfo(k),i.disposeIntermediateTensorInfo(D),i.disposeIntermediateTensorInfo(P),i.disposeIntermediateTensorInfo(O),i.disposeIntermediateTensorInfo(te),i.disposeIntermediateTensorInfo(q),i.disposeIntermediateTensorInfo(Z),i.disposeIntermediateTensorInfo(ne),i.disposeIntermediateTensorInfo(G),i.disposeIntermediateTensorInfo(he),i.disposeIntermediateTensorInfo(ve),i.disposeIntermediateTensorInfo(X),i.disposeIntermediateTensorInfo(we),i.disposeIntermediateTensorInfo(ae),i.disposeIntermediateTensorInfo(pe),i.disposeIntermediateTensorInfo(j),{real:ze,imag:$e}}function FWe(t,e,n){const r=new Float32Array(e*2);for(let i=0;i<e;i++){let s=0,a=0;for(let o=0;o<e;o++){const l=Qne(i*o,e,n),u=vz(t,o);s+=u.real*l.real-u.imag*l.imag,a+=u.real*l.imag+u.imag*l.real}n&&(s/=e,a/=e),Zne(r,s,a,i)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LWe(t){const{inputs:e,backend:n}=t,{input:r}=e,i=Ee(r.shape),s=r.shape[r.shape.length-1],a=i/s,o=ur({inputs:{x:r},backend:n,attrs:{shape:[a,s]}}),l=Ese(o,!1,n),u=ur({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),u}const PWe={kernelName:rM,backendName:"cpu",kernelFunc:LWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sB(t){const{backend:e,attrs:n}=t,{shape:r,value:i,dtype:s}=n,a=s||vv(i),o=rm(a,Ee(r));return BWe(o,i,a),e.makeTensorInfo(r,a,o)}const zWe={kernelName:iM,backendName:"cpu",kernelFunc:sB};function BWe(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UWe={kernelName:sM,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,i=n,s=fi(r.dtype,Ee(r.shape)),[a,o,l,u]=r.shape,c=i.data.get(r.dataId).values;for(let d=0;d<a;d++){const h=d*l*o*u;for(let p=0;p<o;p++){const m=p*(l*u);for(let g=0;g<l;g++){const v=g*u;for(let y=0;y<u;y++){const x=[a,p,g,y][2],w=Math.round(l-x),S=h+m+v+y;let C=c[S];if(w>=0&&w<l){const _=w*u,E=h+m+_+y;C=c[E]}s[S]=C}}}}return{dataId:i.write(s,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VWe=Br((t,e)=>Math.floor(t/e)),WWe=yi(Lv,VWe,null,"int32"),GWe={kernelName:Lv,backendName:"cpu",kernelFunc:WWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:a,preluActivationWeights:o}=e,{strides:l,pad:u,dataFormat:c,dilations:f,dimRoundingMode:d,activation:h,leakyreluAlpha:p}=r;let m=_se({inputs:{x:i,filter:s},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:f,dimRoundingMode:d}});if(a){const g=m;m=c2({inputs:{a:m,b:a},backend:n}),n.disposeIntermediateTensorInfo(g)}if(h){const g=m;m=nB(n,m,h,o,p),n.disposeIntermediateTensorInfo(g)}return m}const jWe={kernelName:Mx,backendName:"cpu",kernelFunc:HWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:a,preluActivationWeights:o}=e,{strides:l,pad:u,dataFormat:c,dilations:f,dimRoundingMode:d,activation:h,leakyreluAlpha:p}=r;let m=Sse({inputs:{x:i,filter:s},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:f,dimRoundingMode:d}});if(a){const g=m;m=c2({inputs:{a:m,b:a},backend:n}),n.disposeIntermediateTensorInfo(g)}if(h){const g=m;m=nB(n,m,h,o,p),n.disposeIntermediateTensorInfo(g)}return m}const XWe={kernelName:Nx,backendName:"cpu",kernelFunc:qWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YWe(t){const{inputs:e,backend:n}=t,{params:r,indices:i}=e,s=Ee(r.shape),a=i.shape,o=a[a.length-1],[l,u,c,f]=OM(r,i);if(u===0)return n.makeTensorInfo(l,r.dtype,[]);const d=Jt([u,c],r.dtype),h=n.data.get(i.dataId).values,p=n.data.get(r.dataId).values;for(let m=0;m<u;m++){const g=[];let v=0;for(let y=0;y<o;y++){const b=h[m*o+y];v+=b*f[y],g.push(b)}if(v<0||v>=s/c)throw new Error(`Invalid indices: ${g} does not index into ${r.shape}`);for(let y=0;y<c;y++)d.values[m*c+y]=p[v*c+y]}return n.makeTensorInfo(l,d.dtype,d.values)}const KWe={kernelName:aM,backendName:"cpu",kernelFunc:YWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,indices:s}=e,{axis:a,batchDims:o}=r;gt([i,s],"gatherV2");let l=o;o==null&&(l=0);const u=Ee(s.shape),c=Xt(a,i.shape)[0],f=bz(i,s,c,l),d=ur({inputs:{x:i},backend:n,attrs:{shape:[f.batchSize,f.outerSize,f.dimSize,f.sliceSize]}}),h=ur({inputs:{x:s},backend:n,attrs:{shape:[f.batchSize,u/f.batchSize]}}),p=[f.batchSize,f.outerSize,u/f.batchSize,f.sliceSize],m=n.bufferSync(h),g=n.bufferSync(d),v=Xie(g,m,p);return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.makeTensorInfo(f.outputShape,v.dtype,v.values)}const JWe={kernelName:Qw,backendName:"cpu",kernelFunc:ZWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QWe=Br((t,e)=>t>=e?1:0),eGe=yi(Pv,QWe,null,"bool"),tGe={kernelName:Pv,backendName:"cpu",kernelFunc:eGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nGe(t){const{inputs:e,backend:n}=t,{input:r}=e,i=Ee(r.shape),s=r.shape[r.shape.length-1],a=i/s,o=ur({inputs:{x:r},backend:n,attrs:{shape:[a,s]}}),l=Ese(o,!0,n),u=ur({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),u}const rGe={kernelName:oM,backendName:"cpu",kernelFunc:nGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iGe=Fn(Bv,t=>Number.isFinite(t)?1:0,"bool"),sGe={kernelName:Bv,backendName:"cpu",kernelFunc:iGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aGe=Fn(Uv,t=>Math.abs(t)===1/0?1:0,"bool"),oGe={kernelName:Uv,backendName:"cpu",kernelFunc:aGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lGe=Fn(Vv,t=>Number.isNaN(t)?1:0,"bool"),uGe={kernelName:Vv,backendName:"cpu",kernelFunc:lGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cGe=Br((t,e)=>t<=e?1:0),fGe=yi(r_,cGe,null,"bool"),dGe={kernelName:r_,backendName:"cpu",kernelFunc:fGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hGe(t){const{backend:e,attrs:n}=t,{start:r,stop:i,num:s}=n,a=Zie(r,i,s);return e.makeTensorInfo([a.length],"float32",a)}const pGe={kernelName:uM,backendName:"cpu",kernelFunc:hGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mGe=Fn(Gv,t=>Math.log1p(t)),gGe={kernelName:Gv,backendName:"cpu",kernelFunc:mGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vGe=Br((t,e)=>t&&e),yGe=yi(i_,vGe,null,"bool"),bGe={kernelName:i_,backendName:"cpu",kernelFunc:yGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xGe=Fn(s_,t=>t?0:1,"bool"),wGe={kernelName:s_,backendName:"cpu",kernelFunc:xGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ge=Br((t,e)=>t||e),SGe=yi(a_,_Ge,null,"bool"),CGe={kernelName:a_,backendName:"cpu",kernelFunc:SGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{depthRadius:s,bias:a,alpha:o,beta:l}=r;gt(i,"LRN");const u=i.shape[3],c=u-1,f=n.data.get(i.dataId).values,d=Ee(i.shape),h=new Float32Array(d);function p(m){const g=m%u;let v=m-g+Math.max(0,g-s);const y=m-g+Math.min(g+s,c);let b=0;for(;v<=y;v++){const x=f[v];b+=x*x}return b}for(let m=0;m<d;m++){const g=p(m),v=f[m]*Math.pow(a+o*g,-l);h[m]=v}return n.makeTensorInfo(i.shape,i.dtype,h)}const TGe={kernelName:o_,backendName:"cpu",kernelFunc:EGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,y:s,dy:a}=e,{depthRadius:o,bias:l,alpha:u,beta:c}=r;gt(a,"LRNGrad");const f=Ee(a.shape),d=a.shape[3],h=n.data.get(a.dataId).values,p=n.data.get(i.dataId).values,m=n.data.get(s.dataId).values,g=new Float32Array(f),v=f;for(let y=0;y<v;y++){const b=y%d,x=y-b+Math.max(0,b-o),w=y-b+Math.min(d,b+o+1);let S=0;for(let C=x;C<w;C++)S+=Math.pow(p[C],2);S=u*S+l;for(let C=x;C<w;C++){let _=-2*u*c*p[C]*m[y]/S;y===C&&(_+=Math.pow(S,-c)),_*=h[y],g[C]+=_}}return n.makeTensorInfo(a.shape,i.dtype,g)}const AGe={kernelName:cM,backendName:"cpu",kernelFunc:kGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tse(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reductionIndices:s,keepDims:a}=r,o=n;let l=i.shape;const u=l.length,c=Xt(s,l);let f=c;const d=Ir(f,u);let h=o.data.get(i.dataId).values;if(d!=null){const x=new Array(u);for(let w=0;w<x.length;w++)x[w]=l[d[w]];h=eB(h,l,i.dtype,d,x),f=zr(f.length,u),l=x}gt(i,"max"),Oi("max",f,u);const[p,m]=vi(l,f),g=Ee(m),v=Qie(h,g,p,i.dtype),y=o.write(v,p,i.dtype);let b=p;return a&&(b=$r(p,c)),{dataId:y,shape:b,dtype:i.dtype}}const MGe={kernelName:l_,backendName:"cpu",kernelFunc:Tse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;gt(i,"maxPool");const{filterSize:s,strides:a,pad:o,dimRoundingMode:l}=r,u=1;R(Ri(a,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`);const c=ol(i.shape,s,a,u,o,l);let f;if(c.filterWidth===1&&c.filterHeight===1&&Tn(c.inShape,c.outShape))f=Fu({inputs:{x:i},backend:n});else{const d=n.data.get(i.dataId).values,h=It(i.shape),p=rB(d,i.shape,i.dtype,h,c,"max");f=n.makeTensorInfo(c.outShape,i.dtype,p.values)}return f}const $Ge={kernelName:u_,backendName:"cpu",kernelFunc:NGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:a,pad:o,dimRoundingMode:l,dataFormat:u}=r;gt(i,"maxPool3d");const c=lf(i.shape,s,a,1,o,l,u),f=n.data.get(i.dataId).values,d=wse(f,i.shape,i.dtype,It(i.shape),c,"max");return n.makeTensorInfo(d.shape,"float32",d.values)}const DGe={kernelName:c_,backendName:"cpu",kernelFunc:IGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RGe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,{filterSize:a,strides:o,pad:l,dimRoundingMode:u}=r;gt([i,s],"maxPool3DGrad");const c=lf(s.shape,a,o,1,l,u),f=n.bufferSync(s),d=xVe(f,c),h=c.strideDepth,p=c.strideHeight,m=c.strideWidth,g=c.dilationDepth,v=c.dilationHeight,y=c.dilationWidth,b=c.effectiveFilterDepth,x=c.effectiveFilterHeight,w=c.effectiveFilterWidth,S=b-1-c.padInfo.front,C=w-1-c.padInfo.left,_=x-1-c.padInfo.top,E=Jt(s.shape,"float32"),T=n.bufferSync(i);for(let k=0;k<c.batchSize;++k)for(let M=0;M<c.inChannels;++M)for(let A=0;A<c.inDepth;++A)for(let N=0;N<c.inHeight;++N)for(let $=0;$<c.inWidth;++$){const D=A-S,P=N-_,O=$-C;let B=0;for(let H=0;H<b;H+=g){const te=(D+H)/h;if(!(te<0||te>=c.outDepth||Math.floor(te)!==te))for(let q=0;q<x;q+=v){const Z=(P+q)/p;if(!(Z<0||Z>=c.outHeight||Math.floor(Z)!==Z))for(let ne=0;ne<w;ne+=y){const G=(O+ne)/m;if(G<0||G>=c.outWidth||Math.floor(G)!==G)continue;const he=b*x*w-1-d.get(k,te,Z,G,M),ve=H*x*w+q*w+ne,we=he===ve?1:0;if(we===0)continue;const X=T.get(k,te,Z,G,M);B+=X*we}}}E.set(B,k,A,N,$,M)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}const OGe={kernelName:dM,backendName:"cpu",kernelFunc:RGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FGe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s,output:a}=e,o=s;gt([s,a],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:f}=r,d=ol(o.shape,l,u,1,c,f),h=n.data.get(o.dataId).values,p=Jt(d.outShape,o.dtype,xse(h,o.shape,o.dtype,d).values),m=d.strideHeight,g=d.strideWidth,v=d.dilationHeight,y=d.dilationWidth,b=d.effectiveFilterHeight,x=d.effectiveFilterWidth,w=x-1-d.padInfo.left,S=b-1-d.padInfo.top,C=Jt(o.shape,"float32"),_=n.data.get(i.dataId).values,E=Jt(i.shape,"float32",_);for(let T=0;T<d.batchSize;++T)for(let k=0;k<d.inChannels;++k)for(let M=0;M<d.inHeight;++M)for(let A=0;A<d.inWidth;++A){const N=M-S,$=A-w;let D=0;for(let P=0;P<b;P+=v){const O=(N+P)/m;if(!(O<0||O>=d.outHeight||Math.floor(O)!==O))for(let B=0;B<x;B+=y){const H=($+B)/g;if(H<0||H>=d.outWidth||Math.floor(H)!==H)continue;const te=b*x-1-p.get(T,O,H,k),q=P*x+B,Z=te===q?1:0;if(Z===0)continue;const ne=E.get(T,O,H,k);D+=ne*Z}}C.set(D,T,M,A,k)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const LGe={kernelName:fM,backendName:"cpu",kernelFunc:FGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PGe(t,e,n,r,i){const s=It(e),a=rB(t,e,n,s,i,"max"),o=xse(t,e,n,i,!0,r);return[a.values,o.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zGe={kernelName:hM,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:i,strides:s,pad:a,includeBatchInIndex:o}=e,l=n;gt(r,"MaxPoolWithArgmax");const u=l.data.get(r.dataId).values,c=ol(r.shape,i,s,[1,1],a),[f,d]=PGe(u,r.shape,r.dtype,o,c),h=l.write(f,c.outShape,r.dtype),p=l.write(d,c.outShape,r.dtype);return[{dataId:h,shape:c.outShape,dtype:r.dtype},{dataId:p,shape:c.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X3(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r;gt(i,"sum");let o;i.dtype==="bool"?o=Ad({inputs:{x:i},backend:n,attrs:{dtype:"int32"}}):o=Fu({inputs:{x:i},backend:n});const l=o.shape.length,u=Xt(s,o.shape),c=Ir(u,l);let f=u,d=o;c!=null&&(d=tl({inputs:{x:o},backend:n,attrs:{perm:c}}),f=zr(f.length,l)),Oi("sum",f,d.shape.length);const[h,p]=vi(d.shape,f),m=wa(d.dtype,"int32");let g=ST(n,h,m);const v=Ee(p),y=n.data.get(g.dataId).values,b=n.data.get(d.dataId).values;for(let x=0;x<y.length;++x){const w=x*v;let S=0;for(let C=0;C<v;++C)S+=b[w+C];y[x]=S}if(a){const x=$r(g.shape,u),w=g;g=ur({inputs:{x:g},backend:n,attrs:{shape:x}}),n.disposeIntermediateTensorInfo(w)}return n.disposeIntermediateTensorInfo(o),c!=null&&n.disposeIntermediateTensorInfo(d),g}const BGe={kernelName:k_,backendName:"cpu",kernelFunc:X3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r,o=Xt(s,i.shape),u=vi(i.shape,o)[1],c=Ee(u),f=[],d=n.makeTensorInfo([],"float32",new Float32Array([c]));f.push(d);const h=Ad({inputs:{x:i},backend:n,attrs:{dtype:"float32"}});f.push(h);const p=iB({inputs:{a:h,b:d},backend:n});f.push(p);const m=X3({inputs:{x:p},backend:n,attrs:{axis:s,keepDims:a}});return f.forEach(g=>n.disposeIntermediateTensorInfo(g)),m}const VGe={kernelName:f_,backendName:"cpu",kernelFunc:UGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r;gt(i,"min");const o=Xt(s,i.shape);let l=o;const u=Ir(l,i.shape.length);let c=i;u!=null&&(c=tl({inputs:{x:i},backend:n,attrs:{perm:u}}),l=zr(l.length,i.shape.length)),Oi("min",l,c.shape.length);const[f,d]=vi(c.shape,l),h=Ee(d),p=$i(Ee(f),c.dtype),m=n.data.get(c.dataId).values;for(let v=0;v<p.length;++v){const y=v*h;let b=m[y];for(let x=0;x<h;++x){const w=m[y+x];w<b&&(b=w)}p[v]=b}u!=null&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(f,c.dtype,p);if(a){const v=$r(f,o),y=ur({inputs:{x:g},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(g),y}return g}const GGe={kernelName:d_,backendName:"cpu",kernelFunc:WGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:s,mode:a}=r;gt(i,"mirrorPad");const o=s.map((b,x)=>b[0]+i.shape[x]+b[1]),l=s.map(b=>b[0]),u=s.map((b,x)=>b[0]+i.shape[x]),c=a==="reflect"?0:1,f=n.data.get(i.dataId).values,d=i.shape.length,h=It(i.shape),p=Ee(o),m=o.length,g=It(o),v=fi(i.dtype,p);for(let b=0;b<p;b++){let x=yv(b,m,g);for(let S=0;S<m;S++)x[S]<l[S]?x[S]=l[S]*2-x[S]-c:x[S]>=u[S]&&(x[S]=(u[S]-1)*2-x[S]+c);x=x.map((S,C)=>S-l[C]);const w=$l(x,d,h);v[b]=f[w]}return{dataId:n.write(v,o,i.dtype),shape:o,dtype:i.dtype}}const jGe={kernelName:h_,backendName:"cpu",kernelFunc:HGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qGe=Br((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),XGe=yi(qv,qGe),YGe={kernelName:qv,backendName:"cpu",kernelFunc:XGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kse(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{dim:s}=r,a=i.shape.length;let o=s;if(o===-1&&(o=a-1),o!==a-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${a} and dim was ${o}`);const l=Xt([o],i.shape),u=Tse({inputs:{x:i},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),c=$r(u.shape,l),f=ur({inputs:{x:u},backend:n,attrs:{shape:c}}),d=tB({inputs:{a:i,b:f},backend:n}),h=Hie({inputs:{x:d},backend:n}),p=X3({inputs:{x:h},backend:n,attrs:{axis:l,keepDims:!1}}),m=ur({inputs:{x:p},backend:n,attrs:{shape:c}}),g=iB({inputs:{a:h,b:m},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}const KGe={kernelName:N_,backendName:"cpu",kernelFunc:kse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZGe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{numSamples:s,seed:a,normalized:o}=r;gt(i,"multinomial");const l=o?i:kse({inputs:{logits:i},backend:n,attrs:{dim:-1}}),u=l.shape[0],c=l.shape[1],f=n.data.get(l.dataId).values,d=[u,s],h=$i(Ee(d),"int32");for(let p=0;p<u;++p){const m=p*c,g=new Float32Array(c-1);g[0]=f[m];for(let b=1;b<g.length;++b)g[b]=g[b-1]+f[m+b];const v=wy.alea(a.toString()),y=p*s;for(let b=0;b<s;++b){const x=v();h[y+b]=g.length;for(let w=0;w<g.length;w++)if(x<g[w]){h[y+b]=w;break}}}return o||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(d,"int32",h)}const JGe={kernelName:pM,backendName:"cpu",kernelFunc:ZGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QGe=h3;function eHe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l}=r;gt(i,"NonMaxSuppression");const u=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,{selectedIndices:f}=QGe(u,c,a,o,l);return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}const tHe={kernelName:mM,backendName:"cpu",kernelFunc:eHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nHe=p3;function rHe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:u}=r;gt(i,"NonMaxSuppressionPadded");const c=n.data.get(i.dataId).values,f=n.data.get(s.dataId).values,{selectedIndices:d,validOutputs:h}=nHe(c,f,a,o,l,u);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const iHe={kernelName:gM,backendName:"cpu",kernelFunc:rHe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sHe=m3;function aHe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,softNmsSigma:u}=r;gt(i,"NonMaxSuppressionWithScore");const c=n.data.get(i.dataId).values,f=n.data.get(s.dataId).values,d=a,h=o,p=l,m=u,{selectedIndices:g,selectedScores:v}=sHe(c,f,d,h,p,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([v.length],"float32",new Float32Array(v))]}const oHe={kernelName:vM,backendName:"cpu",kernelFunc:aHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lHe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i}=e,{depth:s,onValue:a,offValue:o}=r;gt(i,"oneHot");const l=Ee(i.shape),u=new Float32Array(l*s);u.fill(o);const c=n.data.get(i.dataId).values;for(let f=0;f<l;++f)c[f]>=0&&c[f]<s&&(u[f*s+c[f]]=a);return n.makeTensorInfo([...i.shape,s],"int32",u)}const uHe={kernelName:v_,backendName:"cpu",kernelFunc:lHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ET(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const i=Mp({inputs:{input:r},backend:n}),s=ET({inputs:{x:i},backend:n}),a=A0({inputs:{input:r},backend:n}),o=ET({inputs:{x:a},backend:n}),l=ua({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),l}else return sB({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const cHe={kernelName:R_,backendName:"cpu",kernelFunc:ET};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ase(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const i=Mp({inputs:{input:r},backend:n}),s=Ase({inputs:{x:i},backend:n}),a=A0({inputs:{input:r},backend:n}),o=ET({inputs:{x:a},backend:n}),l=ua({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),l}else return sB({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const fHe={kernelName:g_,backendName:"cpu",kernelFunc:Ase};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mse(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r;if(e.length===1)return CT({inputs:{input:e[0]},backend:n,attrs:{dim:i}});const s=e[0].shape,a=e[0].dtype;e.forEach(c=>{mi(s,c.shape,"All tensors passed to stack must have matching shapes"),R(a===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=e.map(c=>{const f=CT({inputs:{input:c},backend:n,attrs:{dim:i}});return o.push(f),f}),u=M0({inputs:l,backend:n,attrs:{axis:i}});return o.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const dHe={kernelName:y_,backendName:"cpu",kernelFunc:Mse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:s,constantValue:a}=r;gt(i,"pad");const o=s.map((y,b)=>y[0]+i.shape[b]+y[1]),l=s.map(y=>y[0]),u=n.data.get(i.dataId).values,c=Ee(i.shape),f=i.shape.length,d=It(i.shape),h=Ee(o),p=o.length,m=It(o),g=fi(i.dtype,h);a!==0&&g.fill(a);for(let y=0;y<c;y++){const x=yv(y,f,d).map((S,C)=>S+l[C]),w=$l(x,p,m);g[w]=u[y]}return{dataId:n.write(g,o,i.dtype),shape:o,dtype:i.dtype}}const Nse={kernelName:b_,backendName:"cpu",kernelFunc:hHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pHe=Br((t,e)=>Math.pow(t,e)),mHe=yi(Yv,pHe),gHe={kernelName:Yv,backendName:"cpu",kernelFunc:mHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vHe(t){const{backend:e,attrs:n}=t,{start:r,stop:i,dtype:s,step:a}=n,o=sse(r,i,a,s);return e.makeTensorInfo([o.length],s,o)}const yHe={kernelName:bM,backendName:"cpu",kernelFunc:vHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bHe=Fn(Kv,t=>1/t),xHe={kernelName:Kv,backendName:"cpu",kernelFunc:bHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wHe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:a,size:o}=r;gt(i,"resizeBilinear");const l=It(i.shape),[u,c]=o,[f,d,h,p]=i.shape,m=n.data.get(i.dataId).values,g=new Float32Array(Ee([f,u,c,p])),v=[s&&u>1?d-1:d,s&&c>1?h-1:h],y=[s&&u>1?u-1:u,s&&c>1?c-1:c];let b=0;const x=v[0]/y[0],w=v[1]/y[1];for(let S=0;S<f;S++)for(let C=0;C<u;C++){let _;a?_=x*(C+.5)-.5:_=x*C;const E=Math.max(0,Math.floor(_)),T=_-E,k=Math.min(d-1,Math.ceil(_)),M=S*l[0]+E*l[1],A=S*l[0]+k*l[1];for(let N=0;N<c;N++){let $;a?$=w*(N+.5)-.5:$=w*N;const D=Math.max(0,Math.floor($)),P=$-D,O=Math.min(h-1,Math.ceil($)),B=M+D*l[2],H=A+D*l[2],te=M+O*l[2],q=A+O*l[2];for(let Z=0;Z<p;Z++){const ne=m[B+Z],G=m[H+Z],he=m[te+Z],ve=m[q+Z],we=ne+(he-ne)*P,X=G+(ve-G)*P,ae=we+(X-we)*T;g[b++]=ae}}}return n.makeTensorInfo([f,u,c,p],"float32",g)}const _He={kernelName:S_,backendName:"cpu",kernelFunc:wHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SHe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:a}=r;gt([s,i],"resizeBilinearGrad");const o=It(i.shape),[l,u,c,f]=i.shape,[,d,h]=s.shape,p=new Float32Array(l*u*c*f),m=[a&&d>1?u-1:u,a&&h>1?c-1:c],g=[a&&d>1?d-1:d,a&&h>1?h-1:h],v=m[0]/g[0],y=m[1]/g[1],b=n.data.get(s.dataId).values;let x=0;for(let w=0;w<l;w++){const S=w*o[0];for(let C=0;C<d;C++){const _=C*v,E=Math.floor(_),T=Math.min(Math.ceil(_),u-1),k=S+E*o[1],M=S+T*o[1],A=_-E,N=1-A;for(let $=0;$<h;$++){const D=$*y,P=Math.floor(D),O=Math.min(Math.ceil(D),c-1),B=D-P,H=1-B,te=k+P*o[2],q=k+O*o[2],Z=M+P*o[2],ne=M+O*o[2],G=N*H,he=N*B,ve=A*H,we=A*B;for(let X=0;X<f;X++){const ae=b[x++];p[te+X]+=ae*G,p[q+X]+=ae*he,p[Z+X]+=ae*ve,p[ne+X]+=ae*we}}}}return n.makeTensorInfo([l,c,u,f],"float32",p)}const CHe={kernelName:_M,backendName:"cpu",kernelFunc:SHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EHe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:a,size:o}=r;gt(i,"resizeNearestNeighbor");const l=It(i.shape),[u,c]=o,[f,d,h,p]=i.shape,m=n.data.get(i.dataId).values,g=new Float32Array(f*u*c*p),v=[s&&u>1?d-1:d,s&&c>1?h-1:h],y=[s&&u>1?u-1:u,s&&c>1?c-1:c],b=v[0]/y[0],x=v[1]/y[1];let w=0;for(let S=0;S<f;S++){const C=S*l[0];for(let _=0;_<u;_++){const E=a?b*(_+.5):b*_;let T=Math.min(d-1,s?Math.round(E):Math.floor(E));a&&(T=Math.max(0,T));const k=C+T*l[1];for(let M=0;M<c;M++){const A=a?x*(M+.5):x*M;let N=Math.min(h-1,s?Math.round(A):Math.floor(A));a&&(N=Math.max(0,N));const $=k+N*l[2];for(let D=0;D<p;D++){const P=m[$+D];g[w++]=P}}}}return n.makeTensorInfo([f,u,c,p],i.dtype,g)}const THe={kernelName:__,backendName:"cpu",kernelFunc:EHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kHe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:a}=r;gt([s,i],"resizeNearestNeighborGrad");const o=It(i.shape),l=It(s.shape),[u,c,f,d]=i.shape,[,h,p]=s.shape,m=new Float32Array(u*c*f*d),g=n.data.get(s.dataId).values,v=[a&&h>1?c-1:c,a&&p>1?f-1:f],y=[a&&h>1?h-1:h,a&&p>1?p-1:p],b=v[0]/y[0],x=v[1]/y[1],w=1/b,S=1/x,C=Math.ceil(w)*2+2,_=Math.ceil(S)*2+2;for(let E=0;E<u;E++){const T=E*o[0];for(let k=0;k<c;k++){const M=T+k*o[1],A=Math.floor(k*w),N=Math.floor(A-C/2);for(let $=0;$<f;$++){const D=M+$*o[2],P=Math.floor($*S),O=Math.floor(P-_/2);for(let B=0;B<d;B++){let H=0;for(let te=0;te<C;te++){const q=te+N;if(q<0||q>=h)continue;const Z=T+q*l[1],ne=q*b,G=Math.min(c-1,a?Math.round(ne):Math.floor(ne));if(k===G)for(let he=0;he<_;he++){const ve=he+O;if(ve<0||ve>=p)continue;const we=Z+ve*l[2],X=ve*x,ae=Math.min(f-1,a?Math.round(X):Math.floor(X));$===ae&&(H+=g[we+B])}}m[D+B]=H}}}}return n.makeTensorInfo(i.shape,i.dtype,m)}const AHe={kernelName:wM,backendName:"cpu",kernelFunc:kHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dims:s}=r;gt(i,"reverse");const a=i.shape.length,o=Xt(s,i.shape);if(a===0)return Fu({inputs:{x:i},backend:n});const l=new Kr(i.shape,i.dtype),u=n.bufferSync(i);for(let c=0;c<l.size;c++){const f=l.indexToLoc(c),d=f.slice();o.forEach(h=>d[h]=i.shape[h]-1-d[h]),l.set(u.get(...d),...f)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const NHe={kernelName:C_,backendName:"cpu",kernelFunc:MHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $He={kernelName:MM,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:i,fillValue:s,center:a}=e,o=n,l=fi(r.dtype,Ee(r.shape)),[u,c,f,d]=r.shape,[h,p]=lz(a,c,f),m=255,g=Math.sin(i),v=Math.cos(i),y=o.data.get(r.dataId).values;for(let x=0;x<u;x++){const w=x*f*c*d;for(let S=0;S<c;S++){const C=S*(f*d);for(let _=0;_<f;_++){const E=_*d;for(let T=0;T<d;T++){const k=[u,S,_,T],M=k[2],A=k[1];let N=(M-h)*v-(A-p)*g,$=(M-h)*g+(A-p)*v;N=Math.round(N+h),$=Math.round($+p);let D=s;if(typeof s!="number"&&(T===3?D=m:D=s[T]),N>=0&&N<f&&$>=0&&$<c){const O=$*(f*d),B=N*d,H=w+O+B+T;D=y[H]}const P=w+C+E+T;l[P]=D}}}}return{dataId:o.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IHe=Fn(Qv,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),DHe={kernelName:Qv,backendName:"cpu",kernelFunc:IHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $se(t,e,n,r,i,s,a,o,l,u){const c=[r/i,i],f=t.values,d=e.values;if(r===0)return Jt(n,e.dtype);const h=Jt(c,e.dtype);h.values.fill(l);for(let p=0;p<s;p++){const m=[];let g=0;for(let v=0;v<a;v++){const y=f[p*a+v];m.push(y),g+=y*o[v]}if(g<0||g>=r/i)throw new Error(`Invalid indices: ${m} does not index into ${n}`);for(let v=0;v<i;v++)u?h.values[g*i+v]+=d[p*i+v]:h.values[g*i+v]=e.rank===0?d[0]:d[p*i+v]}return h}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RHe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i,updates:s}=e,{shape:a}=r,{sliceRank:o,numUpdates:l,sliceSize:u,strides:c,outputSize:f}=py(s,i,a),d=!0,h=n.bufferSync(i),p=n.bufferSync(s),m=$se(h,p,a,f,u,l,o,c,0,d);return n.makeTensorInfo(a,m.dtype,m.values)}const OHe={kernelName:SM,backendName:"cpu",kernelFunc:RHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FHe(t){const{inputs:e,backend:n}=t,{condition:r,t:i,e:s}=e;gt([r,i,s],"select");const a=r.shape.length,o=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,c=wa(i.dtype,s.dtype),f=$i(Ee(i.shape),c);let d=0;const h=a===0||a>1||i.shape.length===1?1:Ee(i.shape.slice(1));for(let p=0;p<o.length;p++)for(let m=0;m<h;m++)o[p]===1?f[d++]=l[p]:f[d++]=u[p];return n.makeTensorInfo(i.shape,c,f)}const LHe={kernelName:E_,backendName:"cpu",kernelFunc:FHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PHe=S3,zHe=C3,BHe=Fn(ty,t=>t>=0?zHe*t:PHe*(Math.exp(t)-1)),UHe={kernelName:ty,backendName:"cpu",kernelFunc:BHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VHe=Fn(sy,t=>1/(1+Math.exp(-t))),WHe={kernelName:sy,backendName:"cpu",kernelFunc:VHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GHe=Fn(iy,t=>t<0?-1:t>0?1:0),HHe={kernelName:iy,backendName:"cpu",kernelFunc:GHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jHe=Fn(ny,t=>Math.sin(t)),qHe={kernelName:ny,backendName:"cpu",kernelFunc:jHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XHe=Fn(ry,t=>Math.sinh(t)),YHe={kernelName:ry,backendName:"cpu",kernelFunc:XHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KHe=11920928955078125e-23,xj=Math.log(KHe)+2,ZHe=Fn(ay,t=>{const e=t>-xj,n=t<xj,r=Math.exp(t);let i;return n?i=r:e?i=t:i=Math.log(1+r),i}),JHe={kernelName:ay,backendName:"cpu",kernelFunc:ZHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,paddings:a}=r;gt([i],"spaceToBatchND");const o=Ee(s),l=[[0,0]];l.push(...a);for(let S=1+s.length;S<i.shape.length;++S)l.push([0,0]);const u=Nse.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),c=K_(u.shape,s,o,!1),f=Z_(c.length,s.length,!1),d=J_(u.shape,s,o,!1),m=ur({inputs:{x:u},backend:n,attrs:{shape:c}}),y=tl({inputs:{x:m},backend:n,attrs:{perm:f}}),w=ur({inputs:{x:y},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),w}const eje={kernelName:A_,backendName:"cpu",kernelFunc:QHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tje(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:i,sparseValues:s,defaultValue:a}=e,{outputShape:o}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:f,outputSize:d}=py(s,i,o),h=!1,p=n.bufferSync(i),m=n.bufferSync(s),g=n.data.get(a.dataId).values[0],v=$se(p,m,o,d,c,u,l,f,g,h);return n.makeTensorInfo(o,v.dtype,v.values)}const nje={kernelName:EM,backendName:"cpu",kernelFunc:tje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rje(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{numOrSizeSplits:s,axis:a}=r,o=Xt(a,i.shape)[0],l=yz(i,s,o),u=new Array(i.shape.length).fill(0),c=i.shape.slice();return l.map(f=>{const d=[...c];d[o]=f;const h=Np({inputs:{x:i},backend:n,attrs:{begin:u,size:d}});return u[o]+=f,h})}const ije={kernelName:M_,backendName:"cpu",kernelFunc:rje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sje=Fn(oy,t=>Math.sqrt(t)),aje={kernelName:oy,backendName:"cpu",kernelFunc:sje};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oje={kernelName:CM,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;gt(n,"square");const i=r.data.get(n.dataId).values,s=new Float32Array(i.length);for(let o=0;o<i.length;++o){const l=i[o];s[o]=l*l}return{dataId:r.write(s,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lje=Fn(hy,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),uje={kernelName:hy,backendName:"cpu",kernelFunc:lje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cje(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,end:a,strides:o,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:f,shrinkAxisMask:d}=r;gt(i,"stridedSlice");const{nonStrided:h,$begin:p,$strides:m,size:g,newShape:v,outShape:y}=p4(i.shape,s,a,o,l,u,c,f,d),b=ur({inputs:{x:i},backend:n,attrs:{shape:v}});let x;if(h){const S=Np({inputs:{x:b},backend:n,attrs:{begin:p,size:g}});x=ur({inputs:{x:S},backend:n,attrs:{shape:y}}),n.disposeIntermediateTensorInfo(S)}else if(y.some(S=>S===0))x=n.makeTensorInfo(y,i.dtype,[]);else{const S=n.bufferSync(b),C=use(y,S,m,p);x=n.makeTensorInfo(C.shape,C.dtype,C.values)}const w=ur({inputs:{x},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(x),w}const fje={kernelName:TM,backendName:"cpu",kernelFunc:cje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dje=Fn(cy,t=>Math.tan(t)),hje={kernelName:cy,backendName:"cpu",kernelFunc:dje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pje=Fn(fy,t=>Math.tanh(t)),mje={kernelName:fy,backendName:"cpu",kernelFunc:pje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gje(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reps:s}=r;gt(i,"tile");const a=fse(n.bufferSync(i),s);return n.makeTensorInfo(a.shape,a.dtype,a.values)}const vje={kernelName:dy,backendName:"cpu",kernelFunc:gje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yje(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{k:s,sorted:a}=r;gt(i,"topk");const o=n.data.get(i.dataId).values,[l,u]=dse(o,i.shape,i.dtype,s);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}const bje={kernelName:kM,backendName:"cpu",kernelFunc:yje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xje(t){const{inputs:e,attrs:n,backend:r}=t,{axis:i}=n,{x:s}=e;gt(s,"unique");const a=r.data.get(s.dataId).values,{outputValues:o,outputShape:l,indices:u}=hse(a,i,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,o),r.makeTensorInfo([u.length],"int32",u)]}const wje={kernelName:AM,backendName:"cpu",kernelFunc:xje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _je(t){const{inputs:e,backend:n,attrs:r}=t,{value:i}=e;let{axis:s}=r;s<0&&(s+=i.shape.length);const a=i.shape.length,o=i.shape[s],l=new Array(a-1);let u=0;for(let h=0;h<a;h++)h!==s&&(l[u++]=i.shape[h]);const c=new Array(a).fill(0),f=i.shape.slice();f[s]=1;const d=new Array(o);for(let h=0;h<d.length;h++){c[s]=h;const p=Np({inputs:{x:i},backend:n,attrs:{begin:c,size:f}});d[h]=ur({inputs:{x:p},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(p)}return d}const Sje={kernelName:I_,backendName:"cpu",kernelFunc:_je};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cje(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,segmentIds:s}=e,{numSegments:a}=r;gt(i,"unsortedSegmentSum");const o=i.shape.length,l=s.shape.length,u=[],c=[],f=o-l;let d=s;for(let p=0;p<f;++p){const m=CT({inputs:{input:d},backend:n,attrs:{dim:p+1}});d=m,c.push(m)}for(let p=0;p<a;++p){const m=of(p,"int32"),g=n.makeTensorInfo([],"int32",m),v=Cse({inputs:{a:g,b:d},backend:n}),y=Ad({inputs:{x:v},backend:n,attrs:{dtype:"float32"}}),b=Q6({inputs:{a:y,b:i},backend:n}),x=X3({inputs:{x:b},backend:n,attrs:{axis:0,keepDims:!1}});u.push(x),c.push(g),c.push(v),c.push(y),c.push(b),c.push(x)}const h=Mse({inputs:u,backend:n,attrs:{axis:0}});return c.forEach(p=>n.disposeIntermediateTensorInfo(p)),h}const Eje={kernelName:D_,backendName:"cpu",kernelFunc:Cje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tje=[XUe,Z9e,KUe,JUe,rUe,eVe,nVe,iVe,aVe,lVe,cVe,dVe,pVe,vVe,bVe,_Ve,CVe,TVe,AVe,jUe,NVe,IVe,RVe,tUe,sUe,FVe,J9e,PVe,BVe,WVe,HVe,UVe,YVe,ZVe,qVe,QVe,tWe,rWe,sWe,oWe,uWe,cWe,dWe,pWe,gWe,vWe,bWe,yWe,XF,zUe,wWe,SWe,$We,aUe,IWe,lUe,PWe,zWe,UWe,cUe,GWe,jWe,XWe,KWe,JWe,dUe,tGe,Q9e,rGe,zVe,sGe,oGe,uGe,BUe,pUe,dGe,pGe,gUe,gGe,bGe,wGe,CGe,TGe,AGe,yUe,$Ge,DGe,OGe,LGe,zGe,MGe,VGe,GGe,xUe,jGe,YGe,JGe,_Ue,CUe,tHe,iHe,oHe,TUe,uHe,fHe,dHe,Nse,gHe,VUe,MUe,yHe,eUe,xHe,WUe,GUe,HUe,_He,CHe,THe,AHe,NHe,$He,DHe,$Ue,OHe,LHe,UHe,WHe,HHe,qHe,YHe,IUe,KGe,JHe,eje,nje,ije,aje,oje,RUe,uje,fje,FUe,BGe,hje,mje,vje,bje,kUe,wje,Sje,Eje,cHe];for(const t of Tje)NM(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zh={},zD={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function kje(t,e){zh[t]=e}function Ju(t){if(!(t in zh)){const n=Mje(t);if(n!==null)zh[t]=n;else return console.log("Could not get context for WebGL version",t),null}const e=zh[t];return e.isContextLost()?(delete zh[t],Ju(t)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),zh[t])}function Aje(t){if(typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function Mje(t){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const e=Aje(t);return e.addEventListener("webglcontextlost",n=>{n.preventDefault(),delete zh[t]},!1),t===1?e.getContext("webgl",zD)||e.getContext("experimental-webgl",zD):e.getContext("webgl2",zD)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Wx;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(Wx||(Wx={}));var Ya;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(Ya||(Ya={}));var Ei;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Ei||(Ei={}));function f2(t,e){return[e,t]}function Nje(t,e){return t*e}function Y1(t){const e=Ee(t),n=Math.ceil(e/4);return ZE(n)}function Ry(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function $je(t,e){const[n,r]=Ry(t,e);return n*r*4}function aB(t,e){const n=t;let r,i,s,a,o,l,u,c,f,d;return Ce().getNumber("WEBGL_VERSION")===2?(r=n.R32F,i=n.R16F,s=n.RGBA16F,a=n.RGBA32F,o=n.RED,u=4,c=1,f=n.HALF_FLOAT,d=n.FLOAT):(r=t.RGBA,i=t.RGBA,s=t.RGBA,a=n.RGBA,o=t.RGBA,u=4,c=4,f=e!=null?e.HALF_FLOAT_OES:null,d=t.FLOAT),l=t.RGBA,{internalFormatFloat:r,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:a,textureFormatFloat:o,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:f,textureTypeFloat:d}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _t(t,e){const n=e();return Ce().getBool("DEBUG")&&Ije(t),n}function Ije(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+Fje(t,e))}const Dje=596e-10,Rje=65504;function Oje(t){return!!(Ce().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||Dje<Math.abs(t)&&Math.abs(t)<Rje)}function Fje(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function cC(t,e){return hf(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function Lje(t,e){const n=hf(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(_t(t,()=>t.shaderSource(n,e)),_t(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function Pje(t,e){const n=hf(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(_t(t,()=>t.shaderSource(n,e)),_t(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw Bje(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const zje=/ERROR: [0-9]+:([0-9]+):/g;function Bje(t,e){const n=zje.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],i=t.split(`
`),s=i.length.toString().length+2,a=i.map((f,d)=>rp((d+1).toString(),s)+f);let o=0;for(let f=0;f<a.length;f++)o=Math.max(a[f].length,o);const l=a.slice(0,r-1),u=a.slice(r-1,r),c=a.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${rp(u[0],o)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join(`
`))}function Uje(t){return hf(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function Vje(t,e){if(_t(t,()=>t.linkProgram(e)),t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function BD(t,e){if(_t(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function Wje(t,e){const n=hf(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return _t(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),_t(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function Gje(t,e){const n=hf(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return _t(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),_t(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function Hje(t){return hf(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function jje(t,e){const n=Ce().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,i=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+i+".")}}function qje(t){return hf(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function wj(t,e,n,r,i,s,a){const o=t.getAttribLocation(e,n);return o===-1?!1:(_t(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),_t(t,()=>t.vertexAttribPointer(o,i,t.FLOAT,!1,s,a)),_t(t,()=>t.enableVertexAttribArray(o)),!0)}function Xje(t,e,n){Qje(t,n),_t(t,()=>t.activeTexture(t.TEXTURE0+n)),_t(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function Yje(t,e,n){return hf(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function Kje(t,e,n){return t.getUniformLocation(e,n)}function Zje(t,e,n,r){_t(t,()=>Xje(t,e,r)),_t(t,()=>t.uniform1i(n,r))}function UD(t,e,n){_t(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),_t(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function _j(t,e){_t(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),_t(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function fC(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Jje(t,e))}function Jje(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function hf(t,e,n){const r=_t(t,()=>e());if(r==null)throw new Error(n);return r}function Qje(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const i=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${i}.`)}}function N0(t,e=2){return Ee(t.slice(0,t.length-e))}function $0(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function VD(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[N0(t),...$0(t)]),e}function eqe(t,e=!1){let n=Ce().getNumber("WEBGL_MAX_TEXTURE_SIZE");e&&(n=n*2,t=t.map((i,s)=>s>=t.length-2?X5(t[s]):t[s]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=zd(t).newShape);let r=Ee(t);if(t.length<=1&&r<=n)return[1,r];if(t.length===2&&t[0]<=n&&t[1]<=n)return t;if(t.length===3&&t[0]*t[1]<=n&&t[2]<=n)return[t[0]*t[1],t[2]];if(t.length===3&&t[0]<=n&&t[1]*t[2]<=n)return[t[0],t[1]*t[2]];if(t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n)return[t[0]*t[1]*t[2],t[3]];if(t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n)return[t[0],t[1]*t[2]*t[3]];if(e){const i=N0(t);let s=2,a=2;return t.length&&([s,a]=$0(t)),r=i*(s/2)*(a/2),ZE(r).map(o=>o*2)}return ZE(r)}function dC(t){return t%2===0}function TT(t,e){if(t=t.slice(-2),e=e.slice(-2),Tn(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t.slice(-1)[0],r=e.slice(-1)[0];if(n===r||dC(n)&&dC(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&dC(t[0])&&dC(e[0])}let WD,GD;function tqe(t){if(WD==null){const e=Ju(t);WD=e.getParameter(e.MAX_TEXTURE_SIZE)}return WD}function nqe(t){if(GD==null){const e=Ju(t);GD=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,GD)}function rqe(t){if(t===0)return 0;let e;const n=Ju(t);return Lo(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:Lo(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function Lo(t,e){return t.getExtension(e)!=null}function Sj(t){try{if(Ju(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function iqe(t){if(t===0)return!1;const e=Ju(t);if(t===1){if(!Lo(e,"OES_texture_float"))return!1}else if(!Lo(e,"EXT_color_buffer_float"))return!1;return KF(e)}function sqe(t){if(t===0)return!1;const e=Ju(t);if(t===1){if(!Lo(e,"OES_texture_float")||!Lo(e,"WEBGL_color_buffer_float"))return!1}else{if(Lo(e,"EXT_color_buffer_float"))return KF(e);const r="EXT_color_buffer_half_float";if(Lo(e,r)){const i=e.getExtension(r);return aqe(e,i)}return!1}return KF(e)}function KF(t){const e=aB(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n);const r=1,i=1;t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,r,i,0,e.textureFormatFloat,e.textureTypeFloat,null);const s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(s),a}function aqe(t,e){const n=aB(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);const i=1,s=1;t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,i,s,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const a=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(a),o}function oqe(t){return t!==2?!1:Ju(t).fenceSync!=null}function d2(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&R(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dt=Ce();Dt.registerFlag("HAS_WEBGL",()=>Dt.getNumber("WEBGL_VERSION")>0);Dt.registerFlag("WEBGL_VERSION",()=>Sj(2)?2:Sj(1)?1:0);Dt.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Dt.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Dt.get("WEBGL_VERSION")===2);Dt.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Dt.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Dt.registerFlag("WEBGL_PACK",()=>Dt.getBool("HAS_WEBGL"));Dt.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Dt.getBool("WEBGL_PACK"));Dt.registerFlag("WEBGL_PACK_CLIP",()=>Dt.getBool("WEBGL_PACK"));Dt.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>!1);Dt.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Dt.getBool("WEBGL_PACK"));Dt.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Dt.getBool("WEBGL_PACK"));Dt.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Dt.getBool("WEBGL_PACK"));Dt.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Dt.getBool("WEBGL_PACK"));Dt.registerFlag("WEBGL_PACK_REDUCE",()=>Dt.getBool("WEBGL_PACK"));Dt.registerFlag("WEBGL_LAZILY_UNPACK",()=>Dt.getBool("WEBGL_PACK"));Dt.registerFlag("WEBGL_CONV_IM2COL",()=>Dt.getBool("WEBGL_PACK"));Dt.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>tqe(Dt.getNumber("WEBGL_VERSION")));Dt.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>nqe(Dt.getNumber("WEBGL_VERSION")));Dt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=Dt.getNumber("WEBGL_VERSION");return t===0?0:rqe(t)});Dt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Dt.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!Dte());Dt.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>iqe(Dt.getNumber("WEBGL_VERSION")));Dt.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Dt.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Dt.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Dt.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>sqe(Dt.getNumber("WEBGL_VERSION")));Dt.registerFlag("WEBGL_FENCE_API_ENABLED",()=>oqe(Dt.getNumber("WEBGL_VERSION")));Dt.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Dt.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Dt.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ws(){let t,e,n,r,i,s,a,o,l,u;return Ce().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",i="texture",s="outputColor",a="out vec4 outputColor;",o=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,l="",u=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",i="texture2D",s="gl_FragColor",a="",o=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,u=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:i,output:s,defineOutput:a,defineSpecialNaN:o,defineSpecialInf:l,defineRound:u}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dm(t,e,n="index"){const r=It(e);return r.map((i,s)=>{const a=`int ${t[s]} = ${n} / ${i}`,o=s===r.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * ${i}`:`index -= ${t[s]} * ${i}`;return`${a}; ${o};`}).join("")}function oB(t){const e=It(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}const Ise=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lqe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Wx.DENSE;const n=Y1(e),r=ws();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${dm(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(${n[0]}, ${n[1]}));
        int index = 4 * (resTexRC.x * ${n[1]} + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${r.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uqe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Wx.DENSE;const n=Y1(e),r=ws();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${dm(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(${n[0]}, ${n[1]}));
        int index = 4 * (resTexRC.x * ${n[1]} + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${r.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cqe{constructor(e){this.variableNames=["A"],this.outTexUsage=Ya.DOWNLOAD;const n=ws();this.outputShape=e,this.userCode=`
      ${Ise}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fqe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Ya.DOWNLOAD;const n=ws();this.outputShape=e,this.userCode=`
      ${Ise}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dqe{constructor(e,n,r=!1){this.variableNames=["A"];const i=ws(),[s,a]=n;this.outputShape=e;let o="result";r&&(o="floor(result * 255. + 0.5)"),this.userCode=`
      ${oB(e)}

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);

        int r = flatIndex / ${a};
        int c = imod(flatIndex, ${a});
        vec2 uv = (vec2(c, r) + halfCR) / vec2(${a}.0, ${s}.0);
        vec4 values = ${i.texture2D}(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        ${i.output} = vec4(${o}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hqe{constructor(e,n,r=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const i=ws(),[s,a]=n;this.outputShape=e;let o="",l="result";r&&(l="floor(result * 255. + 0.5)");for(let u=0;u<=1;u++)for(let c=0;c<=1;c++){const f=u*2+c;o+=`
          localCoords = coords;
          if(localCoords[2] + ${c} < ${e[2]}) {
            localCoords[2] += ${c};
            if(localCoords[1] + ${u} < ${e[1]}) {
              localCoords[1] += ${u};

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / ${a};
              c = imod(flatIndex, ${a});
              uv = (vec2(c, r) + halfCR) / vec2(${a}.0, ${s}.0);
              values = ${i.texture2D}(A, uv);

              if(offset == 0) {
                result[${f}] = values[0];
              } else if(offset == 1) {
                result[${f}] = values[1];
              } else if(offset == 2) {
                result[${f}] = values[2];
              } else {
                result[${f}] = values[3];
              }
            }
          }
        `}this.userCode=`
      ${oB(e)}

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        ${o}

        ${i.output} = ${l};
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pqe(t){const e=ws(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return Lje(t,n)}function mqe(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return Wje(t,e)}function gqe(t){const e=new Uint16Array([0,1,2,2,1,3]);return Gje(t,e)}function h2(t,e,n,r,i,s){jje(e,n);const a=Hje(t),o=t.TEXTURE_2D;return _t(t,()=>t.bindTexture(o,a)),_t(t,()=>t.texParameteri(o,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),_t(t,()=>t.texParameteri(o,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),_t(t,()=>t.texParameteri(o,t.TEXTURE_MIN_FILTER,t.NEAREST)),_t(t,()=>t.texParameteri(o,t.TEXTURE_MAG_FILTER,t.NEAREST)),_t(t,()=>t.texImage2D(o,0,r,e,n,0,i,s,null)),_t(t,()=>t.bindTexture(t.TEXTURE_2D,null)),a}function Dse(t){return t.internalFormatFloat}function vqe(t,e,n,r){const[i,s]=f2(e,n);return h2(t,i,s,Dse(r),r.textureFormatFloat,t.FLOAT)}function Rse(t){return t.internalFormatHalfFloat}function yqe(t,e,n,r){const[i,s]=f2(e,n);return h2(t,i,s,Rse(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function Ose(t){return t.downloadTextureFormat}function bqe(t,e,n,r){const[i,s]=f2(e,n);return h2(t,i,s,Ose(r),t.RGBA,t.UNSIGNED_BYTE)}function Fse(t){return t.internalFormatPackedFloat}function xqe(t,e,n,r){const[i,s]=Ry(e,n);return h2(t,i,s,Fse(r),t.RGBA,t.FLOAT)}function Lse(t){return t.internalFormatPackedHalfFloat}function wqe(t,e,n,r){const[i,s]=Ry(e,n);return h2(t,i,s,Lse(r),t.RGBA,r.textureTypeHalfFloat)}function _qe(t,e,n){return _t(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),wj(t,e,"clipSpacePos",n,3,20,0)&&wj(t,e,"uv",n,2,20,12)}function Sqe(t,e,n,r,i,s){_t(t,()=>t.bindTexture(t.TEXTURE_2D,e));let a,o,l;i instanceof Uint8Array?(a=new Uint8Array(n*r*4),o=t.UNSIGNED_BYTE,l=t.RGBA):(a=new Float32Array(n*r*4),o=t.FLOAT,l=s.internalFormatPackedFloat),a.set(i),_t(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,o,a)),_t(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function Cqe(t,e,n){_t(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?_t(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):_t(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),_t(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function Eqe(t,e,n,r){const i=t.createBuffer();_t(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,i));const o=4*4*e*n;return _t(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,o,t.STREAM_READ)),_t(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),_t(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),i}function Tqe(t,e,n){const r=t,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function kqe(t,e,n,r){const[i,s]=f2(e,n),a=4,o=new Uint8Array(Nje(e*n,a));return _t(t,()=>t.readPixels(0,0,i,s,r.downloadTextureFormat,t.UNSIGNED_BYTE,o)),new Float32Array(o.buffer)}function Aqe(t,e,n,r,i,s,a,o){const l=t,u=new Float32Array($je(s,a));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function Mqe(t,e,n){const r=new Float32Array(e*n*4);return _t(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nqe{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];const n=Ce().getNumber("WEBGL_VERSION");e!=null?(this.gl=e,kje(n,e)):this.gl=Ju(n);let r="WEBGL_color_buffer_float";const i="EXT_color_buffer_half_float";if(Ce().getNumber("WEBGL_VERSION")===1){const s="OES_texture_float",a="OES_texture_half_float";if(this.textureFloatExtension=cC(this.gl,s),Lo(this.gl,a))this.textureHalfFloatExtension=cC(this.gl,a);else if(Ce().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Lo(this.gl,i))this.colorBufferHalfFloatExtension=cC(this.gl,i);else if(Ce().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Lo(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(Lo(this.gl,i))this.colorBufferHalfFloatExtension=this.gl.getExtension(i);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=mqe(this.gl),this.indexBuffer=gqe(this.gl),this.framebuffer=qje(this.gl),this.textureConfig=aB(this.gl,this.textureHalfFloatExtension)}get debug(){return Ce().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;_t(e,()=>e.finish()),_t(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),_t(e,()=>e.deleteFramebuffer(this.framebuffer)),_t(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),_t(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),_t(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),vqe(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),yqe(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),bqe(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),Cqe(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,i){this.throwIfDisposed(),Sqe(this.gl,e,n,r,i,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),wqe(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),xqe(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(_j(this.gl,this.framebuffer),this.outputTexture=null),_t(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>kqe(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,i,s,a){return Aqe(this.gl,e,n,r,i,s,a,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return Tqe(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const i=Eqe(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),i}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(Ce().getBool("WEBGL_FENCE_API_ENABLED")){const i=e,s=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const a=i.clientWaitSync(s,0,0);return a===i.ALREADY_SIGNALED||a===i.CONDITION_SATISFIED},n=s}else Ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,Ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>Mqe(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl,r=Pje(n,e),i=pqe(n),s=Uje(n);return _t(n,()=>n.attachShader(s,i)),_t(n,()=>n.attachShader(s,r)),Vje(n,s),this.debug&&BD(n,s),this.vertexAttrsAreBound||(this.setProgram(s),this.vertexAttrsAreBound=_qe(n,this.program,this.vertexBuffer)),s}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&_t(this.gl,()=>this.gl.deleteProgram(e))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&BD(this.gl,this.program),_t(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?Yje(this.gl,e,n):Kje(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),_t(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),Zje(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[i,s]=Ry(n,r);this.setOutputMatrixTextureDriver(e,i,s)}setOutputMatrixWriteRegion(e,n,r,i){this.setOutputMatrixWriteRegionDriver(r,e,i,n)}setOutputPackedMatrixWriteRegion(e,n,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&BD(this.gl,this.program),fC(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;this.debug&&this.debugValidate(),_t(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),_t(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=cC(this.gl,Ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(Ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),s=r.createQuery();return r.beginQuery(i.TIME_ELAPSED_EXT,s),s}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(Ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await iF(()=>this.disposed||this.isQueryAvailable(e,Ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,Ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),s=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),s&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),i=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=$qe(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),!(this.itemsToPoll.length>1)&&iF(()=>(this.pollItems(),this.itemsToPoll.length===0))}bindTextureToFrameBuffer(e){this.throwIfDisposed(),UD(this.gl,e,this.framebuffer),this.debug&&fC(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(UD(this.gl,this.outputTexture,this.framebuffer),this.debug&&fC(this.gl)):_j(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const i=this.gl;UD(i,e,this.framebuffer),this.debug&&fC(i),this.outputTexture=e,_t(i,()=>i.viewport(0,0,n,r)),_t(i,()=>i.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,i){this.throwIfDisposed(),_t(this.gl,()=>this.gl.scissor(e,n,r,i))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function $qe(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:Pse}=rre;function Iqe(t,e,n,r){const i=[];t.forEach(p=>{const m=Ee(p.shapeInfo.logicalShape);p.shapeInfo.isUniform?i.push(`uniform float ${p.name}${m>1?`[${m}]`:""};`):(i.push(`uniform sampler2D ${p.name};`),i.push(`uniform int offset${p.name};`))});const s=i.join(`
`),a=t.map(p=>Dqe(p,e,r)).join(`
`),o=e.texShape,l=ws(),u=Fqe(l);let c,f,d=zqe(l);return e.isPacked?(c=Rqe(e.logicalShape,o),f=Pqe(l)):(c=Oqe(e.logicalShape,o),f=Lqe(l)),r&&(d+=Wqe),[d,u,f,s,c,a,n].join(`
`)}function Oy(t){const e=t.shapeInfo.logicalShape;switch(e.length){case 0:return tXe(t);case 1:return rXe(t);case 2:return sXe(t);case 3:return oXe(t);case 4:return uXe(t);case 5:return cXe(t);case 6:return fXe(t);default:throw new Error(`${e.length}-D input sampling is not yet supported`)}}function zse(t){switch(t.shapeInfo.logicalShape.length){case 0:return eXe(t);case 1:return nXe(t);case 2:return iXe(t);case 3:return aXe(t);default:return lXe(t)}}function Dqe(t,e,n=!1){let r="";n?r+=zse(t):r+=Oy(t);const i=t.shapeInfo.logicalShape,s=e.logicalShape;return i.length<=s.length&&(n?r+=dXe(t,e):r+=hXe(t,e)),r}function Rqe(t,e){switch(t.length){case 0:return Bse();case 1:return Gqe(t,e);case 2:return Jqe(t,e);case 3:return jqe(t,e);default:return Xqe(t,e)}}function Oqe(t,e){switch(t.length){case 0:return Bse();case 1:return Hqe(t,e);case 2:return Qqe(t,e);case 3:return qqe(t,e);case 4:return Yqe(t,e);case 5:return Kqe(t,e);case 6:return Zqe(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function Fqe(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function Lqe(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function Pqe(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function zqe(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${Bqe}
    ${Uqe}
    ${Vqe}
  `}const Bqe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Uqe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Vqe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Wqe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function Bse(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function Gqe(t,e){const n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return n[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${n[1]}.0);
      }
    `:n[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${n[0]}.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${n[0]}, ${n[1]}));
      return 2 * (resTexRC.x * ${n[1]} + resTexRC.y);
    }
  `}function Hqe(t,e){return e[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function jqe(t,e){const n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],r=Math.ceil(t[2]/2),i=r*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${n[0]}, ${n[1]}));
      int index = resTexRC.x * ${n[1]} + resTexRC.y;

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${r});
      int c = imod(index, ${r}) * 2;

      return ivec3(b, r, c);
    }
  `}function qqe(t,e){const n=dm(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${n}
      return ivec3(r, c, d);
    }
  `}function Xqe(t,e){const n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],r=Math.ceil(t[t.length-1]/2),i=r*Math.ceil(t[t.length-2]/2);let s=i,a="",o="b, r, c";for(let l=2;l<t.length-1;l++)s*=t[t.length-l-1],a=`
      int b${l} = index / ${s};
      index -= b${l} * ${s};
    `+a,o=`b${l}, `+o;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${n[0]}, ${n[1]}));
      int index = resTexRC.x * ${n[1]} + resTexRC.y;

      ${a}

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${r});
      int c = imod(index, ${r}) * 2;

      return ivec${t.length}(${o});
    }
  `}function Yqe(t,e){const n=dm(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${n}
      return ivec4(r, c, d, d2);
    }
  `}function Kqe(t,e){const n=dm(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function Zqe(t,e){const n=dm(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function Jqe(t,e){const n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(Tn(t,e))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${n[0]}, ${n[1]}));
      }
    `;const r=Math.ceil(t[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${n[0]}, ${n[1]}));

      int index = resTexRC.x * ${n[1]} + resTexRC.y;
      int r = 2 * (index / ${r});
      int c = imod(index, ${r}) * 2;

      return ivec2(r, c);
    }
  `}function Qqe(t,e){return Tn(t,e)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function hm(t){return`offset${t}`}function eXe(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=ws();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function tXe(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return`float ${n}() {return ${e};}`;const[r,i]=t.shapeInfo.texShape;if(r===1&&i===1)return`
      float ${n}() {
        return sampleTexture(${e}, halfCR);
      }
    `;const[s,a]=t.shapeInfo.texShape,o=hm(e);return`
    float ${n}() {
      vec2 uv = uvFromFlat(${s}, ${a}, ${o});
      return sampleTexture(${e}, uv);
    }
  `}function nXe(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=t.shapeInfo.texShape,i=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],s=ws();return`
    vec4 ${n}(int index) {
      vec2 uv = packedUVfrom1D(
        ${i[0]}, ${i[1]}, index);
      return ${s.texture2D}(${e}, uv);
    }
  `}function rXe(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return`
      float ${n}(int index) {
        ${Fy(t)}
      }
    `;const r=t.shapeInfo.texShape,i=r[0],s=r[1];if(s===1&&i===1)return`
      float ${n}(int index) {
        return sampleTexture(${e}, halfCR);
      }
    `;const a=hm(e);return s===1?`
      float ${n}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${i}.0);
        return sampleTexture(${e}, uv);
      }
    `:i===1?`
      float ${n}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${s}.0, 0.5);
        return sampleTexture(${e}, uv);
      }
    `:`
    float ${n}(int index) {
      vec2 uv = uvFromFlat(${i}, ${s}, index + ${a});
      return sampleTexture(${e}, uv);
    }
  `}function iXe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t.shapeInfo.texShape,s=i[0],a=i[1],o=ws();if(i!=null&&Tn(e,i))return`
      vec4 ${r}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${s}.0);

        return ${o.texture2D}(${n}, uv);
      }
    `;const l=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],u=Math.ceil(e[1]/2);return`
    vec4 ${r}(int row, int col) {
      vec2 uv = packedUVfrom2D(${u}, ${l[0]}, ${l[1]}, row, col);
      return ${o.texture2D}(${n}, uv);
    }
  `}function sXe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t.shapeInfo.texShape;if(i!=null&&Tn(e,i)){const f=i[0],d=i[1];return`
    float ${r}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${d}.0, ${f}.0);
      return sampleTexture(${n}, uv);
    }
  `}const{newShape:s,keptDims:a}=zd(e),o=s;if(o.length<e.length){const f=Ly(t,o),d=["row","col"];return`
      ${Oy(f)}
      float ${r}(int row, int col) {
        return ${r}(${Py(d,a)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${e[1]}, 1)));
        ${Fy(t)}
      }
    `;const l=i[0],u=i[1],c=hm(n);return u===1?`
    float ${r}(int row, int col) {
      float index = dot(vec3(row, col, ${c}), vec3(${e[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${l}.0);
      return sampleTexture(${n}, uv);
    }
  `:l===1?`
    float ${r}(int row, int col) {
      float index = dot(vec3(row, col, ${c}), vec3(${e[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);
      return sampleTexture(${n}, uv);
    }
  `:`
  float ${r}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${e[1]} + col + ${c};
    vec2 uv = uvFromFlat(${l}, ${u}, index);
    return sampleTexture(${n}, uv);
  }
`}function aXe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t.shapeInfo.texShape,s=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(e[0]===1){const f=e.slice(1),d=[1,2],h=Ly(t,f),p=["b","row","col"];return`
        ${zse(h)}
        vec4 ${r}(int b, int row, int col) {
          return ${r}(${Py(p,d)});
        }
      `}const a=s[0],o=s[1],l=Math.ceil(e[2]/2),u=l*Math.ceil(e[1]/2),c=ws();return`
    vec4 ${r}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${a}, ${o}, ${u}, ${l}, b, row, col);
      return ${c.texture2D}(${n}, uv);
    }
  `}function oXe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e[1]*e[2],s=e[2],{newShape:a,keptDims:o}=zd(e),l=a;if(l.length<e.length){const p=Ly(t,l),m=["row","col","depth"];return`
        ${Oy(p)}
        float ${r}(int row, int col, int depth) {
          return ${r}(${Py(m,o)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${i}, ${s}, 1)));
        ${Fy(t)}
      }
    `;const u=t.shapeInfo.texShape,c=u[0],f=u[1],d=t.shapeInfo.flatOffset;if(f===i&&d==null)return`
        float ${r}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${s}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${f}.0, ${c}.0);
          return sampleTexture(${n}, uv);
        }
      `;if(f===s&&d==null)return`
    float ${r}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${e[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${f}.0, ${c}.0);
      return sampleTexture(${n}, uv);
    }
  `;const h=hm(n);return`
      float ${r}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${i} + col * ${s} + depth + ${h};
        vec2 uv = uvFromFlat(${c}, ${f}, index);
        return sampleTexture(${n}, uv);
      }
  `}function lXe(t){const e=t.shapeInfo.logicalShape,n=e.length,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape,a=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],o=a[0],l=a[1],u=Math.ceil(e[n-1]/2);let c=u*Math.ceil(e[n-2]/2),f="int b, int row, int col",d=`b * ${c} + (row / 2) * ${u} + (col / 2)`;for(let p=2;p<n-1;p++)f=`int b${p}, `+f,c*=e[n-p-1],d=`b${p} * ${c} + `+d;const h=ws();return`
    vec4 ${i}(${f}) {
      int index = ${d};
      int texR = index / ${l};
      int texC = index - texR * ${l};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${l}, ${o});
      return ${h.texture2D}(${r}, uv);
    }
  `}function uXe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e[3],s=e[2]*i,a=e[1]*s,{newShape:o,keptDims:l}=zd(e);if(o.length<e.length){const p=Ly(t,o),m=["row","col","depth","depth2"];return`
      ${Oy(p)}
      float ${r}(int row, int col, int depth, int depth2) {
        return ${r}(${Py(m,l)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${s}, ${i}, 1)));
        ${Fy(t)}
      }
    `;const u=t.shapeInfo.flatOffset,c=t.shapeInfo.texShape,f=c[0],d=c[1];if(d===a&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${s}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${d}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(d===i&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${e[1]*e[2]}, ${e[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${d}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;const h=hm(n);return`
    float ${r}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${s} +
          depth * ${i} + depth2;
      vec2 uv = uvFromFlat(${f}, ${d}, index + ${h});
      return sampleTexture(${n}, uv);
    }
  `}function cXe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e[4],s=e[3]*i,a=e[2]*s,o=e[1]*a,{newShape:l,keptDims:u}=zd(e);if(l.length<e.length){const m=Ly(t,l),g=["row","col","depth","depth2","depth3"];return`
      ${Oy(m)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${Py(g,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${o}, ${a}, ${s}, ${i})) +
          depth3;
        ${Fy(t)}
      }
    `;const c=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,d=f[0],h=f[1];if(h===o&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${a}, ${s}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${d}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(h===i&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${d}.0);
        return sampleTexture(${n}, uv);
      }
    `;const p=hm(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${a} + depth * ${s} +
          depth2 * ${i} + depth3 + ${p};
      vec2 uv = uvFromFlat(${d}, ${h}, index);
      return sampleTexture(${n}, uv);
    }
  `}function fXe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:i,keptDims:s}=zd(e);if(i.length<e.length){const g=Ly(t,i),v=["row","col","depth","depth2","depth3","depth4"];return`
      ${Oy(g)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${Py(v,s)});
      }
    `}const a=e[5],o=e[4]*a,l=e[3]*o,u=e[2]*l,c=e[1]*u;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${c}, ${u}, ${l}, ${o})) +
          dot(
            vec2(depth3, depth4),
            vec2(${a}, 1)));
        ${Fy(t)}
      }
    `;const f=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,h=d[0],p=d[1];if(p===c&&f==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${u}, ${l}, ${o}, ${a})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(p===a&&f==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;const m=hm(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${c} + col * ${u} + depth * ${l} +
          depth2 * ${o} + depth3 * ${a} + depth4 + ${m};
      vec2 uv = uvFromFlat(${h}, ${p}, index);
      return sampleTexture(${n}, uv);
    }
  `}function Fy(t){const e=t.name,n=Ee(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function dXe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",s=t.shapeInfo.logicalShape.length,a=e.logicalShape.length,o=Pse(t.shapeInfo.logicalShape,e.logicalShape),l=Hn(a),u=a-s;let c;const f=["x","y","z","w","u","v"];s===0?c="":a<2&&o.length>=1?c="coords = 0;":c=o.map(y=>`coords.${f[y+u]} = 0;`).join(`
`);let d="";a<2&&s>0?d="coords":d=t.shapeInfo.logicalShape.map((y,b)=>`coords.${f[b+u]}`).join(", ");let h="return outputValue;";const m=Ee(t.shapeInfo.logicalShape)===1,v=Ee(e.logicalShape)===1;if(s===1&&!m&&!v)h=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(m&&!v)a===1?h=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:h=`
        return vec4(outputValue.x);
      `;else if(o.length){const y=s-2,b=s-1;o.indexOf(y)>-1&&o.indexOf(b)>-1?h="return vec4(outputValue.x);":o.indexOf(y)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":o.indexOf(b)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${i}() {
      ${l} coords = getOutputCoords();
      ${c}
      vec4 outputValue = get${r}(${d});
      ${h}
    }
  `}function hXe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",s=e.texShape,a=t.shapeInfo.texShape,o=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&o===l&&t.shapeInfo.flatOffset==null&&Tn(a,s))return`
      float ${i}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const u=Hn(l),c=Pse(t.shapeInfo.logicalShape,e.logicalShape),f=l-o;let d;const h=["x","y","z","w","u","v"];o===0?d="":l<2&&c.length>=1?d="coords = 0;":d=c.map(m=>`coords.${h[m+f]} = 0;`).join(`
`);let p="";return l<2&&o>0?p="coords":p=t.shapeInfo.logicalShape.map((m,g)=>`coords.${h[g+f]}`).join(", "),`
    float ${i}() {
      ${u} coords = getOutputCoords();
      ${d}
      return get${r}(${p});
    }
  `}function Hn(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function Ly(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function Py(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pXe(t,e,n,r){const i=e.userCode,s=n.map((h,p)=>{const m={logicalShape:h.shape,texShape:h.isUniform?null:h.texData.texShape,isUniform:h.isUniform,isPacked:h.isUniform?!1:h.texData.isPacked,flatOffset:null};return h.texData!=null&&h.texData.slice!=null&&h.texData.slice.flatOffset>0&&(m.flatOffset=h.texData.slice.flatOffset),{name:e.variableNames[p],shapeInfo:m}}),a=s.map(h=>h.shapeInfo),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},l=Iqe(s,o,i,e.packedInputs),u=t.createProgram(l);let c=null;const f=t.getUniformLocation(u,"NAN",!1);Ce().getNumber("WEBGL_VERSION")===1&&(c=t.getUniformLocation(u,"INFINITY",!1));const d={};for(let h=0;h<e.variableNames.length;h++){const p=e.variableNames[h],m=!1;d[p]=t.getUniformLocation(u,p,m),d[`offset${p}`]=t.getUniformLocation(u,`offset${p}`,m)}return{program:e,source:l,webGLProgram:u,uniformLocations:d,inShapeInfos:a,outShapeInfo:o,infLoc:c,nanLoc:f}}function Cj(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const i=n.logicalShape,s=e[r],a=s.shape;if(!Tn(i,a))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${i} and ${a} must match`);if(n.isUniform&&s.isUniform)return;const o=n.texShape,l=s.isUniform?null:s.texData.texShape;if(!Tn(o,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${o} and ${l} must match`)})}function mXe(t,e,n,r,i){Cj(e.inShapeInfos,n),Cj([e.outShapeInfo],[r]);const s=r.texData.texture,a=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(s,a[0],a[1]):t.setOutputMatrixTexture(s,a[0],a[1]),t.setProgram(e.webGLProgram),Ce().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN),n.forEach((o,l)=>{const u=e.program.variableNames[l],c=e.uniformLocations[u],f=e.uniformLocations[`offset${u}`];if(c!=null){if(o.isUniform){if(Ee(o.shape)<2)t.gl.uniform1f(c,o.uniformValues[0]);else{let d=o.uniformValues;d instanceof Float32Array||(d=new Float32Array(d)),t.gl.uniform1fv(c,d)}return}o.texData.slice!=null&&f!=null&&t.gl.uniform1i(f,o.texData.slice.flatOffset),t.setInputMatrixTexture(o.texData.texture,c,l)}}),i!=null&&i(t,e.webGLProgram),t.executeProgram()}function gXe(t,e,n){let r="";e.concat(n).forEach(a=>{const o=a.texData!=null&&a.texData.slice!=null&&a.texData.slice.flatOffset>0,l=a.isUniform?"uniform":a.texData.texShape;r+=`${a.shape}_${l}_${o}`});const i=t.userCode;let s=t.constructor.name;return s+="_"+r+"_"+i,s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:vXe,bincountImpl:Use,bincountReduceImpl:yXe,ceilImpl:bXe,concatImpl:xXe,expImpl:wXe,expm1Impl:_Xe,floorImpl:SXe,gatherV2Impl:CXe,greaterImpl:EXe,lessImpl:TXe,linSpaceImpl:kXe,logImpl:AXe,maxImpl:MXe,maximumImpl:NXe,minimumImpl:$Xe,multiplyImpl:IXe,negImpl:DXe,prodImpl:RXe,rangeImpl:OXe,rsqrtImpl:FXe,simpleAbsImpl:Vse,sliceImpl:LXe,stridedSliceImpl:PXe,subImpl:zXe,tileImpl:BXe,topKImpl:UXe,transposeImpl:lB,uniqueImpl:VXe}=LUe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wse(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function fs(t,e){return e===1?[t]:Wse(t,e)}function WXe(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GXe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;const n=e.length;if(n===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const r=fs("rc",n),i=Hn(n),s=jXe(n,e,r),a=qXe(n,e[e.length-1],e[e.length-2],r),o=XXe(e,r);this.userCode=`
        void main() {
          ${i} rc = getOutputCoords();

          if(${s}) {
            setOutput(vec4(0));
          } else {
            ${a}

            setOutput(vec4(${o}));
          }
        }
      `}}}function HXe(t,e){const n=[];for(let r=0;r<=1;r++)for(let i=0;i<=1;i++){let s=`${r===0?"r":"rp1"}, ${i===0?"c":"cp1"}`;for(let a=2;a<t;a++)s=`${e[e.length-1-a]},`+s;n.push(s)}return n}function jXe(t,e,n){if(t===1)return`rc > ${e[0]}`;let r="";for(let i=t-2;i<t;i++)r+=`${n[i]} >= ${e[i]}`,i<t-1&&(r+="||");return r}function qXe(t,e,n,r){if(t===1)return"";const i=r.slice(-2);return`
    int r = ${i[0]};
    int c = ${i[1]};
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= ${e};
    bool rEdge = rp1 >= ${n};
  `}function XXe(t,e){const n=t.length,r=HXe(n,e);return n===1?`getA(rc),
            rc + 1 >= ${t[0]} ? 0. : getA(rc + 1),
            0, 0`:`getA(${r[0]}),
          cEdge ? 0. : getA(${r[1]}),
          rEdge ? 0. : getA(${r[2]}),
          rEdge || cEdge ? 0. : getA(${r[3]})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Gse{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;let r="";for(let i=0;i<4;i++){let s="thisRC = rc;";i%2===1&&(s+="thisRC.z += 1;"),i>1&&(s+="thisRC.y += 1;"),r+=`
        ${s}
        ${i>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${i}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${i>0?"}":""}
      `}this.userCode=`
      ${YXe(n)}
      ${oB(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${e[1]};
        int cols = ${e[2]};

        ${r}

        setOutput(result);
      }
    `}}function YXe(t){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${dm(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KXe{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(e,n,r){const i=Tj(n,r),s=kj(e,i,r);s in this.freeTextures||(this.freeTextures[s]=[]),s in this.usedTextures||(this.usedTextures[s]=[]);const a=Ej(e,i,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[s].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=a,this.log();const l=this.freeTextures[s].shift();return this.usedTextures[s].push(l),l}let o;return i===Ei.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):i===Ei.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):i===Ei.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):i===Ei.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):i===Ei.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[s].push(o),this.numUsedTextures++,this._numBytesAllocated+=a,this.log(),o}releaseTexture(e,n,r,i){if(this.freeTextures==null)return;const s=Tj(r,i),a=kj(n,s,i);a in this.freeTextures||(this.freeTextures[a]=[]);const o=Ej(n,s,this.gpgpu.gl,this.gpgpu.textureConfig,i),l=Ce().get("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e),this._numBytesAllocated-=o):(this.freeTextures[a].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;const u=this.usedTextures[a],c=u.indexOf(e);if(c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(c,1),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function ZXe(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;throw new Error(`Unknown internal format ${e}`)}function Ej(t,e,n,r,i){const s=JXe(e,r);let a;if(i){const[l,u]=Ry(t[0],t[1]);a=l*u}else{const[l,u]=f2(t[0],t[1]);a=l*u}const o=ZXe(n,s);return a*o}function JXe(t,e){switch(t){case Ei.PACKED_2X2_FLOAT32:return Fse(e);case Ei.PACKED_2X2_FLOAT16:return Lse(e);case Ei.UNPACKED_FLOAT32:return Dse(e);case Ei.UNPACKED_FLOAT16:return Rse(e);case Ei.PACKED_4X1_UNSIGNED_BYTE:return Ose(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function QXe(t){return Ce().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Ei.PACKED_2X2_FLOAT32:Ei.UNPACKED_FLOAT32:t?Ei.PACKED_2X2_FLOAT16:Ei.UNPACKED_FLOAT16}function Tj(t,e){if(t===Ya.UPLOAD)return Ei.PACKED_2X2_FLOAT32;if(t===Ya.RENDER||t==null)return QXe(e);if(t===Ya.DOWNLOAD||t===Ya.PIXELS)return Ei.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function kj(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pd{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const Hl="if (isnan(x)) return x;",eYe="return x;",Aj="return abs(x);",tYe="return (x >= 0.0) ? x : (exp(x) - 1.0);",nYe=Hl+`
  return (x < 0.0) ? 0.0 : x;
`,rYe=Hl+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,hC="return x;";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iYe="return x;",sYe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,aYe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,oYe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;class qg{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lYe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;const n=e.length,r=fs("rc",n),i=Hn(n),s=WXe(n,r),a=r.slice(-2),o=n<=1?"rc":`vec2(${a.join(",")})`;this.userCode=`
      void main() {
        ${i} rc = getOutputCoords();
        vec4 packedInput = getA(${s});

        setOutput(getChannel(packedInput, ${o}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uYe=o3,cYe=1e-7,fYe=1e-4,pC={};function dYe(t){return t in pC||(pC[t]={}),pC[t]}const hYe=128,pYe=600;function mYe(){return Ce().global.screen==null?1024:Ce().global.screen.height*Ce().global.screen.width*window.devicePixelRatio*pYe/1024/1024}class Y3 extends zA{constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.warnedAboutMemory=!1,this.warnedAboutCPUBackend=!1,this.pendingDeletes=0,this.disposed=!1,!Ce().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(e==null){const n=Ju(Ce().getNumber("WEBGL_VERSION"));this.binaryCache=dYe(Ce().getNumber("WEBGL_VERSION")),this.gpgpu=new Nqe(n),this.canvas=n.canvas,this.gpgpuCreatedLocally=!0}else this.gpgpu=e,this.binaryCache={},this.gpgpuCreatedLocally=!1,this.canvas=e.gl.canvas;this.textureManager=new KXe(this.gpgpu),this.numMBBeforeWarning=mYe(),this.texData=new q5(this,wc())}nextDataId(){return Y3.nextDataId++}numDataIds(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes}write(e,n,r){if((Ce().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Ce().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const i={id:this.nextDataId()};return this.texData.set(i,{shape:n,dtype:r,values:e,usage:Ya.UPLOAD,refCount:1}),i}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,i,s){if(Ce().getBool("DEBUG")&&this.checkNumericalProblems(n),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:i,values:n,usage:Ya.UPLOAD,refCount:s})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:i,complexTensorInfos:s,slice:a,shape:o,isPacked:l}=n;if(a!=null){let d;l?d=new qg(o,hC):d=new pd(o,hC);const h=this.runWebGLProgram(d,[{dataId:e,shape:o,dtype:i}],i),p=this.readSync(h.dataId);return this.disposeIntermediateTensorInfo(h),p}if(r!=null)return this.convertAndCacheOnCPU(e);if(i==="string")return r;const u=this.activeTimers!=null;let c;u&&(c=Gi());let f;if(i==="complex64"){const d=this.readSync(s.real.dataId),h=this.readSync(s.imag.dataId);f=Jc(d,h)}else f=this.getValuesFromTexture(e);return u&&(this.downloadWaitMs+=Gi()-c),this.convertAndCacheOnCPU(e,f)}async read(e){if(this.pendingRead.has(e)){const p=this.pendingRead.get(e);return new Promise(m=>p.push(m))}const n=this.texData.get(e),{values:r,shape:i,slice:s,dtype:a,complexTensorInfos:o,isPacked:l}=n;if(s!=null){let p;l?p=new qg(i,hC):p=new pd(i,hC);const m=this.runWebGLProgram(p,[{dataId:e,shape:i,dtype:a}],a),g=this.read(m.dataId);return this.disposeIntermediateTensorInfo(m),g}if(r!=null)return this.convertAndCacheOnCPU(e);if(!Ce().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&Ce().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u=null,c;if(a!=="complex64"&&Ce().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(e);const p=this.texData.get(c.dataId);u=this.gpgpu.createBufferFromTexture(p.texture,...Y1(i))}this.pendingRead.set(e,[]),a!=="complex64"&&await this.gpgpu.createAndWaitForFence();let f;if(a==="complex64"){const p=await Promise.all([this.read(o.real.dataId),this.read(o.imag.dataId)]),m=p[0],g=p[1];f=Jc(m,g)}else if(u==null)f=this.getValuesFromTexture(e);else{const p=Ee(i);f=this.gpgpu.downloadFloat32MatrixFromBuffer(u,p)}c!=null&&this.disposeIntermediateTensorInfo(c);const d=this.convertAndCacheOnCPU(e,f),h=this.pendingRead.get(e);return this.pendingRead.delete(e),h.forEach(p=>p(d)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&wc().removeDataId(e,this),this.pendingDeletes--),d}bufferSync(e){const n=this.readSync(e.dataId);let r=n;if(e.dtype==="string")try{r=n.map(i=>wp(i))}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Jt(e.shape,e.dtype,r)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!Oje(r))throw Ce().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:i}=this.texData.get(e),s=Ee(n);if(Ce().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const d=this.decode(e),h=this.texData.get(d.dataId),p=this.gpgpu.downloadMatrixFromPackedTexture(h.texture,...Y1(n)).subarray(0,s);return this.disposeIntermediateTensorInfo(d),p}const a=Ce().getBool("WEBGL_PACK")&&i===!0,o=a?VD(n):n,l=a?new fqe(o):new cqe(o),u=this.runWebGLProgram(l,[{shape:o,dtype:r,dataId:e}],"float32"),c=this.texData.get(u.dataId),f=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture,c.texShape[0],c.texShape[1]).subarray(0,s);return this.disposeIntermediateTensorInfo(u),f}timerAvailable(){return Ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}async time(e){const n=this.activeTimers,r=[];let i=!1;this.programTimersStack==null?(this.programTimersStack=r,i=!0):this.activeTimers.push(r),this.activeTimers=r,e();const s=Xc(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),a=Xc(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,i&&(this.programTimersStack=null);const o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};if(Ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(s);o.kernelMs=vte(l),o.getExtraProfileInfo=()=>l.map((u,c)=>({name:a[c],ms:u})).map(u=>`${u.name}: ${u.ms}`).join(", ")}else o.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,o}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Gi(),endMs:null}}endTimer(e){return Ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Gi(),e)}async getQueryTime(e){if(Ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:i,usage:s,isPacked:a,slice:o}=this.texData.get(e),l=o&&o.origDataId||e,u=this.dataRefCount.get(l);u>1?this.dataRefCount.set(l,u-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(i,r),this.textureManager.releaseTexture(n,i,s,a)));const c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture}getDataInfo(e){return this.texData.get(e)}getCPUBackend(){return Ce().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=wc().findBackend("cpu")),this.cpuBackend):null}shouldExecuteOnCPU(e,n=hYe){const r=this.getCPUBackend();return!Ce().getBool("IS_TEST")&&!this.warnedAboutCPUBackend&&r==null&&(console.warn("Your application contains ops that are small enough to be executed on the CPU backend, however the CPU backend cannot be found. Consider importing the CPU backend (@tensorflow/tfjs-backend-cpu) for better performance."),this.warnedAboutCPUBackend=!0),r!=null&&e.every(i=>this.texData.get(i.dataId).texture==null&&Ee(i.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){Ey("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return uYe(e.shape,n)}packedUnaryOp(e,n,r){const i=new qg(e.shape,n),s=this.compileAndRun(i,[e],r);return wc().makeTensorFromDataId(s.dataId,s.shape,s.dtype)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const i=Vse(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,i)}if(Ce().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Aj,e.dtype);const n=new pd(e.shape,Aj),r=this.compileAndRun(n,[e]);return wc().makeTensorFromDataId(r.dataId,r.shape,r.dtype)}makeTensorInfo(e,n,r){let i;if(n==="string"&&r!=null&&r.length>0&&vu(r[0])){const s=r.map(a=>sm(a));i=this.write(s,e,n)}else i=this.write(r,e,n);return this.texData.get(i).usage=null,{dataId:i,shape:e,dtype:n}}makeOutput(e,n,r){const{dataId:i}=this.makeTensorInfo(e,n,r);return wc().makeTensorFromDataId(i,e,n,this)}unpackTensor(e){const n=new lYe(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new GXe(e.shape),r=!0;return this.runWebGLProgram(n,[e],e.dtype,null,r)}packedReshape(e,n){const r=[N0(e.shape),...$0(e.shape)],i={dtype:e.dtype,shape:r,dataId:e.dataId},s=[N0(n),...$0(n)],a=new Gse(s,r),o=!0,l=this.runWebGLProgram(a,[i],e.dtype,null,o);return{dataId:l.dataId,shape:n,dtype:l.dtype}}decode(e){const n=this.texData.get(e),{isPacked:r,shape:i,dtype:s}=n,a=VD(i);let o;r?o=new uqe(a):o=new lqe(a);const l=!0,u=this.runWebGLProgram(o,[{shape:a,dtype:s,dataId:e}],s,null,l);return{dtype:s,shape:i,dataId:u.dataId}}runWebGLProgram(e,n,r,i,s=!1){const a=this.makeTensorInfo(e.outputShape,r),o=this.texData.get(a.dataId);if(e.packedOutput&&(o.isPacked=!0),e.outPackingScheme===Wx.DENSE){const m=Y1(e.outputShape);o.texShape=m.map(g=>g*2)}if(e.outTexUsage!=null&&(o.usage=e.outTexUsage),Ee(a.shape)===0)return o.values=fi(a.dtype,0),a;const l=[],u=n.map(m=>{if(m.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let g=this.texData.get(m.dataId);if(g.texture==null){if(!e.packedInputs&&Ee(m.shape)<=Ce().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:m.shape,texData:null,isUniform:!0,uniformValues:g.values};e.packedInputs&&(g.isPacked=!0,g.shape=m.shape)}else if(!!g.isPacked!=!!e.packedInputs)m=g.isPacked?this.unpackTensor(m):this.packTensor(m),l.push(m),g=this.texData.get(m.dataId);else if(g.isPacked&&!TT(g.shape,m.shape)){const v=m,y=m.shape;m.shape=g.shape,m=this.packedReshape(m,y),l.push(m),g=this.texData.get(m.dataId),v.shape=y}return this.uploadToGPU(m.dataId),{shape:m.shape,texData:g,isUniform:!1}});this.uploadToGPU(a.dataId);const c={shape:a.shape,texData:o,isUniform:!1},f=gXe(e,u,c),d=this.getAndSaveBinary(f,()=>pXe(this.gpgpu,e,u,c)),h=this.activeTimers!=null;let p;if(h&&(p=this.startTimer()),mXe(this.gpgpu,d,u,c,i),l.forEach(m=>this.disposeIntermediateTensorInfo(m)),h&&(p=this.endTimer(p),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(p)})),!Ce().getBool("WEBGL_LAZILY_UNPACK")&&o.isPacked&&s===!1){const m=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),m}return a}compileAndRun(e,n,r,i,s=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,i,s)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(Ce().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=oe(()=>{if(!Ce().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=Ce().getBool("DEBUG");Ce().set("DEBUG",!1);const n=this.abs(St(1e-8)).dataSync()[0];if(Ce().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?cYe:fYe}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:i,values:s,texture:a,usage:o,isPacked:l}=n;if(a!=null)return;const u=this.activeTimers!=null;let c;u&&(c=Gi());let f=n.texShape;if(f==null&&(f=eqe(r,l),n.texShape=f),s!=null){const d=VD(r);let h,p=f[1],m=f[0];const g=s instanceof Uint8Array;l?([p,m]=Ry(f[0],f[1]),h=new hqe(d,[m,p],g)):h=new dqe(d,[m,p],g);const v=this.makeTensorInfo([m,p],i);g?this.texData.get(v.dataId).usage=Ya.PIXELS:this.texData.get(v.dataId).usage=Ya.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(v.dataId),p,m,s);const y=!0,b=this.runWebGLProgram(h,[v],i,null,y),x=this.texData.get(b.dataId);n.texture=x.texture,n.texShape=x.texShape,n.isPacked=x.isPacked,n.usage=x.usage,this.disposeIntermediateTensorInfo(v),this.texData.delete(b.dataId),n.values=null,u&&(this.uploadWaitMs+=Gi()-c)}else{const d=this.acquireTexture(f,o,i,l);n.texture=d}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:i}=r;return this.releaseGPUData(e),n!=null&&(r.values=gYe(n,i)),r.values}acquireTexture(e,n,r,i){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const s=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${s} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,i)}computeBytes(e,n){return e[0]*e[1]*JE(n)}}Y3.nextDataId=0;function gYe(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/** @license See the LICENSE file. */const vYe="3.1.0";/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */r4()&&v4("webgl",()=>new Y3,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hse=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class I0{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=cn(n,r),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K3=`
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;
`;class p2{constructor(e,n,r,i=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=cn(n,r);const s=this.outputShape.length;let a="";if(i)if(s===0||Ee(this.outputShape)===1)a=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(a=`
          ${Hn(s)} coords = getOutputCoords();
        `,s===1)a+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=fs("coords",s);a+=`
            bool nextRowOutOfBounds =
              (${l[s-2]} + 1) >= ${this.outputShape[s-2]};
            bool nextColOutOfBounds =
              (${l[s-1]} + 1) >= ${this.outputShape[s-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${a}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ta(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const yYe={kernelName:zv,backendName:"webgl",kernelFunc:Ta};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hd(t){const{inputs:e,backend:n}=t,{real:r,imag:i}=e,s=n.makeTensorInfo(r.shape,"complex64"),a=n.texData.get(s.dataId),o=Ta({inputs:{x:r},backend:n}),l=Ta({inputs:{x:i},backend:n});return a.complexTensorInfos={real:o,imag:l},s}const bYe={kernelName:jA,backendName:"webgl",kernelFunc:Hd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jse="return (a < 0.) ? b * a : a;",qse=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function xYe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{alpha:s}=r,a=n.makeTensorInfo([],"float32",of(s,"float32")),o=Ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new p2(qse,i.shape,a.shape):new I0(jse,i.shape,a.shape),l=n.runWebGLProgram(o,[i,a],i.dtype);return n.disposeIntermediateTensorInfo(a),l}const wYe={kernelName:t_,backendName:"webgl",kernelFunc:xYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xse="return (a < 0.) ? b * a : a;",Yse=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function _Ye(t){const{inputs:e,backend:n}=t,{x:r,alpha:i}=e,s=Ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new p2(Yse,r.shape,i.shape):new I0(Xse,r.shape,i.shape);return n.runWebGLProgram(s,[r,i],r.dtype)}const SYe={kernelName:x_,backendName:"webgl",kernelFunc:_Ye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kse="if (isnan(x)) return x;",CYe=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`,EYe=`
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;
`;function vn({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:i,backend:s})=>{const{x:a}=i,o=s,l=r||a.dtype;if(o.shouldExecuteOnCPU([a])&&n!=null){const f=o.texData.get(a.dataId),d=n(f.values,l);return o.makeTensorInfo(a.shape,l,d)}const u=Ce().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let c;return u?c=new qg(a.shape,e):c=new pd(a.shape,t),o.runWebGLProgram(c,[a],l)}}function Fi({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:i,dtype:s}){return({inputs:a,backend:o})=>{const{a:l,b:u}=a,c=o;if(r&&l.dtype==="complex64"){const p=c.texData.get(l.dataId),m=c.texData.get(u.dataId),[g,v]=[[p.complexTensorInfos.real,m.complexTensorInfos.real],[p.complexTensorInfos.imag,m.complexTensorInfos.imag]].map(b=>{const[x,w]=b,S={dataId:x.dataId,dtype:x.dtype,shape:l.shape},C={dataId:w.dataId,dtype:w.dtype,shape:u.shape},_=new I0(t,l.shape,u.shape);return c.runWebGLProgram(_,[S,C],wa(x.dtype,w.dtype))}),y=Hd({inputs:{real:g,imag:v},backend:c});return c.disposeIntermediateTensorInfo(g),c.disposeIntermediateTensorInfo(v),y}const f=s||wa(l.dtype,u.dtype);if(c.shouldExecuteOnCPU([l,u])&&i!=null){const p=c.texData.get(l.dataId),m=c.texData.get(u.dataId),[g,v]=i(l.shape,u.shape,p.values,m.values,f),y=c.makeTensorInfo(v,f),b=c.texData.get(y.dataId);return b.values=g,y}const d=Ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let h;return d?h=new p2(e,l.shape,u.shape,n):h=new I0(t,l.shape,u.shape),c.runWebGLProgram(h,[l,u],f)}}function Z3(t,e=!1){if(t==="linear")return e?iYe:eYe;if(t==="relu")return e?aYe:nYe;if(t==="elu")return e?sYe:tYe;if(t==="relu6")return e?oYe:rYe;if(t==="prelu")return e?Yse:Xse;if(t==="leakyrelu")return e?qse:jse;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Zse{constructor(e,n,r,i=!1,s=!1,a=!1,o=null,l=!1,u=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r;const c=i?e[1]:e[2],f=Math.ceil(c/2),d=i?"i * 2, rc.y":"rc.y, i * 2",h=s?"rc.z, i * 2":"i * 2, rc.z",p=i?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=s?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let g="",v="";o&&(l?g=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${o}
        }`:u?g=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${o}
        }`:g=`vec4 activation(vec4 x) {
          ${o}
        }`,v="result = activation(result);");const y=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");let b="rc.x",x="rc.x";e[0]<n[0]?b=`int(min(float(rc.x), ${e[0]-1}.))`:n[0]<e[0]&&(x=`int(min(float(rc.x), ${n[0]-1}.))`),this.userCode=`
      ${g}

      const float sharedDimension = ${f}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < ${f}; i++) {
          int batchA = ${b};
          int batchB = ${x};
          vec4 a = getMatrixA(batchA, ${d});
          vec4 b = getMatrixB(batchB, ${h});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${p[0]} * ${m[0]});
          result += (${p[1]} * ${m[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${y}

        ${v}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mj={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class Nj{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=cn(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $j="return a * b;";function Jse(t){const{inputs:e,backend:n}=t,{a:r,b:i}=e,s=wa(r.dtype,i.dtype);if(r.dtype==="complex64"){const o=n.texData.get(r.dataId),l=n.texData.get(i.dataId),u=new Nj(Mj.REAL,r.shape,i.shape),c=new Nj(Mj.IMAG,r.shape,i.shape),f=[{dataId:o.complexTensorInfos.real.dataId,dtype:o.complexTensorInfos.real.dtype,shape:r.shape},{dataId:o.complexTensorInfos.imag.dataId,dtype:o.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:i.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:i.shape}],d=n.runWebGLProgram(u,f,"float32"),h=n.runWebGLProgram(c,f,"float32"),p=Hd({inputs:{real:d,imag:h},backend:n});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),p}if(n.shouldExecuteOnCPU([r,i])){const o=n.texData.get(r.dataId),l=n.texData.get(i.dataId),[u,c]=IXe(r.shape,i.shape,o.values,l.values,s),f=n.makeTensorInfo(c,s),d=n.texData.get(f.dataId);return d.values=u,f}let a;return Ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?a=new p2($j,r.shape,i.shape):a=new I0($j,r.shape,i.shape),n.runWebGLProgram(a,[r,i],s)}const TYe={kernelName:Xv,backendName:"webgl",kernelFunc:Jse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kYe(t,e,n){const r=[N0(t.shape),...$0(t.shape)],i={dtype:t.dtype,shape:r,dataId:t.dataId},s=[N0(e),...$0(e)],a=new Gse(s,r),o=!0,l=n.runWebGLProgram(a,[i],t.dtype,null,o);return{dataId:l.dataId,shape:e,dtype:l.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ct(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{shape:s}=r,a=n,o=Ee(i.shape),l=Y5(s,o),u=Ee(l);R(o===u,()=>`The new shape (${l}) has ${u} elements and the old shape (${i.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`);const c=a.texData.get(i.dataId);return c.isPacked&&!TT(i.shape,l)&&!(c.texture!==null&&TT(c.shape,l))?kYe(i,l,a):(a.incRef(i.dataId),{dataId:i.dataId,shape:l,dtype:i.dtype})}const AYe={kernelName:w_,backendName:"webgl",kernelFunc:ct};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ij{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:s,outSize:a}=e;this.outputShape=[i,a];const o=Math.floor(r/4)*4,l=r%4;let u="sumValue += dot(values, ones);";if(n!=null){const f=1/n;u=`sumValue += dot(values * ${ni(f)?f.toPrecision(2):f}, ones);`}let c="";s%r>0&&(c=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${c}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${o}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${u}
        }

        int inIdx = inOffset + ${o};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${u}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${u}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${u}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MYe{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:s,outSize:a}=e;this.outputShape=[i,a];let o="0.0",l="";n==="prod"?o="1.0":n==="min"?(o="1.0 / 1e-20",l="min"):n==="max"&&(o="-1.0 / 1e-20",l="max");let u=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?u="sumValue":n==="prod"?u="prodValue":n==="all"?u="allValue":n==="any"&&(u="anyValue");const c=Math.floor(r/4)*4,f=r%4;let d=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
      }
    `,h="vec4";n==="all"?(o="1.0",d=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):n==="any"&&(o="0.0",d=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");let p="";s%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${o};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${o});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${d}
        }

        int inIdx = inOffset + ${c};
        if (${f===1}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${d}
        } else if (${f===2}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${d}
        } else if (${f===3}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${d}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NYe(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=_3(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function pm(t,e,n,r){const i=NYe(t.shape);let s=t;for(let a=0;a<i.length;a++){const{inSize:o,windowSize:l,outSize:u}=i[a];let c,f;n==="mean"?c=a===0?new Ij({windowSize:l,inSize:o,batchSize:t.shape[0],outSize:u},o):new Ij({windowSize:l,inSize:o,batchSize:t.shape[0],outSize:u}):c=new MYe({windowSize:l,inSize:o,batchSize:t.shape[0],outSize:u},n),f=s,s=r.runWebGLProgram(c,[s],e),f.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(f)}return s}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $Ye{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let a=0;a<r.length;a++)r[a]=e[n[a]];this.outputShape=r,this.rank=r.length;const i=Hn(this.rank),s=IYe(n);this.userCode=`
    void main() {
      ${i} resRC = getOutputCoords();
      setOutput(getA(${s}));
    }
    `}}function IYe(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let i=0;i<t.length;i++)r[t[i]]=n[i];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DYe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let c=0;c<r.length;c++)r[c]=e[n[c]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const i=Hn(this.rank),s=Wse("rc",this.rank),a=new Array(this.rank);for(let c=0;c<n.length;c++)a[n[c]]=s[c];const o=`vec2(${a.slice(-2).join()})`,l=`++${s[this.rank-1]} < ${r[this.rank-1]}`,u=`getChannel(getA(${a.join()}), ${o})`;this.userCode=`
    void main() {
      ${i} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${u};
      if(${l}) {
        result[1] = ${u};
      }
      --${s[this.rank-1]};
      if(++${s[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${u};
        if(${l}) {
          result[3] = ${u};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J3(t,e,n){const r=Ce().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new DYe(t.shape,e):new $Ye(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RYe(t,e,n,r){const i=e,s=t.shape.length,a=Xt(i,t.shape);let o=a;const l=Ir(o,s),u=l!=null;let c=t;u&&(c=J3(t,l,r),o=zr(o.length,s)),Oi("sum",o,s);const[f,d]=vi(c.shape,o);let h=f;n&&(h=$r(f,a));const p=Ee(d),g=Ee(t.shape)/p,v=ct({inputs:{x:c},attrs:{shape:[g,p]},backend:r}),y=$M(t.dtype),b=pm(v,y,"sum",r),x=ct({inputs:{x:b},attrs:{shape:h},backend:r});return r.disposeIntermediateTensorInfo(v),r.disposeIntermediateTensorInfo(b),u&&r.disposeIntermediateTensorInfo(c),x}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uB(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r;return RYe(i,s,a,n)}const OYe={kernelName:k_,backendName:"webgl",kernelFunc:uB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ws(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{perm:s}=r,a=n,o=i.shape.length,l=new Array(o);for(let c=0;c<l.length;c++)l[c]=i.shape[s[c]];let u;if(a.shouldExecuteOnCPU([i])){const f=a.texData.get(i.dataId).values,d=lB(f,i.shape,i.dtype,s,l);u=a.makeTensorInfo(l,i.dtype);const h=a.texData.get(u.dataId);h.values=d}else u=J3(i,s,a);return u}const FYe={kernelName:$_,backendName:"webgl",kernelFunc:Ws};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qse=1e3;function kT({a:t,b:e,transposeA:n,transposeB:r,backend:i,bias:s=null,preluActivationWeights:a=null,leakyreluAlpha:o=0,activation:l=null}){const u=t.shape.length,c=e.shape.length,f=n?t.shape[u-2]:t.shape[u-1],d=r?e.shape[c-1]:e.shape[c-2],h=n?t.shape[u-1]:t.shape[u-2],p=r?e.shape[c-2]:e.shape[c-1],m=t.shape.slice(0,-2),g=e.shape.slice(0,-2),v=Ee(m),y=Ee(g),b=v===y||v===1||y===1;R(u>=2&&c>=2&&b,()=>`Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input batch dimensions of (${m}) and (${g}).`);const w=(v>y?t.shape.slice(0,-2):e.shape.slice(0,-2)).concat([h,p]);R(f===d,()=>`Error in matMul: inner shapes (${f}) and (${d}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const S=n?[v,f,h]:[v,h,f],C=r?[y,p,d]:[y,d,p],_=ct({inputs:{x:t},backend:i,attrs:{shape:S}}),E=ct({inputs:{x:e},backend:i,attrs:{shape:C}}),T=[_,E],k=Math.max(v,y),M=n?_.shape[1]:_.shape[2],A=s!=null,N=a!=null,$=l==="leakyrelu",D=l!=null?Z3(l,!0):null,P=A||N||$||D!=null;let O;if((h===1||p===1)&&M>Qse&&P===!1){let H=_,te=E;n&&(H=Ws({inputs:{x:_},backend:i,attrs:{perm:[0,2,1]}}),T.push(H)),r&&(te=Ws({inputs:{x:E},backend:i,attrs:{perm:[0,2,1]}}),T.push(te));const q=p!==1,Z=p===1;let ne=H;q&&(ne=ct({inputs:{x:H},backend:i,attrs:{shape:[k,M,1]}}),T.push(ne));const G=p===1?2:1;let he=te;Z&&(he=ct({inputs:{x:te},backend:i,attrs:{shape:[k,1,M]}}),T.push(he));const ve=Jse({inputs:{a:ne,b:he},backend:i});O=uB({inputs:{x:ve},backend:i,attrs:{axis:G,keepDims:!0}}),T.push(ve)}else{const H=wa(t.dtype,e.dtype),te=new Zse(S,C,[k,h,p],n,r,A,D,N,$),q=[_,E];if(s!=null&&q.push(s),N&&q.push(a),$){const Z=i.makeTensorInfo([],"float32",of(o,"float32"));q.push(Z),T.push(Z)}O=i.runWebGLProgram(te,q,H)}const B=ct({inputs:{x:O},backend:i,attrs:{shape:w}});T.push(O);for(const H of T)i.disposeIntermediateTensorInfo(H);return B}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LYe(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s,bias:a,preluActivationWeights:o}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:f}=r;return kT({a:i,b:s,transposeA:l,transposeB:u,backend:n,bias:a,preluActivationWeights:o,leakyreluAlpha:f,activation:c})}const PYe={kernelName:Ax,backendName:"webgl",kernelFunc:LYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dj="return abs(x);";function zYe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const s=n.texData.get(r.dataId),a=Vse(s.values);return n.makeTensorInfo(r.shape,r.dtype,a)}let i;return Ce().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new qg(r.shape,Dj):i=new pd(r.shape,Dj),n.runWebGLProgram(i,[r],r.dtype)}const BYe={kernelName:Rw,backendName:"webgl",kernelFunc:zYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UYe=Hl+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,VYe=vn({opSnippet:UYe}),WYe={kernelName:bv,backendName:"webgl",kernelFunc:VYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GYe=Hl+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,HYe=vn({opSnippet:GYe}),jYe={kernelName:xv,backendName:"webgl",kernelFunc:HYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rj="return a + b;",qYe=Fi({opSnippet:Rj,packedOpSnippet:Rj,supportsComplex:!0,cpuKernelImpl:vXe}),XYe={kernelName:im,backendName:"webgl",kernelFunc:qYe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YYe{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((s,a)=>`T${a}`);const r=[];this.variableNames.forEach(s=>{r.push(`float v${s} = get${s}AtOutCoords();`)});const i=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KYe{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((s,a)=>`T${a}`);const r=[];this.variableNames.forEach(s=>{r.push(`vec4 v${s} = get${s}AtOutCoords();`)});const i=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xE(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return Ta({inputs:{x:r[0]},backend:n});if(r.length>Ce().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),u=xE({inputs:r.slice(0,l),backend:n}),c=xE({inputs:r.slice(l),backend:n});return xE({inputs:[u,c],backend:n})}const i=r.map(l=>l.dtype).reduce((l,u)=>wa(l,u)),s=r.map(l=>l.shape),o=Ce().getBool("WEBGL_PACK")?new KYe(r[0].shape,s):new YYe(r[0].shape,s);return n.runWebGLProgram(o,r,i)}const ZYe={kernelName:Ow,backendName:"webgl",kernelFunc:xE};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JYe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r,o=i.shape.length,l=Xt(s,i.shape);let u=l;const c=Ir(u,o);let f=i;c!=null&&(f=Ws({inputs:{x:i},backend:n,attrs:{perm:c}}),u=zr(u.length,o)),Oi("all",u,o);const[d,h]=vi(f.shape,u),p=Ee(h),m=ct({inputs:{x:f},backend:n,attrs:{shape:[-1,p]}}),g=pm(m,m.dtype,"all",n);let v;if(a){const y=$r(d,l);v=ct({inputs:{x:g},backend:n,attrs:{shape:y}})}else v=ct({inputs:{x:g},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(f),v}const QYe={kernelName:UA,backendName:"webgl",kernelFunc:JYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r,o=i.shape.length,l=Xt(s,i.shape);let u=l;const c=Ir(u,o);let f=i;c!=null&&(f=Ws({inputs:{x:i},backend:n,attrs:{perm:c}}),u=zr(u.length,o)),Oi("any",u,o);const[d,h]=vi(f.shape,u),p=Ee(h),m=ct({inputs:{x:f},backend:n,attrs:{shape:[-1,p]}}),g=pm(m,m.dtype,"any",n);let v;if(a){const y=$r(d,l);v=ct({inputs:{x:g},backend:n,attrs:{shape:y}})}else v=ct({inputs:{x:g},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(f),v}const tKe={kernelName:VA,backendName:"webgl",kernelFunc:eKe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nKe{constructor(e,n,r){this.variableNames=["A"];const{windowSize:i,batchSize:s,outSize:a}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[s,a];const o=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${i};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${i}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${o} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rKe{constructor(e,n,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,R(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const s=e[e.length-1],a=Math.ceil(s/n);this.outputShape=e.slice(0,-1),a>1&&this.outputShape.push(a),i||this.variableNames.push("bestIndicesA");const o=this.outputShape,l=o.length,u=Hn(l),c=fs("coords",l);let f,d;if(a===1){d=l+1;const _=Hn(d);f=`
        ${_} sourceLocR = ${_}(${c.join()}, 0);
        ++${c[l-1]};
        ${_} sourceLocG = ${_}(${c.join()}, 0);
        ++${c[l-2]};
        ${_} sourceLocA = ${_}(${c.join()}, 0);
        --${c[l-1]};
        ${_} sourceLocB = ${_}(${c.join()}, 0);
        --${c[l-2]};`}else d=l,f=`
        ${u} sourceLocR = coords;
        ++${c[l-1]};
        ${u} sourceLocG = coords;
        ++${c[l-2]};
        ${u} sourceLocA = coords;
        --${c[l-1]};
        ${u} sourceLocB = coords;
        --${c[l-2]};`;const h=["x","y","z","w","u","v"].slice(0,d),p="."+h[d-1],m=h.map(_=>"int "+_),g=fs("sourceLocR",d-1).concat("inIdx.r"),v=fs("sourceLocG",d-1).concat("inIdx.g"),y=fs("sourceLocB",d-1).concat("inIdx.b"),b=fs("sourceLocA",d-1).concat("inIdx.a"),x=r==="max"?"greaterThan":"lessThan",w=i?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${g.join()}),
                             getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${b.join()})));`,S=`vec4(
            getAChannel(${g.join()}),
            hasNextCol ? getAChannel(${v.join()}) : 0.,
            hasNextRow ? getAChannel(${y.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${b.join()}) : 0.)`,C=i?"":`
      float getBestIndicesAChannel(${m.join()}) {
        return getChannel(getBestIndicesA(${h.join()}),
                                          vec2(${h.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${m.join()}) {
        return getChannel(getA(${h.join()}),
                               vec2(${h.slice(-2).join()}));
      }
      ${C}
      void main() {
        ${u} coords = getOutputCoords();
        bool hasNextCol = ${c[l-1]} < ${o[l-1]-1};
        bool hasNextRow = ${c[l-2]} < ${o[l-2]-1};
        ${f}
        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},
          sourceLocB${p}, sourceLocA${p}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${S};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${w}
          vec4 candidate = ${S};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${x}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eae(t,e,n,r=null){let i=e.shape[0],s=e.shape[1];r!=null&&(i=r.shape[0],s=r.shape[1]);const a=_3(s),o={windowSize:a,inSize:s,batchSize:i,outSize:Math.ceil(s/a)},l=new nKe(o,n,r==null),u=[e];r!=null&&u.push(r);const c=t.runWebGLProgram(l,u,"int32");if(c.shape[1]===1)return c;const f=eae(t,e,n,c);return t.disposeIntermediateTensorInfo(c),f}function tae(t,e,n,r=null){const i=r!=null?r.shape:e.shape,s=i[i.length-1],a=_3(s),o=new rKe(i,a,n,r==null),l=r==null?[e]:[e,r],u=t.runWebGLProgram(o,l,"int32");if(u.shape.length===e.shape.length){const c=tae(t,e,n,u);return t.disposeIntermediateTensorInfo(u),c}return u}function nae(t,e,n,r){const i=[n];if(Oi("arg"+r.charAt(0).toUpperCase()+r.slice(1),i,e.shape.length),!Ce().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const s=[],[a,o]=vi(e.shape,i),l=Ee(o),u=ct({inputs:{x:e},backend:t,attrs:{shape:[-1,l]}});s.push(u);const c=eae(t,u,r);s.push(c);const f=ct({inputs:{x:c},backend:t,attrs:{shape:a}});return s.forEach(d=>t.disposeIntermediateTensorInfo(d)),f}return tae(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;let a=Xt(s,i.shape);const o=Ir(a,i.shape.length);let l=i;const u=[];o!=null&&(l=Ws({inputs:{x:i},backend:n,attrs:{perm:o}}),u.push(l),a=zr(a.length,l.shape.length)),Oi("argMax",[a[0]],l.shape.length);const c=nae(n,l,a[0],"max");return u.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}const sKe={kernelName:Fw,backendName:"webgl",kernelFunc:iKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;let a=Xt(s,i.shape);const o=Ir(a,i.shape.length);let l=i;const u=[];o!=null&&(l=Ws({inputs:{x:i},backend:n,attrs:{perm:o}}),u.push(l),a=zr(a.length,l.shape.length)),Oi("argMin",[a[0]],l.shape.length);const c=nae(n,l,a[0],"min");return u.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}const oKe={kernelName:Lw,backendName:"webgl",kernelFunc:aKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lKe=Hl+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,uKe=vn({opSnippet:lKe}),cKe={kernelName:wv,backendName:"webgl",kernelFunc:uKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fKe=Hl+"return log(x + sqrt(x * x + 1.0));",dKe=vn({opSnippet:fKe}),hKe={kernelName:_v,backendName:"webgl",kernelFunc:dKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pKe=Hl+`
  return atan(x);
`,mKe=vn({opSnippet:pKe}),gKe={kernelName:Sv,backendName:"webgl",kernelFunc:mKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vKe=CYe+`
  return atan(a, b);
`,yKe=`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+EYe+`
  return result;
`,bKe=Fi({opSnippet:vKe,packedOpSnippet:yKe}),xKe={kernelName:Ev,backendName:"webgl",kernelFunc:bKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wKe=Hl+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,_Ke=vn({opSnippet:wKe}),SKe={kernelName:Cv,backendName:"webgl",kernelFunc:_Ke};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Gx{constructor(e,n,r,i=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const a=e.filterWidth,o=e.strideHeight,l=e.strideWidth,u=e.dilationHeight,c=e.dilationWidth,f=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const m=n==="avg",g=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,v=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let y="0.0";if(m||(y="-1.0 / 1e-20"),r){const _=">=";this.userCode=`
        const ivec2 strides = ivec2(${o}, ${l});
        const ivec2 pads = ivec2(${h}, ${p});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${f};
              wR += ${u}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${d};
                wC += ${c}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${_} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${i?s?g:v:`wR * ${d} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const b="max";let x=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(x="avgValue / count");const w=Math.floor(a/4)*4,S=a%4,C=`
      if (${m}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${b}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${o}, ${l});
      const ivec2 pads = ivec2(${h}, ${p});
      const float initializationValue = ${y};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${y});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${f};
            wR += ${u}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${w}; wC += 4) {
            int xC = xCCorner + wC * ${c};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              getValue(batch, xR, xC + 3 * ${c}, d)
            );

            ${C}
          }

          int xC = xCCorner + ${w};
          if (${S===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${C}
          } else if (${S===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              initializationValue,
              initializationValue
            );

            ${C}
          } else if (${S===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              initializationValue
            );

            ${C}
          }
        }
        setOutput(${x});
      }
    `}}class cB{constructor(e,n,r,i=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const a=e.filterWidth,o=e.strideDepth,l=e.strideHeight,u=e.strideWidth,c=e.dilationDepth,f=e.dilationHeight,d=e.dilationWidth,h=e.effectiveFilterDepth,p=e.effectiveFilterHeight,m=e.effectiveFilterWidth,g=e.padInfo.front,v=e.padInfo.top,y=e.padInfo.left;this.outputShape=e.outShape;const b=n==="avg";let x="0.0";if(b||(x="-1.0 / 1e-20"),r){const T=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${o}, ${l}, ${u});
        const ivec3 pads = ivec3(${g}, ${v}, ${y});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${h};
              wD += ${c}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${p};
                wR += ${f}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${m};
                  wC += ${d}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${T} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${i?s?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${p} * ${m} +
                      wR * ${m} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const w="max";let S=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(S="avgValue / count");const C=Math.floor(a/4)*4,_=a%4,E=`
      if (${b}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${w}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${o}, ${l}, ${u});
      const ivec3 pads = ivec3(${g}, ${v}, ${y});
      const float initializationValue = ${x};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${x});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${c}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p};
            wR += ${f}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${C}; wC += 4) {
              int xC = xCCorner + wC * ${d};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                getValue(batch, xD, xR, xC + 2 * ${d}, ch),
                getValue(batch, xD, xR, xC + 3 * ${d}, ch)
              );

              ${E}
            }

            int xC = xCCorner + ${C};
            if (${_===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${E}
            } else if (${_===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                initializationValue,
                initializationValue
              );

              ${E}
            } else if (${_===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                getValue(batch, xD, xR, xC + 2 * ${d}, ch),
                initializationValue
              );

              ${E}
            }
          }
          setOutput(${S});
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;d2(i,"avgPool");const{filterSize:s,strides:a,pad:o,dimRoundingMode:l}=r,u=1;R(Ri(a,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`);const c=ol(i.shape,s,a,u,o,l);if(c.filterWidth===1&&c.filterHeight===1&&Tn(c.inShape,c.outShape))return Ta({inputs:{x:i},backend:n});const f=new Gx(c,"avg",!1);return n.runWebGLProgram(f,[i],"float32")}const EKe={kernelName:Pw,backendName:"webgl",kernelFunc:CKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:a,pad:o,dimRoundingMode:l,dataFormat:u}=r,c=[1,1,1],f=lf(i.shape,s,a,c,o,l,u),d=new cB(f,"avg",!1);return n.runWebGLProgram(d,[i],"float32")}const kKe={kernelName:zw,backendName:"webgl",kernelFunc:TKe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AKe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,s=e.strideWidth,a=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=l-1-e.padInfo.top,f=u-1-e.padInfo.left,d=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${c}, ${f});
      const float avgMultiplier = float(${d});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${a}) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${u};
            wC+= ${o}) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class MKe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,i=e.filterWidth,s=e.strideDepth,a=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,f=e.effectiveFilterDepth,d=e.effectiveFilterHeight,h=e.effectiveFilterWidth,p=f-1-e.padInfo.front,m=d-1-e.padInfo.top,g=h-1-e.padInfo.left,v=1/(n*r*i);this.userCode=`
      const ivec3 pads = ivec3(${p}, ${m}, ${g});
      const float avgMultiplier = float(${v});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${f};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${s}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${d};
              wR += ${u}) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${h};
                wC += ${c}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NKe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,a=s,{filterSize:o,strides:l,pad:u,dimRoundingMode:c}=r,f=[1,1,1],d=lf(a.shape,o,l,f,u,c),h=new MKe(d);return n.runWebGLProgram(h,[i],a.dtype)}const $Ke={kernelName:GA,backendName:"webgl",kernelFunc:NKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IKe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,a=s;d2([i,s],"avgPoolGrad");const{filterSize:o,strides:l,pad:u}=r,c=ol(a.shape,o,l,1,u),f=new AKe(c);return n.runWebGLProgram(f,[i],a.dtype)}const DKe={kernelName:WA,backendName:"webgl",kernelFunc:IKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RKe(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s}=e,{transposeA:a,transposeB:o}=r;return kT({a:i,b:s,transposeA:a,transposeB:o,backend:n})}const OKe={kernelName:Bw,backendName:"webgl",kernelFunc:RKe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FKe{constructor(e,n,r,i,s,a){this.outputShape=[],this.variableNames=["x","mean","variance"],cn(e,n),cn(e,r);let o="0.0";i!=null&&(cn(e,i),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let l="1.0";s!=null&&(cn(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${o};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${a}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LKe{constructor(e,n,r,i,s,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],cn(e,n),cn(e,r);let o="vec4(0.0)";i!=null&&(cn(e,i),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let l="vec4(1.0)";s!=null&&(cn(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${o};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${a}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PKe=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:i,variance:s,offset:a,scale:o}=t;R(i.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),R(a==null||i.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),R(o==null||i.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const u=[r,i,s];let c=null;a!=null&&(c=a.shape,u.push(a));let f=null;o!=null&&(f=o.shape,u.push(o));const d=Ce().getBool("WEBGL_PACK_NORMALIZATION")?new LKe(r.shape,i.shape,s.shape,c,f,l):new FKe(r.shape,i.shape,s.shape,c,f,l);return e.runWebGLProgram(d,u,u[0].dtype)},zKe={kernelName:Jw,backendName:"webgl",kernelFunc:PKe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BKe{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=Hn(this.rank),r=`uniform int start[${this.rank}];`,i=UKe(this.rank);let s;const a=e.map((o,l)=>`sourceLoc.${ZF[l]} = start[${l}] + coords.${ZF[l]};`);s=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${a.join(`
`)}
      `,this.userCode=`
      ${r}
      void main() {
        ${s}
        setOutput(getSource(${i}));
      }
    `}getCustomSetupFunc(e){if(e.length!==this.rank)throw Error(`The rank (${this.rank}) of the program must match the length of start (${e.length})`);return(n,r)=>{this.startLoc==null&&(this.startLoc=n.getUniformLocationNoThrow(r,"start"),this.startLoc==null)||n.gl.uniform1iv(this.startLoc,e)}}}const ZF=["x","y","z","w","u","v"];function UKe(t){if(t===1)return"sourceLoc";if(t<=6)return ZF.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VKe{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;const n=Hn(this.rank),r=fs("coords",this.rank),i=fs("sourceLoc",this.rank),s=this.rank===1?"sourceLoc":`vec2(${i.slice(-2).join()})`,a=`getChannel(getSource(${i.join()}), ${s})`,o=`
      result.x = ${a};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${i[this.rank-1]};
        result.y = ${a};
        --${i[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${i[this.rank-2]};
        result.z = ${a};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${i[this.rank-1]};
          result.w = ${a};
        }
      }
    `,u=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((c,f)=>`start[${f}]`).join()});`:e.map((c,f)=>`${i[f]} = ${r[f]} + start[${f}];`).join(`
`);this.userCode=`
      uniform int start[${this.rank}];
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${u}
        vec4 result = vec4(0.);
        ${o}
        ${l}
        setOutput(result);
      }
    `}getCustomSetupFunc(e){if(e.length!==this.rank)throw Error(`The rank (${this.rank}) of the program must match the length of start (${e.length})`);return(n,r)=>{this.startLoc==null&&(this.startLoc=n.getUniformLocationNoThrow(r,"start"),this.startLoc==null)||n.gl.uniform1iv(this.startLoc,e)}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WKe(t,e,n,r){const i=r.texData.get(t.dataId),s=r.makeTensorInfo(n,t.dtype),a=r.texData.get(s.dataId);Object.assign(a,i),a.refCount=1,a.shape=n,a.dtype=t.dtype;let o=h4(e,It(t.shape));i.slice&&(o+=i.slice.flatOffset),a.slice={flatOffset:o,origDataId:i.slice&&i.slice.origDataId||t.dataId};const l=r.dataRefCount.get(a.slice.origDataId)||1;return r.dataRefCount.set(a.slice.origDataId,l+1),s}function m2(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,size:a}=r,[o,l]=FM(i,s,a);if(f4(i,o,l),Ee(l)===0)return n.makeTensorInfo(l,i.dtype,[]);if(n.shouldExecuteOnCPU([i])||i.dtype==="string"){const f=n.texData.get(i.dataId),d=LXe(f.values,o,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,d)}const{isPacked:u}=n.texData.get(i.dataId),c=d4(i.shape,o,l);if(u||!c){const f=Ce().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new VKe(l):new BKe(l),d=f.getCustomSetupFunc(o);return n.runWebGLProgram(f,[i],i.dtype,d)}return n.uploadToGPU(i.dataId),WKe(i,o,l,n)}const GKe={kernelName:T_,backendName:"webgl",kernelFunc:m2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HKe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,crops:a}=r;R(i.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const o=s.reduce((y,b)=>y*b),l=K_(i.shape,s,o),u=Z_(l.length,s.length),c=J_(i.shape,s,o),f=uz(a,s.length),d=cz(c,a,s.length),h=[],p=ct({inputs:{x:i},backend:n,attrs:{shape:l}}),m=Ws({inputs:{x:p},backend:n,attrs:{perm:u}}),g=ct({inputs:{x:m},backend:n,attrs:{shape:c}}),v=m2({inputs:{x:g},backend:n,attrs:{begin:f,size:d}});return h.push(p),h.push(m),h.push(g),h.forEach(y=>n.disposeIntermediateTensorInfo(y)),v},jKe={kernelName:Uw,backendName:"webgl",kernelFunc:HKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:a}=r,o=n.readSync(i.dataId),l=n.readSync(s.dataId),u=Use(o,l,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,u)}const XKe={kernelName:HA,backendName:"webgl",kernelFunc:qKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YKe="return float(a != b);",rae=Fi({opSnippet:YKe,dtype:"bool"}),KKe={kernelName:m_,backendName:"webgl",kernelFunc:rae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g2(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.texData.get(r.dataId);return Ta({inputs:{x:i.complexTensorInfos.real},backend:n})}const ZKe={kernelName:xM,backendName:"webgl",kernelFunc:g2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JKe="return float(int(x));";function QKe(t,e){const n=new pd(t.shape,JKe),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JF(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dtype:s}=r;if(s==="complex64"){if(i.dtype==="complex64")return Ta({inputs:{x:i},backend:n});const a=Fr(i.shape),o=JF({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),l=Hd({inputs:{real:o,imag:a},backend:n});return a.dispose(),n.disposeIntermediateTensorInfo(o),l}if(i.dtype==="complex64"){const a=g2({inputs:{input:i},backend:n}),o=JF({inputs:{x:a},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(a),o}if(!K5(i.dtype,s)){const a=Ta({inputs:{x:i},backend:n});return{dataId:a.dataId,shape:a.shape,dtype:s}}if(s==="int32")return QKe(i,n);if(s==="bool"){const a=n.makeTensorInfo([],"bool",fi("bool",1)),l=rae({inputs:{a:i,b:a},backend:n});return n.disposeIntermediateTensorInfo(a),l}throw new Error(`Error in Cast: failed to cast ${i.dtype} to ${s}`)}const eZe={kernelName:Tv,backendName:"webgl",kernelFunc:JF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oj="return ceil(x);",tZe=vn({opSnippet:Oj,packedOpSnippet:Oj,cpuKernelImpl:bXe}),nZe={kernelName:kv,backendName:"webgl",kernelFunc:tZe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rZe{constructor(e){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}getCustomSetupFunc(e,n){return(r,i)=>{this.minLoc==null&&(this.minLoc=r.getUniformLocationNoThrow(i,"minVal"),this.maxLoc=r.getUniformLocationNoThrow(i,"maxVal")),r.gl.uniform1f(this.minLoc,e),r.gl.uniform1f(this.maxLoc,n)}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iZe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}getCustomSetupFunc(e,n){return(r,i)=>{this.minLoc==null&&(this.minLoc=r.getUniformLocationNoThrow(i,"minVal"),this.maxLoc=r.getUniformLocationNoThrow(i,"maxVal")),r.gl.uniform1f(this.minLoc,e),r.gl.uniform1f(this.maxLoc,n)}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sZe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{clipValueMin:s,clipValueMax:a}=r;let o;Ce().getBool("WEBGL_PACK_CLIP")?o=new iZe(i.shape):o=new rZe(i.shape);const l=o.getCustomSetupFunc(s,a);return n.runWebGLProgram(o,[i],i.dtype,l)}const aZe={kernelName:Av,backendName:"webgl",kernelFunc:sZe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oZe{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fj(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function lZe(t){const{inputs:e,backend:n}=t,{x:r}=e,i=n.texData.get(r.dataId),s=new oZe(r.shape),a=[Fj(r,i.complexTensorInfos.real),Fj(r,i.complexTensorInfos.imag)];return n.runWebGLProgram(s,a,a[0].dtype)}const uZe={kernelName:Vw,backendName:"webgl",kernelFunc:lZe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cZe{constructor(e){this.outputShape=[],this.outputShape=zc(e,1),this.variableNames=e.map((a,o)=>`T${o}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let a=1;a<n.length;a++)n[a]=n[a-1]+e[a][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let a=1;a<n.length;a++){const o=n[a-1];r.push(`else if (yC < ${n[a]}) setOutput(getT${a}(yR, yC-${o}));`)}const i=n.length,s=n[n.length-1];r.push(`else setOutput(getT${i}(yR, yC-${s}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fZe{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=zc(e,n);const r=this.outputShape,i=r.length,s=Hn(i),a=fs("coords",i),o=["x","y","z","w","u","v"].slice(0,i);this.variableNames=e.map((m,g)=>`T${g}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let m=1;m<l.length;m++)l[m]=l[m-1]+e[m][n];const u=o[n],c=o.slice(-2),f=o.join();let d=`if (${u} < ${l[0]}) {
        return getChannel(
            getT0(${f}), vec2(${c.join()}));
        }`;for(let m=1;m<l.length;m++){const g=l[m-1];d+=`
        if (${u} < ${l[m]}  && ${u} >= ${l[m-1]}) {
          return getChannel(
            getT${m}(${mC(o,u,g)}),
            vec2(${mC(c,u,g)}));
        }`}const h=l.length,p=l[l.length-1];d+=`
        return getChannel(
          getT${h}(${mC(o,u,p)}),
          vec2(${mC(c,u,p)}));`,this.userCode=`
      float getValue(${o.map(m=>"int "+m)}) {
        ${d}
      }

      void main() {
        ${s} coords = getOutputCoords();
        vec4 result = vec4(getValue(${a}), 0., 0., 0.);

        ${a[i-1]} = ${a[i-1]} + 1;
        if (${a[i-1]} < ${r[i-1]}) {
          result.g = getValue(${a});
        }

        ${a[i-2]} = ${a[i-2]} + 1;
        if (${a[i-2]} < ${r[i-2]}) {
          result.a = getValue(${a});
        }

        ${a[i-1]} = ${a[i-1]} - 1;
        if (${a[i-2]} < ${r[i-2]} &&
            ${a[i-1]} < ${r[i-1]}) {
          result.b = getValue(${a});
        }
        setOutput(result);
      }
    `}}function mC(t,e,n){const r=t.indexOf(e);return t.map((s,a)=>a===r?`${s} - ${n}`:s).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q3(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.texData.get(r.dataId);return Ta({inputs:{x:i.complexTensorInfos.imag},backend:n})}const dZe={kernelName:lM,backendName:"webgl",kernelFunc:Q3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cg(t,e,n){const r=t[0].dtype;if(r==="complex64"){const u=t.map(p=>g2({inputs:{input:p},backend:n})),c=t.map(p=>Q3({inputs:{input:p},backend:n})),f=Cg(u,e,n),d=Cg(c,e,n),h=Hd({inputs:{real:f,imag:d},backend:n});return u.forEach(p=>n.disposeIntermediateTensorInfo(p)),c.forEach(p=>n.disposeIntermediateTensorInfo(p)),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),h}if(r==="string"){const{tensors2D:u,outShape:c}=Lj(t,e,n),f=u.map(g=>({vals:n.readSync(g.dataId),shape:g.shape})),d=u[0].shape[0]===1,h=xXe(f,c,r,d),p=zc(t.map(g=>g.shape),e),m=n.makeTensorInfo(p,r,h);return u.forEach(g=>n.disposeIntermediateTensorInfo(g)),m}if(t.length>Ce().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const u=Math.floor(t.length/2),c=Cg(t.slice(0,u),e,n),f=Cg(t.slice(u),e,n),d=Cg([c,f],e,n);return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),d}if(Ce().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&t[0].shape.length>1){const u=new fZe(t.map(c=>c.shape),e);return n.runWebGLProgram(u,t,r)}const{tensors2D:i,outShape:s}=Lj(t,e,n),a=new cZe(i.map(u=>u.shape)),o=n.runWebGLProgram(a,i,r);i.forEach(u=>n.disposeIntermediateTensorInfo(u));const l=ct({inputs:{x:o},attrs:{shape:s},backend:n});return n.disposeIntermediateTensorInfo(o),l}function Lj(t,e,n){const r=zc(t.map(s=>s.shape),e);return{tensors2D:t.map(s=>ct({inputs:{x:s},attrs:{shape:[-1,Ee(s.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iae(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r,s=Xt(i,e[0].shape)[0],a=zc(e.map(u=>u.shape),s);if(Ee(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const o=e.filter(u=>Ee(u.shape)>0);if(o.length===1)return Ta({inputs:{x:o[0]},backend:n});const l=o.map(u=>u.shape);return az(l,s),Cg(o,s,n)}const hZe={kernelName:Ww,backendName:"webgl",kernelFunc:iae};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sae{constructor(e,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const a=e.padInfo.top,o=e.padInfo.left,l=e.strideHeight,u=e.strideWidth,c=e.dilationHeight,f=e.dilationWidth,d=e.filterHeight,h=e.filterWidth,p=Math.floor(e.inChannels/4)*4,m=e.inChannels%4,g=e.dataFormat==="channelsLast",v=g?1:2,y=g?2:3,b=g?3:1;let x="",w="";r&&(i?x=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?x=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:x=`
          float activation(float x) {
            ${r}
          }
        `,w="result = activation(result);");const S=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${x}

      const ivec2 strides = ivec2(${l}, ${u});
      const ivec2 pads = ivec2(${a}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${b}];

        ivec2 xRCCorner =
            ivec2(coords[${v}], coords[${y}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${d}; wR++) {
          int xR = xRCorner + wR * ${c};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${h}; wC++) {
            int xC = xCCorner + wC * ${f};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${p}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${g}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${m===1}) {

              if (${g}) {
                dotProd +=
                    getX(batch, xR, xC, ${p}) *
                    getW(wR, wC, ${p}, d2);
              } else {
                dotProd +=
                    getX(batch, ${p}, xR, xC) *
                    getW(wR, wC, ${p}, d2);
              }

            } else if (${m===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2)
              );

              if (${g}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${m===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2),
                getW(wR, wC, ${p} + 2, d2)
              );

              if (${g}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1),
                  getX(batch, xR, xC, ${p} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC),
                  getX(batch, ${p} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${S}
        ${w}
        setOutput(result);
      }
    `}}class pZe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,i=e.padInfo.left,s=e.strideDepth,a=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,f=e.filterDepth,d=e.filterHeight,h=e.filterWidth,p=Math.floor(e.inChannels/4)*4,m=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${s}, ${a}, ${o});
      const ivec3 pads = ivec3(${n}, ${r}, ${i});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${f}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${d}; wR++) {
            int xR = xRCorner + wR * ${u};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h}; wC++) {
              int xC = xCCorner + wC * ${c};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${p}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${m===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${p}) *
                  getW(wF, wR, wC, ${p}, d2);
              } else if (${m===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${m===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1),
                  getX(batch, xF, xR, xC, ${p} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2),
                  getW(wF, wR, wC, ${p} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mZe{constructor(e,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;const{filterWidth:i,inChannels:s,strideWidth:a,strideHeight:o,padInfo:l,outWidth:u,dilationWidth:c,dilationHeight:f,dataFormat:d}=r,{left:h,top:p}=l,m=s*i,g=ws(),v=d==="channelsLast",y=v?0:1,b=v?1:2;let x="";for(let w=0;w<=1;w++)for(let S=0;S<=1;S++)x+=`
          blockIndex = rc.y + ${S};
          pos = rc.x + ${w};

          if(blockIndex < ${e[1]} && pos < ${e[0]}) {
            offsetY = int(blockIndex / (${u})) * ${o} - ${p};
            d0 = offsetY + ${f} * (pos / ${m});

            if(d0 < ${n[y]} && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), ${u}.) * ${a}. - ${h}.);
              d1 = offsetX + ${c} * (int(mod(float(pos), ${m}.) / ${s}.));

              if(d1 < ${n[b]} && d1 >= 0) {

                ch = int(mod(float(pos), ${s}.));

                if (${v}) {
                  innerDims = vec2(d1, ch);
                  result[${w*2+S}] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${w*2+S}] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${x}

        ${g.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aae({x:t,filter:e,convInfo:n,backend:r,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:a=0,activation:o=null}){const l=t.shape,u=r.texData.get(t.dataId),c=n.inChannels,f=l[0]*l[1]*l[2],d=n.outChannels,h=n.dataFormat==="channelsLast",p=!1,m=!1;let g;const v=[],y=(f===1||d===1)&&c>Qse,b=l[2]%2!==0&&!!u.isPacked;if(y||!Ce().getBool("WEBGL_LAZILY_UNPACK")||!Ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!b){const x=h?l[0]*l[1]*l[2]:l[0]*l[2]*l[3],w=ct({inputs:{x:t},backend:r,attrs:{shape:[1,x,n.inChannels]}}),S=ct({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),C=kT({a:w,b:S,transposeA:p,transposeB:m,backend:r,bias:i,activation:o,preluActivationWeights:s,leakyreluAlpha:a});g=ct({inputs:{x:C},backend:r,attrs:{shape:n.outShape}}),v.push(w),v.push(S),v.push(C)}else{const x=h?l[0]*l[1]*(l[2]+1):l[0]*l[2]*(l[3]+1),w={dataId:t.dataId,shape:[1,x,n.inChannels],dtype:t.dtype},S=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,R(TT(u.shape,w.shape),()=>`packed reshape ${u.shape} to ${w.shape} isn't free`);const C=ct({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});v.push(C);const _=kT({a:w,b:C,backend:r,transposeA:p,transposeB:m,bias:i,activation:o,preluActivationWeights:s,leakyreluAlpha:a}),E=r.texData.get(_.dataId);R(E.isPacked,()=>"batchMatMul result is expected to be packed"),u.shape=S,E.shape=n.outShape,g=Ta({inputs:{x:_},backend:r}),g.shape=n.outShape,v.push(_)}for(const x of v)r.disposeIntermediateTensorInfo(x);return g}function oae({x:t,filter:e,convInfo:n,backend:r,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:a=0,activation:o=null}){const{filterWidth:l,filterHeight:u,inChannels:c,outWidth:f,outHeight:d,dataFormat:h}=n,p=h==="channelsLast",m=l*u*c,g=d*f,v=[m,g],y=!0,b=!1,x=[],w=ct({inputs:{x:t},backend:r,attrs:{shape:t.shape.slice(1)}}),S=ct({inputs:{x:e},backend:r,attrs:{shape:[1,m,Ee(e.shape)/m]}});x.push(w),x.push(S);const C=new mZe(v,w.shape,n),_=r.runWebGLProgram(C,[w],"float32"),E=ct({inputs:{x:_},backend:r,attrs:{shape:[1,v[0],v[1]]}});x.push(_),x.push(E);const T=i!=null,k=s!=null,M=o==="leakyrelu",A=o?Z3(o,!0):null,N=new Zse(E.shape,S.shape,[1,g,n.outChannels],y,b,T,A,k,M),$=[E,S];if(i&&$.push(i),k&&$.push(s),M){const B=r.makeTensorInfo([],"float32",of(a,"float32"));$.push(B),x.push(B)}const D=r.runWebGLProgram(N,$,"float32"),P=p?[1,d,f,n.outChannels]:[1,n.outChannels,d,f],O=ct({inputs:{x:D},backend:r,attrs:{shape:P}});x.push(D);for(const B of x)r.disposeIntermediateTensorInfo(B);return O}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gZe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:a,pad:o,dataFormat:l,dilations:u,dimRoundingMode:c}=r,f=uf(l),d=gi(i.shape,s.shape,a,u,o,c,!1,f);let h;if(d.filterHeight===1&&d.filterWidth===1&&d.dilationHeight===1&&d.dilationWidth===1&&d.strideHeight===1&&d.strideWidth===1&&(d.padInfo.type==="SAME"||d.padInfo.type==="VALID"))h=aae({x:i,filter:s,convInfo:d,backend:n});else if(Ce().getBool("WEBGL_CONV_IM2COL")&&i.shape[0]===1)h=oae({x:i,filter:s,convInfo:d,backend:n});else{const m=new sae(d);h=n.runWebGLProgram(m,[i,s],"float32")}const p=ct({inputs:{x:h},backend:n,attrs:{shape:d.outShape}});return n.disposeIntermediateTensorInfo(h),p}const vZe={kernelName:Gw,backendName:"webgl",kernelFunc:gZe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yZe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,i=e.padInfo.top,s=e.padInfo.left,a=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              if (${a}) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class bZe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,s=e.strideWidth,a=e.dataFormat==="channelsLast",o=n-1-e.padInfo.top,l=r-1-e.padInfo.left,u=a?1:2,c=a?2:3,f=a?3:1;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${f}];

        ivec2 dyCorner = ivec2(coords[${u}], coords[${c}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${a}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class xZe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,i=e.strideWidth,s=e.padInfo.front,a=e.padInfo.top,o=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${s};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${a};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${i} - ${o};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class wZe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,i=e.filterWidth,s=e.strideDepth,a=e.strideHeight,o=e.strideWidth,l=n-1-e.padInfo.front,u=r-1-e.padInfo.top,c=i-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${u}, ${c});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${s}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${i}; wC++) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${i} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ze(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:a,pad:o,dataFormat:l,dimRoundingMode:u,filterShape:c}=r,f=uf(l),d=gi(i.shape,c,a,1,o,u,!1,f),h=new yZe(d);return n.runWebGLProgram(h,[i,s],"float32")}const SZe={kernelName:qA,backendName:"webgl",kernelFunc:_Ze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CZe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{inputShape:a,strides:o,pad:l,dataFormat:u,dimRoundingMode:c}=r,f=uf(u),d=gi(a,s.shape,o,1,l,c,!1,f),h=new bZe(d);return n.runWebGLProgram(h,[i,s],"float32")}const EZe={kernelName:Hw,backendName:"webgl",kernelFunc:CZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TZe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:a,pad:o,dilations:l}=r,u=Vd(i.shape,s.shape,a,l,o),c=new pZe(u);return n.runWebGLProgram(c,[i,s],"float32")}const kZe={kernelName:jw,backendName:"webgl",kernelFunc:TZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AZe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:a,pad:o,filterShape:l}=r,u=Vd(i.shape,l,a,1,o),c=new xZe(u);return n.runWebGLProgram(c,[i,s],"float32")}const MZe={kernelName:XA,backendName:"webgl",kernelFunc:AZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NZe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{pad:a,strides:o,inputShape:l}=r,u=Vd(l,s.shape,o,1,a),c=new wZe(u);return n.runWebGLProgram(c,[i,s],"float32")}const $Ze={kernelName:YA,backendName:"webgl",kernelFunc:NZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IZe=Kse+`
  return cos(x);
`,DZe=vn({opSnippet:IZe}),RZe={kernelName:Mv,backendName:"webgl",kernelFunc:DZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OZe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,FZe=vn({opSnippet:OZe}),LZe={kernelName:Nv,backendName:"webgl",kernelFunc:FZe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PZe{constructor(e,n,r,i,s){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[a,o,l,u]=e,[c]=n,[f,d]=r;this.outputShape=[c,f,d,u];const h=i==="bilinear"?1:0,[p,m]=[`${o-1}.0`,`${l-1}.0`],[g,v,y]=f>1?[`${(o-1)/(f-1)}`,"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${p}`],[b,x,w]=d>1?[`${(l-1)/(d-1)}`,"(x2-x1) * width_ratio",`x1*${m} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${m}`];this.userCode=`
      const float height_ratio = float(${g});
      const float width_ratio = float(${b});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${a}) {
          return;
        }

        float height_scale = ${v};
        float width_scale = ${x};

        float in_y = ${y};
        if( in_y < 0.0 || in_y > ${p} ) {
          setOutput(float(${s}));
          return;
        }
        float in_x = ${w};
        if( in_x < 0.0 || in_x > ${m} ) {
          setOutput(float(${s}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${h} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zZe=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:i,boxes:s,boxInd:a}=e,{cropSize:o,method:l,extrapolationValue:u}=r,c=new PZe(i.shape,s.shape,o,l,u);return n.runWebGLProgram(c,[i,s,a],"float32")},BZe={kernelName:KA,backendName:"webgl",kernelFunc:zZe};class Pj{constructor(e,n,r){this.variableNames=["x"],this.outputShape=e;const i=e.length,s=n?"0.0":`getX(${zj(i,"coords")})`,a=e[e.length-1];let o="",l="";n?(o=r?`end != ${a-1}`:"end != 0",l=r?"end + 1":"end - 1"):(o=r?`end + pow2 < ${a}`:"end >= pow2",l=r?"end + pow2":"end - pow2"),this.userCode=`
      uniform float index;
      void main() {
        ${Hn(i)} coords = getOutputCoords();
        int end = ${Bj(i,"coords")};
        float val = ${s};
        int pow2 = int(pow(2.0, index));
        if (${o}) {
          int idx = ${l};
          ${Bj(i,"coords")} = idx;
          val += getX(${zj(i,"coords")});
        }
        setOutput(val);
      }
    `}getCustomSetupFunc(e){return(n,r)=>{this.index==null&&(this.index=n.getUniformLocation(r,"index")),n.gl.uniform1f(this.index,e)}}}function zj(t,e){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw Error(`Cumulative sum for rank ${t} is not yet supported`)}function Bj(t,e){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw Error(`Cumulative sum for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UZe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,exclusive:a,reverse:o}=r,l=i.shape.length,u=Ir([s],l);let c=i;u!=null&&(c=Ws({inputs:{x:i},backend:n,attrs:{perm:u}}));const f=zr(1,l)[0];if(f!==l-1)throw new Error(`WebGL cumsum shader expects an inner-most axis=${i.shape.length-1} but got axis=${s}`);const d=c.shape[f];let h=Ta({inputs:{x:c},backend:n});for(let p=0;p<=Math.ceil(Math.log2(d))-1;p++){const m=new Pj(c.shape,!1,o),g=m.getCustomSetupFunc(p),v=h;h=n.runWebGLProgram(m,[h],h.dtype,g),n.disposeIntermediateTensorInfo(v)}if(a){const p=new Pj(c.shape,a,o),m=h;h=n.runWebGLProgram(p,[h],h.dtype),n.disposeIntermediateTensorInfo(m)}if(u!=null){const p=by(u),m=Ws({inputs:{x:h},backend:n,attrs:{perm:p}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(c),m}return h}const VZe={kernelName:qw,backendName:"webgl",kernelFunc:UZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WZe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:a,binaryOutput:o}=r;if(i.shape.length===1){const l=n.readSync(i.dataId),u=n.readSync(s.dataId),c=Use(l,u,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,c)}else if(i.shape.length===2){const l=n.bufferSync(i),u=n.bufferSync(s),c=yXe(l,u,a,o);return n.makeTensorInfo(c.shape,s.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const GZe={kernelName:ZA,backendName:"webgl",kernelFunc:WZe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HZe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jZe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockSize:s,dataFormat:a}=r;R(s>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${s}`);const o=i.shape[0],l=a==="NHWC"?i.shape[1]:i.shape[2],u=a==="NHWC"?i.shape[2]:i.shape[3],c=a==="NHWC"?i.shape[3]:i.shape[1],f=l*s,d=u*s,h=c/(s*s),p=a==="NHWC"?[o,f,d,h]:[o,h,f,d],m=new HZe(p,s,a);return n.runWebGLProgram(m,[i],i.dtype)}const qZe={kernelName:JA,backendName:"webgl",kernelFunc:jZe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lae{constructor(e,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const a=e.inHeight,o=e.inWidth,l=e.padInfo.top,u=e.padInfo.left,c=e.strideHeight,f=e.strideWidth,d=e.dilationHeight,h=e.dilationWidth,p=e.filterHeight,m=e.filterWidth,g=e.outChannels/e.inChannels;let v="",y="";r&&(i?v=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?v=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:v=`
          float activation(float x) {
            ${r}
          }
        `,y="result = activation(result);");const b=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${v}

      const ivec2 strides = ivec2(${c}, ${f});
      const ivec2 pads = ivec2(${l}, ${u});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${g};
        int q = d2 - d1 * ${g};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${p}; wR++) {
          int xR = xRCorner + wR * ${d};

          if (xR < 0 || xR >= ${a}) {
            continue;
          }

          for (int wC = 0; wC < ${m}; wC++) {
            int xC = xCCorner + wC * ${h};

            if (xC < 0 || xC >= ${o}) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${b}
        ${y}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uae{constructor(e,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;const a=e.inHeight,o=e.inWidth,l=e.padInfo.top,u=e.padInfo.left,c=e.strideHeight,f=e.strideWidth,d=e.dilationHeight,h=e.dilationWidth,p=e.filterHeight,m=e.filterWidth,g=m;let v="int xR; int xC; int xCOffset;";for(let w=0;w<p;w++)for(let S=0;S<m;S++)v+=`
          vec4 xTexelR${w}C${S*2} = vec4(0.);
          vec4 wR${w}C${S} = vec4(0.);
          vec4 xR${w}C${S} = vec4(0.);`;for(let w=0;w<p;w++)for(let S=0;S<g;S++){const C=S*2;if(v+=`
          xR = xRCorner + ${w*d};
          xC = xCCorner + ${C*h};
        `,f===1){if(C<m&&(u%2===1?v+=`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < ${a} && xCOffset >= 0 && xCOffset < ${o}) {
                  xTexelR${w}C${C} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= ${o}) {
                    xTexelR${w}C${C}.zw = vec2(0.);
                  }
                } else {
                  xTexelR${w}C${C} = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < ${a} && xCOffset >= 0 && xCOffset < ${o}) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= ${o}) {
                    previous.zw = vec2(0.);
                  }

                  xR${w}C${C} = vec4(previous.zw, xTexelR${w}C${C}.xy);
                } else {
                  xR${w}C${C} = vec4(0, 0, xTexelR${w}C${C}.xy);
                }
              `:v+=`
                if(xR >= 0 && xR < ${a} && xC >= 0 && xC < ${o}) {
                  xTexelR${w}C${C} = getX(batch, xR, xC, d1);
                } else {
                  xTexelR${w}C${C} = vec4(0.);
                }

                xR${w}C${C} = xTexelR${w}C${C};
              `,C+1<m)){const _=u%2===0?X5(h):h;h%2===0&&u%2===1||h%2!==0&&u%2!==1?(v+=`
                  xCOffset = xC + ${u%2} + ${_};

                  if(xR >= 0 && xR < ${a} &&
                    xCOffset >= 0 && xCOffset < ${o}) {
                    xTexelR${w}C${C+2} = getX(batch, xR, xCOffset, d1);
                  }
                `,h>1&&(v+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < ${a} &&
                      xCOffset >= 0 && xCOffset < ${o}) {
                      xTexelR${w}C${C} = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR${w}C${C} = vec4(0.);
                    }
                  `),v+=`
                  xR${w}C${C+1} = vec4(
                    xTexelR${w}C${C}.zw, xTexelR${w}C${C+2}.xy);
                `):v+=`
                  xCOffset = xC + ${_};

                  if(xR >= 0 && xR < ${a} &&
                    xCOffset >= 0 && xCOffset < ${o}) {
                    xTexelR${w}C${C+2} = getX(batch, xR, xCOffset, d1);
                  }

                  xR${w}C${C+1} = xTexelR${w}C${C+2};
                `}}else C<m&&(v+=`
              if(xR >= 0 && xR < ${a}) {
            `,u%2===1?(v+=`
                xCOffset = xC + 1 - ${f};
                if(xCOffset >= 0 && xCOffset < ${o}) {
                  xTexelR${w}C${C} = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR${w}C${C} = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < ${o}) {
                  xTexelR${w}C${C+2} = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR${w}C${C+2} = vec4(0.);
                }

                xR${w}C${C} = vec4(
                  xTexelR${w}C${C}.zw, xTexelR${w}C${C+2}.zw);
              `,C+1<m&&(v+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + ${f};
                  if(xCOffset >= 0 && xCOffset < ${o}) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR${w}C${C+1} = vec4(xTexelR${w}C${C+2}.xy, final.xy);
                `)):(v+=`
                if(xC >= 0 && xC < ${o}) {
                  xTexelR${w}C${C} = getX(batch, xR, xC, d1);
                } else {
                  xTexelR${w}C${C} = vec4(0.);
                }

                xCOffset = xC + ${f};
                if(xCOffset >= 0 && xCOffset < ${o}) {
                  xTexelR${w}C${C+2} = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR${w}C${C+2} = vec4(0.);
                }

                xR${w}C${C} = vec4(
                  xTexelR${w}C${C}.xy, xTexelR${w}C${C+2}.xy);
              `,C+1<m&&(v+=`
                  xR${w}C${C+1} = vec4(
                    xTexelR${w}C${C}.zw, xTexelR${w}C${C+2}.zw);
                `)),v+="}");C<m&&(v+=`
            vec4 wTexelR${w}C${C} = getW(${w}, ${C}, d1, q);
            wR${w}C${C} = vec4(wTexelR${w}C${C}.xz, wTexelR${w}C${C}.xz);
          `,C+1<m&&(v+=`
              vec4 wTexelR${w}C${C+1} = getW(${w}, ${C+1}, d1, q);
              wR${w}C${C+1} =
                vec4(wTexelR${w}C${C+1}.xz, wTexelR${w}C${C+1}.xz);`))}for(let w=0;w<p;w++)for(let S=0;S<m;S++)v+=`dotProd += xR${w}C${S} * wR${w}C${S};`;let y="",b="";r&&(i?y=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?y=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:y=`vec4 activation(vec4 x) {
          ${r}
        }`,b="result = activation(result);");const x=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${y}

      const ivec2 strides = ivec2(${c}, ${f});
      const ivec2 pads = ivec2(${l}, ${u});

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        ${v}

        vec4 result = dotProd;
        ${x}
        ${b}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XZe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:a,pad:o,dilations:l,dimRoundingMode:u}=r;let c=l;c==null&&(c=[1,1]),R(Ri(a,c),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const f=gi(i.shape,s.shape,a,c,o,u,!0);let d;return Ce().getBool("WEBGL_PACK_DEPTHWISECONV")&&f.strideWidth<=2&&f.outChannels/f.inChannels===1?d=new uae(f):d=new lae(f),n.runWebGLProgram(d,[i,s],"float32")}const YZe={kernelName:Xw,backendName:"webgl",kernelFunc:XZe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KZe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,i=e.padInfo.top,s=e.padInfo.left,a=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${a} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class ZZe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,s=e.strideWidth,a=n-1-e.padInfo.top,o=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JZe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:a,dilations:o,pad:l,dimRoundingMode:u,filterShape:c}=r,f=gi(i.shape,c,a,o,l,u,!0),d=new KZe(f);return n.runWebGLProgram(d,[i,s],"float32")}const QZe={kernelName:QA,backendName:"webgl",kernelFunc:JZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eJe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{strides:a,dilations:o,pad:l,dimRoundingMode:u,inputShape:c}=r,f=gi(c,s.shape,a,o,l,u,!0),d=new ZZe(f);return n.runWebGLProgram(d,[i,s],"float32")}const tJe={kernelName:eM,backendName:"webgl",kernelFunc:eJe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nJe{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rJe(t){const{inputs:e,backend:n}=t,{x:r}=e,i=[...r.shape,...r.shape],s=Ee(r.shape),a=ct({inputs:{x:r},backend:n,attrs:{shape:[s]}}),o=new nJe(s),l=n.runWebGLProgram(o,[a],a.dtype),u=ct({inputs:{x:l},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}const iJe={kernelName:tM,backendName:"webgl",kernelFunc:rJe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sJe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:i,strideHeight:s,strideWidth:a,filterHeight:o,filterWidth:l,dilationHeight:u,dilationWidth:c}=e,{top:f,left:d}=i;this.userCode=`
      const ivec2 strides = ivec2(${s}, ${a});
      const ivec2 pads = ivec2(${f}, ${d});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${o}; h++) {
          int hIn = hBeg + h * ${u};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${c};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aJe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:a,pad:o,dilations:l}=r,u=F_(i.shape,s.shape,a,o,"NHWC",l);let c;const f=new sJe(u);c=n.runWebGLProgram(f,[i,s],"float32");const d=ct({inputs:{x:c},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(c),d}const oJe={kernelName:Yw,backendName:"webgl",kernelFunc:aJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lJe="return (x >= 0.0) ? x : (exp(x) - 1.0);",uJe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,cJe=vn({opSnippet:lJe,packedOpSnippet:uJe}),fJe={kernelName:Iv,backendName:"webgl",kernelFunc:cJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dJe="return (b >= 1.0) ? a : a * (b + 1.0);",hJe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,pJe=t=>{const{inputs:e,backend:n}=t,{dy:r,y:i}=e,s=Ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new p2(hJe,r.shape,i.shape):new I0(dJe,r.shape,i.shape);return n.runWebGLProgram(s,[r,i],r.dtype)},mJe={kernelName:nM,backendName:"webgl",kernelFunc:pJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gJe=`
  return vec4(equal(a, b));
`,vJe="return float(a == b);",yJe=Fi({opSnippet:vJe,packedOpSnippet:gJe,dtype:"bool"}),bJe={kernelName:Kw,backendName:"webgl",kernelFunc:yJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xJe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${fz};
  float a1 = ${dz};
  float a2 = ${hz};
  float a3 = ${pz};
  float a4 = ${mz};
  float a5 = ${gz};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,wJe=vn({opSnippet:xJe}),_Je={kernelName:Dv,backendName:"webgl",kernelFunc:wJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uj="return exp(x);",cae=vn({opSnippet:Uj,packedOpSnippet:Uj,cpuKernelImpl:wXe}),SJe={kernelName:Rv,backendName:"webgl",kernelFunc:cae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QF(t){const{inputs:e,attrs:n,backend:r}=t,{dim:i}=n,{input:s}=e,a=s.shape.length,o=s.shape.slice();let l=i;return i<0&&(R(-(a+1)<=i,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),l=a+i+1),o.splice(l,0,1),ct({inputs:{x:s},backend:r,attrs:{shape:o}})}const CJe={kernelName:Zw,backendName:"webgl",kernelFunc:QF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vj="return exp(x) - 1.0;",EJe=vn({opSnippet:Vj,packedOpSnippet:Vj,cpuKernelImpl:_Xe}),TJe={kernelName:Ov,backendName:"webgl",kernelFunc:EJe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wj{constructor(e,n,r){this.variableNames=["real","imag"];const i=n[1];this.outputShape=n;const s=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,a=r?`${i}.0`:"1.0";let o;if(e==="real")o="return real * expR - imag * expI;";else if(e==="imag")o="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${s};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${o}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${i});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${i}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${a};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fae(t,e,n){const r=n.texData.get(t.dataId),i=Ee(t.shape),s=t.shape[t.shape.length-1],a=i/s,o=ct({inputs:{x:t},backend:n,attrs:{shape:[a,s]}}),l=o.shape,u=new Wj("real",l,e),c=new Wj("imag",l,e),f=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],d=n.runWebGLProgram(u,f,"float32"),h=n.runWebGLProgram(c,f,"float32"),p=Hd({inputs:{real:d,imag:h},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h);const m=ct({inputs:{x:p},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(p),m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kJe(t){const{inputs:e,backend:n}=t,{input:r}=e;return fae(r,!1,n)}const AJe={kernelName:rM,backendName:"webgl",kernelFunc:kJe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MJe{constructor(e,n){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}getCustomSetupFunc(e){return(n,r)=>{this.valueLoc==null&&(this.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(this.valueLoc,e)}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fB(t){const{backend:e,attrs:n}=t,{shape:r,value:i}=n;let{dtype:s}=n;if(s=s||vv(i),s==="string"){const a=rm(s,Ee(r));return a.fill(i),e.makeTensorInfo(r,s,a)}else{const a=new MJe(r,i),o=a.getCustomSetupFunc(i);return e.runWebGLProgram(a,[],s,o)}}const NJe={kernelName:iM,backendName:"webgl",kernelFunc:fB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $Je{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IJe={kernelName:sM,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,i=new $Je(n.shape);return r.runWebGLProgram(i,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gj="return floor(x);",DJe=vn({opSnippet:Gj,packedOpSnippet:Gj,cpuKernelImpl:SXe}),RJe={kernelName:Fv,backendName:"webgl",kernelFunc:DJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OJe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,FJe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,LJe=Fi({opSnippet:OJe,packedOpSnippet:FJe,dtype:"int32"}),PJe={kernelName:Lv,backendName:"webgl",kernelFunc:LJe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zJe{constructor(e){this.variableNames=["A"];const n=ws(),[r,i]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${i}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BJe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=ws(),[r,i]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${i}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UJe={kernelName:rT,backendName:"webgl",kernelFunc:VJe};let fg;function VJe(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:i}=e;const{numChannels:s}=r,a=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,o=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,l=typeof ImageBitmap<"u"&&i instanceof ImageBitmap,[u,c]=a?[i.videoWidth,i.videoHeight]:[i.width,i.height],f=[c,u],d=[c,u,s];(o||a||l)&&(fg==null&&(fg=document.createElement("canvas").getContext("2d")),fg.canvas.width=u,fg.canvas.height=c,fg.drawImage(i,0,0,u,c),i=fg.canvas);const h=n.makeTensorInfo(f,"int32");n.texData.get(h.dataId).usage=Ya.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),i);const p=Ce().getBool("WEBGL_PACK")?new BJe(d):new zJe(d),m=n.runWebGLProgram(p,[h],"int32");return n.disposeData(h.dataId),m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WJe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:a,preluActivationWeights:o}=e,{strides:l,pad:u,dataFormat:c,dilations:f,dimRoundingMode:d,activation:h,leakyreluAlpha:p}=r,m=uf(c),g=gi(i.shape,s.shape,l,f,u,d,!1,m);let v;const y=[];if(g.filterHeight===1&&g.filterWidth===1&&g.dilationHeight===1&&g.dilationWidth===1&&g.strideHeight===1&&g.strideWidth===1&&(g.padInfo.type==="SAME"||g.padInfo.type==="VALID"))v=aae({x:i,filter:s,convInfo:g,backend:n,bias:a,activation:h,preluActivationWeights:o,leakyreluAlpha:p});else if(Ce().getBool("WEBGL_CONV_IM2COL")&&i.shape[0]===1)v=oae({x:i,filter:s,convInfo:g,backend:n,bias:a,activation:h,preluActivationWeights:o,leakyreluAlpha:p});else{const x=a!=null,w=o!=null,S=h==="leakyrelu",C=h?Z3(h,!1):null,_=new sae(g,x,C,w,S),E=[i,s];if(a&&E.push(a),o&&E.push(o),S){const T=n.makeTensorInfo([],"float32",of(p,"float32"));E.push(T),y.push(T)}v=n.runWebGLProgram(_,E,"float32")}const b=ct({inputs:{x:v},backend:n,attrs:{shape:g.outShape}});return y.push(v),y.forEach(x=>n.disposeIntermediateTensorInfo(x)),b}const GJe={kernelName:Mx,backendName:"webgl",kernelFunc:WJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HJe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:a,preluActivationWeights:o}=e,{strides:l,pad:u,dilations:c,dimRoundingMode:f,activation:d,leakyreluAlpha:h}=r,p=[];let m=c;m==null&&(m=[1,1]),R(Ri(l,m),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${m}'`);const g=gi(i.shape,s.shape,l,m,u,f,!0),v=Ce().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,y=d?Z3(d,v):null,b=[i,s],x=a!=null,w=o!=null,S=d==="leakyrelu";if(x&&b.push(a),w&&b.push(o),S){const E=n.makeTensorInfo([],"float32",of(h,"float32"));b.push(E),p.push(E)}let C;v?C=new uae(g,x,y,w,S):C=new lae(g,x,y,w,S);const _=n.runWebGLProgram(C,b,"float32");return p.forEach(E=>n.disposeIntermediateTensorInfo(E)),_}const jJe={kernelName:Nx,backendName:"webgl",kernelFunc:HJe};class qJe{constructor(e,n,r){this.sliceDim=e,this.strides=n,this.variableNames=["x","indices"],this.outputShape=r;const i=Hn(n.length),s=Hn(r.length),a=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        ${i} strides = ${i}(${this.strides});
         void main() {
          ${s} coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < ${this.sliceDim}; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * ${a};
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XJe(t){const{inputs:e,backend:n}=t,{params:r,indices:i}=e,s=i.shape,a=s[s.length-1],[o,l,u,c]=OM(r,i),f=ct({inputs:{x:i},backend:n,attrs:{shape:[l,a]}}),d=ct({inputs:{x:r},backend:n,attrs:{shape:[Ee(r.shape)/u,u]}}),h=new qJe(a,c,[l,u]),p=n.runWebGLProgram(h,[d,f],d.dtype),m=ct({inputs:{x:p},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),m}const YJe={kernelName:aM,backendName:"webgl",kernelFunc:XJe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KJe{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=Hn(this.rank),i=ZJe(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        setOutput(getA(${i}));
      }
    `}}function ZJe(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let i=0;i<t.length;i++)i===2?r.push("int(getIndices(resRC.x, resRC.z))"):r.push(`${n[i]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JJe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,indices:s}=e,{axis:a,batchDims:o}=r,l=Xt(a,i.shape)[0],u=bz(i,s,l,o),c=Ee(s.shape),f=[],d=ct({inputs:{x:i},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),h=ct({inputs:{x:s},backend:n,attrs:{shape:[u.batchSize,c/u.batchSize]}});f.push(d),f.push(h);const p=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([i,s])||i.dtype==="string"){const y=n.bufferSync(h),b=n.bufferSync(d),x=CXe(b,y,p);return f.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.makeTensorInfo(u.outputShape,x.dtype,x.values)}const m=new KJe(d.shape,p),g=n.runWebGLProgram(m,[d,h],d.dtype);f.push(g);const v=ct({inputs:{x:g},backend:n,attrs:{shape:u.outputShape}});return f.forEach(y=>n.disposeIntermediateTensorInfo(y)),v}const QJe={kernelName:Qw,backendName:"webgl",kernelFunc:JJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eQe="return float(a > b);",tQe=`
  return vec4(greaterThan(a, b));
`,nQe=Fi({opSnippet:eQe,packedOpSnippet:tQe,cpuKernelImpl:EXe,dtype:"bool"}),rQe={kernelName:e_,backendName:"webgl",kernelFunc:nQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iQe="return float(a >= b);",sQe=`
  return vec4(greaterThanEqual(a, b));
`,aQe=Fi({opSnippet:iQe,packedOpSnippet:sQe,dtype:"bool"}),oQe={kernelName:Pv,backendName:"webgl",kernelFunc:aQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lQe(t){const{inputs:e,backend:n}=t,{input:r}=e;return fae(r,!0,n)}const uQe={kernelName:oM,backendName:"webgl",kernelFunc:lQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cQe="return float(!isnan(x) && !isinf(x));",fQe=vn({opSnippet:cQe,dtype:"bool"}),dQe={kernelName:Bv,backendName:"webgl",kernelFunc:fQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hQe="return float(isinf(x));",pQe=vn({opSnippet:hQe,dtype:"bool"}),mQe={kernelName:Uv,backendName:"webgl",kernelFunc:pQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gQe="return float(isnan(x));",vQe=vn({opSnippet:gQe,dtype:"bool"}),yQe={kernelName:Vv,backendName:"webgl",kernelFunc:vQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bQe="return float(a < b);",xQe=`
  return vec4(lessThan(a, b));
`,wQe=Fi({opSnippet:bQe,packedOpSnippet:xQe,cpuKernelImpl:TXe,dtype:"bool"}),_Qe={kernelName:n_,backendName:"webgl",kernelFunc:wQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SQe="return float(a <= b);",CQe=`
  return vec4(lessThanEqual(a, b));
`,EQe=Fi({opSnippet:SQe,packedOpSnippet:CQe,dtype:"bool"}),TQe={kernelName:r_,backendName:"webgl",kernelFunc:EQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kQe(t){const{backend:e,attrs:n}=t,{start:r,stop:i,num:s}=n,a=kXe(r,i,s);return e.makeTensorInfo([a.length],"float32",a)}const AQe={kernelName:uM,backendName:"webgl",kernelFunc:kQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MQe=`if (x < 0.0) return NAN;
  return log(x);`,NQe=`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,$Qe=vn({opSnippet:MQe,packedOpSnippet:NQe,cpuKernelImpl:AXe}),IQe={kernelName:Wv,backendName:"webgl",kernelFunc:$Qe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DQe="return log(1.0 + x);",RQe=vn({opSnippet:DQe}),OQe={kernelName:Gv,backendName:"webgl",kernelFunc:RQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FQe="return float(a >= 1.0 && b >= 1.0);",LQe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,PQe=Fi({opSnippet:FQe,packedOpSnippet:LQe,dtype:"bool"}),zQe={kernelName:i_,backendName:"webgl",kernelFunc:PQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BQe="return float(!(x >= 1.0));",UQe=vn({opSnippet:BQe}),VQe={kernelName:s_,backendName:"webgl",kernelFunc:UQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WQe="return float(a >= 1.0 || b >= 1.0);",GQe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,HQe=Fi({opSnippet:WQe,packedOpSnippet:GQe,dtype:"bool"}),jQe={kernelName:a_,backendName:"webgl",kernelFunc:HQe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qQe{constructor(e,n,r,i,s){this.variableNames=["x"],this.outputShape=[];const a=n,o=e[3]-1;this.outputShape=e;let l;const u=`float(${r}) + float(${i}) * sum`;s===.5?l=`inversesqrt(${u})`:s===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${a}; j <= ${a}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${o}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XQe{constructor(e,n,r,i,s){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const a=n,o=e[3]-1;this.outputShape=e;let l;const u=`float(${r}) + float(${i}) * sum`;s===.5?l=`inversesqrt(${u})`:s===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${a};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${a}; j <= ${a}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${o}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YQe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{depthRadius:s,bias:a,alpha:o,beta:l}=r,u=Ce().getBool("WEBGL_PACK_NORMALIZATION")?new XQe(i.shape,s,a,o,l):new qQe(i.shape,s,a,o,l);return n.runWebGLProgram(u,[i],i.dtype)},KQe={kernelName:o_,backendName:"webgl",kernelFunc:YQe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZQe{constructor(e,n,r,i,s){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=i,this.beta=s,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${i}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${i})
                * float(${s})
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${s});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JQe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i,y:s,dy:a}=e,{depthRadius:o,bias:l,alpha:u,beta:c}=r,f=new ZQe(i.shape,o,l,u,c);return n.runWebGLProgram(f,[i,s,a],i.dtype)},QQe={kernelName:cM,backendName:"webgl",kernelFunc:JQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eet(t,e,n,r){const i=Ee(e),a=Ee(t.shape)/i,o=ct({inputs:{x:t},attrs:{shape:[a,i]},backend:r}),l=pm(o,t.dtype,"max",r),u=ct({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dae(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reductionIndices:s,keepDims:a}=r,o=i.shape.length,l=Xt(s,i.shape);let u=l;const c=Ir(u,o),f=c!=null,d=n.shouldExecuteOnCPU([i]);let h=i;if(f){if(d){const b=n.texData.get(h.dataId).values,x=new Array(o);for(let C=0;C<x.length;C++)x[C]=i.shape[c[C]];const w=lB(b,i.shape,i.dtype,c,x);h=n.makeTensorInfo(x,i.dtype);const S=n.texData.get(h.dataId);S.values=w}else h=J3(i,c,n);u=zr(u.length,o)}Oi("max",u,o);const[p,m]=vi(h.shape,u);let g=p;a&&(g=$r(p,l));let v;if(d){const b=n.texData.get(h.dataId).values,x=MXe(b,Ee(m),g,i.dtype);v=n.makeTensorInfo(g,i.dtype);const w=n.texData.get(v.dataId);w.values=x}else v=eet(h,m,g,n);return f&&n.disposeIntermediateTensorInfo(h),v}const tet={kernelName:l_,backendName:"webgl",kernelFunc:dae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const net=Hse+`
  return max(a, b);
`,ret=`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+K3+`
  return result;
`,iet=Fi({opSnippet:net,packedOpSnippet:ret,cpuKernelImpl:NXe}),set={kernelName:Hv,backendName:"webgl",kernelFunc:iet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aet(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;d2(i,"maxPool");const{filterSize:s,strides:a,pad:o,dimRoundingMode:l}=r,u=1;R(Ri(a,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`);const c=ol(i.shape,s,a,u,o,l);if(c.filterWidth===1&&c.filterHeight===1&&Tn(c.inShape,c.outShape))return Ta({inputs:{x:i},backend:n});const f=new Gx(c,"max",!1);return n.runWebGLProgram(f,[i],i.dtype)}const oet={kernelName:u_,backendName:"webgl",kernelFunc:aet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uet(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:a,pad:o,dataFormat:l,dimRoundingMode:u}=r,c=[1,1,1],f=lf(i.shape,s,a,c,o,u,l),d=new cB(f,"max",!1);return n.runWebGLProgram(d,[i],i.dtype)}const cet={kernelName:c_,backendName:"webgl",kernelFunc:uet};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fet{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,i=e.dilationHeight,s=e.effectiveFilterHeight,a=e.effectiveFilterWidth,o=s-1-e.padInfo.top,l=a-1-e.padInfo.left,u=s*a-1;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${s};
          wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${a}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${u} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${a} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class det{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,a=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterDepth,u=e.effectiveFilterHeight,c=e.effectiveFilterWidth,f=l-1-e.padInfo.front,d=u-1-e.padInfo.top,h=c-1-e.padInfo.left,p=l*u*c-1;this.userCode=`
      const ivec3 pads = ivec3(${f}, ${d}, ${h});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${s}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${u};
              wR += ${a}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${c};
                wC += ${o}) {
              float dyC = float(dyCCorner + wC) / ${i}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${p} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${u} * ${c} +
                  wR * ${c} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function het(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,a=s,{filterSize:o,strides:l,pad:u,dimRoundingMode:c}=r,f=[1,1,1],d=lf(a.shape,o,l,f,u,c),h=new cB(d,"max",!0),p=n.runWebGLProgram(h,[a],a.dtype),m=new det(d),g=n.runWebGLProgram(m,[i,p],a.dtype);return n.disposeIntermediateTensorInfo(p),g}const pet={kernelName:dM,backendName:"webgl",kernelFunc:het};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function met(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s,output:a}=e,o=s;d2([s,a],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:f}=r,d=ol(o.shape,l,u,1,c,f),h=!0,p=new Gx(d,"max",h),m=n.runWebGLProgram(p,[o],o.dtype),g=new fet(d),v=n.runWebGLProgram(g,[i,m],o.dtype);return n.disposeIntermediateTensorInfo(m),v}const get={kernelName:fM,backendName:"webgl",kernelFunc:met};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vet(t,e,n,r){let i=new Gx(n,"max",!1);const s=r.runWebGLProgram(i,[t],"float32");i=new Gx(n,"max",!0,!0,e);const a=r.runWebGLProgram(i,[t],"float32");return[s,a]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yet={kernelName:hM,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:i,strides:s,pad:a,includeBatchInIndex:o}=e,l=n;R(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const u=[1,1];R(Ri(s,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${u}'`);const c=ol(r.shape,i,s,u,a),[f,d]=vet(r,o,c,l);return[f,d]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bet(t,e,n,r){const i=Ee(e),a=Ee(t.shape)/i,o=ct({inputs:{x:t},attrs:{shape:[a,i]},backend:r}),l=pm(o,"float32","mean",r),u=ct({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xet={kernelName:f_,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:i,axis:s}=e,a=n,o=r.shape.length,l=Xt(s,r.shape);let u=l;const c=Ir(u,o),f=c!=null,d=a.shouldExecuteOnCPU([r]),h=[];let p=r;if(f){if(d){const x=a.texData.get(p.dataId).values,w=new Array(o);for(let _=0;_<w.length;_++)w[_]=r.shape[c[_]];const S=lB(x,r.shape,r.dtype,c,w);p=a.makeTensorInfo(w,r.dtype);const C=a.texData.get(p.dataId);C.values=S}else p=J3(r,c,a);h.push(p),u=zr(u.length,o)}Oi("sum",u,o);const[m,g]=vi(p.shape,u);let v=m;i&&(v=$r(m,l));const y=bet(p,g,v,a);for(const b of h)a.disposeIntermediateTensorInfo(b);return y}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wet(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r,o=i.shape.length,l=Xt(s,i.shape);let u=l;const c=Ir(u,o);let f=i;c!=null&&(f=Ws({inputs:{x:i},backend:n,attrs:{perm:c}}),u=zr(u.length,i.shape.length)),Oi("min",u,o);const[d,h]=vi(f.shape,u),p=Ee(h),m=ct({inputs:{x:f},backend:n,attrs:{shape:[-1,p]}}),g=pm(m,m.dtype,"min",n);let v;if(a){const y=$r(d,l);v=ct({inputs:{x:g},backend:n,attrs:{shape:y}})}else v=ct({inputs:{x:g},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(f),v}const _et={kernelName:d_,backendName:"webgl",kernelFunc:wet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cet=Hse+`
  return min(a, b);
`,Eet=`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+K3+`
  return result;
`,Tet=Fi({opSnippet:Cet,packedOpSnippet:Eet,cpuKernelImpl:$Xe}),ket={kernelName:jv,backendName:"webgl",kernelFunc:Tet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Aet{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((c,f)=>c[0]+e[f]+c[1]);const i=e.length,s=Hn(i),a=n.map(c=>c[0]).join(","),o=n.map((c,f)=>c[0]+e[f]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i),u=r==="reflect"?0:1;if(i===1){this.userCode=`
        int start = ${a};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${u};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${u};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${a});
      ${s} end = ${s}(${o});

      void main() {
        ${s} outC = getOutputCoords();
        for (int i = 0; i < ${i}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${u};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${u};
          }
        }
        ${s} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Met{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((p,m)=>p[0]+e[m]+p[1]);const i=e.length,s=Hn(i),a=n.map(p=>p[0]).join(","),o=n.map((p,m)=>p[0]+e[m]).join(","),l=fs("rc",i),u=fs("source",i),c=`${l[i-1]} < ${this.outputShape[i-1]}`,f=i===1?"source":`vec2(${u.slice(-2).join()})`,d=r==="reflect"?0:1;let h="";if(i===1){const p=`
        ${s} source = rc;
        if (source < start) {
          source = start * 2 - source - ${d};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${d};
        }
        source -= start;
      `;h=`
        ${s} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${u.join()}), ${f});
        ${l[i-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${u.join()}), ${f});
        }
      `}else{const p=`
        ${s} source = rc;
        ${s} lt = ${s}(lessThan(source, start));
        ${s} gte = ${s}(greaterThanEqual(source, end));
        ${s} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${d}) +
                gte * ((end - 1) * 2 - source + ${d});
        source -= start;
      `;h=`
        ${s} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${u.join()}), ${f});
        ${l[i-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${u.join()}), ${f});
        }
        rc = outputLoc;
        ${l[i-2]} += 1;
        if(${l[i-2]} < ${this.outputShape[i-2]}) {
          ${p}
          result[2] = getChannel(getX(${u.join()}), ${f});
          ${l[i-1]} += 1;
          if(${c}) {
            ${p}
            result[3] = getChannel(getX(${u.join()}), ${f});
          }
        }
      `}this.userCode=`
      const ${s} start = ${s}(${a});
      const ${s} end = ${s}(${o});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${h}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Net=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:i,mode:s}=n,a=Ce().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Met(r.shape,i,s):new Aet(r.shape,i,s);return e.runWebGLProgram(a,[r],r.dtype)},$et={kernelName:h_,backendName:"webgl",kernelFunc:Net};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Iet=`if (b == 0.0) return NAN;
  return mod(a, b);`,Det=`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  `+K3+`
  return result;
`,Ret=Fi({opSnippet:Iet,packedOpSnippet:Det}),Oet={kernelName:qv,backendName:"webgl",kernelFunc:Ret};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Fet{constructor(e,n,r){this.variableNames=["probs"],this.outputShape=[e,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}getCustomSetupFunc(e){return(n,r)=>{this.seedLoc==null&&(this.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(this.seedLoc,e)}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Let=`
if (a == b) {
  return 1.0;
};
return a / b;`,Pet=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,hae=Fi({opSnippet:Let,packedOpSnippet:Pet,checkOutOfBounds:!0}),zet={kernelName:$v,backendName:"webgl",kernelFunc:hae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hj="return a - b;",pae=Fi({opSnippet:Hj,packedOpSnippet:Hj,supportsComplex:!0,cpuKernelImpl:zXe}),Bet={kernelName:uy,backendName:"webgl",kernelFunc:pae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mae(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{dim:s}=r,a=Xt([s],i.shape),o=dae({inputs:{x:i},backend:n,attrs:{reductionIndices:a,keepDims:!1}}),l=$r(o.shape,a),u=ct({inputs:{x:o},backend:n,attrs:{shape:l}}),c=pae({inputs:{a:i,b:u},backend:n}),f=cae({inputs:{x:c},backend:n}),d=uB({inputs:{x:f},backend:n,attrs:{axis:a,keepDims:!1}}),h=ct({inputs:{x:d},backend:n,attrs:{shape:l}}),p=hae({inputs:{a:f,b:h},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),p}const Uet={kernelName:N_,backendName:"webgl",kernelFunc:mae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vet(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{numSamples:s,seed:a,normalized:o}=r,l=o?i:mae({inputs:{logits:i},backend:n,attrs:{dim:i.shape.length-1}}),u=l.shape[0],c=l.shape[1],f=new Fet(u,c,s),d=f.getCustomSetupFunc(a),h=n.runWebGLProgram(f,[l],"int32",d);return o||n.disposeIntermediateTensorInfo(l),h}const Wet={kernelName:pM,backendName:"webgl",kernelFunc:Vet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jj="return -x;";function Get(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const s=n.texData.get(r.dataId),[a,o]=DXe(s.values,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,a)}let i;return Ce().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new qg(r.shape,jj):i=new pd(r.shape,jj),n.runWebGLProgram(i,[r],r.dtype)}const Het={kernelName:p_,backendName:"webgl",kernelFunc:Get};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jet=h3;function qet(t){Ey("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l}=r,u=n.readSync(i.dataId),c=n.readSync(s.dataId),{selectedIndices:f}=jet(u,c,a,o,l);return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}const Xet={kernelName:mM,backendName:"webgl",kernelFunc:qet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yet=p3;function Ket(t){Ey("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:u}=r,c=n.readSync(i.dataId),f=n.readSync(s.dataId),{selectedIndices:d,validOutputs:h}=Yet(c,f,a,o,l,u);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const Zet={kernelName:gM,backendName:"webgl",kernelFunc:Ket};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jet=m3;function Qet(t){Ey("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,softNmsSigma:u}=r,c=n.readSync(i.dataId),f=n.readSync(s.dataId),d=a,h=o,p=l,m=u,{selectedIndices:g,selectedScores:v}=Jet(c,f,d,h,p,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([v.length],"float32",new Float32Array(v))]}const ett={kernelName:vM,backendName:"webgl",kernelFunc:Qet};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ttt{constructor(e,n,r,i){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${i}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ntt=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:i}=e,{depth:s,onValue:a,offValue:o}=r,l=Ee(i.shape),u=new ttt(l,s,a,o),c=ct({inputs:{x:i},backend:n,attrs:{shape:[l]}}),f=n.runWebGLProgram(u,[c],i.dtype);n.disposeIntermediateTensorInfo(c);const d=[...i.shape,s],h=ct({inputs:{x:f},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(f),h},rtt={kernelName:v_,backendName:"webgl",kernelFunc:ntt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AT(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const i=g2({inputs:{input:r},backend:n}),s=AT({inputs:{x:i},backend:n}),a=Q3({inputs:{input:r},backend:n}),o=AT({inputs:{x:a},backend:n}),l=Hd({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),l}else return fB({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const itt={kernelName:R_,backendName:"webgl",kernelFunc:AT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gae(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const i=g2({inputs:{input:r},backend:n}),s=gae({inputs:{x:i},backend:n}),a=Q3({inputs:{input:r},backend:n}),o=AT({inputs:{x:a},backend:n}),l=Hd({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),l}else return fB({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const stt={kernelName:g_,backendName:"webgl",kernelFunc:gae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function att(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r;if(e.length===1)return QF({inputs:{input:e[0]},backend:n,attrs:{dim:i}});const s=e[0].shape,a=e[0].dtype;e.forEach(c=>{mi(s,c.shape,"All tensors passed to stack must have matching shapes"),R(a===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=e.map(c=>{const f=QF({inputs:{input:c},backend:n,attrs:{dim:i}});return o.push(f),f}),u=iae({inputs:l,backend:n,attrs:{axis:i}});return o.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const ott={kernelName:y_,backendName:"webgl",kernelFunc:att};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ltt{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((u,c)=>u[0]+e[c]+u[1]);const i=e.length,s=Hn(i),a=n.map(u=>u[0]).join(","),o=n.map((u,c)=>u[0]+e[c]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i);if(i===1){this.userCode=`
        int start = ${a};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(${r}));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${a});
      ${s} end = ${s}(${o});

      void main() {
        ${s} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(${r}));
        } else {
          ${s} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class utt{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((m,g)=>m[0]+e[g]+m[1]);const i=e.length,s=Hn(i),a=n.map(m=>m[0]).join(","),o=n.map((m,g)=>m[0]+e[g]).join(","),l=fs("rc",i),u=fs("source",i),c=`${l[i-1]} < ${this.outputShape[i-1]}`,f=i===1?"source":`vec2(${u.slice(-2).join()})`,d=[`${s} rc = outputLoc;`,`${l[i-1]} += 1;
       if(${c}) {
      `,i===1?"":`}
       rc = outputLoc;
       ${l[i-2]} += 1;
       if(${l[i-2]} < ${this.outputShape[i-2]}) {`,i===1?"":`  ${l[i-1]} += 1;
         if(${c}) {`],h=i===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let m=0,g=i===1?2:4;m<g;m++)p+=`
        ${d[m]}
        if (${h}) {
          result[${m}] = float(${r});
        } else {
          ${s} source = rc - start;
          result[${m}] = getChannel(getX(${u.join()}), ${f});
        }
      `;p+=i===1?"} ":"}}",this.userCode=`
      const ${s} start = ${s}(${a});
      const ${s} end = ${s}(${o});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vae=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:s,constantValue:a}=r,o=Ce().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new utt(i.shape,s,a):new ltt(i.shape,s,a);return n.runWebGLProgram(o,[i],i.dtype)},ctt={kernelName:b_,backendName:"webgl",kernelFunc:vae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ftt=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,dtt=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  `+K3+`
  return result;
`,htt=Fi({opSnippet:ftt,packedOpSnippet:dtt}),ptt={kernelName:Yv,backendName:"webgl",kernelFunc:htt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mtt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r,o=i.shape.length,l=[],u=Xt(s,i.shape);let c=u;const f=Ir(c,o);let d=i;f!=null&&(d=Ws({inputs:{x:i},backend:n,attrs:{perm:f}}),c=zr(c.length,o),l.push(d)),Oi("prod",c,o);let h;if(n.shouldExecuteOnCPU([d])){const p=n.texData.get(d.dataId).values,{outVals:m,outShape:g,outDtype:v}=RXe(d.shape,d.dtype,p,c);h=n.makeTensorInfo(g,v,m)}else{const[p,m]=vi(d.shape,c),g=Ee(m),v=ct({inputs:{x:d},backend:n,attrs:{shape:[-1,g]}}),y=$M(i.dtype),b=pm(v,y,"prod",n);h=ct({inputs:{x:b},backend:n,attrs:{shape:p}}),l.push(v),l.push(b)}if(a){l.push(h);const p=$r(h.shape,u);h=ct({inputs:{x:h},backend:n,attrs:{shape:p}})}return l.forEach(p=>n.disposeIntermediateTensorInfo(p)),h}const gtt={kernelName:yM,backendName:"webgl",kernelFunc:mtt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yae=t=>{const{backend:e,attrs:n}=t,{start:r,stop:i,step:s,dtype:a}=n,o=OXe(r,i,s,a);return e.makeTensorInfo([o.length],a,o)},vtt={kernelName:bM,backendName:"webgl",kernelFunc:yae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ytt="return 1.0 / x;",btt=vn({opSnippet:ytt}),xtt={kernelName:Kv,backendName:"webgl",kernelFunc:btt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wtt=Hl+`
  return (x < 0.0) ? 0.0 : x;
`,_tt=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Stt=vn({opSnippet:wtt,packedOpSnippet:_tt}),Ctt={kernelName:Zv,backendName:"webgl",kernelFunc:Stt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ett=Hl+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Ttt=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,ktt=vn({opSnippet:Ett,packedOpSnippet:Ttt}),Att={kernelName:Jv,backendName:"webgl",kernelFunc:ktt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mtt{constructor(e,n,r,i,s){this.variableNames=["A"],this.outputShape=[];const[a,o,l,u]=e;this.outputShape=[a,n,r,u];const c=[i&&n>1?o-1:o,i&&r>1?l-1:l],f=[i&&n>1?n-1:n,i&&r>1?r-1:r];let d;s?d="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":d="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/f[0]},
          ${c[1]/f[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${d};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ntt{constructor(e,n,r,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,o,l,u]=e;this.outputShape=[a,n,r,u];const c=[i&&n>1?o-1:o,i&&r>1?l-1:l],f=[i&&n>1?n-1:n,i&&r>1?r-1:r];let d;s?d="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":d="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/f[0]},
          ${c[1]/f[1]},
          ${c[1]/f[1]});
      const vec3 inputShapeRC = vec3(${o}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${d};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $tt(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:a,size:o}=r,[l,u]=o,c=Ce().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Ntt(i.shape,l,u,s,a):new Mtt(i.shape,l,u,s,a);return n.runWebGLProgram(c,[i],"float32")}const Itt={kernelName:S_,backendName:"webgl",kernelFunc:$tt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Dtt{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,i,s]=n,[,a,o]=e,l=[r&&a>1?i-1:i,r&&o>1?s-1:s],u=[r&&a>1?a-1:a,r&&o>1?o-1:o],c=l[0]/u[0],f=l[1]/u[1],d=1/c,h=1/f,p=Math.ceil(d)*2+2,m=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${f});

        const float invHeightScale = float(${d});
        const float invWidthScale = float(${h});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${i-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${s-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rtt(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:a}=r,o=new Dtt(s.shape,i.shape,a);return n.runWebGLProgram(o,[s],s.dtype)}const Ott={kernelName:_M,backendName:"webgl",kernelFunc:Rtt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ftt{constructor(e,n,r,i,s){this.variableNames=["A"],this.outputShape=[];const[a,o,l,u]=e;this.outputShape=[a,n,r,u];const c=[i&&n>1?o-1:o,i&&r>1?l-1:l],f=[i&&n>1?n-1:n,i&&r>1?r-1:r],d=i?"0.5":"0.0";let h;s?h="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/f[0]},
          ${c[1]/f[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ltt(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:a,size:o}=r,[l,u]=o,c=new Ftt(i.shape,l,u,s,a);return n.runWebGLProgram(c,[i],i.dtype)}const Ptt={kernelName:__,backendName:"webgl",kernelFunc:Ltt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ztt{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,i,s]=n,[,a,o]=e,l=[r&&a>1?i-1:i,r&&o>1?s-1:s],u=[r&&a>1?a-1:a,r&&o>1?o-1:o],c=l[0]/u[0],f=l[1]/u[1],d=1/c,h=1/f,p=Math.ceil(d)*2+2,m=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${f});

        const float invHeightScale = float(${d});
        const float invWidthScale = float(${h});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${u[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${u[1]}));

            int sourceNearestRow = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Btt(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:a}=r,o=new ztt(s.shape,i.shape,a);return n.runWebGLProgram(o,[s],s.dtype)}const Utt={kernelName:wM,backendName:"webgl",kernelFunc:Btt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vtt{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const i=o=>n.indexOf(o)!==-1&&e[o]!==1?`${e[o]} - coords[${o}] - 1`:`coords[${o}]`,s=e.map((o,l)=>i(l)).join(","),a=Hn(r);this.userCode=`
      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${s}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wtt{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const i=fs("rc",r),s=`${i[r-1]} + 1 < ${this.outputShape[r-1]}`,a=`${i[r-2]} + 1 < ${this.outputShape[r-2]}`,o=Hn(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${s}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${o} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(i.slice())};
          if(${s}){
            result.g = ${u(i.slice())};
          }
          if(${a}) {
            result.b = ${c(i.slice())};
            if(${s}) {
              result.a = ${f(i.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(p){return d(p)}function u(p){return p[r-1]="("+p[r-1]+" + 1)",d(p)}function c(p){return p[r-2]="("+p[r-2]+" + 1)",d(p)}function f(p){return p[r-1]="("+p[r-1]+" + 1)",p[r-2]="("+p[r-2]+" + 1)",d(p)}function d(p){const m=e.map((y,b)=>h(b,p)),g=m.join(","),v=m.slice(-2).join(",");return`getChannel(getX(${g}), vec2(${v}))`}function h(p,m){return n.indexOf(p)!==-1&&e[p]!==1?`${e[p]} - ${m[p]} - 1`:`${m[p]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gtt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dims:s}=r,a=i.shape.length,o=Xt(s,i.shape);if(a===0)return Ta({inputs:{x:i},backend:n});const l=Ce().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Wtt(i.shape,o):new Vtt(i.shape,o);return n.runWebGLProgram(l,[i],i.dtype)}const Htt={kernelName:C_,backendName:"webgl",kernelFunc:Gtt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jtt{constructor(e,n,r,i){this.variableNames=["Image"],this.outputShape=[];const s=e[1],a=e[2],o=Math.sin(n).toFixed(3),l=Math.cos(n).toFixed(3);this.outputShape=e;const[u,c]=lz(i,s,a),f=u.toFixed(3),d=c.toFixed(3);let h="";typeof r=="number"?h=`float outputValue = ${r.toFixed(2)};`:h=`
        vec3 fill = vec3(${r.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - ${f}) * ${l} - (float(y) - ${d}) * ${o};
          float coordYFloat = (float(x) - ${f}) * ${o} + (float(y) - ${d}) * ${l};
          int coordX = int(round(coordXFloat + ${f}));
          int coordY = int(round(coordYFloat + ${d}));
          ${h}
          if(coordX >= 0 && coordX < ${a} && coordY >= 0 && coordY < ${s}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qtt={kernelName:MM,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:i,fillValue:s,center:a}=e,o=n,l=new jtt(r.shape,i,s,a);return o.runWebGLProgram(l,[r],r.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xtt=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,Ytt=vn({opSnippet:Xtt}),Ktt={kernelName:Qv,backendName:"webgl",kernelFunc:Ytt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ztt="return inversesqrt(x);",Jtt=vn({opSnippet:Ztt,cpuKernelImpl:FXe}),Qtt={kernelName:ey,backendName:"webgl",kernelFunc:Jtt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bae{constructor(e,n,r,i,s,a,o=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;const l=Hn(s.length),u=Hn(a.length);let c="";r===1?c="i":r===2&&(c="i, j");const f=`getIndices(${c})`;let d="";i===1?d="i":i===2&&(d="i, coords[1]");const h=`getUpdates(${d})`,p=n>1?"strides[j]":"strides";this.userCode=`
        ${l} strides = ${l}(${s});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${f});
              flattenedIndex += index * ${p};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${h};
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ent(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i,updates:s}=e,{shape:a}=r,{sliceRank:o,numUpdates:l,sliceSize:u,strides:c,outputSize:f}=py(s,i,a),d=[f/u,u];if(f===0)return n.makeTensorInfo(a,i.dtype);const h=ct({inputs:{x:i},backend:n,attrs:{shape:[l,o]}}),p=ct({inputs:{x:s},backend:n,attrs:{shape:[l,u]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0])),g=new bae(l,o,h.shape.length,p.shape.length,c,d),v=n.runWebGLProgram(g,[p,h,m],p.dtype),y=ct({inputs:{x:v},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),y}const tnt={kernelName:SM,backendName:"webgl",kernelFunc:ent};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nnt{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let i,s;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)s="resRC",i="resRC";else{const o=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],u=[];for(let c=0;c<n.length;c++)u.push(`${o[c]}`),c<e&&l.push(`${o[c]}`);i=l.join(),s=u.join()}const a=Hn(r);this.userCode=`
      void main() {
        ${a} resRC = getOutputCoords();
        float cVal = getC(${i});
        if (cVal >= 1.0) {
          setOutput(getA(${s}));
        } else {
          setOutput(getB(${s}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rnt(t){const{inputs:e,backend:n}=t,{condition:r,t:i,e:s}=e,a=new nnt(r.shape.length,i.shape,i.shape.length);return n.runWebGLProgram(a,[r,i,s],wa(i.dtype,s.dtype))}const int={kernelName:E_,backendName:"webgl",kernelFunc:rnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const snt=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${S3};
  float scale = ${C3};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,ant=vn({opSnippet:snt}),ont={kernelName:ty,backendName:"webgl",kernelFunc:ant};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lnt="return 1.0 / (1.0 + exp(-1.0 * x));",unt=vn({opSnippet:lnt}),cnt={kernelName:sy,backendName:"webgl",kernelFunc:unt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fnt=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,dnt=vn({opSnippet:fnt}),hnt={kernelName:iy,backendName:"webgl",kernelFunc:dnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pnt=Kse+`
  return sin(x);
`,mnt=vn({opSnippet:pnt}),gnt={kernelName:ny,backendName:"webgl",kernelFunc:mnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vnt=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,ynt=vn({opSnippet:vnt}),bnt={kernelName:ry,backendName:"webgl",kernelFunc:ynt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xnt=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,wnt=vn({opSnippet:xnt}),_nt={kernelName:ay,backendName:"webgl",kernelFunc:wnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Snt=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,paddings:a}=r;R(i.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const o=s.reduce((v,y)=>v*y),l=[[0,0]];l.push(...a);for(let v=1+s.length;v<i.shape.length;++v)l.push([0,0]);const u=[],c=vae({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),f=K_(c.shape,s,o,!1),d=Z_(f.length,s.length,!1),h=J_(c.shape,s,o,!1),p=ct({inputs:{x:c},backend:n,attrs:{shape:f}}),m=Ws({inputs:{x:p},backend:n,attrs:{perm:d}}),g=ct({inputs:{x:m},backend:n,attrs:{shape:h}});return u.push(c),u.push(p),u.push(m),u.forEach(v=>n.disposeIntermediateTensorInfo(v)),g},Cnt={kernelName:A_,backendName:"webgl",kernelFunc:Snt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ent(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:i,sparseValues:s,defaultValue:a}=e,{outputShape:o}=r,{sliceRank:l,numUpdates:u,strides:c,outputSize:f}=py(s,i,o),d=!1,h=new bae(u,l,i.shape.length,s.shape.length,c,[f,1],d),p=n.runWebGLProgram(h,[s,i,a],s.dtype),m=ct({inputs:{x:p},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(p),m}const Tnt={kernelName:EM,backendName:"webgl",kernelFunc:Ent};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function knt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{numOrSizeSplits:s,axis:a}=r,o=Xt(a,i.shape)[0],l=yz(i,s,o),u=i.shape.length,c=new Array(u).fill(0),f=i.shape.slice();return l.map(d=>{const h=[...f];h[o]=d;const p=m2({inputs:{x:i},backend:n,attrs:{begin:c,size:h}});return c[o]+=d,p})}const Ant={kernelName:M_,backendName:"webgl",kernelFunc:knt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mnt="return sqrt(x);",Nnt=vn({opSnippet:Mnt}),$nt={kernelName:oy,backendName:"webgl",kernelFunc:Nnt};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Int="return x * x;",Dnt=vn({opSnippet:Int}),Rnt={kernelName:CM,backendName:"webgl",kernelFunc:Dnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qj="return (a - b) * (a - b);",Ont=Fi({opSnippet:qj,packedOpSnippet:qj}),Fnt={kernelName:ly,backendName:"webgl",kernelFunc:Ont};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lnt({inputs:t,attrs:e,backend:n}){const{x:r}=t,i=Hl+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,s=new pd(r.shape,i);return n.runWebGLProgram(s,[r],r.dtype)}const Pnt={kernelName:hy,backendName:"webgl",kernelFunc:Lnt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class znt{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const i=r.length,s=Hn(r.length),a=Hn(r.length);let o="";if(i===1)o="coords * strides + begin";else{let l=0;o=r.map((u,c)=>(l++,r.length===1?`coords * strides[${c}] + begin[${c}]`:`coords[${l-1}] * strides[${c}] + begin[${c}]`)).join(",")}this.userCode=`
      ${s} begin = ${s}(${e});
      ${s} strides = ${s}(${n});

      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${o}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bnt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,end:a,strides:o,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:f,shrinkAxisMask:d}=r,{nonStrided:h,$begin:p,$strides:m,size:g,newShape:v,outShape:y}=p4(i.shape,s,a,o,l,u,c,f,d),b=ct({inputs:{x:i},backend:n,attrs:{shape:v}});let x;if(h){const S=m2({inputs:{x:b},backend:n,attrs:{begin:p,size:g}});x=ct({inputs:{x:S},backend:n,attrs:{shape:y}}),n.disposeIntermediateTensorInfo(S)}else if(y.some(S=>S===0))x=n.makeTensorInfo(y,i.dtype,[]);else if(n.shouldExecuteOnCPU([b])){const _=n.texData.get(b.dataId).values,E=Jt(b.shape,b.dtype,_),T=PXe(y,E,m,p);x=n.makeTensorInfo(y,b.dtype,T.values)}else{const C=new znt(p,m,y);x=n.runWebGLProgram(C,[b],b.dtype)}const w=ct({inputs:{x},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(x),w}const Unt={kernelName:TM,backendName:"webgl",kernelFunc:Bnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vnt="return tan(x);",Wnt=vn({opSnippet:Vnt}),Gnt={kernelName:cy,backendName:"webgl",kernelFunc:Wnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hnt=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,jnt=vn({opSnippet:Hnt}),qnt={kernelName:fy,backendName:"webgl",kernelFunc:jnt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xnt{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let a=0;a<r.length;a++)r[a]=e[a]*n[a];this.outputShape=r,this.rank=r.length;const i=Hn(this.rank),s=Ynt(e);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        setOutput(getA(${s}));
      }
    `}}function Ynt(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let i=0;i<t.length;i++)r.push(`imod(${n[i]}, ${t[i]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xae(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reps:s}=r;if(i.dtype==="string"){const u=n.readSync(i.dataId).map(d=>wp(d)),c=Jt(i.shape,i.dtype,u),f=BXe(c,s);return n.makeTensorInfo(f.shape,f.dtype,f.values)}const a=new Xnt(i.shape,s);return n.runWebGLProgram(a,[i],i.dtype)}const Knt={kernelName:dy,backendName:"webgl",kernelFunc:xae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Znt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{k:s,sorted:a}=r,o=n.readSync(i.dataId),[l,u]=UXe(o,i.shape,i.dtype,s,a);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}const Jnt={kernelName:kM,backendName:"webgl",kernelFunc:Znt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qnt(t){const{inputs:e,attrs:n,backend:r}=t,{axis:i}=n,{x:s}=e;d2(s,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const a=r.readSync(s.dataId),{outputValues:o,outputShape:l,indices:u}=VXe(a,i,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,o),r.makeTensorInfo([u.length],"int32",u)]}const ert={kernelName:AM,backendName:"webgl",kernelFunc:Qnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function trt(t){const{inputs:e,backend:n,attrs:r}=t,{value:i}=e;let{axis:s}=r;s<0&&(s+=i.shape.length);const a=i,o=a.shape.length,l=i.shape[s],u=new Array(o-1);let c=0;for(let m=0;m<o;m++)m!==s&&(u[c++]=a.shape[m]);const f=[],d=new Array(o).fill(0),h=a.shape.slice();h[s]=1;const p=new Array(l);for(let m=0;m<p.length;m++){d[s]=m;const g=m2({inputs:{x:a},backend:n,attrs:{begin:d,size:h}}),v=ct({inputs:{x:g},backend:n,attrs:{shape:u}});p[m]=v,f.push(g)}return f.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const nrt={kernelName:I_,backendName:"webgl",kernelFunc:trt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rrt{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,i=e.batchSize,s=e.inSize,a=e.numSegments,o=a*Math.ceil(s/r);this.outputShape=[i,o];const l="0.0",u="sumValue",c=Math.floor(r/4)*4,f=r%4,d=`
        sumValue += dot(values, segFilter);
    `;let h="";s%r>0&&(h=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `);let p="";s%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${p}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${a})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${a})));

        float sumValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${d}
        }

        int inIdx = inOffset + ${c};
        if (${f===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${d}
        } else if (${f===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${d}
        } else if (${f===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${d}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function irt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,segmentIds:s}=e,{numSegments:a}=r,o=i.shape.length,l=[];let u=0;const c=Ir([u],o);let f=i;c!=null&&(f=Ws({inputs:{x:i},backend:n,attrs:{perm:c}}),l.push(f),u=zr(1,o)[0]);const d=tre(f.shape,u,a),h=Ee([f.shape[u]]),p=ct({inputs:{x:f},backend:n,attrs:{shape:[-1,h]}});l.push(p);const m=$M(i.dtype),g=(x,w,S,C,_)=>{const E=x.shape[0],T=x.shape[1],k=ere(T,_),M={windowSize:k,inSize:T,batchSize:E,numSegments:_},A=new rrt(M,w),N=n.compileAndRun(A,[x,S],C);if(l.push(N),N.shape[1]===_)return N;const $=yae({backend:n,attrs:{start:0,stop:_,step:1,dtype:"float32"}}),D=xae({inputs:{x:$},backend:n,attrs:{reps:[T/k]}});return l.push($),l.push(D),g(N,w,D,C,_)},v=g(p,"unsortedSegmentSum",s,m,a),y=ct({inputs:{x:v},backend:n,attrs:{shape:d}});let b=y;if(c!=null){l.push(y);const x=by(c);b=Ws({inputs:{x:b},backend:n,attrs:{perm:x}})}return l.forEach(x=>n.disposeIntermediateTensorInfo(x)),b}const srt={kernelName:D_,backendName:"webgl",kernelFunc:irt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const art=[KQe,QQe,PYe,BYe,WYe,jYe,XYe,ZYe,QYe,tKe,sKe,oKe,cKe,hKe,xKe,gKe,SKe,kKe,EKe,$Ke,DKe,OKe,zKe,jKe,XKe,eZe,nZe,aZe,uZe,bYe,hZe,SZe,EZe,vZe,MZe,$Ze,kZe,RZe,LZe,BZe,VZe,GZe,qZe,QZe,tJe,YZe,iJe,oJe,fJe,mJe,bJe,_Je,SJe,CJe,TJe,AJe,NJe,IJe,RJe,PJe,UJe,GJe,jJe,YJe,QJe,rQe,oQe,yYe,uQe,dZe,dQe,mQe,yQe,wYe,_Qe,TQe,AQe,OQe,IQe,zQe,VQe,jQe,tet,cet,oet,pet,get,yet,set,xet,_et,ket,$et,Oet,Wet,TYe,Het,Xet,Zet,ett,KKe,rtt,stt,ott,ctt,ptt,SYe,gtt,vtt,ZKe,zet,xtt,Att,Ctt,AYe,Itt,Ott,Ptt,Utt,Htt,qtt,Ktt,Qtt,tnt,int,ont,cnt,hnt,gnt,bnt,GKe,Uet,_nt,Cnt,Tnt,Ant,$nt,Rnt,Fnt,Pnt,Unt,Bet,OYe,Gnt,qnt,Knt,Jnt,FYe,ert,nrt,srt,itt];for(const t of art)NM(t);/** @license See the LICENSE file. */const ort="3.1.0";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lrt={"tfjs-core":lne,"tfjs-backend-cpu":PUe,"tfjs-backend-webgl":vYe,"tfjs-data":Pie,"tfjs-layers":L3,"tfjs-converter":wie,tfjs:ort},urt=Object.freeze(Object.defineProperty({__proto__:null,Abs:Rw,Acos:bv,Acosh:xv,AdadeltaOptimizer:g3,AdagradOptimizer:v3,AdamOptimizer:y3,AdamaxOptimizer:b3,Add:im,AddN:Ow,All:UA,Any:VA,ArgMax:Fw,ArgMin:Lw,Asin:wv,Asinh:_v,Atan:Sv,Atan2:Ev,Atanh:Cv,AvgPool:Pw,AvgPool3D:zw,AvgPool3DGrad:GA,AvgPoolGrad:WA,BatchMatMul:Bw,BatchToSpaceND:Uw,Bincount:HA,BroadcastTo:Ete,Callback:pie,CallbackList:xre,Cast:Tv,Ceil:kv,ClipByValue:Av,Complex:jA,ComplexAbs:Vw,Concat:Ww,Conv2D:Gw,Conv2DBackpropFilter:qA,Conv2DBackpropInput:Hw,Conv3D:jw,Conv3DBackpropFilterV2:XA,Conv3DBackpropInputV2:YA,Cos:Mv,Cosh:Nv,CropAndResize:KA,Cumsum:qw,CustomCallback:_re,DataStorage:q5,DenseBincount:ZA,DepthToSpace:JA,DepthwiseConv2dNative:Xw,DepthwiseConv2dNativeBackpropFilter:QA,DepthwiseConv2dNativeBackpropInput:eM,Diag:tM,Dilation2D:Yw,Dilation2DBackpropFilter:nT,Dilation2DBackpropInput:tT,get ENV(){return e4},EarlyStopping:mie,Elu:Iv,EluGrad:nM,Environment:Ste,Equal:Kw,Erf:Dv,Exp:Rv,ExpandDims:Zw,Expm1:Ov,FFT:rM,Fill:iM,FlipLeftRight:sM,Floor:Fv,FloorDiv:Lv,FromPixels:rT,FusedBatchNorm:Jw,FusedConv2D:Mx,FusedDepthwiseConv2D:Nx,GatherNd:aM,GatherV2:Qw,GraphModel:xie,Greater:e_,GreaterEqual:Pv,History:wre,IFFT:oM,Identity:zv,Imag:lM,InputSpec:li,IsFinite:Bv,IsInf:Uv,IsNan:Vv,KernelBackend:zA,LRN:o_,LRNGrad:cM,LayerVariable:gre,LayersModel:Bc,LeakyRelu:t_,Less:n_,LessEqual:r_,LinSpace:uM,Log:Wv,Log1p:Gv,LogSoftmax:Tte,LogicalAnd:i_,LogicalNot:s_,LogicalOr:a_,Max:l_,MaxPool:u_,MaxPool3D:c_,MaxPool3DGrad:dM,MaxPoolGrad:fM,MaxPoolWithArgmax:hM,Maximum:Hv,Mean:f_,Min:d_,Minimum:jv,MirrorPad:h_,Mod:qv,MomentumOptimizer:x3,Multinomial:pM,Multiply:Xv,Neg:p_,NonMaxSuppressionV3:mM,NonMaxSuppressionV4:gM,NonMaxSuppressionV5:vM,NotEqual:m_,OP_SCOPE_SUFFIX:Ote,OneHot:v_,OnesLike:g_,Optimizer:df,Pack:y_,PadV2:b_,Pool:q$e,Pow:Yv,Prelu:x_,Prod:yM,RMSPropOptimizer:w3,RNN:Gl,Range:bM,get Rank(){return aF},Real:xM,RealDiv:$v,Reciprocal:Kv,get Reduction(){return cs},Relu:Zv,Relu6:Jv,Reshape:w_,ResizeBilinear:S_,ResizeBilinearGrad:_M,ResizeNearestNeighbor:__,ResizeNearestNeighborGrad:wM,Reverse:C_,RotateWithOffset:MM,Round:Qv,Rsqrt:ey,SGDOptimizer:Y_,ScatterNd:SM,Select:E_,Selu:ty,Sequential:P3,Sigmoid:sy,Sign:iy,Sin:ny,Sinh:ry,Slice:T_,Softmax:N_,Softplus:ay,SpaceToBatchND:A_,SparseToDense:EM,SplitV:M_,Sqrt:oy,Square:CM,SquaredDifference:ly,Step:hy,StridedSlice:TM,Sub:uy,Sum:k_,SymbolicTensor:Tl,Tan:cy,Tanh:fy,Tensor:kn,TensorBuffer:Kr,Tile:dy,TopK:kM,Transpose:$_,Unique:AM,Unpack:I_,UnsortedSegmentSum:D_,Variable:Ix,ZerosLike:R_,_FusedMatMul:Ax,abs:Wr,acos:y4,acosh:b4,add:We,addN:cne,all:PM,any:Rx,argMax:Ox,argMin:x4,asin:w4,asinh:_4,atan:S4,atan2:C4,atanh:E4,avgPool:L_,avgPool3d:k4,backend:une,backend_util:rre,basicLSTMCell:mRe,batchNorm:Ep,batchNorm2d:fne,batchNorm3d:dne,batchNorm4d:hne,batchToSpaceND:P_,bincount:pne,booleanMaskAsync:DLe,broadcastTo:Fx,browser:pDe,buffer:Jt,callbacks:X8e,cast:ft,ceil:A4,clipByValue:zs,clone:ud,complex:wd,concat:Er,concat1d:mne,concat2d:gne,concat3d:vne,concat4d:yne,constraints:gze,conv1d:zM,conv2d:Kc,conv2dTranspose:BM,conv3d:N4,conv3dTranspose:LRe,copyRegisteredKernels:K$e,cos:z_,cosh:UM,cosineWindow:nz,cumsum:VM,customGrad:Ou,data:X9e,denseBincount:xne,deprecationWarn:MDe,depthToSpace:$4,depthwiseConv2d:my,deregisterOp:K8e,device_util:pIe,diag:HRe,dilation2d:I4,disableDeprecationWarnings:ADe,dispose:Pt,disposeVariables:NDe,div:kt,divNoNan:D4,dot:wne,dropout:Pne,elu:gy,enableDebugMode:kDe,enableProdMode:TDe,enclosingPowerOfTwo:zne,engine:wc,env:Ce,equal:Wd,erf:R4,exp:ao,expandDims:sa,expm1:O4,eye:F4,fft:q_,fill:B_,findBackend:LDe,findBackendFactory:PDe,floor:vy,floorDiv:LM,fused:ZLe,gather:Tp,gatherND:Lne,gather_util:mDe,getBackend:ODe,getGradient:sF,getKernel:iT,getKernelsForBackend:sT,grad:bOe,grads:xOe,greater:ll,greaterEqual:Gd,ifft:C0,imag:WM,image:fd,inTopKAsync:GLe,initializers:Jze,input:Lre,io:sDe,irfft:i3,isFinite:_ne,isInf:Sne,isNaN:Cne,keep:ai,kernel_impls:o5e,layers:E8e,leakyRelu:U_,less:GM,lessEqual:om,linalg:qne,linspace:L4,loadGraphModel:d9e,loadLayersModel:nBe,localResponseNormalization:P4,log:_a,log1p:HM,logSigmoid:Tne,logSoftmax:qM,logSumExp:B4,logicalAnd:Qo,logicalNot:V_,logicalOr:XM,logicalXor:Ane,losses:r5e,matMul:hn,math:fDe,max:ro,maxPool:W_,maxPool3d:U4,maxPoolWithArgmax:Mne,maximum:Xu,mean:dr,memory:lT,metrics:U8e,min:S0,minimum:xy,mirrorPad:V4,mod:W4,model:tBe,models:V8e,moments:YM,movingAverage:FLe,mul:se,multiRNNCell:qOe,multinomial:Nne,neg:pr,nextFrame:yE,norm:l3,notEqual:kp,oneHot:w0,ones:Yu,onesLike:Sa,op:ee,outerProduct:JOe,pad:cf,pad1d:tFe,pad2d:rFe,pad3d:sFe,pad4d:oFe,pool:$ne,pow:Zc,prelu:H_,print:Vte,prod:KM,profile:$De,rand:gFe,randomGamma:FFe,randomNormal:Ine,randomUniform:_y,range:cT,ready:RDe,real:Px,reciprocal:H4,registerBackend:v4,registerCallbackConstructor:rBe,registerGradient:kte,registerKernel:NM,registerOp:Y8e,regularizers:j8e,relu:Ku,relu6:ZM,removeBackend:FDe,reshape:ce,reverse:Ca,reverse1d:HFe,reverse2d:qFe,reverse3d:YFe,reverse4d:ZFe,rfft:X_,round:j4,rsqrt:JM,scalar:St,scatterND:Fne,scatter_util:gDe,selu:QM,separableConv2d:q4,sequential:Fre,serialization:vDe,setBackend:DDe,setPlatform:zDe,setdiff1dAsync:Dne,sigmoid:Cu,sign:X4,signal:n5e,sin:e3,sinh:t3,slice:pn,slice1d:n3,slice2d:Y4,slice3d:r3,slice4d:zx,slice_util:sne,softmax:j_,softplus:yy,spaceToBatchND:G_,sparseToDense:tz,spectral:t5e,split:gs,sqrt:Ii,square:Bn,squaredDifference:s3,squeeze:Sd,stack:Ea,step:Sy,stridedSlice:K4,sub:yt,sum:Tt,sumOutType:$M,tan:Z4,tanh:_0,tensor:Il,tensor1d:Us,tensor2d:Pc,tensor3d:qte,tensor4d:SLe,tensor5d:CLe,tensor6d:ELe,tensor_util:cIe,test_util:EDe,tidy:oe,tile:cd,time:IDe,topk:J4,train:Ff,transpose:$n,truncatedNormal:a3,unique:fT,unregisterGradient:Y$e,unregisterKernel:X$e,unsortedSegmentSum:Q4,unstack:el,upcastType:wa,util:J$e,valueAndGrad:wOe,valueAndGrads:_Oe,variable:Rne,variableGrads:Ene,version:lrt,version_converter:wie,version_core:lne,version_layers:L3,where:Bs,whereAsync:ez,zeros:Fr,zerosLike:fn},Symbol.toStringTag,{value:"Module"}));var Ih={},dB={};function crt(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function frt(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(c){try{u(r.next(c))}catch(f){a(f)}}function l(c){try{u(r.throw(c))}catch(f){a(f)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((r=r.apply(t,e||[])).next())})}var eL="http://www.w3.org/1999/xhtml";const tL={svg:"http://www.w3.org/2000/svg",xhtml:eL,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function hB(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),tL.hasOwnProperty(e)?{space:tL[e],local:t}:t}function drt(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===eL&&e.documentElement.namespaceURI===eL?e.createElement(t):e.createElementNS(n,t)}}function hrt(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function eN(t){var e=hB(t);return(e.local?hrt:drt)(e)}function prt(){}function pB(t){return t==null?prt:function(){return this.querySelector(t)}}function mrt(t){typeof t!="function"&&(t=pB(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=new Array(a),l,u,c=0;c<a;++c)(l=s[c])&&(u=t.call(l,l.__data__,c,s))&&("__data__"in l&&(u.__data__=l.__data__),o[c]=u);return new Gs(r,this._parents)}function grt(){return[]}function wae(t){return t==null?grt:function(){return this.querySelectorAll(t)}}function vrt(t){typeof t!="function"&&(t=wae(t));for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var a=e[s],o=a.length,l,u=0;u<o;++u)(l=a[u])&&(r.push(t.call(l,l.__data__,u,a)),i.push(l));return new Gs(r,i)}function _ae(t){return function(){return this.matches(t)}}function yrt(t){typeof t!="function"&&(t=_ae(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=[],l,u=0;u<a;++u)(l=s[u])&&t.call(l,l.__data__,u,s)&&o.push(l);return new Gs(r,this._parents)}function Sae(t){return new Array(t.length)}function brt(){return new Gs(this._enter||this._groups.map(Sae),this._parents)}function MT(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}MT.prototype={constructor:MT,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function xrt(t){return function(){return t}}var Xj="$";function wrt(t,e,n,r,i,s){for(var a=0,o,l=e.length,u=s.length;a<u;++a)(o=e[a])?(o.__data__=s[a],r[a]=o):n[a]=new MT(t,s[a]);for(;a<l;++a)(o=e[a])&&(i[a]=o)}function _rt(t,e,n,r,i,s,a){var o,l,u={},c=e.length,f=s.length,d=new Array(c),h;for(o=0;o<c;++o)(l=e[o])&&(d[o]=h=Xj+a.call(l,l.__data__,o,e),h in u?i[o]=l:u[h]=l);for(o=0;o<f;++o)h=Xj+a.call(t,s[o],o,s),(l=u[h])?(r[o]=l,l.__data__=s[o],u[h]=null):n[o]=new MT(t,s[o]);for(o=0;o<c;++o)(l=e[o])&&u[d[o]]===l&&(i[o]=l)}function Srt(t,e){if(!t)return h=new Array(this.size()),u=-1,this.each(function(S){h[++u]=S}),h;var n=e?_rt:wrt,r=this._parents,i=this._groups;typeof t!="function"&&(t=xrt(t));for(var s=i.length,a=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var c=r[u],f=i[u],d=f.length,h=t.call(c,c&&c.__data__,u,r),p=h.length,m=o[u]=new Array(p),g=a[u]=new Array(p),v=l[u]=new Array(d);n(c,f,m,g,v,h,e);for(var y=0,b=0,x,w;y<p;++y)if(x=m[y]){for(y>=b&&(b=y+1);!(w=g[b])&&++b<p;);x._next=w||null}}return a=new Gs(a,r),a._enter=o,a._exit=l,a}function Crt(){return new Gs(this._exit||this._groups.map(Sae),this._parents)}function Ert(t,e,n){var r=this.enter(),i=this,s=this.exit();return r=typeof t=="function"?t(r):r.append(t+""),e!=null&&(i=e(i)),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Trt(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),a=new Array(r),o=0;o<s;++o)for(var l=e[o],u=n[o],c=l.length,f=a[o]=new Array(c),d,h=0;h<c;++h)(d=l[h]||u[h])&&(f[h]=d);for(;o<r;++o)a[o]=e[o];return new Gs(a,this._parents)}function krt(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],a;--i>=0;)(a=r[i])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function Art(t){t||(t=Mrt);function e(f,d){return f&&d?t(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var a=n[s],o=a.length,l=i[s]=new Array(o),u,c=0;c<o;++c)(u=a[c])&&(l[c]=u);l.sort(e)}return new Gs(i,this._parents).order()}function Mrt(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Nrt(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function $rt(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t}function Irt(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var a=r[i];if(a)return a}return null}function Drt(){var t=0;return this.each(function(){++t}),t}function Rrt(){return!this.node()}function Ort(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,a=i.length,o;s<a;++s)(o=i[s])&&t.call(o,o.__data__,s,i);return this}function Frt(t){return function(){this.removeAttribute(t)}}function Lrt(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Prt(t,e){return function(){this.setAttribute(t,e)}}function zrt(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Brt(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Urt(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Vrt(t,e){var n=hB(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Lrt:Frt:typeof e=="function"?n.local?Urt:Brt:n.local?zrt:Prt)(n,e))}function mB(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Wrt(t){return function(){this.style.removeProperty(t)}}function Grt(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Hrt(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function jrt(t,e,n){return arguments.length>1?this.each((e==null?Wrt:typeof e=="function"?Hrt:Grt)(t,e,n??"")):Cae(this.node(),t)}function Cae(t,e){return t.style.getPropertyValue(e)||mB(t).getComputedStyle(t,null).getPropertyValue(e)}function qrt(t){return function(){delete this[t]}}function Xrt(t,e){return function(){this[t]=e}}function Yrt(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Krt(t,e){return arguments.length>1?this.each((e==null?qrt:typeof e=="function"?Yrt:Xrt)(t,e)):this.node()[t]}function Eae(t){return t.trim().split(/^|\s+/)}function gB(t){return t.classList||new Tae(t)}function Tae(t){this._node=t,this._names=Eae(t.getAttribute("class")||"")}Tae.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function kae(t,e){for(var n=gB(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Aae(t,e){for(var n=gB(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Zrt(t){return function(){kae(this,t)}}function Jrt(t){return function(){Aae(this,t)}}function Qrt(t,e){return function(){(e.apply(this,arguments)?kae:Aae)(this,t)}}function eit(t,e){var n=Eae(t+"");if(arguments.length<2){for(var r=gB(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Qrt:e?Zrt:Jrt)(n,e))}function tit(){this.textContent=""}function nit(t){return function(){this.textContent=t}}function rit(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function iit(t){return arguments.length?this.each(t==null?tit:(typeof t=="function"?rit:nit)(t)):this.node().textContent}function sit(){this.innerHTML=""}function ait(t){return function(){this.innerHTML=t}}function oit(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function lit(t){return arguments.length?this.each(t==null?sit:(typeof t=="function"?oit:ait)(t)):this.node().innerHTML}function uit(){this.nextSibling&&this.parentNode.appendChild(this)}function cit(){return this.each(uit)}function fit(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function dit(){return this.each(fit)}function hit(t){var e=typeof t=="function"?t:eN(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function pit(){return null}function mit(t,e){var n=typeof t=="function"?t:eN(t),r=e==null?pit:typeof e=="function"?e:pB(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function git(){var t=this.parentNode;t&&t.removeChild(this)}function vit(){return this.each(git)}function yit(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function bit(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function xit(t){return this.select(t?bit:yit)}function wit(t){return arguments.length?this.property("__data__",t):this.node().__data__}var Mae={},Ka=null;if(typeof document<"u"){var _it=document.documentElement;"onmouseenter"in _it||(Mae={mouseenter:"mouseover",mouseleave:"mouseout"})}function Sit(t,e,n){return t=Nae(t,e,n),function(r){var i=r.relatedTarget;(!i||i!==this&&!(i.compareDocumentPosition(this)&8))&&t.call(this,r)}}function Nae(t,e,n){return function(r){var i=Ka;Ka=r;try{t.call(this,this.__data__,e,n)}finally{Ka=i}}}function Cit(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Eit(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.capture):e[++r]=s;++r?e.length=r:delete this.__on}}}function Tit(t,e,n){var r=Mae.hasOwnProperty(t.type)?Sit:Nae;return function(i,s,a){var o=this.__on,l,u=r(e,s,a);if(o){for(var c=0,f=o.length;c<f;++c)if((l=o[c]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture),this.addEventListener(l.type,l.listener=u,l.capture=n),l.value=e;return}}this.addEventListener(t.type,u,n),l={type:t.type,name:t.name,value:e,listener:u,capture:n},o?o.push(l):this.__on=[l]}}function kit(t,e,n){var r=Cit(t+""),i,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,u=o.length,c;l<u;++l)for(i=0,c=o[l];i<s;++i)if((a=r[i]).type===c.type&&a.name===c.name)return c.value}return}for(o=e?Tit:Eit,n==null&&(n=!1),i=0;i<s;++i)this.each(o(r[i],e,n));return this}function Ait(t,e,n,r){var i=Ka;t.sourceEvent=Ka,Ka=t;try{return e.apply(n,r)}finally{Ka=i}}function $ae(t,e,n){var r=mB(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Mit(t,e){return function(){return $ae(this,t,e)}}function Nit(t,e){return function(){return $ae(this,t,e.apply(this,arguments))}}function $it(t,e){return this.each((typeof e=="function"?Nit:Mit)(t,e))}var vB=[null];function Gs(t,e){this._groups=t,this._parents=e}function Iae(){return new Gs([[document.documentElement]],vB)}Gs.prototype=Iae.prototype={constructor:Gs,select:mrt,selectAll:vrt,filter:yrt,data:Srt,enter:brt,exit:Crt,join:Ert,merge:Trt,order:krt,sort:Art,call:Nrt,nodes:$rt,node:Irt,size:Drt,empty:Rrt,each:Ort,attr:Vrt,style:jrt,property:Krt,classed:eit,text:iit,html:lit,raise:cit,lower:dit,append:hit,insert:mit,remove:vit,clone:xit,datum:wit,on:kit,dispatch:$it};function yB(t){return typeof t=="string"?new Gs([[document.querySelector(t)]],[document.documentElement]):new Gs([[t]],vB)}function Iit(t){return yB(eN(t).call(document.documentElement))}var Dit=0;function Dae(){return new nL}function nL(){this._="@"+(++Dit).toString(36)}nL.prototype=Dae.prototype={constructor:nL,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};function bB(){for(var t=Ka,e;e=t.sourceEvent;)t=e;return t}function tN(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}function Rit(t){var e=bB();return e.changedTouches&&(e=e.changedTouches[0]),tN(t,e)}function Oit(t){return typeof t=="string"?new Gs([document.querySelectorAll(t)],[document.documentElement]):new Gs([t??[]],vB)}function Fit(t,e,n){arguments.length<3&&(n=e,e=bB().changedTouches);for(var r=0,i=e?e.length:0,s;r<i;++r)if((s=e[r]).identifier===n)return tN(t,s);return null}function Lit(t,e){e==null&&(e=bB().touches);for(var n=0,r=e?e.length:0,i=new Array(r);n<r;++n)i[n]=tN(t,e[n]);return i}const Pit=Object.freeze(Object.defineProperty({__proto__:null,clientPoint:tN,create:Iit,creator:eN,customEvent:Ait,get event(){return Ka},local:Dae,matcher:_ae,mouse:Rit,namespace:hB,namespaces:tL,select:yB,selectAll:Oit,selection:Iae,selector:pB,selectorAll:wae,style:Cae,touch:Fit,touches:Lit,window:mB},Symbol.toStringTag,{value:"Module"}));function zit(t,e){e=e||{};var n=JSON.stringify([1],null,HD(e,"indent",2)).slice(2,-3),r=HD(e,"margins",!1),i=n===""?1/0:HD(e,"maxLength",80);return function s(a,o,l){a&&typeof a.toJSON=="function"&&(a=a.toJSON());var u=JSON.stringify(a);if(u===void 0)return u;var c=i-o.length-l;if(u.length<=c){var f=Uit(u,r);if(f.length<=c)return f}if(typeof a=="object"&&a!==null){var d=o+n,h=[],p,m=function(v,y){return y===v.length-1?0:1};if(Array.isArray(a)){for(var g=0;g<a.length;g++)h.push(s(a[g],d,m(a,g))||"null");p="[]"}else Object.keys(a).forEach(function(v,y,b){var x=JSON.stringify(v)+": ",w=s(a[v],d,x.length+m(b,y));w!==void 0&&h.push(x+w)}),p="{}";if(h.length>0)return[p[0],n+h.join(`,
`+d),p[1]].join(`
`+o)}return u}(t,"",0)}var Bit=/("(?:[^\\"]|\\.)*")|[:,\][}{]/g;function Uit(t,e){var n=e?" ":"",r={"{":"{"+n,"[":"["+n,"}":n+"}","]":n+"]",",":", ",":":": "};return t.replace(Bit,function(i,s){return s?i:r[i]})}function HD(t,e,n){return e in t?t[e]:n}var jD=zit,Hx={},Vit={get exports(){return Hx},set exports(t){Hx=t}};(function(t,e){e=t.exports=Q;var n;typeof process=="object"&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?n=function(){var L=Array.prototype.slice.call(arguments,0);L.unshift("SEMVER"),console.log.apply(console,L)}:n=function(){},e.SEMVER_SPEC_VERSION="2.0.0";var r=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,s=16,a=e.re=[],o=e.src=[],l=0,u=l++;o[u]="0|[1-9]\\d*";var c=l++;o[c]="[0-9]+";var f=l++;o[f]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var d=l++;o[d]="("+o[u]+")\\.("+o[u]+")\\.("+o[u]+")";var h=l++;o[h]="("+o[c]+")\\.("+o[c]+")\\.("+o[c]+")";var p=l++;o[p]="(?:"+o[u]+"|"+o[f]+")";var m=l++;o[m]="(?:"+o[c]+"|"+o[f]+")";var g=l++;o[g]="(?:-("+o[p]+"(?:\\."+o[p]+")*))";var v=l++;o[v]="(?:-?("+o[m]+"(?:\\."+o[m]+")*))";var y=l++;o[y]="[0-9A-Za-z-]+";var b=l++;o[b]="(?:\\+("+o[y]+"(?:\\."+o[y]+")*))";var x=l++,w="v?"+o[d]+o[g]+"?"+o[b]+"?";o[x]="^"+w+"$";var S="[v=\\s]*"+o[h]+o[v]+"?"+o[b]+"?",C=l++;o[C]="^"+S+"$";var _=l++;o[_]="((?:<|>)?=?)";var E=l++;o[E]=o[c]+"|x|X|\\*";var T=l++;o[T]=o[u]+"|x|X|\\*";var k=l++;o[k]="[v=\\s]*("+o[T]+")(?:\\.("+o[T]+")(?:\\.("+o[T]+")(?:"+o[g]+")?"+o[b]+"?)?)?";var M=l++;o[M]="[v=\\s]*("+o[E]+")(?:\\.("+o[E]+")(?:\\.("+o[E]+")(?:"+o[v]+")?"+o[b]+"?)?)?";var A=l++;o[A]="^"+o[_]+"\\s*"+o[k]+"$";var N=l++;o[N]="^"+o[_]+"\\s*"+o[M]+"$";var $=l++;o[$]="(?:^|[^\\d])(\\d{1,"+s+"})(?:\\.(\\d{1,"+s+"}))?(?:\\.(\\d{1,"+s+"}))?(?:$|[^\\d])";var D=l++;o[D]="(?:~>?)";var P=l++;o[P]="(\\s*)"+o[D]+"\\s+",a[P]=new RegExp(o[P],"g");var O="$1~",B=l++;o[B]="^"+o[D]+o[k]+"$";var H=l++;o[H]="^"+o[D]+o[M]+"$";var te=l++;o[te]="(?:\\^)";var q=l++;o[q]="(\\s*)"+o[te]+"\\s+",a[q]=new RegExp(o[q],"g");var Z="$1^",ne=l++;o[ne]="^"+o[te]+o[k]+"$";var G=l++;o[G]="^"+o[te]+o[M]+"$";var he=l++;o[he]="^"+o[_]+"\\s*("+S+")$|^$";var ve=l++;o[ve]="^"+o[_]+"\\s*("+w+")$|^$";var we=l++;o[we]="(\\s*)"+o[_]+"\\s*("+S+"|"+o[k]+")",a[we]=new RegExp(o[we],"g");var X="$1$2$3",ae=l++;o[ae]="^\\s*("+o[k]+")\\s+-\\s+("+o[k]+")\\s*$";var pe=l++;o[pe]="^\\s*("+o[M]+")\\s+-\\s+("+o[M]+")\\s*$";var j=l++;o[j]="(<|>)?=?\\s*\\*";for(var ze=0;ze<l;ze++)n(ze,o[ze]),a[ze]||(a[ze]=new RegExp(o[ze]));e.parse=$e;function $e(L,Y){if((!Y||typeof Y!="object")&&(Y={loose:!!Y,includePrerelease:!1}),L instanceof Q)return L;if(typeof L!="string"||L.length>r)return null;var ue=Y.loose?a[C]:a[x];if(!ue.test(L))return null;try{return new Q(L,Y)}catch{return null}}e.valid=nt;function nt(L,Y){var ue=$e(L,Y);return ue?ue.version:null}e.clean=Je;function Je(L,Y){var ue=$e(L.trim().replace(/^[=v]+/,""),Y);return ue?ue.version:null}e.SemVer=Q;function Q(L,Y){if((!Y||typeof Y!="object")&&(Y={loose:!!Y,includePrerelease:!1}),L instanceof Q){if(L.loose===Y.loose)return L;L=L.version}else if(typeof L!="string")throw new TypeError("Invalid Version: "+L);if(L.length>r)throw new TypeError("version is longer than "+r+" characters");if(!(this instanceof Q))return new Q(L,Y);n("SemVer",L,Y),this.options=Y,this.loose=!!Y.loose;var ue=L.trim().match(Y.loose?a[C]:a[x]);if(!ue)throw new TypeError("Invalid Version: "+L);if(this.raw=L,this.major=+ue[1],this.minor=+ue[2],this.patch=+ue[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");ue[4]?this.prerelease=ue[4].split(".").map(function(Pe){if(/^[0-9]+$/.test(Pe)){var Ve=+Pe;if(Ve>=0&&Ve<i)return Ve}return Pe}):this.prerelease=[],this.build=ue[5]?ue[5].split("."):[],this.format()}Q.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},Q.prototype.toString=function(){return this.version},Q.prototype.compare=function(L){return n("SemVer.compare",this.version,this.options,L),L instanceof Q||(L=new Q(L,this.options)),this.compareMain(L)||this.comparePre(L)},Q.prototype.compareMain=function(L){return L instanceof Q||(L=new Q(L,this.options)),Et(this.major,L.major)||Et(this.minor,L.minor)||Et(this.patch,L.patch)},Q.prototype.comparePre=function(L){if(L instanceof Q||(L=new Q(L,this.options)),this.prerelease.length&&!L.prerelease.length)return-1;if(!this.prerelease.length&&L.prerelease.length)return 1;if(!this.prerelease.length&&!L.prerelease.length)return 0;var Y=0;do{var ue=this.prerelease[Y],Pe=L.prerelease[Y];if(n("prerelease compare",Y,ue,Pe),ue===void 0&&Pe===void 0)return 0;if(Pe===void 0)return 1;if(ue===void 0)return-1;if(ue===Pe)continue;return Et(ue,Pe)}while(++Y)},Q.prototype.inc=function(L,Y){switch(L){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",Y);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",Y);break;case"prepatch":this.prerelease.length=0,this.inc("patch",Y),this.inc("pre",Y);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",Y),this.inc("pre",Y);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var ue=this.prerelease.length;--ue>=0;)typeof this.prerelease[ue]=="number"&&(this.prerelease[ue]++,ue=-2);ue===-1&&this.prerelease.push(0)}Y&&(this.prerelease[0]===Y?isNaN(this.prerelease[1])&&(this.prerelease=[Y,0]):this.prerelease=[Y,0]);break;default:throw new Error("invalid increment argument: "+L)}return this.format(),this.raw=this.version,this},e.inc=Ie;function Ie(L,Y,ue,Pe){typeof ue=="string"&&(Pe=ue,ue=void 0);try{return new Q(L,ue).inc(Y,Pe).version}catch{return null}}e.diff=Ne;function Ne(L,Y){if(dt(L,Y))return null;var ue=$e(L),Pe=$e(Y),Ve="";if(ue.prerelease.length||Pe.prerelease.length){Ve="pre";var ot="prerelease"}for(var et in ue)if((et==="major"||et==="minor"||et==="patch")&&ue[et]!==Pe[et])return Ve+et;return ot}e.compareIdentifiers=Et;var ht=/^[0-9]+$/;function Et(L,Y){var ue=ht.test(L),Pe=ht.test(Y);return ue&&Pe&&(L=+L,Y=+Y),L===Y?0:ue&&!Pe?-1:Pe&&!ue?1:L<Y?-1:1}e.rcompareIdentifiers=U;function U(L,Y){return Et(Y,L)}e.major=F;function F(L,Y){return new Q(L,Y).major}e.minor=be;function be(L,Y){return new Q(L,Y).minor}e.patch=Be;function Be(L,Y){return new Q(L,Y).patch}e.compare=Le;function Le(L,Y,ue){return new Q(L,ue).compare(new Q(Y,ue))}e.compareLoose=Qe;function Qe(L,Y){return Le(L,Y,!0)}e.rcompare=pt;function pt(L,Y,ue){return Le(Y,L,ue)}e.sort=K;function K(L,Y){return L.sort(function(ue,Pe){return e.compare(ue,Pe,Y)})}e.rsort=fe;function fe(L,Y){return L.sort(function(ue,Pe){return e.rcompare(ue,Pe,Y)})}e.gt=it;function it(L,Y,ue){return Le(L,Y,ue)>0}e.lt=Ze;function Ze(L,Y,ue){return Le(L,Y,ue)<0}e.eq=dt;function dt(L,Y,ue){return Le(L,Y,ue)===0}e.neq=wt;function wt(L,Y,ue){return Le(L,Y,ue)!==0}e.gte=vt;function vt(L,Y,ue){return Le(L,Y,ue)>=0}e.lte=en;function en(L,Y,ue){return Le(L,Y,ue)<=0}e.cmp=an;function an(L,Y,ue,Pe){switch(Y){case"===":return typeof L=="object"&&(L=L.version),typeof ue=="object"&&(ue=ue.version),L===ue;case"!==":return typeof L=="object"&&(L=L.version),typeof ue=="object"&&(ue=ue.version),L!==ue;case"":case"=":case"==":return dt(L,ue,Pe);case"!=":return wt(L,ue,Pe);case">":return it(L,ue,Pe);case">=":return vt(L,ue,Pe);case"<":return Ze(L,ue,Pe);case"<=":return en(L,ue,Pe);default:throw new TypeError("Invalid operator: "+Y)}}e.Comparator=jt;function jt(L,Y){if((!Y||typeof Y!="object")&&(Y={loose:!!Y,includePrerelease:!1}),L instanceof jt){if(L.loose===!!Y.loose)return L;L=L.value}if(!(this instanceof jt))return new jt(L,Y);n("comparator",L,Y),this.options=Y,this.loose=!!Y.loose,this.parse(L),this.semver===ie?this.value="":this.value=this.operator+this.semver.version,n("comp",this)}var ie={};jt.prototype.parse=function(L){var Y=this.options.loose?a[he]:a[ve],ue=L.match(Y);if(!ue)throw new TypeError("Invalid comparator: "+L);this.operator=ue[1],this.operator==="="&&(this.operator=""),ue[2]?this.semver=new Q(ue[2],this.options.loose):this.semver=ie},jt.prototype.toString=function(){return this.value},jt.prototype.test=function(L){return n("Comparator.test",L,this.options.loose),this.semver===ie?!0:(typeof L=="string"&&(L=new Q(L,this.options)),an(L,this.operator,this.semver,this.options))},jt.prototype.intersects=function(L,Y){if(!(L instanceof jt))throw new TypeError("a Comparator is required");(!Y||typeof Y!="object")&&(Y={loose:!!Y,includePrerelease:!1});var ue;if(this.operator==="")return ue=new ye(L.value,Y),Vm(this.value,ue,Y);if(L.operator==="")return ue=new ye(this.value,Y),Vm(L.semver,ue,Y);var Pe=(this.operator===">="||this.operator===">")&&(L.operator===">="||L.operator===">"),Ve=(this.operator==="<="||this.operator==="<")&&(L.operator==="<="||L.operator==="<"),ot=this.semver.version===L.semver.version,et=(this.operator===">="||this.operator==="<=")&&(L.operator===">="||L.operator==="<="),ut=an(this.semver,"<",L.semver,Y)&&(this.operator===">="||this.operator===">")&&(L.operator==="<="||L.operator==="<"),on=an(this.semver,">",L.semver,Y)&&(this.operator==="<="||this.operator==="<")&&(L.operator===">="||L.operator===">");return Pe||Ve||ot&&et||ut||on},e.Range=ye;function ye(L,Y){if((!Y||typeof Y!="object")&&(Y={loose:!!Y,includePrerelease:!1}),L instanceof ye)return L.loose===!!Y.loose&&L.includePrerelease===!!Y.includePrerelease?L:new ye(L.raw,Y);if(L instanceof jt)return new ye(L.value,Y);if(!(this instanceof ye))return new ye(L,Y);if(this.options=Y,this.loose=!!Y.loose,this.includePrerelease=!!Y.includePrerelease,this.raw=L,this.set=L.split(/\s*\|\|\s*/).map(function(ue){return this.parseRange(ue.trim())},this).filter(function(ue){return ue.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+L);this.format()}ye.prototype.format=function(){return this.range=this.set.map(function(L){return L.join(" ").trim()}).join("||").trim(),this.range},ye.prototype.toString=function(){return this.range},ye.prototype.parseRange=function(L){var Y=this.options.loose;L=L.trim();var ue=Y?a[pe]:a[ae];L=L.replace(ue,kI),n("hyphen replace",L),L=L.replace(a[we],X),n("comparator trim",L,a[we]),L=L.replace(a[P],O),L=L.replace(a[q],Z),L=L.split(/\s+/).join(" ");var Pe=Y?a[he]:a[ve],Ve=L.split(" ").map(function(ot){return lt(ot,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(Ve=Ve.filter(function(ot){return!!ot.match(Pe)})),Ve=Ve.map(function(ot){return new jt(ot,this.options)},this),Ve},ye.prototype.intersects=function(L,Y){if(!(L instanceof ye))throw new TypeError("a Range is required");return this.set.some(function(ue){return ue.every(function(Pe){return L.set.some(function(Ve){return Ve.every(function(ot){return Pe.intersects(ot,Y)})})})})},e.toComparators=Ue;function Ue(L,Y){return new ye(L,Y).set.map(function(ue){return ue.map(function(Pe){return Pe.value}).join(" ").trim().split(" ")})}function lt(L,Y){return n("comp",L,Y),L=Ui(L,Y),n("caret",L),L=qn(L,Y),n("tildes",L),L=vr(L,Y),n("xrange",L),L=go(L,Y),n("stars",L),L}function st(L){return!L||L.toLowerCase()==="x"||L==="*"}function qn(L,Y){return L.trim().split(/\s+/).map(function(ue){return Ur(ue,Y)}).join(" ")}function Ur(L,Y){var ue=Y.loose?a[H]:a[B];return L.replace(ue,function(Pe,Ve,ot,et,ut){n("tilde",L,Pe,Ve,ot,et,ut);var on;return st(Ve)?on="":st(ot)?on=">="+Ve+".0.0 <"+(+Ve+1)+".0.0":st(et)?on=">="+Ve+"."+ot+".0 <"+Ve+"."+(+ot+1)+".0":ut?(n("replaceTilde pr",ut),on=">="+Ve+"."+ot+"."+et+"-"+ut+" <"+Ve+"."+(+ot+1)+".0"):on=">="+Ve+"."+ot+"."+et+" <"+Ve+"."+(+ot+1)+".0",n("tilde return",on),on})}function Ui(L,Y){return L.trim().split(/\s+/).map(function(ue){return mo(ue,Y)}).join(" ")}function mo(L,Y){n("caret",L,Y);var ue=Y.loose?a[G]:a[ne];return L.replace(ue,function(Pe,Ve,ot,et,ut){n("caret",L,Pe,Ve,ot,et,ut);var on;return st(Ve)?on="":st(ot)?on=">="+Ve+".0.0 <"+(+Ve+1)+".0.0":st(et)?Ve==="0"?on=">="+Ve+"."+ot+".0 <"+Ve+"."+(+ot+1)+".0":on=">="+Ve+"."+ot+".0 <"+(+Ve+1)+".0.0":ut?(n("replaceCaret pr",ut),Ve==="0"?ot==="0"?on=">="+Ve+"."+ot+"."+et+"-"+ut+" <"+Ve+"."+ot+"."+(+et+1):on=">="+Ve+"."+ot+"."+et+"-"+ut+" <"+Ve+"."+(+ot+1)+".0":on=">="+Ve+"."+ot+"."+et+"-"+ut+" <"+(+Ve+1)+".0.0"):(n("no pr"),Ve==="0"?ot==="0"?on=">="+Ve+"."+ot+"."+et+" <"+Ve+"."+ot+"."+(+et+1):on=">="+Ve+"."+ot+"."+et+" <"+Ve+"."+(+ot+1)+".0":on=">="+Ve+"."+ot+"."+et+" <"+(+Ve+1)+".0.0"),n("caret return",on),on})}function vr(L,Y){return n("replaceXRanges",L,Y),L.split(/\s+/).map(function(ue){return Js(ue,Y)}).join(" ")}function Js(L,Y){L=L.trim();var ue=Y.loose?a[N]:a[A];return L.replace(ue,function(Pe,Ve,ot,et,ut,on){n("xRange",L,Pe,Ve,ot,et,ut,on);var Ln=st(ot),wi=Ln||st(et),Ss=wi||st(ut),ii=Ss;return Ve==="="&&ii&&(Ve=""),Ln?Ve===">"||Ve==="<"?Pe="<0.0.0":Pe="*":Ve&&ii?(wi&&(et=0),ut=0,Ve===">"?(Ve=">=",wi?(ot=+ot+1,et=0,ut=0):(et=+et+1,ut=0)):Ve==="<="&&(Ve="<",wi?ot=+ot+1:et=+et+1),Pe=Ve+ot+"."+et+"."+ut):wi?Pe=">="+ot+".0.0 <"+(+ot+1)+".0.0":Ss&&(Pe=">="+ot+"."+et+".0 <"+ot+"."+(+et+1)+".0"),n("xRange return",Pe),Pe})}function go(L,Y){return n("replaceStars",L,Y),L.trim().replace(a[j],"")}function kI(L,Y,ue,Pe,Ve,ot,et,ut,on,Ln,wi,Ss,ii){return st(ue)?Y="":st(Pe)?Y=">="+ue+".0.0":st(Ve)?Y=">="+ue+"."+Pe+".0":Y=">="+Y,st(on)?ut="":st(Ln)?ut="<"+(+on+1)+".0.0":st(wi)?ut="<"+on+"."+(+Ln+1)+".0":Ss?ut="<="+on+"."+Ln+"."+wi+"-"+Ss:ut="<="+ut,(Y+" "+ut).trim()}ye.prototype.test=function(L){if(!L)return!1;typeof L=="string"&&(L=new Q(L,this.options));for(var Y=0;Y<this.set.length;Y++)if(AI(this.set[Y],L,this.options))return!0;return!1};function AI(L,Y,ue){for(var Pe=0;Pe<L.length;Pe++)if(!L[Pe].test(Y))return!1;if(Y.prerelease.length&&!ue.includePrerelease){for(Pe=0;Pe<L.length;Pe++)if(n(L[Pe].semver),L[Pe].semver!==ie&&L[Pe].semver.prerelease.length>0){var Ve=L[Pe].semver;if(Ve.major===Y.major&&Ve.minor===Y.minor&&Ve.patch===Y.patch)return!0}return!1}return!0}e.satisfies=Vm;function Vm(L,Y,ue){try{Y=new ye(Y,ue)}catch{return!1}return Y.test(L)}e.maxSatisfying=W;function W(L,Y,ue){var Pe=null,Ve=null;try{var ot=new ye(Y,ue)}catch{return null}return L.forEach(function(et){ot.test(et)&&(!Pe||Ve.compare(et)===-1)&&(Pe=et,Ve=new Q(Pe,ue))}),Pe}e.minSatisfying=ge;function ge(L,Y,ue){var Pe=null,Ve=null;try{var ot=new ye(Y,ue)}catch{return null}return L.forEach(function(et){ot.test(et)&&(!Pe||Ve.compare(et)===1)&&(Pe=et,Ve=new Q(Pe,ue))}),Pe}e.minVersion=Se;function Se(L,Y){L=new ye(L,Y);var ue=new Q("0.0.0");if(L.test(ue)||(ue=new Q("0.0.0-0"),L.test(ue)))return ue;ue=null;for(var Pe=0;Pe<L.set.length;++Pe){var Ve=L.set[Pe];Ve.forEach(function(ot){var et=new Q(ot.semver.version);switch(ot.operator){case">":et.prerelease.length===0?et.patch++:et.prerelease.push(0),et.raw=et.format();case"":case">=":(!ue||it(ue,et))&&(ue=et);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+ot.operator)}})}return ue&&L.test(ue)?ue:null}e.validRange=de;function de(L,Y){try{return new ye(L,Y).range||"*"}catch{return null}}e.ltr=Te;function Te(L,Y,ue){return Rt(L,Y,"<",ue)}e.gtr=$t;function $t(L,Y,ue){return Rt(L,Y,">",ue)}e.outside=Rt;function Rt(L,Y,ue,Pe){L=new Q(L,Pe),Y=new ye(Y,Pe);var Ve,ot,et,ut,on;switch(ue){case">":Ve=it,ot=en,et=Ze,ut=">",on=">=";break;case"<":Ve=Ze,ot=vt,et=it,ut="<",on="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Vm(L,Y,Pe))return!1;for(var Ln=0;Ln<Y.set.length;++Ln){var wi=Y.set[Ln],Ss=null,ii=null;if(wi.forEach(function(vo){vo.semver===ie&&(vo=new jt(">=0.0.0")),Ss=Ss||vo,ii=ii||vo,Ve(vo.semver,Ss.semver,Pe)?Ss=vo:et(vo.semver,ii.semver,Pe)&&(ii=vo)}),Ss.operator===ut||Ss.operator===on||(!ii.operator||ii.operator===ut)&&ot(L,ii.semver))return!1;if(ii.operator===on&&et(L,ii.semver))return!1}return!0}e.prerelease=Kt;function Kt(L,Y){var ue=$e(L,Y);return ue&&ue.prerelease.length?ue.prerelease:null}e.intersects=tn;function tn(L,Y,ue){return L=new ye(L,ue),Y=new ye(Y,ue),L.intersects(Y)}e.coerce=yn;function yn(L){if(L instanceof Q)return L;if(typeof L!="string")return null;var Y=L.match(a[$]);return Y==null?null:$e(Y[1]+"."+(Y[2]||"0")+"."+(Y[3]||"0"))}})(Vit,Hx);function Ia(t,e,n){return t.fields=e||[],t.fname=n,t}function Go(t){return t==null?null:t.fname}function va(t){return t==null?null:t.fields}function Rae(t){return t.length===1?Wit(t[0]):Git(t)}const Wit=t=>function(e){return e[t]},Git=t=>{const e=t.length;return function(n){for(let r=0;r<e;++r)n=n[t[r]];return n}};function Fe(t){throw Error(t)}function Qu(t){const e=[],n=t.length;let r=null,i=0,s="",a,o,l;t=t+"";function u(){e.push(s+t.substring(a,o)),s="",a=o+1}for(a=o=0;o<n;++o)if(l=t[o],l==="\\")s+=t.substring(a,o),s+=t.substring(++o,++o),a=o;else if(l===r)u(),r=null,i=-1;else{if(r)continue;a===i&&l==='"'||a===i&&l==="'"?(a=o+1,r=l):l==="."&&!i?o>a?u():a=o+1:l==="["?(o>a&&u(),i=a=o+1):l==="]"&&(i||Fe("Access path missing open bracket: "+t),i>0&&u(),i=0,a=o+1)}return i&&Fe("Access path missing closing bracket: "+t),r&&Fe("Access path missing closing quote: "+t),o>a&&(o++,u()),e}function oo(t,e,n){const r=Qu(t);return t=r.length===1?r[0]:t,Ia((n&&n.get||Rae)(r),[t],e||t)}const v2=oo("id"),Lu=Ia(t=>t,[],"identity"),Oae=Ia(()=>0,[],"zero"),nN=Ia(()=>1,[],"one"),jd=Ia(()=>!0,[],"true"),vc=Ia(()=>!1,[],"false");function Hit(t,e,n){const r=[e].concat([].slice.call(n));console[t].apply(console,r)}const Fae=0,xB=1,wB=2,NT=3,_B=4;function SB(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Hit,r=t||Fae;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=xB&&n(e||"error","ERROR",arguments),this},warn(){return r>=wB&&n(e||"warn","WARN",arguments),this},info(){return r>=NT&&n(e||"log","INFO",arguments),this},debug(){return r>=_B&&n(e||"log","DEBUG",arguments),this}}}var je=Array.isArray;function Gt(t){return t===Object(t)}const Yj=t=>t!=="__proto__";function jit(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=qit(r.signals,i.signals);else{const a=s==="legend"?{layout:1}:s==="style"?!0:null;CB(r,s,i[s],a)}return r},{})}function CB(t,e,n,r){if(!Yj(e))return;let i,s;if(Gt(n)&&!je(n)){s=Gt(t[e])?t[e]:t[e]={};for(i in n)r&&(r===!0||r[i])?CB(s,i,n[i]):Yj(i)&&(s[i]=n[i])}else t[e]=n}function qit(t,e){if(t==null)return e;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return e.forEach(i),t.forEach(i),r}function Cn(t){return t[t.length-1]}function Yr(t){return t==null||t===""?null:+t}const Lae=t=>e=>t*Math.exp(e),Pae=t=>e=>Math.log(t*e),zae=t=>e=>Math.sign(e)*Math.log1p(Math.abs(e/t)),Bae=t=>e=>Math.sign(e)*Math.expm1(Math.abs(e))*t,$T=t=>e=>e<0?-Math.pow(-e,t):Math.pow(e,t);function rN(t,e,n,r){const i=n(t[0]),s=n(Cn(t)),a=(s-i)*e;return[r(i-a),r(s-a)]}function Uae(t,e){return rN(t,e,Yr,Lu)}function Vae(t,e){var n=Math.sign(t[0]);return rN(t,e,Pae(n),Lae(n))}function Wae(t,e,n){return rN(t,e,$T(n),$T(1/n))}function Xit(t,e,n){return rN(t,e,zae(n),Bae(n))}function iN(t,e,n,r,i){const s=r(t[0]),a=r(Cn(t)),o=e!=null?r(e):(s+a)/2;return[i(o+(s-o)*n),i(o+(a-o)*n)]}function EB(t,e,n){return iN(t,e,n,Yr,Lu)}function TB(t,e,n){const r=Math.sign(t[0]);return iN(t,e,n,Pae(r),Lae(r))}function IT(t,e,n,r){return iN(t,e,n,$T(r),$T(1/r))}function Yit(t,e,n,r){return iN(t,e,n,zae(r),Bae(r))}function Kit(t){return 1+~~(new Date(t).getMonth()/3)}function Zit(t){return 1+~~(new Date(t).getUTCMonth()/3)}function qt(t){return t!=null?je(t)?t:[t]:[]}function Jit(t,e,n){let r=t[0],i=t[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-e?[e,n]:[r=Math.min(Math.max(r,e),n-s),r+s]}function bn(t){return typeof t=="function"}const Qit="descending";function kB(t,e,n){n=n||{},e=qt(e)||[];const r=[],i=[],s={},a=n.comparator||est;return qt(t).forEach((o,l)=>{o!=null&&(r.push(e[l]===Qit?-1:1),i.push(o=bn(o)?o:oo(o,null,n)),(va(o)||[]).forEach(u=>s[u]=1))}),i.length===0?null:Ia(a(i,r),Object.keys(s))}const AB=(t,e)=>(t<e||t==null)&&e!=null?-1:(t>e||e==null)&&t!=null?1:(e=e instanceof Date?+e:e,(t=t instanceof Date?+t:t)!==t&&e===e?-1:e!==e&&t===t?1:0),est=(t,e)=>t.length===1?tst(t[0],e[0]):nst(t,e,t.length),tst=(t,e)=>function(n,r){return AB(t(n),t(r))*e},nst=(t,e,n)=>(e.push(0),function(r,i){let s,a=0,o=-1;for(;a===0&&++o<n;)s=t[o],a=AB(s(r),s(i));return a*e[o]});function Pu(t){return bn(t)?t:()=>t}function MB(t,e){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(e(r),n=null),t)}}function On(t){for(let e,n,r=1,i=arguments.length;r<i;++r){e=arguments[r];for(n in e)t[n]=e[n]}return t}function rst(t,e){let n=0,r,i,s,a;if(t&&(r=t.length))if(e==null){for(i=t[n];n<r&&(i==null||i!==i);i=t[++n]);for(s=a=i;n<r;++n)i=t[n],i!=null&&(i<s&&(s=i),i>a&&(a=i))}else{for(i=e(t[n]);n<r&&(i==null||i!==i);i=e(t[++n]));for(s=a=i;n<r;++n)i=e(t[n]),i!=null&&(i<s&&(s=i),i>a&&(a=i))}return[s,a]}function Gae(t,e){const n=t.length;let r=-1,i,s,a,o,l;if(e==null){for(;++r<n;)if(s=t[r],s!=null&&s>=s){i=a=s;break}if(r===n)return[-1,-1];for(o=l=r;++r<n;)s=t[r],s!=null&&(i>s&&(i=s,o=r),a<s&&(a=s,l=r))}else{for(;++r<n;)if(s=e(t[r],r,t),s!=null&&s>=s){i=a=s;break}if(r===n)return[-1,-1];for(o=l=r;++r<n;)s=e(t[r],r,t),s!=null&&(i>s&&(i=s,o=r),a<s&&(a=s,l=r))}return[o,l]}const ist=Object.prototype.hasOwnProperty;function Sl(t,e){return ist.call(t,e)}const gC={};function zy(t){let e={},n;function r(s){return Sl(e,s)&&e[s]!==gC}const i={size:0,empty:0,object:e,has:r,get(s){return r(s)?e[s]:void 0},set(s,a){return r(s)||(++i.size,e[s]===gC&&--i.empty),e[s]=a,this},delete(s){return r(s)&&(--i.size,++i.empty,e[s]=gC),this},clear(){i.size=i.empty=0,i.object=e={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let a=0;for(const o in e){const l=e[o];l!==gC&&(!n||!n(l))&&(s[o]=l,++a)}i.size=a,i.empty=0,i.object=e=s}};return t&&Object.keys(t).forEach(s=>{i.set(s,t[s])}),i}function sst(t,e,n,r,i,s){if(!n&&n!==0)return s;const a=+n;let o=t[0],l=Cn(t),u;l<o&&(u=o,o=l,l=u),u=Math.abs(e-o);const c=Math.abs(l-e);return u<c&&u<=a?r:c<=a?i:s}function tt(t,e,n){const r=t.prototype=Object.create(e.prototype);return Object.defineProperty(r,"constructor",{value:t,writable:!0,enumerable:!0,configurable:!0}),On(r,n)}function ast(t,e,n,r){let i=e[0],s=e[e.length-1],a;return i>s&&(a=i,i=s,s=a),n=n===void 0||n,r=r===void 0||r,(n?i<=t:i<t)&&(r?t<=s:t<s)}function By(t){return typeof t=="boolean"}function ya(t){return Object.prototype.toString.call(t)==="[object Date]"}function ost(t){return t&&bn(t[Symbol.iterator])}function ei(t){return typeof t=="number"}function Hae(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Bt(t){return typeof t=="string"}function NB(t,e,n){t&&(t=e?qt(t).map(o=>o.replace(/\\(.)/g,"$1")):qt(t));const r=t&&t.length,i=n&&n.get||Rae,s=o=>i(e?[o]:Qu(o));let a;if(!r)a=function(){return""};else if(r===1){const o=s(t[0]);a=function(l){return""+o(l)}}else{const o=t.map(s);a=function(l){let u=""+o[0](l),c=0;for(;++c<r;)u+="|"+o[c](l);return u}}return Ia(a,t,"key")}function lst(t,e){const n=t[0],r=Cn(t),i=+e;return i?i===1?r:n+i*(r-n):n}const ust=1e4;function cst(t){t=+t||ust;let e,n,r;const i=()=>{e={},n={},r=0},s=(a,o)=>(++r>t&&(n=e,e={},r=1),e[a]=o);return i(),{clear:i,has:a=>Sl(e,a)||Sl(n,a),get:a=>Sl(e,a)?e[a]:Sl(n,a)?s(a,n[a]):void 0,set:(a,o)=>Sl(e,a)?e[a]=o:s(a,o)}}function jae(t,e,n,r){const i=e.length,s=n.length;if(!s)return e;if(!i)return n;const a=r||new e.constructor(i+s);let o=0,l=0,u=0;for(;o<i&&l<s;++u)a[u]=t(e[o],n[l])>0?n[l++]:e[o++];for(;o<i;++o,++u)a[u]=e[o];for(;l<s;++l,++u)a[u]=n[l];return a}function S1(t,e){let n="";for(;--e>=0;)n+=t;return n}function qae(t,e,n,r){const i=n||" ",s=t+"",a=e-s.length;return a<=0?s:r==="left"?S1(i,a)+s:r==="center"?S1(i,~~(a/2))+s+S1(i,Math.ceil(a/2)):s+S1(i,a)}function fst(t){return t&&Cn(t)-t[0]||0}function at(t){return je(t)?"["+t.map(at)+"]":Gt(t)||Bt(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function $B(t){return t==null||t===""?null:!t||t==="false"||t==="0"?!1:!!t}const dst=t=>ei(t)||ya(t)?t:Date.parse(t);function IB(t,e){return e=e||dst,t==null||t===""?null:e(t)}function DB(t){return t==null||t===""?null:t+""}function dn(t){const e={},n=t.length;for(let r=0;r<n;++r)e[t[r]]=!0;return e}function Xae(t,e,n,r){const i=r??"…",s=t+"",a=s.length,o=Math.max(0,e-i.length);return a<=e?s:n==="left"?i+s.slice(a-o):n==="center"?s.slice(0,Math.ceil(o/2))+i+s.slice(a-~~(o/2)):s.slice(0,o)+i}function Lf(t,e,n){if(t)if(e){const r=t.length;for(let i=0;i<r;++i){const s=e(t[i]);s&&n(s,i,t)}}else t.forEach(n)}function sN(t){var e=t||Lu,n=[],r={};return n.add=function(i){var s=e(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=function(i){var s=e(i),a;return r[s]&&(r[s]=0,(a=n.indexOf(i))>=0&&n.splice(a,1)),n},n}var Yae=Symbol("vega_id"),hst=1;function aN(t){return!!(t&&Nt(t))}function Nt(t){return t[Yae]}function Kae(t,e){return t[Yae]=e,t}function Nr(t){var e=t===Object(t)?t:{data:t};return Nt(e)?e:Kae(e,hst++)}function RB(t){return OB(t,Nr({}))}function OB(t,e){for(var n in t)e[n]=t[n];return e}function Zae(t,e){return Kae(e,Nt(t))}function Jae(t){return t&&t.constructor===Uy}function Uy(){var t=[],e=[],n=[],r=[],i=[],s=!1;return{constructor:Uy,insert:function(a){for(var o=qt(a),l=0,u=o.length;l<u;++l)t.push(o[l]);return this},remove:function(a){for(var o=bn(a)?r:e,l=qt(a),u=0,c=l.length;u<c;++u)o.push(l[u]);return this},modify:function(a,o,l){var u={field:o,value:Pu(l)};return bn(a)?(u.filter=a,i.push(u)):(u.tuple=a,n.push(u)),this},encode:function(a,o){return bn(a)?i.push({filter:a,field:o}):n.push({tuple:a,field:o}),this},reflow:function(){return s=!0,this},pulse:function(a,o){var l={},u={},c,f,d,h,p,m;for(c=0,f=o.length;c<f;++c)l[Nt(o[c])]=1;for(c=0,f=e.length;c<f;++c)p=e[c],l[Nt(p)]=-1;for(c=0,f=r.length;c<f;++c)h=r[c],o.forEach(function(v){h(v)&&(l[Nt(v)]=-1)});for(c=0,f=t.length;c<f;++c)p=t[c],m=Nt(p),l[m]?l[m]=1:a.add.push(Nr(t[c]));for(c=0,f=o.length;c<f;++c)p=o[c],l[Nt(p)]<0&&a.rem.push(p);function g(v,y,b){b?v[y]=b(v):a.encode=y,s||(u[Nt(v)]=v)}for(c=0,f=n.length;c<f;++c)d=n[c],p=d.tuple,h=d.field,m=l[Nt(p)],m>0&&(g(p,h,d.value),a.modifies(h));for(c=0,f=i.length;c<f;++c)d=i[c],h=d.filter,o.forEach(function(v){h(v)&&l[Nt(v)]>0&&g(v,d.field,d.value)}),a.modifies(d.field);if(s)a.mod=e.length||r.length?o.filter(function(v){return l[Nt(v)]>0}):o.slice();else for(m in u)a.mod.push(u[m]);return a}}}var oN="_:mod:_";function lN(){Object.defineProperty(this,oN,{writable:!0,value:{}})}var FB=lN.prototype;FB.set=function(t,e,n,r){var i=this,s=i[t],a=i[oN];return e!=null&&e>=0?(s[e]!==n||r)&&(s[e]=n,a[e+":"+t]=-1,a[t]=-1):(s!==n||r)&&(i[t]=n,a[t]=je(n)?1+n.length:-1),i};FB.modified=function(t,e){var n=this[oN],r;if(arguments.length){if(je(t)){for(r=0;r<t.length;++r)if(n[t[r]])return!0;return!1}}else{for(r in n)if(n[r])return!0;return!1}return e!=null&&e>=0?e+1<n[t]||!!n[e+":"+t]:!!n[t]};FB.clear=function(){return this[oN]={},this};var pst=0,mst="pulse",gst=new lN,vst=1,yst=2;function Zn(t,e,n,r){this.id=++pst,this.value=t,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,e&&(this._update=e),n&&this.parameters(n,r)}var qd=Zn.prototype;qd.targets=function(){return this._targets||(this._targets=sN(v2))};qd.set=function(t){return this.value!==t?(this.value=t,1):0};function Qae(t){return function(e){var n=this.flags;return arguments.length===0?!!(n&t):(this.flags=e?n|t:n&~t,this)}}qd.skip=Qae(vst);qd.modified=Qae(yst);qd.parameters=function(t,e,n){e=e!==!1;var r=this,i=r._argval=r._argval||new lN,s=r._argops=r._argops||[],a=[],o,l,u,c;function f(d,h,p){p instanceof Zn?(p!==r&&(e&&p.targets().add(r),a.push(p)),s.push({op:p,name:d,index:h})):i.set(d,h,p)}for(o in t)if(l=t[o],o===mst)qt(l).forEach(function(d){d instanceof Zn?d!==r&&(d.targets().add(r),a.push(d)):Fe("Pulse parameters must be operator instances.")}),r.source=l;else if(je(l))for(i.set(o,-1,Array(u=l.length)),c=0;c<u;++c)f(o,c,l[c]);else f(o,-1,l);return this.marshall().clear(),n&&(s.initonly=!0),a};qd.marshall=function(t){var e=this._argval||gst,n=this._argops,r,i,s,a,o;if(n){for(i=0,s=n.length;i<s;++i)r=n[i],a=r.op,o=a.modified()&&a.stamp===t,e.set(r.name,r.index,a.value,o);if(n.initonly){for(i=0;i<s;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return e};qd.evaluate=function(t){var e=this._update;if(e){var n=this.marshall(t.stamp),r=e.call(this,n,t);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return t.StopPropagation}};qd.run=function(t){if(t.stamp<=this.stamp)return t.StopPropagation;var e;return this.skip()?(this.skip(!1),e=0):e=this.evaluate(t),this.stamp=t.stamp,this.pulse=e||t};function bst(t,e,n,r){var i=1,s;return t instanceof Zn?s=t:t&&t.prototype instanceof Zn?s=new t:bn(t)?s=new Zn(null,t):(i=0,s=new Zn(t,e)),this.rank(s),i&&(r=n,n=e),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function xst(t,e){var n=t.rank,r,i;for(r=0,i=e.length;r<i;++r)if(n<e[r].rank){this.rerank(t);return}}var wst=0;function uN(t,e,n){this.id=++wst,this.value=null,n&&(this.receive=n),t&&(this._filter=t),e&&(this._apply=e)}function Md(t,e,n){return new uN(t,e,n)}var jl=uN.prototype;jl._filter=jd;jl._apply=Lu;jl.targets=function(){return this._targets||(this._targets=sN(v2))};jl.consume=function(t){return arguments.length?(this._consume=!!t,this):!!this._consume};jl.receive=function(t){if(this._filter(t)){for(var e=this.value=this._apply(t),n=this._targets,r=n?n.length:0,i=0;i<r;++i)n[i].receive(e);this._consume&&(t.preventDefault(),t.stopPropagation())}};jl.filter=function(t){var e=Md(t);return this.targets().add(e),e};jl.apply=function(t){var e=Md(null,t);return this.targets().add(e),e};jl.merge=function(){var t=Md();this.targets().add(t);for(var e=0,n=arguments.length;e<n;++e)arguments[e].targets().add(t);return t};jl.throttle=function(t){var e=-1;return this.filter(function(){var n=Date.now();return n-e>t?(e=n,1):0})};jl.debounce=function(t){var e=Md();return this.targets().add(Md(null,null,MB(t,function(n){var r=n.dataflow;e.receive(n),r&&r.run&&r.run()}))),e};jl.between=function(t,e){var n=!1;return t.targets().add(Md(null,null,function(){n=!0})),e.targets().add(Md(null,null,function(){n=!1})),this.filter(function(){return n})};function _st(t,e,n,r){var i=this,s=Md(n,r),a=function(c){c.dataflow=i;try{s.receive(c)}catch(f){i.error(f)}finally{i.run()}},o;typeof t=="string"&&typeof document<"u"?o=document.querySelectorAll(t):o=qt(t);for(var l=0,u=o.length;l<u;++l)o[l].addEventListener(e,a);return s}var Sst=/^([A-Za-z]+:)?\/\//,Kj="file://";function cN(t){return{options:t||{},sanitize:Est,load:Cst,file:kst,http:Tst}}function Cst(t,e){var n=this;return n.sanitize(t,e).then(function(r){var i=r.href;return r.localFile?n.file(i):n.http(i,e)})}function Est(t,e){return e=On({},this.options,e),new Promise(function(n,r){var i={href:null},s,a,o,l;if(t==null||typeof t!="string"){r("Sanitize failure, invalid URI: "+at(t));return}a=Sst.test(t),(l=e.baseURL)&&!a&&(!qD(t,"/")&&l[l.length-1]!=="/"&&(t="/"+t),t=l+t),o=(s=qD(t,Kj))||e.mode==="file"||e.mode!=="http"&&!a&&eoe(),s?t=t.slice(Kj.length):qD(t,"//")&&(e.defaultProtocol==="file"?(t=t.slice(2),o=!0):t=(e.defaultProtocol||"http")+":"+t),Object.defineProperty(i,"localFile",{value:!!o}),i.href=t,e.target&&(i.target=e.target+""),n(i)})}function Tst(t,e){return Ast(t,On({},this.options.http,e)).then(function(n){if(!n.ok)throw n.status+""+n.statusText;return n.text()})}function kst(t){return new Promise(function(e,n){var r=eoe();r?r.readFile(t,function(i,s){i?n(i):e(s)}):n("No file system access for "+t)})}function Ast(t,e){var n=typeof fetch=="function"?fetch:require("node-fetch");return n?n(t,e):Promise.reject("No fetch method available.")}function eoe(){var t=typeof require=="function"&&require("fs");return t&&bn(t.readFile)?t:null}function qD(t,e){return t==null?!1:t.lastIndexOf(e,0)===0}var rL={boolean:$B,integer:Yr,number:Yr,date:IB,string:DB,unknown:Lu},vC=[$st,Dst,roe,Ist],Mst=["boolean","integer","number","date"];function toe(t,e){if(!t||!t.length)return"unknown";var n,r,i,s=0,a=t.length,o=vC.length,l=vC.map(function(u,c){return c+1});for(r=0,a=t.length;r<a;++r)for(n=e?t[r][e]:t[r],i=0;i<o;++i)if(l[i]&&Nst(n)&&!vC[i](n)&&(l[i]=0,++s,s===vC.length))return"string";return s=l.reduce(function(u,c){return u===0?c:u},0)-1,Mst[s]}function noe(t,e){return e.reduce(function(n,r){return n[r]=toe(t,r),n},{})}function Nst(t){return t!=null&&t===t}function $st(t){return t==="true"||t==="false"||t===!0||t===!1}function Ist(t){return!isNaN(Date.parse(t))}function roe(t){return!isNaN(+t)&&!(t instanceof Date)}function Dst(t){return roe(t)&&(t=+t)===~~t}var Zj={},XD={},YD=34,Pb=10,KD=13;function ioe(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function Rst(t,e){var n=ioe(t);return function(r,i){return e(n(r),i,t)}}function Jj(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var i in r)i in e||n.push(e[i]=i)}),n}function Qs(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function Ost(t){return t<0?"-"+Qs(-t,6):t>9999?"+"+Qs(t,6):Qs(t,4)}function Fst(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":Ost(t.getUTCFullYear())+"-"+Qs(t.getUTCMonth()+1,2)+"-"+Qs(t.getUTCDate(),2)+(i?"T"+Qs(e,2)+":"+Qs(n,2)+":"+Qs(r,2)+"."+Qs(i,3)+"Z":r?"T"+Qs(e,2)+":"+Qs(n,2)+":"+Qs(r,2)+"Z":n||e?"T"+Qs(e,2)+":"+Qs(n,2)+"Z":"")}function Lst(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,v){if(h)return h(g,v-1);p=g,h=d?Rst(g,d):ioe(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,v,y=p<=0,b=!1;f.charCodeAt(p-1)===Pb&&--p,f.charCodeAt(p-1)===KD&&--p;function x(){if(y)return XD;if(b)return b=!1,Zj;var S,C=m,_;if(f.charCodeAt(C)===YD){for(;m++<p&&f.charCodeAt(m)!==YD||f.charCodeAt(++m)===YD;);return(S=m)>=p?y=!0:(_=f.charCodeAt(m++))===Pb?b=!0:_===KD&&(b=!0,f.charCodeAt(m)===Pb&&++m),f.slice(C+1,S-1).replace(/""/g,'"')}for(;m<p;){if((_=f.charCodeAt(S=m++))===Pb)b=!0;else if(_===KD)b=!0,f.charCodeAt(m)===Pb&&++m;else if(_!==n)continue;return f.slice(C,S)}return y=!0,f.slice(C,p)}for(;(v=x())!==XD;){for(var w=[];v!==Zj&&v!==XD;)w.push(v),v=x();d&&(w=d(w,g++))==null||h.push(w)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(t)})}function a(f,d){return d==null&&(d=Jj(f)),[d.map(c).join(t)].concat(s(f,d)).join(`
`)}function o(f,d){return d==null&&(d=Jj(f)),s(f,d).join(`
`)}function l(f){return f.map(u).join(`
`)}function u(f){return f.map(c).join(t)}function c(f){return f==null?"":f instanceof Date?Fst(f):e.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:a,formatBody:o,formatRows:l,formatRow:u,formatValue:c}}function Qj(t){return function(e,n){var r={delimiter:t};return soe(e,n?On(n,r):r)}}function soe(t,e){return e.header&&(t=e.header.map(at).join(e.delimiter)+`
`+t),Lst(e.delimiter).parse(t+"")}function Pst(t){return typeof Buffer=="function"&&bn(Buffer.isBuffer)?Buffer.isBuffer(t):!1}function aoe(t,e){var n=e&&e.property?oo(e.property):Lu;return Gt(t)&&!Pst(t)?zst(n(t)):n(JSON.parse(t))}function zst(t,e){return e&&e.copy?JSON.parse(JSON.stringify(t)):t}function Bst(t){return t}function Ust(t){if(t==null)return Bst;var e,n,r=t.scale[0],i=t.scale[1],s=t.translate[0],a=t.translate[1];return function(o,l){l||(e=n=0);var u=2,c=o.length,f=new Array(c);for(f[0]=(e+=o[0])*r+s,f[1]=(n+=o[1])*i+a;u<c;)f[u]=o[u],++u;return f}}function Vst(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}function Wst(t,e){return typeof e=="string"&&(e=t.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(n){return eq(t,n)})}:eq(t,e)}function eq(t,e){var n=e.id,r=e.bbox,i=e.properties==null?{}:e.properties,s=ooe(t,e);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function ooe(t,e){var n=Ust(t.transform),r=t.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&Vst(f,p)}function s(c){return n(c)}function a(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function o(c){for(var f=a(c);f.length<4;)f.push(f[0]);return f}function l(c){return c.map(o)}function u(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(u)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=a(c.arcs);break;case"MultiLineString":d=c.arcs.map(a);break;case"Polygon":d=l(c.arcs);break;case"MultiPolygon":d=c.arcs.map(l);break;default:return null}return{type:f,coordinates:d}}return u(e)}function Gst(t,e){var n={},r={},i={},s=[],a=-1;e.forEach(function(u,c){var f=t.arcs[u<0?~u:u],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=e[++a],e[a]=u,e[c]=d)}),e.forEach(function(u){var c=o(u),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(u),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(u),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[u],r[h.start=f]=i[h.end=d]=h});function o(u){var c=t.arcs[u<0?~u:u],f=c[0],d;return t.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],u<0?[d,f]:[f,d]}function l(u,c){for(var f in u){var d=u[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return l(i,r),l(r,i),e.forEach(function(u){n[u<0?~u:u]||s.push([u])}),s}function Hst(t){return ooe(t,jst.apply(this,arguments))}function jst(t,e,n){var r,i,s;if(arguments.length>1)r=qst(t,e,n);else for(i=0,r=new Array(s=t.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:Gst(t,r)}}function qst(t,e,n){var r=[],i=[],s;function a(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function o(f){f.forEach(a)}function l(f){f.forEach(o)}function u(f){f.forEach(l)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":o(f.arcs);break;case"MultiLineString":case"Polygon":l(f.arcs);break;case"MultiPolygon":u(f.arcs);break}}return c(e),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}function Xst(t,e){var n,r,i;return t=aoe(t,e),n=e&&(i=e.feature)?Wst:e&&(i=e.mesh)?Hst:Fe("Missing TopoJSON feature or mesh parameter."),r=(r=t.objects[i])?n(t,r):Fe("Invalid TopoJSON object: "+i),r&&r.features||[r]}var wE={dsv:soe,csv:Qj(","),tsv:Qj("	"),json:aoe,topojson:Xst};function loe(t,e){return arguments.length>1?(wE[t]=e,this):wE.hasOwnProperty(t)?wE[t]:null}var ZD=new Date,JD=new Date;function Li(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=function(s){return t(s=new Date(+s)),s},i.ceil=function(s){return t(s=new Date(s-1)),e(s,1),t(s),s},i.round=function(s){var a=i(s),o=i.ceil(s);return s-a<o-s?a:o},i.offset=function(s,a){return e(s=new Date(+s),a==null?1:Math.floor(a)),s},i.range=function(s,a,o){var l=[],u;if(s=i.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return l;do l.push(u=new Date(+s)),e(s,o),t(s);while(u<s&&s<a);return l},i.filter=function(s){return Li(function(a){if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},function(a,o){if(a>=a)if(o<0)for(;++o<=0;)for(;e(a,-1),!s(a););else for(;--o>=0;)for(;e(a,1),!s(a););})},n&&(i.count=function(s,a){return ZD.setTime(+s),JD.setTime(+a),t(ZD),t(JD),Math.floor(n(ZD,JD))},i.every=function(s){return s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?function(a){return r(a)%s===0}:function(a){return i.count(0,a)%s===0}):i}),i}var DT=Li(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});DT.every=function(t){return t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Li(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):DT};const fN=DT;DT.range;var RT=1e3,$p=6e4,OT=36e5,uoe=864e5,coe=6048e5,foe=Li(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+e*RT)},function(t,e){return(e-t)/RT},function(t){return t.getUTCSeconds()});const dN=foe;foe.range;var doe=Li(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*RT)},function(t,e){t.setTime(+t+e*$p)},function(t,e){return(e-t)/$p},function(t){return t.getMinutes()});const hoe=doe;doe.range;var poe=Li(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*RT-t.getMinutes()*$p)},function(t,e){t.setTime(+t+e*OT)},function(t,e){return(e-t)/OT},function(t){return t.getHours()});const moe=poe;poe.range;var goe=Li(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*$p)/uoe},function(t){return t.getDate()-1});const hN=goe;goe.range;function mm(t){return Li(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,n){e.setDate(e.getDate()+n*7)},function(e,n){return(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*$p)/coe})}var pN=mm(0),FT=mm(1),Yst=mm(2),Kst=mm(3),D0=mm(4),Zst=mm(5),Jst=mm(6);pN.range;FT.range;Yst.range;Kst.range;D0.range;Zst.range;Jst.range;var voe=Li(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12},function(t){return t.getMonth()});const yoe=voe;voe.range;var LB=Li(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});LB.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:Li(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)})};const Ip=LB;LB.range;var boe=Li(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*$p)},function(t,e){return(e-t)/$p},function(t){return t.getUTCMinutes()});const xoe=boe;boe.range;var woe=Li(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*OT)},function(t,e){return(e-t)/OT},function(t){return t.getUTCHours()});const _oe=woe;woe.range;var Soe=Li(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/uoe},function(t){return t.getUTCDate()-1});const mN=Soe;Soe.range;function gm(t){return Li(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCDate(e.getUTCDate()+n*7)},function(e,n){return(n-e)/coe})}var gN=gm(0),LT=gm(1),Qst=gm(2),eat=gm(3),R0=gm(4),tat=gm(5),nat=gm(6);gN.range;LT.range;Qst.range;eat.range;R0.range;tat.range;nat.range;var Coe=Li(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12},function(t){return t.getUTCMonth()});const Eoe=Coe;Coe.range;var PB=Li(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});PB.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:Li(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})};const Dp=PB;PB.range;function QD(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function eR(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function zb(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function rat(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,a=t.shortDays,o=t.months,l=t.shortMonths,u=Bb(i),c=Ub(i),f=Bb(s),d=Ub(s),h=Bb(a),p=Ub(a),m=Bb(o),g=Ub(o),v=Bb(l),y=Ub(l),b={a:P,A:O,b:B,B:H,c:null,d:aq,e:aq,f:Tat,g:Fat,G:Pat,H:Sat,I:Cat,j:Eat,L:Toe,m:kat,M:Aat,p:te,q,Q:uq,s:cq,S:Mat,u:Nat,U:$at,V:Iat,w:Dat,W:Rat,x:null,X:null,y:Oat,Y:Lat,Z:zat,"%":lq},x={a:Z,A:ne,b:G,B:he,c:null,d:oq,e:oq,f:Wat,g:Qat,G:tot,H:Bat,I:Uat,j:Vat,L:Aoe,m:Gat,M:Hat,p:ve,q:we,Q:uq,s:cq,S:jat,u:qat,U:Xat,V:Yat,w:Kat,W:Zat,x:null,X:null,y:Jat,Y:eot,Z:not,"%":lq},w={a:T,A:k,b:M,B:A,c:N,d:iq,e:iq,f:bat,g:rq,G:nq,H:sq,I:sq,j:mat,L:yat,m:pat,M:gat,p:E,q:hat,Q:wat,s:_at,S:vat,u:lat,U:uat,V:cat,w:oat,W:fat,x:$,X:D,y:rq,Y:nq,Z:dat,"%":xat};b.x=S(n,b),b.X=S(r,b),b.c=S(e,b),x.x=S(n,x),x.X=S(r,x),x.c=S(e,x);function S(X,ae){return function(pe){var j=[],ze=-1,$e=0,nt=X.length,Je,Q,Ie;for(pe instanceof Date||(pe=new Date(+pe));++ze<nt;)X.charCodeAt(ze)===37&&(j.push(X.slice($e,ze)),(Q=tq[Je=X.charAt(++ze)])!=null?Je=X.charAt(++ze):Q=Je==="e"?" ":"0",(Ie=ae[Je])&&(Je=Ie(pe,Q)),j.push(Je),$e=ze+1);return j.push(X.slice($e,ze)),j.join("")}}function C(X,ae){return function(pe){var j=zb(1900,void 0,1),ze=_(j,X,pe+="",0),$e,nt;if(ze!=pe.length)return null;if("Q"in j)return new Date(j.Q);if("s"in j)return new Date(j.s*1e3+("L"in j?j.L:0));if(ae&&!("Z"in j)&&(j.Z=0),"p"in j&&(j.H=j.H%12+j.p*12),j.m===void 0&&(j.m="q"in j?j.q:0),"V"in j){if(j.V<1||j.V>53)return null;"w"in j||(j.w=1),"Z"in j?($e=eR(zb(j.y,0,1)),nt=$e.getUTCDay(),$e=nt>4||nt===0?LT.ceil($e):LT($e),$e=mN.offset($e,(j.V-1)*7),j.y=$e.getUTCFullYear(),j.m=$e.getUTCMonth(),j.d=$e.getUTCDate()+(j.w+6)%7):($e=QD(zb(j.y,0,1)),nt=$e.getDay(),$e=nt>4||nt===0?FT.ceil($e):FT($e),$e=hN.offset($e,(j.V-1)*7),j.y=$e.getFullYear(),j.m=$e.getMonth(),j.d=$e.getDate()+(j.w+6)%7)}else("W"in j||"U"in j)&&("w"in j||(j.w="u"in j?j.u%7:"W"in j?1:0),nt="Z"in j?eR(zb(j.y,0,1)).getUTCDay():QD(zb(j.y,0,1)).getDay(),j.m=0,j.d="W"in j?(j.w+6)%7+j.W*7-(nt+5)%7:j.w+j.U*7-(nt+6)%7);return"Z"in j?(j.H+=j.Z/100|0,j.M+=j.Z%100,eR(j)):QD(j)}}function _(X,ae,pe,j){for(var ze=0,$e=ae.length,nt=pe.length,Je,Q;ze<$e;){if(j>=nt)return-1;if(Je=ae.charCodeAt(ze++),Je===37){if(Je=ae.charAt(ze++),Q=w[Je in tq?ae.charAt(ze++):Je],!Q||(j=Q(X,pe,j))<0)return-1}else if(Je!=pe.charCodeAt(j++))return-1}return j}function E(X,ae,pe){var j=u.exec(ae.slice(pe));return j?(X.p=c[j[0].toLowerCase()],pe+j[0].length):-1}function T(X,ae,pe){var j=h.exec(ae.slice(pe));return j?(X.w=p[j[0].toLowerCase()],pe+j[0].length):-1}function k(X,ae,pe){var j=f.exec(ae.slice(pe));return j?(X.w=d[j[0].toLowerCase()],pe+j[0].length):-1}function M(X,ae,pe){var j=v.exec(ae.slice(pe));return j?(X.m=y[j[0].toLowerCase()],pe+j[0].length):-1}function A(X,ae,pe){var j=m.exec(ae.slice(pe));return j?(X.m=g[j[0].toLowerCase()],pe+j[0].length):-1}function N(X,ae,pe){return _(X,e,ae,pe)}function $(X,ae,pe){return _(X,n,ae,pe)}function D(X,ae,pe){return _(X,r,ae,pe)}function P(X){return a[X.getDay()]}function O(X){return s[X.getDay()]}function B(X){return l[X.getMonth()]}function H(X){return o[X.getMonth()]}function te(X){return i[+(X.getHours()>=12)]}function q(X){return 1+~~(X.getMonth()/3)}function Z(X){return a[X.getUTCDay()]}function ne(X){return s[X.getUTCDay()]}function G(X){return l[X.getUTCMonth()]}function he(X){return o[X.getUTCMonth()]}function ve(X){return i[+(X.getUTCHours()>=12)]}function we(X){return 1+~~(X.getUTCMonth()/3)}return{format:function(X){var ae=S(X+="",b);return ae.toString=function(){return X},ae},parse:function(X){var ae=C(X+="",!1);return ae.toString=function(){return X},ae},utcFormat:function(X){var ae=S(X+="",x);return ae.toString=function(){return X},ae},utcParse:function(X){var ae=C(X+="",!0);return ae.toString=function(){return X},ae}}}var tq={"-":"",_:" ",0:"0"},Pi=/^\s*\d+/,iat=/^%/,sat=/[\\^$*+?|[\]().{}]/g;function An(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function aat(t){return t.replace(sat,"\\$&")}function Bb(t){return new RegExp("^(?:"+t.map(aat).join("|")+")","i")}function Ub(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function oat(t,e,n){var r=Pi.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function lat(t,e,n){var r=Pi.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function uat(t,e,n){var r=Pi.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function cat(t,e,n){var r=Pi.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function fat(t,e,n){var r=Pi.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function nq(t,e,n){var r=Pi.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function rq(t,e,n){var r=Pi.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function dat(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function hat(t,e,n){var r=Pi.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function pat(t,e,n){var r=Pi.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function iq(t,e,n){var r=Pi.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function mat(t,e,n){var r=Pi.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function sq(t,e,n){var r=Pi.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function gat(t,e,n){var r=Pi.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function vat(t,e,n){var r=Pi.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function yat(t,e,n){var r=Pi.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function bat(t,e,n){var r=Pi.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function xat(t,e,n){var r=iat.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function wat(t,e,n){var r=Pi.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function _at(t,e,n){var r=Pi.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function aq(t,e){return An(t.getDate(),e,2)}function Sat(t,e){return An(t.getHours(),e,2)}function Cat(t,e){return An(t.getHours()%12||12,e,2)}function Eat(t,e){return An(1+hN.count(Ip(t),t),e,3)}function Toe(t,e){return An(t.getMilliseconds(),e,3)}function Tat(t,e){return Toe(t,e)+"000"}function kat(t,e){return An(t.getMonth()+1,e,2)}function Aat(t,e){return An(t.getMinutes(),e,2)}function Mat(t,e){return An(t.getSeconds(),e,2)}function Nat(t){var e=t.getDay();return e===0?7:e}function $at(t,e){return An(pN.count(Ip(t)-1,t),e,2)}function koe(t){var e=t.getDay();return e>=4||e===0?D0(t):D0.ceil(t)}function Iat(t,e){return t=koe(t),An(D0.count(Ip(t),t)+(Ip(t).getDay()===4),e,2)}function Dat(t){return t.getDay()}function Rat(t,e){return An(FT.count(Ip(t)-1,t),e,2)}function Oat(t,e){return An(t.getFullYear()%100,e,2)}function Fat(t,e){return t=koe(t),An(t.getFullYear()%100,e,2)}function Lat(t,e){return An(t.getFullYear()%1e4,e,4)}function Pat(t,e){var n=t.getDay();return t=n>=4||n===0?D0(t):D0.ceil(t),An(t.getFullYear()%1e4,e,4)}function zat(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+An(e/60|0,"0",2)+An(e%60,"0",2)}function oq(t,e){return An(t.getUTCDate(),e,2)}function Bat(t,e){return An(t.getUTCHours(),e,2)}function Uat(t,e){return An(t.getUTCHours()%12||12,e,2)}function Vat(t,e){return An(1+mN.count(Dp(t),t),e,3)}function Aoe(t,e){return An(t.getUTCMilliseconds(),e,3)}function Wat(t,e){return Aoe(t,e)+"000"}function Gat(t,e){return An(t.getUTCMonth()+1,e,2)}function Hat(t,e){return An(t.getUTCMinutes(),e,2)}function jat(t,e){return An(t.getUTCSeconds(),e,2)}function qat(t){var e=t.getUTCDay();return e===0?7:e}function Xat(t,e){return An(gN.count(Dp(t)-1,t),e,2)}function Moe(t){var e=t.getUTCDay();return e>=4||e===0?R0(t):R0.ceil(t)}function Yat(t,e){return t=Moe(t),An(R0.count(Dp(t),t)+(Dp(t).getUTCDay()===4),e,2)}function Kat(t){return t.getUTCDay()}function Zat(t,e){return An(LT.count(Dp(t)-1,t),e,2)}function Jat(t,e){return An(t.getUTCFullYear()%100,e,2)}function Qat(t,e){return t=Moe(t),An(t.getUTCFullYear()%100,e,2)}function eot(t,e){return An(t.getUTCFullYear()%1e4,e,4)}function tot(t,e){var n=t.getUTCDay();return t=n>=4||n===0?R0(t):R0.ceil(t),An(t.getUTCFullYear()%1e4,e,4)}function not(){return"+0000"}function lq(){return"%"}function uq(t){return+t}function cq(t){return Math.floor(+t/1e3)}var dg,zB,BB,UB,VB;Noe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Noe(t){return dg=rat(t),zB=dg.format,BB=dg.parse,UB=dg.utcFormat,VB=dg.utcParse,dg}function WB(t,e,n){e=e||{};var r=loe(e.type||"json");return r||Fe("Unknown data format type: "+e.type),t=r(t,e),e.parse&&rot(t,e.parse,n),t.hasOwnProperty("columns")&&delete t.columns,t}function rot(t,e,n){if(t.length){n=n||BB;var r=t.columns||Object.keys(t[0]),i,s,a,o,l,u,c;for(e==="auto"&&(e=noe(t,r)),r=Object.keys(e),i=r.map(function(f){var d=e[f],h,p;if(d&&(d.indexOf("date:")===0||d.indexOf("utc:")===0))return h=d.split(/:(.+)?/,2),p=h[1],(p[0]==="'"&&p[p.length-1]==="'"||p[0]==='"'&&p[p.length-1]==='"')&&(p=p.slice(1,-1)),h[0]==="utc"?VB(p):n(p);if(!rL[d])throw Error("Illegal format pattern: "+f+":"+d);return rL[d]}),o=0,u=t.length,c=r.length;o<u;++o)for(s=t[o],l=0;l<c;++l)a=r[l],s[a]=i[l](s[a])}}function iot(t,e,n){return this.pulse(t,this.changeset().insert(WB(e,n)))}function sot(t){var e,n,r=new Promise(function(i,s){e=function(){i(t)},n=s});return r.requests=0,r.done=function(){--r.requests===0&&t.runAfter(function(){t._pending=null;try{t.run(),t._pending?t._pending.then(e):e()}catch(i){n(i)}})},t._pending=r}function aot(t,e,n){var r=this,i=0,s=r._pending||sot(r);return s.requests+=1,r.loader().load(e,{context:"dataflow"}).then(function(a){return WB(a,n)},function(a){i=-1,r.error("Loading failed",e,a)}).catch(function(a){i=-2,r.error("Data ingestion failed",e,a)}).then(function(a){return r.pulse(t,r.changeset().remove(jd).insert(a||[])),s.done(),i})}var oot={skip:!0};function lot(t,e,n,r,i){var s=t instanceof Zn?cot:uot;return s(this,t,e,n,r,i),this}function uot(t,e,n,r,i,s){var a=On({},s,oot),o,l;bn(n)||(n=Pu(n)),r===void 0?o=function(u){t.touch(n(u))}:bn(r)?(l=new Zn(null,r,i,!1),o=function(u){var c,f=n(u);l.evaluate(u),Jae(c=l.value)?t.pulse(f,c,s):t.update(f,c,a)}):o=function(u){t.update(n(u),r,a)},e.apply(o)}function cot(t,e,n,r,i,s){var a,o;r===void 0?o=n:(a=bn(r)?r:Pu(r),r=n?function(l,u){var c=a(l,u);return n.skip()||(n.skip(c!==this.value).value=c),c}:a,o=new Zn(null,r,i,!1),o.modified(s&&s.force),o.rank=0,n&&(o.skip(!0),o.value=n.value,o.targets().add(n))),e.targets().add(o)}function fot(t){t.rank=++this._rank}function dot(t){for(var e=[t],n,r,i;e.length;)if(this.rank(n=e.pop()),r=n._targets)for(i=r.length;--i>=0;)e.push(n=r[i]),n===t&&Fe("Cycle detected in dataflow graph.")}var PT={},ec=1<<0,Xd=1<<1,pf=1<<2,hot=ec|Xd,$oe=ec|pf,O0=ec|Xd|pf,Ioe=1<<3,y2=1<<4,Doe=1<<5,Roe=1<<6;function Yd(t,e,n){this.dataflow=t,this.stamp=e??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}var Tr=Yd.prototype;Tr.StopPropagation=PT;Tr.ADD=ec;Tr.REM=Xd;Tr.MOD=pf;Tr.ADD_REM=hot;Tr.ADD_MOD=$oe;Tr.ALL=O0;Tr.REFLOW=Ioe;Tr.SOURCE=y2;Tr.NO_SOURCE=Doe;Tr.NO_FIELDS=Roe;Tr.fork=function(t){return new Yd(this.dataflow).init(this,t)};Tr.clone=function(){var t=this.fork(O0);return t.add=t.add.slice(),t.rem=t.rem.slice(),t.mod=t.mod.slice(),t.source&&(t.source=t.source.slice()),t.materialize(O0|y2)};Tr.addAll=function(){var t=this;return!this.source||this.source.length===this.add.length||(t=new Yd(this.dataflow).init(this),t.add=t.source),t};Tr.init=function(t,e){var n=this;return n.stamp=t.stamp,n.encode=t.encode,t.fields&&!(e&Roe)&&(n.fields=t.fields),e&ec?(n.addF=t.addF,n.add=t.add):(n.addF=null,n.add=[]),e&Xd?(n.remF=t.remF,n.rem=t.rem):(n.remF=null,n.rem=[]),e&pf?(n.modF=t.modF,n.mod=t.mod):(n.modF=null,n.mod=[]),e&Doe?(n.srcF=null,n.source=null):(n.srcF=t.srcF,n.source=t.source),n};Tr.runAfter=function(t){this.dataflow.runAfter(t)};Tr.changed=function(t){var e=t||O0;return e&ec&&this.add.length||e&Xd&&this.rem.length||e&pf&&this.mod.length};Tr.reflow=function(t){if(t)return this.fork(O0).reflow();var e=this.add.length,n=this.source&&this.source.length;return n&&n!==e&&(this.mod=this.source,e&&this.filter(pf,Ooe(this,ec))),this};Tr.modifies=function(t){var e=qt(t),n=this.fields||(this.fields={});return e.forEach(function(r){n[r]=!0}),this};Tr.modified=function(t){var e=this.fields;return this.mod.length&&e?arguments.length?je(t)?t.some(function(n){return e[n]}):e[t]:!!e:!1};Tr.filter=function(t,e){var n=this;return t&ec&&(n.addF=yC(n.addF,e)),t&Xd&&(n.remF=yC(n.remF,e)),t&pf&&(n.modF=yC(n.modF,e)),t&y2&&(n.srcF=yC(n.srcF,e)),n};function yC(t,e){return t?function(n,r){return t(n,r)&&e(n,r)}:e}Tr.materialize=function(t){t=t||O0;var e=this;return t&ec&&e.addF&&(e.add=tR(e.add,e.addF),e.addF=null),t&Xd&&e.remF&&(e.rem=tR(e.rem,e.remF),e.remF=null),t&pf&&e.modF&&(e.mod=tR(e.mod,e.modF),e.modF=null),t&y2&&e.srcF&&(e.source=e.source.filter(e.srcF),e.srcF=null),e};function tR(t,e){var n=[];return Lf(t,e,function(r){n.push(r)}),n}function Ooe(t,e){var n={};return t.visit(e,function(r){n[Nt(r)]=1}),function(r){return n[Nt(r)]?null:r}}Tr.visit=function(t,e){var n=this,r=e,i,s;return t&y2?(Lf(n.source,n.srcF,r),n):(t&ec&&Lf(n.add,n.addF,r),t&Xd&&Lf(n.rem,n.remF,r),t&pf&&Lf(n.mod,n.modF,r),t&Ioe&&(i=n.source)&&(s=n.add.length+n.mod.length,s===i.length||(s?Lf(i,Ooe(n,$oe),r):Lf(i,n.srcF,r))),n)};function GB(t,e,n,r){var i=this,s=0,a,o,l,u,c;for(this.dataflow=t,this.stamp=e,this.fields=null,this.encode=r||null,this.pulses=n,l=0,u=n.length;l<u;++l)if(a=n[l],a.stamp===e){if(a.fields){o=i.fields||(i.fields={});for(c in a.fields)o[c]=1}a.changed(i.ADD)&&(s|=i.ADD),a.changed(i.REM)&&(s|=i.REM),a.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}var Vy=tt(GB,Yd);Vy.fork=function(t){var e=new Yd(this.dataflow).init(this,t&this.NO_FIELDS);return t!==void 0&&(t&e.ADD&&this.visit(e.ADD,function(n){return e.add.push(n)}),t&e.REM&&this.visit(e.REM,function(n){return e.rem.push(n)}),t&e.MOD&&this.visit(e.MOD,function(n){return e.mod.push(n)})),e};Vy.changed=function(t){return this.changes&t};Vy.modified=function(t){var e=this,n=e.fields;return n&&e.changes&e.MOD?je(t)?t.some(function(r){return n[r]}):n[t]:0};Vy.filter=function(){Fe("MultiPulse does not support filtering.")};Vy.materialize=function(){Fe("MultiPulse does not support materialization.")};Vy.visit=function(t,e){var n=this,r=n.pulses,i=r.length,s=0;if(t&n.SOURCE)for(;s<i;++s)r[s].visit(t,e);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(t,e);return n};function pot(t){var e=this,n=0,r=e.logLevel(),i,s,a,o;if(e._pending)return e.info("Awaiting requests, delaying dataflow run."),0;if(e._pulse)return e.error("Dataflow invoked recursively. Use the runAfter method to queue invocation."),0;if(!e._touched.length)return e.info("Dataflow invoked, but nothing to do."),0;e._pulse=new Yd(e,++e._clock,t),r>=NT&&(a=Date.now(),e.debug("-- START PROPAGATION ("+e._clock+") -----")),e._touched.forEach(function(u){e._enqueue(u,!0)}),e._touched=sN(v2);try{for(;e._heap.size()>0;){if(i=e._heap.pop(),i.rank!==i.qrank){e._enqueue(i,!0);continue}s=i.run(e._getPulse(i,t)),r>=_B&&e.debug(i.id,s===PT?"STOP":s,i),s!==PT&&(e._pulse=s,i._targets&&i._targets.forEach(function(u){e._enqueue(u)})),++n}}catch(u){o=u}if(e._pulses={},e._pulse=null,r>=NT&&(a=Date.now()-a,e.info("> Pulse "+e._clock+": "+n+" operators; "+a+"ms")),o&&(e._postrun=[],e.error(o)),e._onrun)try{e._onrun(e,n,o)}catch(u){e.error(u)}if(e._postrun.length){var l=e._postrun;e._postrun=[],l.sort(function(u,c){return c.priority-u.priority}).forEach(function(u){Foe(e,u.callback)})}return this}function Foe(t,e){try{e(t)}catch(n){t.error(n)}}function mot(){return this._pending||this.run()&&this._pending||Promise.resolve(this)}function got(t,e,n){this._pulse||e?this._postrun.push({priority:n||0,callback:t}):Foe(this,t)}function vot(t,e){var n=!this._pulses[t.id];n&&(this._pulses[t.id]=this._pulse),(n||e)&&(t.qrank=t.rank,this._heap.push(t))}function yot(t,e){var n=t.source,r=this._clock,i;return n&&je(n)?(i=n.map(function(s){return s.pulse}),new GB(this,r,i,e)):(i=this._pulses[t.id],n&&(n=n.pulse,!n||n===PT?i.source=[]:n.stamp===r&&i.target!==t?i=n:i.source=n.source),i)}var HB={skip:!1,force:!1};function bot(t,e){var n=e||HB;return this._pulse?this._enqueue(t):this._touched.add(t),n.skip&&t.skip(!0),this}function xot(t,e,n){var r=n||HB;return(t.set(e)||r.force)&&this.touch(t,r),this}function wot(t,e,n){this.touch(t,n||HB);var r=new Yd(this,this._clock+(this._pulse?0:1)),i=t.pulse&&t.pulse.source||[];return r.target=t,this._pulses[t.id]=e.pulse(r,i),this}function Loe(t){this.cmp=t,this.nodes=[]}var vm=Loe.prototype;vm.size=function(){return this.nodes.length};vm.clear=function(){return this.nodes=[],this};vm.peek=function(){return this.nodes[0]};vm.push=function(t){var e=this.nodes;return e.push(t),Poe(e,0,e.length-1,this.cmp)};vm.pop=function(){var t=this.nodes,e=t.pop(),n;return t.length?(n=t[0],t[0]=e,jB(t,0,this.cmp)):n=e,n};vm.replace=function(t){var e=this.nodes,n=e[0];return e[0]=t,jB(e,0,this.cmp),n};vm.pushpop=function(t){var e=this.nodes,n=e[0];return e.length&&this.cmp(n,t)<0&&(e[0]=t,t=n,jB(e,0,this.cmp)),t};function Poe(t,e,n,r){var i,s,a;for(i=t[n];n>e;){if(a=n-1>>1,s=t[a],r(i,s)<0){t[n]=s,n=a;continue}break}return t[n]=i}function jB(t,e,n){for(var r=e,i=t.length,s=t[e],a=2*e+1,o;a<i;)o=a+1,o<i&&n(t[a],t[o])>=0&&(a=o),t[e]=t[a],e=a,a=2*e+1;return t[e]=s,Poe(t,r,e,n)}function Wy(){this._log=SB(),this.logLevel(xB),this._clock=0,this._rank=0;try{this._loader=cN()}catch{}this._touched=sN(v2),this._pulses={},this._pulse=null,this._heap=new Loe(function(t,e){return t.qrank-e.qrank}),this._postrun=[]}var cr=Wy.prototype;cr.stamp=function(){return this._clock};cr.loader=function(t){return arguments.length?(this._loader=t,this):this._loader};cr.cleanThreshold=1e4;cr.add=bst;cr.connect=xst;cr.rank=fot;cr.rerank=dot;cr.pulse=wot;cr.touch=bot;cr.update=xot;cr.changeset=Uy;cr.ingest=iot;cr.request=aot;cr.events=_st;cr.on=lot;cr.run=pot;cr.runAsync=mot;cr.runAfter=got;cr._enqueue=vot;cr._getPulse=yot;function b2(t){return function(){return this._log[t].apply(this,arguments)}}cr.error=b2("error");cr.warn=b2("warn");cr.info=b2("info");cr.debug=b2("debug");cr.logLevel=b2("level");function Ae(t,e){Zn.call(this,t,null,e)}var qB=tt(Ae,Zn);qB.run=function(t){if(t.stamp<=this.stamp)return t.StopPropagation;var e;return this.skip()?this.skip(!1):e=this.evaluate(t),e=e||t,e!==t.StopPropagation&&(this.pulse=e),this.stamp=t.stamp,e};qB.evaluate=function(t){var e=this.marshall(t.stamp),n=this.transform(e,t);return e.clear(),n};qB.transform=function(){};var F0={};function zoe(t){var e=Boe(t);return e&&e.Definition||null}function Boe(t){return t=t&&t.toLowerCase(),F0.hasOwnProperty(t)?F0[t]:null}function _ot(t){return function(e){for(var n=t.length,r=1,i=String(t[0](e));r<n;++r)i+="|"+t[r](e);return i}}function XB(t){return!t||!t.length?function(){return""}:t.length===1?t[0]:_ot(t)}function Uoe(t,e,n){return n||t+(e?"_"+e:"")}var YB={values:yr({name:"values",init:"cell.store = true;",set:"cell.data.values()",idx:-1}),count:yr({name:"count",set:"cell.num"}),__count__:yr({name:"count",set:"this.missing + this.valid"}),missing:yr({name:"missing",set:"this.missing"}),valid:yr({name:"valid",set:"this.valid"}),sum:yr({name:"sum",init:"this.sum = 0;",add:"this.sum += +v;",rem:"this.sum -= v;",set:"this.sum"}),mean:yr({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.valid ? this.mean : undefined"}),average:yr({name:"average",set:"this.valid ? this.mean : undefined",req:["mean"],idx:1}),variance:yr({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : undefined",req:["mean"],idx:1}),variancep:yr({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : undefined",req:["variance"],idx:2}),stdev:yr({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : undefined",req:["variance"],idx:2}),stdevp:yr({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : undefined",req:["variance"],idx:2}),stderr:yr({name:"stderr",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : undefined",req:["variance"],idx:2}),distinct:yr({name:"distinct",set:"cell.data.distinct(this.get)",req:["values"],idx:3}),ci0:yr({name:"ci0",set:"cell.data.ci0(this.get)",req:["values"],idx:3}),ci1:yr({name:"ci1",set:"cell.data.ci1(this.get)",req:["values"],idx:3}),median:yr({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:yr({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:yr({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),argmin:yr({name:"argmin",init:"this.argmin = undefined;",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = undefined;",set:"this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:yr({name:"argmax",init:"this.argmax = undefined;",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = undefined;",set:"this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:yr({name:"min",init:"this.min = undefined;",add:"if (v < this.min || this.min === undefined) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:yr({name:"max",init:"this.max = undefined;",add:"if (v > this.max || this.max === undefined) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4})},vN=Object.keys(YB);function Voe(t,e){return YB[t](e)}function yr(t){return function(e){var n=On({init:"",add:"",rem:"",idx:0},t);return n.out=e||t.name,n}}function Woe(t,e){return t.idx-e.idx}function Sot(t,e){function n(a,o){function l(u){a[u]||n(a,a[u]=YB[u]())}return o.req&&o.req.forEach(l),e&&o.str&&o.str.forEach(l),a}var r=t.reduce(n,t.reduce(function(a,o){return a[o.name]=o,a},{})),i=[],s;for(s in r)i.push(r[s]);return i.sort(Woe)}function Goe(t,e){var n=e||Lu,r=Sot(t,!0),i="var cell = this.cell; this.valid = 0; this.missing = 0;",s="this.cell = cell; this.init();",a="if(v==null){++this.missing; return;} if(v!==v) return; ++this.valid;",o="if(v==null){--this.missing; return;} if(v!==v) return; --this.valid;",l="var cell = this.cell;";return r.forEach(function(u){i+=u.init,a+=u.add,o+=u.rem}),t.slice().sort(Woe).forEach(function(u){l+="t['"+u.out+"']="+u.set+";"}),l+="return t;",s=Function("cell",s),s.prototype.init=Function(i),s.prototype.add=Function("v","t",a),s.prototype.rem=Function("v","t",o),s.prototype.set=Function("t",l),s.prototype.get=n,s.fields=t.map(function(u){return u.out}),s}function Uc(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Cot(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function KB(t){let e,n,r;t.length!==2?(e=Uc,n=(o,l)=>Uc(t(o),l),r=(o,l)=>t(o)-l):(e=t===Uc||t===Cot?t:Eot,n=t,r=t);function i(o,l,u=0,c=o.length){if(u<c){if(e(l,l)!==0)return c;do{const f=u+c>>>1;n(o[f],l)<0?u=f+1:c=f}while(u<c)}return u}function s(o,l,u=0,c=o.length){if(u<c){if(e(l,l)!==0)return c;do{const f=u+c>>>1;n(o[f],l)<=0?u=f+1:c=f}while(u<c)}return u}function a(o,l,u=0,c=o.length){const f=i(o,l,u,c-1);return f>u&&r(o[f-1],l)>-r(o[f],l)?f-1:f}return{left:i,center:a,right:s}}function Eot(){return 0}function Hoe(t){return t===null?NaN:+t}function*Tot(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const kot=KB(Uc),iL=kot.right;KB(Hoe).center;const x2=iL;function Aot(t,e){let n=0,r,i=0,s=0;if(e===void 0)for(let a of t)a!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i));else{let a=-1;for(let o of t)(o=e(o,++a,t))!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i))}if(n>1)return s/(n-1)}function Mot(t,e){const n=Aot(t,e);return n&&Math.sqrt(n)}let Rp=class{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],a=e+s,o=Math.abs(e)<Math.abs(s)?e-(a-s):s-(a-e);o&&(n[r++]=o),e=a}return n[r]=e,this._n=r+1,this}valueOf(){const e=this._partials;let n=this._n,r,i,s,a=0;if(n>0){for(a=e[--n];n>0&&(r=a,i=e[--n],a=r+i,s=i-(a-r),!s););n>0&&(s<0&&e[n-1]<0||s>0&&e[n-1]>0)&&(i=s*2,r=a+i,i==r-a&&(a=r))}return a}};class fq extends Map{constructor(e,n=Iot){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(dq(this,e))}has(e){return super.has(dq(this,e))}set(e,n){return super.set(Not(this,e),n)}delete(e){return super.delete($ot(this,e))}}function dq({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Not({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function $ot({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Iot(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Dot(t=Uc){if(t===Uc)return joe;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function joe(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Rot=Math.sqrt(50),Oot=Math.sqrt(10),Fot=Math.sqrt(2);function zT(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=Rot?10:s>=Oot?5:s>=Fot?2:1;let o,l,u;return i<0?(u=Math.pow(10,-i)/a,o=Math.round(t*u),l=Math.round(e*u),o/u<t&&++o,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*a,o=Math.round(t/u),l=Math.round(e/u),o*u<t&&++o,l*u>e&&--l),l<o&&.5<=n&&n<2?zT(t,e,n*2):[o,l,u]}function sL(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,a]=r?zT(e,t,n):zT(t,e,n);if(!(s>=i))return[];const o=s-i+1,l=new Array(o);if(r)if(a<0)for(let u=0;u<o;++u)l[u]=(s-u)/-a;else for(let u=0;u<o;++u)l[u]=(s-u)*a;else if(a<0)for(let u=0;u<o;++u)l[u]=(i+u)/-a;else for(let u=0;u<o;++u)l[u]=(i+u)*a;return l}function aL(t,e,n){return e=+e,t=+t,n=+n,zT(t,e,n)[2]}function oL(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?aL(e,t,n):aL(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function hq(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function pq(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function qoe(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?joe:Dot(i);r>n;){if(r-n>600){const l=r-n+1,u=e-n+1,c=Math.log(l),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(l-f)/l)*(u-l/2<0?-1:1),h=Math.max(n,Math.floor(e-u*f/l+d)),p=Math.min(r,Math.floor(e+(l-u)*f/l+d));qoe(t,e,h,p,i)}const s=t[e];let a=n,o=r;for(Vb(t,n,e),i(t[r],s)>0&&Vb(t,n,r);a<o;){for(Vb(t,a,o),++a,--o;i(t[a],s)<0;)++a;for(;i(t[o],s)>0;)--o}i(t[n],s)===0?Vb(t,n,o):(++o,Vb(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function Vb(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function lL(t,e,n){if(t=Float64Array.from(Tot(t,n)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return pq(t);if(e>=1)return hq(t);var r,i=(r-1)*e,s=Math.floor(i),a=hq(qoe(t,s).subarray(0,s+1)),o=pq(t.subarray(s+1));return a+(o-a)*(i-s)}}function Xoe(t,e,n=Hoe){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,s=Math.floor(i),a=+n(t[s],s,t),o=+n(t[s+1],s+1,t);return a+(o-a)*(i-s)}}function Lot(t,e){return lL(t,.5,e)}function*Pot(t){for(const e of t)yield*e}function Yoe(t){return Array.from(Pot(t))}function zot(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function*Koe(t,e){if(e==null)for(let n of t)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)r=e(r,++n,t),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function Zoe(t,e,n){const r=Float64Array.from(Koe(t,n));return r.sort(Uc),e.map(i=>Xoe(r,i))}function ZB(t,e){return Zoe(t,[.25,.5,.75],e)}function Joe(t,e){const n=t.length,r=Mot(t,e),i=ZB(t,e),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function Qoe(t){const e=t.maxbins||20,n=t.base||10,r=Math.log(n),i=t.divide||[5,2];let s=t.extent[0],a=t.extent[1],o,l,u,c,f,d;const h=t.span||a-s||Math.abs(s)||1;if(t.step)o=t.step;else if(t.steps){for(c=h/e,f=0,d=t.steps.length;f<d&&t.steps[f]<c;++f);o=t.steps[Math.max(0,f-1)]}else{for(l=Math.ceil(Math.log(e)/r),u=t.minstep||0,o=Math.max(u,Math.pow(n,Math.round(Math.log(h)/r)-l));Math.ceil(h/o)>e;)o*=n;for(f=0,d=i.length;f<d;++f)c=o/i[f],c>=u&&h/c<=e&&(o=c)}c=Math.log(o);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(t.nice||t.nice===void 0)&&(c=Math.floor(s/o+m)*o,s=s<c?c-o:c,a=Math.ceil(a/o)*o),{start:s,stop:a===s?s+o:a,step:o}}var nl=Math.random;function Bot(t){nl=t}function ele(t,e,n,r){if(!t.length)return[void 0,void 0];const i=Float64Array.from(Koe(t,r)),s=i.length,a=e;let o,l,u,c;for(u=0,c=Array(a);u<a;++u){for(o=0,l=0;l<s;++l)o+=i[~~(nl()*s)];c[u]=o/s}return c.sort(Uc),[lL(c,n/2),lL(c,1-n/2)]}function Uot(t,e,n,r){r=r||(d=>d);const i=t.length,s=new Float64Array(i);let a=0,o=1,l=r(t[0]),u=l,c=l+e,f;for(;o<i;++o){if(f=r(t[o]),f>=c){for(u=(l+u)/2;a<o;++a)s[a]=u;c=f+e,l=f}u=f}for(u=(l+u)/2;a<o;++a)s[a]=u;return n?Vot(s,e+e/4):s}function Vot(t,e){const n=t.length;let r=0,i=1,s,a;for(;t[r]===t[i];)++i;for(;i<n;){for(s=i+1;t[i]===t[s];)++s;if(t[i]-t[i-1]<e){for(a=i+(r+s-i-i>>1);a<i;)t[a++]=t[i];for(;a>i;)t[a--]=t[r]}r=i,i=s}return t}function Wot(t){return function(){return t=(1103515245*t+12345)%2147483647,t/2147483647}}function Got(t,e){e==null&&(e=t,t=0);let n,r,i;const s={min(a){return arguments.length?(n=a||0,i=r-n,s):n},max(a){return arguments.length?(r=a||0,i=r-n,s):r},sample(){return n+Math.floor(i*nl())},pdf(a){return a===Math.floor(a)&&a>=n&&a<r?1/i:0},cdf(a){const o=Math.floor(a);return o<n?0:o>=r?1:(o-n+1)/i},icdf(a){return a>=0&&a<=1?n-1+Math.floor(a*i):NaN}};return s.min(t).max(e)}const tle=Math.sqrt(2*Math.PI),Hot=Math.SQRT2;let Wb=NaN;function JB(t,e){t=t||0,e=e??1;let n=0,r=0,i,s;if(Wb===Wb)n=Wb,Wb=NaN;else{do n=nl()*2-1,r=nl()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,Wb=r*s}return t+n*e}function nle(t,e,n){n=n??1;const r=(t-(e||0))/n;return Math.exp(-.5*r*r)/(n*tle)}function QB(t,e,n){e=e||0,n=n??1;const r=(t-e)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const a=Math.exp(-i*i/2);let o;i<7.07106781186547?(o=.0352624965998911*i+.700383064443688,o=o*i+6.37396220353165,o=o*i+33.912866078383,o=o*i+112.079291497871,o=o*i+221.213596169931,o=o*i+220.206867912376,s=a*o,o=.0883883476483184*i+1.75566716318264,o=o*i+16.064177579207,o=o*i+86.7807322029461,o=o*i+296.564248779674,o=o*i+637.333633378831,o=o*i+793.826512519948,o=o*i+440.413735824752,s=s/o):(o=i+.65,o=i+4/o,o=i+3/o,o=i+2/o,o=i+1/o,s=a/o/2.506628274631)}return r>0?1-s:s}function e8(t,e,n){return t<0||t>1?NaN:(e||0)+(n??1)*Hot*jot(2*t-1)}function jot(t){let e=-Math.log((1-t)*(1+t)),n;return e<6.25?(e-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*e,n=128584807152564e-32+n*e,n=11157877678025181e-33+n*e,n=-1333171662854621e-31+n*e,n=20972767875968562e-33+n*e,n=6637638134358324e-30+n*e,n=-4054566272975207e-29+n*e,n=-8151934197605472e-29+n*e,n=26335093153082323e-28+n*e,n=-12975133253453532e-27+n*e,n=-5415412054294628e-26+n*e,n=10512122733215323e-25+n*e,n=-4112633980346984e-24+n*e,n=-29070369957882005e-24+n*e,n=42347877827932404e-23+n*e,n=-13654692000834679e-22+n*e,n=-13882523362786469e-21+n*e,n=.00018673420803405714+n*e,n=-.000740702534166267+n*e,n=-.006033670871430149+n*e,n=.24015818242558962+n*e,n=1.6536545626831027+n*e):e<16?(e=Math.sqrt(e)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*e,n=-27517406297064545e-23+n*e,n=18239629214389228e-24+n*e,n=15027403968909828e-22+n*e,n=-4013867526981546e-21+n*e,n=29234449089955446e-22+n*e,n=12475304481671779e-21+n*e,n=-47318229009055734e-21+n*e,n=6828485145957318e-20+n*e,n=24031110387097894e-21+n*e,n=-.0003550375203628475+n*e,n=.0009532893797373805+n*e,n=-.0016882755560235047+n*e,n=.002491442096107851+n*e,n=-.003751208507569241+n*e,n=.005370914553590064+n*e,n=1.0052589676941592+n*e,n=3.0838856104922208+n*e):Number.isFinite(e)?(e=Math.sqrt(e)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*e,n=15076572693500548e-25+n*e,n=-3789465440126737e-24+n*e,n=761570120807834e-23+n*e,n=-1496002662714924e-23+n*e,n=2914795345090108e-23+n*e,n=-6771199775845234e-23+n*e,n=22900482228026655e-23+n*e,n=-99298272942317e-20+n*e,n=4526062597223154e-21+n*e,n=-1968177810553167e-20+n*e,n=7599527703001776e-20+n*e,n=-.00021503011930044477+n*e,n=-.00013871931833623122+n*e,n=1.0103004648645344+n*e,n=4.849906401408584+n*e):n=1/0,n*t}function t8(t,e){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>JB(n,r),pdf:s=>nle(s,n,r),cdf:s=>QB(s,n,r),icdf:s=>e8(s,n,r)};return i.mean(t).stdev(e)}function rle(t,e){const n=t8();let r=0;const i={data(s){return arguments.length?(t=s,r=s?s.length:0,i.bandwidth(e)):t},bandwidth(s){return arguments.length?(e=s,!e&&t&&(e=Joe(t)),i):e},sample(){return t[~~(nl()*r)]+e*n.sample()},pdf(s){let a=0,o=0;for(;o<r;++o)a+=n.pdf((s-t[o])/e);return a/e/r},cdf(s){let a=0,o=0;for(;o<r;++o)a+=n.cdf((s-t[o])/e);return a/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(t)}function ile(t,e){return t=t||0,e=e??1,Math.exp(t+JB()*e)}function sle(t,e,n){if(t<=0)return 0;e=e||0,n=n??1;const r=(Math.log(t)-e)/n;return Math.exp(-.5*r*r)/(n*tle*t)}function ale(t,e,n){return QB(Math.log(t),e,n)}function ole(t,e,n){return Math.exp(e8(t,e,n))}function qot(t,e){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>ile(n,r),pdf:s=>sle(s,n,r),cdf:s=>ale(s,n,r),icdf:s=>ole(s,n,r)};return i.mean(t).stdev(e)}function lle(t,e){let n=0,r;function i(a){const o=[];let l=0,u;for(u=0;u<n;++u)l+=o[u]=a[u]==null?1:+a[u];for(u=0;u<n;++u)o[u]/=l;return o}const s={weights(a){return arguments.length?(r=i(e=a||[]),s):e},distributions(a){return arguments.length?(a?(n=a.length,t=a):(n=0,t=[]),s.weights(e)):t},sample(){const a=nl();let o=t[n-1],l=r[0],u=0;for(;u<n-1;l+=r[++u])if(a<l){o=t[u];break}return o.sample()},pdf(a){let o=0,l=0;for(;l<n;++l)o+=r[l]*t[l].pdf(a);return o},cdf(a){let o=0,l=0;for(;l<n;++l)o+=r[l]*t[l].cdf(a);return o},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(t).weights(e)}function ule(t,e){return e==null&&(e=t??1,t=0),t+(e-t)*nl()}function cle(t,e,n){return n==null&&(n=e??1,e=0),t>=e&&t<=n?1/(n-e):0}function fle(t,e,n){return n==null&&(n=e??1,e=0),t<e?0:t>n?1:(t-e)/(n-e)}function dle(t,e,n){return n==null&&(n=e??1,e=0),t>=0&&t<=1?e+t*(n-e):NaN}function hle(t,e){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>ule(n,r),pdf:s=>cle(s,n,r),cdf:s=>fle(s,n,r),icdf:s=>dle(s,n,r)};return e==null&&(e=t??1,t=0),i.min(t).max(e)}function w2(t,e,n,r){const i=r-t*t,s=Math.abs(i)<1e-24?0:(n-t*e)/i;return[e-s*t,s]}function yN(t,e,n,r){t=t.filter(h=>{let p=e(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&t.sort((h,p)=>e(h)-e(p));const i=t.length,s=new Float64Array(i),a=new Float64Array(i);let o=0,l=0,u=0,c,f,d;for(d of t)s[o]=c=+e(d),a[o]=f=+n(d),++o,l+=(c-l)/o,u+=(f-u)/o;for(o=0;o<i;++o)s[o]-=l,a[o]-=u;return[s,a,l,u]}function _2(t,e,n,r){let i=-1,s,a;for(const o of t)s=e(o),a=n(o),s!=null&&(s=+s)>=s&&a!=null&&(a=+a)>=a&&r(s,a,++i)}function Gy(t,e,n,r,i){let s=0,a=0;return _2(t,e,n,(o,l)=>{const u=l-i(o),c=l-r;s+=u*u,a+=c*c}),1-s/a}function ple(t,e,n){let r=0,i=0,s=0,a=0,o=0;_2(t,e,n,(c,f)=>{++o,r+=(c-r)/o,i+=(f-i)/o,s+=(c*f-s)/o,a+=(c*c-a)/o});const l=w2(r,i,s,a),u=c=>l[0]+l[1]*c;return{coef:l,predict:u,rSquared:Gy(t,e,n,i,u)}}function Xot(t,e,n){let r=0,i=0,s=0,a=0,o=0;_2(t,e,n,(c,f)=>{++o,c=Math.log(c),r+=(c-r)/o,i+=(f-i)/o,s+=(c*f-s)/o,a+=(c*c-a)/o});const l=w2(r,i,s,a),u=c=>l[0]+l[1]*Math.log(c);return{coef:l,predict:u,rSquared:Gy(t,e,n,i,u)}}function Yot(t,e,n){const[r,i,s,a]=yN(t,e,n);let o=0,l=0,u=0,c=0,f=0,d,h,p;_2(t,e,n,(y,b)=>{d=r[f++],h=Math.log(b),p=d*b,o+=(b*h-o)/f,l+=(p-l)/f,u+=(p*h-u)/f,c+=(d*p-c)/f});const[m,g]=w2(l/a,o/a,u/a,c/a),v=y=>Math.exp(m+g*(y-s));return{coef:[Math.exp(m-g*s),g],predict:v,rSquared:Gy(t,e,n,a,v)}}function Kot(t,e,n){let r=0,i=0,s=0,a=0,o=0,l=0;_2(t,e,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++l,r+=(h-r)/l,i+=(p-i)/l,s+=(h*p-s)/l,a+=(h*h-a)/l,o+=(d-o)/l});const u=w2(r,i,s,a),c=f=>u[0]*Math.pow(f,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:c,rSquared:Gy(t,e,n,o,c)}}function mle(t,e,n){const[r,i,s,a]=yN(t,e,n),o=r.length;let l=0,u=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<o;)p=r[h],m=i[h++],g=p*p,l+=(g-l)/h,u+=(g*p-u)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const v=c-l*l,y=l*v-u*u,b=(d*l-f*u)/y,x=(f*v-d*u)/y,w=-b*l,S=C=>(C=C-s,b*C*C+x*C+w+a);return{coef:[w-x*s+b*s*s+a,x-2*b*s,b],predict:S,rSquared:Gy(t,e,n,a,S)}}function Zot(t,e,n,r){if(r===1)return ple(t,e,n);if(r===2)return mle(t,e,n);const[i,s,a,o]=yN(t,e,n),l=i.length,u=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<l;++p)m+=Math.pow(i[p],d)*s[p];for(u.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<l;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(u);const v=Qot(c),y=b=>{b-=a;let x=o+v[0]+v[1]*b+v[2]*b*b;for(d=3;d<f;++d)x+=v[d]*Math.pow(b,d);return x};return{coef:Jot(f,v,-a,o),predict:y,rSquared:Gy(t,e,n,o,y)}}function Jot(t,e,n,r){const i=Array(t);let s,a,o,l;for(s=0;s<t;++s)i[s]=0;for(s=t-1;s>=0;--s)for(o=e[s],l=1,i[s]+=o,a=1;a<=s;++a)l*=(s+1-a)/a,i[s-a]+=o*Math.pow(n,a)*l;return i[0]+=r,i}function Qot(t){const e=t.length-1,n=[];let r,i,s,a,o;for(r=0;r<e;++r){for(a=r,i=r+1;i<e;++i)Math.abs(t[r][i])>Math.abs(t[r][a])&&(a=i);for(s=r;s<e+1;++s)o=t[s][r],t[s][r]=t[s][a],t[s][a]=o;for(i=r+1;i<e;++i)for(s=e;s>=r;s--)t[s][i]-=t[s][r]*t[r][i]/t[r][r]}for(i=e-1;i>=0;--i){for(o=0,s=i+1;s<e;++s)o+=t[s][i]*n[s];n[i]=(t[e][i]-o)/t[i][i]}return n}const mq=2,gq=1e-12;function elt(t,e,n,r){const[i,s,a,o]=yN(t,e,n,!0),l=i.length,u=Math.max(2,~~(r*l)),c=new Float64Array(l),f=new Float64Array(l),d=new Float64Array(l).fill(1);for(let h=-1;++h<=mq;){const p=[0,u-1];for(let g=0;g<l;++g){const v=i[g],y=p[0],b=p[1],x=v-i[y]>i[b]-v?y:b;let w=0,S=0,C=0,_=0,E=0;const T=1/Math.abs(i[x]-v||1);for(let A=y;A<=b;++A){const N=i[A],$=s[A],D=tlt(Math.abs(v-N)*T)*d[A],P=N*D;w+=D,S+=P,C+=$*D,_+=$*P,E+=N*P}const[k,M]=w2(S/w,C/w,_/w,E/w);c[g]=k+M*v,f[g]=Math.abs(s[g]-c[g]),nlt(i,g+1,p)}if(h===mq)break;const m=Lot(f);if(Math.abs(m)<gq)break;for(let g=0,v,y;g<l;++g)v=f[g]/(6*m),d[g]=v>=1?gq:(y=1-v*v)*y}return rlt(i,c,a,o)}function tlt(t){return(t=1-t*t*t)*t*t}function nlt(t,e,n){const r=t[e];let i=n[0],s=n[1]+1;if(!(s>=t.length))for(;e>i&&t[s]-r<=r-t[i];)n[0]=++i,n[1]=s,++s}function rlt(t,e,n,r){const i=t.length,s=[];let a=0,o=0,l=[],u;for(;a<i;++a)u=t[a]+n,l[0]===u?l[1]+=(e[a]-l[1])/++o:(o=0,l[1]+=r,l=[u,e[a]],s.push(l));return l[1]+=r,s}const ilt=.5*Math.PI/180;function slt(t,e,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,t(m)],s=e[0],a=e[1],o=a-s,l=o/r,u=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)u.push(i(s+m/n*o));return u.push(i(a)),u}else{c.push(i(a));for(let m=n;--m>0;)c.push(i(s+m/n*o))}let f=u[0],d=c[c.length-1];const h=1/o,p=alt(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=l&&olt(f,m,d,h,p)>ilt?c.push(m):(f=d,u.push(d),c.pop()),d=c[c.length-1]}return u}function alt(t,e){let n=t,r=t;const i=e.length;for(let s=0;s<i;++s){const a=e[s][1];a<n&&(n=a),a>r&&(r=a)}return 1/(r-n)}function olt(t,e,n,r,i){const s=Math.atan2(i*(n[1]-t[1]),r*(n[0]-t[0])),a=Math.atan2(i*(e[1]-t[1]),r*(e[0]-t[0]));return Math.abs(s-a)}function n8(t){this._key=t?oo(t):Nt,this.reset()}var Qi=n8.prototype;Qi.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Qi.add=function(t){this._add.push(t)};Qi.rem=function(t){this._rem.push(t)};Qi.values=function(){if(this._get=null,this._rem.length===0)return this._add;var t=this._add,e=this._rem,n=this._key,r=t.length,i=e.length,s=Array(r-i),a={},o,l,u;for(o=0;o<i;++o)a[n(e[o])]=1;for(o=0,l=0;o<r;++o)a[n(u=t[o])]?a[n(u)]=0:s[l++]=u;return this._rem=[],this._add=s};Qi.distinct=function(t){for(var e=this.values(),n=e.length,r={},i=0,s;--n>=0;)s=t(e[n])+"",r.hasOwnProperty(s)||(r[s]=1,++i);return i};Qi.extent=function(t){if(this._get!==t||!this._ext){var e=this.values(),n=Gae(e,t);this._ext=[e[n[0]],e[n[1]]],this._get=t}return this._ext};Qi.argmin=function(t){return this.extent(t)[0]||{}};Qi.argmax=function(t){return this.extent(t)[1]||{}};Qi.min=function(t){var e=this.extent(t)[0];return e!=null?t(e):void 0};Qi.max=function(t){var e=this.extent(t)[1];return e!=null?t(e):void 0};Qi.quartile=function(t){return(this._get!==t||!this._q)&&(this._q=ZB(this.values(),t),this._get=t),this._q};Qi.q1=function(t){return this.quartile(t)[0]};Qi.q2=function(t){return this.quartile(t)[1]};Qi.q3=function(t){return this.quartile(t)[2]};Qi.ci=function(t){return(this._get!==t||!this._ci)&&(this._ci=ele(this.values(),1e3,.05,t),this._get=t),this._ci};Qi.ci0=function(t){return this.ci(t)[0]};Qi.ci1=function(t){return this.ci(t)[1]};function ym(t){Ae.call(this,null,t),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}ym.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:vN},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};var ql=tt(ym,Ae);ql.transform=function(t,e){var n=this,r=e.fork(e.NO_SOURCE|e.NO_FIELDS),i;return this.stamp=r.stamp,this.value&&((i=t.modified())||e.modified(this._inputs))?(this._prev=this.value,this.value=i?this.init(t):{},e.visit(e.SOURCE,function(s){n.add(s)})):(this.value=this.value||this.init(t),e.visit(e.REM,function(s){n.rem(s)}),e.visit(e.ADD,function(s){n.add(s)})),r.modifies(this._outputs),n._drop=t.drop!==!1,t.cross&&n._dims.length>1&&(n._drop=!1,this.cross()),n.changes(r)};ql.cross=function(){var t=this,e=t.value,n=t._dnames,r=n.map(function(){return{}}),i=n.length;function s(o){var l,u,c,f;for(l in o)for(c=o[l].tuple,u=0;u<i;++u)r[u][f=c[n[u]]]=f}s(t._prev),s(e);function a(o,l,u){var c=n[u],f=r[u++],d,h;for(d in f)l[c]=f[d],h=o?o+"|"+d:d,u<i?a(h,l,u):e[h]||t.cell(h,l)}a("",{},0)};ql.init=function(t){var e=this._inputs=[],n=this._outputs=[],r={};function i(g){for(var v=qt(va(g)),y=0,b=v.length,x;y<b;++y)r[x=v[y]]||(r[x]=1,e.push(x))}this._dims=qt(t.groupby),this._dnames=this._dims.map(function(g){var v=Go(g);return i(g),n.push(v),v}),this.cellkey=t.key?t.key:XB(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];var s=t.fields||[null],a=t.ops||["count"],o=t.as||[],l=s.length,u={},c,f,d,h,p,m;for(l!==a.length&&Fe("Unmatched number of fields and aggregate ops."),m=0;m<l;++m){if(c=s[m],f=a[m],c==null&&f!=="count"&&Fe("Null aggregate field specified."),h=Go(c),p=Uoe(f,h,o[m]),n.push(p),f==="count"){this._counts.push(p);continue}d=u[h],d||(i(c),d=u[h]=[],d.field=c,this._measures.push(d)),f!=="count"&&(this._countOnly=!1),d.push(Voe(f,p))}return this._measures=this._measures.map(function(g){return Goe(g,g.field)}),{}};ql.cellkey=XB();ql.cell=function(t,e){var n=this.value[t];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[t]=this.newcell(t,e),this._adds[this._alen++]=n),n};ql.newcell=function(t,e){var n={key:t,num:0,agg:null,tuple:this.newtuple(e,this._prev&&this._prev[t]),stamp:this.stamp,store:!1};if(!this._countOnly){var r=this._measures,i=r.length,s;for(n.agg=Array(i),s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new n8),n};ql.newtuple=function(t,e){var n=this._dnames,r=this._dims,i={},s,a;for(s=0,a=r.length;s<a;++s)i[n[s]]=r[s](t);return e?Zae(e.tuple,i):Nr(i)};ql.add=function(t){var e=this.cellkey(t),n=this.cell(e,t),r,i,s;if(n.num+=1,!this._countOnly)for(n.store&&n.data.add(t),r=n.agg,i=0,s=r.length;i<s;++i)r[i].add(r[i].get(t),t)};ql.rem=function(t){var e=this.cellkey(t),n=this.cell(e,t),r,i,s;if(n.num-=1,!this._countOnly)for(n.store&&n.data.rem(t),r=n.agg,i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(t),t)};ql.celltuple=function(t){var e=t.tuple,n=this._counts,r,i,s;for(t.store&&t.data.values(),i=0,s=n.length;i<s;++i)e[n[i]]=t.num;if(!this._countOnly)for(r=t.agg,i=0,s=r.length;i<s;++i)r[i].set(e);return e};ql.changes=function(t){var e=this._adds,n=this._mods,r=this._prev,i=this._drop,s=t.add,a=t.rem,o=t.mod,l,u,c,f;if(r)for(u in r)l=r[u],(!i||l.num)&&a.push(l.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(e[c])),e[c]=null;for(c=0,f=this._mlen;c<f;++c)l=n[c],(l.num===0&&i?a:o).push(this.celltuple(l)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,t};function r8(t){Ae.call(this,null,t)}r8.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};var gle=tt(r8,Ae);gle.transform=function(t,e){var n=this._bins(t),r=n.start,i=n.step,s=t.as||["bin0","bin1"],a=s[0],o=s[1],l;return t.modified()?(e=e.reflow(!0),l=e.SOURCE):l=e.modified(va(t.field))?e.ADD_MOD:e.ADD,e.visit(l,function(u){var c=n(u);u[a]=c,u[o]=c==null?null:r+i*(1+(c-r)/i)}),e.modifies(s)};gle._bins=function(t){if(this.value&&!t.modified())return this.value;var e=t.field,n=Qoe(t),r=n.start,i=n.stop,s=n.step,a,o;(a=t.anchor)!=null&&(o=a-(r+s*Math.floor((a-r)/s)),r+=o,i+=o);var l=function(u){var c=e(u);return c==null?null:(c=Math.max(r,Math.min(+c,i-s)),r+s*Math.floor((c-r)/s))};return l.start=r,l.stop=i,l.step=s,this.value=Ia(l,va(e),t.name||"bin_"+Go(e))};function vle(t,e,n){var r=t,i=e||[],s=n||[],a={},o=0;return{add:function(l){s.push(l)},remove:function(l){a[r(l)]=++o},size:function(){return i.length},data:function(l,u){return o&&(i=i.filter(function(c){return!a[r(c)]}),a={},o=0),u&&l&&i.sort(l),s.length&&(i=l?jae(l,i,s.sort(l)):i.concat(s),s=[]),i}}}function i8(t){Ae.call(this,[],t)}i8.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};var llt=tt(i8,Ae);llt.transform=function(t,e){var n=e.fork(e.ALL),r=vle(Nt,this.value,n.materialize(n.ADD).add),i=t.sort,s=e.changed()||i&&(t.modified("sort")||e.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(i,s),e.source&&e.source.root&&(this.value.root=e.source.root),n};function yle(t){Zn.call(this,null,ult,t)}tt(yle,Zn);function ult(t){return this.value&&!t.modified()?this.value:kB(t.fields,t.orders)}function s8(t){Ae.call(this,null,t)}s8.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function clt(t,e,n){switch(e){case"upper":t=t.toUpperCase();break;case"lower":t=t.toLowerCase();break}return t.match(n)}var a8=tt(s8,Ae);a8.transform=function(t,e){function n(f){return function(d){for(var h=clt(o(d),t.case,s)||[],p,m=0,g=h.length;m<g;++m)a.test(p=h[m])||f(p)}}var r=this._parameterCheck(t,e),i=this._counts,s=this._match,a=this._stop,o=t.field,l=t.as||["text","count"],u=n(function(f){i[f]=1+(i[f]||0)}),c=n(function(f){i[f]-=1});return r?e.visit(e.SOURCE,u):(e.visit(e.ADD,u),e.visit(e.REM,c)),this._finish(e,l)};a8._parameterCheck=function(t,e){var n=!1;return(t.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(t.stopwords||"")+"$","i"),n=!0),(t.modified("pattern")||!this._match)&&(this._match=new RegExp(t.pattern||"[\\w']+","g"),n=!0),(t.modified("field")||e.modified(t.field.fields))&&(n=!0),n&&(this._counts={}),n};a8._finish=function(t,e){var n=this._counts,r=this._tuples||(this._tuples={}),i=e[0],s=e[1],a=t.fork(t.NO_SOURCE|t.NO_FIELDS),o,l,u;for(o in n)l=r[o],u=n[o]||0,!l&&u?(r[o]=l=Nr({}),l[i]=o,l[s]=u,a.add.push(l)):u===0?(l&&a.rem.push(l),n[o]=null,r[o]=null):l[s]!==u&&(l[s]=u,a.mod.push(l));return a.modifies(e)};function o8(t){Ae.call(this,null,t)}o8.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};var flt=tt(o8,Ae);flt.transform=function(t,e){var n=e.fork(e.NO_SOURCE),r=this.value,i=t.as||["a","b"],s=i[0],a=i[1],o=!r||e.changed(e.ADD_REM)||t.modified("as")||t.modified("filter");return o?(r&&(n.rem=r),r=e.materialize(e.SOURCE).source,n.add=this.value=dlt(r,s,a,t.filter||jd)):n.mod=r,n.source=this.value,n.modifies(i)};function dlt(t,e,n,r){for(var i=[],s={},a=t.length,o=0,l,u;o<a;++o)for(s[e]=u=t[o],l=0;l<a;++l)s[n]=t[l],r(s)&&(i.push(Nr(s)),s={},s[e]=u);return i}var vq={kde:rle,mixture:lle,normal:t8,uniform:hle},hlt="distributions",yq="function",plt="field";function ble(t,e){var n=t[yq];vq.hasOwnProperty(n)||Fe("Unknown distribution function: "+n);var r=vq[n]();for(var i in t)i===plt?r.data((t.from||e()).map(t[i])):i===hlt?r[i](t[i].map(function(s){return ble(s,e)})):typeof r[i]===yq&&r[i](t[i]);return r}function l8(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function u8(t){let e=t,n=t;t.length===1&&(e=(a,o)=>t(a)-o,n=mlt(t));function r(a,o,l,u){for(l==null&&(l=0),u==null&&(u=a.length);l<u;){const c=l+u>>>1;n(a[c],o)<0?l=c+1:u=c}return l}function i(a,o,l,u){for(l==null&&(l=0),u==null&&(u=a.length);l<u;){const c=l+u>>>1;n(a[c],o)>0?u=c:l=c+1}return l}function s(a,o,l,u){l==null&&(l=0),u==null&&(u=a.length);const c=r(a,o,l,u-1);return c>l&&e(a[c-1],o)>-e(a[c],o)?c-1:c}return{left:r,center:s,right:i}}function mlt(t){return(e,n)=>l8(t(e),n)}function glt(t){return t===null?NaN:+t}function*vlt(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const xle=u8(l8),BT=xle.right,ylt=xle.left;u8(glt).center;const blt=BT;function wle(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let s of t)(s=e(s,++i,t))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}function xlt(t,e){return Array.from(e,n=>t[n])}var wlt=Math.sqrt(50),_lt=Math.sqrt(10),Slt=Math.sqrt(2);function Clt(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/i;return s>=wlt?i*=10:s>=_lt?i*=5:s>=Slt&&(i*=2),e<t?-i:i}function uL(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function cL(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function _le(t,e,n=0,r=t.length-1,i=l8){for(;r>n;){if(r-n>600){const l=r-n+1,u=e-n+1,c=Math.log(l),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(l-f)/l)*(u-l/2<0?-1:1),h=Math.max(n,Math.floor(e-u*f/l+d)),p=Math.min(r,Math.floor(e+(l-u)*f/l+d));_le(t,e,h,p,i)}const s=t[e];let a=n,o=r;for(Gb(t,n,e),i(t[r],s)>0&&Gb(t,n,r);a<o;){for(Gb(t,a,o),++a,--o;i(t[a],s)<0;)++a;for(;i(t[o],s)>0;)--o}i(t[n],s)===0?Gb(t,n,o):(++o,Gb(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function Gb(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Elt(t,e,n){if(t=Float64Array.from(vlt(t,n)),!!(r=t.length)){if((e=+e)<=0||r<2)return cL(t);if(e>=1)return uL(t);var r,i=(r-1)*e,s=Math.floor(i),a=uL(_le(t,s).subarray(0,s+1)),o=cL(t.subarray(s+1));return a+(o-a)*(i-s)}}function Tlt(t,e){let n=0,r=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of t)(s=e(s,++i,t))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function klt(t,e){return Elt(t,.5,e)}function S2(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function Alt(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function c8(t){Ae.call(this,null,t)}var Sle=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],Mlt={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:Sle},{name:"weights",type:"number",array:!0}]};c8.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number",default:100},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:Sle.concat(Mlt)},{name:"as",type:"string",array:!0,default:["value","density"]}]};var Nlt=tt(c8,Ae);Nlt.transform=function(t,e){var n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){var r=ble(t.distribution,$lt(e)),i=t.method||"pdf";i!=="pdf"&&i!=="cdf"&&Fe("Invalid density method: "+i),!t.extent&&!r.data&&Fe("Missing density extent parameter."),i=r[i];var s=t.as||["value","density"],a=t.extent||wle(r.data()),o=(a[1]-a[0])/(t.steps||100),l=S2(a[0],a[1]+o/2,o).map(function(u){var c={};return c[s[0]]=u,c[s[1]]=i(u),Nr(c)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n};function $lt(t){return function(){return t.materialize(t.SOURCE).source}}function Cle(t){Zn.call(this,null,Ilt,t),this.modified(!0)}tt(Cle,Zn);function Ilt(t){var e=t.expr;return this.value&&!t.modified("expr")?this.value:Ia(function(n){return e(n,t)},va(e),Go(e))}function f8(t){Ae.call(this,[void 0,void 0],t)}f8.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};var Dlt=tt(f8,Ae);Dlt.transform=function(t,e){var n=this.value,r=t.field,i=n[0],s=n[1],a;a=e.changed()||e.modified(r.fields)||t.modified("field"),(a||i==null)&&(i=1/0,s=-1/0),e.visit(a?e.SOURCE:e.ADD,function(o){var l=r(o);l!=null&&(l=+l,l<i&&(i=l),l>s&&(s=l))}),(!isFinite(i)||!isFinite(s))&&(i=s=void 0),this.value=[i,s]};function d8(t,e){Zn.call(this,t),this.parent=e}var Hy=tt(d8,Zn);Hy.connect=function(t){return this.targets().add(t),t.source=this};Hy.add=function(t){this.value.add.push(t)};Hy.rem=function(t){this.value.rem.push(t)};Hy.mod=function(t){this.value.mod.push(t)};Hy.init=function(t){this.value.init(t,t.NO_SOURCE)};Hy.evaluate=function(){return this.value};function bN(t){Ae.call(this,{},t),this._keys=zy();var e=this._targets=[];e.active=0,e.forEach=function(n){for(var r=0,i=e.active;r<i;++r)n(e[r],r,e)}}var h8=tt(bN,Ae);h8.activate=function(t){this._targets[this._targets.active++]=t};h8.subflow=function(t,e,n,r){var i=this.value,s=i.hasOwnProperty(t)&&i[t],a,o;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(o=r||(o=this._group[t])&&o.tuple,a=n.dataflow,s=a.add(new d8(n.fork(n.NO_SOURCE),this)).connect(e(a,t,o)),i[t]=s,this.activate(s)),s};h8.transform=function(t,e){var n=e.dataflow,r=this,i=t.key,s=t.subflow,a=this._keys,o=t.modified("key");function l(u){return r.subflow(u,s,e)}return this._group=t.group||{},this._targets.active=0,e.visit(e.REM,function(u){var c=Nt(u),f=a.get(c);f!==void 0&&(a.delete(c),l(f).rem(u))}),e.visit(e.ADD,function(u){var c=i(u);a.set(Nt(u),c),l(c).add(u)}),o||e.modified(i.fields)?e.visit(e.MOD,function(u){var c=Nt(u),f=a.get(c),d=i(u);f===d?l(d).mod(u):(a.set(c,d),l(f).rem(u),l(d).add(u))}):e.changed(e.MOD)&&e.visit(e.MOD,function(u){l(a.get(Nt(u))).mod(u)}),o&&e.visit(e.REFLOW,function(u){var c=Nt(u),f=a.get(c),d=i(u);f!==d&&(a.set(c,d),l(f).rem(u),l(d).add(u))}),a.empty>n.cleanThreshold&&n.runAfter(a.clean),e};function Ele(t){Zn.call(this,null,Rlt,t)}tt(Ele,Zn);function Rlt(t){return this.value&&!t.modified()?this.value:je(t.name)?qt(t.name).map(function(e){return oo(e)}):oo(t.name,t.as)}function p8(t){Ae.call(this,zy(),t)}p8.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};var Olt=tt(p8,Ae);Olt.transform=function(t,e){var n=e.dataflow,r=this.value,i=e.fork(),s=i.add,a=i.rem,o=i.mod,l=t.expr,u=!0;e.visit(e.REM,function(f){var d=Nt(f);r.has(d)?r.delete(d):a.push(f)}),e.visit(e.ADD,function(f){l(f,t)?s.push(f):r.set(Nt(f),1)});function c(f){var d=Nt(f),h=l(f,t),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),a.push(f)):u&&h&&!p&&o.push(f)}return e.visit(e.MOD,c),t.modified()&&(u=!1,e.visit(e.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i};function Tle(t,e){return t?t.map(function(n,r){return e[r]||Go(n)}):null}function m8(t){Ae.call(this,[],t)}m8.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0}]};var Flt=tt(m8,Ae);Flt.transform=function(t,e){var n=e.fork(e.NO_SOURCE),r=t.fields,i=Tle(r,t.as||[]),s=i.length;return n.rem=this.value,e.visit(e.SOURCE,function(a){for(var o=r.map(function(h){return h(a)}),l=o.reduce(function(h,p){return Math.max(h,p.length)},0),u=0,c,f,d;u<l;++u){for(f=RB(a),c=0;c<s;++c)f[i[c]]=(d=o[c][u])==null?null:d;n.add.push(f)}}),this.value=n.source=n.add,n.modifies(i)};function g8(t){Ae.call(this,[],t)}g8.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};var Llt=tt(g8,Ae);Llt.transform=function(t,e){var n=e.fork(e.NO_SOURCE),r=t.fields,i=r.map(Go),s=t.as||["key","value"],a=s[0],o=s[1],l=r.length;return n.rem=this.value,e.visit(e.SOURCE,function(u){for(var c=0,f;c<l;++c)f=RB(u),f[a]=i[c],f[o]=r[c](u),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)};function v8(t){Ae.call(this,null,t)}v8.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};var Plt=tt(v8,Ae);Plt.transform=function(t,e){var n=t.expr,r=t.as,i=t.modified(),s=t.initonly?e.ADD:i?e.SOURCE:e.modified(n.fields)?e.ADD_MOD:e.ADD;function a(o){o[r]=n(o,t)}return i&&(e=e.materialize().reflow(!0)),t.initonly||e.modifies(r),e.visit(s,a)};function kle(t){Ae.call(this,[],t)}var zlt=tt(kle,Ae);zlt.transform=function(t,e){var n=this.value,r=e.fork(e.ALL),i=t.size-n.length,s=t.generator,a,o,l;if(i>0){for(a=[];--i>=0;)a.push(l=Nr(s(t))),n.push(l);r.add=r.add.length?r.materialize(r.ADD).add.concat(a):a}else o=n.slice(0,-i),r.rem=r.rem.length?r.materialize(r.REM).rem.concat(o):o,n=n.slice(-i);return r.source=this.value=n,r};var bC={value:"value",median:klt,mean:Tlt,min:cL,max:uL},Blt=[];function y8(t){Ae.call(this,[],t)}y8.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};var Ult=tt(y8,Ae);function Vlt(t){var e=t.method||bC.value,n;if(bC[e]==null)Fe("Unrecognized imputation method: "+e);else return e===bC.value?(n=t.value!==void 0?t.value:0,function(){return n}):bC[e]}function Wlt(t){var e=t.field;return function(n){return n?e(n):NaN}}Ult.transform=function(t,e){var n=e.fork(e.ALL),r=Vlt(t),i=Wlt(t),s=Go(t.field),a=Go(t.key),o=(t.groupby||[]).map(Go),l=Glt(e.source,t.groupby,t.key,t.keyvals),u=[],c=this.value,f=l.domain.length,d,h,p,m,g,v,y,b,x,w;for(g=0,b=l.length;g<b;++g)for(d=l[g],p=d.values,h=NaN,y=0;y<f;++y)if(d[y]==null){for(m=l.domain[y],w={_impute:!0},v=0,x=p.length;v<x;++v)w[o[v]]=p[v];w[a]=m,w[s]=isNaN(h)?h=r(d,i):h,u.push(Nr(w))}return u.length&&(n.add=n.materialize(n.ADD).add.concat(u)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=u,n};function Glt(t,e,n,r){var i=function(v){return v(g)},s=[],a=r?r.slice():[],o={},l={},u,c,f,d,h,p,m,g;for(a.forEach(function(v,y){o[v]=y+1}),d=0,m=t.length;d<m;++d)g=t[d],p=n(g),h=o[p]||(o[p]=a.push(p)),c=(u=e?e.map(i):Blt)+"",(f=l[c])||(f=l[c]=[],s.push(f),f.values=u),f[h-1]=g;return s.domain=a,s}function b8(t){ym.call(this,t)}b8.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:vN},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};var Ale=tt(b8,ym);Ale.transform=function(t,e){var n=this,r=t.modified(),i;return n.value&&(r||e.modified(n._inputs))?(i=n.value=r?n.init(t):{},e.visit(e.SOURCE,function(s){n.add(s)})):(i=n.value=n.value||this.init(t),e.visit(e.REM,function(s){n.rem(s)}),e.visit(e.ADD,function(s){n.add(s)})),n.changes(),e.visit(e.SOURCE,function(s){On(s,i[n.cellkey(s)].tuple)}),e.reflow(r).modifies(this._outputs)};Ale.changes=function(){var t=this._adds,e=this._mods,n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(t[n]),t[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(e[n]),e[n]=null;this._alen=this._mlen=0};function Mle(t){Zn.call(this,null,Hlt,t)}tt(Mle,Zn);function Hlt(t){return this.value&&!t.modified()?this.value:NB(t.fields,t.flat)}function Nle(t){Ae.call(this,null,t)}var jlt=tt(Nle,Ae);jlt.transform=function(t,e){e.dataflow.request(this.target,t.url,t.format)};function x8(t){Ae.call(this,{},t)}x8.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};var qlt=tt(x8,Ae);qlt.transform=function(t,e){var n=e,r=t.as,i=t.fields,s=t.index,a=t.values,o=t.default==null?null:t.default,l=t.modified(),u=l?e.SOURCE:e.ADD,c=i.length,f,d,h;return a?(d=a.length,c>1&&!r&&Fe('Multi-field lookup requires explicit "as" parameter.'),r&&r.length!==c*d&&Fe('The "as" parameter has too few output field names.'),r=r||a.map(Go),f=function(p){for(var m=0,g=0,v,y;m<c;++m)if(y=s.get(i[m](p)),y==null)for(v=0;v<d;++v,++g)p[r[g]]=o;else for(v=0;v<d;++v,++g)p[r[g]]=a[v](y)}):(r||Fe("Missing output field names."),f=function(p){for(var m=0,g;m<c;++m)g=s.get(i[m](p)),p[r[m]]=g??o}),l?n=e.reflow(!0):(h=i.some(function(p){return e.modified(p.fields)}),u|=h?e.MOD:0),e.visit(u,f),n.modifies(r)};function $le(t){Zn.call(this,null,Xlt,t)}tt($le,Zn);function Xlt(t){if(this.value&&!t.modified())return this.value;var e=1/0,n=-1/0,r=t.extents,i,s,a;for(i=0,s=r.length;i<s;++i)a=r[i],a[0]<e&&(e=a[0]),a[1]>n&&(n=a[1]);return[e,n]}function Ile(t){Zn.call(this,null,Ylt,t)}tt(Ile,Zn);function Ylt(t){return this.value&&!t.modified()?this.value:t.values.reduce(function(e,n){return e.concat(n)},[])}function w8(t){Ae.call(this,null,t)}tt(w8,Ae);w8.prototype.transform=function(t,e){return this.modified(t.modified()),this.value=t,e.fork(e.NO_SOURCE|e.NO_FIELDS)};function _8(t){ym.call(this,t)}_8.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:vN,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};var fL=tt(_8,ym);fL._transform=fL.transform;fL.transform=function(t,e){return this._transform(Klt(t,e),e)};function Klt(t,e){var n=t.field,r=t.value,i=(t.op==="count"?"__count__":t.op)||"sum",s=va(n).concat(va(r)),a=Jlt(n,t.limit||0,e);return{key:t.key,groupby:t.groupby,ops:a.map(function(){return i}),fields:a.map(function(o){return Zlt(o,n,r,s)}),as:a.map(function(o){return o+""}),modified:t.modified.bind(t)}}function Zlt(t,e,n,r){return Ia(function(i){return e(i)===t?n(i):NaN},r,t+"")}function Jlt(t,e,n){var r={},i=[];return n.visit(n.SOURCE,function(s){var a=t(s);r[a]||(r[a]=1,i.push(a))}),i.sort(function(s,a){return(s<a||s==null)&&a!=null?-1:(s>a||a==null)&&s!=null?1:(a=a instanceof Date?+a:a,(s=s instanceof Date?+s:s)!==s&&a===a?-1:a!==a&&s===s?1:0)}),e?i.slice(0,e):i}function Dle(t){bN.call(this,t)}var Qlt=tt(Dle,bN);Qlt.transform=function(t,e){var n=this,r=t.subflow,i=t.field;return(t.modified("field")||i&&e.modified(va(i)))&&Fe("PreFacet does not support field modification."),this._targets.active=0,e.visit(e.MOD,function(s){var a=n.subflow(Nt(s),r,e,s);i?i(s).forEach(function(o){a.mod(o)}):a.mod(s)}),e.visit(e.ADD,function(s){var a=n.subflow(Nt(s),r,e,s);i?i(s).forEach(function(o){a.add(Nr(o))}):a.add(s)}),e.visit(e.REM,function(s){var a=n.subflow(Nt(s),r,e,s);i?i(s).forEach(function(o){a.rem(o)}):a.rem(s)}),e};function S8(t){Ae.call(this,null,t)}S8.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};var eut=tt(S8,Ae);eut.transform=function(t,e){var n=t.fields,r=Tle(t.fields,t.as||[]),i=n?function(o,l){return tut(o,l,n,r)}:OB,s,a;return this.value?a=this.value:(e=e.addAll(),a=this.value={}),s=e.fork(e.NO_SOURCE),e.visit(e.REM,function(o){var l=Nt(o);s.rem.push(a[l]),a[l]=null}),e.visit(e.ADD,function(o){var l=i(o,Nr({}));a[Nt(o)]=l,s.add.push(l)}),e.visit(e.MOD,function(o){s.mod.push(i(o,a[Nt(o)]))}),s};function tut(t,e,n,r){for(var i=0,s=n.length;i<s;++i)e[r[i]]=n[i](t);return e}function Rle(t){Ae.call(this,null,t)}var nut=tt(Rle,Ae);nut.transform=function(t,e){return this.value=t.value,t.modified("value")?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation};function Ole(t){Ae.call(this,null,t)}var rut=tt(Ole,Ae);rut.transform=function(t,e){var n,r;return this.value?r=this.value:(n=e=e.addAll(),r=this.value={}),t.derive&&(n=e.fork(e.NO_SOURCE),e.visit(e.REM,function(i){var s=Nt(i);n.rem.push(r[s]),r[s]=null}),e.visit(e.ADD,function(i){var s=RB(i);r[Nt(i)]=s,n.add.push(s)}),e.visit(e.MOD,function(i){n.mod.push(OB(i,r[Nt(i)]))})),n};function C8(t){Ae.call(this,[],t),this.count=0}C8.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};var iut=tt(C8,Ae);iut.transform=function(t,e){var n=e.fork(e.NO_SOURCE),r=t.modified("size"),i=t.size,s=this.value,a=this.count,o=0,l=s.reduce(function(d,h){return d[Nt(h)]=1,d},{});function u(d){var h,p;s.length<i?s.push(d):(p=~~((a+1)*nl()),p<s.length&&p>=o&&(h=s[p],l[Nt(h)]&&n.rem.push(h),s[p]=d)),++a}if(e.rem.length&&(e.visit(e.REM,function(d){var h=Nt(d);l[h]&&(l[h]=-1,n.rem.push(d)),--a}),s=s.filter(function(d){return l[Nt(d)]!==-1})),(e.rem.length||r)&&s.length<i&&e.source&&(o=a=s.length,e.visit(e.SOURCE,function(d){l[Nt(d)]||u(d)}),o=-1),r&&s.length>i){for(var c=0,f=s.length-i;c<f;++c)l[Nt(s[c])]=-1,n.rem.push(s[c]);s=s.slice(f)}return e.mod.length&&e.visit(e.MOD,function(d){l[Nt(d)]&&n.mod.push(d)}),e.add.length&&e.visit(e.ADD,u),(e.add.length||o<0)&&(n.add=s.filter(function(d){return!l[Nt(d)]})),this.count=a,this.value=n.source=s,n};function E8(t){Ae.call(this,null,t)}E8.Definition={type:"Sequence",metadata:{changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};var sut=tt(E8,Ae);sut.transform=function(t,e){if(!(this.value&&!t.modified())){var n=e.materialize().fork(e.MOD),r=t.as||"data";return n.rem=this.value?e.rem.concat(this.value):e.rem,this.value=S2(t.start,t.stop,t.step||1).map(function(i){var s={};return s[r]=i,Nr(s)}),n.add=e.add.concat(this.value),n}};function Fle(t){Ae.call(this,null,t),this.modified(!0)}var aut=tt(Fle,Ae);aut.transform=function(t,e){return this.value=e.source,e.changed()?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation};function Lle(t){Ae.call(this,zy(),t)}var out=tt(Lle,Ae);out.transform=function(t,e){var n=e.dataflow,r=t.field,i=this.value,s=!0;function a(o){i.set(r(o),o)}return t.modified("field")||e.modified(r.fields)?(i.clear(),e.visit(e.SOURCE,a)):e.changed()?(e.visit(e.REM,function(o){i.delete(r(o))}),e.visit(e.ADD,a)):s=!1,this.modified(s),i.empty>n.cleanThreshold&&n.runAfter(i.clean),e.fork()};function Ple(t){Ae.call(this,null,t)}var lut=tt(Ple,Ae);lut.transform=function(t,e){var n=!this.value||t.modified("field")||t.modified("sort")||e.changed()||t.sort&&e.modified(t.sort.fields);n&&(this.value=(t.sort?e.source.slice().sort(t.sort):e.source).map(t.field))};function uut(t,e,n,r){var i=jx[t](e,n);return{init:i.init||Oae,update:function(s,a){a[r]=i.next(s)}}}var jx={row_number:function(){return{next:function(t){return t.index+1}}},rank:function(){var t;return{init:function(){t=1},next:function(e){var n=e.index,r=e.data;return n&&e.compare(r[n-1],r[n])?t=n+1:t}}},dense_rank:function(){var t;return{init:function(){t=1},next:function(e){var n=e.index,r=e.data;return n&&e.compare(r[n-1],r[n])?++t:t}}},percent_rank:function(){var t=jx.rank(),e=t.next;return{init:t.init,next:function(n){return(e(n)-1)/(n.data.length-1)}}},cume_dist:function(){var t;return{init:function(){t=0},next:function(e){var n=e.index,r=e.data,i=e.compare;if(t<n){for(;n+1<r.length&&!i(r[n],r[n+1]);)++n;t=n}return(1+t)/r.length}}},ntile:function(t,e){e=+e,e>0||Fe("ntile num must be greater than zero.");var n=jx.cume_dist(),r=n.next;return{init:n.init,next:function(i){return Math.ceil(e*r(i))}}},lag:function(t,e){return e=+e||1,{next:function(n){var r=n.index-e;return r>=0?t(n.data[r]):null}}},lead:function(t,e){return e=+e||1,{next:function(n){var r=n.index+e,i=n.data;return r<i.length?t(i[r]):null}}},first_value:function(t){return{next:function(e){return t(e.data[e.i0])}}},last_value:function(t){return{next:function(e){return t(e.data[e.i1-1])}}},nth_value:function(t,e){return e=+e,e>0||Fe("nth_value nth must be greater than zero."),{next:function(n){var r=n.i0+(e-1);return r<n.i1?t(n.data[r]):null}}}},cut=Object.keys(jx);function zle(t){var e=this,n=qt(t.ops),r=qt(t.fields),i=qt(t.params),s=qt(t.as),a=e.outputs=[],o=e.windows=[],l={},u={},c=!0,f=[],d=[];function h(p){qt(va(p)).forEach(function(m){l[m]=1})}h(t.sort),n.forEach(function(p,m){var g=r[m],v=Go(g),y=Uoe(p,v,s[m]);if(h(g),a.push(y),jx.hasOwnProperty(p))o.push(uut(p,r[m],i[m],y));else{if(g==null&&p!=="count"&&Fe("Null aggregate field specified."),p==="count"){f.push(y);return}c=!1;var b=u[v];b||(b=u[v]=[],b.field=g,d.push(b)),b.push(Voe(p,y))}}),(f.length||d.length)&&(e.cell=fut(d,f,c)),e.inputs=Object.keys(l)}var Ble=zle.prototype;Ble.init=function(){this.windows.forEach(function(t){t.init()}),this.cell&&this.cell.init()};Ble.update=function(t,e){var n=this,r=n.cell,i=n.windows,s=t.data,a=i&&i.length,o;if(r){for(o=t.p0;o<t.i0;++o)r.rem(s[o]);for(o=t.p1;o<t.i1;++o)r.add(s[o]);r.set(e)}for(o=0;o<a;++o)i[o].update(t,e)};function fut(t,e,n){t=t.map(function(l){return Goe(l,l.field)});var r={num:0,agg:null,store:!1,count:e};if(!n)for(var i=t.length,s=r.agg=Array(i),a=0;a<i;++a)s[a]=new t[a](r);if(r.store)var o=r.data=new n8;return r.add=function(l){if(r.num+=1,!n){o&&o.add(l);for(var u=0;u<i;++u)s[u].add(s[u].get(l),l)}},r.rem=function(l){if(r.num-=1,!n){o&&o.rem(l);for(var u=0;u<i;++u)s[u].rem(s[u].get(l),l)}},r.set=function(l){var u,c;for(o&&o.values(),u=0,c=e.length;u<c;++u)l[e[u]]=r.num;if(!n)for(u=0,c=s.length;u<c;++u)s[u].set(l)},r.init=function(){r.num=0,o&&o.reset();for(var l=0;l<i;++l)s[l].init()},r}function T8(t){Ae.call(this,{},t),this._mlen=0,this._mods=[]}T8.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:cut.concat(vN)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};var Ule=tt(T8,Ae);Ule.transform=function(t,e){var n=this,r=n.state,i=t.modified(),s,a;this.stamp=e.stamp,(!r||i)&&(r=n.state=new zle(t));var o=XB(t.groupby);function l(u){return n.group(o(u))}for(i||e.modified(r.inputs)?(n.value={},e.visit(e.SOURCE,function(u){l(u).add(u)})):(e.visit(e.REM,function(u){l(u).remove(u)}),e.visit(e.ADD,function(u){l(u).add(u)})),s=0,a=n._mlen;s<a;++s)dut(n._mods[s],r,t);return n._mlen=0,n._mods=[],e.reflow(i).modifies(r.outputs)};Ule.group=function(t){var e=this,n=e.value[t];return n||(n=e.value[t]=vle(Nt),n.stamp=-1),n.stamp<e.stamp&&(n.stamp=e.stamp,e._mods[e._mlen++]=n),n};function dut(t,e,n){var r=n.sort,i=r&&!n.ignorePeers,s=n.frame||[null,0],a=t.data(r),o=a.length,l=0,u=i?u8(r):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:r||Pu(-1)};for(e.init();l<o;++l)hut(c,s,l,o),i&&put(c,u),e.update(c,a[l])}function hut(t,e,n,r){t.p0=t.i0,t.p1=t.i1,t.i0=e[0]==null?0:Math.max(0,n-Math.abs(e[0])),t.i1=e[1]==null?r:Math.min(r,n+Math.abs(e[1])+1),t.index=n}function put(t,e){var n=t.i0,r=t.i1-1,i=t.compare,s=t.data,a=s.length-1;n>0&&!i(s[n],s[n-1])&&(t.i0=e.left(s,s[n])),r<a&&!i(s[r],s[r+1])&&(t.i1=e.right(s,s[r]))}const mut=Object.freeze(Object.defineProperty({__proto__:null,aggregate:ym,bin:r8,collect:i8,compare:yle,countpattern:s8,cross:o8,density:c8,expression:Cle,extent:f8,facet:bN,field:Ele,filter:p8,flatten:m8,fold:g8,formula:v8,generate:kle,impute:y8,joinaggregate:b8,key:Mle,load:Nle,lookup:x8,multiextent:$le,multivalues:Ile,params:w8,pivot:_8,prefacet:Dle,project:S8,proxy:Rle,relay:Ole,sample:C8,sequence:E8,sieve:Fle,subflow:d8,tupleindex:Lle,values:Ple,window:T8},Symbol.toStringTag,{value:"Module"}));var L0="top",yu="left",md="right",P0="bottom",gut="top-left",vut="top-right",yut="bottom-left",but="bottom-right",xut="start",wut="end",xN="group",Vle="axis",_ut="title",Sut="frame",Cut="scope",k8="legend",Wle="row-header",Gle="row-footer",Hle="row-title",jle="column-header",qle="column-footer",Xle="column-title",Eut="padding",Tut="symbol",Yle="fit",kut="fit-x",Aut="fit-y",Mut="pad",Nut="none",xC="all",bq="each",$ut="flush",hg="column",pg="row";function Xs(t){this.clear(),t&&this.union(t)}var es=Xs.prototype;es.clone=function(){return new Xs(this)};es.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this};es.empty=function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE};es.set=function(t,e,n,r){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),r<e?(this.y2=e,this.y1=r):(this.y1=e,this.y2=r),this};es.add=function(t,e){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this};es.expand=function(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this};es.round=function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this};es.translate=function(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this};es.rotate=function(t,e,n){var r=Math.cos(t),i=Math.sin(t),s=e-e*r+n*i,a=n-e*i-n*r,o=this.x1,l=this.x2,u=this.y1,c=this.y2;return this.clear().add(r*o-i*u+s,i*o+r*u+a).add(r*o-i*c+s,i*o+r*c+a).add(r*l-i*u+s,i*l+r*u+a).add(r*l-i*c+s,i*l+r*c+a)};es.union=function(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this};es.intersect=function(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this};es.encloses=function(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2};es.alignsWith=function(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)};es.intersects=function(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)};es.contains=function(t,e){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)};es.width=function(){return this.x2-this.x1};es.height=function(){return this.y2-this.y1};var Iut=0;function Kle(t,e){var n=[],r;return r={id:"gradient_"+Iut++,x1:t?t[0]:0,y1:t?t[1]:0,x2:e?e[0]:1,y2:e?e[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}function wN(t){this.mark=t,this.bounds=this.bounds||new Xs}function _N(t){wN.call(this,t),this.items=this.items||[]}tt(_N,wN);function A8(t,e){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=t,n.height=e,n}return null}const Dut=()=>typeof Image<"u"?Image:null;function M8(t){this._pending=0,this._loader=t||cN()}var SN=M8.prototype;SN.pending=function(){return this._pending};function Zle(t){t._pending+=1}function K1(t){t._pending-=1}SN.sanitizeURL=function(t){var e=this;return Zle(e),e._loader.sanitize(t,{context:"href"}).then(function(n){return K1(e),n}).catch(function(){return K1(e),null})};SN.loadImage=function(t){var e=this,n=Dut();return Zle(e),e._loader.sanitize(t,{context:"image"}).then(function(r){var i=r.href;if(!i||!n)throw{url:i};var s=new n;return s.onload=function(){K1(e),s.loaded=!0},s.onerror=function(){K1(e),s.loaded=!1},s.src=i,s}).catch(function(r){return K1(e),{loaded:!1,width:0,height:0,src:r&&r.url||""}})};SN.ready=function(){var t=this;return new Promise(function(e){function n(r){t.pending()?setTimeout(function(){n(!0)},10):e(r)}n(!1)})};var dL=Math.PI,hL=2*dL,Dh=1e-6,Rut=hL-Dh;function pL(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function bm(){return new pL}pL.prototype=bm.prototype={constructor:pL,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,s){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+s)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var s=this._x1,a=this._y1,o=n-t,l=r-e,u=s-t,c=a-e,f=u*u+c*c;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>Dh)if(!(Math.abs(c*o-l*u)>Dh)||!i)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var d=n-s,h=r-a,p=o*o+l*l,m=d*d+h*h,g=Math.sqrt(p),v=Math.sqrt(f),y=i*Math.tan((dL-Math.acos((p+f-m)/(2*g*v)))/2),b=y/v,x=y/g;Math.abs(b-1)>Dh&&(this._+="L"+(t+b*u)+","+(e+b*c)),this._+="A"+i+","+i+",0,0,"+ +(c*d>u*h)+","+(this._x1=t+x*o)+","+(this._y1=e+x*l)}},arc:function(t,e,n,r,i,s){t=+t,e=+e,n=+n,s=!!s;var a=n*Math.cos(r),o=n*Math.sin(r),l=t+a,u=e+o,c=1^s,f=s?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+l+","+u:(Math.abs(this._x1-l)>Dh||Math.abs(this._y1-u)>Dh)&&(this._+="L"+l+","+u),n&&(f<0&&(f=f%hL+hL),f>Rut?this._+="A"+n+","+n+",0,1,"+c+","+(t-a)+","+(e-o)+"A"+n+","+n+",0,1,"+c+","+(this._x1=l)+","+(this._y1=u):f>Dh&&(this._+="A"+n+","+n+",0,"+ +(f>=dL)+","+c+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function sr(t){return function(){return t}}var xq=Math.abs,rs=Math.atan2,mh=Math.cos,Out=Math.max,nR=Math.min,nu=Math.sin,Ig=Math.sqrt,ss=1e-12,z0=Math.PI,UT=z0/2,Jle=2*z0;function Fut(t){return t>1?0:t<-1?z0:Math.acos(t)}function wq(t){return t>=1?UT:t<=-1?-UT:Math.asin(t)}function Lut(t){return t.innerRadius}function Put(t){return t.outerRadius}function zut(t){return t.startAngle}function But(t){return t.endAngle}function Uut(t){return t&&t.padAngle}function Vut(t,e,n,r,i,s,a,o){var l=n-t,u=r-e,c=a-i,f=o-s,d=f*l-c*u;if(!(d*d<ss))return d=(c*(e-s)-f*(t-i))/d,[t+d*l,e+d*u]}function wC(t,e,n,r,i,s,a){var o=t-n,l=e-r,u=(a?s:-s)/Ig(o*o+l*l),c=u*l,f=-u*o,d=t+c,h=e+f,p=n+c,m=r+f,g=(d+p)/2,v=(h+m)/2,y=p-d,b=m-h,x=y*y+b*b,w=i-s,S=d*m-p*h,C=(b<0?-1:1)*Ig(Out(0,w*w*x-S*S)),_=(S*b-y*C)/x,E=(-S*y-b*C)/x,T=(S*b+y*C)/x,k=(-S*y+b*C)/x,M=_-g,A=E-v,N=T-g,$=k-v;return M*M+A*A>N*N+$*$&&(_=T,E=k),{cx:_,cy:E,x01:-c,y01:-f,x11:_*(i/w-1),y11:E*(i/w-1)}}function Wut(){var t=Lut,e=Put,n=sr(0),r=null,i=zut,s=But,a=Uut,o=null;function l(){var u,c,f=+t.apply(this,arguments),d=+e.apply(this,arguments),h=i.apply(this,arguments)-UT,p=s.apply(this,arguments)-UT,m=xq(p-h),g=p>h;if(o||(o=u=bm()),d<f&&(c=d,d=f,f=c),!(d>ss))o.moveTo(0,0);else if(m>Jle-ss)o.moveTo(d*mh(h),d*nu(h)),o.arc(0,0,d,h,p,!g),f>ss&&(o.moveTo(f*mh(p),f*nu(p)),o.arc(0,0,f,p,h,g));else{var v=h,y=p,b=h,x=p,w=m,S=m,C=a.apply(this,arguments)/2,_=C>ss&&(r?+r.apply(this,arguments):Ig(f*f+d*d)),E=nR(xq(d-f)/2,+n.apply(this,arguments)),T=E,k=E,M,A;if(_>ss){var N=wq(_/f*nu(C)),$=wq(_/d*nu(C));(w-=N*2)>ss?(N*=g?1:-1,b+=N,x-=N):(w=0,b=x=(h+p)/2),(S-=$*2)>ss?($*=g?1:-1,v+=$,y-=$):(S=0,v=y=(h+p)/2)}var D=d*mh(v),P=d*nu(v),O=f*mh(x),B=f*nu(x);if(E>ss){var H=d*mh(y),te=d*nu(y),q=f*mh(b),Z=f*nu(b),ne;if(m<z0&&(ne=Vut(D,P,q,Z,H,te,O,B))){var G=D-ne[0],he=P-ne[1],ve=H-ne[0],we=te-ne[1],X=1/nu(Fut((G*ve+he*we)/(Ig(G*G+he*he)*Ig(ve*ve+we*we)))/2),ae=Ig(ne[0]*ne[0]+ne[1]*ne[1]);T=nR(E,(f-ae)/(X-1)),k=nR(E,(d-ae)/(X+1))}}S>ss?k>ss?(M=wC(q,Z,D,P,d,k,g),A=wC(H,te,O,B,d,k,g),o.moveTo(M.cx+M.x01,M.cy+M.y01),k<E?o.arc(M.cx,M.cy,k,rs(M.y01,M.x01),rs(A.y01,A.x01),!g):(o.arc(M.cx,M.cy,k,rs(M.y01,M.x01),rs(M.y11,M.x11),!g),o.arc(0,0,d,rs(M.cy+M.y11,M.cx+M.x11),rs(A.cy+A.y11,A.cx+A.x11),!g),o.arc(A.cx,A.cy,k,rs(A.y11,A.x11),rs(A.y01,A.x01),!g))):(o.moveTo(D,P),o.arc(0,0,d,v,y,!g)):o.moveTo(D,P),!(f>ss)||!(w>ss)?o.lineTo(O,B):T>ss?(M=wC(O,B,H,te,f,-T,g),A=wC(D,P,q,Z,f,-T,g),o.lineTo(M.cx+M.x01,M.cy+M.y01),T<E?o.arc(M.cx,M.cy,T,rs(M.y01,M.x01),rs(A.y01,A.x01),!g):(o.arc(M.cx,M.cy,T,rs(M.y01,M.x01),rs(M.y11,M.x11),!g),o.arc(0,0,f,rs(M.cy+M.y11,M.cx+M.x11),rs(A.cy+A.y11,A.cx+A.x11),g),o.arc(A.cx,A.cy,T,rs(A.y11,A.x11),rs(A.y01,A.x01),!g))):o.arc(0,0,f,x,b,g)}if(o.closePath(),u)return o=null,u+""||null}return l.centroid=function(){var u=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,c=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-z0/2;return[mh(c)*u,nu(c)*u]},l.innerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:sr(+u),l):t},l.outerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:sr(+u),l):e},l.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:sr(+u),l):n},l.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:sr(+u),l):r},l.startAngle=function(u){return arguments.length?(i=typeof u=="function"?u:sr(+u),l):i},l.endAngle=function(u){return arguments.length?(s=typeof u=="function"?u:sr(+u),l):s},l.padAngle=function(u){return arguments.length?(a=typeof u=="function"?u:sr(+u),l):a},l.context=function(u){return arguments.length?(o=u??null,l):o},l}function Qle(t){this._context=t}Qle.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function N8(t){return new Qle(t)}function eue(t){return t[0]}function tue(t){return t[1]}function nue(){var t=eue,e=tue,n=sr(!0),r=null,i=N8,s=null;function a(o){var l,u=o.length,c,f=!1,d;for(r==null&&(s=i(d=bm())),l=0;l<=u;++l)!(l<u&&n(c=o[l],l,o))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+t(c,l,o),+e(c,l,o));if(d)return s=null,d+""||null}return a.x=function(o){return arguments.length?(t=typeof o=="function"?o:sr(+o),a):t},a.y=function(o){return arguments.length?(e=typeof o=="function"?o:sr(+o),a):e},a.defined=function(o){return arguments.length?(n=typeof o=="function"?o:sr(!!o),a):n},a.curve=function(o){return arguments.length?(i=o,r!=null&&(s=i(r)),a):i},a.context=function(o){return arguments.length?(o==null?r=s=null:s=i(r=o),a):r},a}function rue(){var t=eue,e=null,n=sr(0),r=tue,i=sr(!0),s=null,a=N8,o=null;function l(c){var f,d,h,p=c.length,m,g=!1,v,y=new Array(p),b=new Array(p);for(s==null&&(o=a(v=bm())),f=0;f<=p;++f){if(!(f<p&&i(m=c[f],f,c))===g)if(g=!g)d=f,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),h=f-1;h>=d;--h)o.point(y[h],b[h]);o.lineEnd(),o.areaEnd()}g&&(y[f]=+t(m,f,c),b[f]=+n(m,f,c),o.point(e?+e(m,f,c):y[f],r?+r(m,f,c):b[f]))}if(v)return o=null,v+""||null}function u(){return nue().defined(i).curve(a).context(s)}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:sr(+c),e=null,l):t},l.x0=function(c){return arguments.length?(t=typeof c=="function"?c:sr(+c),l):t},l.x1=function(c){return arguments.length?(e=c==null?null:typeof c=="function"?c:sr(+c),l):e},l.y=function(c){return arguments.length?(n=typeof c=="function"?c:sr(+c),r=null,l):n},l.y0=function(c){return arguments.length?(n=typeof c=="function"?c:sr(+c),l):n},l.y1=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:sr(+c),l):r},l.lineX0=l.lineY0=function(){return u().x(t).y(n)},l.lineY1=function(){return u().x(t).y(r)},l.lineX1=function(){return u().x(e).y(n)},l.defined=function(c){return arguments.length?(i=typeof c=="function"?c:sr(!!c),l):i},l.curve=function(c){return arguments.length?(a=c,s!=null&&(o=a(s)),l):a},l.context=function(c){return arguments.length?(c==null?s=o=null:o=a(s=c),l):s},l}const Gut={draw:function(t,e){var n=Math.sqrt(e/z0);t.moveTo(n,0),t.arc(0,0,n,0,Jle)}};function Hut(){var t=sr(Gut),e=sr(64),n=null;function r(){var i;if(n||(n=i=bm()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return r.type=function(i){return arguments.length?(t=typeof i=="function"?i:sr(i),r):t},r.size=function(i){return arguments.length?(e=typeof i=="function"?i:sr(+i),r):e},r.context=function(i){return arguments.length?(n=i??null,r):n},r}function Nd(){}function VT(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function CN(t){this._context=t}CN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:VT(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:VT(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function jut(t){return new CN(t)}function iue(t){this._context=t}iue.prototype={areaStart:Nd,areaEnd:Nd,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:VT(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function qut(t){return new iue(t)}function sue(t){this._context=t}sue.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:VT(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Xut(t){return new sue(t)}function aue(t,e){this._basis=new CN(t),this._beta=e}aue.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r=t[0],i=e[0],s=t[n]-r,a=e[n]-i,o=-1,l;++o<=n;)l=o/n,this._basis.point(this._beta*t[o]+(1-this._beta)*(r+l*s),this._beta*e[o]+(1-this._beta)*(i+l*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const Yut=function t(e){function n(r){return e===1?new CN(r):new aue(r,e)}return n.beta=function(r){return t(+r)},n}(.85);function WT(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function $8(t,e){this._context=t,this._k=(1-e)/6}$8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:WT(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:WT(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Kut=function t(e){function n(r){return new $8(r,e)}return n.tension=function(r){return t(+r)},n}(0);function I8(t,e){this._context=t,this._k=(1-e)/6}I8.prototype={areaStart:Nd,areaEnd:Nd,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:WT(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Zut=function t(e){function n(r){return new I8(r,e)}return n.tension=function(r){return t(+r)},n}(0);function D8(t,e){this._context=t,this._k=(1-e)/6}D8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:WT(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Jut=function t(e){function n(r){return new D8(r,e)}return n.tension=function(r){return t(+r)},n}(0);function R8(t,e,n){var r=t._x1,i=t._y1,s=t._x2,a=t._y2;if(t._l01_a>ss){var o=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*o-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*o-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>ss){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*u+t._x1*t._l23_2a-e*t._l12_2a)/c,a=(a*u+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(r,i,s,a,t._x2,t._y2)}function oue(t,e){this._context=t,this._alpha=e}oue.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:R8(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Qut=function t(e){function n(r){return e?new oue(r,e):new $8(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function lue(t,e){this._context=t,this._alpha=e}lue.prototype={areaStart:Nd,areaEnd:Nd,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:R8(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const ect=function t(e){function n(r){return e?new lue(r,e):new I8(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function uue(t,e){this._context=t,this._alpha=e}uue.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:R8(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const tct=function t(e){function n(r){return e?new uue(r,e):new D8(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function cue(t){this._context=t}cue.prototype={areaStart:Nd,areaEnd:Nd,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function nct(t){return new cue(t)}function _q(t){return t<0?-1:1}function Sq(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),o=(s*i+a*r)/(r+i);return(_q(s)+_q(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function Cq(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function rR(t,e,n){var r=t._x0,i=t._y0,s=t._x1,a=t._y1,o=(s-r)/3;t._context.bezierCurveTo(r+o,i+o*e,s-o,a-o*n,s,a)}function GT(t){this._context=t}GT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:rR(this,this._t0,Cq(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,rR(this,Cq(this,n=Sq(this,t,e)),n);break;default:rR(this,this._t0,n=Sq(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function fue(t){this._context=new due(t)}(fue.prototype=Object.create(GT.prototype)).point=function(t,e){GT.prototype.point.call(this,e,t)};function due(t){this._context=t}due.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function rct(t){return new GT(t)}function ict(t){return new fue(t)}function hue(t){this._context=t}hue.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=Eq(t),i=Eq(e),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function Eq(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),a=new Array(n);for(i[0]=0,s[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,a[e]-=r*a[e-1];for(i[n-1]=a[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(a[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function sct(t){return new hue(t)}function EN(t,e){this._context=t,this._t=e}EN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function act(t){return new EN(t,.5)}function oct(t){return new EN(t,0)}function lct(t){return new EN(t,1)}var Tq={basis:{curve:jut},"basis-closed":{curve:qut},"basis-open":{curve:Xut},bundle:{curve:Yut,tension:"beta",value:.85},cardinal:{curve:Kut,tension:"tension",value:0},"cardinal-open":{curve:Jut,tension:"tension",value:0},"cardinal-closed":{curve:Zut,tension:"tension",value:0},"catmull-rom":{curve:Qut,tension:"alpha",value:.5},"catmull-rom-closed":{curve:ect,tension:"alpha",value:.5},"catmull-rom-open":{curve:tct,tension:"alpha",value:.5},linear:{curve:N8},"linear-closed":{curve:nct},monotone:{horizontal:ict,vertical:rct},natural:{curve:sct},step:{curve:act},"step-after":{curve:lct},"step-before":{curve:oct}};function O8(t,e,n){var r=Tq.hasOwnProperty(t)&&Tq[t],i=null;return r&&(i=r.curve||r[e||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}var uct={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},_C=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/];function B0(t){var e=[],n,r,i,s,a,o,l,u,c,f,d;for(n=t.slice().replace(_C[0],"###$1").split(_C[1]).slice(1),u=0,f=n.length;u<f;++u){for(r=n[u],i=r.slice(1).trim().replace(_C[2],"$1###$2").split(_C[3]),o=r.charAt(0),s=[o],c=0,d=i.length;c<d;++c)(a=+i[c])===a&&s.push(a);if(l=uct[o.toLowerCase()],s.length-1>l)for(c=1,d=s.length;c<d;c+=l)e.push([o].concat(s.slice(c,c+l)));else e.push(s)}return e}var iR={},sR={},pue=[].join;function cct(t,e,n,r,i,s,a,o,l){var u=pue.call(arguments);if(iR[u])return iR[u];var c=a*(Math.PI/180),f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);var h=d*(o-t)*.5+f*(l-e)*.5,p=d*(l-e)*.5-f*(o-t)*.5,m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);var g=d/n,v=f/n,y=-f/r,b=d/r,x=g*o+v*l,w=y*o+b*l,S=g*t+v*e,C=y*t+b*e,_=(S-x)*(S-x)+(C-w)*(C-w),E=1/_-.25;E<0&&(E=0);var T=Math.sqrt(E);s==i&&(T=-T);var k=.5*(x+S)-T*(C-w),M=.5*(w+C)+T*(S-x),A=Math.atan2(w-M,x-k),N=Math.atan2(C-M,S-k),$=N-A;$<0&&s===1?$+=2*Math.PI:$>0&&s===0&&($-=2*Math.PI);for(var D=Math.ceil(Math.abs($/(Math.PI*.5+.001))),P=[],O=0;O<D;++O){var B=A+O*$/D,H=A+(O+1)*$/D;P[O]=[k,M,B,H,n,r,f,d]}return iR[u]=P}function fct(t){var e=pue.call(t);if(sR[e])return sR[e];var n=t[0],r=t[1],i=t[2],s=t[3],a=t[4],o=t[5],l=t[6],u=t[7],c=u*a,f=-l*o,d=l*a,h=u*o,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),v=Math.sin(s),y=.5*(s-i),b=Math.sin(y*.5),x=8/3*b*b/Math.sin(y),w=n+p-x*m,S=r+m+x*p,C=n+g,_=r+v,E=C+x*v,T=_-x*g;return sR[e]=[c*w+f*S,d*w+h*S,c*E+f*T,d*E+h*T,c*C+f*_,d*C+h*_]}var ru=["l",0,0,0,0,0,0,0];function dct(t,e){var n=ru[0]=t[0];if(n==="a"||n==="A")ru[1]=e*t[1],ru[2]=e*t[2],ru[3]=t[3],ru[4]=t[4],ru[5]=t[5],ru[6]=e*t[6],ru[7]=e*t[7];else for(var r=1,i=t.length;r<i;++r)ru[r]=e*t[r];return ru}function TN(t,e,n,r,i){var s,a=null,o=0,l=0,u=0,c=0,f,d,h,p;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),t.beginPath&&t.beginPath();for(var m=0,g=e.length;m<g;++m){switch(s=e[m],i!==1&&(s=dct(s,i)),s[0]){case"l":o+=s[1],l+=s[2],t.lineTo(o+n,l+r);break;case"L":o=s[1],l=s[2],t.lineTo(o+n,l+r);break;case"h":o+=s[1],t.lineTo(o+n,l+r);break;case"H":o=s[1],t.lineTo(o+n,l+r);break;case"v":l+=s[1],t.lineTo(o+n,l+r);break;case"V":l=s[1],t.lineTo(o+n,l+r);break;case"m":o+=s[1],l+=s[2],t.moveTo(o+n,l+r);break;case"M":o=s[1],l=s[2],t.moveTo(o+n,l+r);break;case"c":f=o+s[5],d=l+s[6],u=o+s[3],c=l+s[4],t.bezierCurveTo(o+s[1]+n,l+s[2]+r,u+n,c+r,f+n,d+r),o=f,l=d;break;case"C":o=s[5],l=s[6],u=s[3],c=s[4],t.bezierCurveTo(s[1]+n,s[2]+r,u+n,c+r,o+n,l+r);break;case"s":f=o+s[3],d=l+s[4],u=2*o-u,c=2*l-c,t.bezierCurveTo(u+n,c+r,o+s[1]+n,l+s[2]+r,f+n,d+r),u=o+s[1],c=l+s[2],o=f,l=d;break;case"S":f=s[3],d=s[4],u=2*o-u,c=2*l-c,t.bezierCurveTo(u+n,c+r,s[1]+n,s[2]+r,f+n,d+r),o=f,l=d,u=s[1],c=s[2];break;case"q":f=o+s[3],d=l+s[4],u=o+s[1],c=l+s[2],t.quadraticCurveTo(u+n,c+r,f+n,d+r),o=f,l=d;break;case"Q":f=s[3],d=s[4],t.quadraticCurveTo(s[1]+n,s[2]+r,f+n,d+r),o=f,l=d,u=s[1],c=s[2];break;case"t":f=o+s[1],d=l+s[2],a[0].match(/[QqTt]/)===null?(u=o,c=l):a[0]==="t"?(u=2*o-h,c=2*l-p):a[0]==="q"&&(u=2*o-u,c=2*l-c),h=u,p=c,t.quadraticCurveTo(u+n,c+r,f+n,d+r),o=f,l=d,u=o+s[1],c=l+s[2];break;case"T":f=s[1],d=s[2],u=2*o-u,c=2*l-c,t.quadraticCurveTo(u+n,c+r,f+n,d+r),o=f,l=d;break;case"a":kq(t,o+n,l+r,[s[1],s[2],s[3],s[4],s[5],s[6]+o+n,s[7]+l+r]),o+=s[6],l+=s[7];break;case"A":kq(t,o+n,l+r,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+r]),o=s[6],l=s[7];break;case"z":case"Z":t.closePath();break}a=s}}function kq(t,e,n,r){for(var i=cct(r[5],r[6],r[0],r[1],r[3],r[4],r[2],e,n),s=0;s<i.length;++s){var a=fct(i[s]);t.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}}var hct=2*Math.PI,SC=Math.sqrt(3)/2,Aq={circle:{draw:function(t,e){var n=Math.sqrt(e)/2;t.moveTo(n,0),t.arc(0,0,n,0,hct)}},cross:{draw:function(t,e){var n=Math.sqrt(e)/2,r=n/2.5;t.moveTo(-n,-r),t.lineTo(-n,r),t.lineTo(-r,r),t.lineTo(-r,n),t.lineTo(r,n),t.lineTo(r,r),t.lineTo(n,r),t.lineTo(n,-r),t.lineTo(r,-r),t.lineTo(r,-n),t.lineTo(-r,-n),t.lineTo(-r,-r),t.closePath()}},diamond:{draw:function(t,e){var n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.closePath()}},square:{draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},"triangle-up":{draw:function(t,e){var n=Math.sqrt(e)/2,r=SC*n;t.moveTo(0,-r),t.lineTo(-n,r),t.lineTo(n,r),t.closePath()}},"triangle-down":{draw:function(t,e){var n=Math.sqrt(e)/2,r=SC*n;t.moveTo(0,r),t.lineTo(-n,-r),t.lineTo(n,-r),t.closePath()}},"triangle-right":{draw:function(t,e){var n=Math.sqrt(e)/2,r=SC*n;t.moveTo(r,0),t.lineTo(-r,-n),t.lineTo(-r,n),t.closePath()}},"triangle-left":{draw:function(t,e){var n=Math.sqrt(e)/2,r=SC*n;t.moveTo(-r,0),t.lineTo(r,-n),t.lineTo(r,n),t.closePath()}}};function mue(t){return Aq.hasOwnProperty(t)?Aq[t]:pct(t)}var aR={};function pct(t){if(!aR.hasOwnProperty(t)){var e=B0(t);aR[t]={draw:function(n,r){TN(n,e,0,0,Math.sqrt(r)/2)}}}return aR[t]}function mct(t){return t.x}function gct(t){return t.y}function vct(t){return t.width}function yct(t){return t.height}function mg(t){return function(){return t}}function gue(){var t=mct,e=gct,n=vct,r=yct,i=mg(0),s=null;function a(o,l,u){var c,f=l??+t.call(this,o),d=u??+e.call(this,o),h=+n.call(this,o),p=+r.call(this,o),m=+i.call(this,o);if(s||(s=c=bm()),m<=0)s.rect(f,d,h,p);else{var g=f+h,v=d+p;s.moveTo(f+m,d),s.lineTo(g-m,d),s.quadraticCurveTo(g,d,g,d+m),s.lineTo(g,v-m),s.quadraticCurveTo(g,v,g-m,v),s.lineTo(f+m,v),s.quadraticCurveTo(f,v,f,v-m),s.lineTo(f,d+m),s.quadraticCurveTo(f,d,f+m,d),s.closePath()}if(c)return s=null,c+""||null}return a.x=function(o){return arguments.length?(t=typeof o=="function"?o:mg(+o),a):t},a.y=function(o){return arguments.length?(e=typeof o=="function"?o:mg(+o),a):e},a.width=function(o){return arguments.length?(n=typeof o=="function"?o:mg(+o),a):n},a.height=function(o){return arguments.length?(r=typeof o=="function"?o:mg(+o),a):r},a.cornerRadius=function(o){return arguments.length?(i=typeof o=="function"?o:mg(+o),a):i},a.context=function(o){return arguments.length?(s=o??null,a):s},a}var oR=Math.PI;function vue(){var t,e,n,r,i=null,s,a,o,l;function u(f,d,h){var p=h/2;if(s){var m=o-d,g=f-a;if(m||g){var v=Math.sqrt(m*m+g*g),y=(m/=v)*l,b=(g/=v)*l,x=Math.atan2(g,m);i.moveTo(a-y,o-b),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,x-oR,x),i.lineTo(a+y,o+b),i.arc(a,o,l,x,x+oR)}else i.arc(f,d,p,0,2*oR);i.closePath()}else s=1;a=f,o=d,l=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=bm()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&u(+t(p,d,f),+e(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(t=f,c):t},c.y=function(f){return arguments.length?(e=f,c):e},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function C2(t){return t.x||0}function E2(t){return t.y||0}function bct(t){return t.width||0}function xct(t){return t.size||1}function wct(t){return t.height||0}function _ct(t){return(t.x||0)+(t.width||0)}function Sct(t){return(t.y||0)+(t.height||0)}function Cct(t){return t.startAngle||0}function Ect(t){return t.endAngle||0}function Tct(t){return t.padAngle||0}function kct(t){return t.innerRadius||0}function Act(t){return t.outerRadius||0}function yue(t){return t.cornerRadius||0}function kN(t){return t.defined!==!1}function Mct(t){return t.size==null?64:t.size}function Nct(t){return mue(t.shape||"circle")}var $ct=Wut().startAngle(Cct).endAngle(Ect).padAngle(Tct).innerRadius(kct).outerRadius(Act).cornerRadius(yue),Ict=rue().x(C2).y1(E2).y0(Sct).defined(kN),Dct=rue().y(E2).x1(C2).x0(_ct).defined(kN),Rct=nue().x(C2).y(E2).defined(kN),Oct=gue().x(C2).y(E2).width(bct).height(wct).cornerRadius(yue),Fct=Hut().type(Nct).size(Mct),Lct=vue().x(C2).y(E2).defined(kN).size(xct);function Pct(t,e){return $ct.context(t)(e)}function zct(t,e){var n=e[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?Dct:Ict).curve(O8(r,n.orient,n.tension)).context(t)(e)}function Bct(t,e){var n=e[0],r=n.interpolate||"linear";return Rct.curve(O8(r,n.orient,n.tension)).context(t)(e)}function AN(t,e,n,r){return Oct.context(t)(e,n,r)}function Uct(t,e){return(e.mark.shape||e.shape).context(t)(e)}function Vct(t,e){return Fct.context(t)(e)}function Wct(t,e){return Lct.context(t)(e)}function mf(t,e){return e.stroke&&e.opacity!==0&&e.strokeOpacity!==0&&t.expand(e.strokeWidth!=null?+e.strokeWidth:1),t}var bue,Bh=Math.PI*2,Hb=Bh/4,Gct=Bh-1e-8;function Da(t){return bue=t,Da}function xue(){}function Za(t,e){bue.add(t,e)}Da.beginPath=xue;Da.closePath=xue;Da.moveTo=Za;Da.lineTo=Za;Da.rect=function(t,e,n,r){Za(t,e),Za(t+n,e+r)};Da.quadraticCurveTo=function(t,e,n,r){Za(t,e),Za(n,r)};Da.bezierCurveTo=function(t,e,n,r,i,s){Za(t,e),Za(n,r),Za(i,s)};Da.arc=function(t,e,n,r,i,s){if(Math.abs(i-r)>Gct){Za(t-n,e-n),Za(t+n,e+n);return}var a=1/0,o=-1/0,l=1/0,u=-1/0,c,f,d,h;function p(m){d=n*Math.cos(m),h=n*Math.sin(m),d<a&&(a=d),d>o&&(o=d),h<l&&(l=h),h>u&&(u=h)}if(p(r),p(i),i!==r)if(r=r%Bh,r<0&&(r+=Bh),i=i%Bh,i<0&&(i+=Bh),i<r&&(s=!s,c=r,r=i,i=c),s)for(i-=Bh,c=r-r%Hb,f=0;f<4&&c>i;++f,c-=Hb)p(c);else for(c=r-r%Hb+Hb,f=0;f<4&&c<i;++f,c=c+Hb)p(c);Za(t+a,e+l),Za(t+o,e+u)};function Hct(t,e,n){for(var r=n.width(),i=n.height(),s=n.x1+e.x1*r,a=n.y1+e.y1*i,o=n.x1+e.x2*r,l=n.y1+e.y2*i,u=e.stops,c=0,f=u.length,d=t.createLinearGradient(s,a,o,l);c<f;++c)d.addColorStop(u[c].offset,u[c].color);return d}function wue(t,e,n){return n.id?Hct(t,n,e.bounds):n}function F8(t,e,n){return n*=e.fillOpacity==null?1:e.fillOpacity,n>0?(t.globalAlpha=n,t.fillStyle=wue(t,e,e.fill),!0):!1}var jct=[];function MN(t,e,n){var r=(r=e.strokeWidth)!=null?r:1;return r<=0?!1:(n*=e.strokeOpacity==null?1:e.strokeOpacity,n>0?(t.globalAlpha=n,t.strokeStyle=wue(t,e,e.stroke),t.lineWidth=r,t.lineCap=e.strokeCap||"butt",t.lineJoin=e.strokeJoin||"miter",t.miterLimit=e.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(e.strokeDash||jct),t.lineDashOffset=e.strokeDashOffset||0),!0):!1)}function qct(t,e){return t.zindex-e.zindex||t.index-e.index}function L8(t){if(!t.zdirty)return t.zitems;var e=t.items,n=[],r,i,s;for(i=0,s=e.length;i<s;++i)r=e[i],r.index=i,r.zindex&&n.push(r);return t.zdirty=!1,t.zitems=n.sort(qct)}function Ul(t,e){var n=t.items,r,i;if(!(!n||!n.length)){var s=L8(t);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||e(n[r]);n=s}for(r=0,i=n.length;r<i;++r)e(n[r])}}function HT(t,e){var n=t.items,r,i;if(!n||!n.length)return null;var s=L8(t);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=e(n[i]))return r;if(n===s){for(n=t.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=e(n[i])))return r}return null}function P8(t){return function(e,n,r){Ul(n,function(i){(!r||r.intersects(i.bounds))&&_ue(t,e,i,i)})}}function Xct(t){return function(e,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&_ue(t,e,n.items[0],n.items)}}function _ue(t,e,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(t(e,r)||(n.fill&&F8(e,n,i)&&e.fill(),n.stroke&&MN(e,n,i)&&e.stroke()))}var Yct=function(){return!0};function NN(t){return t||(t=Yct),function(e,n,r,i,s,a){return r*=e.pixelRatio,i*=e.pixelRatio,HT(n,function(o){var l=o.bounds;if(!(l&&!l.contains(s,a)||!l)&&t(e,o,r,i,s,a))return o})}}function z8(t,e){return function(n,r,i,s){var a=Array.isArray(r)?r[0]:r,o=e??a.fill,l=a.stroke&&n.isPointInStroke,u,c;return l&&(u=a.strokeWidth,c=a.strokeCap,n.lineWidth=u??1,n.lineCap=c??"butt"),t(n,r)?!1:o&&n.isPointInPath(i,s)||l&&n.isPointInStroke(i,s)}}function B8(t){return NN(z8(t))}function Z1(t,e){return"translate("+t+","+e+")"}function $N(t){return Z1(t.x||0,t.y||0)}function U8(t,e){function n(s,a){s("transform",$N(a)),s("d",e(null,a))}function r(s,a){return e(Da(s),a),mf(s,a).translate(a.x||0,a.y||0)}function i(s,a){var o=a.x||0,l=a.y||0;s.translate(o,l),s.beginPath(),e(s,a),s.translate(-o,-l)}return{type:t,tag:"path",nested:!1,attr:n,bound:r,draw:P8(i),pick:B8(i)}}const Kct=U8("arc",Pct);function Zct(t,e){for(var n=t[0].orient==="horizontal"?e[1]:e[0],r=t[0].orient==="horizontal"?"y":"x",i=t.length,s=1/0,a,o;--i>=0;)t[i].defined!==!1&&(o=Math.abs(t[i][r]-n),o<s&&(s=o,a=t[i]));return a}function Jct(t,e){for(var n=Math.pow(t[0].strokeWidth||1,2),r=t.length,i,s,a;--r>=0;)if(t[r].defined!==!1&&(i=t[r].x-e[0],s=t[r].y-e[1],a=i*i+s*s,a<n))return t[r];return null}function Qct(t,e){for(var n=t.length,r,i,s;--n>=0;)if(t[n].defined!==!1&&(r=t[n].x-e[0],i=t[n].y-e[1],s=r*r+i*i,r=t[n].size||1,s<r*r))return t[n];return null}function V8(t,e,n){function r(l,u){var c=u.mark.items;c.length&&l("d",e(null,c))}function i(l,u){var c=u.items;return c.length===0?l:(e(Da(l),c),mf(l,c[0]))}function s(l,u){l.beginPath(),e(l,u)}var a=z8(s);function o(l,u,c,f,d,h){var p=u.items,m=u.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=l.pixelRatio,f*=l.pixelRatio,a(l,p,c,f)?p[0]:null)}return{type:t,tag:"path",nested:!0,attr:r,bound:i,draw:Xct(s),pick:o,tip:n}}const eft=V8("area",zct,Zct);var Sue=1;function tft(){Sue=1}function W8(t,e,n){var r=e.clip,i=t._defs,s=e.clip_id||(e.clip_id="clip"+Sue++),a=i.clipping[s]||(i.clipping[s]={id:s});return bn(r)?a.path=r(null):(a.width=n.width||0,a.height=n.height||0),"url(#"+s+")"}var Cue=.5;function nft(t,e){t("transform",$N(e))}function rft(t,e){var n=e.stroke?Cue:0;t("class","background"),t("d",AN(null,e,n,n))}function ift(t,e,n){var r=e.clip?W8(n,e,e):null;t("clip-path",r)}function sft(t,e){if(!e.clip&&e.items)for(var n=e.items,r=0,i=n.length;r<i;++r)t.union(n[r].bounds);return(e.clip||e.width||e.height)&&!e.noBound&&t.add(0,0).add(e.width||0,e.height||0),mf(t,e),t.translate(e.x||0,e.y||0)}function Eue(t,e){var n=e.stroke?Cue:0;t.beginPath(),AN(t,e,n,n)}var aft=z8(Eue);function oft(t,e,n){var r=this;Ul(e,function(i){var s=i.x||0,a=i.y||0,o=i.width||0,l=i.height||0,u;t.save(),t.translate(s,a),(i.stroke||i.fill)&&(u=i.opacity==null?1:i.opacity,u>0&&(Eue(t,i),i.fill&&F8(t,i,u)&&t.fill(),i.stroke&&MN(t,i,u)&&t.stroke())),i.clip&&(t.beginPath(),t.rect(0,0,o,l),t.clip()),n&&n.translate(-s,-a),Ul(i,function(c){r.draw(t,c,n)}),n&&n.translate(s,a),t.restore()})}function lft(t,e,n,r,i,s){if(e.bounds&&!e.bounds.contains(i,s)||!e.items)return null;var a=this,o=n*t.pixelRatio,l=r*t.pixelRatio;return HT(e,function(u){var c,f,d,h;if(h=u.bounds,!(h&&!h.contains(i,s)))return f=u.x||0,d=u.y||0,t.save(),t.translate(f,d),f=i-f,d=s-d,c=HT(u,function(p){return uft(p,f,d)?a.pick(p,n,r,f,d):null}),!c&&e.interactive!==!1&&(u.fill||u.stroke)&&aft(t,u,o,l)&&(c=u),t.restore(),c||null})}function uft(t,e,n){return(t.interactive!==!1||t.marktype==="group")&&t.bounds&&t.bounds.contains(e,n)}const cft={type:"group",tag:"g",nested:!1,attr:nft,bound:sft,draw:oft,pick:lft,background:rft,foreground:ift};function G8(t,e){var n=t.image;return(!n||n.url!==t.url)&&(n={loaded:!1,width:0,height:0},e.loadImage(t.url).then(function(r){t.image=r,t.image.url=t.url})),n}function IN(t,e){return t==="center"?e/2:t==="right"?e:0}function DN(t,e){return t==="middle"?e/2:t==="bottom"?e:0}function fft(t,e,n){var r=G8(e,n),i=e.x||0,s=e.y||0,a=(e.width!=null?e.width:r.width)||0,o=(e.height!=null?e.height:r.height)||0,l=e.aspect===!1?"none":"xMidYMid";i-=IN(e.align,a),s-=DN(e.baseline,o),t("href",r.src||"","http://www.w3.org/1999/xlink","xlink:href"),t("transform",Z1(i,s)),t("width",a),t("height",o),t("preserveAspectRatio",l)}function dft(t,e){var n=e.image,r=e.x||0,i=e.y||0,s=(e.width!=null?e.width:n&&n.width)||0,a=(e.height!=null?e.height:n&&n.height)||0;return r-=IN(e.align,s),i-=DN(e.baseline,a),t.set(r,i,r+s,i+a)}function hft(t,e,n){var r=this;Ul(e,function(i){if(!(n&&!n.intersects(i.bounds))){var s=G8(i,r),a=i.x||0,o=i.y||0,l=(i.width!=null?i.width:s.width)||0,u=(i.height!=null?i.height:s.height)||0,c,f,d,h;a-=IN(i.align,l),o-=DN(i.baseline,u),i.aspect!==!1&&(f=s.width/s.height,d=i.width/i.height,f===f&&d===d&&f!==d&&(d<f?(h=l/f,o+=(u-h)/2,u=h):(h=u*f,a+=(l-h)/2,l=h))),s.loaded&&(t.globalAlpha=(c=i.opacity)!=null?c:1,t.drawImage(s,a,o,l,u))}})}const pft={type:"image",tag:"image",nested:!1,attr:fft,bound:dft,draw:hft,pick:NN(),get:G8,xOffset:IN,yOffset:DN},mft=V8("line",Bct,Jct);function gft(t,e){t("transform",$N(e)),t("d",e.path)}function mL(t,e){var n=e.path;if(n==null)return!0;var r=e.pathCache;(!r||r.path!==n)&&((e.pathCache=r=B0(n)).path=n),TN(t,r,e.x,e.y)}function vft(t,e){return mL(Da(t),e)?t.set(0,0,0,0):mf(t,e)}const yft={type:"path",tag:"path",nested:!1,attr:gft,bound:vft,draw:P8(mL),pick:B8(mL)};function bft(t,e){t("d",AN(null,e))}function xft(t,e){var n,r;return mf(t.set(n=e.x||0,r=e.y||0,n+e.width||0,r+e.height||0),e)}function Mq(t,e){t.beginPath(),AN(t,e)}const wft={type:"rect",tag:"path",nested:!1,attr:bft,bound:xft,draw:P8(Mq),pick:B8(Mq)};function _ft(t,e){t("transform",$N(e)),t("x2",e.x2!=null?e.x2-(e.x||0):0),t("y2",e.y2!=null?e.y2-(e.y||0):0)}function Sft(t,e){var n,r;return mf(t.set(n=e.x||0,r=e.y||0,e.x2!=null?e.x2:n,e.y2!=null?e.y2:r),e)}function Tue(t,e,n){var r,i,s,a;return e.stroke&&MN(t,e,n)?(r=e.x||0,i=e.y||0,s=e.x2!=null?e.x2:r,a=e.y2!=null?e.y2:i,t.beginPath(),t.moveTo(r,i),t.lineTo(s,a),!0):!1}function Cft(t,e,n){Ul(e,function(r){if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&Tue(t,r,i)&&t.stroke()}})}function Eft(t,e,n,r){return t.isPointInStroke?Tue(t,e,1)&&t.isPointInStroke(n,r):!1}const Tft={type:"rule",tag:"line",nested:!1,attr:_ft,bound:Sft,draw:Cft,pick:NN(Eft)},kft=U8("shape",Uct),Aft=U8("symbol",Vct);var Qf,H8,jT={height:Kd,measureWidth:Aue,estimateWidth:gL,width:gL,canvas:Nue};Nue(!0);function gL(t){return H8=Kd(t),kue(T2(t))}function kue(t){return~~(.8*t.length*H8)}function Aue(t){return Qf.font=RN(t),Mue(T2(t))}function Mue(t){return Qf.measureText(t).width}function Kd(t){return t.fontSize!=null?t.fontSize:11}function Nue(t){Qf=t&&(Qf=A8(1,1))?Qf.getContext("2d"):null,jT.width=Qf?Aue:gL}function T2(t){var e=t.text;return e==null?"":t.limit>0?Mft(t):e+""}function Mft(t){var e=+t.limit,n=t.text+"",r;if(Qf?(Qf.font=RN(t),r=Mue):(H8=Kd(t),r=kue),r(n)<e)return n;var i=t.ellipsis||"…",s=t.dir==="rtl",a=0,o=n.length,l;if(e-=r(i),s){for(;a<o;)l=a+o>>>1,r(n.slice(l))>e?a=l+1:o=l;return i+n.slice(a)}else{for(;a<o;)l=1+(a+o>>>1),r(n.slice(0,l))<e?a=l:o=l-1;return n.slice(0,a)+i}}function k2(t,e){var n=t.font;return(e&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function RN(t,e){return(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+Kd(t)+"px "+k2(t,e)}function j8(t){var e=t.baseline,n=Kd(t);return Math.round(e==="top"?.79*n:e==="middle"?.3*n:e==="bottom"?-.21*n:0)}var Nft={left:"start",center:"middle",right:"end"},$ft=new Xs;function Ift(t,e){var n=e.dx||0,r=(e.dy||0)+j8(e),i=e.x||0,s=e.y||0,a=e.angle||0,o=e.radius||0,l;o&&(l=(e.theta||0)-Math.PI/2,i+=o*Math.cos(l),s+=o*Math.sin(l)),t("text-anchor",Nft[e.align]||"start"),a?(l=Z1(i,s)+" rotate("+a+")",(n||r)&&(l+=" "+Z1(n,r))):l=Z1(i+n,s+r),t("transform",l)}function $ue(t,e,n){var r=jT.height(e),i=e.align,s=e.radius||0,a=e.x||0,o=e.y||0,l=e.dx||0,u=(e.dy||0)+j8(e)-Math.round(.8*r),c,f;return s&&(f=(e.theta||0)-Math.PI/2,a+=s*Math.cos(f),o+=s*Math.sin(f)),c=jT.width(e),i==="center"?l-=c/2:i==="right"&&(l-=c),t.set(l+=a,u+=o,l+c,u+r),e.angle&&!n&&t.rotate(e.angle*Math.PI/180,a,o),t.expand(n||!c?0:1)}function Dft(t,e,n){Ul(e,function(r){var i,s,a,o,l,u;n&&!n.intersects(r.bounds)||(u=T2(r))&&(i=r.opacity==null?1:r.opacity,i!==0&&(t.font=RN(r),t.textAlign=r.align||"left",s=r.x||0,a=r.y||0,(o=r.radius)&&(l=(r.theta||0)-Math.PI/2,s+=o*Math.cos(l),a+=o*Math.sin(l)),r.angle&&(t.save(),t.translate(s,a),t.rotate(r.angle*Math.PI/180),s=a=0),s+=r.dx||0,a+=(r.dy||0)+j8(r),r.fill&&F8(t,r,i)&&t.fillText(u,s,a),r.stroke&&MN(t,r,i)&&t.strokeText(u,s,a),r.angle&&t.restore()))})}function Rft(t,e,n,r,i,s){if(e.fontSize<=0)return!1;if(!e.angle)return!0;var a=$ue($ft,e,!0),o=-e.angle*Math.PI/180,l=Math.cos(o),u=Math.sin(o),c=e.x,f=e.y,d=l*i-u*s+(c-c*l+f*u),h=u*i+l*s+(f-c*u-f*l);return a.contains(d,h)}const Oft={type:"text",tag:"text",nested:!1,attr:Ift,bound:$ue,draw:Dft,pick:NN(Rft)},Fft=V8("trail",Wct,Qct),tc={arc:Kct,area:eft,group:cft,image:pft,line:mft,path:yft,rect:wft,rule:Tft,shape:kft,symbol:Aft,text:Oft,trail:Fft};function vL(t,e,n){var r=tc[t.mark.marktype],i=e||r.bound;return r.nested&&(t=t.mark),i(t.bounds||(t.bounds=new Xs),t,n)}var Nq={mark:null};function Iue(t,e,n){var r=tc[t.marktype],i=r.bound,s=t.items,a=s&&s.length,o,l,u,c;if(r.nested)return a?u=s[0]:(Nq.mark=t,u=Nq),c=vL(u,i,n),e=e&&e.union(c)||c,e;if(e=e||t.bounds&&t.bounds.clear()||new Xs,a)for(o=0,l=s.length;o<l;++o)e.union(vL(s[o],i,n));return t.bounds=e}var Lft=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","interpolate","tension","orient","defined","url","path","x2","y2","size","shape","text","angle","theta","radius","dx","dy","font","fontSize","fontWeight","fontStyle","fontVariant"];function Due(t,e){return JSON.stringify(t,Lft,e)}function Rue(t){var e=typeof t=="string"?JSON.parse(t):t;return Oue(e)}function Oue(t){var e=t.marktype,n=t.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=e?"mark":"group",n[i][r]=t,n[i].zindex&&(n[i][r].zdirty=!0),(e||r)==="group"&&Oue(n[i]);return e&&Iue(t),t}function q8(t){arguments.length?this.root=Rue(t):(this.root=Lue({marktype:"group",name:"root",role:"frame"}),this.root.items=[new _N(this.root)])}var Fue=q8.prototype;Fue.toJSON=function(t){return Due(this.root,t||0)};Fue.mark=function(t,e,n){e=e||this.root.items[0];var r=Lue(t,e);return e.items[n]=r,r.zindex&&(r.group.zdirty=!0),r};function Lue(t,e){return{bounds:new Xs,clip:!!t.clip,group:e,interactive:t.interactive!==!1,items:[],marktype:t.marktype,name:t.name||void 0,role:t.role||void 0,zindex:t.zindex||0}}function Xg(t,e,n){return!t&&typeof document<"u"&&document.createElement&&(t=document),t?n?t.createElementNS(n,e):t.createElement(e):null}function X8(t,e){e=e.toLowerCase();for(var n=t.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===e)return n[r]}function Tu(t,e,n,r){var i=t.childNodes[e],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=Xg(t.ownerDocument,n,r),t.insertBefore(i,s)),i}function Qc(t,e){for(var n=t.childNodes,r=n.length;r>e;)t.removeChild(n[--r]);return t}function Pue(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}function ON(t,e){var n=e.getBoundingClientRect();return[t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0)]}function Pft(t,e,n,r){var i=t&&t.mark,s,a;if(i&&(s=tc[i.marktype]).tip){for(a=ON(e,n),a[0]-=r[0],a[1]-=r[1];t=t.mark.group;)a[0]-=t.x||0,a[1]-=t.y||0;t=s.tip(i.items,a)}return t}function Zd(t,e){this._active=null,this._handlers={},this._loader=t||cN(),this._tooltip=e||zft}function zft(t,e,n,r){t.element().setAttribute("title",r||"")}var fo=Zd.prototype;fo.initialize=function(t,e,n){return this._el=t,this._obj=n||null,this.origin(e)};fo.element=function(){return this._el};fo.canvas=function(){return this._el&&this._el.firstChild};fo.origin=function(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()};fo.scene=function(t){return arguments.length?(this._scene=t,this):this._scene};fo.on=function(){};fo.off=function(){};fo._handlerIndex=function(t,e,n){for(var r=t?t.length:0;--r>=0;)if(t[r].type===e&&(!n||t[r].handler===n))return r;return-1};fo.handlers=function(t){var e=this._handlers,n=[],r;if(t)n.push.apply(n,e[this.eventName(t)]);else for(r in e)n.push.apply(n,e[r]);return n};fo.eventName=function(t){var e=t.indexOf(".");return e<0?t:t.slice(0,e)};fo.handleHref=function(t,e,n){this._loader.sanitize(n,{context:"href"}).then(function(r){var i=new MouseEvent(t.type,t),s=Xg(null,"a");for(var a in r)s.setAttribute(a,r[a]);s.dispatchEvent(i)}).catch(function(){})};fo.handleTooltip=function(t,e,n){if(e&&e.tooltip!=null){e=Pft(e,t,this.canvas(),this._origin);var r=n&&e&&e.tooltip||null;this._tooltip.call(this._obj,this,t,e,r)}};fo.getItemBoundingClientRect=function(t){if(e=this.canvas()){for(var e,n=e.getBoundingClientRect(),r=this._origin,i=t.bounds,s=i.x1+r[0]+n.left,a=i.y1+r[1]+n.top,o=i.width(),l=i.height();t.mark&&(t=t.mark.group);)s+=t.x||0,a+=t.y||0;return{x:s,y:a,width:o,height:l,left:s,top:a,right:s+o,bottom:a+l}}};function Xl(t){this._el=null,this._bgcolor=null,this._loader=new M8(t)}var cl=Xl.prototype;cl.initialize=function(t,e,n,r,i){return this._el=t,this.resize(e,n,r,i)};cl.element=function(){return this._el};cl.canvas=function(){return this._el&&this._el.firstChild};cl.background=function(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)};cl.resize=function(t,e,n,r){return this._width=t,this._height=e,this._origin=n||[0,0],this._scale=r||1,this};cl.dirty=function(){};cl.render=function(t){var e=this;return e._call=function(){e._render(t)},e._call(),e._call=null,e};cl._render=function(){};cl.renderAsync=function(t){var e=this.render(t);return this._ready?this._ready.then(function(){return e}):Promise.resolve(e)};cl._load=function(t,e){var n=this,r=n._loader[t](e);if(!n._ready){var i=n._call;n._ready=n._loader.ready().then(function(s){s&&i(),n._ready=null})}return r};cl.sanitizeURL=function(t){return this._load("sanitizeURL",t)};cl.loadImage=function(t){return this._load("loadImage",t)};var Bft=["keydown","keypress","keyup","dragenter","dragleave","dragover","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],yL="mousemove",qx="mouseout",bL="click";function A2(t,e){Zd.call(this,t,e),this._down=null,this._touch=null,this._first=!0}var Lr=tt(A2,Zd);Lr.initialize=function(t,e,n){var r=this._canvas=t&&X8(t,"canvas");if(r){var i=this;this.events.forEach(function(s){r.addEventListener(s,function(a){Lr[s]?Lr[s].call(i,a):i.fire(s,a)})})}return Zd.prototype.initialize.call(this,t,e,n)};Lr.canvas=function(){return this._canvas};Lr.context=function(){return this._canvas.getContext("2d")};Lr.events=Bft;Lr.DOMMouseScroll=function(t){this.fire("mousewheel",t)};function zue(t,e,n){return function(r){var i=this._active,s=this.pickEvent(r);s===i?this.fire(t,r):((!i||!i.exit)&&this.fire(n,r),this._active=s,this.fire(e,r),this.fire(t,r))}}function Bue(t){return function(e){this.fire(t,e),this._active=null}}Lr.mousemove=zue("mousemove","mouseover","mouseout");Lr.dragover=zue("dragover","dragenter","dragleave");Lr.mouseout=Bue("mouseout");Lr.dragleave=Bue("dragleave");Lr.mousedown=function(t){this._down=this._active,this.fire("mousedown",t)};Lr.click=function(t){this._down===this._active&&(this.fire("click",t),this._down=null)};Lr.touchstart=function(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",t,!0)};Lr.touchmove=function(t){this.fire("touchmove",t,!0)};Lr.touchend=function(t){this.fire("touchend",t,!0),this._touch=null};Lr.fire=function(t,e,n){var r=n?this._touch:this._active,i=this._handlers[t],s,a;if(e.vegaType=t,t===bL&&r&&r.href?this.handleHref(e,r,r.href):(t===yL||t===qx)&&this.handleTooltip(e,r,t!==qx),i)for(s=0,a=i.length;s<a;++s)i[s].handler.call(this._obj,e,r)};Lr.on=function(t,e){var n=this.eventName(t),r=this._handlers,i=this._handlerIndex(r[n],t,e);return i<0&&(r[n]||(r[n]=[])).push({type:t,handler:e}),this};Lr.off=function(t,e){var n=this.eventName(t),r=this._handlers[n],i=this._handlerIndex(r,t,e);return i>=0&&r.splice(i,1),this};Lr.pickEvent=function(t){var e=ON(t,this._canvas),n=this._origin;return this.pick(this._scene,e[0],e[1],e[0]-n[0],e[1]-n[1])};Lr.pick=function(t,e,n,r,i){var s=this.context(),a=tc[t.marktype];return a.pick.call(this,s,t,e,n,r,i)};function Uft(t,e){var n=e.clip;if(t.save(),t.beginPath(),bn(n))n(t);else{var r=e.group;t.rect(0,0,r.width||0,r.height||0)}t.clip()}function Vft(){return typeof window<"u"&&window.devicePixelRatio||1}var Wft=Vft();function Gft(t,e,n,r,i){var s=typeof HTMLElement<"u"&&t instanceof HTMLElement&&t.parentNode!=null,a=t.getContext("2d"),o=s?Wft:i;return t.width=e*o,t.height=n*o,s&&o!==1&&(t.style.width=e+"px",t.style.height=n+"px"),a.pixelRatio=o,a.setTransform(o,0,0,o,o*r[0],o*r[1]),t}function qT(t){Xl.call(this,t),this._redraw=!1,this._dirty=new Xs}var Jd=tt(qT,Xl),Uue=Xl.prototype,Hft=new Xs;Jd.initialize=function(t,e,n,r,i){return this._canvas=A8(1,1),t&&(Qc(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),Uue.initialize.call(this,t,e,n,r,i)};Jd.resize=function(t,e,n,r){return Uue.resize.call(this,t,e,n,r),Gft(this._canvas,this._width,this._height,this._origin,this._scale),this._redraw=!0,this};Jd.canvas=function(){return this._canvas};Jd.context=function(){return this._canvas?this._canvas.getContext("2d"):null};Jd.dirty=function(t){var e=qft(t.bounds,t.mark.group);this._dirty.union(e)};function jft(t,e,n){return e.expand(1).round(),e.translate(-(n[0]%1),-(n[1]%1)),t.beginPath(),t.rect(e.x1,e.y1,e.width(),e.height()),t.clip(),e}function qft(t,e){if(e==null)return t;for(var n=Hft.clear().union(t);e!=null;e=e.mark.group)n.translate(e.x||0,e.y||0);return n}Jd._render=function(t){var e=this.context(),n=this._origin,r=this._width,i=this._height,s=this._dirty;return e.save(),this._redraw||s.empty()?(this._redraw=!1,s=null):s=jft(e,s,n),this.clear(-n[0],-n[1],r,i),this.draw(e,t,s),e.restore(),this._dirty.clear(),this};Jd.draw=function(t,e,n){var r=tc[e.marktype];e.clip&&Uft(t,e),r.draw.call(this,t,e,n),e.clip&&t.restore()};Jd.clear=function(t,e,n,r){var i=this.context();i.clearRect(t,e,n,r),this._bgcolor!=null&&(i.fillStyle=this._bgcolor,i.fillRect(t,e,n,r))};function Y8(t,e){Zd.call(this,t,e);var n=this;n._hrefHandler=xL(n,function(r,i){i&&i.href&&n.handleHref(r,i,i.href)}),n._tooltipHandler=xL(n,function(r,i){n.handleTooltip(r,i,r.type!==qx)})}var FN=tt(Y8,Zd);FN.initialize=function(t,e,n){var r=this._svg;return r&&(r.removeEventListener(bL,this._hrefHandler),r.removeEventListener(yL,this._tooltipHandler),r.removeEventListener(qx,this._tooltipHandler)),this._svg=r=t&&X8(t,"svg"),r&&(r.addEventListener(bL,this._hrefHandler),r.addEventListener(yL,this._tooltipHandler),r.addEventListener(qx,this._tooltipHandler)),Zd.prototype.initialize.call(this,t,e,n)};FN.canvas=function(){return this._svg};function xL(t,e){return function(n){var r=n.target,i=r.__data__;n.vegaType=n.type,i=Array.isArray(i)?i[0]:i,e.call(t._obj,n,i)}}FN.on=function(t,e){var n=this.eventName(t),r=this._handlers,i=this._handlerIndex(r[n],t,e);if(i<0){var s={type:t,handler:e,listener:xL(this,e)};(r[n]||(r[n]=[])).push(s),this._svg&&this._svg.addEventListener(n,s.listener)}return this};FN.off=function(t,e){var n=this.eventName(t),r=this._handlers[n],i=this._handlerIndex(r,t,e);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this};function Hi(t,e,n){var r="<"+t,i,s;if(e)for(i in e)s=e[i],s!=null&&(r+=" "+i+'="'+s+'"');return n&&(r+=" "+n),r+">"}function ji(t){return"</"+t+">"}const Xx={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"};var K8={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},XT=Object.keys(K8),Ho=Xx.xmlns;function Z8(t){Xl.call(this,t),this._dirtyID=1,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var Ra=tt(Z8,Xl),J8=Xl.prototype;Ra.initialize=function(t,e,n,r){return t&&(this._svg=Tu(t,0,"svg",Ho),this._svg.setAttribute("class","marks"),Qc(t,1),this._root=Tu(this._svg,0,"g",Ho),Qc(this._svg,1)),this._defs={gradient:{},clipping:{}},this.background(this._bgcolor),J8.initialize.call(this,t,e,n,r)};Ra.background=function(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),J8.background.apply(this,arguments)};Ra.resize=function(t,e,n,r){return J8.resize.call(this,t,e,n,r),this._svg&&(this._svg.setAttribute("width",this._width*this._scale),this._svg.setAttribute("height",this._height*this._scale),this._svg.setAttribute("viewBox","0 0 "+this._width+" "+this._height),this._root.setAttribute("transform","translate("+this._origin+")")),this._dirty=[],this};Ra.canvas=function(){return this._svg};Ra.svg=function(){if(!this._svg)return null;var t={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var e in Xx)t[e]=Xx[e];var n=this._bgcolor?Hi("rect",{width:this._width,height:this._height,style:"fill: "+this._bgcolor+";"})+ji("rect"):"";return Hi("svg",t)+n+this._svg.innerHTML+ji("svg")};Ra._render=function(t){return this._dirtyCheck()&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,t),Qc(this._root,1)),this.updateDefs(),this._dirty=[],++this._dirtyID,this};Ra.updateDefs=function(){var t=this._svg,e=this._defs,n=e.el,r=0,i;for(i in e.gradient)n||(e.el=n=Tu(t,0,"defs",Ho)),Xft(n,e.gradient[i],r++);for(i in e.clipping)n||(e.el=n=Tu(t,0,"defs",Ho)),Yft(n,e.clipping[i],r++);n&&(r===0?(t.removeChild(n),e.el=null):Qc(n,r))};function Xft(t,e,n){var r,i,s;for(t=Tu(t,n,"linearGradient",Ho),t.setAttribute("id",e.id),t.setAttribute("x1",e.x1),t.setAttribute("x2",e.x2),t.setAttribute("y1",e.y1),t.setAttribute("y2",e.y2),r=0,i=e.stops.length;r<i;++r)s=Tu(t,r,"stop",Ho),s.setAttribute("offset",e.stops[r].offset),s.setAttribute("stop-color",e.stops[r].color);Qc(t,r)}function Yft(t,e,n){var r;t=Tu(t,n,"clipPath",Ho),t.setAttribute("id",e.id),e.path?(r=Tu(t,0,"path",Ho),r.setAttribute("d",e.path)):(r=Tu(t,0,"rect",Ho),r.setAttribute("x",0),r.setAttribute("y",0),r.setAttribute("width",e.width),r.setAttribute("height",e.height))}Ra._resetDefs=function(){var t=this._defs;t.gradient={},t.clipping={}};Ra.dirty=function(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))};Ra.isDirty=function(t){return this._dirtyAll||!t._svg||t.dirty===this._dirtyID};Ra._dirtyCheck=function(){this._dirtyAll=!0;var t=this._dirty;if(!t.length)return!0;var e=++this._dirtyID,n,r,i,s,a,o,l;for(a=0,o=t.length;a<o;++a)if(n=t[a],r=n.mark,r.marktype!==i&&(i=r.marktype,s=tc[i]),r.zdirty&&r.dirty!==e&&(this._dirtyAll=!1,$q(n,e),r.items.forEach(function(u){u.dirty=e})),!r.zdirty){if(n.exit){s.nested&&r.items.length?(l=r.items[0],l._svg&&this._update(s,l._svg,l)):n._svg&&(l=n._svg.parentNode,l&&l.removeChild(n._svg)),n._svg=null;continue}n=s.nested?r.items[0]:n,n._update!==e&&(!n._svg||!n._svg.ownerSVGElement?(this._dirtyAll=!1,$q(n,e)):this._update(s,n._svg,n),n._update=e)}return!this._dirtyAll};function $q(t,e){for(;t&&t.dirty!==e;t=t.mark.group)if(t.dirty=e,t.mark&&t.mark.dirty!==e)t.mark.dirty=e;else return}Ra.draw=function(t,e,n){if(!this.isDirty(e))return e._svg;var r=this,i=this._svg,s=tc[e.marktype],a=e.interactive===!1?"none":null,o=s.tag==="g",l=null,u=0,c;c=Iq(e,t,n,"g",i),c.setAttribute("class",Pue(e)),o||c.style.setProperty("pointer-events",a),e.clip?c.setAttribute("clip-path",W8(r,e,e.group)):c.removeAttribute("clip-path");function f(d){var h=r.isDirty(d),p=Iq(d,c,l,s.tag,i);h&&(r._update(s,p,d),o&&Kft(r,p,d)),l=p,++u}return s.nested?e.items.length&&f(e.items[0]):Ul(e,f),Qc(c,u),c};function Kft(t,e,n){e=e.lastChild;var r,i=0;Ul(n,function(s){r=t.draw(e,s,r),++i}),Qc(e,1+i)}function Iq(t,e,n,r,i){var s=t._svg,a;if(!s&&(a=e.ownerDocument,s=Xg(a,r,Ho),t._svg=s,t.mark&&(s.__data__=t,s.__values__={fill:"default"},r==="g"))){var o=Xg(a,"path",Ho);o.setAttribute("class","background"),s.appendChild(o),o.__data__=t;var l=Xg(a,"g",Ho);s.appendChild(l),l.__data__=t}return(s.ownerSVGElement!==i||Zft(t)&&s.previousSibling!==n)&&e.insertBefore(s,n?n.nextSibling:e.firstChild),s}function Zft(t){var e=t.mark||t.group;return e&&e.items.length>1}var Nc=null,$o=null,Jft={group:function(t,e,n){$o=e.__values__,Nc=e.childNodes[1],t.foreground(wL,n,this),Nc=e.childNodes[0],t.background(wL,n,this);var r=n.mark.interactive===!1?"none":null;r!==$o.events&&(Nc.style.setProperty("pointer-events",r),$o.events=r)},text:function(t,e,n){var r;r=T2(n),r!==$o.text&&(e.textContent=r,$o.text=r),jb(e,"font-family",k2(n)),jb(e,"font-size",Kd(n)+"px"),jb(e,"font-style",n.fontStyle),jb(e,"font-variant",n.fontVariant),jb(e,"font-weight",n.fontWeight)}};function jb(t,e,n){n!==$o[e]&&(n==null?t.style.removeProperty(e):t.style.setProperty(e,n+""),$o[e]=n)}Ra._update=function(t,e,n){Nc=e,$o=e.__values__,t.attr(wL,n,this);var r=Jft[t.type];r&&r.call(this,t,e,n),this.style(Nc,n)};function wL(t,e,n){e!==$o[t]&&(e!=null?n?Nc.setAttributeNS(n,t,e):Nc.setAttribute(t,e):n?Nc.removeAttributeNS(n,t):Nc.removeAttribute(t),$o[t]=e)}Ra.style=function(t,e){if(e!=null){var n,r,i,s,a;for(n=0,r=XT.length;n<r;++n)i=XT[n],a=e[i],i==="font"&&(a=k2(e)),a!==$o[i]&&(s=K8[i],a==null?s==="fill"?t.style.setProperty(s,"none"):t.style.removeProperty(s):(a.id&&(this._defs.gradient[a.id]=a,a="url("+Qft()+"#"+a.id+")"),t.style.setProperty(s,a+"")),$o[i]=a)}};function Qft(){var t;return typeof window>"u"?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}function Q8(t){Xl.call(this,t),this._text={head:"",bg:"",root:"",foot:"",defs:"",body:""},this._defs={gradient:{},clipping:{}}}var gf=tt(Q8,Xl),Vue=Xl.prototype;gf.resize=function(t,e,n,r){Vue.resize.call(this,t,e,n,r);var i=this._origin,s=this._text,a={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var o in Xx)a[o]=Xx[o];s.head=Hi("svg",a);var l=this._bgcolor;return(l==="transparent"||l==="none")&&(l=null),l?s.bg=Hi("rect",{width:this._width,height:this._height,style:"fill: "+l+";"})+ji("rect"):s.bg="",s.root=Hi("g",{transform:"translate("+i+")"}),s.foot=ji("g")+ji("svg"),this};gf.background=function(){var t=Vue.background.apply(this,arguments);return arguments.length&&this._text.head&&this.resize(this._width,this._height,this._origin,this._scale),t};gf.svg=function(){var t=this._text;return t.head+t.bg+t.defs+t.root+t.body+t.foot};gf._render=function(t){return this._text.body=this.mark(t),this._text.defs=this.buildDefs(),this};gf.buildDefs=function(){var t=this._defs,e="",n,r,i,s;for(r in t.gradient){for(i=t.gradient[r],s=i.stops,e+=Hi("linearGradient",{id:r,x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2}),n=0;n<s.length;++n)e+=Hi("stop",{offset:s[n].offset,"stop-color":s[n].color})+ji("stop");e+=ji("linearGradient")}for(r in t.clipping)i=t.clipping[r],e+=Hi("clipPath",{id:r}),i.path?e+=Hi("path",{d:i.path})+ji("path"):e+=Hi("rect",{x:0,y:0,width:i.width,height:i.height})+ji("rect"),e+=ji("clipPath");return e.length>0?Hi("defs")+e+ji("defs"):""};var _L;function edt(t,e,n,r){_L[r||t]=e}gf.attributes=function(t,e){return _L={},t(edt,e,this),_L};gf.href=function(t){var e=this,n=t.href,r;if(n){if(r=e._hrefs&&e._hrefs[n])return r;e.sanitizeURL(n).then(function(i){i["xlink:href"]=i.href,i.href=null,(e._hrefs||(e._hrefs={}))[n]=i})}return null};gf.mark=function(t){var e=this,n=tc[t.marktype],r=n.tag,i=this._defs,s="",a;r!=="g"&&t.interactive===!1&&(a='style="pointer-events: none;"'),s+=Hi("g",{class:Pue(t),"clip-path":t.clip?W8(e,t,t.group):null},a);function o(l){var u=e.href(l);u&&(s+=Hi("a",u)),a=r!=="g"?Dq(l,t,r,i):null,s+=Hi(r,e.attributes(n.attr,l),a),r==="text"?s+=tdt(T2(l)):r==="g"&&(s+=Hi("path",e.attributes(n.background,l),Dq(l,t,"bgrect",i))+ji("path"),s+=Hi("g",e.attributes(n.foreground,l))+e.markGroup(l)+ji("g")),s+=ji(r),u&&(s+=ji("a"))}return n.nested?t.items&&t.items.length&&o(t.items[0]):Ul(t,o),s+ji("g")};gf.markGroup=function(t){var e=this,n="";return Ul(t,function(r){n+=e.mark(r)}),n};function Dq(t,e,n,r){if(t==null)return"";var i,s,a,o,l,u="";for(n==="bgrect"&&e.interactive===!1&&(u+="pointer-events: none; "),n==="text"&&(u+="font-family: "+k2(t)+"; ",u+="font-size: "+Kd(t)+"px; ",t.fontStyle&&(u+="font-style: "+t.fontStyle+"; "),t.fontVariant&&(u+="font-variant: "+t.fontVariant+"; "),t.fontWeight&&(u+="font-weight: "+t.fontWeight+"; ")),i=0,s=XT.length;i<s;++i)a=XT[i],o=K8[a],l=t[a],l==null?o==="fill"&&(u+="fill: none; "):l==="transparent"&&(o==="fill"||o==="stroke")?u+=o+": none; ":(l.id&&(r.gradient[l.id]=l,l="url(#"+l.id+")"),u+=o+": "+l+"; ");return u?'style="'+u.trim()+'"':null}function tdt(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Wue="canvas",Gue="png",Hue="svg",jue="none",ed={Canvas:Wue,PNG:Gue,SVG:Hue,None:jue},U0={};U0[Wue]=U0[Gue]={renderer:qT,headless:qT,handler:A2};U0[Hue]={renderer:Z8,headless:Q8,handler:Y8};U0[jue]={};function LN(t,e){return t=String(t||"").toLowerCase(),arguments.length>1?(U0[t]=e,this):U0[t]}var lR=new Xs;function que(t){var e=t.clip;if(bn(e))e(Da(lR.clear()));else if(e)lR.set(0,0,t.group.width,t.group.height);else return;t.bounds.intersect(lR)}var ndt=1e-9;function e7(t,e,n){return t===e?!0:n==="path"?Xue(t,e):t instanceof Date&&e instanceof Date?+t==+e:ei(t)&&ei(e)?Math.abs(t-e)<=ndt:!t||!e||!Gt(t)&&!Gt(e)?t==e:t==null||e==null?!1:rdt(t,e)}function Xue(t,e){return e7(B0(t),B0(e))}function rdt(t,e){var n=Object.keys(t),r=Object.keys(e),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!e7(t[i],e[i],i))return!1;return typeof t==typeof e}function Yue(t){Ae.call(this,null,t)}var idt=tt(Yue,Ae);idt.transform=function(t,e){var n=e.dataflow,r=t.mark,i=r.marktype,s=tc[i],a=s.bound,o=r.bounds,l;return s.nested?(r.items.length&&n.dirty(r.items[0]),o=CC(r,a),r.items.forEach(function(u){u.bounds.clear().union(o)})):i===xN||t.modified()?(e.visit(e.MOD,function(u){n.dirty(u)}),o.clear(),r.items.forEach(function(u){o.union(CC(u,a))}),r.role===k8&&e.reflow()):(l=e.changed(e.REM),e.visit(e.ADD,function(u){o.union(CC(u,a))}),e.visit(e.MOD,function(u){l=l||o.alignsWith(u.bounds),n.dirty(u),o.union(CC(u,a))}),l&&(o.clear(),r.items.forEach(function(u){o.union(u.bounds)}))),que(r),e.modifies("bounds")};function CC(t,e,n){return e(t.bounds.clear(),t,n)}var Rq=":vega_identifier:";function t7(t){Ae.call(this,0,t)}t7.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};var sdt=tt(t7,Ae);sdt.transform=function(t,e){var n=adt(e.dataflow),r=n.value,i=t.as;return e.visit(e.ADD,function(s){s[i]||(s[i]=++r)}),n.set(this.value=r),e};function adt(t){var e=t._signals[Rq];return e||(t._signals[Rq]=e=t.add(0)),e}function Kue(t){Ae.call(this,null,t)}var odt=tt(Kue,Ae);odt.transform=function(t,e){var n=this.value;n||(n=e.dataflow.scenegraph().mark(t.markdef,ldt(t),t.index),n.group.context=t.context,t.context.group||(t.context.group=n.group),n.source=this,n.clip=t.clip,n.interactive=t.interactive,this.value=n);var r=n.marktype===xN?_N:wN;return e.visit(e.ADD,function(i){r.call(i,n)}),(t.modified("clip")||t.modified("interactive"))&&(n.clip=t.clip,n.interactive=!!t.interactive,n.zdirty=!0,e.reflow()),n.items=e.source,e};function ldt(t){var e=t.groups,n=t.parent;return e&&e.size===1?e.get(Object.keys(e.object)[0]):e&&n?e.lookup(n):null}function Zue(t){Ae.call(this,null,t)}var udt=tt(Zue,Ae),Oq={parity:function(t){return t.filter(function(e,n){return n%2?e.opacity=0:1})},greedy:function(t){var e;return t.filter(function(n,r){return!r||!Jue(e.bounds,n.bounds)?(e=n,1):n.opacity=0})}};function Jue(t,e){return!(t.x2-1<e.x1||t.x1+1>e.x2||t.y2-1<e.y1||t.y1+1>e.y2)}function Fq(t){for(var e=1,n=t.length,r=t[0].bounds,i;e<n;r=i,++e)if(Jue(r,i=t[e].bounds))return!0}function cdt(t){var e=t.bounds;return e.width()>1&&e.height()>1}function fdt(t,e,n){var r=t.range(),i=new Xs;return e===L0||e===P0?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),function(s){return i.encloses(s.bounds)}}function Lq(t){return t.forEach(function(e){e.opacity=1}),t}function Pq(t,e){return t.reflow(e.modified()).modifies("opacity")}udt.transform=function(t,e){var n=Oq[t.method]||Oq.parity,r=e.materialize(e.SOURCE).source,i,s;if(r){if(!t.method)return t.modified("method")&&(Lq(r),e=Pq(e,t)),e;if(t.sort&&(r=r.slice().sort(t.sort)),t.method==="greedy"&&(r=r.filter(cdt)),i=Lq(r),e=Pq(e,t),i.length>=3&&Fq(i)){do i=n(i);while(i.length>=3&&Fq(i));i.length<3&&!Cn(r).opacity&&(i.length>1&&(Cn(i).opacity=0),Cn(r).opacity=1)}return t.boundScale&&t.boundTolerance>=0&&(s=fdt(t.boundScale,t.boundOrient,+t.boundTolerance),r.forEach(function(a){s(a)||(a.opacity=0)})),e}};function Que(t){Ae.call(this,null,t)}var ddt=tt(Que,Ae);ddt.transform=function(t,e){var n=e.dataflow;if(e.visit(e.ALL,function(i){n.dirty(i)}),e.fields&&e.fields.zindex){var r=e.source&&e.source[0];r&&(r.mark.zdirty=!0)}};function hdt(t){for(var e=t.items,n=e.length,r=0,i,s,a={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};r<n;++r)if(i=e[r],s=i.items,i.marktype===xN)switch(i.role){case Vle:case k8:break;case Wle:qb(s,a.rowheaders);break;case Gle:qb(s,a.rowfooters);break;case jle:qb(s,a.colheaders);break;case qle:qb(s,a.colfooters);break;case Hle:a.rowtitle=s[0];break;case Xle:a.coltitle=s[0];break;default:qb(s,a.marks)}return a}function qb(t,e){for(var n=0,r=t.length;n<r;++n)e.push(t[n])}function pdt(t){return{x1:0,y1:0,x2:t.width||0,y2:t.height||0}}function mdt(t){var e=t.bounds.clone();return e.empty()?e.set(0,0,0,0):e.translate(-(t.x||0),-(t.y||0))}function gdt(t,e){return e==="x1"?t.x||0:e==="y1"?t.y||0:e==="x2"?(t.x||0)+(t.width||0):e==="y2"?(t.y||0)+(t.height||0):void 0}function vdt(t,e){return t.bounds[e]}function Si(t,e,n){var r=Gt(t)?t[e]:t;return r??(n!==void 0?n:0)}function zq(t){return t<0?Math.ceil(-t):0}function ydt(t,e,n){var r=hdt(e),i=r.marks,s=n.bounds===$ut,a=s?pdt:mdt,o=new Xs(0),l=Si(n.align,hg),u=Si(n.align,pg),c=Si(n.padding,hg),f=Si(n.padding,pg),d=n.offset,h=e.columns||n.columns||i.length,p=h<0?1:Math.ceil(i.length/h),m=p*h,g=[],v=[],y=0,b=0,x=[],w=[],S=0,C=0,_=i.length,E,T,k,M,A,N,$,D,P,O,B,H;for(T=0;T<h;++T)v[T]=0;for(T=0;T<p;++T)w[T]=0;for(T=0;T<_;++T)A=a(i[T]),k=T%h,M=~~(T/h),$=Math.ceil(a(i[T]).x2),D=Math.ceil(a(i[T]).y2),y=Math.max(y,$),S=Math.max(S,D),v[k]=Math.max(v[k],$),w[M]=Math.max(w[M],D),g.push(c+zq(A.x1)),x.push(f+zq(A.y1)),t.dirty(i[T]);for(T=0;T<_;++T)T%h===0&&(g[T]=b),T<h&&(x[T]=C);if(l===bq)for(k=1;k<h;++k){for(H=0,T=k;T<_;T+=h)H<g[T]&&(H=g[T]);for(T=k;T<_;T+=h)g[T]=H+v[k-1]}else if(l===xC){for(H=0,T=0;T<_;++T)T%h&&H<g[T]&&(H=g[T]);for(T=0;T<_;++T)T%h&&(g[T]=H+y)}else for(l=!1,k=1;k<h;++k)for(T=k;T<_;T+=h)g[T]+=v[k-1];if(u===bq)for(M=1;M<p;++M){for(H=0,T=M*h,E=T+h;T<E;++T)H<x[T]&&(H=x[T]);for(T=M*h;T<E;++T)x[T]=H+w[M-1]}else if(u===xC){for(H=0,T=h;T<_;++T)H<x[T]&&(H=x[T]);for(T=h;T<_;++T)x[T]=H+S}else for(u=!1,M=1;M<p;++M)for(T=M*h,E=T+h;T<E;++T)x[T]+=w[M-1];for(P=0,T=0;T<_;++T)N=i[T],$=N.x||0,N.x=P=g[T]+(T%h?P:0),N.bounds.translate(P-$,0);for(k=0;k<h;++k)for(O=0,T=k;T<_;T+=h)N=i[T],D=N.y||0,N.y=O+=x[T],N.bounds.translate(0,O-D);if(Si(n.center,hg)&&p>1&&l)for(T=0;T<_;++T)N=i[T],A=l===xC?y:v[T%h],P=A-a(N).x2,P>0&&(N.x+=$=P/2,N.bounds.translate($,0));if(Si(n.center,pg)&&h!==1&&u)for(T=0;T<_;++T)N=i[T],A=u===xC?S:w[~~(T/h)],O=A-a(N).y2,O>0&&(N.y+=D=O/2,N.bounds.translate(0,D));for(T=0;T<_;++T)i[T].mark.bounds.clear();for(T=0;T<_;++T)N=i[T],t.dirty(N),o.union(N.mark.bounds.union(N.bounds));function te(Z,ne){return Math.floor(Math.min(Z,ne))}function q(Z,ne){return Math.ceil(Math.max(Z,ne))}a=s?gdt:vdt,B=Si(n.headerBand,pg,null),P=EC(t,r.rowheaders,i,h,p,-Si(d,"rowHeader"),te,0,a,"x1",0,h,1,B),B=Si(n.headerBand,hg,null),O=EC(t,r.colheaders,i,h,h,-Si(d,"columnHeader"),te,1,a,"y1",0,1,h,B),B=Si(n.footerBand,pg,null),EC(t,r.rowfooters,i,h,p,Si(d,"rowFooter"),q,0,a,"x2",h-1,h,1,B),B=Si(n.footerBand,hg,null),EC(t,r.colfooters,i,h,h,Si(d,"columnFooter"),q,1,a,"y2",m-h,1,h,B),r.rowtitle&&(H=P-Si(d,"rowTitle"),B=Si(n.titleBand,pg,.5),Bq(t,r.rowtitle,H,0,o,B)),r.coltitle&&(H=O-Si(d,"columnTitle"),B=Si(n.titleBand,hg,.5),Bq(t,r.coltitle,H,1,o,B))}function EC(t,e,n,r,i,s,a,o,l,u,c,f,d,h){var p=n.length,m=0,g=0,v,y,b,x,w,S,C,_,E;if(!p)return m;for(v=c;v<p;v+=f)n[v]&&(m=a(m,l(n[v],u)));if(!e.length)return m;for(e.length>i&&(t.warn("Grid headers exceed limit: "+i),e=e.slice(0,i)),m+=s,y=0,x=e.length;y<x;++y)t.dirty(e[y]),e[y].mark.bounds.clear();for(v=c,y=0,x=e.length;y<x;++y,v+=f){for(S=e[y],w=S.mark.bounds,b=v;b>=0&&(C=n[b])==null;b-=d);o?(_=h==null?C.x:Math.round(C.bounds.x1+h*C.bounds.width()),E=m):(_=m,E=h==null?C.y:Math.round(C.bounds.y1+h*C.bounds.height())),w.union(S.bounds.translate(_-(S.x||0),E-(S.y||0))),S.x=_,S.y=E,t.dirty(S),g=a(g,w[u])}return g}function Bq(t,e,n,r,i,s){if(e){t.dirty(e);var a=n,o=n;r?a=Math.round(i.x1+s*i.width()):o=Math.round(i.y1+s*i.height()),e.bounds.translate(a-(e.x||0),o-(e.y||0)),e.mark.bounds.clear().union(e.bounds),e.x=a,e.y=o,t.dirty(e)}}var Uq=.5,Op=new Xs;function ece(t){Ae.call(this,null,t)}var bdt=tt(ece,Ae);bdt.transform=function(t,e){var n=e.dataflow;return t.mark.items.forEach(function(r){t.layout&&ydt(n,r,t.layout),xdt(n,r,t)}),t.modified()&&e.reflow(),e};function xdt(t,e,n){var r=e.items,i=Math.max(0,e.width||0),s=Math.max(0,e.height||0),a=new Xs().set(0,0,i,s),o=a.clone(),l=a.clone(),u=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case Vle:h=wdt(f)?o:l,h.union(Sdt(t,f,i,s));break;case _ut:c=f;break;case k8:u.push(f);break;case Sut:case Cut:case Wle:case Gle:case Hle:case jle:case qle:case Xle:o.union(f.bounds),l.union(f.bounds);break;default:a.union(f.bounds)}if(u.length)for(d={leftWidth:Edt(t,u),margin:n.legendMargin||8,left:0,right:0,top:0,bottom:0},p=0,m=u.length;p<m;++p)if(h=kdt(t,u[p],d,o,l,i,s),n.autosize&&n.autosize.type===Yle){var g=u[p].items[0].datum.orient;g===yu||g===md?a.add(h.x1,0).add(h.x2,0):(g===L0||g===P0)&&a.add(0,h.y1).add(0,h.y2)}else a.union(h);a.union(o).union(l),c&&a.union(Cdt(t,c,i,s,a)),Mdt(t,e,a,n)}function td(t,e,n){return t[e]===n?0:(t[e]=n,1)}function wdt(t){var e=t.items[0].datum.orient;return e===yu||e===md}function _dt(t){var e=+t.grid;return[t.ticks?e++:-1,t.labels?e++:-1,e+ +t.domain]}function Sdt(t,e,n,r){var i=e.items[0],s=i.datum,a=s.orient,o=_dt(s),l=i.range,u=i.offset,c=i.position,f=i.minExtent,d=i.maxExtent,h=s.title&&i.items[o[2]].items[0],p=i.titlePadding,m=i.bounds,g=0,v=0,y,b;switch(Op.clear().union(m),m.clear(),(y=o[0])>-1&&m.union(i.items[y].bounds),(y=o[1])>-1&&m.union(i.items[y].bounds),a){case L0:g=c||0,v=-u,b=Math.max(f,Math.min(d,-m.y1)),h&&(b=TC(h,b,p,0,-1,m)),m.add(0,-b).add(l,0);break;case yu:g=-u,v=c||0,b=Math.max(f,Math.min(d,-m.x1)),h&&(b=TC(h,b,p,1,-1,m)),m.add(-b,0).add(0,l);break;case md:g=n+u,v=c||0,b=Math.max(f,Math.min(d,m.x2)),h&&(b=TC(h,b,p,1,1,m)),m.add(0,0).add(b,l);break;case P0:g=c||0,v=r+u,b=Math.max(f,Math.min(d,m.y2)),h&&(b=TC(h,b,p,0,1,m)),m.add(0,0).add(l,b);break;default:g=i.x,v=i.y}return mf(m.translate(g,v),i),td(i,"x",g+Uq)|td(i,"y",v+Uq)&&(i.bounds=Op,t.dirty(i),i.bounds=m,t.dirty(i)),i.mark.bounds.clear().union(m)}function TC(t,e,n,r,i,s){var a=t.bounds,o=0,l=0;return t.auto?(e+=n,r?o=(t.x||0)-(t.x=i*e):l=(t.y||0)-(t.y=i*e),a.translate(-o,-l),t.mark.bounds.set(a.x1,a.y1,a.x2,a.y2),r?(s.add(0,a.y1).add(0,a.y2),e+=a.width()):(s.add(a.x1,0).add(a.x2,0),e+=a.height())):s.union(a),e}function Cdt(t,e,n,r,i){var s=e.items[0],a=s.orient,o=s.frame,l=s.anchor,u=s.offset,c=s.bounds,f=a===yu||a===md,d=0,h=f?r:n,p=0,m=0,g;switch(o!==xN?a===yu?(d=i.y2,h=i.y1):a===md?(d=i.y1,h=i.y2):(d=i.x1,h=i.x2):a===yu&&(d=r,h=0),g=l===xut?d:l===wut?h:(d+h)/2,Op.clear().union(c),a){case L0:p=g,m=i.y1-u;break;case yu:p=i.x1-u,m=g;break;case md:p=i.x2+u,m=g;break;case P0:p=g,m=i.y2+u;break;default:p=s.x,m=s.y}return c.translate(p-s.x,m-s.y),td(s,"x",p)|td(s,"y",m)&&(s.bounds=Op,t.dirty(s),s.bounds=c,t.dirty(s)),e.bounds.clear().union(c)}function Edt(t,e){return e.reduce(function(n,r){var i=r.items[0];if(Tdt(t,i,i.items[0].items[0]),i.datum.orient===yu){var s=Op.clear();i.items.forEach(function(a){s.union(a.bounds)}),n=Math.max(n,Math.ceil(s.width()+2*i.padding-1))}return n},0)}function Tdt(t,e,n){var r=e.padding-n.x,i=e.padding-n.y;if(e.datum.title){var s=e.items[1].items[0];i+=e.titlePadding+s.fontSize}(r||i)&&(n.x+=r,n.y+=i,n.bounds.translate(r,i),n.mark.bounds.translate(r,i),t.dirty(n))}function kdt(t,e,n,r,i,s,a){var o=e.items[0],l=o.datum,u=l.orient,c=o.offset,f=o.bounds,d=0,h=0,p,m,g;switch(u===L0||u===P0?(g=i,d=n[u]):(u===yu||u===md)&&(g=r,h=n[u]),Op.clear().union(f),f.clear(),o.items.forEach(function(v){f.union(v.bounds)}),p=2*o.padding-1,m=2*o.padding-1,f.empty()||(p=Math.ceil(f.width()+p),m=Math.ceil(f.height()+m)),l.type===Tut&&Adt(o.items[0].items[0].items[0].items),u){case yu:d-=n.leftWidth+c-Math.floor(g.x1),n.left+=m+n.margin;break;case md:d+=c+Math.ceil(g.x2),n.right+=m+n.margin;break;case L0:h-=m+c-Math.floor(g.y1),n.top+=p+n.margin;break;case P0:h+=c+Math.ceil(g.y2),n.bottom+=p+n.margin;break;case gut:d+=c,h+=c;break;case vut:d+=s-p-c,h+=c;break;case yut:d+=c,h+=a-m-c;break;case but:d+=s-p-c,h+=a-m-c;break;default:d=o.x,h=o.y}return mf(f.set(d,h,d+p,h+m),o),td(o,"x",d)|td(o,"width",p)|td(o,"y",h)|td(o,"height",m)&&(o.bounds=Op,t.dirty(o),o.bounds=f,t.dirty(o)),o.mark.bounds.clear().union(f)}function Adt(t){var e=t.reduce(function(n,r){return n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n},{});t.forEach(function(n){n.width=e[n.column],n.height=n.bounds.y2-n.y})}function Mdt(t,e,n,r){var i=r.autosize||{},s=i.type,a=t._width,o=t._height,l=t.padding();if(!(t._autosize<1||!s)){var u=Math.max(0,e.width||0),c=Math.max(0,Math.ceil(-n.x1)),f=Math.max(0,Math.ceil(n.x2-u)),d=Math.max(0,e.height||0),h=Math.max(0,Math.ceil(-n.y1)),p=Math.max(0,Math.ceil(n.y2-d));i.contains===Eut&&(a-=l.left+l.right,o-=l.top+l.bottom),s===Nut?(c=0,h=0,u=a,d=o):s===Yle?(u=Math.max(0,a-c-f),d=Math.max(0,o-h-p)):s===kut?(u=Math.max(0,a-c-f),o=d+h+p):s===Aut?(a=u+c+f,d=Math.max(0,o-h-p)):s===Mut&&(a=u+c+f,o=d+h+p),t._resizeView(a,o,u,d,[c,h],i.resize)}}const Ndt=Object.freeze(Object.defineProperty({__proto__:null,bound:Yue,identifier:t7,mark:Kue,overlap:Zue,render:Que,viewlayout:ece},Symbol.toStringTag,{value:"Module"}));var PN="log",n7="pow",$dt="utc",r7="sqrt",Idt="band",Ddt="time",Vq="point",i7="linear",tce="ordinal",nce="quantile",rce="quantize",s7="threshold",Rdt="bin-linear",ice="bin-ordinal",sce="sequential";function a7(t,e,n){var r=t-e+n*2;return t?r>0?r:1:0}function Odt(t){return function(e){var n=e[0],r=e[1],i;return r<n&&(i=n,n=r,r=i),[t.invert(n),t.invert(r)]}}function Fdt(t){return function(e){var n=t.range(),r=e[0],i=e[1],s=-1,a,o,l,u;for(i<r&&(o=r,r=i,i=o),l=0,u=n.length;l<u;++l)n[l]>=r&&n[l]<=i&&(s<0&&(s=l),a=l);if(!(s<0))return r=t.invertExtent(n[s]),i=t.invertExtent(n[a]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function o7(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function ace(t){return t.length===1&&(t=Ldt(t)),{left:function(e,n,r,i){for(r==null&&(r=0),i==null&&(i=e.length);r<i;){var s=r+i>>>1;t(e[s],n)<0?r=s+1:i=s}return r},right:function(e,n,r,i){for(r==null&&(r=0),i==null&&(i=e.length);r<i;){var s=r+i>>>1;t(e[s],n)>0?i=s:r=s+1}return r}}}function Ldt(t){return function(e,n){return o7(t(e),n)}}var Pdt=ace(o7),zN=Pdt.right;function zdt(t){return t===null?NaN:+t}function Bdt(t,e){var n=t.length,r=-1,i,s,a;if(e==null){for(;++r<n;)if((i=t[r])!=null&&i>=i)for(s=a=i;++r<n;)(i=t[r])!=null&&(s>i&&(s=i),a<i&&(a=i))}else for(;++r<n;)if((i=e(t[r],r,t))!=null&&i>=i)for(s=a=i;++r<n;)(i=e(t[r],r,t))!=null&&(s>i&&(s=i),a<i&&(a=i));return[s,a]}function nd(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}var SL=Math.sqrt(50),CL=Math.sqrt(10),EL=Math.sqrt(2);function oce(t,e,n){var r,i=-1,s,a,o;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(s=t,t=e,e=s),(o=_E(t,e,n))===0||!isFinite(o))return[];if(o>0)for(t=Math.ceil(t/o),e=Math.floor(e/o),a=new Array(s=Math.ceil(e-t+1));++i<s;)a[i]=(t+i)*o;else for(t=Math.floor(t*o),e=Math.ceil(e*o),a=new Array(s=Math.ceil(t-e+1));++i<s;)a[i]=(t-i)/o;return r&&a.reverse(),a}function _E(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,i);return i>=0?(s>=SL?10:s>=CL?5:s>=EL?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(s>=SL?10:s>=CL?5:s>=EL?2:1)}function Yx(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/i;return s>=SL?i*=10:s>=CL?i*=5:s>=EL&&(i*=2),e<t?-i:i}function Udt(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}function Vdt(t,e,n){if(n==null&&(n=zdt),!!(r=t.length)){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,s=Math.floor(i),a=+n(t[s],s,t),o=+n(t[s+1],s+1,t);return a+(o-a)*(i-s)}}function Wdt(t,e){var n=t.length,r=-1,i,s;if(e==null){for(;++r<n;)if((i=t[r])!=null&&i>=i)for(s=i;++r<n;)(i=t[r])!=null&&i>s&&(s=i)}else for(;++r<n;)if((i=e(t[r],r,t))!=null&&i>=i)for(s=i;++r<n;)(i=e(t[r],r,t))!=null&&i>s&&(s=i);return s}function vf(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}var _o="$";function YT(){}YT.prototype=$d.prototype={constructor:YT,has:function(t){return _o+t in this},get:function(t){return this[_o+t]},set:function(t,e){return this[_o+t]=e,this},remove:function(t){var e=_o+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===_o&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===_o&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===_o&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===_o&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===_o&&++t;return t},empty:function(){for(var t in this)if(t[0]===_o)return!1;return!0},each:function(t){for(var e in this)e[0]===_o&&t(this[e],e.slice(1),this)}};function $d(t,e){var n=new YT;if(t instanceof YT)t.each(function(o,l){n.set(l,o)});else if(Array.isArray(t)){var r=-1,i=t.length,s;if(e==null)for(;++r<i;)n.set(r,t[r]);else for(;++r<i;)n.set(e(s=t[r],r,t),s)}else if(t)for(var a in t)n.set(a,t[a]);return n}function Gdt(){var t=[],e=[],n,r,i;function s(o,l,u,c){if(l>=t.length)return n!=null&&o.sort(n),r!=null?r(o):o;for(var f=-1,d=o.length,h=t[l++],p,m,g=$d(),v,y=u();++f<d;)(v=g.get(p=h(m=o[f])+""))?v.push(m):g.set(p,[m]);return g.each(function(b,x){c(y,x,s(b,l,u,c))}),y}function a(o,l){if(++l>t.length)return o;var u,c=e[l-1];return r!=null&&l>=t.length?u=o.entries():(u=[],o.each(function(f,d){u.push({key:d,values:a(f,l)})})),c!=null?u.sort(function(f,d){return c(f.key,d.key)}):u}return i={object:function(o){return s(o,0,Hdt,jdt)},map:function(o){return s(o,0,Wq,Gq)},entries:function(o){return a(s(o,0,Wq,Gq),0)},key:function(o){return t.push(o),i},sortKeys:function(o){return e[t.length-1]=o,i},sortValues:function(o){return n=o,i},rollup:function(o){return r=o,i}}}function Hdt(){return{}}function jdt(t,e,n){t[e]=n}function Wq(){return $d()}function Gq(t,e,n){t.set(e,n)}function Hq(){}var gh=$d.prototype;Hq.prototype={constructor:Hq,has:gh.has,add:function(t){return t+="",this[_o+t]=t,this},remove:gh.remove,clear:gh.clear,values:gh.keys,size:gh.size,empty:gh.empty,each:gh.each};var lce=Array.prototype,KT=lce.map,Fp=lce.slice,TL={name:"implicit"};function l7(){var t=$d(),e=[],n=[],r=TL;function i(s){var a=s+"",o=t.get(a);if(!o){if(r!==TL)return r;t.set(a,o=e.push(s))}return n[(o-1)%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=$d();for(var a=-1,o=s.length,l,u;++a<o;)t.has(u=(l=s[a])+"")||t.set(u,e.push(l));return i},i.range=function(s){return arguments.length?(n=Fp.call(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return l7(e,n).unknown(r)},vf.apply(i,arguments),i}function jy(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function M2(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Qd(){}var Lp=.7,V0=1/Lp,Yg="\\s*([+-]?\\d+)\\s*",Kx="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ku="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",qdt=/^#([0-9a-f]{3,8})$/,Xdt=new RegExp("^rgb\\("+[Yg,Yg,Yg]+"\\)$"),Ydt=new RegExp("^rgb\\("+[ku,ku,ku]+"\\)$"),Kdt=new RegExp("^rgba\\("+[Yg,Yg,Yg,Kx]+"\\)$"),Zdt=new RegExp("^rgba\\("+[ku,ku,ku,Kx]+"\\)$"),Jdt=new RegExp("^hsl\\("+[Kx,ku,ku]+"\\)$"),Qdt=new RegExp("^hsla\\("+[Kx,ku,ku,Kx]+"\\)$"),jq={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};jy(Qd,Zx,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:qq,formatHex:qq,formatHsl:eht,formatRgb:Xq,toString:Xq});function qq(){return this.rgb().formatHex()}function eht(){return uce(this).formatHsl()}function Xq(){return this.rgb().formatRgb()}function Zx(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=qdt.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Yq(e):n===3?new Xi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?kC(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?kC(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Xdt.exec(t))?new Xi(e[1],e[2],e[3],1):(e=Ydt.exec(t))?new Xi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Kdt.exec(t))?kC(e[1],e[2],e[3],e[4]):(e=Zdt.exec(t))?kC(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Jdt.exec(t))?Jq(e[1],e[2]/100,e[3]/100,1):(e=Qdt.exec(t))?Jq(e[1],e[2]/100,e[3]/100,e[4]):jq.hasOwnProperty(t)?Yq(jq[t]):t==="transparent"?new Xi(NaN,NaN,NaN,0):null}function Yq(t){return new Xi(t>>16&255,t>>8&255,t&255,1)}function kC(t,e,n,r){return r<=0&&(t=e=n=NaN),new Xi(t,e,n,r)}function u7(t){return t instanceof Qd||(t=Zx(t)),t?(t=t.rgb(),new Xi(t.r,t.g,t.b,t.opacity)):new Xi}function W0(t,e,n,r){return arguments.length===1?u7(t):new Xi(t,e,n,r??1)}function Xi(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}jy(Xi,W0,M2(Qd,{brighter:function(t){return t=t==null?V0:Math.pow(V0,t),new Xi(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?Lp:Math.pow(Lp,t),new Xi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Kq,formatHex:Kq,formatRgb:Zq,toString:Zq}));function Kq(){return"#"+uR(this.r)+uR(this.g)+uR(this.b)}function Zq(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function uR(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function Jq(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new fu(t,e,n,r)}function uce(t){if(t instanceof fu)return new fu(t.h,t.s,t.l,t.opacity);if(t instanceof Qd||(t=Zx(t)),!t)return new fu;if(t instanceof fu)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),a=NaN,o=s-i,l=(s+i)/2;return o?(e===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-e)/o+2:a=(e-n)/o+4,o/=l<.5?s+i:2-s-i,a*=60):o=l>0&&l<1?0:a,new fu(a,o,l,t.opacity)}function ZT(t,e,n,r){return arguments.length===1?uce(t):new fu(t,e,n,r??1)}function fu(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}jy(fu,ZT,M2(Qd,{brighter:function(t){return t=t==null?V0:Math.pow(V0,t),new fu(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?Lp:Math.pow(Lp,t),new fu(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Xi(cR(t>=240?t-240:t+120,i,r),cR(t,i,r),cR(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function cR(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}var cce=Math.PI/180,fce=180/Math.PI,JT=18,dce=.96422,hce=1,pce=.82521,mce=4/29,Kg=6/29,gce=3*Kg*Kg,tht=Kg*Kg*Kg;function vce(t){if(t instanceof Au)return new Au(t.l,t.a,t.b,t.opacity);if(t instanceof $c)return yce(t);t instanceof Xi||(t=u7(t));var e=pR(t.r),n=pR(t.g),r=pR(t.b),i=fR((.2225045*e+.7168786*n+.0606169*r)/hce),s,a;return e===n&&n===r?s=a=i:(s=fR((.4360747*e+.3850649*n+.1430804*r)/dce),a=fR((.0139322*e+.0971045*n+.7141733*r)/pce)),new Au(116*i-16,500*(s-i),200*(i-a),t.opacity)}function QT(t,e,n,r){return arguments.length===1?vce(t):new Au(t,e,n,r??1)}function Au(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}jy(Au,QT,M2(Qd,{brighter:function(t){return new Au(this.l+JT*(t??1),this.a,this.b,this.opacity)},darker:function(t){return new Au(this.l-JT*(t??1),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=dce*dR(e),t=hce*dR(t),n=pce*dR(n),new Xi(hR(3.1338561*e-1.6168667*t-.4906146*n),hR(-.9787684*e+1.9161415*t+.033454*n),hR(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function fR(t){return t>tht?Math.pow(t,1/3):t/gce+mce}function dR(t){return t>Kg?t*t*t:gce*(t-mce)}function hR(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function pR(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function nht(t){if(t instanceof $c)return new $c(t.h,t.c,t.l,t.opacity);if(t instanceof Au||(t=vce(t)),t.a===0&&t.b===0)return new $c(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*fce;return new $c(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function ek(t,e,n,r){return arguments.length===1?nht(t):new $c(t,e,n,r??1)}function $c(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function yce(t){if(isNaN(t.h))return new Au(t.l,0,0,t.opacity);var e=t.h*cce;return new Au(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}jy($c,ek,M2(Qd,{brighter:function(t){return new $c(this.h,this.c,this.l+JT*(t??1),this.opacity)},darker:function(t){return new $c(this.h,this.c,this.l-JT*(t??1),this.opacity)},rgb:function(){return yce(this).rgb()}}));var bce=-.14861,c7=1.78277,f7=-.29227,BN=-.90649,Jx=1.97294,Qq=Jx*BN,eX=Jx*c7,tX=c7*f7-BN*bce;function rht(t){if(t instanceof op)return new op(t.h,t.s,t.l,t.opacity);t instanceof Xi||(t=u7(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(tX*r+Qq*e-eX*n)/(tX+Qq-eX),s=r-i,a=(Jx*(n-i)-f7*s)/BN,o=Math.sqrt(a*a+s*s)/(Jx*i*(1-i)),l=o?Math.atan2(a,s)*fce-120:NaN;return new op(l<0?l+360:l,o,i,t.opacity)}function zu(t,e,n,r){return arguments.length===1?rht(t):new op(t,e,n,r??1)}function op(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}jy(op,zu,M2(Qd,{brighter:function(t){return t=t==null?V0:Math.pow(V0,t),new op(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?Lp:Math.pow(Lp,t),new op(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*cce,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new Xi(255*(e+n*(bce*r+c7*i)),255*(e+n*(f7*r+BN*i)),255*(e+n*(Jx*r)),this.opacity)}}));function xce(t,e,n,r,i){var s=t*t,a=s*t;return((1-3*t+3*s-a)*e+(4-6*s+3*a)*n+(1+3*t+3*s-3*a)*r+a*i)/6}function wce(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],s=t[r+1],a=r>0?t[r-1]:2*i-s,o=r<e-1?t[r+2]:2*s-i;return xce((n-r/e)*e,a,i,s,o)}}function _ce(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],s=t[r%e],a=t[(r+1)%e],o=t[(r+2)%e];return xce((n-r/e)*e,i,s,a,o)}}function UN(t){return function(){return t}}function Sce(t,e){return function(n){return t+n*e}}function iht(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function VN(t,e){var n=e-t;return n?Sce(t,n>180||n<-180?n-360*Math.round(n/360):n):UN(isNaN(t)?e:t)}function sht(t){return(t=+t)==1?Ti:function(e,n){return n-e?iht(e,n,t):UN(isNaN(e)?n:e)}}function Ti(t,e){var n=e-t;return n?Sce(t,n):UN(isNaN(t)?e:t)}const kL=function t(e){var n=sht(e);function r(i,s){var a=n((i=W0(i)).r,(s=W0(s)).r),o=n(i.g,s.g),l=n(i.b,s.b),u=Ti(i.opacity,s.opacity);return function(c){return i.r=a(c),i.g=o(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=t,r}(1);function Cce(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),s=new Array(n),a,o;for(a=0;a<n;++a)o=W0(e[a]),r[a]=o.r||0,i[a]=o.g||0,s[a]=o.b||0;return r=t(r),i=t(i),s=t(s),o.opacity=1,function(l){return o.r=r(l),o.g=i(l),o.b=s(l),o+""}}}var N2=Cce(wce),aht=Cce(_ce);function d7(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function Ece(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function oht(t,e){return(Ece(e)?d7:Tce)(t,e)}function Tce(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=$2(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(o){for(a=0;a<r;++a)s[a]=i[a](o);return s}}function kce(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function bl(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Ace(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=$2(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var AL=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mR=new RegExp(AL.source,"g");function lht(t){return function(){return t}}function uht(t){return function(e){return t(e)+""}}function Mce(t,e){var n=AL.lastIndex=mR.lastIndex=0,r,i,s,a=-1,o=[],l=[];for(t=t+"",e=e+"";(r=AL.exec(t))&&(i=mR.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:bl(r,i)})),n=mR.lastIndex;return n<e.length&&(s=e.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?uht(l[0].x):lht(e):(e=l.length,function(u){for(var c=0,f;c<e;++c)o[(f=l[c]).i]=f.x(u);return o.join("")})}function $2(t,e){var n=typeof e,r;return e==null||n==="boolean"?UN(e):(n==="number"?bl:n==="string"?(r=Zx(e))?(e=r,kL):Mce:e instanceof Zx?kL:e instanceof Date?kce:Ece(e)?d7:Array.isArray(e)?Tce:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Ace:bl)(t,e)}function cht(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function fht(t,e){var n=VN(+t,+e);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function h7(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var nX=180/Math.PI,ML={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Nce(t,e,n,r,i,s){var a,o,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,l/=o),t*r<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*nX,skewX:Math.atan(l)*nX,scaleX:a,scaleY:o}}var Xb,gR,rX,AC;function dht(t){return t==="none"?ML:(Xb||(Xb=document.createElement("DIV"),gR=document.documentElement,rX=document.defaultView),Xb.style.transform=t,t=rX.getComputedStyle(gR.appendChild(Xb),null).getPropertyValue("transform"),gR.removeChild(Xb),t=t.slice(7,-1).split(","),Nce(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function hht(t){return t==null||(AC||(AC=document.createElementNS("http://www.w3.org/2000/svg","g")),AC.setAttribute("transform",t),!(t=AC.transform.baseVal.consolidate()))?ML:(t=t.matrix,Nce(t.a,t.b,t.c,t.d,t.e,t.f))}function $ce(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function s(u,c,f,d,h,p){if(u!==f||c!==d){var m=h.push("translate(",null,e,null,n);p.push({i:m-4,x:bl(u,f)},{i:m-2,x:bl(c,d)})}else(f||d)&&h.push("translate("+f+e+d+n)}function a(u,c,f,d){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:bl(u,c)})):c&&f.push(i(f)+"rotate("+c+r)}function o(u,c,f,d){u!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:bl(u,c)}):c&&f.push(i(f)+"skewX("+c+r)}function l(u,c,f,d,h,p){if(u!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:bl(u,f)},{i:m-2,x:bl(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(u,c){var f=[],d=[];return u=t(u),c=t(c),s(u.translateX,u.translateY,c.translateX,c.translateY,f,d),a(u.rotate,c.rotate,f,d),o(u.skewX,c.skewX,f,d),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,f,d),u=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var pht=$ce(dht,"px, ","px)","deg)"),mht=$ce(hht,", ",")",")"),Yb=Math.SQRT2,vR=2,iX=4,ght=1e-12;function sX(t){return((t=Math.exp(t))+1/t)/2}function vht(t){return((t=Math.exp(t))-1/t)/2}function yht(t){return((t=Math.exp(2*t))-1)/(t+1)}function bht(t,e){var n=t[0],r=t[1],i=t[2],s=e[0],a=e[1],o=e[2],l=s-n,u=a-r,c=l*l+u*u,f,d;if(c<ght)d=Math.log(o/i)/Yb,f=function(y){return[n+y*l,r+y*u,i*Math.exp(Yb*y*d)]};else{var h=Math.sqrt(c),p=(o*o-i*i+iX*c)/(2*i*vR*h),m=(o*o-i*i-iX*c)/(2*o*vR*h),g=Math.log(Math.sqrt(p*p+1)-p),v=Math.log(Math.sqrt(m*m+1)-m);d=(v-g)/Yb,f=function(y){var b=y*d,x=sX(g),w=i/(vR*h)*(x*yht(Yb*b+g)-vht(g));return[n+w*l,r+w*u,i*x/sX(Yb*b+g)]}}return f.duration=d*1e3,f}function Ice(t){return function(e,n){var r=t((e=ZT(e)).h,(n=ZT(n)).h),i=Ti(e.s,n.s),s=Ti(e.l,n.l),a=Ti(e.opacity,n.opacity);return function(o){return e.h=r(o),e.s=i(o),e.l=s(o),e.opacity=a(o),e+""}}}const xht=Ice(VN);var wht=Ice(Ti);function _ht(t,e){var n=Ti((t=QT(t)).l,(e=QT(e)).l),r=Ti(t.a,e.a),i=Ti(t.b,e.b),s=Ti(t.opacity,e.opacity);return function(a){return t.l=n(a),t.a=r(a),t.b=i(a),t.opacity=s(a),t+""}}function Dce(t){return function(e,n){var r=t((e=ek(e)).h,(n=ek(n)).h),i=Ti(e.c,n.c),s=Ti(e.l,n.l),a=Ti(e.opacity,n.opacity);return function(o){return e.h=r(o),e.c=i(o),e.l=s(o),e.opacity=a(o),e+""}}}const Sht=Dce(VN);var Cht=Dce(Ti);function Rce(t){return function e(n){n=+n;function r(i,s){var a=t((i=zu(i)).h,(s=zu(s)).h),o=Ti(i.s,s.s),l=Ti(i.l,s.l),u=Ti(i.opacity,s.opacity);return function(c){return i.h=a(c),i.s=o(c),i.l=l(Math.pow(c,n)),i.opacity=u(c),i+""}}return r.gamma=e,r}(1)}const Eht=Rce(VN);var WN=Rce(Ti);function Tht(t,e){for(var n=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(i,i=e[++n]);return function(a){var o=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return s[o](a-o)}}function kht(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}const Aht=Object.freeze(Object.defineProperty({__proto__:null,interpolate:$2,interpolateArray:oht,interpolateBasis:wce,interpolateBasisClosed:_ce,interpolateCubehelix:Eht,interpolateCubehelixLong:WN,interpolateDate:kce,interpolateDiscrete:cht,interpolateHcl:Sht,interpolateHclLong:Cht,interpolateHsl:xht,interpolateHslLong:wht,interpolateHue:fht,interpolateLab:_ht,interpolateNumber:bl,interpolateNumberArray:d7,interpolateObject:Ace,interpolateRgb:kL,interpolateRgbBasis:N2,interpolateRgbBasisClosed:aht,interpolateRound:h7,interpolateString:Mce,interpolateTransformCss:pht,interpolateTransformSvg:mht,interpolateZoom:bht,piecewise:Tht,quantize:kht},Symbol.toStringTag,{value:"Module"}));function Mht(t){return function(){return t}}function NL(t){return+t}var aX=[0,1];function Po(t){return t}function $L(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Mht(isNaN(e)?NaN:.5)}function oX(t){var e=t[0],n=t[t.length-1],r;return e>n&&(r=e,e=n,n=r),function(i){return Math.max(e,Math.min(n,i))}}function Nht(t,e,n){var r=t[0],i=t[1],s=e[0],a=e[1];return i<r?(r=$L(i,r),s=n(a,s)):(r=$L(r,i),s=n(s,a)),function(o){return s(r(o))}}function $ht(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=$L(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(o){var l=zN(t,o,1,r)-1;return s[l](i[l](o))}}function GN(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function p7(){var t=aX,e=aX,n=$2,r,i,s,a=Po,o,l,u;function c(){return o=Math.min(t.length,e.length)>2?$ht:Nht,l=u=null,f}function f(d){return isNaN(d=+d)?s:(l||(l=o(t.map(r),e,n)))(r(a(d)))}return f.invert=function(d){return a(i((u||(u=o(e,t.map(r),bl)))(d)))},f.domain=function(d){return arguments.length?(t=KT.call(d,NL),a===Po||(a=oX(t)),c()):t.slice()},f.range=function(d){return arguments.length?(e=Fp.call(d),c()):e.slice()},f.rangeRound=function(d){return e=Fp.call(d),n=h7,c()},f.clamp=function(d){return arguments.length?(a=d?oX(t):Po,f):a!==Po},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function Oce(t,e){return p7()(t,e)}function Iht(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function tk(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function G0(t){return t=tk(Math.abs(t)),t?t[1]:NaN}function Dht(t,e){return function(n,r){for(var i=n.length,s=[],a=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),s.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=t[a=(a+1)%t.length];return s.reverse().join(e)}}function Rht(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Oht=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function H0(t){if(!(e=Oht.exec(t)))throw new Error("invalid format: "+t);var e;return new HN({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}H0.prototype=HN.prototype;function HN(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}HN.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Fht(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Fce;function Lht(t,e){var n=tk(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(Fce=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+tk(t,Math.max(0,e+s-1))[0]}function lX(t,e){var n=tk(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const uX={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:Iht,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return lX(t*100,e)},r:lX,s:Lht,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function cX(t){return t}var fX=Array.prototype.map,dX=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Lce(t){var e=t.grouping===void 0||t.thousands===void 0?cX:Dht(fX.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?cX:Rht(fX.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"-":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(f){f=H0(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,v=f.width,y=f.comma,b=f.precision,x=f.trim,w=f.type;w==="n"?(y=!0,w="g"):uX[w]||(b===void 0&&(b=12),x=!0,w="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var S=m==="$"?n:m==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",C=m==="$"?r:/[%p]/.test(w)?a:"",_=uX[w],E=/[defgprs%]/.test(w);b=b===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function T(k){var M=S,A=C,N,$,D;if(w==="c")A=_(k)+A,k="";else{k=+k;var P=k<0||1/k<0;if(k=isNaN(k)?l:_(Math.abs(k),b),x&&(k=Fht(k)),P&&+k==0&&p!=="+"&&(P=!1),M=(P?p==="("?p:o:p==="-"||p==="("?"":p)+M,A=(w==="s"?dX[8+Fce/3]:"")+A+(P&&p==="("?")":""),E){for(N=-1,$=k.length;++N<$;)if(D=k.charCodeAt(N),48>D||D>57){A=(D===46?i+k.slice(N+1):k.slice(N))+A,k=k.slice(0,N);break}}}y&&!g&&(k=e(k,1/0));var O=M.length+k.length+A.length,B=O<v?new Array(v-O+1).join(d):"";switch(y&&g&&(k=e(B+k,B.length?v-A.length:1/0),B=""),h){case"<":k=M+k+A+B;break;case"=":k=M+B+k+A;break;case"^":k=B.slice(0,O=B.length>>1)+M+k+A+B.slice(O);break;default:k=B+M+k+A;break}return s(k)}return T.toString=function(){return f+""},T}function c(f,d){var h=u((f=H0(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(G0(d)/3)))*3,m=Math.pow(10,-p),g=dX[8+p/3];return function(v){return h(m*v)+g}}return{format:u,formatPrefix:c}}var MC,Vc,m7;g7({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function g7(t){return MC=Lce(t),Vc=MC.format,m7=MC.formatPrefix,MC}function Pce(t){return Math.max(0,-G0(Math.abs(t)))}function zce(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(G0(e)/3)))*3-G0(Math.abs(t)))}function Bce(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,G0(e)-G0(t))+1}const Pht=Object.freeze(Object.defineProperty({__proto__:null,FormatSpecifier:HN,get format(){return Vc},formatDefaultLocale:g7,formatLocale:Lce,get formatPrefix(){return m7},formatSpecifier:H0,precisionFixed:Pce,precisionPrefix:zce,precisionRound:Bce},Symbol.toStringTag,{value:"Module"}));function zht(t,e,n,r){var i=Yx(t,e,n),s;switch(r=H0(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=zce(i,a))&&(r.precision=s),m7(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Bce(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=Pce(i))&&(r.precision=s-(r.type==="%")*2);break}}return Vc(r)}function jN(t){var e=t.domain;return t.ticks=function(n){var r=e();return oce(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return zht(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,a=r[i],o=r[s],l;return o<a&&(l=a,a=o,o=l,l=i,i=s,s=l),l=_E(a,o,n),l>0?(a=Math.floor(a/l)*l,o=Math.ceil(o/l)*l,l=_E(a,o,n)):l<0&&(a=Math.ceil(a*l)/l,o=Math.floor(o*l)/l,l=_E(a,o,n)),l>0?(r[i]=Math.floor(a/l)*l,r[s]=Math.ceil(o/l)*l,e(r)):l<0&&(r[i]=Math.ceil(a*l)/l,r[s]=Math.floor(o*l)/l,e(r)),t},t}function I2(){var t=Oce(Po,Po);return t.copy=function(){return GN(t,I2())},vf.apply(t,arguments),jN(t)}function Uce(t){var e;function n(r){return isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=KT.call(r,NL),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return Uce(t).unknown(e)},t=arguments.length?KT.call(t,NL):[0,1],jN(n)}function Vce(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],a;return s<i&&(a=n,n=r,r=a,a=i,i=s,s=a),t[n]=e.floor(i),t[r]=e.ceil(s),t}function hX(t){return Math.log(t)}function pX(t){return Math.exp(t)}function Bht(t){return-Math.log(-t)}function Uht(t){return-Math.exp(-t)}function Vht(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Wht(t){return t===10?Vht:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function Ght(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function mX(t){return function(e){return-t(-e)}}function Hht(t){var e=t(hX,pX),n=e.domain,r=10,i,s;function a(){return i=Ght(r),s=Wht(r),n()[0]<0?(i=mX(i),s=mX(s),t(Bht,Uht)):t(hX,pX),e}return e.base=function(o){return arguments.length?(r=+o,a()):r},e.domain=function(o){return arguments.length?(n(o),a()):n()},e.ticks=function(o){var l=n(),u=l[0],c=l[l.length-1],f;(f=c<u)&&(d=u,u=c,c=d);var d=i(u),h=i(c),p,m,g,v=o==null?10:+o,y=[];if(!(r%1)&&h-d<v){if(d=Math.round(d)-1,h=Math.round(h)+1,u>0){for(;d<h;++d)for(m=1,p=s(d);m<r;++m)if(g=p*m,!(g<u)){if(g>c)break;y.push(g)}}else for(;d<h;++d)for(m=r-1,p=s(d);m>=1;--m)if(g=p*m,!(g<u)){if(g>c)break;y.push(g)}}else y=oce(d,h,Math.min(h-d,v)).map(s);return f?y.reverse():y},e.tickFormat=function(o,l){if(l==null&&(l=r===10?".0e":","),typeof l!="function"&&(l=Vc(l)),o===1/0)return l;o==null&&(o=10);var u=Math.max(1,r*o/e.ticks().length);return function(c){var f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=u?l(c):""}},e.nice=function(){return n(Vce(n(),{floor:function(o){return s(Math.floor(i(o)))},ceil:function(o){return s(Math.ceil(i(o)))}}))},e}function Wce(){var t=Hht(p7()).domain([1,10]);return t.copy=function(){return GN(t,Wce()).base(t.base())},vf.apply(t,arguments),t}function gX(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function jht(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function qht(t){return t<0?-t*t:t*t}function Xht(t){var e=t(Po,Po),n=1;function r(){return n===1?t(Po,Po):n===.5?t(jht,qht):t(gX(n),gX(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},jN(e)}function v7(){var t=Xht(p7());return t.copy=function(){return GN(t,v7()).exponent(t.exponent())},vf.apply(t,arguments),t}function Yht(){return v7.apply(null,arguments).exponent(.5)}function Gce(){var t=[],e=[],n=[],r;function i(){var a=0,o=Math.max(1,e.length);for(n=new Array(o-1);++a<o;)n[a-1]=Vdt(t,a/o);return s}function s(a){return isNaN(a=+a)?r:e[zN(n,a)]}return s.invertExtent=function(a){var o=e.indexOf(a);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},s.domain=function(a){if(!arguments.length)return t.slice();t=[];for(var o=0,l=a.length,u;o<l;++o)u=a[o],u!=null&&!isNaN(u=+u)&&t.push(u);return t.sort(o7),i()},s.range=function(a){return arguments.length?(e=Fp.call(a),i()):e.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return Gce().domain(t).range(e).unknown(r)},vf.apply(s,arguments)}function Hce(){var t=0,e=1,n=1,r=[.5],i=[0,1],s;function a(l){return l<=l?i[zN(r,l,0,n)]:s}function o(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return a}return a.domain=function(l){return arguments.length?(t=+l[0],e=+l[1],o()):[t,e]},a.range=function(l){return arguments.length?(n=(i=Fp.call(l)).length-1,o()):i.slice()},a.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},a.unknown=function(l){return arguments.length&&(s=l),a},a.thresholds=function(){return r.slice()},a.copy=function(){return Hce().domain([t,e]).range(i).unknown(s)},vf.apply(jN(a),arguments)}function jce(){var t=[.5],e=[0,1],n,r=1;function i(s){return s<=s?e[zN(t,s,0,r)]:n}return i.domain=function(s){return arguments.length?(t=Fp.call(s),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Fp.call(s),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var a=e.indexOf(s);return[t[a-1],t[a]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return jce().domain(t).range(e).unknown(n)},vf.apply(i,arguments)}var C1=1e3,E1=C1*60,T1=E1*60,Qx=T1*24,Kht=Qx*7,vX=Qx*30,yR=Qx*365;function Zht(t){return new Date(t)}function Jht(t){return t instanceof Date?+t:+new Date(+t)}function y7(t,e,n,r,i,s,a,o,l){var u=Oce(Po,Po),c=u.invert,f=u.domain,d=l(".%L"),h=l(":%S"),p=l("%I:%M"),m=l("%I %p"),g=l("%a %d"),v=l("%b %d"),y=l("%B"),b=l("%Y"),x=[[a,1,C1],[a,5,5*C1],[a,15,15*C1],[a,30,30*C1],[s,1,E1],[s,5,5*E1],[s,15,15*E1],[s,30,30*E1],[i,1,T1],[i,3,3*T1],[i,6,6*T1],[i,12,12*T1],[r,1,Qx],[r,2,2*Qx],[n,1,Kht],[e,1,vX],[e,3,3*vX],[t,1,yR]];function w(C){return(a(C)<C?d:s(C)<C?h:i(C)<C?p:r(C)<C?m:e(C)<C?n(C)<C?g:v:t(C)<C?y:b)(C)}function S(C,_,E,T){if(C==null&&(C=10),typeof C=="number"){var k=Math.abs(E-_)/C,M=ace(function(A){return A[2]}).right(x,k);M===x.length?(T=Yx(_/yR,E/yR,C),C=t):M?(M=x[k/x[M-1][2]<x[M][2]/k?M-1:M],T=M[1],C=M[0]):(T=Math.max(Yx(_,E,C),1),C=o)}return T==null?C:C.every(T)}return u.invert=function(C){return new Date(c(C))},u.domain=function(C){return arguments.length?f(KT.call(C,Jht)):f().map(Zht)},u.ticks=function(C,_){var E=f(),T=E[0],k=E[E.length-1],M=k<T,A;return M&&(A=T,T=k,k=A),A=S(C,T,k,_),A=A?A.range(T,k+1):[],M?A.reverse():A},u.tickFormat=function(C,_){return _==null?w:l(_)},u.nice=function(C,_){var E=f();return(C=S(C,E[0],E[E.length-1],_))?f(Vce(E,C)):u},u.copy=function(){return GN(u,y7(t,e,n,r,i,s,a,o,l))},u}function Qht(){return vf.apply(y7(Ip,yoe,pN,hN,moe,hoe,dN,fN,zB).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ept(){return vf.apply(y7(Dp,Eoe,gN,mN,_oe,xoe,dN,fN,UB).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function b7(){var t=l7().unknown(void 0),e=t.domain,n=t.range,r=[0,1],i,s,a=!1,o=0,l=0,u=.5;delete t.unknown;function c(){var f=e().length,d=r[1]<r[0],h=r[d-0],p=r[1-d],m=a7(f,o,l);i=(p-h)/(m||1),a&&(i=Math.floor(i)),h+=(p-h-i*(f-o))*u,s=i*(1-o),a&&(h=Math.round(h),s=Math.round(s));var g=S2(f).map(function(v){return h+i*v});return n(d?g.reverse():g)}return t.domain=function(f){return arguments.length?(e(f),c()):e()},t.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},t.rangeRound=function(f){return r=[+f[0],+f[1]],a=!0,c()},t.bandwidth=function(){return s},t.step=function(){return i},t.round=function(f){return arguments.length?(a=!!f,c()):a},t.padding=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),o=l,c()):o},t.paddingInner=function(f){return arguments.length?(o=Math.max(0,Math.min(1,f)),c()):o},t.paddingOuter=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},t.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},t.invertRange=function(f){if(!(f[0]==null||f[1]==null)){var d=+f[0],h=+f[1],p=r[1]<r[0],m=p?n().reverse():n(),g=m.length-1,v,y,b;if(!(d!==d||h!==h)&&(h<d&&(b=d,d=h,h=b),!(h<m[0]||d>r[1-p])))return v=Math.max(0,BT(m,d)-1),y=d===h?v:BT(m,h)-1,d-m[v]>s+1e-10&&++v,p&&(b=v,v=g-y,y=g-b),v>y?void 0:e().slice(v,y+1)}},t.invert=function(f){var d=t.invertRange([f,f]);return d&&d[0]},t.copy=function(){return b7().domain(e()).range(r).round(a).paddingInner(o).paddingOuter(l).align(u)},c()}function qce(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return qce(e())},t}function tpt(){return qce(b7().paddingInner(1))}var npt=Array.prototype.map,rpt=Array.prototype.slice;function Xce(t){return npt.call(t,function(e){return+e})}function Yce(){var t=I2(),e=[];function n(i){return t(i)}function r(i){e=Xce(i),t.domain([e[0],Cn(e)])}return n.domain=function(i){return arguments.length?(r(i),n):e.slice()},n.range=function(i){return arguments.length?(t.range(i),n):t.range()},n.rangeRound=function(i){return arguments.length?(t.rangeRound(i),n):t.rangeRound()},n.interpolate=function(i){return arguments.length?(t.interpolate(i),n):t.interpolate()},n.invert=function(i){return t.invert(i)},n.ticks=function(i){var s=e.length,a=~~(s/(i||s));return a<2?n.domain():e.filter(function(o,l){return!(l%a)})},n.tickFormat=function(){return t.tickFormat.apply(t,arguments)},n.copy=function(){return Yce().domain(n.domain()).range(n.range())},n}function Kce(){var t=[],e=[];function n(r){return r==null||r!==r?void 0:e[(blt(t,r)-1)%e.length]}return n.domain=function(r){return arguments.length?(t=Xce(r),n):t.slice()},n.range=function(r){return arguments.length?(e=rpt.call(r),n):e.slice()},n.tickFormat=function(){var r=I2().domain([t[0],Cn(t)]);return r.tickFormat.apply(r,arguments)},n.copy=function(){return Kce().domain(n.domain()).range(n.range())},n}function Zce(t){var e=I2(),n=0,r=1,i=!1;function s(){var o=e.domain();n=o[0],r=Cn(o)-n}function a(o){var l=(o-n)/r;return t(i?Math.max(0,Math.min(1,l)):l)}return a.clamp=function(o){return arguments.length?(i=!!o,a):i},a.domain=function(o){return arguments.length?(e.domain(o),s(),a):e.domain()},a.interpolator=function(o){return arguments.length?(t=o,a):t},a.copy=function(){return Zce().domain(e.domain()).clamp(i).interpolator(t)},a.ticks=function(o){return e.ticks(o)},a.tickFormat=function(o,l){return e.tickFormat(o,l)},a.nice=function(o){return e.nice(o),s(),a},a}function ipt(t,e){return function(){var r=e();return r.invertRange||(r.invertRange=r.invert?Odt(r):r.invertExtent?Fdt(r):void 0),r.type=t,r}}function qN(t,e){return arguments.length>1?(J1[t]=ipt(t,e),this):J1.hasOwnProperty(t)?J1[t]:void 0}var J1={identity:Uce,linear:I2,log:Wce,ordinal:l7,pow:v7,sqrt:Yht,quantile:Gce,quantize:Hce,threshold:jce,time:Qht,utc:ept,band:b7,point:tpt,sequential:Zce,"bin-linear":Yce,"bin-ordinal":Kce};for(var yX in J1)qN(yX,J1[yX]);function Jce(t,e){var n=e[0],r=Cn(e)-n;return function(i){return t(n+i*r)}}function Qce(t,e,n){var r=n-e;return!r||!isFinite(r)?Pu(0):t.type==="linear"||t.type==="sequential"?function(i){return(i-e)/r}:t.copy().domain([e,n]).range([0,1]).interpolate(spt)}function spt(t,e){var n=e-t;return function(r){return t+r*n}}function efe(t,e){var n=Aht[apt(t)];return e!=null&&n&&n.gamma?n.gamma(e):n}function apt(t){return"interpolate"+t.toLowerCase().split("-").map(function(e){return e[0].toUpperCase()+e.slice(1)}).join("")}function qy(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}var opt=qy("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),lpt=qy("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),upt=qy("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),cpt=qy("4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac"),fpt=qy("4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"),tfe=new Array(3).concat("67a9cff7f7f7f1a340","0571b092c5defdb863e66101","0571b092c5def7f7f7fdb863e66101","2166ac67a9cfd1e5f0fee0b6f1a340b35806","2166ac67a9cfd1e5f0f7f7f7fee0b6f1a340b35806","2166ac4393c392c5ded1e5f0fee0b6fdb863e08214b35806","2166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b35806","0530612166ac4393c392c5ded1e5f0fee0b6fdb863e08214b358067f3b08","0530612166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b358067f3b08").map(qy);function Yt(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const nfe=Yt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),rfe=Yt("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),ife=Yt("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),sfe=Yt("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),afe=Yt("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),ofe=Yt("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),lfe=Yt("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),ufe=Yt("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),cfe=Yt("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),dpt=Yt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function Qn(t){return N2(t[t.length-1])}var ffe=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Yt);const hpt=Qn(ffe);var dfe=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Yt);const ppt=Qn(dfe);var hfe=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Yt);const mpt=Qn(hfe);var pfe=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Yt);const gpt=Qn(pfe);var mfe=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Yt);const vpt=Qn(mfe);var gfe=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Yt);const ypt=Qn(gfe);var vfe=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Yt);const bpt=Qn(vfe);var yfe=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Yt);const xpt=Qn(yfe);var bfe=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Yt);const wpt=Qn(bfe);var xfe=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Yt);const _pt=Qn(xfe);var wfe=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Yt);const Spt=Qn(wfe);var _fe=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Yt);const Cpt=Qn(_fe);var Sfe=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Yt);const Ept=Qn(Sfe);var Cfe=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Yt);const Tpt=Qn(Cfe);var Efe=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Yt);const kpt=Qn(Efe);var Tfe=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Yt);const Apt=Qn(Tfe);var kfe=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Yt);const Mpt=Qn(kfe);var Afe=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Yt);const Npt=Qn(Afe);var Mfe=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Yt);const $pt=Qn(Mfe);var Nfe=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Yt);const Ipt=Qn(Nfe);var $fe=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Yt);const Dpt=Qn($fe);var Ife=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Yt);const Rpt=Qn(Ife);var Dfe=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Yt);const Opt=Qn(Dfe);var Rfe=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Yt);const Fpt=Qn(Rfe);var Ofe=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Yt);const Lpt=Qn(Ofe);var Ffe=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Yt);const Ppt=Qn(Ffe);var Lfe=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Yt);const zpt=Qn(Lfe);function Bpt(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const Upt=WN(zu(300,.5,0),zu(-240,.5,1));var Vpt=WN(zu(-100,.75,.35),zu(80,1.5,.8)),Wpt=WN(zu(260,.75,.35),zu(80,1.5,.8)),NC=zu();function Pfe(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return NC.h=360*t-100,NC.s=1.5-1.5*e,NC.l=.8-.9*e,NC+""}var $C=W0(),Gpt=Math.PI/3,Hpt=Math.PI*2/3;function zfe(t){var e;return t=(.5-t)*Math.PI,$C.r=255*(e=Math.sin(t))*e,$C.g=255*(e=Math.sin(t+Gpt))*e,$C.b=255*(e=Math.sin(t+Hpt))*e,$C+""}function jpt(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function XN(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const Bfe=XN(Yt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var Ufe=XN(Yt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Vfe=XN(Yt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Wfe=XN(Yt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));const bX=Object.freeze(Object.defineProperty({__proto__:null,interpolateBlues:Rpt,interpolateBrBG:hpt,interpolateBuGn:_pt,interpolateBuPu:Spt,interpolateCividis:Bpt,interpolateCool:Wpt,interpolateCubehelixDefault:Upt,interpolateGnBu:Cpt,interpolateGreens:Opt,interpolateGreys:Fpt,interpolateInferno:Vfe,interpolateMagma:Ufe,interpolateOrRd:Ept,interpolateOranges:zpt,interpolatePRGn:ppt,interpolatePiYG:mpt,interpolatePlasma:Wfe,interpolatePuBu:kpt,interpolatePuBuGn:Tpt,interpolatePuOr:gpt,interpolatePuRd:Apt,interpolatePurples:Lpt,interpolateRainbow:Pfe,interpolateRdBu:vpt,interpolateRdGy:ypt,interpolateRdPu:Mpt,interpolateRdYlBu:bpt,interpolateRdYlGn:xpt,interpolateReds:Ppt,interpolateSinebow:zfe,interpolateSpectral:wpt,interpolateTurbo:jpt,interpolateViridis:Bfe,interpolateWarm:Vpt,interpolateYlGn:$pt,interpolateYlGnBu:Npt,interpolateYlOrBr:Ipt,interpolateYlOrRd:Dpt,schemeAccent:rfe,schemeBlues:Ife,schemeBrBG:ffe,schemeBuGn:xfe,schemeBuPu:wfe,schemeCategory10:nfe,schemeDark2:ife,schemeGnBu:_fe,schemeGreens:Dfe,schemeGreys:Rfe,schemeOrRd:Sfe,schemeOranges:Lfe,schemePRGn:dfe,schemePaired:sfe,schemePastel1:afe,schemePastel2:ofe,schemePiYG:hfe,schemePuBu:Efe,schemePuBuGn:Cfe,schemePuOr:pfe,schemePuRd:Tfe,schemePurples:Ofe,schemeRdBu:mfe,schemeRdGy:gfe,schemeRdPu:kfe,schemeRdYlBu:vfe,schemeRdYlGn:yfe,schemeReds:Ffe,schemeSet1:lfe,schemeSet2:ufe,schemeSet3:cfe,schemeSpectral:bfe,schemeTableau10:dpt,schemeYlGn:Mfe,schemeYlGnBu:Afe,schemeYlOrBr:Nfe,schemeYlOrRd:$fe},Symbol.toStringTag,{value:"Module"}));var Zg={blueorange:tfe},Q1={category10:nfe,accent:rfe,dark2:ife,paired:sfe,pastel1:afe,pastel2:ofe,set1:lfe,set2:ufe,set3:cfe,category20:opt,category20b:lpt,category20c:upt,tableau10:cpt,tableau20:fpt,viridis:Bfe,magma:Ufe,inferno:Vfe,plasma:Wfe,rainbow:Pfe,sinebow:zfe,blueorange:N2(Cn(tfe))};function er(t,e){Q1[t]=bX["interpolate"+e],Zg[t]=bX["scheme"+e]}er("blues","Blues");er("greens","Greens");er("greys","Greys");er("purples","Purples");er("reds","Reds");er("oranges","Oranges");er("brownbluegreen","BrBG");er("purplegreen","PRGn");er("pinkyellowgreen","PiYG");er("purpleorange","PuOr");er("redblue","RdBu");er("redgrey","RdGy");er("redyellowblue","RdYlBu");er("redyellowgreen","RdYlGn");er("spectral","Spectral");er("bluegreen","BuGn");er("bluepurple","BuPu");er("greenblue","GnBu");er("orangered","OrRd");er("purplebluegreen","PuBuGn");er("purpleblue","PuBu");er("purplered","PuRd");er("redpurple","RdPu");er("yellowgreenblue","YlGnBu");er("yellowgreen","YlGn");er("yelloworangebrown","YlOrBr");er("yelloworangered","YlOrRd");function IL(t,e){if(arguments.length>1)return Q1[t]=e,this;var n=t.split("-");return t=n[0],n=+n[1]+1,n&&Zg.hasOwnProperty(t)?Zg[t][n-1]:!n&&Q1.hasOwnProperty(t)?Q1[t]:void 0}function qpt(t,e,n){return arguments.length>1?(Zg[t]=e,Q1[t]=n||N2(Cn(e)),this):Zg.hasOwnProperty(t)?Zg[t]:void 0}var xX={millisecond:fN,second:dN,minute:hoe,hour:moe,day:hN,week:pN,month:yoe,year:Ip},wX={millisecond:fN,second:dN,minute:xoe,hour:_oe,day:mN,week:gN,month:Eoe,year:Dp};function Gfe(t){return xX.hasOwnProperty(t)&&xX[t]}function Hfe(t){return wX.hasOwnProperty(t)&&wX[t]}function x7(t,e){var n;return Gt(e)&&(n=e.step,e=e.interval),Bt(e)&&(e=t.type==="time"?Gfe(e):t.type==="utc"?Hfe(e):Fe("Only time and utc scales accept interval strings."),n&&(e=e.every(n))),e}function jfe(t,e,n){var r=t.range(),i=r[0],s=Cn(r);if(i>s&&(r=s,s=i,i=r),e=e.filter(function(o){return o=t(o),!(o<i||o>s)}),n>0&&e.length>1){for(var a=[e[0],Cn(e)];e.length>n&&e.length>=3;)e=e.filter(function(o,l){return!(l%2)});e.length<3&&(e=a)}return e}function qfe(t,e){return t.ticks?t.ticks(e):t.domain()}function Xfe(t,e,n){var r=t.tickFormat?t.tickFormat(e,n):n?Vc(n):String;return t.type===PN?Xpt(r,Ypt(n)):r}function Xpt(t,e){return function(n){return t(n)?e(n):""}}function Ypt(t){var e=H0(t||",");if(e.precision==null){switch(e.precision=12,e.type){case"%":e.precision-=2;break;case"e":e.precision-=1;break}return Kpt(Vc(e),Vc(".1f")(1)[1])}else return Vc(e)}function Kpt(t,e){return function(n){var r=t(n),i=r.indexOf(e),s,a;if(i<0)return r;for(s=Zpt(r,i),a=s<r.length?r.slice(s):"";--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+a}}function Zpt(t,e){var n=t.lastIndexOf("e"),r;if(n>0)return n;for(n=t.length;--n>e;)if(r=t.charCodeAt(n),r>=48&&r<=57)return n+1}function Yfe(t){Ae.call(this,null,t)}var Jpt=tt(Yfe,Ae);Jpt.transform=function(t,e){if(this.value&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=this.value,i=t.scale,s=t.count==null?t.values?t.values.length:10:x7(i,t.count),a=t.format||Xfe(i,s,t.formatSpecifier),o=t.values?jfe(i,t.values,s):qfe(i,s);return r&&(n.rem=r),r=o.map(function(l,u){return Nr({index:u/(o.length-1),value:l,label:a(l)})}),t.extra&&r.length&&r.push(Nr({index:-1,extra:{value:r[0].value},label:""})),n.source=r,n.add=r,this.value=r,n};function Kfe(t){Ae.call(this,null,t)}var Qpt=tt(Kfe,Ae);function emt(){return Nr({})}function tmt(t){return t.exit}Qpt.transform=function(t,e){var n=e.dataflow,r=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=t.item||emt,s=t.key||Nt,a=this.value;return je(r.encode)&&(r.encode=null),a&&(t.modified("key")||e.modified(s))&&Fe("DataJoin does not support modified key function or fields."),a||(e=e.addAll(),this.value=a=zy().test(tmt),a.lookup=function(o){return a.get(s(o))}),e.visit(e.ADD,function(o){var l=s(o),u=a.get(l);u?u.exit?(a.empty--,r.add.push(u)):r.mod.push(u):(a.set(l,u=i(o)),r.add.push(u)),u.datum=o,u.exit=!1}),e.visit(e.MOD,function(o){var l=s(o),u=a.get(l);u&&(u.datum=o,r.mod.push(u))}),e.visit(e.REM,function(o){var l=s(o),u=a.get(l);o===u.datum&&!u.exit&&(r.rem.push(u),u.exit=!0,++a.empty)}),e.changed(e.ADD_MOD)&&r.modifies("datum"),t.clean&&a.empty>n.cleanThreshold&&n.runAfter(a.clean),r};function Zfe(t){Ae.call(this,null,t)}var nmt=tt(Zfe,Ae);nmt.transform=function(t,e){var n=e.fork(e.ADD_REM),r=t.encoders,i=e.encode;if(je(i))if(n.changed()||i.every(function(f){return r[f]}))i=i[0],n.encode=null;else return e.StopPropagation;var s=i==="enter",a=r.update||vc,o=r.enter||vc,l=r.exit||vc,u=(i&&!s?r[i]:a)||vc;if(e.changed(e.ADD)&&(e.visit(e.ADD,function(f){o(f,t),a(f,t),u!==vc&&u!==a&&u(f,t)}),n.modifies(o.output),n.modifies(a.output),u!==vc&&u!==a&&n.modifies(u.output)),e.changed(e.REM)&&l!==vc&&(e.visit(e.REM,function(f){l(f,t)}),n.modifies(l.output)),s||u!==vc){var c=e.MOD|(t.modified()?e.REFLOW:0);s?(e.visit(c,function(f){var d=o(f,t);(u(f,t)||d)&&n.mod.push(f)}),n.mod.length&&n.modifies(o.output)):e.visit(c,function(f){u(f,t)&&n.mod.push(f)}),n.mod.length&&n.modifies(u.output)}return n.changed()?n:e.StopPropagation};var DL="symbol",rmt="discrete",imt="gradient",Pp={};Pp[nce]=omt;Pp[rce]=amt;Pp[s7]=lmt;Pp[Rdt]=Pp[ice]=umt;function smt(t,e){var n=Pp[t.type];return n?n(t):qfe(t,e)}function amt(t){var e=t.domain(),n=e[0],r=Cn(e),i=t.range().length,s=new Array(i),a=0;for(s[0]=-1/0;++a<i;)s[a]=(a*r-(a-i)*n)/i;return s.max=1/0,s}function omt(t){var e=[-1/0].concat(t.quantiles());return e.max=1/0,e}function lmt(t){var e=[-1/0].concat(t.domain());return e.max=1/0,e}function umt(t){var e=t.domain();return e.max=e.pop(),e}function cmt(t,e,n){return n===DL&&Pp[t.type]?fmt(e):n===rmt?dmt(e):hmt(e)}function fmt(t){return function(e,n,r){var i=r[n+1]||r.max||1/0,s=_X(e,t),a=_X(i,t);return s&&a?s+"–"+a:a?"< "+a:"≥ "+s}}function dmt(t){return function(e,n){return n?t(e):null}}function hmt(t){return function(e){return t(e)}}function _X(t,e){return isFinite(t)?e(t):null}function pmt(t){var e=t.domain(),n=e.length-1,r=+e[0],i=+Cn(e),s=i-r;if(t.type===s7){var a=n?s/n:.1;r-=a,i+=a,s=i-r}return function(o){return(o-r)/s}}function Jfe(t){Ae.call(this,[],t)}var mmt=tt(Jfe,Ae);mmt.transform=function(t,e){if(this.value!=null&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=this.value,i=t.type||DL,s=t.scale,a=t.count==null?5:x7(s,t.count),o=t.format||Xfe(s,a,t.formatSpecifier),l=t.values||smt(s,a),u,c,f,d;return o=cmt(s,o,i),r&&(n.rem=r),i===DL?(bn(f=t.size)?(!t.values&&s(l[0])===0&&(l=l.slice(1)),d=l.reduce(function(h,p){return Math.max(h,f(p,t))},0)):f=Pu(d=f||8),r=l.map(function(h,p){return Nr({index:p,label:o(h,p,l),value:h,offset:d,size:f(h,t)})})):i===imt?(u=s.domain(),c=Qce(s,u[0],Cn(u)),l.length<3&&!t.values&&u[0]!==Cn(u)&&(l=[u[0],Cn(u)]),r=l.map(function(h,p){return Nr({index:p,label:o(h,p,l),value:h,perc:c(h)})})):(f=l.length-1,c=pmt(s),r=l.map(function(h,p){return Nr({index:p,label:o(h,p,l),value:h,perc:p?c(h):0,perc2:p===f?1:c(l[p+1])})})),n.source=r,n.add=r,this.value=r,n};var SX=zy({line:Qfe,"line-radial":wmt,arc:ede,"arc-radial":_mt,curve:tde,"curve-radial":Smt,"orthogonal-horizontal":Cmt,"orthogonal-vertical":Emt,"orthogonal-radial":Tmt,"diagonal-horizontal":kmt,"diagonal-vertical":Amt,"diagonal-radial":Mmt});function gmt(t){return t.source.x}function vmt(t){return t.source.y}function ymt(t){return t.target.x}function bmt(t){return t.target.y}function w7(t){Ae.call(this,{},t)}w7.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};var xmt=tt(w7,Ae);xmt.transform=function(t,e){var n=t.sourceX||gmt,r=t.sourceY||vmt,i=t.targetX||ymt,s=t.targetY||bmt,a=t.as||"path",o=t.orient||"vertical",l=t.shape||"line",u=SX.get(l+"-"+o)||SX.get(l);return u||Fe("LinkPath unsupported type: "+t.shape+(t.orient?"-"+t.orient:"")),e.visit(e.SOURCE,function(c){c[a]=u(n(c),r(c),i(c),s(c))}),e.reflow(t.modified()).modifies(a)};function Qfe(t,e,n,r){return"M"+t+","+e+"L"+n+","+r}function wmt(t,e,n,r){return Qfe(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n))}function ede(t,e,n,r){var i=n-t,s=r-e,a=Math.sqrt(i*i+s*s)/2,o=180*Math.atan2(s,i)/Math.PI;return"M"+t+","+e+"A"+a+","+a+" "+o+" 0 1 "+n+","+r}function _mt(t,e,n,r){return ede(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n))}function tde(t,e,n,r){var i=n-t,s=r-e,a=.2*(i+s),o=.2*(s-i);return"M"+t+","+e+"C"+(t+a)+","+(e+o)+" "+(n+o)+","+(r-a)+" "+n+","+r}function Smt(t,e,n,r){return tde(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n))}function Cmt(t,e,n,r){return"M"+t+","+e+"V"+r+"H"+n}function Emt(t,e,n,r){return"M"+t+","+e+"H"+n+"V"+r}function Tmt(t,e,n,r){var i=Math.cos(t),s=Math.sin(t),a=Math.cos(n),o=Math.sin(n),l=Math.abs(n-t)>Math.PI?n<=t:n>t;return"M"+e*i+","+e*s+"A"+e+","+e+" 0 0,"+(l?1:0)+" "+e*a+","+e*o+"L"+r*a+","+r*o}function kmt(t,e,n,r){var i=(t+n)/2;return"M"+t+","+e+"C"+i+","+e+" "+i+","+r+" "+n+","+r}function Amt(t,e,n,r){var i=(e+r)/2;return"M"+t+","+e+"C"+t+","+i+" "+n+","+i+" "+n+","+r}function Mmt(t,e,n,r){var i=Math.cos(t),s=Math.sin(t),a=Math.cos(n),o=Math.sin(n),l=(e+r)/2;return"M"+e*i+","+e*s+"C"+l*i+","+l*s+" "+l*a+","+l*o+" "+r*a+","+r*o}function _7(t){Ae.call(this,null,t)}_7.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};var Nmt=tt(_7,Ae);Nmt.transform=function(t,e){var n=t.as||["startAngle","endAngle"],r=n[0],i=n[1],s=t.field||nN,a=t.startAngle||0,o=t.endAngle!=null?t.endAngle:2*Math.PI,l=e.source,u=l.map(s),c=u.length,f=a,d=(o-a)/Alt(u),h=S2(c),p,m,g;for(t.sort&&h.sort(function(v,y){return u[v]-u[y]}),p=0;p<c;++p)g=u[h[p]],m=l[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=u,e.reflow(t.modified()).modifies(n)};var $mt=5,Imt=dn([i7,n7,r7]),nde=dn([i7,PN,n7,r7,Ddt,$dt]),Dmt=dn(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function rde(t){Ae.call(this,null,t),this.modified(!0)}var Rmt=tt(rde,Ae);Rmt.transform=function(t,e){var n=e.dataflow,r=this.value,i;(!r||t.modified("type"))&&(this.value=r=qN((t.type||i7).toLowerCase())());for(i in t)if(!Dmt[i]){if(i==="padding"&&nde[r.type])continue;bn(r[i])?r[i](t[i]):n.warn("Unsupported scale property: "+i)}return Pmt(r,t,Omt(r,t,n)),e.fork(e.NO_SOURCE|e.NO_FIELDS)};function Omt(t,e,n){var r=Fmt(t,e.domainRaw,n);if(r>-1)return r;var i=e.domain,s=t.type,a=e.zero||e.zero===void 0&&Imt[s],o,l;return i?(nde[s]&&e.padding&&i[0]!==Cn(i)&&(i=Lmt(s,i,e.range,e.padding,e.exponent)),(a||e.domainMin!=null||e.domainMax!=null||e.domainMid!=null)&&(o=(i=i.slice()).length-1||1,a&&(i[0]>0&&(i[0]=0),i[o]<0&&(i[o]=0)),e.domainMin!=null&&(i[0]=e.domainMin),e.domainMax!=null&&(i[o]=e.domainMax),e.domainMid!=null&&(l=e.domainMid,(l<i[0]||l>i[o])&&n.warn("Scale domainMid exceeds domain min or max.",l),i.splice(o,0,l))),t.domain(ide(s,i,n)),s===tce&&t.unknown(e.domainImplicit?TL:void 0),e.nice&&t.nice&&t.nice(e.nice!==!0&&x7(t,e.nice)||null),i.length):0}function Fmt(t,e,n){return e?(t.domain(ide(t.type,e,n)),e.length):-1}function Lmt(t,e,n,r,i){var s=Math.abs(Cn(n)-n[0]),a=s/(s-2*r),o=t===PN?TB(e,null,a):t===r7?IT(e,null,a,.5):t===n7?IT(e,null,a,i):EB(e,null,a);return e=e.slice(),e[0]=o[0],e[e.length-1]=o[1],e}function ide(t,e,n){if(t===PN){var r=Math.abs(e.reduce(function(i,s){return i+(s<0?-1:s>0?1:0)},0));r!==e.length&&n.warn("Log scale domain includes zero: "+at(e))}return e}function Pmt(t,e,n){var r=e.round||!1,i=e.range;if(e.rangeStep!=null)i=zmt(t.type,e,n);else if(e.scheme){if(i=Bmt(t.type,e,n),bn(i))return t.interpolator(i)}else if(i&&t.type===sce)return t.interpolator(N2(RL(i,e.reverse)));i&&e.interpolate&&t.interpolate?t.interpolate(efe(e.interpolate,e.interpolateGamma)):bn(t.round)?t.round(r):bn(t.rangeRound)&&t.interpolate(r?h7:$2),i&&t.range(RL(i,e.reverse))}function zmt(t,e,n){t!==Idt&&t!==Vq&&Fe("Only band and point scales support rangeStep.");var r=(e.paddingOuter!=null?e.paddingOuter:e.padding)||0,i=t===Vq?1:(e.paddingInner!=null?e.paddingInner:e.padding)||0;return[0,e.rangeStep*a7(n,i,r)]}function Bmt(t,e,n){var r=e.scheme.toLowerCase(),i=IL(r),s=e.schemeExtent,a;return i||Fe("Unrecognized scheme name: "+e.scheme),n=t===s7?n+1:t===ice?n-1:t===nce||t===rce?+e.schemeCount||$mt:n,t===sce?CX(i,s,e.reverse):!s&&(a=IL(r+"-"+n))?a:bn(i)?Umt(CX(i,s),n):t===tce?i:i.slice(0,n)}function CX(t,e,n){return bn(t)&&(e||n)?Jce(t,RL(e||[0,1],n)):t}function RL(t,e){return e?t.slice().reverse():t}function Umt(t,e){for(var n=new Array(e),r=e+1,i=0;i<e;)n[i]=t(++i/r);return n}function sde(t){Ae.call(this,null,t)}var Vmt=tt(sde,Ae);Vmt.transform=function(t,e){var n=t.modified("sort")||e.changed(e.ADD)||e.modified(t.sort.fields)||e.modified("datum");return n&&e.source.sort(t.sort),this.modified(n),e};var EX="zero",ade="center",ode="normalize",lde=["y0","y1"];function S7(t){Ae.call(this,null,t)}S7.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:EX,values:[EX,ade,ode]},{name:"as",type:"string",array:!0,length:2,default:lde}]};var Wmt=tt(S7,Ae);Wmt.transform=function(t,e){var n=t.as||lde,r=n[0],i=n[1],s=t.field||nN,a=t.offset===ade?Gmt:t.offset===ode?Hmt:jmt,o,l,u,c;for(o=qmt(e.source,t.groupby,t.sort,s),l=0,u=o.length,c=o.max;l<u;++l)a(o[l],c,s,r,i);return e.reflow(t.modified()).modifies(n)};function Gmt(t,e,n,r,i){for(var s=(e-t.sum)/2,a=t.length,o=0,l;o<a;++o)l=t[o],l[r]=s,l[i]=s+=Math.abs(n(l))}function Hmt(t,e,n,r,i){for(var s=1/t.sum,a=0,o=t.length,l=0,u=0,c;l<o;++l)c=t[l],c[r]=a,c[i]=a=s*(u+=Math.abs(n(c)))}function jmt(t,e,n,r,i){for(var s=0,a=0,o=t.length,l=0,u,c;l<o;++l)c=t[l],u=n(c),u<0?(c[r]=a,c[i]=a+=u):(c[r]=s,c[i]=s+=u)}function qmt(t,e,n,r){var i=[],s=function(m){return m(c)},a,o,l,u,c,f,d,h,p;if(e==null)i.push(t.slice());else for(a={},o=0,l=t.length;o<l;++o)c=t[o],f=e.map(s),d=a[f],d||(a[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,u=i.length;f<u;++f){for(d=i[f],o=0,h=0,l=d.length;o<l;++o)h+=Math.abs(r(d[o]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const Xmt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:Yfe,datajoin:Kfe,encode:Zfe,legendentries:Jfe,linkpath:w7,pie:_7,scale:rde,sortitems:sde,stack:S7,validTicks:jfe},Symbol.toStringTag,{value:"Module"}));var Ymt=Array.prototype,ude=Ymt.slice;function Kmt(t,e){return t-e}function Zmt(t){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r}function Pf(t){return function(){return t}}function Jmt(t,e){for(var n=-1,r=e.length,i;++n<r;)if(i=Qmt(t,e[n]))return i;return 0}function Qmt(t,e){for(var n=e[0],r=e[1],i=-1,s=0,a=t.length,o=a-1;s<a;o=s++){var l=t[s],u=l[0],c=l[1],f=t[o],d=f[0],h=f[1];if(egt(l,f,e))return 0;c>r!=h>r&&n<(d-u)*(r-c)/(h-c)+u&&(i=-i)}return i}function egt(t,e,n){var r;return tgt(t,e,n)&&ngt(t[r=+(t[0]===e[0])],n[r],e[r])}function tgt(t,e,n){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])}function ngt(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}function rgt(){}var mc=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function cde(){var t=1,e=1,n=Udt,r=l;function i(u){var c=n(u);if(Array.isArray(c))c=c.slice().sort(Kmt);else{var f=Bdt(u),d=f[0],h=f[1];c=Yx(d,h,c),c=nd(Math.floor(d/c)*c,Math.floor(h/c)*c,c)}return c.map(function(p){return s(u,p)})}function s(u,c){var f=[],d=[];return a(u,c,function(h){r(h,u,c),Zmt(h)>0?f.push([h]):d.push(h)}),d.forEach(function(h){for(var p=0,m=f.length,g;p<m;++p)if(Jmt((g=f[p])[0],h)!==-1){g.push(h);return}}),{type:"MultiPolygon",value:c,coordinates:f}}function a(u,c,f){var d=new Array,h=new Array,p,m,g,v,y,b;for(p=m=-1,v=u[0]>=c,mc[v<<1].forEach(x);++p<t-1;)g=v,v=u[p+1]>=c,mc[g|v<<1].forEach(x);for(mc[v<<0].forEach(x);++m<e-1;){for(p=-1,v=u[m*t+t]>=c,y=u[m*t]>=c,mc[v<<1|y<<2].forEach(x);++p<t-1;)g=v,v=u[m*t+t+p+1]>=c,b=y,y=u[m*t+p+1]>=c,mc[g|v<<1|y<<2|b<<3].forEach(x);mc[v|y<<3].forEach(x)}for(p=-1,y=u[m*t]>=c,mc[y<<2].forEach(x);++p<t-1;)b=y,y=u[m*t+p+1]>=c,mc[y<<2|b<<3].forEach(x);mc[y<<3].forEach(x);function x(w){var S=[w[0][0]+p,w[0][1]+m],C=[w[1][0]+p,w[1][1]+m],_=o(S),E=o(C),T,k;(T=h[_])?(k=d[E])?(delete h[T.end],delete d[k.start],T===k?(T.ring.push(C),f(T.ring)):d[T.start]=h[k.end]={start:T.start,end:k.end,ring:T.ring.concat(k.ring)}):(delete h[T.end],T.ring.push(C),h[T.end=E]=T):(T=d[E])?(k=h[_])?(delete d[T.start],delete h[k.end],T===k?(T.ring.push(C),f(T.ring)):d[k.start]=h[T.end]={start:k.start,end:T.end,ring:k.ring.concat(T.ring)}):(delete d[T.start],T.ring.unshift(S),d[T.start=_]=T):d[_]=h[E]={start:_,end:E,ring:[S,C]}}}function o(u){return u[0]*2+u[1]*(t+1)*4}function l(u,c,f){u.forEach(function(d){var h=d[0],p=d[1],m=h|0,g=p|0,v,y=c[g*t+m];h>0&&h<t&&m===h&&(v=c[g*t+m-1],d[0]=h+(f-v)/(y-v)-.5),p>0&&p<e&&g===p&&(v=c[(g-1)*t+m],d[1]=p+(f-v)/(y-v)-.5)})}return i.contour=s,i.size=function(u){if(!arguments.length)return[t,e];var c=Math.ceil(u[0]),f=Math.ceil(u[1]);if(!(c>0)||!(f>0))throw new Error("invalid size");return t=c,e=f,i},i.thresholds=function(u){return arguments.length?(n=typeof u=="function"?u:Array.isArray(u)?Pf(ude.call(u)):Pf(u),i):n},i.smooth=function(u){return arguments.length?(r=u?l:rgt,i):r===l},i}function bR(t,e,n){for(var r=t.width,i=t.height,s=(n<<1)+1,a=0;a<i;++a)for(var o=0,l=0;o<r+n;++o)o<r&&(l+=t.data[o+a*r]),o>=n&&(o>=s&&(l-=t.data[o-s+a*r]),e.data[o-n+a*r]=l/Math.min(o+1,r-1+s-o,s))}function xR(t,e,n){for(var r=t.width,i=t.height,s=(n<<1)+1,a=0;a<r;++a)for(var o=0,l=0;o<i+n;++o)o<i&&(l+=t.data[a+o*r]),o>=n&&(o>=s&&(l-=t.data[a+(o-s)*r]),e.data[a+(o-n)*r]=l/Math.min(o+1,i-1+s-o,s))}function igt(t){return t[0]}function sgt(t){return t[1]}function agt(){return 1}function ogt(){var t=igt,e=sgt,n=agt,r=960,i=500,s=20,a=2,o=s*3,l=r+o*2>>a,u=i+o*2>>a,c=Pf(20);function f(v){var y=new Float32Array(l*u),b=new Float32Array(l*u);v.forEach(function(S,C,_){var E=+t(S,C,_)+o>>a,T=+e(S,C,_)+o>>a,k=+n(S,C,_);E>=0&&E<l&&T>=0&&T<u&&(y[E+T*l]+=k)}),bR({width:l,height:u,data:y},{width:l,height:u,data:b},s>>a),xR({width:l,height:u,data:b},{width:l,height:u,data:y},s>>a),bR({width:l,height:u,data:y},{width:l,height:u,data:b},s>>a),xR({width:l,height:u,data:b},{width:l,height:u,data:y},s>>a),bR({width:l,height:u,data:y},{width:l,height:u,data:b},s>>a),xR({width:l,height:u,data:b},{width:l,height:u,data:y},s>>a);var x=c(y);if(!Array.isArray(x)){var w=Wdt(y);x=Yx(0,w,x),x=nd(0,Math.floor(w/x)*x,x),x.shift()}return cde().thresholds(x).size([l,u])(y).map(d)}function d(v){return v.value*=Math.pow(2,-2*a),v.coordinates.forEach(h),v}function h(v){v.forEach(p)}function p(v){v.forEach(m)}function m(v){v[0]=v[0]*Math.pow(2,a)-o,v[1]=v[1]*Math.pow(2,a)-o}function g(){return o=s*3,l=r+o*2>>a,u=i+o*2>>a,f}return f.x=function(v){return arguments.length?(t=typeof v=="function"?v:Pf(+v),f):t},f.y=function(v){return arguments.length?(e=typeof v=="function"?v:Pf(+v),f):e},f.weight=function(v){return arguments.length?(n=typeof v=="function"?v:Pf(+v),f):n},f.size=function(v){if(!arguments.length)return[r,i];var y=Math.ceil(v[0]),b=Math.ceil(v[1]);if(!(y>=0)&&!(y>=0))throw new Error("invalid size");return r=y,i=b,g()},f.cellSize=function(v){if(!arguments.length)return 1<<a;if(!((v=+v)>=1))throw new Error("invalid cell size");return a=Math.floor(Math.log(v)/Math.LN2),g()},f.thresholds=function(v){return arguments.length?(c=typeof v=="function"?v:Array.isArray(v)?Pf(ude.call(v)):Pf(v),f):c},f.bandwidth=function(v){if(!arguments.length)return Math.sqrt(s*(s+1));if(!((v=+v)>=0))throw new Error("invalid bandwidth");return s=Math.round((Math.sqrt(4*v*v+1)-1)/2),g()},f}var lgt=["size","smooth"],ugt=["x","y","weight","size","cellSize","bandwidth"];function C7(t){Ae.call(this,null,t)}C7.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"smooth",type:"boolean"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0}]};var cgt=tt(C7,Ae);cgt.transform=function(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=t.count||10,i,s,a;return t.values?(i=cde(),s=lgt,a=t.values):(i=ogt(),s=ugt,a=e.materialize(e.SOURCE).source),i.thresholds(t.thresholds||(t.nice?r:fgt(r))),s.forEach(function(o){t[o]!=null&&i[o](t[o])}),this.value&&(n.rem=this.value),a=a&&a.length?i(a).map(Nr):[],this.value=n.source=n.add=a,n};function fgt(t){return function(e){for(var n=wle(e),r=n[0],i=n[1]-r,s=[],a=1;a<=t;++a)s.push(r+i*a/(t+1));return s}}var dgt="Feature",OL="FeatureCollection",hgt="MultiPoint";function E7(t){Ae.call(this,null,t)}E7.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};var pgt=tt(E7,Ae);pgt.transform=function(t,e){var n=this._features,r=this._points,i=t.fields,s=i&&i[0],a=i&&i[1],o=t.geojson,l=e.ADD,u;u=t.modified()||e.changed(e.REM)||e.modified(va(o))||s&&e.modified(va(s))||a&&e.modified(va(a)),(!this.value||u)&&(l=e.SOURCE,this._features=n=[],this._points=r=[]),o&&e.visit(l,function(c){n.push(o(c))}),s&&a&&(e.visit(l,function(c){var f=s(c),d=a(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:dgt,geometry:{type:hgt,coordinates:r}})),this.value={type:OL,features:n}};var Vt=1e-6,fde=1e-12,ln=Math.PI,Ar=ln/2,TX=ln/4,lo=ln*2,as=180/ln,wr=ln/180,Rn=Math.abs,Xy=Math.atan,ef=Math.atan2,Zt=Math.cos,dde=Math.exp,nk=Math.log,wR=Math.pow,Ut=Math.sin,zo=Math.sign||function(t){return t>0?1:t<0?-1:0},ka=Math.sqrt,T7=Math.tan;function hde(t){return t>1?0:t<-1?ln:Math.acos(t)}function rl(t){return t>1?Ar:t<-1?-Ar:Math.asin(t)}function Bo(){}function rk(t,e){t&&AX.hasOwnProperty(t.type)&&AX[t.type](t,e)}var kX={Feature:function(t,e){rk(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)rk(n[r].geometry,e)}},AX={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){FL(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)FL(n[r],e,0)},Polygon:function(t,e){MX(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)MX(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)rk(n[r],e)}};function FL(t,e,n){var r=-1,i=t.length-n,s;for(e.lineStart();++r<i;)s=t[r],e.point(s[0],s[1],s[2]);e.lineEnd()}function MX(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)FL(t[n],e,1);e.polygonEnd()}function Eg(t,e){t&&kX.hasOwnProperty(t.type)?kX[t.type](t,e):rk(t,e)}function LL(t){return[ef(t[1],t[0]),rl(t[2])]}function j0(t){var e=t[0],n=t[1],r=Zt(n);return[r*Zt(e),r*Ut(e),Ut(n)]}function IC(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ik(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function _R(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function DC(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function PL(t){var e=ka(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function zL(t,e){function n(r,i){return r=t(r,i),e(r[0],r[1])}return t.invert&&e.invert&&(n.invert=function(r,i){return r=e.invert(r,i),r&&t.invert(r[0],r[1])}),n}function BL(t,e){return Rn(t)>ln&&(t-=Math.round(t/lo)*lo),[t,e]}BL.invert=BL;function pde(t,e,n){return(t%=lo)?e||n?zL($X(t),IX(e,n)):$X(t):e||n?IX(e,n):BL}function NX(t){return function(e,n){return e+=t,Rn(e)>ln&&(e-=Math.round(e/lo)*lo),[e,n]}}function $X(t){var e=NX(t);return e.invert=NX(-t),e}function IX(t,e){var n=Zt(t),r=Ut(t),i=Zt(e),s=Ut(e);function a(o,l){var u=Zt(l),c=Zt(o)*u,f=Ut(o)*u,d=Ut(l),h=d*n+c*r;return[ef(f*i-h*s,c*n-d*r),rl(h*i+f*s)]}return a.invert=function(o,l){var u=Zt(l),c=Zt(o)*u,f=Ut(o)*u,d=Ut(l),h=d*i-f*s;return[ef(f*i+d*s,c*n+h*r),rl(h*n-c*r)]},a}function mgt(t){t=pde(t[0]*wr,t[1]*wr,t.length>2?t[2]*wr:0);function e(n){return n=t(n[0]*wr,n[1]*wr),n[0]*=as,n[1]*=as,n}return e.invert=function(n){return n=t.invert(n[0]*wr,n[1]*wr),n[0]*=as,n[1]*=as,n},e}function ggt(t,e,n,r,i,s){if(n){var a=Zt(e),o=Ut(e),l=r*n;i==null?(i=e+r*lo,s=e-l/2):(i=DX(a,i),s=DX(a,s),(r>0?i<s:i>s)&&(i+=r*lo));for(var u,c=i;r>0?c>s:c<s;c-=l)u=LL([a,-o*Zt(c),-o*Ut(c)]),t.point(u[0],u[1])}}function DX(t,e){e=j0(e),e[0]-=t,PL(e);var n=hde(-e[1]);return((-e[2]<0?-n:n)+lo-Vt)%lo}function mde(){var t=[],e;return{point:function(n,r,i){e.push([n,r,i])},lineStart:function(){t.push(e=[])},lineEnd:Bo,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function SE(t,e){return Rn(t[0]-e[0])<Vt&&Rn(t[1]-e[1])<Vt}function RC(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function gde(t,e,n,r,i){var s=[],a=[],o,l;if(t.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],v=p[m],y;if(SE(g,v)){if(!g[2]&&!v[2]){for(i.lineStart(),o=0;o<m;++o)i.point((g=p[o])[0],g[1]);i.lineEnd();return}v[0]+=2*Vt}s.push(y=new RC(g,p,null,!0)),a.push(y.o=new RC(g,null,y,!1)),s.push(y=new RC(v,p,null,!1)),a.push(y.o=new RC(v,null,y,!0))}}),!!s.length){for(a.sort(e),RX(s),RX(a),o=0,l=a.length;o<l;++o)a[o].e=n=!n;for(var u=s[0],c,f;;){for(var d=u,h=!0;d.v;)if((d=d.n)===u)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(o=0,l=c.length;o<l;++o)i.point((f=c[o])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,o=c.length-1;o>=0;--o)i.point((f=c[o])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function RX(t){if(e=t.length){for(var e,n=0,r=t[0],i;++n<e;)r.n=i=t[n],i.p=r,r=i;r.n=i=t[0],i.p=r}}function SR(t){return Rn(t[0])<=ln?t[0]:zo(t[0])*((Rn(t[0])+ln)%lo-ln)}function vgt(t,e){var n=SR(e),r=e[1],i=Ut(r),s=[Ut(n),-Zt(n),0],a=0,o=0,l=new Rp;i===1?r=Ar+Vt:i===-1&&(r=-Ar-Vt);for(var u=0,c=t.length;u<c;++u)if(d=(f=t[u]).length)for(var f,d,h=f[d-1],p=SR(h),m=h[1]/2+TX,g=Ut(m),v=Zt(m),y=0;y<d;++y,p=x,g=S,v=C,h=b){var b=f[y],x=SR(b),w=b[1]/2+TX,S=Ut(w),C=Zt(w),_=x-p,E=_>=0?1:-1,T=E*_,k=T>ln,M=g*S;if(l.add(ef(M*E*Ut(T),v*C+M*Zt(T))),a+=k?_+E*lo:_,k^p>=n^x>=n){var A=ik(j0(h),j0(b));PL(A);var N=ik(s,A);PL(N);var $=(k^_>=0?-1:1)*rl(N[2]);(r>$||r===$&&(A[0]||A[1]))&&(o+=k^_>=0?1:-1)}}return(a<-Vt||a<Vt&&l<-fde)^o&1}function vde(t,e,n,r){return function(i){var s=e(i),a=mde(),o=e(a),l=!1,u,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=v,d.lineStart=y,d.lineEnd=b,c=[],u=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=Yoe(c);var x=vgt(u,r);c.length?(l||(i.polygonStart(),l=!0),gde(c,bgt,x,n,i)):x&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),c=u=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(x,w){t(x,w)&&i.point(x,w)}function p(x,w){s.point(x,w)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function v(x,w){f.push([x,w]),o.point(x,w)}function y(){o.lineStart(),f=[]}function b(){v(f[0][0],f[0][1]),o.lineEnd();var x=o.clean(),w=a.result(),S,C=w.length,_,E,T;if(f.pop(),u.push(f),f=null,!!C){if(x&1){if(E=w[0],(_=E.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),S=0;S<_;++S)i.point((T=E[S])[0],T[1]);i.lineEnd()}return}C>1&&x&2&&w.push(w.pop().concat(w.shift())),c.push(w.filter(ygt))}}return d}}function ygt(t){return t.length>1}function bgt(t,e){return((t=t.x)[0]<0?t[1]-Ar-Vt:Ar-t[1])-((e=e.x)[0]<0?e[1]-Ar-Vt:Ar-e[1])}const OX=vde(function(){return!0},xgt,_gt,[-ln,-Ar]);function xgt(t){var e=NaN,n=NaN,r=NaN,i;return{lineStart:function(){t.lineStart(),i=1},point:function(s,a){var o=s>0?ln:-ln,l=Rn(s-e);Rn(l-ln)<Vt?(t.point(e,n=(n+a)/2>0?Ar:-Ar),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(o,n),t.point(s,n),i=0):r!==o&&l>=ln&&(Rn(e-r)<Vt&&(e-=r*Vt),Rn(s-o)<Vt&&(s-=o*Vt),n=wgt(e,n,s,a),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(o,n),i=0),t.point(e=s,n=a),r=o},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-i}}}function wgt(t,e,n,r){var i,s,a=Ut(t-n);return Rn(a)>Vt?Xy((Ut(e)*(s=Zt(r))*Ut(n)-Ut(r)*(i=Zt(e))*Ut(t))/(i*s*a)):(e+r)/2}function _gt(t,e,n,r){var i;if(t==null)i=n*Ar,r.point(-ln,i),r.point(0,i),r.point(ln,i),r.point(ln,0),r.point(ln,-i),r.point(0,-i),r.point(-ln,-i),r.point(-ln,0),r.point(-ln,i);else if(Rn(t[0]-e[0])>Vt){var s=t[0]<e[0]?ln:-ln;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(e[0],e[1])}function Sgt(t){var e=Zt(t),n=6*wr,r=e>0,i=Rn(e)>Vt;function s(c,f,d,h){ggt(h,t,n,d,c,f)}function a(c,f){return Zt(c)*Zt(f)>e}function o(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,v){var y=[g,v],b,x=a(g,v),w=r?x?0:u(g,v):x?u(g+(g<0?ln:-ln),v):0;if(!f&&(p=h=x)&&c.lineStart(),x!==h&&(b=l(f,y),(!b||SE(f,b)||SE(y,b))&&(y[2]=1)),x!==h)m=0,x?(c.lineStart(),b=l(y,f),c.point(b[0],b[1])):(b=l(f,y),c.point(b[0],b[1],2),c.lineEnd()),f=b;else if(i&&f&&r^x){var S;!(w&d)&&(S=l(y,f,!0))&&(m=0,r?(c.lineStart(),c.point(S[0][0],S[0][1]),c.point(S[1][0],S[1][1]),c.lineEnd()):(c.point(S[1][0],S[1][1]),c.lineEnd(),c.lineStart(),c.point(S[0][0],S[0][1],3)))}x&&(!f||!SE(f,y))&&c.point(y[0],y[1]),f=y,h=x,d=w},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function l(c,f,d){var h=j0(c),p=j0(f),m=[1,0,0],g=ik(h,p),v=IC(g,g),y=g[0],b=v-y*y;if(!b)return!d&&c;var x=e*v/b,w=-e*y/b,S=ik(m,g),C=DC(m,x),_=DC(g,w);_R(C,_);var E=S,T=IC(C,E),k=IC(E,E),M=T*T-k*(IC(C,C)-1);if(!(M<0)){var A=ka(M),N=DC(E,(-T-A)/k);if(_R(N,C),N=LL(N),!d)return N;var $=c[0],D=f[0],P=c[1],O=f[1],B;D<$&&(B=$,$=D,D=B);var H=D-$,te=Rn(H-ln)<Vt,q=te||H<Vt;if(!te&&O<P&&(B=P,P=O,O=B),q?te?P+O>0^N[1]<(Rn(N[0]-$)<Vt?P:O):P<=N[1]&&N[1]<=O:H>ln^($<=N[0]&&N[0]<=D)){var Z=DC(E,(-T+A)/k);return _R(Z,C),[N,LL(Z)]}}}function u(c,f){var d=r?t:ln-t,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return vde(a,o,s,r?[0,-t]:[-ln,t-ln])}function Cgt(t,e,n,r,i,s){var a=t[0],o=t[1],l=e[0],u=e[1],c=0,f=1,d=l-a,h=u-o,p;if(p=n-a,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-a,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-o,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-o,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(t[0]=a+c*d,t[1]=o+c*h),f<1&&(e[0]=a+f*d,e[1]=o+f*h),!0}}}}}var k1=1e9,OC=-k1;function yde(t,e,n,r){function i(u,c){return t<=u&&u<=n&&e<=c&&c<=r}function s(u,c,f,d){var h=0,p=0;if(u==null||(h=a(u,f))!==(p=a(c,f))||l(u,c)<0^f>0)do d.point(h===0||h===3?t:n,h>1?r:e);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function a(u,c){return Rn(u[0]-t)<Vt?c>0?0:3:Rn(u[0]-n)<Vt?c>0?2:1:Rn(u[1]-e)<Vt?c>0?1:0:c>0?3:2}function o(u,c){return l(u.x,c.x)}function l(u,c){var f=a(u,1),d=a(c,1);return f!==d?f-d:f===0?c[1]-u[1]:f===1?u[0]-c[0]:f===2?u[1]-c[1]:c[0]-u[0]}return function(u){var c=u,f=mde(),d,h,p,m,g,v,y,b,x,w,S,C={point:_,lineStart:M,lineEnd:A,polygonStart:T,polygonEnd:k};function _($,D){i($,D)&&c.point($,D)}function E(){for(var $=0,D=0,P=h.length;D<P;++D)for(var O=h[D],B=1,H=O.length,te=O[0],q,Z,ne=te[0],G=te[1];B<H;++B)q=ne,Z=G,te=O[B],ne=te[0],G=te[1],Z<=r?G>r&&(ne-q)*(r-Z)>(G-Z)*(t-q)&&++$:G<=r&&(ne-q)*(r-Z)<(G-Z)*(t-q)&&--$;return $}function T(){c=f,d=[],h=[],S=!0}function k(){var $=E(),D=S&&$,P=(d=Yoe(d)).length;(D||P)&&(u.polygonStart(),D&&(u.lineStart(),s(null,null,1,u),u.lineEnd()),P&&gde(d,o,$,s,u),u.polygonEnd()),c=u,d=h=p=null}function M(){C.point=N,h&&h.push(p=[]),w=!0,x=!1,y=b=NaN}function A(){d&&(N(m,g),v&&x&&f.rejoin(),d.push(f.result())),C.point=_,x&&c.lineEnd()}function N($,D){var P=i($,D);if(h&&p.push([$,D]),w)m=$,g=D,v=P,w=!1,P&&(c.lineStart(),c.point($,D));else if(P&&x)c.point($,D);else{var O=[y=Math.max(OC,Math.min(k1,y)),b=Math.max(OC,Math.min(k1,b))],B=[$=Math.max(OC,Math.min(k1,$)),D=Math.max(OC,Math.min(k1,D))];Cgt(O,B,t,e,n,r)?(x||(c.lineStart(),c.point(O[0],O[1])),c.point(B[0],B[1]),P||c.lineEnd(),S=!1):P&&(c.lineStart(),c.point($,D),S=!1)}y=$,b=D,x=P}return C}}const ew=t=>t;var CR=new Rp,UL=new Rp,bde,xde,VL,WL,Uf={point:Bo,lineStart:Bo,lineEnd:Bo,polygonStart:function(){Uf.lineStart=Egt,Uf.lineEnd=kgt},polygonEnd:function(){Uf.lineStart=Uf.lineEnd=Uf.point=Bo,CR.add(Rn(UL)),UL=new Rp},result:function(){var t=CR/2;return CR=new Rp,t}};function Egt(){Uf.point=Tgt}function Tgt(t,e){Uf.point=wde,bde=VL=t,xde=WL=e}function wde(t,e){UL.add(WL*t-VL*e),VL=t,WL=e}function kgt(){wde(bde,xde)}const FX=Uf;var q0=1/0,sk=q0,tw=-q0,ak=tw,Agt={point:Mgt,lineStart:Bo,lineEnd:Bo,polygonStart:Bo,polygonEnd:Bo,result:function(){var t=[[q0,sk],[tw,ak]];return tw=ak=-(sk=q0=1/0),t}};function Mgt(t,e){t<q0&&(q0=t),t>tw&&(tw=t),e<sk&&(sk=e),e>ak&&(ak=e)}const ok=Agt;var GL=0,HL=0,A1=0,lk=0,uk=0,Dg=0,jL=0,qL=0,M1=0,_de,Sde,du,hu,Cl={point:zp,lineStart:LX,lineEnd:PX,polygonStart:function(){Cl.lineStart=Igt,Cl.lineEnd=Dgt},polygonEnd:function(){Cl.point=zp,Cl.lineStart=LX,Cl.lineEnd=PX},result:function(){var t=M1?[jL/M1,qL/M1]:Dg?[lk/Dg,uk/Dg]:A1?[GL/A1,HL/A1]:[NaN,NaN];return GL=HL=A1=lk=uk=Dg=jL=qL=M1=0,t}};function zp(t,e){GL+=t,HL+=e,++A1}function LX(){Cl.point=Ngt}function Ngt(t,e){Cl.point=$gt,zp(du=t,hu=e)}function $gt(t,e){var n=t-du,r=e-hu,i=ka(n*n+r*r);lk+=i*(du+t)/2,uk+=i*(hu+e)/2,Dg+=i,zp(du=t,hu=e)}function PX(){Cl.point=zp}function Igt(){Cl.point=Rgt}function Dgt(){Cde(_de,Sde)}function Rgt(t,e){Cl.point=Cde,zp(_de=du=t,Sde=hu=e)}function Cde(t,e){var n=t-du,r=e-hu,i=ka(n*n+r*r);lk+=i*(du+t)/2,uk+=i*(hu+e)/2,Dg+=i,i=hu*t-du*e,jL+=i*(du+t),qL+=i*(hu+e),M1+=i*3,zp(du=t,hu=e)}const zX=Cl;function Ede(t){this._context=t}Ede.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,lo);break}}},result:Bo};var XL=new Rp,ER,Tde,kde,N1,$1,ck={point:Bo,lineStart:function(){ck.point=Ogt},lineEnd:function(){ER&&Ade(Tde,kde),ck.point=Bo},polygonStart:function(){ER=!0},polygonEnd:function(){ER=null},result:function(){var t=+XL;return XL=new Rp,t}};function Ogt(t,e){ck.point=Ade,Tde=N1=t,kde=$1=e}function Ade(t,e){N1-=t,$1-=e,XL.add(ka(N1*N1+$1*$1)),N1=t,$1=e}const BX=ck;let UX,fk,VX,WX;class GX{constructor(e){this._append=e==null?Mde:Fgt(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==VX||this._append!==fk){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,VX=r,fk=this._append,WX=this._,this._=i}this._+=WX;break}}}result(){const e=this._;return this._="",e.length?e:null}}function Mde(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Fgt(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return Mde;if(e!==UX){const n=10**e;UX=e,fk=function(i){let s=1;this._+=i[0];for(const a=i.length;s<a;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return fk}function Nde(t,e){let n=3,r=4.5,i,s;function a(o){return o&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Eg(o,i(s))),s.result()}return a.area=function(o){return Eg(o,i(FX)),FX.result()},a.measure=function(o){return Eg(o,i(BX)),BX.result()},a.bounds=function(o){return Eg(o,i(ok)),ok.result()},a.centroid=function(o){return Eg(o,i(zX)),zX.result()},a.projection=function(o){return arguments.length?(i=o==null?(t=null,ew):(t=o).stream,a):t},a.context=function(o){return arguments.length?(s=o==null?(e=null,new GX(n)):new Ede(e=o),typeof r!="function"&&s.pointRadius(r),a):e},a.pointRadius=function(o){return arguments.length?(r=typeof o=="function"?o:(s.pointRadius(+o),+o),a):r},a.digits=function(o){if(!arguments.length)return n;if(o==null)n=null;else{const l=Math.floor(o);if(!(l>=0))throw new RangeError(`invalid digits: ${o}`);n=l}return e===null&&(s=new GX(n)),a},a.projection(t).digits(n).context(e)}function YN(t){return function(e){var n=new YL;for(var r in t)n[r]=t[r];return n.stream=e,n}}function YL(){}YL.prototype={constructor:YL,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function k7(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),Eg(n,t.stream(ok)),e(ok.result()),r!=null&&t.clipExtent(r),t}function KN(t,e,n){return k7(t,function(r){var i=e[1][0]-e[0][0],s=e[1][1]-e[0][1],a=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),o=+e[0][0]+(i-a*(r[1][0]+r[0][0]))/2,l=+e[0][1]+(s-a*(r[1][1]+r[0][1]))/2;t.scale(150*a).translate([o,l])},n)}function A7(t,e,n){return KN(t,[[0,0],e],n)}function M7(t,e,n){return k7(t,function(r){var i=+e,s=i/(r[1][0]-r[0][0]),a=(i-s*(r[1][0]+r[0][0]))/2,o=-s*r[0][1];t.scale(150*s).translate([a,o])},n)}function N7(t,e,n){return k7(t,function(r){var i=+e,s=i/(r[1][1]-r[0][1]),a=-s*r[0][0],o=(i-s*(r[1][1]+r[0][1]))/2;t.scale(150*s).translate([a,o])},n)}var HX=16,Lgt=Zt(30*wr);function jX(t,e){return+e?zgt(t,e):Pgt(t)}function Pgt(t){return YN({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function zgt(t,e){function n(r,i,s,a,o,l,u,c,f,d,h,p,m,g){var v=u-r,y=c-i,b=v*v+y*y;if(b>4*e&&m--){var x=a+d,w=o+h,S=l+p,C=ka(x*x+w*w+S*S),_=rl(S/=C),E=Rn(Rn(S)-1)<Vt||Rn(s-f)<Vt?(s+f)/2:ef(w,x),T=t(E,_),k=T[0],M=T[1],A=k-r,N=M-i,$=y*A-v*N;($*$/b>e||Rn((v*A+y*N)/b-.5)>.3||a*d+o*h+l*p<Lgt)&&(n(r,i,s,a,o,l,k,M,E,x/=C,w/=C,S,m,g),g.point(k,M),n(k,M,E,x,w,S,u,c,f,d,h,p,m,g))}}return function(r){var i,s,a,o,l,u,c,f,d,h,p,m,g={point:v,lineStart:y,lineEnd:x,polygonStart:function(){r.polygonStart(),g.lineStart=w},polygonEnd:function(){r.polygonEnd(),g.lineStart=y}};function v(_,E){_=t(_,E),r.point(_[0],_[1])}function y(){f=NaN,g.point=b,r.lineStart()}function b(_,E){var T=j0([_,E]),k=t(_,E);n(f,d,c,h,p,m,f=k[0],d=k[1],c=_,h=T[0],p=T[1],m=T[2],HX,r),r.point(f,d)}function x(){g.point=v,r.lineEnd()}function w(){y(),g.point=S,g.lineEnd=C}function S(_,E){b(i=_,E),s=f,a=d,o=h,l=p,u=m,g.point=b}function C(){n(f,d,c,h,p,m,s,a,i,o,l,u,HX,r),g.lineEnd=x,x()}return g}}var Bgt=YN({point:function(t,e){this.stream.point(t*wr,e*wr)}});function Ugt(t){return YN({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function Vgt(t,e,n,r,i){function s(a,o){return a*=r,o*=i,[e+t*a,n-t*o]}return s.invert=function(a,o){return[(a-e)/t*r,(n-o)/t*i]},s}function qX(t,e,n,r,i,s){if(!s)return Vgt(t,e,n,r,i);var a=Zt(s),o=Ut(s),l=a*t,u=o*t,c=a/t,f=o/t,d=(o*n-a*e)/t,h=(o*e+a*n)/t;function p(m,g){return m*=r,g*=i,[l*m-u*g+e,n-u*m-l*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function nc(t){return $de(function(){return t})()}function $de(t){var e,n=150,r=480,i=250,s=0,a=0,o=0,l=0,u=0,c,f=0,d=1,h=1,p=null,m=OX,g=null,v,y,b,x=ew,w=.5,S,C,_,E,T;function k($){return _($[0]*wr,$[1]*wr)}function M($){return $=_.invert($[0],$[1]),$&&[$[0]*as,$[1]*as]}k.stream=function($){return E&&T===$?E:E=Bgt(Ugt(c)(m(S(x(T=$)))))},k.preclip=function($){return arguments.length?(m=$,p=void 0,N()):m},k.postclip=function($){return arguments.length?(x=$,g=v=y=b=null,N()):x},k.clipAngle=function($){return arguments.length?(m=+$?Sgt(p=$*wr):(p=null,OX),N()):p*as},k.clipExtent=function($){return arguments.length?(x=$==null?(g=v=y=b=null,ew):yde(g=+$[0][0],v=+$[0][1],y=+$[1][0],b=+$[1][1]),N()):g==null?null:[[g,v],[y,b]]},k.scale=function($){return arguments.length?(n=+$,A()):n},k.translate=function($){return arguments.length?(r=+$[0],i=+$[1],A()):[r,i]},k.center=function($){return arguments.length?(s=$[0]%360*wr,a=$[1]%360*wr,A()):[s*as,a*as]},k.rotate=function($){return arguments.length?(o=$[0]%360*wr,l=$[1]%360*wr,u=$.length>2?$[2]%360*wr:0,A()):[o*as,l*as,u*as]},k.angle=function($){return arguments.length?(f=$%360*wr,A()):f*as},k.reflectX=function($){return arguments.length?(d=$?-1:1,A()):d<0},k.reflectY=function($){return arguments.length?(h=$?-1:1,A()):h<0},k.precision=function($){return arguments.length?(S=jX(C,w=$*$),N()):ka(w)},k.fitExtent=function($,D){return KN(k,$,D)},k.fitSize=function($,D){return A7(k,$,D)},k.fitWidth=function($,D){return M7(k,$,D)},k.fitHeight=function($,D){return N7(k,$,D)};function A(){var $=qX(n,0,0,d,h,f).apply(null,e(s,a)),D=qX(n,r-$[0],i-$[1],d,h,f);return c=pde(o,l,u),C=zL(e,D),_=zL(c,C),S=jX(C,w),N()}function N(){return E=T=null,k}return function(){return e=t.apply(this,arguments),k.invert=e.invert&&M,A()}}function $7(t){var e=0,n=ln/3,r=$de(t),i=r(e,n);return i.parallels=function(s){return arguments.length?r(e=s[0]*wr,n=s[1]*wr):[e*as,n*as]},i}function Wgt(t){var e=Zt(t);function n(r,i){return[r*e,Ut(i)/e]}return n.invert=function(r,i){return[r/e,rl(i*e)]},n}function Ggt(t,e){var n=Ut(t),r=(n+Ut(e))/2;if(Rn(r)<Vt)return Wgt(t);var i=1+n*(2*r-n),s=ka(i)/r;function a(o,l){var u=ka(i-2*r*Ut(l))/r;return[u*Ut(o*=r),s-u*Zt(o)]}return a.invert=function(o,l){var u=s-l,c=ef(o,Rn(u))*zo(u);return u*r<0&&(c-=ln*zo(o)*zo(u)),[c/r,rl((i-(o*o+u*u)*r*r)/(2*r))]},a}function dk(){return $7(Ggt).scale(155.424).center([0,33.6442])}function Ide(){return dk().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Hgt(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function jgt(){var t,e,n=Ide(),r,i=dk().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,a=dk().rotate([157,0]).center([-3,19.9]).parallels([8,18]),o,l,u={point:function(d,h){l=[d,h]}};function c(d){var h=d[0],p=d[1];return l=null,r.point(h,p),l||(s.point(h,p),l)||(o.point(h,p),l)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?a:n).invert(d)},c.stream=function(d){return t&&e===d?t:t=Hgt([n.stream(e=d),i.stream(d),a.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),a.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),a.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(u),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+Vt,m+.12*h+Vt],[p-.214*h-Vt,m+.234*h-Vt]]).stream(u),o=a.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+Vt,m+.166*h+Vt],[p-.115*h-Vt,m+.234*h-Vt]]).stream(u),f()},c.fitExtent=function(d,h){return KN(c,d,h)},c.fitSize=function(d,h){return A7(c,d,h)},c.fitWidth=function(d,h){return M7(c,d,h)},c.fitHeight=function(d,h){return N7(c,d,h)};function f(){return t=e=null,c}return c.scale(1070)}function Dde(t){return function(e,n){var r=Zt(e),i=Zt(n),s=t(r*i);return s===1/0?[2,0]:[s*i*Ut(e),s*Ut(n)]}}function D2(t){return function(e,n){var r=ka(e*e+n*n),i=t(r),s=Ut(i),a=Zt(i);return[ef(e*s,r*a),rl(r&&n*s/r)]}}var Rde=Dde(function(t){return ka(2/(1+t))});Rde.invert=D2(function(t){return 2*rl(t/2)});function qgt(){return nc(Rde).scale(124.75).clipAngle(180-.001)}var Ode=Dde(function(t){return(t=hde(t))&&t/Ut(t)});Ode.invert=D2(function(t){return t});function Xgt(){return nc(Ode).scale(79.4188).clipAngle(180-.001)}function ZN(t,e){return[t,nk(T7((Ar+e)/2))]}ZN.invert=function(t,e){return[t,2*Xy(dde(e))-Ar]};function Ygt(){return Fde(ZN).scale(961/lo)}function Fde(t){var e=nc(t),n=e.center,r=e.scale,i=e.translate,s=e.clipExtent,a=null,o,l,u;e.scale=function(f){return arguments.length?(r(f),c()):r()},e.translate=function(f){return arguments.length?(i(f),c()):i()},e.center=function(f){return arguments.length?(n(f),c()):n()},e.clipExtent=function(f){return arguments.length?(f==null?a=o=l=u=null:(a=+f[0][0],o=+f[0][1],l=+f[1][0],u=+f[1][1]),c()):a==null?null:[[a,o],[l,u]]};function c(){var f=ln*r(),d=e(mgt(e.rotate()).invert([0,0]));return s(a==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:t===ZN?[[Math.max(d[0]-f,a),o],[Math.min(d[0]+f,l),u]]:[[a,Math.max(d[1]-f,o)],[l,Math.min(d[1]+f,u)]])}return c()}function FC(t){return T7((Ar+t)/2)}function Kgt(t,e){var n=Zt(t),r=t===e?Ut(t):nk(n/Zt(e))/nk(FC(e)/FC(t)),i=n*wR(FC(t),r)/r;if(!r)return ZN;function s(a,o){i>0?o<-Ar+Vt&&(o=-Ar+Vt):o>Ar-Vt&&(o=Ar-Vt);var l=i/wR(FC(o),r);return[l*Ut(r*a),i-l*Zt(r*a)]}return s.invert=function(a,o){var l=i-o,u=zo(r)*ka(a*a+l*l),c=ef(a,Rn(l))*zo(l);return l*r<0&&(c-=ln*zo(a)*zo(l)),[c/r,2*Xy(wR(i/u,1/r))-Ar]},s}function Zgt(){return $7(Kgt).scale(109.5).parallels([30,30])}function hk(t,e){return[t,e]}hk.invert=hk;function Jgt(){return nc(hk).scale(152.63)}function Qgt(t,e){var n=Zt(t),r=t===e?Ut(t):(n-Zt(e))/(e-t),i=n/r+t;if(Rn(r)<Vt)return hk;function s(a,o){var l=i-o,u=r*a;return[l*Ut(u),i-l*Zt(u)]}return s.invert=function(a,o){var l=i-o,u=ef(a,Rn(l))*zo(l);return l*r<0&&(u-=ln*zo(a)*zo(l)),[u/r,i-zo(r)*ka(a*a+l*l)]},s}function e0t(){return $7(Qgt).scale(131.154).center([0,13.9389])}var ex=1.340264,tx=-.081106,nx=893e-6,rx=.003796,pk=ka(3)/2,t0t=12;function Lde(t,e){var n=rl(pk*Ut(e)),r=n*n,i=r*r*r;return[t*Zt(n)/(pk*(ex+3*tx*r+i*(7*nx+9*rx*r))),n*(ex+tx*r+i*(nx+rx*r))]}Lde.invert=function(t,e){for(var n=e,r=n*n,i=r*r*r,s=0,a,o,l;s<t0t&&(o=n*(ex+tx*r+i*(nx+rx*r))-e,l=ex+3*tx*r+i*(7*nx+9*rx*r),n-=a=o/l,r=n*n,i=r*r*r,!(Rn(a)<fde));++s);return[pk*t*(ex+3*tx*r+i*(7*nx+9*rx*r))/Zt(n),rl(Ut(n)/pk)]};function n0t(){return nc(Lde).scale(177.158)}function Pde(t,e){var n=Zt(e),r=Zt(t)*n;return[n*Ut(t)/r,Ut(e)/r]}Pde.invert=D2(Xy);function r0t(){return nc(Pde).scale(144.049).clipAngle(60)}function i0t(){var t=1,e=0,n=0,r=1,i=1,s=0,a,o,l=null,u,c,f,d=1,h=1,p=YN({point:function(x,w){var S=b([x,w]);this.stream.point(S[0],S[1])}}),m=ew,g,v;function y(){return d=t*r,h=t*i,g=v=null,b}function b(x){var w=x[0]*d,S=x[1]*h;if(s){var C=S*a-w*o;w=w*a+S*o,S=C}return[w+e,S+n]}return b.invert=function(x){var w=x[0]-e,S=x[1]-n;if(s){var C=S*a+w*o;w=w*a-S*o,S=C}return[w/d,S/h]},b.stream=function(x){return g&&v===x?g:g=p(m(v=x))},b.postclip=function(x){return arguments.length?(m=x,l=u=c=f=null,y()):m},b.clipExtent=function(x){return arguments.length?(m=x==null?(l=u=c=f=null,ew):yde(l=+x[0][0],u=+x[0][1],c=+x[1][0],f=+x[1][1]),y()):l==null?null:[[l,u],[c,f]]},b.scale=function(x){return arguments.length?(t=+x,y()):t},b.translate=function(x){return arguments.length?(e=+x[0],n=+x[1],y()):[e,n]},b.angle=function(x){return arguments.length?(s=x%360*wr,o=Ut(s),a=Zt(s),y()):s*as},b.reflectX=function(x){return arguments.length?(r=x?-1:1,y()):r<0},b.reflectY=function(x){return arguments.length?(i=x?-1:1,y()):i<0},b.fitExtent=function(x,w){return KN(b,x,w)},b.fitSize=function(x,w){return A7(b,x,w)},b.fitWidth=function(x,w){return M7(b,x,w)},b.fitHeight=function(x,w){return N7(b,x,w)},b}function zde(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),e*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}zde.invert=function(t,e){var n=e,r=25,i;do{var s=n*n,a=s*s;n-=i=(n*(1.007226+s*(.015085+a*(-.044475+.028874*s-.005916*a)))-e)/(1.007226+s*(.015085*3+a*(-.044475*7+.028874*9*s-.005916*11*a)))}while(Rn(i)>Vt&&--r>0);return[t/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function s0t(){return nc(zde).scale(175.295)}function Bde(t,e){return[Zt(e)*Ut(t),Ut(e)]}Bde.invert=D2(rl);function a0t(){return nc(Bde).scale(249.5).clipAngle(90+Vt)}function Ude(t,e){var n=Zt(e),r=1+Zt(t)*n;return[n*Ut(t)/r,Ut(e)/r]}Ude.invert=D2(function(t){return 2*Xy(t)});function o0t(){return nc(Ude).scale(250).clipAngle(142)}function Vde(t,e){return[nk(T7((Ar+e)/2)),-t]}Vde.invert=function(t,e){return[-e,2*Xy(dde(t))-Ar]};function l0t(){var t=Fde(Vde),e=t.center,n=t.rotate;return t.center=function(r){return arguments.length?e([-r[1],r[0]]):(r=e(),[r[1],-r[0]])},t.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var u0t=Math.abs,KL=Math.cos,mk=Math.sin,c0t=1e-6,Wde=Math.PI,ZL=Wde/2,XX=f0t(2);function YX(t){return t>1?ZL:t<-1?-ZL:Math.asin(t)}function f0t(t){return t>0?Math.sqrt(t):0}function d0t(t,e){var n=t*mk(e),r=30,i;do e-=i=(e+mk(e)-n)/(1+KL(e));while(u0t(i)>c0t&&--r>0);return e/2}function h0t(t,e,n){function r(i,s){return[t*i*KL(s=d0t(n,s)),e*mk(s)]}return r.invert=function(i,s){return s=YX(s/e),[i/(t*KL(s)),YX((2*s+mk(2*s))/n)]},r}var p0t=h0t(XX/ZL,XX,Wde);function m0t(){return nc(p0t).scale(169.529)}function rc(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function eh(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const KX=Symbol("implicit");function I7(){var t=new fq,e=[],n=[],r=KX;function i(s){let a=t.get(s);if(a===void 0){if(r!==KX)return r;t.set(s,a=e.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new fq;for(const a of s)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return I7(e,n).unknown(r)},rc.apply(i,arguments),i}function Yy(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function R2(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function th(){}var Bp=.7,X0=1/Bp,Jg="\\s*([+-]?\\d+)\\s*",nw="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Mu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",g0t=/^#([0-9a-f]{3,8})$/,v0t=new RegExp(`^rgb\\(${Jg},${Jg},${Jg}\\)$`),y0t=new RegExp(`^rgb\\(${Mu},${Mu},${Mu}\\)$`),b0t=new RegExp(`^rgba\\(${Jg},${Jg},${Jg},${nw}\\)$`),x0t=new RegExp(`^rgba\\(${Mu},${Mu},${Mu},${nw}\\)$`),w0t=new RegExp(`^hsl\\(${nw},${Mu},${Mu}\\)$`),_0t=new RegExp(`^hsla\\(${nw},${Mu},${Mu},${nw}\\)$`),ZX={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Yy(th,rw,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:JX,formatHex:JX,formatHex8:S0t,formatHsl:C0t,formatRgb:QX,toString:QX});function JX(){return this.rgb().formatHex()}function S0t(){return this.rgb().formatHex8()}function C0t(){return Gde(this).formatHsl()}function QX(){return this.rgb().formatRgb()}function rw(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=g0t.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?eY(e):n===3?new ki(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?LC(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?LC(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=v0t.exec(t))?new ki(e[1],e[2],e[3],1):(e=y0t.exec(t))?new ki(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=b0t.exec(t))?LC(e[1],e[2],e[3],e[4]):(e=x0t.exec(t))?LC(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=w0t.exec(t))?rY(e[1],e[2]/100,e[3]/100,1):(e=_0t.exec(t))?rY(e[1],e[2]/100,e[3]/100,e[4]):ZX.hasOwnProperty(t)?eY(ZX[t]):t==="transparent"?new ki(NaN,NaN,NaN,0):null}function eY(t){return new ki(t>>16&255,t>>8&255,t&255,1)}function LC(t,e,n,r){return r<=0&&(t=e=n=NaN),new ki(t,e,n,r)}function D7(t){return t instanceof th||(t=rw(t)),t?(t=t.rgb(),new ki(t.r,t.g,t.b,t.opacity)):new ki}function gk(t,e,n,r){return arguments.length===1?D7(t):new ki(t,e,n,r??1)}function ki(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Yy(ki,gk,R2(th,{brighter(t){return t=t==null?X0:Math.pow(X0,t),new ki(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Bp:Math.pow(Bp,t),new ki(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ki(lp(this.r),lp(this.g),lp(this.b),vk(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:tY,formatHex:tY,formatHex8:E0t,formatRgb:nY,toString:nY}));function tY(){return`#${Yh(this.r)}${Yh(this.g)}${Yh(this.b)}`}function E0t(){return`#${Yh(this.r)}${Yh(this.g)}${Yh(this.b)}${Yh((isNaN(this.opacity)?1:this.opacity)*255)}`}function nY(){const t=vk(this.opacity);return`${t===1?"rgb(":"rgba("}${lp(this.r)}, ${lp(this.g)}, ${lp(this.b)}${t===1?")":`, ${t})`}`}function vk(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function lp(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Yh(t){return t=lp(t),(t<16?"0":"")+t.toString(16)}function rY(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new El(t,e,n,r)}function Gde(t){if(t instanceof El)return new El(t.h,t.s,t.l,t.opacity);if(t instanceof th||(t=rw(t)),!t)return new El;if(t instanceof El)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),a=NaN,o=s-i,l=(s+i)/2;return o?(e===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-e)/o+2:a=(e-n)/o+4,o/=l<.5?s+i:2-s-i,a*=60):o=l>0&&l<1?0:a,new El(a,o,l,t.opacity)}function JL(t,e,n,r){return arguments.length===1?Gde(t):new El(t,e,n,r??1)}function El(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Yy(El,JL,R2(th,{brighter(t){return t=t==null?X0:Math.pow(X0,t),new El(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Bp:Math.pow(Bp,t),new El(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ki(TR(t>=240?t-240:t+120,i,r),TR(t,i,r),TR(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new El(iY(this.h),PC(this.s),PC(this.l),vk(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=vk(this.opacity);return`${t===1?"hsl(":"hsla("}${iY(this.h)}, ${PC(this.s)*100}%, ${PC(this.l)*100}%${t===1?")":`, ${t})`}`}}));function iY(t){return t=(t||0)%360,t<0?t+360:t}function PC(t){return Math.max(0,Math.min(1,t||0))}function TR(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Hde=Math.PI/180,jde=180/Math.PI,yk=18,qde=.96422,Xde=1,Yde=.82521,Kde=4/29,Qg=6/29,Zde=3*Qg*Qg,T0t=Qg*Qg*Qg;function Jde(t){if(t instanceof Nu)return new Nu(t.l,t.a,t.b,t.opacity);if(t instanceof Ic)return Qde(t);t instanceof ki||(t=D7(t));var e=NR(t.r),n=NR(t.g),r=NR(t.b),i=kR((.2225045*e+.7168786*n+.0606169*r)/Xde),s,a;return e===n&&n===r?s=a=i:(s=kR((.4360747*e+.3850649*n+.1430804*r)/qde),a=kR((.0139322*e+.0971045*n+.7141733*r)/Yde)),new Nu(116*i-16,500*(s-i),200*(i-a),t.opacity)}function QL(t,e,n,r){return arguments.length===1?Jde(t):new Nu(t,e,n,r??1)}function Nu(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}Yy(Nu,QL,R2(th,{brighter(t){return new Nu(this.l+yk*(t??1),this.a,this.b,this.opacity)},darker(t){return new Nu(this.l-yk*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=qde*AR(e),t=Xde*AR(t),n=Yde*AR(n),new ki(MR(3.1338561*e-1.6168667*t-.4906146*n),MR(-.9787684*e+1.9161415*t+.033454*n),MR(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function kR(t){return t>T0t?Math.pow(t,1/3):t/Zde+Kde}function AR(t){return t>Qg?t*t*t:Zde*(t-Kde)}function MR(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function NR(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function k0t(t){if(t instanceof Ic)return new Ic(t.h,t.c,t.l,t.opacity);if(t instanceof Nu||(t=Jde(t)),t.a===0&&t.b===0)return new Ic(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*jde;return new Ic(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function eP(t,e,n,r){return arguments.length===1?k0t(t):new Ic(t,e,n,r??1)}function Ic(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function Qde(t){if(isNaN(t.h))return new Nu(t.l,0,0,t.opacity);var e=t.h*Hde;return new Nu(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}Yy(Ic,eP,R2(th,{brighter(t){return new Ic(this.h,this.c,this.l+yk*(t??1),this.opacity)},darker(t){return new Ic(this.h,this.c,this.l-yk*(t??1),this.opacity)},rgb(){return Qde(this).rgb()}}));var ehe=-.14861,R7=1.78277,O7=-.29227,JN=-.90649,iw=1.97294,sY=iw*JN,aY=iw*R7,oY=R7*O7-JN*ehe;function A0t(t){if(t instanceof up)return new up(t.h,t.s,t.l,t.opacity);t instanceof ki||(t=D7(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(oY*r+sY*e-aY*n)/(oY+sY-aY),s=r-i,a=(iw*(n-i)-O7*s)/JN,o=Math.sqrt(a*a+s*s)/(iw*i*(1-i)),l=o?Math.atan2(a,s)*jde-120:NaN;return new up(l<0?l+360:l,o,i,t.opacity)}function tP(t,e,n,r){return arguments.length===1?A0t(t):new up(t,e,n,r??1)}function up(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Yy(up,tP,R2(th,{brighter(t){return t=t==null?X0:Math.pow(X0,t),new up(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Bp:Math.pow(Bp,t),new up(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*Hde,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new ki(255*(e+n*(ehe*r+R7*i)),255*(e+n*(O7*r+JN*i)),255*(e+n*(iw*r)),this.opacity)}}));function the(t,e,n,r,i){var s=t*t,a=s*t;return((1-3*t+3*s-a)*e+(4-6*s+3*a)*n+(1+3*t+3*s-3*a)*r+a*i)/6}function nhe(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],s=t[r+1],a=r>0?t[r-1]:2*i-s,o=r<e-1?t[r+2]:2*s-i;return the((n-r/e)*e,a,i,s,o)}}function rhe(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],s=t[r%e],a=t[(r+1)%e],o=t[(r+2)%e];return the((n-r/e)*e,i,s,a,o)}}const QN=t=>()=>t;function ihe(t,e){return function(n){return t+n*e}}function M0t(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function e$(t,e){var n=e-t;return n?ihe(t,n>180||n<-180?n-360*Math.round(n/360):n):QN(isNaN(t)?e:t)}function N0t(t){return(t=+t)==1?Ai:function(e,n){return n-e?M0t(e,n,t):QN(isNaN(e)?n:e)}}function Ai(t,e){var n=e-t;return n?ihe(t,n):QN(isNaN(t)?e:t)}const nP=function t(e){var n=N0t(e);function r(i,s){var a=n((i=gk(i)).r,(s=gk(s)).r),o=n(i.g,s.g),l=n(i.b,s.b),u=Ai(i.opacity,s.opacity);return function(c){return i.r=a(c),i.g=o(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=t,r}(1);function she(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),s=new Array(n),a,o;for(a=0;a<n;++a)o=gk(e[a]),r[a]=o.r||0,i[a]=o.g||0,s[a]=o.b||0;return r=t(r),i=t(i),s=t(s),o.opacity=1,function(l){return o.r=r(l),o.g=i(l),o.b=s(l),o+""}}}var $0t=she(nhe),I0t=she(rhe);function F7(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function ahe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function D0t(t,e){return(ahe(e)?F7:ohe)(t,e)}function ohe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=xm(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(o){for(a=0;a<r;++a)s[a]=i[a](o);return s}}function lhe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function xl(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function uhe(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=xm(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var rP=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$R=new RegExp(rP.source,"g");function R0t(t){return function(){return t}}function O0t(t){return function(e){return t(e)+""}}function che(t,e){var n=rP.lastIndex=$R.lastIndex=0,r,i,s,a=-1,o=[],l=[];for(t=t+"",e=e+"";(r=rP.exec(t))&&(i=$R.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:xl(r,i)})),n=$R.lastIndex;return n<e.length&&(s=e.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?O0t(l[0].x):R0t(e):(e=l.length,function(u){for(var c=0,f;c<e;++c)o[(f=l[c]).i]=f.x(u);return o.join("")})}function xm(t,e){var n=typeof e,r;return e==null||n==="boolean"?QN(e):(n==="number"?xl:n==="string"?(r=rw(e))?(e=r,nP):che:e instanceof rw?nP:e instanceof Date?lhe:ahe(e)?F7:Array.isArray(e)?ohe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?uhe:xl)(t,e)}function F0t(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function L0t(t,e){var n=e$(+t,+e);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function t$(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var lY=180/Math.PI,iP={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function fhe(t,e,n,r,i,s){var a,o,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,l/=o),t*r<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*lY,skewX:Math.atan(l)*lY,scaleX:a,scaleY:o}}var zC;function P0t(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?iP:fhe(e.a,e.b,e.c,e.d,e.e,e.f)}function z0t(t){return t==null||(zC||(zC=document.createElementNS("http://www.w3.org/2000/svg","g")),zC.setAttribute("transform",t),!(t=zC.transform.baseVal.consolidate()))?iP:(t=t.matrix,fhe(t.a,t.b,t.c,t.d,t.e,t.f))}function dhe(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function s(u,c,f,d,h,p){if(u!==f||c!==d){var m=h.push("translate(",null,e,null,n);p.push({i:m-4,x:xl(u,f)},{i:m-2,x:xl(c,d)})}else(f||d)&&h.push("translate("+f+e+d+n)}function a(u,c,f,d){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:xl(u,c)})):c&&f.push(i(f)+"rotate("+c+r)}function o(u,c,f,d){u!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:xl(u,c)}):c&&f.push(i(f)+"skewX("+c+r)}function l(u,c,f,d,h,p){if(u!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:xl(u,f)},{i:m-2,x:xl(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(u,c){var f=[],d=[];return u=t(u),c=t(c),s(u.translateX,u.translateY,c.translateX,c.translateY,f,d),a(u.rotate,c.rotate,f,d),o(u.skewX,c.skewX,f,d),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,f,d),u=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var B0t=dhe(P0t,"px, ","px)","deg)"),U0t=dhe(z0t,", ",")",")"),V0t=1e-12;function uY(t){return((t=Math.exp(t))+1/t)/2}function W0t(t){return((t=Math.exp(t))-1/t)/2}function G0t(t){return((t=Math.exp(2*t))-1)/(t+1)}const H0t=function t(e,n,r){function i(s,a){var o=s[0],l=s[1],u=s[2],c=a[0],f=a[1],d=a[2],h=c-o,p=f-l,m=h*h+p*p,g,v;if(m<V0t)v=Math.log(d/u)/e,g=function(C){return[o+C*h,l+C*p,u*Math.exp(e*C*v)]};else{var y=Math.sqrt(m),b=(d*d-u*u+r*m)/(2*u*n*y),x=(d*d-u*u-r*m)/(2*d*n*y),w=Math.log(Math.sqrt(b*b+1)-b),S=Math.log(Math.sqrt(x*x+1)-x);v=(S-w)/e,g=function(C){var _=C*v,E=uY(w),T=u/(n*y)*(E*G0t(e*_+w)-W0t(w));return[o+T*h,l+T*p,u*E/uY(e*_+w)]}}return g.duration=v*1e3*e/Math.SQRT2,g}return i.rho=function(s){var a=Math.max(.001,+s),o=a*a,l=o*o;return t(a,o,l)},i}(Math.SQRT2,2,4);function hhe(t){return function(e,n){var r=t((e=JL(e)).h,(n=JL(n)).h),i=Ai(e.s,n.s),s=Ai(e.l,n.l),a=Ai(e.opacity,n.opacity);return function(o){return e.h=r(o),e.s=i(o),e.l=s(o),e.opacity=a(o),e+""}}}const j0t=hhe(e$);var q0t=hhe(Ai);function X0t(t,e){var n=Ai((t=QL(t)).l,(e=QL(e)).l),r=Ai(t.a,e.a),i=Ai(t.b,e.b),s=Ai(t.opacity,e.opacity);return function(a){return t.l=n(a),t.a=r(a),t.b=i(a),t.opacity=s(a),t+""}}function phe(t){return function(e,n){var r=t((e=eP(e)).h,(n=eP(n)).h),i=Ai(e.c,n.c),s=Ai(e.l,n.l),a=Ai(e.opacity,n.opacity);return function(o){return e.h=r(o),e.c=i(o),e.l=s(o),e.opacity=a(o),e+""}}}const Y0t=phe(e$);var K0t=phe(Ai);function mhe(t){return function e(n){n=+n;function r(i,s){var a=t((i=tP(i)).h,(s=tP(s)).h),o=Ai(i.s,s.s),l=Ai(i.l,s.l),u=Ai(i.opacity,s.opacity);return function(c){return i.h=a(c),i.s=o(c),i.l=l(Math.pow(c,n)),i.opacity=u(c),i+""}}return r.gamma=e,r}(1)}const Z0t=mhe(e$);var J0t=mhe(Ai);function L7(t,e){e===void 0&&(e=t,t=xm);for(var n=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(i,i=e[++n]);return function(a){var o=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return s[o](a-o)}}function Q0t(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}const evt=Object.freeze(Object.defineProperty({__proto__:null,interpolate:xm,interpolateArray:D0t,interpolateBasis:nhe,interpolateBasisClosed:rhe,interpolateCubehelix:Z0t,interpolateCubehelixLong:J0t,interpolateDate:lhe,interpolateDiscrete:F0t,interpolateHcl:Y0t,interpolateHclLong:K0t,interpolateHsl:j0t,interpolateHslLong:q0t,interpolateHue:L0t,interpolateLab:X0t,interpolateNumber:xl,interpolateNumberArray:F7,interpolateObject:uhe,interpolateRgb:nP,interpolateRgbBasis:$0t,interpolateRgbBasisClosed:I0t,interpolateRound:t$,interpolateString:che,interpolateTransformCss:B0t,interpolateTransformSvg:U0t,interpolateZoom:H0t,piecewise:L7,quantize:Q0t},Symbol.toStringTag,{value:"Module"}));function tvt(t){return function(){return t}}function sP(t){return+t}var cY=[0,1];function fa(t){return t}function aP(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:tvt(isNaN(e)?NaN:.5)}function nvt(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function rvt(t,e,n){var r=t[0],i=t[1],s=e[0],a=e[1];return i<r?(r=aP(i,r),s=n(a,s)):(r=aP(r,i),s=n(s,a)),function(o){return s(r(o))}}function ivt(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=aP(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(o){var l=x2(t,o,1,r)-1;return s[l](i[l](o))}}function O2(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function n$(){var t=cY,e=cY,n=xm,r,i,s,a=fa,o,l,u;function c(){var d=Math.min(t.length,e.length);return a!==fa&&(a=nvt(t[0],t[d-1])),o=d>2?ivt:rvt,l=u=null,f}function f(d){return d==null||isNaN(d=+d)?s:(l||(l=o(t.map(r),e,n)))(r(a(d)))}return f.invert=function(d){return a(i((u||(u=o(e,t.map(r),xl)))(d)))},f.domain=function(d){return arguments.length?(t=Array.from(d,sP),c()):t.slice()},f.range=function(d){return arguments.length?(e=Array.from(d),c()):e.slice()},f.rangeRound=function(d){return e=Array.from(d),n=t$,c()},f.clamp=function(d){return arguments.length?(a=d?!0:fa,c()):a!==fa},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function ghe(){return n$()(fa,fa)}function svt(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function bk(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Y0(t){return t=bk(Math.abs(t)),t?t[1]:NaN}function avt(t,e){return function(n,r){for(var i=n.length,s=[],a=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),s.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=t[a=(a+1)%t.length];return s.reverse().join(e)}}function ovt(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var lvt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function sw(t){if(!(e=lvt.exec(t)))throw new Error("invalid format: "+t);var e;return new P7({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}sw.prototype=P7.prototype;function P7(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}P7.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function uvt(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var vhe;function cvt(t,e){var n=bk(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(vhe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+bk(t,Math.max(0,e+s-1))[0]}function fY(t,e){var n=bk(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const dY={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:svt,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>fY(t*100,e),r:fY,s:cvt,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function hY(t){return t}var pY=Array.prototype.map,mY=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function fvt(t){var e=t.grouping===void 0||t.thousands===void 0?hY:avt(pY.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?hY:ovt(pY.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(f){f=sw(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,v=f.width,y=f.comma,b=f.precision,x=f.trim,w=f.type;w==="n"?(y=!0,w="g"):dY[w]||(b===void 0&&(b=12),x=!0,w="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var S=m==="$"?n:m==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",C=m==="$"?r:/[%p]/.test(w)?a:"",_=dY[w],E=/[defgprs%]/.test(w);b=b===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function T(k){var M=S,A=C,N,$,D;if(w==="c")A=_(k)+A,k="";else{k=+k;var P=k<0||1/k<0;if(k=isNaN(k)?l:_(Math.abs(k),b),x&&(k=uvt(k)),P&&+k==0&&p!=="+"&&(P=!1),M=(P?p==="("?p:o:p==="-"||p==="("?"":p)+M,A=(w==="s"?mY[8+vhe/3]:"")+A+(P&&p==="("?")":""),E){for(N=-1,$=k.length;++N<$;)if(D=k.charCodeAt(N),48>D||D>57){A=(D===46?i+k.slice(N+1):k.slice(N))+A,k=k.slice(0,N);break}}}y&&!g&&(k=e(k,1/0));var O=M.length+k.length+A.length,B=O<v?new Array(v-O+1).join(d):"";switch(y&&g&&(k=e(B+k,B.length?v-A.length:1/0),B=""),h){case"<":k=M+k+A+B;break;case"=":k=M+B+k+A;break;case"^":k=B.slice(0,O=B.length>>1)+M+k+A+B.slice(O);break;default:k=B+M+k+A;break}return s(k)}return T.toString=function(){return f+""},T}function c(f,d){var h=u((f=sw(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(Y0(d)/3)))*3,m=Math.pow(10,-p),g=mY[8+p/3];return function(v){return h(m*v)+g}}return{format:u,formatPrefix:c}}var BC,z7,yhe;dvt({thousands:",",grouping:[3],currency:["$",""]});function dvt(t){return BC=fvt(t),z7=BC.format,yhe=BC.formatPrefix,BC}function hvt(t){return Math.max(0,-Y0(Math.abs(t)))}function pvt(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Y0(e)/3)))*3-Y0(Math.abs(t)))}function mvt(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Y0(e)-Y0(t))+1}function bhe(t,e,n,r){var i=oL(t,e,n),s;switch(r=sw(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=pvt(i,a))&&(r.precision=s),yhe(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=mvt(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=hvt(i))&&(r.precision=s-(r.type==="%")*2);break}}return z7(r)}function wm(t){var e=t.domain;return t.ticks=function(n){var r=e();return sL(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return bhe(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,a=r[i],o=r[s],l,u,c=10;for(o<a&&(u=a,a=o,o=u,u=i,i=s,s=u);c-- >0;){if(u=aL(a,o,n),u===l)return r[i]=a,r[s]=o,e(r);if(u>0)a=Math.floor(a/u)*u,o=Math.ceil(o/u)*u;else if(u<0)a=Math.ceil(a*u)/u,o=Math.floor(o*u)/u;else break;l=u}return t},t}function xhe(){var t=ghe();return t.copy=function(){return O2(t,xhe())},rc.apply(t,arguments),wm(t)}function whe(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,sP),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return whe(t).unknown(e)},t=arguments.length?Array.from(t,sP):[0,1],wm(n)}function _he(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],a;return s<i&&(a=n,n=r,r=a,a=i,i=s,s=a),t[n]=e.floor(i),t[r]=e.ceil(s),t}function gY(t){return Math.log(t)}function vY(t){return Math.exp(t)}function gvt(t){return-Math.log(-t)}function vvt(t){return-Math.exp(-t)}function yvt(t){return isFinite(t)?+("1e"+t):t<0?0:t}function bvt(t){return t===10?yvt:t===Math.E?Math.exp:e=>Math.pow(t,e)}function xvt(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function yY(t){return(e,n)=>-t(-e,n)}function B7(t){const e=t(gY,vY),n=e.domain;let r=10,i,s;function a(){return i=xvt(r),s=bvt(r),n()[0]<0?(i=yY(i),s=yY(s),t(gvt,vvt)):t(gY,vY),e}return e.base=function(o){return arguments.length?(r=+o,a()):r},e.domain=function(o){return arguments.length?(n(o),a()):n()},e.ticks=o=>{const l=n();let u=l[0],c=l[l.length-1];const f=c<u;f&&([u,c]=[c,u]);let d=i(u),h=i(c),p,m;const g=o==null?10:+o;let v=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),u>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<u)){if(m>c)break;v.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<u)){if(m>c)break;v.push(m)}v.length*2<g&&(v=sL(u,c,g))}else v=sL(d,h,Math.min(h-d,g)).map(s);return f?v.reverse():v},e.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=sw(l)).precision==null&&(l.trim=!0),l=z7(l)),o===1/0)return l;const u=Math.max(1,r*o/e.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=u?l(c):""}},e.nice=()=>n(_he(n(),{floor:o=>s(Math.floor(i(o))),ceil:o=>s(Math.ceil(i(o)))})),e}function She(){const t=B7(n$()).domain([1,10]);return t.copy=()=>O2(t,She()).base(t.base()),rc.apply(t,arguments),t}function bY(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function xY(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function U7(t){var e=1,n=t(bY(e),xY(e));return n.constant=function(r){return arguments.length?t(bY(e=+r),xY(e)):e},wm(n)}function Che(){var t=U7(n$());return t.copy=function(){return O2(t,Che()).constant(t.constant())},rc.apply(t,arguments)}function wY(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function wvt(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function _vt(t){return t<0?-t*t:t*t}function V7(t){var e=t(fa,fa),n=1;function r(){return n===1?t(fa,fa):n===.5?t(wvt,_vt):t(wY(n),wY(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},wm(e)}function W7(){var t=V7(n$());return t.copy=function(){return O2(t,W7()).exponent(t.exponent())},rc.apply(t,arguments),t}function Svt(){return W7.apply(null,arguments).exponent(.5)}function Ehe(){var t=[],e=[],n=[],r;function i(){var a=0,o=Math.max(1,e.length);for(n=new Array(o-1);++a<o;)n[a-1]=Xoe(t,a/o);return s}function s(a){return a==null||isNaN(a=+a)?r:e[x2(n,a)]}return s.invertExtent=function(a){var o=e.indexOf(a);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},s.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let o of a)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(Uc),i()},s.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return Ehe().domain(t).range(e).unknown(r)},rc.apply(s,arguments)}function The(){var t=0,e=1,n=1,r=[.5],i=[0,1],s;function a(l){return l!=null&&l<=l?i[x2(r,l,0,n)]:s}function o(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return a}return a.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,o()):[t,e]},a.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,o()):i.slice()},a.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},a.unknown=function(l){return arguments.length&&(s=l),a},a.thresholds=function(){return r.slice()},a.copy=function(){return The().domain([t,e]).range(i).unknown(s)},rc.apply(wm(a),arguments)}function khe(){var t=[.5],e=[0,1],n,r=1;function i(s){return s!=null&&s<=s?e[x2(t,s,0,r)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var a=e.indexOf(s);return[t[a-1],t[a]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return khe().domain(t).range(e).unknown(n)},rc.apply(i,arguments)}const IR=new Date,DR=new Date;function bi(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const a=i(s),o=i.ceil(s);return s-a<o-s?a:o},i.offset=(s,a)=>(e(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,o)=>{const l=[];if(s=i.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return l;let u;do l.push(u=new Date(+s)),e(s,o),t(s);while(u<s&&s<a);return l},i.filter=s=>bi(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,o)=>{if(a>=a)if(o<0)for(;++o<=0;)for(;e(a,-1),!s(a););else for(;--o>=0;)for(;e(a,1),!s(a););}),n&&(i.count=(s,a)=>(IR.setTime(+s),DR.setTime(+a),t(IR),t(DR),Math.floor(n(IR,DR))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?a=>r(a)%s===0:a=>i.count(0,a)%s===0):i)),i}const K0=bi(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);K0.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?bi(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):K0);K0.range;const Dc=1e3,Uo=Dc*60,Rc=Uo*60,tf=Rc*24,G7=tf*7,_Y=tf*30,RR=tf*365,Oc=bi(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Dc)},(t,e)=>(e-t)/Dc,t=>t.getUTCSeconds());Oc.range;const r$=bi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Dc)},(t,e)=>{t.setTime(+t+e*Uo)},(t,e)=>(e-t)/Uo,t=>t.getMinutes());r$.range;const i$=bi(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Uo)},(t,e)=>(e-t)/Uo,t=>t.getUTCMinutes());i$.range;const s$=bi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Dc-t.getMinutes()*Uo)},(t,e)=>{t.setTime(+t+e*Rc)},(t,e)=>(e-t)/Rc,t=>t.getHours());s$.range;const a$=bi(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Rc)},(t,e)=>(e-t)/Rc,t=>t.getUTCHours());a$.range;const gd=bi(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Uo)/tf,t=>t.getDate()-1);gd.range;const cp=bi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/tf,t=>t.getUTCDate()-1);cp.range;const Ahe=bi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/tf,t=>Math.floor(t/tf));Ahe.range;function _m(t){return bi(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Uo)/G7)}const F2=_m(0),xk=_m(1),Cvt=_m(2),Evt=_m(3),Z0=_m(4),Tvt=_m(5),kvt=_m(6);F2.range;xk.range;Cvt.range;Evt.range;Z0.range;Tvt.range;kvt.range;function Sm(t){return bi(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/G7)}const L2=Sm(0),wk=Sm(1),Avt=Sm(2),Mvt=Sm(3),J0=Sm(4),Nvt=Sm(5),$vt=Sm(6);L2.range;wk.range;Avt.range;Mvt.range;J0.range;Nvt.range;$vt.range;const aw=bi(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());aw.range;const ow=bi(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());ow.range;const Bu=bi(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Bu.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:bi(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Bu.range;const Uu=bi(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Uu.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:bi(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Uu.range;function Mhe(t,e,n,r,i,s){const a=[[Oc,1,Dc],[Oc,5,5*Dc],[Oc,15,15*Dc],[Oc,30,30*Dc],[s,1,Uo],[s,5,5*Uo],[s,15,15*Uo],[s,30,30*Uo],[i,1,Rc],[i,3,3*Rc],[i,6,6*Rc],[i,12,12*Rc],[r,1,tf],[r,2,2*tf],[n,1,G7],[e,1,_Y],[e,3,3*_Y],[t,1,RR]];function o(u,c,f){const d=c<u;d&&([u,c]=[c,u]);const h=f&&typeof f.range=="function"?f:l(u,c,f),p=h?h.range(u,+c+1):[];return d?p.reverse():p}function l(u,c,f){const d=Math.abs(c-u)/f,h=KB(([,,g])=>g).right(a,d);if(h===a.length)return t.every(oL(u/RR,c/RR,f));if(h===0)return K0.every(Math.max(oL(u,c,f),1));const[p,m]=a[d/a[h-1][2]<a[h][2]/d?h-1:h];return p.every(m)}return[o,l]}const[Ivt,Dvt]=Mhe(Uu,ow,L2,Ahe,a$,i$),[Rvt,Ovt]=Mhe(Bu,aw,F2,gd,s$,r$);function OR(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function FR(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Kb(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Fvt(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,a=t.shortDays,o=t.months,l=t.shortMonths,u=Zb(i),c=Jb(i),f=Zb(s),d=Jb(s),h=Zb(a),p=Jb(a),m=Zb(o),g=Jb(o),v=Zb(l),y=Jb(l),b={a:P,A:O,b:B,B:H,c:null,d:AY,e:AY,f:syt,g:myt,G:vyt,H:nyt,I:ryt,j:iyt,L:Nhe,m:ayt,M:oyt,p:te,q,Q:$Y,s:IY,S:lyt,u:uyt,U:cyt,V:fyt,w:dyt,W:hyt,x:null,X:null,y:pyt,Y:gyt,Z:yyt,"%":NY},x={a:Z,A:ne,b:G,B:he,c:null,d:MY,e:MY,f:_yt,g:Iyt,G:Ryt,H:byt,I:xyt,j:wyt,L:Ihe,m:Syt,M:Cyt,p:ve,q:we,Q:$Y,s:IY,S:Eyt,u:Tyt,U:kyt,V:Ayt,w:Myt,W:Nyt,x:null,X:null,y:$yt,Y:Dyt,Z:Oyt,"%":NY},w={a:T,A:k,b:M,B:A,c:N,d:TY,e:TY,f:Jvt,g:EY,G:CY,H:kY,I:kY,j:Xvt,L:Zvt,m:qvt,M:Yvt,p:E,q:jvt,Q:eyt,s:tyt,S:Kvt,u:Uvt,U:Vvt,V:Wvt,w:Bvt,W:Gvt,x:$,X:D,y:EY,Y:CY,Z:Hvt,"%":Qvt};b.x=S(n,b),b.X=S(r,b),b.c=S(e,b),x.x=S(n,x),x.X=S(r,x),x.c=S(e,x);function S(X,ae){return function(pe){var j=[],ze=-1,$e=0,nt=X.length,Je,Q,Ie;for(pe instanceof Date||(pe=new Date(+pe));++ze<nt;)X.charCodeAt(ze)===37&&(j.push(X.slice($e,ze)),(Q=SY[Je=X.charAt(++ze)])!=null?Je=X.charAt(++ze):Q=Je==="e"?" ":"0",(Ie=ae[Je])&&(Je=Ie(pe,Q)),j.push(Je),$e=ze+1);return j.push(X.slice($e,ze)),j.join("")}}function C(X,ae){return function(pe){var j=Kb(1900,void 0,1),ze=_(j,X,pe+="",0),$e,nt;if(ze!=pe.length)return null;if("Q"in j)return new Date(j.Q);if("s"in j)return new Date(j.s*1e3+("L"in j?j.L:0));if(ae&&!("Z"in j)&&(j.Z=0),"p"in j&&(j.H=j.H%12+j.p*12),j.m===void 0&&(j.m="q"in j?j.q:0),"V"in j){if(j.V<1||j.V>53)return null;"w"in j||(j.w=1),"Z"in j?($e=FR(Kb(j.y,0,1)),nt=$e.getUTCDay(),$e=nt>4||nt===0?wk.ceil($e):wk($e),$e=cp.offset($e,(j.V-1)*7),j.y=$e.getUTCFullYear(),j.m=$e.getUTCMonth(),j.d=$e.getUTCDate()+(j.w+6)%7):($e=OR(Kb(j.y,0,1)),nt=$e.getDay(),$e=nt>4||nt===0?xk.ceil($e):xk($e),$e=gd.offset($e,(j.V-1)*7),j.y=$e.getFullYear(),j.m=$e.getMonth(),j.d=$e.getDate()+(j.w+6)%7)}else("W"in j||"U"in j)&&("w"in j||(j.w="u"in j?j.u%7:"W"in j?1:0),nt="Z"in j?FR(Kb(j.y,0,1)).getUTCDay():OR(Kb(j.y,0,1)).getDay(),j.m=0,j.d="W"in j?(j.w+6)%7+j.W*7-(nt+5)%7:j.w+j.U*7-(nt+6)%7);return"Z"in j?(j.H+=j.Z/100|0,j.M+=j.Z%100,FR(j)):OR(j)}}function _(X,ae,pe,j){for(var ze=0,$e=ae.length,nt=pe.length,Je,Q;ze<$e;){if(j>=nt)return-1;if(Je=ae.charCodeAt(ze++),Je===37){if(Je=ae.charAt(ze++),Q=w[Je in SY?ae.charAt(ze++):Je],!Q||(j=Q(X,pe,j))<0)return-1}else if(Je!=pe.charCodeAt(j++))return-1}return j}function E(X,ae,pe){var j=u.exec(ae.slice(pe));return j?(X.p=c.get(j[0].toLowerCase()),pe+j[0].length):-1}function T(X,ae,pe){var j=h.exec(ae.slice(pe));return j?(X.w=p.get(j[0].toLowerCase()),pe+j[0].length):-1}function k(X,ae,pe){var j=f.exec(ae.slice(pe));return j?(X.w=d.get(j[0].toLowerCase()),pe+j[0].length):-1}function M(X,ae,pe){var j=v.exec(ae.slice(pe));return j?(X.m=y.get(j[0].toLowerCase()),pe+j[0].length):-1}function A(X,ae,pe){var j=m.exec(ae.slice(pe));return j?(X.m=g.get(j[0].toLowerCase()),pe+j[0].length):-1}function N(X,ae,pe){return _(X,e,ae,pe)}function $(X,ae,pe){return _(X,n,ae,pe)}function D(X,ae,pe){return _(X,r,ae,pe)}function P(X){return a[X.getDay()]}function O(X){return s[X.getDay()]}function B(X){return l[X.getMonth()]}function H(X){return o[X.getMonth()]}function te(X){return i[+(X.getHours()>=12)]}function q(X){return 1+~~(X.getMonth()/3)}function Z(X){return a[X.getUTCDay()]}function ne(X){return s[X.getUTCDay()]}function G(X){return l[X.getUTCMonth()]}function he(X){return o[X.getUTCMonth()]}function ve(X){return i[+(X.getUTCHours()>=12)]}function we(X){return 1+~~(X.getUTCMonth()/3)}return{format:function(X){var ae=S(X+="",b);return ae.toString=function(){return X},ae},parse:function(X){var ae=C(X+="",!1);return ae.toString=function(){return X},ae},utcFormat:function(X){var ae=S(X+="",x);return ae.toString=function(){return X},ae},utcParse:function(X){var ae=C(X+="",!0);return ae.toString=function(){return X},ae}}}var SY={"-":"",_:" ",0:"0"},zi=/^\s*\d+/,Lvt=/^%/,Pvt=/[\\^$*+?|[\]().{}]/g;function Mn(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function zvt(t){return t.replace(Pvt,"\\$&")}function Zb(t){return new RegExp("^(?:"+t.map(zvt).join("|")+")","i")}function Jb(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Bvt(t,e,n){var r=zi.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Uvt(t,e,n){var r=zi.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Vvt(t,e,n){var r=zi.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Wvt(t,e,n){var r=zi.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Gvt(t,e,n){var r=zi.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function CY(t,e,n){var r=zi.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function EY(t,e,n){var r=zi.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Hvt(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function jvt(t,e,n){var r=zi.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function qvt(t,e,n){var r=zi.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function TY(t,e,n){var r=zi.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Xvt(t,e,n){var r=zi.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function kY(t,e,n){var r=zi.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Yvt(t,e,n){var r=zi.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Kvt(t,e,n){var r=zi.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Zvt(t,e,n){var r=zi.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Jvt(t,e,n){var r=zi.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Qvt(t,e,n){var r=Lvt.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function eyt(t,e,n){var r=zi.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function tyt(t,e,n){var r=zi.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function AY(t,e){return Mn(t.getDate(),e,2)}function nyt(t,e){return Mn(t.getHours(),e,2)}function ryt(t,e){return Mn(t.getHours()%12||12,e,2)}function iyt(t,e){return Mn(1+gd.count(Bu(t),t),e,3)}function Nhe(t,e){return Mn(t.getMilliseconds(),e,3)}function syt(t,e){return Nhe(t,e)+"000"}function ayt(t,e){return Mn(t.getMonth()+1,e,2)}function oyt(t,e){return Mn(t.getMinutes(),e,2)}function lyt(t,e){return Mn(t.getSeconds(),e,2)}function uyt(t){var e=t.getDay();return e===0?7:e}function cyt(t,e){return Mn(F2.count(Bu(t)-1,t),e,2)}function $he(t){var e=t.getDay();return e>=4||e===0?Z0(t):Z0.ceil(t)}function fyt(t,e){return t=$he(t),Mn(Z0.count(Bu(t),t)+(Bu(t).getDay()===4),e,2)}function dyt(t){return t.getDay()}function hyt(t,e){return Mn(xk.count(Bu(t)-1,t),e,2)}function pyt(t,e){return Mn(t.getFullYear()%100,e,2)}function myt(t,e){return t=$he(t),Mn(t.getFullYear()%100,e,2)}function gyt(t,e){return Mn(t.getFullYear()%1e4,e,4)}function vyt(t,e){var n=t.getDay();return t=n>=4||n===0?Z0(t):Z0.ceil(t),Mn(t.getFullYear()%1e4,e,4)}function yyt(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Mn(e/60|0,"0",2)+Mn(e%60,"0",2)}function MY(t,e){return Mn(t.getUTCDate(),e,2)}function byt(t,e){return Mn(t.getUTCHours(),e,2)}function xyt(t,e){return Mn(t.getUTCHours()%12||12,e,2)}function wyt(t,e){return Mn(1+cp.count(Uu(t),t),e,3)}function Ihe(t,e){return Mn(t.getUTCMilliseconds(),e,3)}function _yt(t,e){return Ihe(t,e)+"000"}function Syt(t,e){return Mn(t.getUTCMonth()+1,e,2)}function Cyt(t,e){return Mn(t.getUTCMinutes(),e,2)}function Eyt(t,e){return Mn(t.getUTCSeconds(),e,2)}function Tyt(t){var e=t.getUTCDay();return e===0?7:e}function kyt(t,e){return Mn(L2.count(Uu(t)-1,t),e,2)}function Dhe(t){var e=t.getUTCDay();return e>=4||e===0?J0(t):J0.ceil(t)}function Ayt(t,e){return t=Dhe(t),Mn(J0.count(Uu(t),t)+(Uu(t).getUTCDay()===4),e,2)}function Myt(t){return t.getUTCDay()}function Nyt(t,e){return Mn(wk.count(Uu(t)-1,t),e,2)}function $yt(t,e){return Mn(t.getUTCFullYear()%100,e,2)}function Iyt(t,e){return t=Dhe(t),Mn(t.getUTCFullYear()%100,e,2)}function Dyt(t,e){return Mn(t.getUTCFullYear()%1e4,e,4)}function Ryt(t,e){var n=t.getUTCDay();return t=n>=4||n===0?J0(t):J0.ceil(t),Mn(t.getUTCFullYear()%1e4,e,4)}function Oyt(){return"+0000"}function NY(){return"%"}function $Y(t){return+t}function IY(t){return Math.floor(+t/1e3)}var gg,Rhe,Ohe;Fyt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Fyt(t){return gg=Fvt(t),Rhe=gg.format,gg.parse,Ohe=gg.utcFormat,gg.utcParse,gg}function Lyt(t){return new Date(t)}function Pyt(t){return t instanceof Date?+t:+new Date(+t)}function H7(t,e,n,r,i,s,a,o,l,u){var c=ghe(),f=c.invert,d=c.domain,h=u(".%L"),p=u(":%S"),m=u("%I:%M"),g=u("%I %p"),v=u("%a %d"),y=u("%b %d"),b=u("%B"),x=u("%Y");function w(S){return(l(S)<S?h:o(S)<S?p:a(S)<S?m:s(S)<S?g:r(S)<S?i(S)<S?v:y:n(S)<S?b:x)(S)}return c.invert=function(S){return new Date(f(S))},c.domain=function(S){return arguments.length?d(Array.from(S,Pyt)):d().map(Lyt)},c.ticks=function(S){var C=d();return t(C[0],C[C.length-1],S??10)},c.tickFormat=function(S,C){return C==null?w:u(C)},c.nice=function(S){var C=d();return(!S||typeof S.range!="function")&&(S=e(C[0],C[C.length-1],S??10)),S?d(_he(C,S)):c},c.copy=function(){return O2(c,H7(t,e,n,r,i,s,a,o,l,u))},c}function zyt(){return rc.apply(H7(Rvt,Ovt,Bu,aw,F2,gd,s$,r$,Oc,Rhe).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Byt(){return rc.apply(H7(Ivt,Dvt,Uu,ow,L2,cp,a$,i$,Oc,Ohe).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function o$(){var t=0,e=1,n,r,i,s,a=fa,o=!1,l;function u(f){return f==null||isNaN(f=+f)?l:a(i===0?.5:(f=(s(f)-n)*i,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,n=s(t=+t),r=s(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(a=f,u):a};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,a=f(h,p),u):[a(0),a(1)]}}return u.range=c(xm),u.rangeRound=c(t$),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return s=f,n=f(t),r=f(e),i=n===r?0:1/(r-n),u}}function nh(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function j7(){var t=wm(o$()(fa));return t.copy=function(){return nh(t,j7())},eh.apply(t,arguments)}function Fhe(){var t=B7(o$()).domain([1,10]);return t.copy=function(){return nh(t,Fhe()).base(t.base())},eh.apply(t,arguments)}function Lhe(){var t=U7(o$());return t.copy=function(){return nh(t,Lhe()).constant(t.constant())},eh.apply(t,arguments)}function q7(){var t=V7(o$());return t.copy=function(){return nh(t,q7()).exponent(t.exponent())},eh.apply(t,arguments)}function Uyt(){return q7.apply(null,arguments).exponent(.5)}function l$(){var t=0,e=.5,n=1,r=1,i,s,a,o,l,u=fa,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?o:l),u(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([t,e,n]=m,i=c(t=+t),s=c(e=+e),a=c(n=+n),o=i===s?0:.5/(s-i),l=s===a?0:.5/(a-s),r=s<i?-1:1,h):[t,e,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(u=m,h):u};function p(m){return function(g){var v,y,b;return arguments.length?([v,y,b]=g,u=L7(m,[v,y,b]),h):[u(0),u(.5),u(1)]}}return h.range=p(xm),h.rangeRound=p(t$),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(t),s=m(e),a=m(n),o=i===s?0:.5/(s-i),l=s===a?0:.5/(a-s),r=s<i?-1:1,h}}function Phe(){var t=wm(l$()(fa));return t.copy=function(){return nh(t,Phe())},eh.apply(t,arguments)}function zhe(){var t=B7(l$()).domain([.1,1,10]);return t.copy=function(){return nh(t,zhe()).base(t.base())},eh.apply(t,arguments)}function Bhe(){var t=U7(l$());return t.copy=function(){return nh(t,Bhe()).constant(t.constant())},eh.apply(t,arguments)}function X7(){var t=V7(l$());return t.copy=function(){return nh(t,X7()).exponent(t.exponent())},eh.apply(t,arguments)}function Vyt(){return X7.apply(null,arguments).exponent(.5)}const Y7="year",K7="quarter",Z7="month",J7="week",Q7="date",e9="day",t9="dayofyear",n9="hours",r9="minutes",i9="seconds",s9="milliseconds",Wyt=[Y7,K7,Z7,J7,Q7,e9,t9,n9,r9,i9,s9];Wyt.reduce((t,e,n)=>(t[e]=1+n,t),{});Y7+"",K7+"",aw.every(3),Z7+"",J7+"",Q7+"",e9+"",t9+"",n9+"",r9+"",i9+"",s9+"";Y7+"",K7+"",ow.every(3),Z7+"",J7+"",Q7+"",e9+"",t9+"",n9+"",r9+"",i9+"",s9+"";function Gyt(t,e,n){const r=t-e+n*2;return t?r>0?r:1:0}const Hyt="identity",a9="linear",Q0="log",o9="pow",l9="sqrt",u9="symlog",jyt="time",qyt="utc",Ky="sequential",P2="diverging",DY="quantile",Xyt="quantize",Yyt="threshold",Kyt="ordinal",Zyt="point",Jyt="band",Qyt="bin-ordinal",Bi="continuous",u$="discrete",c$="discretizing",Yl="interpolating",Uhe="temporal";function ebt(t){return function(e){let n=e[0],r=e[1],i;return r<n&&(i=n,n=r,r=i),[t.invert(n),t.invert(r)]}}function tbt(t){return function(e){const n=t.range();let r=e[0],i=e[1],s=-1,a,o,l,u;for(i<r&&(o=r,r=i,i=o),l=0,u=n.length;l<u;++l)n[l]>=r&&n[l]<=i&&(s<0&&(s=l),a=l);if(!(s<0))return r=t.invertExtent(n[s]),i=t.invertExtent(n[a]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function c9(){const t=I7().unknown(void 0),e=t.domain,n=t.range;let r=[0,1],i,s,a=!1,o=0,l=0,u=.5;delete t.unknown;function c(){const f=e().length,d=r[1]<r[0],h=r[1-d],p=Gyt(f,o,l);let m=r[d-0];i=(h-m)/(p||1),a&&(i=Math.floor(i)),m+=(h-m-i*(f-o))*u,s=i*(1-o),a&&(m=Math.round(m),s=Math.round(s));const g=zot(f).map(v=>m+i*v);return n(d?g.reverse():g)}return t.domain=function(f){return arguments.length?(e(f),c()):e()},t.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},t.rangeRound=function(f){return r=[+f[0],+f[1]],a=!0,c()},t.bandwidth=function(){return s},t.step=function(){return i},t.round=function(f){return arguments.length?(a=!!f,c()):a},t.padding=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),o=l,c()):o},t.paddingInner=function(f){return arguments.length?(o=Math.max(0,Math.min(1,f)),c()):o},t.paddingOuter=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},t.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},t.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],v,y,b;if(!(m!==m||g!==g)&&(g<m&&(b=m,m=g,g=b),!(g<h[0]||m>r[1-d])))return v=Math.max(0,iL(h,m)-1),y=m===g?v:iL(h,g)-1,m-h[v]>s+1e-10&&++v,d&&(b=v,v=p-y,y=p-b),v>y?void 0:e().slice(v,y+1)},t.invert=function(f){const d=t.invertRange([f,f]);return d&&d[0]},t.copy=function(){return c9().domain(e()).range(r).round(a).paddingInner(o).paddingOuter(l).align(u)},c()}function Vhe(t){const e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return Vhe(e())},t}function nbt(){return Vhe(c9().paddingInner(1))}var rbt=Array.prototype.map;function ibt(t){return rbt.call(t,Yr)}const sbt=Array.prototype.slice;function Whe(){let t=[],e=[];function n(r){return r==null||r!==r?void 0:e[(x2(t,r)-1)%e.length]}return n.domain=function(r){return arguments.length?(t=ibt(r),n):t.slice()},n.range=function(r){return arguments.length?(e=sbt.call(r),n):e.slice()},n.tickFormat=function(r,i){return bhe(t[0],Cn(t),r??10,i)},n.copy=function(){return Whe().domain(n.domain()).range(n.range())},n}const oP=new Map,abt=Symbol("vega_scale");function Ghe(t){return t[abt]=!0,t}function obt(t,e,n){const r=function(){const s=e();return s.invertRange||(s.invertRange=s.invert?ebt(s):s.invertExtent?tbt(s):void 0),s.type=t,Ghe(s)};return r.metadata=dn(qt(n)),r}function nr(t,e,n){return arguments.length>1?(oP.set(t,obt(t,e,n)),this):lbt(t)?oP.get(t):void 0}nr(Hyt,whe);nr(a9,xhe,Bi);nr(Q0,She,[Bi,Q0]);nr(o9,W7,Bi);nr(l9,Svt,Bi);nr(u9,Che,Bi);nr(jyt,zyt,[Bi,Uhe]);nr(qyt,Byt,[Bi,Uhe]);nr(Ky,j7,[Bi,Yl]);nr(`${Ky}-${a9}`,j7,[Bi,Yl]);nr(`${Ky}-${Q0}`,Fhe,[Bi,Yl,Q0]);nr(`${Ky}-${o9}`,q7,[Bi,Yl]);nr(`${Ky}-${l9}`,Uyt,[Bi,Yl]);nr(`${Ky}-${u9}`,Lhe,[Bi,Yl]);nr(`${P2}-${a9}`,Phe,[Bi,Yl]);nr(`${P2}-${Q0}`,zhe,[Bi,Yl,Q0]);nr(`${P2}-${o9}`,X7,[Bi,Yl]);nr(`${P2}-${l9}`,Vyt,[Bi,Yl]);nr(`${P2}-${u9}`,Bhe,[Bi,Yl]);nr(DY,Ehe,[c$,DY]);nr(Xyt,The,c$);nr(Yyt,khe,c$);nr(Qyt,Whe,[u$,c$]);nr(Kyt,I7,u$);nr(Jyt,c9,u$);nr(Zyt,nbt,u$);function lbt(t){return oP.has(t)}function ubt(t,e,n){return L7(cbt(e||"rgb",n),t)}function cbt(t,e){const n=evt[fbt(t)];return e!=null&&n&&n.gamma?n.gamma(e):n}function fbt(t){return"interpolate"+t.toLowerCase().split("-").map(e=>e[0].toUpperCase()+e.slice(1)).join("")}const dbt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},hbt={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function Hhe(t){const e=t.length/6|0,n=new Array(e);for(let r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}function jhe(t,e){for(const n in t)pbt(n,e(t[n]))}const RY={};jhe(hbt,Hhe);jhe(dbt,t=>ubt(Hhe(t)));function pbt(t,e){return t=t&&t.toLowerCase(),arguments.length>1?(RY[t]=e,this):RY[t]}const mbt=Nde(),lP=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function gbt(t,e){return function n(){const r=e();return r.type=t,r.path=Nde().projection(r),r.copy=r.copy||function(){const i=n();return lP.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},Ghe(r)}}function f9(t,e){if(!t||typeof t!="string")throw new Error("Projection type must be a name string.");return t=t.toLowerCase(),arguments.length>1?(_k[t]=gbt(t,e),this):_k[t]||null}function qhe(t){return t&&t.path||mbt}const _k={albers:Ide,albersusa:jgt,azimuthalequalarea:qgt,azimuthalequidistant:Xgt,conicconformal:Zgt,conicequalarea:dk,conicequidistant:e0t,equalEarth:n0t,equirectangular:Jgt,gnomonic:r0t,identity:i0t,mercator:Ygt,mollweide:m0t,naturalEarth1:s0t,orthographic:a0t,stereographic:o0t,transversemercator:l0t};for(const t in _k)f9(t,_k[t]);function d9(t){Ae.call(this,null,t)}d9.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};var vbt=tt(d9,Ae);vbt.transform=function(t,e){var n=e.fork(e.ALL),r=this.value,i=t.field||Lu,s=t.as||"path",a=n.SOURCE;function o(u){u[s]=r(i(u))}!r||t.modified()?(this.value=r=qhe(t.projection),n.materialize().reflow()):a=i===Lu||e.modified(i.fields)?n.ADD_MOD:n.ADD;var l=ybt(r,t.pointRadius);return n.visit(a,o),r.pointRadius(l),n.modifies(s)};function ybt(t,e){var n=t.pointRadius();return t.context(null),e!=null&&t.pointRadius(e),n}function h9(t){Ae.call(this,null,t)}h9.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};var bbt=tt(h9,Ae);bbt.transform=function(t,e){var n=t.projection,r=t.fields[0],i=t.fields[1],s=t.as||["x","y"],a=s[0],o=s[1],l;function u(c){var f=n([r(c),i(c)]);f?(c[a]=f[0],c[o]=f[1]):(c[a]=void 0,c[o]=void 0)}return t.modified()?e=e.materialize().reflow(!0).visit(e.SOURCE,u):(l=e.modified(r.fields)||e.modified(i.fields),e.visit(l?e.ADD_MOD:e.ADD,u)),e.modifies(s)};function p9(t){Ae.call(this,null,t)}p9.Definition={type:"GeoShape",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};var xbt=tt(p9,Ae);xbt.transform=function(t,e){var n=e.fork(e.ALL),r=this.value,i=t.field||oo("datum"),s=t.as||"shape",a=n.ADD_MOD;return(!r||t.modified())&&(this.value=r=wbt(qhe(t.projection),i,t.pointRadius),n.materialize().reflow(),a=n.SOURCE),n.visit(a,function(o){o[s]=r}),n.modifies(s)};function wbt(t,e,n){var r=n==null?function(i){return t(e(i))}:function(i){var s=t.pointRadius(),a=t.pointRadius(n)(e(i));return t.pointRadius(s),a};return r.context=function(i){return t.context(i),r},r}function m9(){return new Sk}function Sk(){this.reset()}Sk.prototype={constructor:Sk,reset:function(){this.s=this.t=0},add:function(t){OY(UC,t,this.t),OY(this,UC.s,this.s),this.s?this.t+=UC.t:this.s=UC.t},valueOf:function(){return this.s}};var UC=new Sk;function OY(t,e,n){var r=t.s=e+n,i=r-e,s=r-i;t.t=e-s+(n-i)}var No=1e-6,FY=1e-12,z2=Math.PI,LY=z2/2,Xhe=z2/4,PY=z2*2,ix=180/z2,bs=z2/180,lw=Math.abs,f$=Math.atan2,Hs=Math.cos,VC=Math.ceil,js=Math.sin,d$=Math.sqrt;function g9(t){return t>1?LY:t<-1?-LY:Math.asin(t)}function I1(){}function Ck(t,e){t&&BY.hasOwnProperty(t.type)&&BY[t.type](t,e)}var zY={Feature:function(t,e){Ck(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Ck(n[r].geometry,e)}},BY={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){uP(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)uP(n[r],e,0)},Polygon:function(t,e){UY(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)UY(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Ck(n[r],e)}};function uP(t,e,n){var r=-1,i=t.length-n,s;for(e.lineStart();++r<i;)s=t[r],e.point(s[0],s[1],s[2]);e.lineEnd()}function UY(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)uP(t[n],e,1);e.polygonEnd()}function v9(t,e){t&&zY.hasOwnProperty(t.type)?zY[t.type](t,e):Ck(t,e)}var Ek=m9(),Tk=m9(),Yhe,Khe,cP,fP,dP,Vu={point:I1,lineStart:I1,lineEnd:I1,polygonStart:function(){Ek.reset(),Vu.lineStart=_bt,Vu.lineEnd=Sbt},polygonEnd:function(){var t=+Ek;Tk.add(t<0?PY+t:t),this.lineStart=this.lineEnd=this.point=I1},sphere:function(){Tk.add(PY)}};function _bt(){Vu.point=Cbt}function Sbt(){Zhe(Yhe,Khe)}function Cbt(t,e){Vu.point=Zhe,Yhe=t,Khe=e,t*=bs,e*=bs,cP=t,fP=Hs(e=e/2+Xhe),dP=js(e)}function Zhe(t,e){t*=bs,e*=bs,e=e/2+Xhe;var n=t-cP,r=n>=0?1:-1,i=r*n,s=Hs(e),a=js(e),o=dP*a,l=fP*s+o*Hs(i),u=o*r*js(i);Ek.add(f$(u,l)),cP=t,fP=s,dP=a}function Ebt(t){return Tk.reset(),v9(t,Vu),Tk*2}function Tbt(t){return[f$(t[1],t[0]),g9(t[2])]}function kbt(t){var e=t[0],n=t[1],r=Hs(n);return[r*Hs(e),r*js(e),js(n)]}function VY(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Abt(t){var e=d$(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var xr,aa,kr,Ha,Rh,Jhe,Qhe,e0,sx=m9(),zf,nf,Ec={point:hP,lineStart:WY,lineEnd:GY,polygonStart:function(){Ec.point=tpe,Ec.lineStart=Mbt,Ec.lineEnd=Nbt,sx.reset(),Vu.polygonStart()},polygonEnd:function(){Vu.polygonEnd(),Ec.point=hP,Ec.lineStart=WY,Ec.lineEnd=GY,Ek<0?(xr=-(kr=180),aa=-(Ha=90)):sx>No?Ha=90:sx<-No&&(aa=-90),nf[0]=xr,nf[1]=kr},sphere:function(){xr=-(kr=180),aa=-(Ha=90)}};function hP(t,e){zf.push(nf=[xr=t,kr=t]),e<aa&&(aa=e),e>Ha&&(Ha=e)}function epe(t,e){var n=kbt([t*bs,e*bs]);if(e0){var r=VY(e0,n),i=[r[1],-r[0],0],s=VY(i,r);Abt(s),s=Tbt(s);var a=t-Rh,o=a>0?1:-1,l=s[0]*ix*o,u,c=lw(a)>180;c^(o*Rh<l&&l<o*t)?(u=s[1]*ix,u>Ha&&(Ha=u)):(l=(l+360)%360-180,c^(o*Rh<l&&l<o*t)?(u=-s[1]*ix,u<aa&&(aa=u)):(e<aa&&(aa=e),e>Ha&&(Ha=e))),c?t<Rh?Ua(xr,t)>Ua(xr,kr)&&(kr=t):Ua(t,kr)>Ua(xr,kr)&&(xr=t):kr>=xr?(t<xr&&(xr=t),t>kr&&(kr=t)):t>Rh?Ua(xr,t)>Ua(xr,kr)&&(kr=t):Ua(t,kr)>Ua(xr,kr)&&(xr=t)}else zf.push(nf=[xr=t,kr=t]);e<aa&&(aa=e),e>Ha&&(Ha=e),e0=n,Rh=t}function WY(){Ec.point=epe}function GY(){nf[0]=xr,nf[1]=kr,Ec.point=hP,e0=null}function tpe(t,e){if(e0){var n=t-Rh;sx.add(lw(n)>180?n+(n>0?360:-360):n)}else Jhe=t,Qhe=e;Vu.point(t,e),epe(t,e)}function Mbt(){Vu.lineStart()}function Nbt(){tpe(Jhe,Qhe),Vu.lineEnd(),lw(sx)>No&&(xr=-(kr=180)),nf[0]=xr,nf[1]=kr,e0=null}function Ua(t,e){return(e-=t)<0?e+360:e}function $bt(t,e){return t[0]-e[0]}function HY(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function Ibt(t){var e,n,r,i,s,a,o;if(Ha=kr=-(xr=aa=1/0),zf=[],v9(t,Ec),n=zf.length){for(zf.sort($bt),e=1,r=zf[0],s=[r];e<n;++e)i=zf[e],HY(r,i[0])||HY(r,i[1])?(Ua(r[0],i[1])>Ua(r[0],r[1])&&(r[1]=i[1]),Ua(i[0],r[1])>Ua(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(a=-1/0,n=s.length-1,e=0,r=s[n];e<=n;r=i,++e)i=s[e],(o=Ua(r[1],i[0]))>a&&(a=o,xr=i[0],kr=r[1])}return zf=nf=null,xr===1/0||aa===1/0?[[NaN,NaN],[NaN,NaN]]:[[xr,aa],[kr,Ha]]}var D1,kk,Ak,Mk,Nk,$k,Ik,Dk,pP,mP,gP,npe,rpe,Ns,$s,Is,kl={sphere:I1,point:y9,lineStart:jY,lineEnd:qY,polygonStart:function(){kl.lineStart=Obt,kl.lineEnd=Fbt},polygonEnd:function(){kl.lineStart=jY,kl.lineEnd=qY}};function y9(t,e){t*=bs,e*=bs;var n=Hs(e);B2(n*Hs(t),n*js(t),js(e))}function B2(t,e,n){++D1,Ak+=(t-Ak)/D1,Mk+=(e-Mk)/D1,Nk+=(n-Nk)/D1}function jY(){kl.point=Dbt}function Dbt(t,e){t*=bs,e*=bs;var n=Hs(e);Ns=n*Hs(t),$s=n*js(t),Is=js(e),kl.point=Rbt,B2(Ns,$s,Is)}function Rbt(t,e){t*=bs,e*=bs;var n=Hs(e),r=n*Hs(t),i=n*js(t),s=js(e),a=f$(d$((a=$s*s-Is*i)*a+(a=Is*r-Ns*s)*a+(a=Ns*i-$s*r)*a),Ns*r+$s*i+Is*s);kk+=a,$k+=a*(Ns+(Ns=r)),Ik+=a*($s+($s=i)),Dk+=a*(Is+(Is=s)),B2(Ns,$s,Is)}function qY(){kl.point=y9}function Obt(){kl.point=Lbt}function Fbt(){ipe(npe,rpe),kl.point=y9}function Lbt(t,e){npe=t,rpe=e,t*=bs,e*=bs,kl.point=ipe;var n=Hs(e);Ns=n*Hs(t),$s=n*js(t),Is=js(e),B2(Ns,$s,Is)}function ipe(t,e){t*=bs,e*=bs;var n=Hs(e),r=n*Hs(t),i=n*js(t),s=js(e),a=$s*s-Is*i,o=Is*r-Ns*s,l=Ns*i-$s*r,u=d$(a*a+o*o+l*l),c=g9(u),f=u&&-c/u;pP+=f*a,mP+=f*o,gP+=f*l,kk+=c,$k+=c*(Ns+(Ns=r)),Ik+=c*($s+($s=i)),Dk+=c*(Is+(Is=s)),B2(Ns,$s,Is)}function Pbt(t){D1=kk=Ak=Mk=Nk=$k=Ik=Dk=pP=mP=gP=0,v9(t,kl);var e=pP,n=mP,r=gP,i=e*e+n*n+r*r;return i<FY&&(e=$k,n=Ik,r=Dk,kk<No&&(e=Ak,n=Mk,r=Nk),i=e*e+n*n+r*r,i<FY)?[NaN,NaN]:[f$(n,e)*ix,g9(r/d$(i))*ix]}function XY(t,e,n){var r=nd(t,e-No,n).concat(e);return function(i){return r.map(function(s){return[i,s]})}}function YY(t,e,n){var r=nd(t,e-No,n).concat(e);return function(i){return r.map(function(s){return[s,i]})}}function zbt(){var t,e,n,r,i,s,a,o,l=10,u=l,c=90,f=360,d,h,p,m,g=2.5;function v(){return{type:"MultiLineString",coordinates:y()}}function y(){return nd(VC(r/c)*c,n,c).map(p).concat(nd(VC(o/f)*f,a,f).map(m)).concat(nd(VC(e/l)*l,t,l).filter(function(b){return lw(b%c)>No}).map(d)).concat(nd(VC(s/u)*u,i,u).filter(function(b){return lw(b%f)>No}).map(h))}return v.lines=function(){return y().map(function(b){return{type:"LineString",coordinates:b}})},v.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(a).slice(1),p(n).reverse().slice(1),m(o).reverse().slice(1))]}},v.extent=function(b){return arguments.length?v.extentMajor(b).extentMinor(b):v.extentMinor()},v.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],o=+b[0][1],a=+b[1][1],r>n&&(b=r,r=n,n=b),o>a&&(b=o,o=a,a=b),v.precision(g)):[[r,o],[n,a]]},v.extentMinor=function(b){return arguments.length?(e=+b[0][0],t=+b[1][0],s=+b[0][1],i=+b[1][1],e>t&&(b=e,e=t,t=b),s>i&&(b=s,s=i,i=b),v.precision(g)):[[e,s],[t,i]]},v.step=function(b){return arguments.length?v.stepMajor(b).stepMinor(b):v.stepMinor()},v.stepMajor=function(b){return arguments.length?(c=+b[0],f=+b[1],v):[c,f]},v.stepMinor=function(b){return arguments.length?(l=+b[0],u=+b[1],v):[l,u]},v.precision=function(b){return arguments.length?(g=+b,d=XY(s,i,90),h=YY(e,t,g),p=XY(o,a,90),m=YY(r,n,g),v):g},v.extentMajor([[-180,-90+No],[180,90-No]]).extentMinor([[-180,-80-No],[180,80+No]])}function b9(t){Ae.call(this,[],t),this.generator=zbt()}b9.Definition={type:"Graticule",metadata:{changes:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};var Bbt=tt(b9,Ae);Bbt.transform=function(t,e){var n=this.value,r=this.generator,i;if(!n.length||t.modified())for(var s in t)bn(r[s])&&r[s](t[s]);return i=r(),n.length?e.mod.push(Zae(n[0],i)):e.add.push(Nr(i)),n[0]=i,e};function spe(t){Ae.call(this,null,t),this.modified(!0)}var Ubt=tt(spe,Ae);Ubt.transform=function(t,e){var n=this.value;return!n||t.modified("type")?(this.value=n=Wbt(t.type),lP.forEach(function(r){t[r]!=null&&KY(n,r,t[r])})):lP.forEach(function(r){t.modified(r)&&KY(n,r,t[r])}),t.pointRadius!=null&&n.path.pointRadius(t.pointRadius),t.fit&&Vbt(n,t),e.fork(e.NO_SOURCE|e.NO_FIELDS)};function Vbt(t,e){var n=Gbt(e.fit);e.extent?t.fitExtent(e.extent,n):e.size&&t.fitSize(e.size,n)}function Wbt(t){var e=f9((t||"mercator").toLowerCase());return e||Fe("Unrecognized projection type: "+t),e()}function KY(t,e,n){bn(t[e])&&t[e](n)}function Gbt(t){return t=qt(t),t.length===1?t[0]:{type:OL,features:t.reduce(function(e,n){return n&&n.type===OL?e.push.apply(e,n.features):je(n)?e.push.apply(e,n):e.push(n),e},[])}}const Hbt=Object.freeze(Object.defineProperty({__proto__:null,contour:C7,geojson:E7,geopath:d9,geopoint:h9,geoshape:p9,graticule:b9,projection:spe},Symbol.toStringTag,{value:"Module"}));function jbt(t,e){var n;t==null&&(t=0),e==null&&(e=0);function r(){var i,s=n.length,a,o=0,l=0;for(i=0;i<s;++i)a=n[i],o+=a.x,l+=a.y;for(o=o/s-t,l=l/s-e,i=0;i<s;++i)a=n[i],a.x-=o,a.y-=l}return r.initialize=function(i){n=i},r.x=function(i){return arguments.length?(t=+i,r):t},r.y=function(i){return arguments.length?(e=+i,r):e},r}function Ls(t){return function(){return t}}function rd(){return(Math.random()-.5)*1e-6}function qbt(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return ape(this.cover(e,n),e,n,t)}function ape(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,s=t._root,a={data:r},o=t._x0,l=t._y0,u=t._x1,c=t._y1,f,d,h,p,m,g,v,y;if(!s)return t._root=a,t;for(;s.length;)if((m=e>=(f=(o+u)/2))?o=f:u=f,(g=n>=(d=(l+c)/2))?l=d:c=d,i=s,!(s=s[v=g<<1|m]))return i[v]=a,t;if(h=+t._x.call(null,s.data),p=+t._y.call(null,s.data),e===h&&n===p)return a.next=s,i?i[v]=a:t._root=a,t;do i=i?i[v]=new Array(4):t._root=new Array(4),(m=e>=(f=(o+u)/2))?o=f:u=f,(g=n>=(d=(l+c)/2))?l=d:c=d;while((v=g<<1|m)===(y=(p>=d)<<1|h>=f));return i[y]=s,i[v]=a,t}function Xbt(t){var e,n,r=t.length,i,s,a=new Array(r),o=new Array(r),l=1/0,u=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(s=+this._y.call(null,e))||(a[n]=i,o[n]=s,i<l&&(l=i),i>c&&(c=i),s<u&&(u=s),s>f&&(f=s));if(l>c||u>f)return this;for(this.cover(l,u).cover(c,f),n=0;n<r;++n)ape(this,a[n],o[n],t[n]);return this}function Ybt(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,s=(r=Math.floor(e))+1;else{for(var a=i-n,o=this._root,l,u;n>t||t>=i||r>e||e>=s;)switch(u=(e<r)<<1|t<n,l=new Array(4),l[u]=o,o=l,a*=2,u){case 0:i=n+a,s=r+a;break;case 1:n=i-a,s=r+a;break;case 2:i=n+a,r=s-a;break;case 3:n=i-a,r=s-a;break}this._root&&this._root.length&&(this._root=o)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Kbt(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function Zbt(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Rs(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function Jbt(t,e,n){var r,i=this._x0,s=this._y0,a,o,l,u,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new Rs(h,i,s,c,f)),n==null?n=1/0:(i=t-n,s=e-n,c=t+n,f=e+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(a=p.x0)>c||(o=p.y0)>f||(l=p.x1)<i||(u=p.y1)<s))if(h.length){var g=(a+l)/2,v=(o+u)/2;d.push(new Rs(h[3],g,v,l,u),new Rs(h[2],a,v,g,u),new Rs(h[1],g,o,l,v),new Rs(h[0],a,o,g,v)),(m=(e>=v)<<1|t>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var y=t-+this._x.call(null,h.data),b=e-+this._y.call(null,h.data),x=y*y+b*b;if(x<n){var w=Math.sqrt(n=x);i=t-w,s=e-w,c=t+w,f=e+w,r=h.data}}return r}function Qbt(t){if(isNaN(c=+this._x.call(null,t))||isNaN(f=+this._y.call(null,t)))return this;var e,n=this._root,r,i,s,a=this._x0,o=this._y0,l=this._x1,u=this._y1,c,f,d,h,p,m,g,v;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(a+l)/2))?a=d:l=d,(m=f>=(h=(o+u)/2))?o=h:u=h,e=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(e[g+1&3]||e[g+2&3]||e[g+3&3])&&(r=e,v=g)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):e?(s?e[g]=s:delete e[g],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[v]=n:this._root=n),this):(this._root=s,this)}function e1t(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function t1t(){return this._root}function n1t(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function r1t(t){var e=[],n,r=this._root,i,s,a,o,l;for(r&&e.push(new Rs(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,s=n.x0,a=n.y0,o=n.x1,l=n.y1)&&r.length){var u=(s+o)/2,c=(a+l)/2;(i=r[3])&&e.push(new Rs(i,u,c,o,l)),(i=r[2])&&e.push(new Rs(i,s,c,u,l)),(i=r[1])&&e.push(new Rs(i,u,a,o,c)),(i=r[0])&&e.push(new Rs(i,s,a,u,c))}return this}function i1t(t){var e=[],n=[],r;for(this._root&&e.push(new Rs(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var s,a=r.x0,o=r.y0,l=r.x1,u=r.y1,c=(a+l)/2,f=(o+u)/2;(s=i[0])&&e.push(new Rs(s,a,o,c,f)),(s=i[1])&&e.push(new Rs(s,c,o,l,f)),(s=i[2])&&e.push(new Rs(s,a,f,c,u)),(s=i[3])&&e.push(new Rs(s,c,f,l,u))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function s1t(t){return t[0]}function a1t(t){return arguments.length?(this._x=t,this):this._x}function o1t(t){return t[1]}function l1t(t){return arguments.length?(this._y=t,this):this._y}function x9(t,e,n){var r=new w9(e??s1t,n??o1t,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function w9(t,e,n,r,i,s){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function ZY(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Ys=x9.prototype=w9.prototype;Ys.copy=function(){var t=new w9(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=ZY(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=ZY(r));return t};Ys.add=qbt;Ys.addAll=Xbt;Ys.cover=Ybt;Ys.data=Kbt;Ys.extent=Zbt;Ys.find=Jbt;Ys.remove=Qbt;Ys.removeAll=e1t;Ys.root=t1t;Ys.size=n1t;Ys.visit=r1t;Ys.visitAfter=i1t;Ys.x=a1t;Ys.y=l1t;function u1t(t){return t.x+t.vx}function c1t(t){return t.y+t.vy}function f1t(t){var e,n,r=1,i=1;typeof t!="function"&&(t=Ls(t==null?1:+t));function s(){for(var l,u=e.length,c,f,d,h,p,m,g=0;g<i;++g)for(c=x9(e,u1t,c1t).visitAfter(a),l=0;l<u;++l)f=e[l],p=n[f.index],m=p*p,d=f.x+f.vx,h=f.y+f.vy,c.visit(v);function v(y,b,x,w,S){var C=y.data,_=y.r,E=p+_;if(C){if(C.index>f.index){var T=d-C.x-C.vx,k=h-C.y-C.vy,M=T*T+k*k;M<E*E&&(T===0&&(T=rd(),M+=T*T),k===0&&(k=rd(),M+=k*k),M=(E-(M=Math.sqrt(M)))/M*r,f.vx+=(T*=M)*(E=(_*=_)/(m+_)),f.vy+=(k*=M)*E,C.vx-=T*(E=1-E),C.vy-=k*E)}return}return b>d+E||w<d-E||x>h+E||S<h-E}}function a(l){if(l.data)return l.r=n[l.data.index];for(var u=l.r=0;u<4;++u)l[u]&&l[u].r>l.r&&(l.r=l[u].r)}function o(){if(e){var l,u=e.length,c;for(n=new Array(u),l=0;l<u;++l)c=e[l],n[c.index]=+t(c,l,e)}}return s.initialize=function(l){e=l,o()},s.iterations=function(l){return arguments.length?(i=+l,s):i},s.strength=function(l){return arguments.length?(r=+l,s):r},s.radius=function(l){return arguments.length?(t=typeof l=="function"?l:Ls(+l),o(),s):t},s}function d1t(t){return t.index}function JY(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function h1t(t){var e=d1t,n=c,r,i=Ls(30),s,a,o,l,u=1;t==null&&(t=[]);function c(m){return 1/Math.min(o[m.source.index],o[m.target.index])}function f(m){for(var g=0,v=t.length;g<u;++g)for(var y=0,b,x,w,S,C,_,E;y<v;++y)b=t[y],x=b.source,w=b.target,S=w.x+w.vx-x.x-x.vx||rd(),C=w.y+w.vy-x.y-x.vy||rd(),_=Math.sqrt(S*S+C*C),_=(_-s[y])/_*m*r[y],S*=_,C*=_,w.vx-=S*(E=l[y]),w.vy-=C*E,x.vx+=S*(E=1-E),x.vy+=C*E}function d(){if(a){var m,g=a.length,v=t.length,y=$d(a,e),b;for(m=0,o=new Array(g);m<v;++m)b=t[m],b.index=m,typeof b.source!="object"&&(b.source=JY(y,b.source)),typeof b.target!="object"&&(b.target=JY(y,b.target)),o[b.source.index]=(o[b.source.index]||0)+1,o[b.target.index]=(o[b.target.index]||0)+1;for(m=0,l=new Array(v);m<v;++m)b=t[m],l[m]=o[b.source.index]/(o[b.source.index]+o[b.target.index]);r=new Array(v),h(),s=new Array(v),p()}}function h(){if(a)for(var m=0,g=t.length;m<g;++m)r[m]=+n(t[m],m,t)}function p(){if(a)for(var m=0,g=t.length;m<g;++m)s[m]=+i(t[m],m,t)}return f.initialize=function(m){a=m,d()},f.links=function(m){return arguments.length?(t=m,d(),f):t},f.id=function(m){return arguments.length?(e=m,f):e},f.iterations=function(m){return arguments.length?(u=+m,f):u},f.strength=function(m){return arguments.length?(n=typeof m=="function"?m:Ls(+m),h(),f):n},f.distance=function(m){return arguments.length?(i=typeof m=="function"?m:Ls(+m),p(),f):i},f}var p1t={value:function(){}};function ope(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new CE(n)}function CE(t){this._=t}function m1t(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}CE.prototype=ope.prototype={constructor:CE,on:function(t,e){var n=this._,r=m1t(t+"",n),i,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((i=(t=r[s]).type)&&(i=g1t(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<a;)if(i=(t=r[s]).type)n[i]=QY(n[i],t.name,e);else if(e==null)for(i in n)n[i]=QY(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new CE(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function g1t(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function QY(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=p1t,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var ev=0,R1=0,Qb=0,lpe=1e3,Rk,O1,Ok=0,Up=0,h$=0,uw=typeof performance=="object"&&performance.now?performance:Date,upe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function _9(){return Up||(upe(v1t),Up=uw.now()+h$)}function v1t(){Up=0}function Fk(){this._call=this._time=this._next=null}Fk.prototype=cpe.prototype={constructor:Fk,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?_9():+n)+(e==null?0:+e),!this._next&&O1!==this&&(O1?O1._next=this:Rk=this,O1=this),this._call=t,this._time=n,vP()},stop:function(){this._call&&(this._call=null,this._time=1/0,vP())}};function cpe(t,e,n){var r=new Fk;return r.restart(t,e,n),r}function y1t(){_9(),++ev;for(var t=Rk,e;t;)(e=Up-t._time)>=0&&t._call.call(null,e),t=t._next;--ev}function eK(){Up=(Ok=uw.now())+h$,ev=R1=0;try{y1t()}finally{ev=0,x1t(),Up=0}}function b1t(){var t=uw.now(),e=t-Ok;e>lpe&&(h$-=e,Ok=t)}function x1t(){for(var t,e=Rk,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Rk=n);O1=t,vP(r)}function vP(t){if(!ev){R1&&(R1=clearTimeout(R1));var e=t-Up;e>24?(t<1/0&&(R1=setTimeout(eK,t-uw.now()-h$)),Qb&&(Qb=clearInterval(Qb))):(Qb||(Ok=uw.now(),Qb=setInterval(b1t,lpe)),ev=1,upe(eK))}}function w1t(t,e,n){var r=new Fk,i=e;return e==null?(r.restart(t,e,n),r):(e=+e,n=n==null?_9():+n,r.restart(function s(a){a+=i,r.restart(s,i+=e,n),t(a)},e,n),r)}function _1t(t){return t.x}function S1t(t){return t.y}var C1t=10,E1t=Math.PI*(3-Math.sqrt(5));function T1t(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,a=.6,o=$d(),l=cpe(c),u=ope("tick","end");t==null&&(t=[]);function c(){f(),u.call("tick",e),n<r&&(l.stop(),u.call("end",e))}function f(p){var m,g=t.length,v;p===void 0&&(p=1);for(var y=0;y<p;++y)for(n+=(s-n)*i,o.each(function(b){b(n)}),m=0;m<g;++m)v=t[m],v.fx==null?v.x+=v.vx*=a:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=a:(v.y=v.fy,v.vy=0);return e}function d(){for(var p=0,m=t.length,g;p<m;++p){if(g=t[p],g.index=p,g.fx!=null&&(g.x=g.fx),g.fy!=null&&(g.y=g.fy),isNaN(g.x)||isNaN(g.y)){var v=C1t*Math.sqrt(p),y=p*E1t;g.x=v*Math.cos(y),g.y=v*Math.sin(y)}(isNaN(g.vx)||isNaN(g.vy))&&(g.vx=g.vy=0)}}function h(p){return p.initialize&&p.initialize(t),p}return d(),e={tick:f,restart:function(){return l.restart(c),e},stop:function(){return l.stop(),e},nodes:function(p){return arguments.length?(t=p,d(),o.each(h),e):t},alpha:function(p){return arguments.length?(n=+p,e):n},alphaMin:function(p){return arguments.length?(r=+p,e):r},alphaDecay:function(p){return arguments.length?(i=+p,e):+i},alphaTarget:function(p){return arguments.length?(s=+p,e):s},velocityDecay:function(p){return arguments.length?(a=1-p,e):1-a},force:function(p,m){return arguments.length>1?(m==null?o.remove(p):o.set(p,h(m)),e):o.get(p)},find:function(p,m,g){var v=0,y=t.length,b,x,w,S,C;for(g==null?g=1/0:g*=g,v=0;v<y;++v)S=t[v],b=p-S.x,x=m-S.y,w=b*b+x*x,w<g&&(C=S,g=w);return C},on:function(p,m){return arguments.length>1?(u.on(p,m),e):u.on(p)}}}function k1t(){var t,e,n,r=Ls(-30),i,s=1,a=1/0,o=.81;function l(d){var h,p=t.length,m=x9(t,_1t,S1t).visitAfter(c);for(n=d,h=0;h<p;++h)e=t[h],m.visit(f)}function u(){if(t){var d,h=t.length,p;for(i=new Array(h),d=0;d<h;++d)p=t[d],i[p.index]=+r(p,d,t)}}function c(d){var h=0,p,m,g=0,v,y,b;if(d.length){for(v=y=b=0;b<4;++b)(p=d[b])&&(m=Math.abs(p.value))&&(h+=p.value,g+=m,v+=m*p.x,y+=m*p.y);d.x=v/g,d.y=y/g}else{p=d,p.x=p.data.x,p.y=p.data.y;do h+=i[p.data.index];while(p=p.next)}d.value=h}function f(d,h,p,m){if(!d.value)return!0;var g=d.x-e.x,v=d.y-e.y,y=m-h,b=g*g+v*v;if(y*y/o<b)return b<a&&(g===0&&(g=rd(),b+=g*g),v===0&&(v=rd(),b+=v*v),b<s&&(b=Math.sqrt(s*b)),e.vx+=g*d.value*n/b,e.vy+=v*d.value*n/b),!0;if(d.length||b>=a)return;(d.data!==e||d.next)&&(g===0&&(g=rd(),b+=g*g),v===0&&(v=rd(),b+=v*v),b<s&&(b=Math.sqrt(s*b)));do d.data!==e&&(y=i[d.data.index]*n/b,e.vx+=g*y,e.vy+=v*y);while(d=d.next)}return l.initialize=function(d){t=d,u()},l.strength=function(d){return arguments.length?(r=typeof d=="function"?d:Ls(+d),u(),l):r},l.distanceMin=function(d){return arguments.length?(s=d*d,l):Math.sqrt(s)},l.distanceMax=function(d){return arguments.length?(a=d*d,l):Math.sqrt(a)},l.theta=function(d){return arguments.length?(o=d*d,l):Math.sqrt(o)},l}function A1t(t){var e=Ls(.1),n,r,i;typeof t!="function"&&(t=Ls(t==null?0:+t));function s(o){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vx+=(i[l]-c.x)*r[l]*o}function a(){if(n){var o,l=n.length;for(r=new Array(l),i=new Array(l),o=0;o<l;++o)r[o]=isNaN(i[o]=+t(n[o],o,n))?0:+e(n[o],o,n)}}return s.initialize=function(o){n=o,a()},s.strength=function(o){return arguments.length?(e=typeof o=="function"?o:Ls(+o),a(),s):e},s.x=function(o){return arguments.length?(t=typeof o=="function"?o:Ls(+o),a(),s):t},s}function M1t(t){var e=Ls(.1),n,r,i;typeof t!="function"&&(t=Ls(t==null?0:+t));function s(o){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vy+=(i[l]-c.y)*r[l]*o}function a(){if(n){var o,l=n.length;for(r=new Array(l),i=new Array(l),o=0;o<l;++o)r[o]=isNaN(i[o]=+t(n[o],o,n))?0:+e(n[o],o,n)}}return s.initialize=function(o){n=o,a()},s.strength=function(o){return arguments.length?(e=typeof o=="function"?o:Ls(+o),a(),s):e},s.y=function(o){return arguments.length?(t=typeof o=="function"?o:Ls(+o),a(),s):t},s}var tK={center:jbt,collide:f1t,nbody:k1t,link:h1t,x:A1t,y:M1t},F1="forces",yP=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],N1t=["static","iterations"],fpe=["x","y","vx","vy"];function S9(t){Ae.call(this,null,t)}S9.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:fpe}]};var dpe=tt(S9,Ae);dpe.transform=function(t,e){var n=this.value,r=e.changed(e.ADD_REM),i=t.modified(yP),s=t.iterations||300;if(n?(r&&(e.modifies("index"),n.nodes(e.source)),(i||e.changed(e.MOD))&&hpe(n,t,0,e)):(this.value=n=I1t(e.source,t),n.on("tick",$1t(e.dataflow,this)),t.static||(r=!0,n.tick()),e.modifies("index")),i||r||t.modified(N1t)||e.changed()&&t.restart){if(n.alpha(Math.max(n.alpha(),t.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),t.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return e.StopPropagation}return this.finish(t,e)};dpe.finish=function(t,e){for(var n=e.dataflow,r=this._argops,i=0,s=r.length,a;i<s;++i)if(a=r[i],!(a.name!==F1||a.op._argval.force!=="link")){for(var o=a.op._argops,l=0,u=o.length,c;l<u;++l)if(o[l].name==="links"&&(c=o[l].op.source)){n.pulse(c,n.changeset().reflow());break}}return e.reflow(t.modified()).modifies(fpe)};function $1t(t,e){return function(){t.touch(e).run()}}function I1t(t,e){var n=T1t(t),r=!1,i=n.stop,s=n.restart;return n.stopped=function(){return r},n.restart=function(){return r=!1,s()},n.stop=function(){return r=!0,i()},hpe(n,e,!0).on("end",function(){r=!0})}function hpe(t,e,n,r){var i=qt(e.forces),s,a,o,l;for(s=0,a=yP.length;s<a;++s)o=yP[s],o!==F1&&e.modified(o)&&t[o](e[o]);for(s=0,a=i.length;s<a;++s)l=F1+s,o=n||e.modified(F1,s)?R1t(i[s]):r&&D1t(i[s],r)?t.force(l):null,o&&t.force(l,o);for(a=t.numForces||0;s<a;++s)t.force(F1+s,null);return t.numForces=i.length,t}function D1t(t,e){var n,r;for(n in t)if(bn(r=t[n])&&e.modified(va(r)))return 1;return 0}function R1t(t){var e,n;tK.hasOwnProperty(t.force)||Fe("Unrecognized force: "+t.force),e=tK[t.force]();for(n in t)bn(e[n])&&O1t(e[n],t[n],t);return e}function O1t(t,e,n){t(bn(e)?function(r){return e(r,n)}:e)}const F1t=Object.freeze(Object.defineProperty({__proto__:null,force:S9},Symbol.toStringTag,{value:"Module"}));function bP(t,e,n){var r={};return t.each(function(i){var s=i.data;n(s)&&(r[e(s)]=i)}),t.lookup=r,t}function L1t(t,e){return t.parent===e.parent?1:2}function P1t(t){return t.reduce(z1t,0)/t.length}function z1t(t,e){return t+e.x}function B1t(t){return 1+t.reduce(U1t,0)}function U1t(t,e){return Math.max(t,e.y)}function V1t(t){for(var e;e=t.children;)t=e[0];return t}function W1t(t){for(var e;e=t.children;)t=e[e.length-1];return t}function G1t(){var t=L1t,e=1,n=1,r=!1;function i(s){var a,o=0;s.eachAfter(function(d){var h=d.children;h?(d.x=P1t(h),d.y=B1t(h)):(d.x=a?o+=t(d,a):0,d.y=0,a=d)});var l=V1t(s),u=W1t(s),c=l.x-t(l,u)/2,f=u.x+t(u,l)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*e,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*e,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(t=s,i):t},i.size=function(s){return arguments.length?(r=!1,e=+s[0],n=+s[1],i):r?null:[e,n]},i.nodeSize=function(s){return arguments.length?(r=!0,e=+s[0],n=+s[1],i):r?[e,n]:null},i}function H1t(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function j1t(){return this.eachAfter(H1t)}function q1t(t){var e=this,n,r=[e],i,s,a;do for(n=r.reverse(),r=[];e=n.pop();)if(t(e),i=e.children,i)for(s=0,a=i.length;s<a;++s)r.push(i[s]);while(r.length);return this}function X1t(t){for(var e=this,n=[e],r,i;e=n.pop();)if(t(e),r=e.children,r)for(i=r.length-1;i>=0;--i)n.push(r[i]);return this}function Y1t(t){for(var e=this,n=[e],r=[],i,s,a;e=n.pop();)if(r.push(e),i=e.children,i)for(s=0,a=i.length;s<a;++s)n.push(i[s]);for(;e=r.pop();)t(e);return this}function K1t(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function Z1t(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function J1t(t){for(var e=this,n=Q1t(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function Q1t(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function ext(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function txt(){var t=[];return this.each(function(e){t.push(e)}),t}function nxt(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function rxt(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function C9(t,e){var n=new tv(t),r=+t.value&&(n.value=t.value),i,s=[n],a,o,l,u;for(e==null&&(e=sxt);i=s.pop();)if(r&&(i.value=+i.data.value),(o=e(i.data))&&(u=o.length))for(i.children=new Array(u),l=u-1;l>=0;--l)s.push(a=i.children[l]=new tv(o[l])),a.parent=i,a.depth=i.depth+1;return n.eachBefore(ppe)}function ixt(){return C9(this).eachBefore(axt)}function sxt(t){return t.children}function axt(t){t.data=t.data.data}function ppe(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function tv(t){this.data=t,this.depth=this.height=0,this.parent=null}tv.prototype=C9.prototype={constructor:tv,count:j1t,each:q1t,eachAfter:Y1t,eachBefore:X1t,sum:K1t,sort:Z1t,path:J1t,ancestors:ext,descendants:txt,leaves:nxt,links:rxt,copy:ixt};var oxt=Array.prototype.slice;function lxt(t){for(var e=t.length,n,r;e;)r=Math.random()*e--|0,n=t[e],t[e]=t[r],t[r]=n;return t}function uxt(t){for(var e=0,n=(t=lxt(oxt.call(t))).length,r=[],i,s;e<n;)i=t[e],s&&mpe(s,i)?++e:(s=fxt(r=cxt(r,i)),e=0);return s}function cxt(t,e){var n,r;if(LR(e,t))return[e];for(n=0;n<t.length;++n)if(WC(e,t[n])&&LR(L1(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(WC(L1(t[n],t[r]),e)&&WC(L1(t[n],e),t[r])&&WC(L1(t[r],e),t[n])&&LR(gpe(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function WC(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function mpe(t,e){var n=t.r-e.r+1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function LR(t,e){for(var n=0;n<e.length;++n)if(!mpe(t,e[n]))return!1;return!0}function fxt(t){switch(t.length){case 1:return dxt(t[0]);case 2:return L1(t[0],t[1]);case 3:return gpe(t[0],t[1],t[2])}}function dxt(t){return{x:t.x,y:t.y,r:t.r}}function L1(t,e){var n=t.x,r=t.y,i=t.r,s=e.x,a=e.y,o=e.r,l=s-n,u=a-r,c=o-i,f=Math.sqrt(l*l+u*u);return{x:(n+s+l/f*c)/2,y:(r+a+u/f*c)/2,r:(f+i+o)/2}}function gpe(t,e,n){var r=t.x,i=t.y,s=t.r,a=e.x,o=e.y,l=e.r,u=n.x,c=n.y,f=n.r,d=r-a,h=r-u,p=i-o,m=i-c,g=l-s,v=f-s,y=r*r+i*i-s*s,b=y-a*a-o*o+l*l,x=y-u*u-c*c+f*f,w=h*p-d*m,S=(p*x-m*b)/(w*2)-r,C=(m*g-p*v)/w,_=(h*b-d*x)/(w*2)-i,E=(d*v-h*g)/w,T=C*C+E*E-1,k=2*(s+S*C+_*E),M=S*S+_*_-s*s,A=-(T?(k+Math.sqrt(k*k-4*T*M))/(2*T):M/k);return{x:r+S+C*A,y:i+_+E*A,r:A}}function nK(t,e,n){var r=t.x-e.x,i,s,a=t.y-e.y,o,l,u=r*r+a*a;u?(s=e.r+n.r,s*=s,l=t.r+n.r,l*=l,s>l?(i=(u+l-s)/(2*u),o=Math.sqrt(Math.max(0,l/u-i*i)),n.x=t.x-i*r-o*a,n.y=t.y-i*a+o*r):(i=(u+s-l)/(2*u),o=Math.sqrt(Math.max(0,s/u-i*i)),n.x=e.x+i*r-o*a,n.y=e.y+i*a+o*r)):(n.x=e.x+n.r,n.y=e.y)}function rK(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function iK(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,s=(e.y*n.r+n.y*e.r)/r;return i*i+s*s}function GC(t){this._=t,this.next=null,this.previous=null}function hxt(t){if(!(i=t.length))return 0;var e,n,r,i,s,a,o,l,u,c,f;if(e=t[0],e.x=0,e.y=0,!(i>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(i>2))return e.r+n.r;nK(n,e,r=t[2]),e=new GC(e),n=new GC(n),r=new GC(r),e.next=r.previous=n,n.next=e.previous=r,r.next=n.previous=e;e:for(o=3;o<i;++o){nK(e._,n._,r=t[o]),r=new GC(r),l=n.next,u=e.previous,c=n._.r,f=e._.r;do if(c<=f){if(rK(l._,r._)){n=l,e.next=n,n.previous=e,--o;continue e}c+=l._.r,l=l.next}else{if(rK(u._,r._)){e=u,e.next=n,n.previous=e,--o;continue e}f+=u._.r,u=u.previous}while(l!==u.next);for(r.previous=e,r.next=n,e.next=n.previous=n=r,s=iK(e);(r=r.next)!==n;)(a=iK(r))<s&&(e=r,s=a);n=e.next}for(e=[n._],r=n;(r=r.next)!==n;)e.push(r._);for(r=uxt(e),o=0;o<i;++o)e=t[o],e.x-=r.x,e.y-=r.y;return r.r}function pxt(t){return t==null?null:Lk(t)}function Lk(t){if(typeof t!="function")throw new Error;return t}function Uh(){return 0}function Tg(t){return function(){return t}}function mxt(t){return Math.sqrt(t.value)}function gxt(){var t=null,e=1,n=1,r=Uh;function i(s){return s.x=e/2,s.y=n/2,t?s.eachBefore(sK(t)).eachAfter(PR(r,.5)).eachBefore(aK(1)):s.eachBefore(sK(mxt)).eachAfter(PR(Uh,1)).eachAfter(PR(r,s.r/Math.min(e,n))).eachBefore(aK(Math.min(e,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(t=pxt(s),i):t},i.size=function(s){return arguments.length?(e=+s[0],n=+s[1],i):[e,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:Tg(+s),i):r},i}function sK(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function PR(t,e){return function(n){if(r=n.children){var r,i,s=r.length,a=t(n)*e||0,o;if(a)for(i=0;i<s;++i)r[i].r+=a;if(o=hxt(r),a)for(i=0;i<s;++i)r[i].r-=a;n.r=o+a}}}function aK(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function vpe(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function U2(t,e,n,r,i){for(var s=t.children,a,o=-1,l=s.length,u=t.value&&(r-e)/t.value;++o<l;)a=s[o],a.y0=n,a.y1=i,a.x0=e,a.x1=e+=a.value*u}function vxt(){var t=1,e=1,n=0,r=!1;function i(a){var o=a.height+1;return a.x0=a.y0=n,a.x1=t,a.y1=e/o,a.eachBefore(s(e,o)),r&&a.eachBefore(vpe),a}function s(a,o){return function(l){l.children&&U2(l,l.x0,a*(l.depth+1)/o,l.x1,a*(l.depth+2)/o);var u=l.x0,c=l.y0,f=l.x1-n,d=l.y1-n;f<u&&(u=f=(u+f)/2),d<c&&(c=d=(c+d)/2),l.x0=u,l.y0=c,l.x1=f,l.y1=d}}return i.round=function(a){return arguments.length?(r=!!a,i):r},i.size=function(a){return arguments.length?(t=+a[0],e=+a[1],i):[t,e]},i.padding=function(a){return arguments.length?(n=+a,i):n},i}var oK="$",yxt={depth:-1},lK={};function bxt(t){return t.id}function xxt(t){return t.parentId}function uK(){var t=bxt,e=xxt;function n(r){var i,s,a=r.length,o,l,u,c=new Array(a),f,d,h={};for(s=0;s<a;++s)i=r[s],u=c[s]=new tv(i),(f=t(i,s,r))!=null&&(f+="")&&(d=oK+(u.id=f),h[d]=d in h?lK:u);for(s=0;s<a;++s)if(u=c[s],f=e(r[s],s,r),f==null||!(f+="")){if(o)throw new Error("multiple roots");o=u}else{if(l=h[oK+f],!l)throw new Error("missing: "+f);if(l===lK)throw new Error("ambiguous: "+f);l.children?l.children.push(u):l.children=[u],u.parent=l}if(!o)throw new Error("no root");if(o.parent=yxt,o.eachBefore(function(p){p.depth=p.parent.depth+1,--a}).eachBefore(ppe),o.parent=null,a>0)throw new Error("cycle");return o}return n.id=function(r){return arguments.length?(t=Lk(r),n):t},n.parentId=function(r){return arguments.length?(e=Lk(r),n):e},n}function wxt(t,e){return t.parent===e.parent?1:2}function zR(t){var e=t.children;return e?e[0]:t.t}function BR(t){var e=t.children;return e?e[e.length-1]:t.t}function _xt(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Sxt(t){for(var e=0,n=0,r=t.children,i=r.length,s;--i>=0;)s=r[i],s.z+=e,s.m+=e,e+=s.s+(n+=s.c)}function Cxt(t,e,n){return t.a.parent===e.parent?t.a:n}function EE(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}EE.prototype=Object.create(tv.prototype);function Ext(t){for(var e=new EE(t,0),n,r=[e],i,s,a,o;n=r.pop();)if(s=n._.children)for(n.children=new Array(o=s.length),a=o-1;a>=0;--a)r.push(i=n.children[a]=new EE(s[a],a)),i.parent=n;return(e.parent=new EE(null,0)).children=[e],e}function Txt(){var t=wxt,e=1,n=1,r=null;function i(u){var c=Ext(u);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(a),r)u.eachBefore(l);else{var f=u,d=u,h=u;u.eachBefore(function(y){y.x<f.x&&(f=y),y.x>d.x&&(d=y),y.depth>h.depth&&(h=y)});var p=f===d?1:t(f,d)/2,m=p-f.x,g=e/(d.x+p+m),v=n/(h.depth||1);u.eachBefore(function(y){y.x=(y.x+m)*g,y.y=y.depth*v})}return u}function s(u){var c=u.children,f=u.parent.children,d=u.i?f[u.i-1]:null;if(c){Sxt(u);var h=(c[0].z+c[c.length-1].z)/2;d?(u.z=d.z+t(u._,d._),u.m=u.z-h):u.z=h}else d&&(u.z=d.z+t(u._,d._));u.parent.A=o(u,d,u.parent.A||f[0])}function a(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function o(u,c,f){if(c){for(var d=u,h=u,p=c,m=d.parent.children[0],g=d.m,v=h.m,y=p.m,b=m.m,x;p=BR(p),d=zR(d),p&&d;)m=zR(m),h=BR(h),h.a=u,x=p.z+y-d.z-g+t(p._,d._),x>0&&(_xt(Cxt(p,u,f),u,x),g+=x,v+=x),y+=p.m,g+=d.m,b+=m.m,v+=h.m;p&&!BR(h)&&(h.t=p,h.m+=y-v),d&&!zR(m)&&(m.t=d,m.m+=g-b,f=u)}return f}function l(u){u.x*=e,u.y=u.depth*n}return i.separation=function(u){return arguments.length?(t=u,i):t},i.size=function(u){return arguments.length?(r=!1,e=+u[0],n=+u[1],i):r?null:[e,n]},i.nodeSize=function(u){return arguments.length?(r=!0,e=+u[0],n=+u[1],i):r?[e,n]:null},i}function p$(t,e,n,r,i){for(var s=t.children,a,o=-1,l=s.length,u=t.value&&(i-n)/t.value;++o<l;)a=s[o],a.x0=e,a.x1=r,a.y0=n,a.y1=n+=a.value*u}var ype=(1+Math.sqrt(5))/2;function bpe(t,e,n,r,i,s){for(var a=[],o=e.children,l,u,c=0,f=0,d=o.length,h,p,m=e.value,g,v,y,b,x,w,S;c<d;){h=i-n,p=s-r;do g=o[f++].value;while(!g&&f<d);for(v=y=g,w=Math.max(p/h,h/p)/(m*t),S=g*g*w,x=Math.max(y/S,S/v);f<d;++f){if(g+=u=o[f].value,u<v&&(v=u),u>y&&(y=u),S=g*g*w,b=Math.max(y/S,S/v),b>x){g-=u;break}x=b}a.push(l={value:g,dice:h<p,children:o.slice(c,f)}),l.dice?U2(l,n,r,i,m?r+=p*g/m:s):p$(l,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return a}const xpe=function t(e){function n(r,i,s,a,o){bpe(e,r,i,s,a,o)}return n.ratio=function(r){return t((r=+r)>1?r:1)},n}(ype);function kxt(){var t=xpe,e=!1,n=1,r=1,i=[0],s=Uh,a=Uh,o=Uh,l=Uh,u=Uh;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],e&&d.eachBefore(vpe),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,v=d.y1-h;g<p&&(p=g=(p+g)/2),v<m&&(m=v=(m+v)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=v,d.children&&(h=i[d.depth+1]=s(d)/2,p+=u(d)-h,m+=a(d)-h,g-=o(d)-h,v-=l(d)-h,g<p&&(p=g=(p+g)/2),v<m&&(m=v=(m+v)/2),t(d,p,m,g,v))}return c.round=function(d){return arguments.length?(e=!!d,c):e},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(t=Lk(d),c):t},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:Tg(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(a=typeof d=="function"?d:Tg(+d),c):a},c.paddingRight=function(d){return arguments.length?(o=typeof d=="function"?d:Tg(+d),c):o},c.paddingBottom=function(d){return arguments.length?(l=typeof d=="function"?d:Tg(+d),c):l},c.paddingLeft=function(d){return arguments.length?(u=typeof d=="function"?d:Tg(+d),c):u},c}function Axt(t,e,n,r,i){var s=t.children,a,o=s.length,l,u=new Array(o+1);for(u[0]=l=a=0;a<o;++a)u[a+1]=l+=s[a].value;c(0,o,t.value,e,n,r,i);function c(f,d,h,p,m,g,v){if(f>=d-1){var y=s[f];y.x0=p,y.y0=m,y.x1=g,y.y1=v;return}for(var b=u[f],x=h/2+b,w=f+1,S=d-1;w<S;){var C=w+S>>>1;u[C]<x?w=C+1:S=C}x-u[w-1]<u[w]-x&&f+1<w&&--w;var _=u[w]-b,E=h-_;if(g-p>v-m){var T=(p*E+g*_)/h;c(f,w,_,p,m,T,v),c(w,d,E,T,m,g,v)}else{var k=(m*E+v*_)/h;c(f,w,_,p,m,g,k),c(w,d,E,p,k,g,v)}}}function Mxt(t,e,n,r,i){(t.depth&1?p$:U2)(t,e,n,r,i)}const Nxt=function t(e){function n(r,i,s,a,o){if((l=r._squarify)&&l.ratio===e)for(var l,u,c,f,d=-1,h,p=l.length,m=r.value;++d<p;){for(u=l[d],c=u.children,f=u.value=0,h=c.length;f<h;++f)u.value+=c[f].value;u.dice?U2(u,i,s,a,s+=(o-s)*u.value/m):p$(u,i,s,i+=(a-i)*u.value/m,o),m-=u.value}else r._squarify=l=bpe(e,r,i,s,a,o),l.ratio=e}return n.ratio=function(r){return t((r=+r)>1?r:1)},n}(ype);function E9(t){Ae.call(this,null,t)}E9.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};var $xt=tt(E9,Ae);function Ixt(t){return t.values}$xt.transform=function(t,e){e.source||Fe("Nest transform requires an upstream data source.");var n=t.generate,r=t.modified(),i=e.clone(),s=this.value;return(!s||r||e.changed())&&(s&&s.each(function(a){a.children&&aN(a.data)&&i.rem.push(a.data)}),this.value=s=C9({values:qt(t.keys).reduce(function(a,o){return a.key(o),a},Gdt()).entries(i.source)},Ixt),n&&s.each(function(a){a.children&&(a=Nr(a.data),i.add.push(a),i.source.push(a))}),bP(s,Nt,Nt)),i.source.root=s,i};function yf(t){Ae.call(this,null,t)}var Dxt=tt(yf,Ae);Dxt.transform=function(t,e){(!e.source||!e.source.root)&&Fe(this.constructor.name+" transform requires a backing tree data source.");var n=this.layout(t.method),r=this.fields,i=e.source.root,s=t.as||r;t.field&&i.sum(t.field),t.sort&&i.sort(t.sort),Rxt(n,this.params,t),n.separation&&n.separation(t.separation!==!1?Fxt:nN);try{this.value=n(i)}catch(a){Fe(a)}return i.each(function(a){Oxt(a,r,s)}),e.reflow(t.modified()).modifies(s).modifies("leaf")};function Rxt(t,e,n){for(var r,i=0,s=e.length;i<s;++i)r=e[i],r in n&&t[r](n[r])}function Oxt(t,e,n){for(var r=t.data,i=0,s=e.length-1;i<s;++i)r[n[i]]=t[e[i]];r[n[s]]=t.children?t.children.length:0}function Fxt(t,e){return t.parent===e.parent?1:2}var xP=["x","y","r","depth","children"];function T9(t){yf.call(this,t)}T9.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:xP.length,default:xP}]};var k9=tt(T9,yf);k9.layout=gxt;k9.params=["size","padding"];k9.fields=xP;var wP=["x0","y0","x1","y1","depth","children"];function A9(t){yf.call(this,t)}A9.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:wP.length,default:wP}]};var M9=tt(A9,yf);M9.layout=vxt;M9.params=["size","round","padding"];M9.fields=wP;function N9(t){Ae.call(this,null,t)}N9.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};var Lxt=tt(N9,Ae);Lxt.transform=function(t,e){e.source||Fe("Stratify transform requires an upstream data source.");var n=this.value,r=t.modified(),i=e.fork(e.ALL).materialize(e.SOURCE),s=!this.value||r||e.changed(e.ADD_REM)||e.modified(t.key.fields)||e.modified(t.parentKey.fields);return i.source=i.source.slice(),s&&(i.source.length?n=bP(uK().id(t.key).parentId(t.parentKey)(i.source),t.key,jd):n=bP(uK()([{}]),t.key,t.key)),i.source.root=this.value=n,i};var cK={tidy:Txt,cluster:G1t},_P=["x","y","depth","children"];function $9(t){yf.call(this,t)}$9.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:_P.length,default:_P}]};var I9=tt($9,yf);I9.layout=function(t){var e=t||"tidy";if(cK.hasOwnProperty(e))return cK[e]();Fe("Unrecognized Tree layout method: "+e)};I9.params=["size","nodeSize"];I9.fields=_P;function D9(t){Ae.call(this,[],t)}D9.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};var Pxt=tt(D9,Ae);Pxt.transform=function(t,e){var n=this.value,r=e.source&&e.source.root,i=e.fork(e.NO_SOURCE),s={};return r||Fe("TreeLinks transform requires a tree data source."),e.changed(e.ADD_REM)?(i.rem=n,e.visit(e.SOURCE,function(a){s[Nt(a)]=1}),r.each(function(a){var o=a.data,l=a.parent&&a.parent.data;l&&s[Nt(o)]&&s[Nt(l)]&&i.add.push(Nr({source:l,target:o}))}),this.value=i.add):e.changed(e.MOD)&&(e.visit(e.MOD,function(a){s[Nt(a)]=1}),n.forEach(function(a){(s[Nt(a.source)]||s[Nt(a.target)])&&i.mod.push(a)})),i};var fK={binary:Axt,dice:U2,slice:p$,slicedice:Mxt,squarify:xpe,resquarify:Nxt},SP=["x0","y0","x1","y1","depth","children"];function R9(t){yf.call(this,t)}R9.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:SP.length,default:SP}]};var O9=tt(R9,yf);O9.layout=function(){var t=kxt();return t.ratio=function(e){var n=t.tile();n.ratio&&t.tile(n.ratio(e))},t.method=function(e){fK.hasOwnProperty(e)?t.tile(fK[e]):Fe("Unrecognized Treemap layout method: "+e)},t};O9.params=["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"];O9.fields=SP;const zxt=Object.freeze(Object.defineProperty({__proto__:null,nest:E9,pack:T9,partition:A9,stratify:N9,tree:$9,treelinks:D9,treemap:R9},Symbol.toStringTag,{value:"Module"}));function dK(t){return function(){return t}}function Bxt(t){return t[0]}function Uxt(t){return t[1]}function Pk(){this._=null}function m$(t){t.U=t.C=t.L=t.R=t.P=t.N=null}Pk.prototype={constructor:Pk,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=hK(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(e1(this,n),t=n,n=t.U),n.C=!1,r.C=!0,t1(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(t1(this,n),t=n,n=t.U),n.C=!1,r.C=!0,e1(this,r))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e=t.U,n,r=t.L,i=t.R,s,a;if(r?i?s=hK(i):s=r:s=i,e?e.L===t?e.L=s:e.R=s:this._=s,r&&i?(a=s.C,s.C=t.C,s.L=r,r.U=s,s!==i?(e=s.U,s.U=t.U,t=s.R,e.L=t,s.R=i,i.U=s):(s.U=e,e=s,t=s.R)):(a=t.C,t=s),t&&(t.U=e),!a){if(t&&t.C){t.C=!1;return}do{if(t===this._)break;if(t===e.L){if(n=e.R,n.C&&(n.C=!1,e.C=!0,e1(this,e),n=e.R),n.L&&n.L.C||n.R&&n.R.C){(!n.R||!n.R.C)&&(n.L.C=!1,n.C=!0,t1(this,n),n=e.R),n.C=e.C,e.C=n.R.C=!1,e1(this,e),t=this._;break}}else if(n=e.L,n.C&&(n.C=!1,e.C=!0,t1(this,e),n=e.L),n.L&&n.L.C||n.R&&n.R.C){(!n.L||!n.L.C)&&(n.R.C=!1,n.C=!0,e1(this,n),n=e.L),n.C=e.C,e.C=n.L.C=!1,t1(this,e),t=this._;break}n.C=!0,t=e,e=e.U}while(!t.C);t&&(t.C=!1)}}};function e1(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function t1(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function hK(t){for(;t.L;)t=t.L;return t}function P1(t,e,n,r){var i=[null,null],s=os.push(i)-1;return i.left=t,i.right=e,n&&zk(i,t,e,n),r&&zk(i,e,t,r),Xa[t.index].halfedges.push(s),Xa[e.index].halfedges.push(s),i}function n1(t,e,n){var r=[e,n];return r.left=t,r}function zk(t,e,n,r){!t[0]&&!t[1]?(t[0]=r,t.left=e,t.right=n):t.left===n?t[1]=r:t[0]=r}function Vxt(t,e,n,r,i){var s=t[0],a=t[1],o=s[0],l=s[1],u=a[0],c=a[1],f=0,d=1,h=u-o,p=c-l,m;if(m=e-o,!(!h&&m>0)){if(m/=h,h<0){if(m<f)return;m<d&&(d=m)}else if(h>0){if(m>d)return;m>f&&(f=m)}if(m=r-o,!(!h&&m<0)){if(m/=h,h<0){if(m>d)return;m>f&&(f=m)}else if(h>0){if(m<f)return;m<d&&(d=m)}if(m=n-l,!(!p&&m>0)){if(m/=p,p<0){if(m<f)return;m<d&&(d=m)}else if(p>0){if(m>d)return;m>f&&(f=m)}if(m=i-l,!(!p&&m<0)){if(m/=p,p<0){if(m>d)return;m>f&&(f=m)}else if(p>0){if(m<f)return;m<d&&(d=m)}return!(f>0)&&!(d<1)||(f>0&&(t[0]=[o+f*h,l+f*p]),d<1&&(t[1]=[o+d*h,l+d*p])),!0}}}}}function Wxt(t,e,n,r,i){var s=t[1];if(s)return!0;var a=t[0],o=t.left,l=t.right,u=o[0],c=o[1],f=l[0],d=l[1],h=(u+f)/2,p=(c+d)/2,m,g;if(d===c){if(h<e||h>=r)return;if(u>f){if(!a)a=[h,n];else if(a[1]>=i)return;s=[h,i]}else{if(!a)a=[h,i];else if(a[1]<n)return;s=[h,n]}}else if(m=(u-f)/(d-c),g=p-m*h,m<-1||m>1)if(u>f){if(!a)a=[(n-g)/m,n];else if(a[1]>=i)return;s=[(i-g)/m,i]}else{if(!a)a=[(i-g)/m,i];else if(a[1]<n)return;s=[(n-g)/m,n]}else if(c<d){if(!a)a=[e,m*e+g];else if(a[0]>=r)return;s=[r,m*r+g]}else{if(!a)a=[r,m*r+g];else if(a[0]<e)return;s=[e,m*e+g]}return t[0]=a,t[1]=s,!0}function Gxt(t,e,n,r){for(var i=os.length,s;i--;)(!Wxt(s=os[i],t,e,n,r)||!Vxt(s,t,e,n,r)||!(Math.abs(s[0][0]-s[1][0])>Un||Math.abs(s[0][1]-s[1][1])>Un))&&delete os[i]}function Hxt(t){return Xa[t.index]={site:t,halfedges:[]}}function jxt(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function wpe(t,e){return e[+(e.left!==t.site)]}function qxt(t,e){return e[+(e.left===t.site)]}function Xxt(){for(var t=0,e=Xa.length,n,r,i,s;t<e;++t)if((n=Xa[t])&&(s=(r=n.halfedges).length)){var a=new Array(s),o=new Array(s);for(i=0;i<s;++i)a[i]=i,o[i]=jxt(n,os[r[i]]);for(a.sort(function(l,u){return o[u]-o[l]}),i=0;i<s;++i)o[i]=r[a[i]];for(i=0;i<s;++i)r[i]=o[i]}}function Yxt(t,e,n,r){var i=Xa.length,s,a,o,l,u,c,f,d,h,p,m,g,v=!0;for(s=0;s<i;++s)if(a=Xa[s]){for(o=a.site,u=a.halfedges,l=u.length;l--;)os[u[l]]||u.splice(l,1);for(l=0,c=u.length;l<c;)p=qxt(a,os[u[l]]),m=p[0],g=p[1],f=wpe(a,os[u[++l%c]]),d=f[0],h=f[1],(Math.abs(m-d)>Un||Math.abs(g-h)>Un)&&(u.splice(l,0,os.push(n1(o,p,Math.abs(m-t)<Un&&r-g>Un?[t,Math.abs(d-t)<Un?h:r]:Math.abs(g-r)<Un&&n-m>Un?[Math.abs(h-r)<Un?d:n,r]:Math.abs(m-n)<Un&&g-e>Un?[n,Math.abs(d-n)<Un?h:e]:Math.abs(g-e)<Un&&m-t>Un?[Math.abs(h-e)<Un?d:t,e]:null))-1),++c);c&&(v=!1)}if(v){var y,b,x,w=1/0;for(s=0,v=null;s<i;++s)(a=Xa[s])&&(o=a.site,y=o[0]-t,b=o[1]-e,x=y*y+b*b,x<w&&(w=x,v=a));if(v){var S=[t,e],C=[t,r],_=[n,r],E=[n,e];v.halfedges.push(os.push(n1(o=v.site,S,C))-1,os.push(n1(o,C,_))-1,os.push(n1(o,_,E))-1,os.push(n1(o,E,S))-1)}}for(s=0;s<i;++s)(a=Xa[s])&&(a.halfedges.length||delete Xa[s])}var _pe=[],F9;function Kxt(){m$(this),this.x=this.y=this.arc=this.site=this.cy=null}function Rg(t){var e=t.P,n=t.N;if(!(!e||!n)){var r=e.site,i=t.site,s=n.site;if(r!==s){var a=i[0],o=i[1],l=r[0]-a,u=r[1]-o,c=s[0]-a,f=s[1]-o,d=2*(l*f-u*c);if(!(d>=-twt)){var h=l*l+u*u,p=c*c+f*f,m=(f*h-u*p)/d,g=(l*p-c*h)/d,v=_pe.pop()||new Kxt;v.arc=t,v.site=i,v.x=m+a,v.y=(v.cy=g+o)+Math.sqrt(m*m+g*g),t.circle=v;for(var y=null,b=cw._;b;)if(v.y<b.y||v.y===b.y&&v.x<=b.x)if(b.L)b=b.L;else{y=b.P;break}else if(b.R)b=b.R;else{y=b;break}cw.insert(y,v),y||(F9=v)}}}}function t0(t){var e=t.circle;e&&(e.P||(F9=e.N),cw.remove(e),_pe.push(e),m$(e),t.circle=null)}var Spe=[];function Zxt(){m$(this),this.edge=this.site=this.circle=null}function pK(t){var e=Spe.pop()||new Zxt;return e.site=t,e}function UR(t){t0(t),n0.remove(t),Spe.push(t),m$(t)}function Jxt(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],s=t.P,a=t.N,o=[t];UR(t);for(var l=s;l.circle&&Math.abs(n-l.circle.x)<Un&&Math.abs(r-l.circle.cy)<Un;)s=l.P,o.unshift(l),UR(l),l=s;o.unshift(l),t0(l);for(var u=a;u.circle&&Math.abs(n-u.circle.x)<Un&&Math.abs(r-u.circle.cy)<Un;)a=u.N,o.push(u),UR(u),u=a;o.push(u),t0(u);var c=o.length,f;for(f=1;f<c;++f)u=o[f],l=o[f-1],zk(u.edge,l.site,u.site,i);l=o[0],u=o[c-1],u.edge=P1(l.site,u.site,null,i),Rg(l),Rg(u)}function Qxt(t){for(var e=t[0],n=t[1],r,i,s,a,o=n0._;o;)if(s=Cpe(o,n)-e,s>Un)o=o.L;else if(a=e-ewt(o,n),a>Un){if(!o.R){r=o;break}o=o.R}else{s>-Un?(r=o.P,i=o):a>-Un?(r=o,i=o.N):r=i=o;break}Hxt(t);var l=pK(t);if(n0.insert(r,l),!(!r&&!i)){if(r===i){t0(r),i=pK(r.site),n0.insert(l,i),l.edge=i.edge=P1(r.site,l.site),Rg(r),Rg(i);return}if(!i){l.edge=P1(r.site,l.site);return}t0(r),t0(i);var u=r.site,c=u[0],f=u[1],d=t[0]-c,h=t[1]-f,p=i.site,m=p[0]-c,g=p[1]-f,v=2*(d*g-h*m),y=d*d+h*h,b=m*m+g*g,x=[(g*y-h*b)/v+c,(d*b-m*y)/v+f];zk(i.edge,u,p,x),l.edge=P1(u,t,null,x),i.edge=P1(t,p,null,x),Rg(r),Rg(i)}}function Cpe(t,e){var n=t.site,r=n[0],i=n[1],s=i-e;if(!s)return r;var a=t.P;if(!a)return-1/0;n=a.site;var o=n[0],l=n[1],u=l-e;if(!u)return o;var c=o-r,f=1/s-1/u,d=c/u;return f?(-d+Math.sqrt(d*d-2*f*(c*c/(-2*u)-l+u/2+i-s/2)))/f+r:(r+o)/2}function ewt(t,e){var n=t.N;if(n)return Cpe(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var Un=1e-6,twt=1e-12,n0,Xa,cw,os;function nwt(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function rwt(t,e){return e[1]-t[1]||e[0]-t[0]}function CP(t,e){var n=t.sort(rwt).pop(),r,i,s;for(os=[],Xa=new Array(t.length),n0=new Pk,cw=new Pk;;)if(s=F9,n&&(!s||n[1]<s.y||n[1]===s.y&&n[0]<s.x))(n[0]!==r||n[1]!==i)&&(Qxt(n),r=n[0],i=n[1]),n=t.pop();else if(s)Jxt(s.arc);else break;if(Xxt(),e){var a=+e[0][0],o=+e[0][1],l=+e[1][0],u=+e[1][1];Gxt(a,o,l,u),Yxt(a,o,l,u)}this.edges=os,this.cells=Xa,n0=cw=os=Xa=null}CP.prototype={constructor:CP,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(r){return wpe(e,t[r])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,r){if(o=(s=n.halfedges).length)for(var i=n.site,s,a=-1,o,l,u=e[s[o-1]],c=u.left===i?u.right:u.left;++a<o;)l=c,u=e[s[a]],c=u.left===i?u.right:u.left,l&&c&&r<l.index&&r<c.index&&nwt(i,l,c)<0&&t.push([i.data,l.data,c.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var r=this,i,s=r._found||0,a=r.cells.length,o;!(o=r.cells[s]);)if(++s>=a)return null;var l=t-o.site[0],u=e-o.site[1],c=l*l+u*u;do o=r.cells[i=s],s=null,o.halfedges.forEach(function(f){var d=r.edges[f],h=d.left;if(!((h===o.site||!h)&&!(h=d.right))){var p=t-h[0],m=e-h[1],g=p*p+m*m;g<c&&(c=g,s=h.index)}});while(s!==null);return r._found=i,n==null||c<=n*n?o.site:null}};function iwt(){var t=Bxt,e=Uxt,n=null;function r(i){return new CP(i.map(function(s,a){var o=[Math.round(t(s,a,i)/Un)*Un,Math.round(e(s,a,i)/Un)*Un];return o.index=a,o.data=s,o}),n)}return r.polygons=function(i){return r(i).polygons()},r.links=function(i){return r(i).links()},r.triangles=function(i){return r(i).triangles()},r.x=function(i){return arguments.length?(t=typeof i=="function"?i:dK(+i),r):t},r.y=function(i){return arguments.length?(e=typeof i=="function"?i:dK(+i),r):e},r.extent=function(i){return arguments.length?(n=i==null?null:[[+i[0][0],+i[0][1]],[+i[1][0],+i[1][1]]],r):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},r.size=function(i){return arguments.length?(n=i==null?null:[[0,0],[+i[0],+i[1]]],r):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},r}function L9(t){Ae.call(this,null,t)}L9.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};var swt=tt(L9,Ae),awt=[[-1e5,-1e5],[1e5,1e5]];swt.transform=function(t,e){var n=t.as||"path",r=e.source,i,s,a,o;for(i=iwt().x(t.x).y(t.y),t.size?i.size(t.size):i.extent(t.extent||awt),this.value=i=i(r),s=i.polygons(),a=0,o=r.length;a<o;++a)r[a][n]=s[a]?"M"+s[a].join("L")+"Z":null;return e.reflow(t.modified()).modifies(n)};const owt=Object.freeze(Object.defineProperty({__proto__:null,voronoi:L9},Symbol.toStringTag,{value:"Module"}));var VR=Math.PI/180,z1=1<<11>>5,TE=1<<11;function lwt(){var t=[256,256],e,n,r,i,s,a,o,l=Epe,u=[],c=Math.random,f={};f.layout=function(){for(var p=d(A8()),m=pwt((t[0]>>5)*t[1]),g=null,v=u.length,y=-1,b=[],x=u.map(function(S){return{text:e(S),font:n(S),style:i(S),weight:s(S),rotate:a(S),size:~~r(S),padding:o(S),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:S}}).sort(function(S,C){return C.size-S.size});++y<v;){var w=x[y];w.x=t[0]*(c()+.5)>>1,w.y=t[1]*(c()+.5)>>1,uwt(p,w,x,y),w.hasText&&h(m,w,g)&&(b.push(w),g?fwt(g,w):g=[{x:w.x+w.x0,y:w.y+w.y0},{x:w.x+w.x1,y:w.y+w.y1}],w.x-=t[0]>>1,w.y-=t[1]>>1)}return b};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(z1<<5)/m,p.height=TE/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var v=m.x,y=m.y,b=Math.sqrt(t[0]*t[0]+t[1]*t[1]),x=l(t),w=c()<.5?1:-1,S=-w,C,_,E;(C=x(S+=w))&&(_=~~C[0],E=~~C[1],!(Math.min(Math.abs(_),Math.abs(E))>=b));)if(m.x=v+_,m.y=y+E,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>t[0]||m.y+m.y1>t[1])&&(!g||!cwt(m,p,t[0]))&&(!g||dwt(m,g))){for(var T=m.sprite,k=m.width>>5,M=t[0]>>5,A=m.x-(k<<4),N=A&127,$=32-N,D=m.y1-m.y0,P=(m.y+m.y0)*M+(A>>5),O,B=0;B<D;B++){O=0;for(var H=0;H<=k;H++)p[P+H]|=O<<$|(H<k?(O=T[B*k+H])>>>N:0);P+=M}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(u=p,f):u},f.size=function(p){return arguments.length?(t=[+p[0],+p[1]],f):t},f.font=function(p){return arguments.length?(n=vh(p),f):n},f.fontStyle=function(p){return arguments.length?(i=vh(p),f):i},f.fontWeight=function(p){return arguments.length?(s=vh(p),f):s},f.rotate=function(p){return arguments.length?(a=vh(p),f):a},f.text=function(p){return arguments.length?(e=vh(p),f):e},f.spiral=function(p){return arguments.length?(l=mwt[p]||p,f):l},f.fontSize=function(p){return arguments.length?(r=vh(p),f):r},f.padding=function(p){return arguments.length?(o=vh(p),f):o},f.random=function(p){return arguments.length?(c=p,f):c},f}function uwt(t,e,n,r){if(!e.sprite){var i=t.context,s=t.ratio;i.clearRect(0,0,(z1<<5)/s,TE/s);var a=0,o=0,l=0,u=n.length,c,f,d,h,p;for(--r;++r<u;){if(e=n[r],i.save(),i.font=e.style+" "+e.weight+" "+~~((e.size+1)/s)+"px "+e.font,c=i.measureText(e.text+"m").width*s,d=e.size<<1,e.rotate){var m=Math.sin(e.rotate*VR),g=Math.cos(e.rotate*VR),v=c*g,y=c*m,b=d*g,x=d*m;c=Math.max(Math.abs(v+x),Math.abs(v-x))+31>>5<<5,d=~~Math.max(Math.abs(y+b),Math.abs(y-b))}else c=c+31>>5<<5;if(d>l&&(l=d),a+c>=z1<<5&&(a=0,o+=l,l=0),o+d>=TE)break;i.translate((a+(c>>1))/s,(o+(d>>1))/s),e.rotate&&i.rotate(e.rotate*VR),i.fillText(e.text,0,0),e.padding&&(i.lineWidth=2*e.padding,i.strokeText(e.text,0,0)),i.restore(),e.width=c,e.height=d,e.xoff=a,e.yoff=o,e.x1=c>>1,e.y1=d>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,a+=c}for(var w=i.getImageData(0,0,(z1<<5)/s,TE/s).data,S=[];--r>=0;)if(e=n[r],!!e.hasText){for(c=e.width,f=c>>5,d=e.y1-e.y0,h=0;h<d*f;h++)S[h]=0;if(a=e.xoff,a==null)return;o=e.yoff;var C=0,_=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var E=f*p+(h>>5),T=w[(o+p)*(z1<<5)+(a+h)<<2]?1<<31-h%32:0;S[E]|=T,C|=T}C?_=p:(e.y0++,d--,p--,o++)}e.y1=e.y0+_,e.sprite=S.slice(0,(e.y1-e.y0)*f)}}}function cwt(t,e,n){n>>=5;for(var r=t.sprite,i=t.width>>5,s=t.x-(i<<4),a=s&127,o=32-a,l=t.y1-t.y0,u=(t.y+t.y0)*n+(s>>5),c,f=0;f<l;f++){c=0;for(var d=0;d<=i;d++)if((c<<o|(d<i?(c=r[f*i+d])>>>a:0))&e[u+d])return!0;u+=n}return!1}function fwt(t,e){var n=t[0],r=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function dwt(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function Epe(t){var e=t[0]/t[1];return function(n){return[e*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function hwt(t){var e=4,n=e*t[0]/t[1],r=0,i=0;return function(s){var a=s<0?-1:1;switch(Math.sqrt(1+4*a*s)-a&3){case 0:r+=n;break;case 1:i+=e;break;case 2:r-=n;break;default:i-=e;break}return[r,i]}}function pwt(t){for(var e=[],n=-1;++n<t;)e[n]=0;return e}function vh(t){return typeof t=="function"?t:function(){return t}}var mwt={archimedean:Epe,rectangular:hwt},Tpe=["x","y","font","fontSize","fontStyle","fontWeight","angle"],gwt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function P9(t){Ae.call(this,lwt(),t)}P9.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:Tpe}]};var vwt=tt(P9,Ae);vwt.transform=function(t,e){function n(b){var x=t[b];return bn(x)&&e.modified(x.fields)}var r=t.modified();if(r||e.changed(e.ADD_REM)||gwt.some(n)){var i=e.materialize(e.SOURCE).source,s=this.value,a=t.as||Tpe,o=t.fontSize||14,l;if(bn(o)?l=t.fontSizeRange:o=Pu(o),l){var u=o,c=qN("sqrt")().domain(ywt(u,i)).range(l);o=function(b){return c(u(b))}}i.forEach(function(b){b[a[0]]=NaN,b[a[1]]=NaN,b[a[3]]=0});for(var f=s.words(i).text(t.text).size(t.size||[500,500]).padding(t.padding||1).spiral(t.spiral||"archimedean").rotate(t.rotate||0).font(t.font||"sans-serif").fontStyle(t.fontStyle||"normal").fontWeight(t.fontWeight||"normal").fontSize(o).random(nl).layout(),d=s.size(),h=d[0]>>1,p=d[1]>>1,m=0,g=f.length,v,y;m<g;++m)v=f[m],y=v.datum,y[a[0]]=v.x+h,y[a[1]]=v.y+p,y[a[2]]=v.font,y[a[3]]=v.size,y[a[4]]=v.style,y[a[5]]=v.weight,y[a[6]]=v.rotate;return e.reflow(r).modifies(a)}};function ywt(t,e){for(var n=1/0,r=-1/0,i=0,s=e.length,a;i<s;++i)a=t(e[i]),a<n&&(n=a),a>r&&(r=a);return[n,r]}const bwt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:P9},Symbol.toStringTag,{value:"Module"}));function xwt(t){return new Uint8Array(t)}function wwt(t){return new Uint16Array(t)}function ax(t){return new Uint32Array(t)}function _wt(){var t=8,e=[],n=ax(0),r=HC(0,t),i=HC(0,t);return{data:function(){return e},seen:function(){return n=Swt(n,e.length)},add:function(s){for(var a=0,o=e.length,l=s.length,u;a<l;++a)u=s[a],u._index=o++,e.push(u)},remove:function(s,a){var o=e.length,l=Array(o-s),u=e,c,f,d;for(f=0;!a[f]&&f<o;++f)l[f]=e[f],u[f]=f;for(d=f;f<o;++f)c=e[f],a[f]?u[f]=-1:(u[f]=d,r[d]=r[f],i[d]=i[f],l[d]=c,c._index=d++),r[f]=0;return e=l,u},size:function(){return e.length},curr:function(){return r},prev:function(){return i},reset:function(s){i[s]=r[s]},all:function(){return t<257?255:t<65537?65535:4294967295},set:function(s,a){r[s]|=a},clear:function(s,a){r[s]&=~a},resize:function(s,a){var o=r.length;(s>o||a>t)&&(t=Math.max(a,t),r=HC(s,t,r),i=HC(s,t))}}}function Swt(t,e,n){return t.length>=e?t:(n=n||new t.constructor(e),n.set(t),n)}function HC(t,e,n){var r=(e<257?xwt:e<65537?wwt:ax)(t);return n&&r.set(n),r}function kpe(t,e,n){var r=1<<e;return{one:r,zero:~r,range:n.slice(),bisect:t.bisect,index:t.index,size:t.size,onAdd:function(i,s){var a=this,o=a.bisect(a.range,i.value),l=i.index,u=o[0],c=o[1],f=l.length,d;for(d=0;d<u;++d)s[l[d]]|=r;for(d=c;d<f;++d)s[l[d]]|=r;return a}}}function Ape(){var t=ax(0),e=[],n=0;function r(o,l,u){if(!l.length)return[];var c=n,f=l.length,d=Array(f),h=ax(f),p,m,g;for(g=0;g<f;++g)d[g]=o(l[g]),h[g]=g;if(d=Cwt(d,h),c)p=e,m=t,e=Array(c+f),t=ax(c+f),Ewt(u,p,m,c,d,h,f,e,t);else{if(u>0)for(g=0;g<f;++g)h[g]+=u;e=d,t=h}return n=c+f,{index:h,value:d}}function i(o,l){var u=n,c,f,d;for(f=0;!l[t[f]]&&f<u;++f);for(d=f;f<u;++f)l[c=t[f]]||(t[d]=c,e[d]=e[f],++d);n=u-o}function s(o){for(var l=0,u=n;l<u;++l)t[l]=o[t[l]]}function a(o,l){var u;return l?u=l.length:(l=e,u=n),[ylt(l,o[0],0,u),BT(l,o[1],0,u)]}return{insert:r,remove:i,bisect:a,reindex:s,index:function(){return t},size:function(){return n}}}function Cwt(t,e){return t.sort.call(e,function(n,r){var i=t[n],s=t[r];return i<s?-1:i>s?1:0}),xlt(t,e)}function Ewt(t,e,n,r,i,s,a,o,l){var u=0,c=0,f;for(f=0;u<r&&c<a;++f)e[u]<i[c]?(o[f]=e[u],l[f]=n[u++]):(o[f]=i[c],l[f]=s[c++]+t);for(;u<r;++u,++f)o[f]=e[u],l[f]=n[u];for(;c<a;++c,++f)o[f]=i[c],l[f]=s[c]+t}function z9(t){Ae.call(this,_wt(),t),this._indices=null,this._dims=null}z9.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};var Kl=tt(z9,Ae);Kl.transform=function(t,e){if(this._dims){var n=t.modified("fields")||t.fields.some(function(r){return e.modified(r.fields)});return n?this.reinit(t,e):this.eval(t,e)}else return this.init(t,e)};Kl.init=function(t,e){for(var n=t.fields,r=t.query,i=this._indices={},s=this._dims=[],a=r.length,o=0,l,u;o<a;++o)l=n[o].fname,u=i[l]||(i[l]=Ape()),s.push(kpe(u,o,r[o]));return this.eval(t,e)};Kl.reinit=function(t,e){var n=e.materialize().fork(),r=t.fields,i=t.query,s=this._indices,a=this._dims,o=this.value,l=o.curr(),u=o.prev(),c=o.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={},m,g,v,y,b,x,w,S,C;if(u.set(l),e.rem.length&&(b=this.remove(t,e,n)),e.add.length&&o.add(e.add),e.mod.length)for(x={},y=e.mod,w=0,S=y.length;w<S;++w)x[y[w]._index]=1;for(w=0;w<h;++w)C=r[w],(!a[w]||t.modified("fields",w)||e.modified(C.fields))&&(v=C.fname,(m=p[v])||(s[v]=g=Ape(),p[v]=m=g.insert(C,e.source,0)),a[w]=kpe(g,w,i[w]).onAdd(m,l));for(w=0,S=o.data().length;w<S;++w)b[w]||(u[w]!==l[w]?f.push(w):x[w]&&l[w]!==c&&d.push(w));return o.mask=(1<<h)-1,n};Kl.eval=function(t,e){var n=e.materialize().fork(),r=this._dims.length,i=0;return e.rem.length&&(this.remove(t,e,n),i|=(1<<r)-1),t.modified("query")&&!t.modified("fields")&&(i|=this.update(t,e,n)),e.add.length&&(this.insert(t,e,n),i|=(1<<r)-1),e.mod.length&&(this.modify(e,n),i|=(1<<r)-1),this.value.mask=i,n};Kl.insert=function(t,e,n){var r=e.add,i=this.value,s=this._dims,a=this._indices,o=t.fields,l={},u=n.add,c=i.size(),f=c+r.length,d=s.length,h,p,m;i.resize(f,d),i.add(r);var g=i.curr(),v=i.prev(),y=i.all();for(h=0;h<d;++h)p=o[h].fname,m=l[p]||(l[p]=a[p].insert(o[h],r,c)),s[h].onAdd(m,g);for(;c<f;++c)v[c]=y,g[c]!==y&&u.push(c)};Kl.modify=function(t,e){var n=e.mod,r=this.value,i=r.curr(),s=r.all(),a=t.mod,o,l,u;for(o=0,l=a.length;o<l;++o)u=a[o]._index,i[u]!==s&&n.push(u)};Kl.remove=function(t,e,n){var r=this._indices,i=this.value,s=i.curr(),a=i.prev(),o=i.all(),l={},u=n.rem,c=e.rem,f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,l[h]=1,a[h]=p=s[h],s[h]=o,p!==o&&u.push(h);for(h in r)r[h].remove(d,l);return this.reindex(e,d,l),l};Kl.reindex=function(t,e,n){var r=this._indices,i=this.value;t.runAfter(function(){var s=i.remove(e,n);for(var a in r)r[a].reindex(s)})};Kl.update=function(t,e,n){var r=this._dims,i=t.query,s=e.stamp,a=r.length,o=0,l,u;for(n.filters=0,u=0;u<a;++u)t.modified("query",u)&&(l=u,++o);if(o===1)o=r[l].one,this.incrementOne(r[l],i[l],n.add,n.rem);else for(u=0,o=0;u<a;++u)t.modified("query",u)&&(o|=r[u].one,this.incrementAll(r[u],i[u],s,n.add),n.rem=n.add);return o};Kl.incrementAll=function(t,e,n,r){var i=this.value,s=i.seen(),a=i.curr(),o=i.prev(),l=t.index(),u=t.bisect(t.range),c=t.bisect(e),f=c[0],d=c[1],h=u[0],p=u[1],m=t.one,g,v,y;if(f<h)for(g=f,v=Math.min(h,d);g<v;++g)y=l[g],s[y]!==n&&(o[y]=a[y],s[y]=n,r.push(y)),a[y]^=m;else if(f>h)for(g=h,v=Math.min(f,p);g<v;++g)y=l[g],s[y]!==n&&(o[y]=a[y],s[y]=n,r.push(y)),a[y]^=m;if(d>p)for(g=Math.max(f,p),v=d;g<v;++g)y=l[g],s[y]!==n&&(o[y]=a[y],s[y]=n,r.push(y)),a[y]^=m;else if(d<p)for(g=Math.max(h,d),v=p;g<v;++g)y=l[g],s[y]!==n&&(o[y]=a[y],s[y]=n,r.push(y)),a[y]^=m;t.range=e.slice()};Kl.incrementOne=function(t,e,n,r){var i=this.value,s=i.curr(),a=t.index(),o=t.bisect(t.range),l=t.bisect(e),u=l[0],c=l[1],f=o[0],d=o[1],h=t.one,p,m,g;if(u<f)for(p=u,m=Math.min(f,c);p<m;++p)g=a[p],s[g]^=h,n.push(g);else if(u>f)for(p=f,m=Math.min(u,d);p<m;++p)g=a[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(u,d),m=c;p<m;++p)g=a[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=a[p],s[g]^=h,r.push(g);t.range=e.slice()};function B9(t){Ae.call(this,null,t)}B9.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};var Twt=tt(B9,Ae);Twt.transform=function(t,e){var n=~(t.ignore||0),r=t.filter,i=r.mask;if(!(i&n))return e.StopPropagation;var s=e.fork(e.ALL),a=r.data(),o=r.curr(),l=r.prev(),u=function(c){return o[c]&n?null:a[c]};return s.filter(s.MOD,u),i&i-1?(s.filter(s.ADD,function(c){var f=o[c]&n,d=!f&&f^l[c]&n;return d?a[c]:null}),s.filter(s.REM,function(c){var f=o[c]&n,d=f&&!(f^(f^l[c]&n));return d?a[c]:null})):(s.filter(s.ADD,u),s.filter(s.REM,function(c){return(o[c]&n)===i?a[c]:null})),s.filter(s.SOURCE,function(c){return u(c._index)})};const kwt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:z9,resolvefilter:B9},Symbol.toStringTag,{value:"Module"})),Awt="4.4.0";var WR="default";function Mwt(t){var e=t._signals.cursor;e||(t._signals.cursor=e=t.add({user:WR,item:null})),t.on(t.events("view","mousemove"),e,function(n,r){var i=e.value,s=i?Bt(i)?i:i.user:WR,a=r.item&&r.item.cursor||null;return i&&s===i.user&&a==i.item?i:{user:s,item:a}}),t.add(null,function(n){var r=n.cursor,i=this.value;return Bt(r)||(i=r.item,r=r.user),Nwt(r&&r!==WR?r:i||r),i},{cursor:e})}function Nwt(t){typeof document<"u"&&document.body&&(document.body.style.cursor=t)}function g$(t,e){var n=t._runtime.data;return n.hasOwnProperty(e)||Fe("Unrecognized data set: "+e),n[e]}function $wt(t){return g$(this,t).values.value}function U9(t,e){Jae(e)||Fe("Second argument to changes must be a changeset.");var n=g$(this,t);return n.modified=!0,this.pulse(n.input,e)}function Iwt(t,e){return U9.call(this,t,Uy().insert(e))}function Dwt(t,e){return U9.call(this,t,Uy().remove(e))}function Mpe(t){var e=t.padding();return Math.max(0,t._viewWidth+e.left+e.right)}function Npe(t){var e=t.padding();return Math.max(0,t._viewHeight+e.top+e.bottom)}function v$(t){var e=t.padding(),n=t._origin;return[e.left+n[0],e.top+n[1]]}function Rwt(t){var e=v$(t),n=Mpe(t),r=Npe(t);t._renderer.background(t._background),t._renderer.resize(n,r,e),t._handler.origin(e),t._resizeListeners.forEach(function(i){try{i(n,r)}catch(s){t.error(s)}})}function Owt(t,e,n){var r=t._renderer.canvas(),i,s,a;return r&&(a=v$(t),s=e.changedTouches?e.changedTouches[0]:e,i=ON(s,r),i[0]-=a[0],i[1]-=a[1]),e.dataflow=t,e.vega=Fwt(t,n,i),e.item=n,e}function Fwt(t,e,n){var r=e?e.mark.marktype==="group"?e:e.mark.group:null;function i(a){var o=r,l;if(a){for(l=e;l;l=l.mark.group)if(l.mark.name===a){o=l;break}}return o&&o.mark&&o.mark.interactive?o:{}}function s(a){if(!a)return n;Bt(a)&&(a=i(a));for(var o=n.slice();a;)o[0]-=a.x||0,o[1]-=a.y||0,a=a.mark&&a.mark.group;return o}return{view:Pu(t),item:Pu(e||{}),group:i,xy:s,x:function(a){return s(a)[0]},y:function(a){return s(a)[1]}}}var mK="view",Lwt="timer",Pwt="window",zwt={trap:!1};function Bwt(t){t=On({},t);var e=t.defaults;return e&&(je(e.prevent)&&(e.prevent=dn(e.prevent)),je(e.allow)&&(e.allow=dn(e.allow))),t}function Uwt(t,e){var n=t._eventConfig.defaults,r=n&&n.prevent,i=n&&n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[e]:i?!i[e]:t.preventDefault()}function Vwt(t,e,n){var r=this,i=new uN(n),s=function(u,c){t===mK&&Uwt(r,e)&&u.preventDefault();try{i.receive(Owt(r,u,c))}catch(f){r.error(f)}finally{r.run()}},a;if(t===Lwt)r.timer(s,e);else if(t===mK)r.addEventListener(e,s,zwt);else if(t===Pwt?typeof window<"u"&&(a=[window]):typeof document<"u"&&(a=document.querySelectorAll(t)),!a)r.warn("Can not resolve event source: "+t);else{for(var o=0,l=a.length;o<l;++o)a[o].addEventListener(e,s);r._eventListeners.push({type:e,sources:a,handler:s})}return i}function gK(t){return t.item}function vK(t){var e=t.item.mark.source;return e.source||e}function yK(t){return function(e,n){return n.vega.view().changeset().encode(n.item,t)}}function Wwt(t,e){return t=[t||"hover"],e=[e||"update",t[0]],this.on(this.events("view","mouseover",gK),vK,yK(t)),this.on(this.events("view","mouseout",gK),vK,yK(e)),this}function Gwt(){var t=this._tooltip,e=this._timers,n=this._eventListeners,r,i,s;for(r=e.length;--r>=0;)e[r].stop();for(r=n.length;--r>=0;)for(s=n[r],i=s.sources.length;--i>=0;)s.sources[i].removeEventListener(s.type,s.handler);return t&&t.call(this,this._handler,null,null,null),this}function jo(t,e,n){var r=document.createElement(t);for(var i in e)r.setAttribute(i,e[i]);return n!=null&&(r.textContent=n),r}var Hwt="vega-bind",jwt="vega-bind-name",qwt="vega-bind-radio",Xwt="vega-option-";function Ywt(t,e,n){if(e){var r=n.param,i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:function(s){s!==t.signal(r.signal)&&(i.source=!0,t.signal(r.signal,s).run())}},r.debounce&&(i.update=MB(r.debounce,i.update))),Kwt(i,e,r,t.signal(r.signal)),i.active||(t.on(t._signals[r.signal],null,function(){i.source?i.source=!1:i.set(t.signal(r.signal))}),i.active=!0),i}}function Kwt(t,e,n,r){var i=jo("div",{class:Hwt});i.appendChild(jo("span",{class:jwt},n.name||n.signal)),e.appendChild(i);var s=Zwt;switch(n.input){case"checkbox":s=Jwt;break;case"select":s=Qwt;break;case"radio":s=e_t;break;case"range":s=t_t;break}s(t,i,n,r)}function Zwt(t,e,n,r){var i=jo("input");for(var s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,e.appendChild(i),i.addEventListener("input",function(){t.update(i.value)}),t.elements=[i],t.set=function(a){i.value=a}}function Jwt(t,e,n,r){var i={type:"checkbox",name:n.signal};r&&(i.checked=!0);var s=jo("input",i);e.appendChild(s),s.addEventListener("change",function(){t.update(s.checked)}),t.elements=[s],t.set=function(a){s.checked=!!a||null}}function Qwt(t,e,n,r){var i=jo("select",{name:n.signal});n.options.forEach(function(s){var a={value:s};Bk(s,r)&&(a.selected=!0),i.appendChild(jo("option",a,s+""))}),e.appendChild(i),i.addEventListener("change",function(){t.update(n.options[i.selectedIndex])}),t.elements=[i],t.set=function(s){for(var a=0,o=n.options.length;a<o;++a)if(Bk(n.options[a],s)){i.selectedIndex=a;return}}}function e_t(t,e,n,r){var i=jo("span",{class:qwt});e.appendChild(i),t.elements=n.options.map(function(s){var a=Xwt+n.signal+"-"+s,o={id:a,type:"radio",name:n.signal,value:s};Bk(s,r)&&(o.checked=!0);var l=jo("input",o);return l.addEventListener("change",function(){t.update(s)}),i.appendChild(l),i.appendChild(jo("label",{for:a},s+"")),l}),t.set=function(s){for(var a=t.elements,o=0,l=a.length;o<l;++o)Bk(a[o].value,s)&&(a[o].checked=!0)}}function t_t(t,e,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;var i=n.min||Math.min(0,+r)||0,s=n.max||Math.max(100,+r)||100,a=n.step||Clt(i,s,100),o=jo("input",{type:"range",name:n.signal,min:i,max:s,step:a});o.value=r;var l=jo("label",{},+r);e.appendChild(o),e.appendChild(l);function u(){l.textContent=o.value,t.update(+o.value)}o.addEventListener("input",u),o.addEventListener("change",u),t.elements=[o],t.set=function(c){o.value=c,l.textContent=c}}function Bk(t,e){return t===e||t+""==e+""}function $pe(t,e,n,r,i){return e=e||new r(t.loader()),e.initialize(n,Mpe(t),Npe(t),v$(t),i).background(t._background)}function V9(t,e){return e?function(){try{e.apply(this,arguments)}catch(n){t.error(n)}}:null}function n_t(t,e,n,r){var i=new r(t.loader(),V9(t,t.tooltip())).scene(t.scenegraph().root).initialize(n,v$(t),t);return e&&e.handlers().forEach(function(s){i.on(s.type,s.handler)}),i}function r_t(t,e){var n=this,r=n._renderType,i=LN(r),s,a;return t=n._el=t?GR(n,t):null,i||n.error("Unrecognized renderer type: "+r),s=i.handler||A2,a=t?i.renderer:i.headless,n._renderer=a?$pe(n,n._renderer,t,a):null,n._handler=n_t(n,n._handler,t,s),n._redraw=!0,t&&(e=e?GR(n,e):t.appendChild(jo("div",{class:"vega-bindings"})),n._bind.forEach(function(o){o.param.element&&(o.element=GR(n,o.param.element))}),n._bind.forEach(function(o){Ywt(n,o.element||e,o)})),n}function GR(t,e){if(typeof e=="string")if(typeof document<"u"){if(e=document.querySelector(e),!e)return t.error("Signal bind element not found: "+e),null}else return t.error("DOM document instance not found."),null;if(e)try{e.innerHTML=""}catch(n){e=null,t.error(n)}return e}function W9(t,e,n){var r=LN(e),i=r&&r.headless;return i?t.runAsync().then(function(){return $pe(t,null,null,i,n).renderAsync(t._scenegraph.root)}):Promise.reject("Unrecognized renderer type: "+e)}function i_t(t,e){return t!==ed.Canvas&&t!==ed.SVG&&t!==ed.PNG?Promise.reject("Unrecognized image type: "+t):W9(this,t,e).then(function(n){return t===ed.SVG?s_t(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")})}function s_t(t,e){var n=new Blob([t],{type:e});return window.URL.createObjectURL(n)}function a_t(t){return W9(this,ed.Canvas,t).then(function(e){return e.canvas()})}function o_t(t){return W9(this,ed.SVG,t).then(function(e){return e.svg()})}function l_t(t,e){return t=t||e.autosize,Gt(t)?t:(t=t||"pad",{type:t})}function u_t(t,e){return t=t||e.padding,Gt(t)?{top:r1(t.top),bottom:r1(t.bottom),left:r1(t.left),right:r1(t.right)}:c_t(r1(t))}function r1(t){return+t||0}function c_t(t){return{top:t,bottom:t,left:t,right:t}}var f_t="outer",d_t=["value","update","init","react","bind"];function bK(t,e){Fe(t+' for "outer" push: '+at(e))}function Ipe(t,e){var n=t.name;if(t.push===f_t)e.signals[n]||bK("No prior signal definition",n),d_t.forEach(function(i){t[i]!==void 0&&bK("Invalid property ",i)});else{var r=e.addSignal(n,t.value);t.react===!1&&(r.react=!1),t.bind&&e.addBinding(n,t.bind)}}const h_t="RawCode",p_t="Literal",m_t="Property",g_t="Identifier",v_t="ArrayExpression",y_t="BinaryExpression",b_t="CallExpression",x_t="ConditionalExpression",w_t="LogicalExpression",__t="MemberExpression",S_t="ObjectExpression",C_t="UnaryExpression";function Zl(t){this.type=t}Zl.prototype.visit=function(t){let e,n,r;if(t(this))return 1;for(e=E_t(this),n=0,r=e.length;n<r;++n)if(e[n].visit(t))return 1};function E_t(t){switch(t.type){case v_t:return t.elements;case y_t:case w_t:return[t.left,t.right];case b_t:return[t.callee].concat(t.arguments);case x_t:return[t.test,t.consequent,t.alternate];case __t:return[t.object,t.property];case S_t:return t.properties;case m_t:return[t.key,t.value];case C_t:return[t.argument];case g_t:case p_t:case h_t:default:return[]}}var ic,xt,_e,vs,zn,y$=1,V2=2,Vp=3,rh=4,b$=5,Cm=6,ra=7,W2=8,T_t=9;ic={};ic[y$]="Boolean";ic[V2]="<end>";ic[Vp]="Identifier";ic[rh]="Keyword";ic[b$]="Null";ic[Cm]="Numeric";ic[ra]="Punctuator";ic[W2]="String";ic[T_t]="RegularExpression";var k_t="ArrayExpression",A_t="BinaryExpression",M_t="CallExpression",N_t="ConditionalExpression",Dpe="Identifier",$_t="Literal",I_t="LogicalExpression",D_t="MemberExpression",R_t="ObjectExpression",O_t="Property",F_t="UnaryExpression",Yi="Unexpected token %0",L_t="Unexpected number",P_t="Unexpected string",z_t="Unexpected identifier",B_t="Unexpected reserved word",U_t="Unexpected end of input",EP="Invalid regular expression",HR="Invalid regular expression: missing /",Rpe="Octal literals are not allowed in strict mode.",V_t="Duplicate data property in object literal not allowed in strict mode",ds="ILLEGAL",fw="Disabled.",W_t=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),G_t=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function x$(t,e){if(!t)throw new Error("ASSERT: "+e)}function Tc(t){return t>=48&&t<=57}function G9(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function ox(t){return"01234567".indexOf(t)>=0}function H_t(t){return t===32||t===9||t===11||t===12||t===160||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function dw(t){return t===10||t===13||t===8232||t===8233}function G2(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t===92||t>=128&&W_t.test(String.fromCharCode(t))}function Uk(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||t===92||t>=128&&G_t.test(String.fromCharCode(t))}var j_t={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function Ope(){for(var t;_e<vs&&(t=xt.charCodeAt(_e),H_t(t)||dw(t));)++_e}function TP(t){var e,n,r,i=0;for(n=t==="u"?4:2,e=0;e<n;++e)_e<vs&&G9(xt[_e])?(r=xt[_e++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):Nn({},Yi,ds);return String.fromCharCode(i)}function q_t(){var t,e,n,r;for(t=xt[_e],e=0,t==="}"&&Nn({},Yi,ds);_e<vs&&(t=xt[_e++],!!G9(t));)e=e*16+"0123456789abcdef".indexOf(t.toLowerCase());return(e>1114111||t!=="}")&&Nn({},Yi,ds),e<=65535?String.fromCharCode(e):(n=(e-65536>>10)+55296,r=(e-65536&1023)+56320,String.fromCharCode(n,r))}function Fpe(){var t,e;for(t=xt.charCodeAt(_e++),e=String.fromCharCode(t),t===92&&(xt.charCodeAt(_e)!==117&&Nn({},Yi,ds),++_e,t=TP("u"),(!t||t==="\\"||!G2(t.charCodeAt(0)))&&Nn({},Yi,ds),e=t);_e<vs&&(t=xt.charCodeAt(_e),!!Uk(t));)++_e,e+=String.fromCharCode(t),t===92&&(e=e.substr(0,e.length-1),xt.charCodeAt(_e)!==117&&Nn({},Yi,ds),++_e,t=TP("u"),(!t||t==="\\"||!Uk(t.charCodeAt(0)))&&Nn({},Yi,ds),e+=t);return e}function X_t(){var t,e;for(t=_e++;_e<vs;){if(e=xt.charCodeAt(_e),e===92)return _e=t,Fpe();if(Uk(e))++_e;else break}return xt.slice(t,_e)}function Y_t(){var t,e,n;return t=_e,e=xt.charCodeAt(_e)===92?Fpe():X_t(),e.length===1?n=Vp:j_t.hasOwnProperty(e)?n=rh:e==="null"?n=b$:e==="true"||e==="false"?n=y$:n=Vp,{type:n,value:e,start:t,end:_e}}function jR(){var t=_e,e=xt.charCodeAt(_e),n,r=xt[_e],i,s,a;switch(e){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++_e,{type:ra,value:String.fromCharCode(e),start:t,end:_e};default:if(n=xt.charCodeAt(_e+1),n===61)switch(e){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return _e+=2,{type:ra,value:String.fromCharCode(e)+String.fromCharCode(n),start:t,end:_e};case 33:case 61:return _e+=2,xt.charCodeAt(_e)===61&&++_e,{type:ra,value:xt.slice(t,_e),start:t,end:_e}}}if(a=xt.substr(_e,4),a===">>>=")return _e+=4,{type:ra,value:a,start:t,end:_e};if(s=a.substr(0,3),s===">>>"||s==="<<="||s===">>=")return _e+=3,{type:ra,value:s,start:t,end:_e};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return _e+=2,{type:ra,value:i,start:t,end:_e};if("<>=!+-*%&|^/".indexOf(r)>=0)return++_e,{type:ra,value:r,start:t,end:_e};Nn({},Yi,ds)}function K_t(t){for(var e="";_e<vs&&G9(xt[_e]);)e+=xt[_e++];return e.length===0&&Nn({},Yi,ds),G2(xt.charCodeAt(_e))&&Nn({},Yi,ds),{type:Cm,value:parseInt("0x"+e,16),start:t,end:_e}}function Z_t(t){for(var e="0"+xt[_e++];_e<vs&&ox(xt[_e]);)e+=xt[_e++];return(G2(xt.charCodeAt(_e))||Tc(xt.charCodeAt(_e)))&&Nn({},Yi,ds),{type:Cm,value:parseInt(e,8),octal:!0,start:t,end:_e}}function xK(){var t,e,n;if(n=xt[_e],x$(Tc(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),e=_e,t="",n!=="."){if(t=xt[_e++],n=xt[_e],t==="0"){if(n==="x"||n==="X")return++_e,K_t(e);if(ox(n))return Z_t(e);n&&Tc(n.charCodeAt(0))&&Nn({},Yi,ds)}for(;Tc(xt.charCodeAt(_e));)t+=xt[_e++];n=xt[_e]}if(n==="."){for(t+=xt[_e++];Tc(xt.charCodeAt(_e));)t+=xt[_e++];n=xt[_e]}if(n==="e"||n==="E")if(t+=xt[_e++],n=xt[_e],(n==="+"||n==="-")&&(t+=xt[_e++]),Tc(xt.charCodeAt(_e)))for(;Tc(xt.charCodeAt(_e));)t+=xt[_e++];else Nn({},Yi,ds);return G2(xt.charCodeAt(_e))&&Nn({},Yi,ds),{type:Cm,value:parseFloat(t),start:e,end:_e}}function J_t(){var t="",e,n,r,i,s=!1;for(e=xt[_e],x$(e==="'"||e==='"',"String literal must starts with a quote"),n=_e,++_e;_e<vs;)if(r=xt[_e++],r===e){e="";break}else if(r==="\\")if(r=xt[_e++],!r||!dw(r.charCodeAt(0)))switch(r){case"u":case"x":xt[_e]==="{"?(++_e,t+=q_t()):t+=TP(r);break;case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:ox(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),_e<vs&&ox(xt[_e])&&(s=!0,i=i*8+"01234567".indexOf(xt[_e++]),"0123".indexOf(r)>=0&&_e<vs&&ox(xt[_e])&&(i=i*8+"01234567".indexOf(xt[_e++]))),t+=String.fromCharCode(i)):t+=r;break}else r==="\r"&&xt[_e]===`
`&&++_e;else{if(dw(r.charCodeAt(0)))break;t+=r}return e!==""&&Nn({},Yi,ds),{type:W2,value:t,octal:s,start:n,end:_e}}function Q_t(t,e){var n=t;e.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";Nn({},EP)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Nn({},EP)}try{return new RegExp(t,e)}catch{return null}}function e2t(){var t,e,n,r,i;for(t=xt[_e],x$(t==="/","Regular expression literal must start with a slash"),e=xt[_e++],n=!1,r=!1;_e<vs;)if(t=xt[_e++],e+=t,t==="\\")t=xt[_e++],dw(t.charCodeAt(0))&&Nn({},HR),e+=t;else if(dw(t.charCodeAt(0)))Nn({},HR);else if(n)t==="]"&&(n=!1);else if(t==="/"){r=!0;break}else t==="["&&(n=!0);return r||Nn({},HR),i=e.substr(1,e.length-2),{value:i,literal:e}}function t2t(){var t,e,n;for(e="",n="";_e<vs&&(t=xt[_e],!!Uk(t.charCodeAt(0)));)++_e,t==="\\"&&_e<vs?Nn({},Yi,ds):(n+=t,e+=t);return n.search(/[^gimuy]/g)>=0&&Nn({},EP,n),{value:n,literal:e}}function n2t(){var t,e,n,r;return zn=null,Ope(),t=_e,e=e2t(),n=t2t(),r=Q_t(e.value,n.value),{literal:e.literal+n.literal,value:r,regex:{pattern:e.value,flags:n.value},start:t,end:_e}}function r2t(t){return t.type===Vp||t.type===rh||t.type===y$||t.type===b$}function Lpe(){var t;return Ope(),_e>=vs?{type:V2,start:_e,end:_e}:(t=xt.charCodeAt(_e),G2(t)?Y_t():t===40||t===41||t===59?jR():t===39||t===34?J_t():t===46?Tc(xt.charCodeAt(_e+1))?xK():jR():Tc(t)?xK():jR())}function ca(){var t;return t=zn,_e=t.end,zn=Lpe(),_e=t.end,t}function Ppe(){var t;t=_e,zn=Lpe(),_e=t}function i2t(t){var e=new Zl(k_t);return e.elements=t,e}function wK(t,e,n){var r=new Zl(t==="||"||t==="&&"?I_t:A_t);return r.operator=t,r.left=e,r.right=n,r}function s2t(t,e){var n=new Zl(M_t);return n.callee=t,n.arguments=e,n}function a2t(t,e,n){var r=new Zl(N_t);return r.test=t,r.consequent=e,r.alternate=n,r}function H9(t){var e=new Zl(Dpe);return e.name=t,e}function B1(t){var e=new Zl($_t);return e.value=t.value,e.raw=xt.slice(t.start,t.end),t.regex&&(e.raw==="//"&&(e.raw="/(?:)/"),e.regex=t.regex),e}function _K(t,e,n){var r=new Zl(D_t);return r.computed=t==="[",r.object=e,r.property=n,r.computed||(n.member=!0),r}function o2t(t){var e=new Zl(R_t);return e.properties=t,e}function SK(t,e,n){var r=new Zl(O_t);return r.key=e,r.value=n,r.kind=t,r}function l2t(t,e){var n=new Zl(F_t);return n.operator=t,n.argument=e,n.prefix=!0,n}function Nn(t,e){var n,r=Array.prototype.slice.call(arguments,2),i=e.replace(/%(\d)/g,(s,a)=>(x$(a<r.length,"Message reference must be in range"),r[a]));throw n=new Error(i),n.index=_e,n.description=i,n}function w$(t){t.type===V2&&Nn(t,U_t),t.type===Cm&&Nn(t,L_t),t.type===W2&&Nn(t,P_t),t.type===Vp&&Nn(t,z_t),t.type===rh&&Nn(t,B_t),Nn(t,Yi,t.value)}function ys(t){var e=ca();(e.type!==ra||e.value!==t)&&w$(e)}function ar(t){return zn.type===ra&&zn.value===t}function qR(t){return zn.type===rh&&zn.value===t}function u2t(){var t=[];for(_e=zn.start,ys("[");!ar("]");)ar(",")?(ca(),t.push(null)):(t.push(Wp()),ar("]")||ys(","));return ca(),i2t(t)}function CK(){var t;return _e=zn.start,t=ca(),t.type===W2||t.type===Cm?(t.octal&&Nn(t,Rpe),B1(t)):H9(t.value)}function c2t(){var t,e,n,r;if(_e=zn.start,t=zn,t.type===Vp)return n=CK(),ys(":"),r=Wp(),SK("init",n,r);if(t.type===V2||t.type===ra)w$(t);else return e=CK(),ys(":"),r=Wp(),SK("init",e,r)}function f2t(){var t=[],e,n,r,i={},s=String;for(_e=zn.start,ys("{");!ar("}");)e=c2t(),e.key.type===Dpe?n=e.key.name:n=s(e.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?Nn({},V_t):i[r]=!0,t.push(e),ar("}")||ys(",");return ys("}"),o2t(t)}function d2t(){var t;return ys("("),t=j9(),ys(")"),t}var h2t={if:1};function p2t(){var t,e,n;if(ar("("))return d2t();if(ar("["))return u2t();if(ar("{"))return f2t();if(t=zn.type,_e=zn.start,t===Vp||h2t[zn.value])n=H9(ca().value);else if(t===W2||t===Cm)zn.octal&&Nn(zn,Rpe),n=B1(ca());else{if(t===rh)throw new Error(fw);t===y$?(e=ca(),e.value=e.value==="true",n=B1(e)):t===b$?(e=ca(),e.value=null,n=B1(e)):ar("/")||ar("/=")?(n=B1(n2t()),Ppe()):w$(ca())}return n}function m2t(){var t=[];if(ys("("),!ar(")"))for(;_e<vs&&(t.push(Wp()),!ar(")"));)ys(",");return ys(")"),t}function g2t(){var t;return _e=zn.start,t=ca(),r2t(t)||w$(t),H9(t.value)}function v2t(){return ys("."),g2t()}function y2t(){var t;return ys("["),t=j9(),ys("]"),t}function b2t(){var t,e,n;for(t=p2t();;)if(ar("."))n=v2t(),t=_K(".",t,n);else if(ar("("))e=m2t(),t=s2t(t,e);else if(ar("["))n=y2t(),t=_K("[",t,n);else break;return t}function EK(){var t=b2t();if(zn.type===ra&&(ar("++")||ar("--")))throw new Error(fw);return t}function kE(){var t,e;if(zn.type!==ra&&zn.type!==rh)e=EK();else{if(ar("++")||ar("--"))throw new Error(fw);if(ar("+")||ar("-")||ar("~")||ar("!"))t=ca(),e=kE(),e=l2t(t.value,e);else{if(qR("delete")||qR("void")||qR("typeof"))throw new Error(fw);e=EK()}}return e}function TK(t){var e=0;if(t.type!==ra&&t.type!==rh)return 0;switch(t.value){case"||":e=1;break;case"&&":e=2;break;case"|":e=3;break;case"^":e=4;break;case"&":e=5;break;case"==":case"!=":case"===":case"!==":e=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":e=7;break;case"<<":case">>":case">>>":e=8;break;case"+":case"-":e=9;break;case"*":case"/":case"%":e=11;break}return e}function x2t(){var t,e,n,r,i,s,a,o,l,u;if(t=zn,l=kE(),r=zn,i=TK(r),i===0)return l;for(r.prec=i,ca(),e=[t,zn],a=kE(),s=[l,r,a];(i=TK(zn))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)a=s.pop(),o=s.pop().value,l=s.pop(),e.pop(),n=wK(o,l,a),s.push(n);r=ca(),r.prec=i,s.push(r),e.push(zn),n=kE(),s.push(n)}for(u=s.length-1,n=s[u],e.pop();u>1;)e.pop(),n=wK(s[u-1].value,s[u-2],n),u-=2;return n}function Wp(){var t,e,n;return t=x2t(),ar("?")&&(ca(),e=Wp(),ys(":"),n=Wp(),t=a2t(t,e,n)),t}function j9(){var t=Wp();if(ar(","))throw new Error(fw);return t}function zpe(t){xt=t,_e=0,vs=xt.length,zn=null,Ppe();var e=j9();if(zn.type!==V2)throw new Error("Unexpect token after expression.");return e}const Bpe={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function Upe(t){function e(a,o,l,u){let c=t(o[0]);return l&&(c=l+"("+c+")",l.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+a+(u<0?"":u===0?"()":"("+o.slice(1).map(t).join(",")+")")}function n(a,o,l){return u=>e(a,u,o,l)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(a){a.length<3&&Fe("Missing arguments to clamp function."),a.length>3&&Fe("Too many arguments to clamp function.");const o=a.map(t);return"Math.max("+o[1]+", Math.min("+o[2]+","+o[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),join:n("join",null),indexof:n("indexOf",null),lastindexof:n("lastIndexOf",null),slice:n("slice",null),reverse:function(a){return"("+t(a[0])+").slice().reverse()"},parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),replace:n("replace",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(a){a.length<3&&Fe("Missing arguments to if function."),a.length>3&&Fe("Too many arguments to if function.");const o=a.map(t);return"("+o[0]+"?"+o[1]+":"+o[2]+")"}}}function w2t(t){const e=t&&t.length-1;return e&&(t[0]==='"'&&t[e]==='"'||t[0]==="'"&&t[e]==="'")?t.slice(1,-1):t}function _2t(t){t=t||{};const e=t.whitelist?dn(t.whitelist):{},n=t.blacklist?dn(t.blacklist):{},r=t.constants||Bpe,i=(t.functions||Upe)(f),s=t.globalvar,a=t.fieldvar,o=bn(s)?s:p=>`${s}["${p}"]`;let l={},u={},c=0;function f(p){if(Bt(p))return p;const m=d[p.type];return m==null&&Fe("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:Sl(n,m)?Fe("Illegal identifier: "+m):Sl(r,m)?r[m]:Sl(e,m)?m:(l[m]=1,o(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const v=f(p.property);return g===a&&(u[w2t(v)]=1),m&&(c-=1),g+(m?"."+v:"["+v+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&Fe("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,v=Sl(i,m)&&i[m];return v||Fe("Unrecognized function: "+m),bn(v)?v(g):v+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},m}return h.functions=i,h.constants=r,h}var kK={};function H2(t,e,n){var r=t+":"+n,i=kK[r];return(!i||i[0]!==e)&&(kK[r]=i=[e,e(n)]),i[1]}function S2t(t,e){return H2("format",Vc,e)(t)}function Vpe(t,e){return H2("timeFormat",zB,e)(t)}function C2t(t,e){return H2("utcFormat",UB,e)(t)}function E2t(t,e){return H2("timeParse",BB,e)(t)}function T2t(t,e){return H2("utcParse",VB,e)(t)}var XR=new Date(2e3,0,1);function _$(t,e,n){return XR.setMonth(t),XR.setDate(e),Vpe(XR,n)}function k2t(t){return _$(t,1,"%B")}function A2t(t){return _$(t,1,"%b")}function M2t(t){return _$(0,2+t,"%A")}function N2t(t){return _$(0,2+t,"%a")}function $2t(t){var e=0,n,r,i,s;if(t&&(n=t.length)){for(r=t[e];r==null||r!==r;r=t[++e]);for(i=s=r;e<n;++e)r=t[e],r!=null&&(r<i&&(i=r),r>s&&(s=r))}return[i,s]}function Kh(t,e,n,r){var i=e[0],s=e[e.length-1],a;return i>s&&(a=i,i=s,s=a),n=n===void 0||n,r=r===void 0||r,(n?i<=t:i<t)&&(r?t<=s:t<s)}function I2t(t,e,n){var r=t[0],i=t[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-e?[e,n]:[r=Math.min(Math.max(r,e),n-s),r+s]}function D2t(t){return t[t.length-1]-t[0]||0}function R2t(t){return 1+~~(new Date(t).getMonth()/3)}function O2t(t){return 1+~~(new Date(t).getUTCMonth()/3)}function q9(t,e,n){try{t[e].apply(t,["EXPRESSION"].concat([].slice.call(n)))}catch(r){t.warn(r)}return n[n.length-1]}function F2t(){return q9(this.context.dataflow,"warn",arguments)}function L2t(){return q9(this.context.dataflow,"info",arguments)}function P2t(){return q9(this.context.dataflow,"debug",arguments)}function z2t(t){var e=this.context.group,n=!1;if(e)for(;t;){if(t===e){n=!0;break}t=t.mark.group}return n}function B2t(t){var e=t.touches,n=e[0].clientX-e[1].clientX,r=e[0].clientY-e[1].clientY;return Math.sqrt(n*n+r*r)}function U2t(t){var e=t.touches;return Math.atan2(e[0].clientY-e[1].clientY,e[0].clientX-e[1].clientX)}var lx=typeof window<"u"&&window||null;function V2t(){return lx?lx.screen:{}}function W2t(){return lx?[lx.innerWidth,lx.innerHeight]:[void 0,void 0]}function G2t(){var t=this.context.dataflow,e=t.container&&t.container();return e?[e.clientWidth,e.clientHeight]:[void 0,void 0]}function H2t(t,e,n,r,i,s){if(!n&&n!==0)return s;var a=t[0],o=Cn(t),l=+n,u,c;return o<a&&(u=a,a=o,o=u),u=Math.abs(e-a),c=Math.abs(o-e),u<c&&u<=l?r:c<=l?i:s}function j2t(){var t=[].slice.call(arguments);return t.unshift({}),On.apply(null,t)}var nv="Literal",q2t="Identifier",X9="@",AE="%",X2t=":";function bf(t,e){var n;return bn(t)?t:Bt(t)?(n=e.scales[t])&&n.value:void 0}function AK(t,e,n){var r=AE+n;if(!e.hasOwnProperty(r))try{e[r]=t.scaleRef(n)}catch{}}function Jl(t,e,n,r){if(e[0].type===nv)AK(n,r,e[0].value);else if(e[0].type===q2t)for(t in n.scales)AK(n,r,t)}function Y2t(t,e){var n=bf(t,(e||this).context);return n&&n.range?n.range():[]}function K2t(t,e){var n=bf(t,(e||this).context);return n?n.domain():[]}function Z2t(t,e){var n=bf(t,(e||this).context);return n&&n.bandwidth?n.bandwidth():0}function J2t(t,e,n){return a7(t||0,e||0,n||0)}function Q2t(t,e){var n=bf(t,(e||this).context);return n?n.copy():void 0}function eSt(t,e,n){var r=bf(t,(n||this).context);return r?r(e):void 0}function tSt(t,e,n){var r=bf(t,(n||this).context);return r?je(e)?(r.invertRange||r.invert)(e):(r.invert||r.invertExtent)(e):void 0}function nSt(t,e,n,r,i){t=bf(t,(i||this).context);var s=Kle(e,n),a=t.domain(),o=a[0],l=Cn(a),u=Qce(t,o,l);t.ticks&&(a=t.ticks(+r||15),o!==a[0]&&a.unshift(o),l!==Cn(a)&&a.push(l));for(var c=0,f=a.length;c<f;++c)s.stop(u(a[c]),t(a[c]));return s}function Y9(t,e){return function(n,r,i){if(n){var s=bf(n,(i||this).context);return s&&s.path[t](r)}else return e(r)}}var rSt=Y9("area",Ebt),iSt=Y9("bounds",Ibt),sSt=Y9("centroid",Pbt);function aSt(t,e,n){var r=bf(t,(n||this).context);return function(i){return r?r.path.context(i)(e):""}}function oSt(t){var e=null;return function(n){return n?TN(n,e=e||B0(t)):t}}function Wpe(t){var e=this.context.data[t];return e?e.values.value:[]}function xf(t,e,n,r){e[0].type!==nv&&Fe("First argument to data functions must be a string literal.");var i=e[0].value,s=X2t+i;r.hasOwnProperty(s)||(r[s]=n.getData(i).tuplesRef())}function lSt(t,e,n){var r=this.context.data[t]["index:"+e],i=r?r.value.get(n):void 0;return i&&i.count}function uSt(t,e,n,r){e[0].type!==nv&&Fe("First argument to indata must be a string literal."),e[1].type!==nv&&Fe("Second argument to indata must be a string literal.");var i=e[0].value,s=e[1].value,a=X9+s;r.hasOwnProperty(a)||(r[a]=n.getData(i).indataRef(n,s))}function cSt(t,e){var n=this.context.dataflow,r=this.context.data[t],i=r.input;return n.pulse(i,n.changeset().remove(jd).insert(e)),1}var fSt={};function Gpe(t){return t.data}function Hpe(t,e){var n=Wpe.call(e,t);return n.root&&n.root.lookup||fSt}function dSt(t,e,n){var r=Hpe(t,this),i=r[e],s=r[n];return i&&s?i.path(s).map(Gpe):void 0}function hSt(t,e){var n=Hpe(t,this)[e];return n?n.ancestors().map(Gpe):void 0}function pSt(t,e,n){if(t){var r=this.context.dataflow,i=t.mark.source;r.pulse(i,r.changeset().encode(t,e))}return n!==void 0?n:t}function jpe(t,e){return t===e||t!==t&&e!==e?!0:je(t)&&je(e)&&t.length===e.length?mSt(t,e):!1}function mSt(t,e){for(var n=0,r=t.length;n<r;++n)if(!jpe(t[n],e[n]))return!1;return!0}function MK(t){return function(e){for(var n in t)if(!jpe(e[n],t[n]))return!1;return!0}}function gSt(t,e,n,r,i,s){var a=this.context.dataflow,o=this.context.data[t],l=o.input,u=o.changes,c=a.stamp(),f,d;if(a._trigger===!1||!(l.value.length||e||r))return 0;if((!u||u.stamp<c)&&(o.changes=u=a.changeset(),u.stamp=c,a.runAfter(function(){o.modified=!0,a.pulse(l,u).run()},!0,1)),n&&(f=n===!0?jd:je(n)||aN(n)?n:MK(n),u.remove(f)),e&&u.insert(e),r&&(f=MK(r),l.value.some(f)?u.remove(f):u.insert(r)),i)for(d in s)u.modify(i,d,s[d]);return 1}var vSt="E",ySt="R",bSt="R-E",xSt="R-LE",wSt="R-RE",qpe="intersect",_St="union",NK="index:unit";function $K(t,e){for(var n=e.fields,r=e.values,i=n.length,s=0,a,o;s<i;++s)if(o=n[s],o.getter=oo.getter||oo(o.field),a=o.getter(t),ya(a)&&(a=Yr(a)),ya(r[s])&&(r[s]=Yr(r[s])),ya(r[s][0])&&(r[s]=r[s].map(Yr)),o.type===vSt){if(je(r[s])?r[s].indexOf(a)<0:a!==r[s])return!1}else if(o.type===ySt){if(!Kh(a,r[s]))return!1}else if(o.type===wSt){if(!Kh(a,r[s],!0,!1))return!1}else if(o.type===bSt){if(!Kh(a,r[s],!1,!1))return!1}else if(o.type===xSt&&!Kh(a,r[s],!1,!0))return!1;return!0}function SSt(t,e,n){for(var r=this.context.data[t],i=r?r.values.value:[],s=r?r[NK]&&r[NK].value:void 0,a=n===qpe,o=i.length,l=0,u,c,f,d,h;l<o;++l)if(u=i[l],s&&a){if(c=c||{},f=c[d=u.unit]||0,f===-1)continue;if(h=$K(e,u),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=$K(e,u),a^h)return h;return o&&a}function Xpe(t,e,n,r){e[0].type!==nv&&Fe("First argument to indata must be a string literal.");var i=e[0].value,s=e.length>=2&&e[e.length-1].value,a="unit",o=X9+a;s===qpe&&!r.hasOwnProperty(o)&&(r[o]=n.getData(i).indataRef(n,a)),xf(t,e,n,r)}function CSt(t,e){for(var n=this.context.data[t],r=n?n.values.value:[],i={},s={},a,o,l,u,c,f,d,h,p,m=r.length,g=0,v,y;g<m;++g)for(a=r[g],u=a.unit,o=a.fields,l=a.values,v=0,y=o.length;v<y;++v)c=o[v],f=i[c.field]||(i[c.field]={}),d=f[u]||(f[u]=[]),s[c.field]=h=c.type.charAt(0),p=IK[h+"_union"],f[u]=p(d,qt(l[v]));return e=e||_St,Object.keys(i).forEach(function(b){i[b]=Object.keys(i[b]).map(function(x){return i[b][x]}).reduce(function(x,w){return x===void 0?w:IK[s[b]+"_"+e](x,w)})}),i}var IK={E_union:function(t,e){if(!t.length)return e;for(var n=0,r=e.length;n<r;++n)t.indexOf(e[n])<0&&t.push(e[n]);return t},E_intersect:function(t,e){return t.length?t.filter(function(n){return e.indexOf(n)>=0}):e},R_union:function(t,e){var n=Yr(e[0]),r=Yr(e[1]);return n>r&&(n=e[1],r=e[0]),t.length?(t[0]>n&&(t[0]=n),t[1]<r&&(t[1]=r),t):[n,r]},R_intersect:function(t,e){var n=Yr(e[0]),r=Yr(e[1]);return n>r&&(n=e[1],r=e[0]),t.length?r<t[0]||t[1]<n?[]:(t[0]<n&&(t[0]=n),t[1]>r&&(t[1]=r),t):[n,r]}},Ype="bin_",j2="intersect",YR="union",Vk="index:unit";function ESt(t,e){for(var n=e.fields,r=e.values,i=e.getter||(e.getter=[]),s=n.length,a=0,o;a<s;++a)if(i[a]=i[a]||oo(n[a]),o=i[a](t),ya(o)&&(o=Yr(o)),ya(r[a])&&(r[a]=Yr(r[a])),e[Ype+n[a]]){if(ya(r[a][0])&&(r[a]=r[a].map(Yr)),!Kh(o,r[a],!0,!1))return!1}else if(o!==r[a])return!1;return!0}function TSt(t,e){for(var n=e.intervals,r=n.length,i=0,s,a,o;i<r;++i){if(a=n[i].extent,s=n[i].getter||(n[i].getter=oo(n[i].field)),o=s(t),!a||a[0]===a[1]||(ya(o)&&(o=Yr(o)),ya(a[0])&&(a=n[i].extent=a.map(Yr)),ei(a[0])&&!Kh(o,a)))return!1;if(Bt(a[0])&&a.indexOf(o)<0)return!1}return!0}function Kpe(t,e,n,r){for(var i=this.context.data[t],s=i?i.values.value:[],a=i?i[Vk]&&i[Vk].value:void 0,o=n===j2,l=s.length,u=0,c,f,d,h,p;u<l;++u)if(c=s[u],a&&o){if(f=f||{},d=f[h=c.unit]||0,d===-1)continue;if(p=r(e,c),f[h]=p?-1:++d,p&&a.size===1)return!0;if(!p&&d===a.get(h).count)return!1}else if(p=r(e,c),o^p)return p;return l&&o}function Zpe(t,e,n){return Kpe.call(this,t,e,n,ESt)}function kSt(t,e,n){return Kpe.call(this,t,e,n,TSt)}function Jpe(t,e,n,r){e[0].type!==nv&&Fe("First argument to indata must be a string literal.");var i=e[0].value,s=e.length>=2&&e[e.length-1].value,a="unit",o=X9+a;s===j2&&!r.hasOwnProperty(o)&&(r[o]=n.getData(i).indataRef(n,a)),xf(t,e,n,r)}function Qpe(t,e,n,r){var i=this.context.data[t],s=i?i.values.value:[],a=i?i[Vk]&&i[Vk].value:void 0,o=s[0],l=0,u,c,f,d,h;if(o){for(u=e?o.encodings.length:o.fields.length;l<u;++l)if(e&&o.encodings[l]===e||n&&o.fields[l]===n){c=l,d=o[Ype+o.fields[l]];break}return a&&a.size===1&&(r=YR),a&&r===j2?(h=s.reduce(function(p,m){var g=p[m.unit]||(p[m.unit]=[]);return g.push({unit:m.unit,value:m.values[c]}),p},{}),f=Object.keys(h).map(function(p){return{unit:p,value:d?AP(h[p],YR):kP(h[p],YR)}})):f=s.map(function(p){return{unit:p.unit,value:p.values[c]}}),d?AP(f,r):kP(f,r)}}function ASt(t,e,n,r){var i=this.context.data[t],s=i?i.values.value:[],a=s[0],o=0,l,u,c,f,d;if(a){for(l=a.intervals.length;o<l;++o)if(u=a.intervals[o],e&&u.encoding===e||n&&u.field===n){if(!u.extent)return;c=o,d=u.extent.length>2;break}return f=s.reduce(function(h,p){var m=p.intervals[c].extent,g=d?m.map(function(v){return{unit:p.unit,value:v}}):{unit:p.unit,value:m};return d?h.push.apply(h,g):h.push(g),h},[]),d?kP(f,r):AP(f,r)}}function kP(t,e){for(var n={},r=0,i={},s=[],a=0,o=t.length,l,u,c,f;a<o;++a)l=t[a],u=l.unit,f=l.value,n[u]||(n[u]=++r),(c=i[f])||(i[f]=c={value:f,units:{},count:0}),c.units[u]||(c.units[u]=++c.count);for(f in i)c=i[f],!(e===j2&&c.count!==r)&&s.push(c.value);return s.length?s:void 0}function AP(t,e){for(var n=e===j2?NSt:MSt,r=0,i=t.length,s,a,o,l;r<i;++r)s=t[r].value,ya(s[0])&&(s=s.map(Yr)),o=s[0],l=s[1],o>l&&(l=s[0],o=s[1]),a=a?n(a,o,l):[o,l];return a&&a.length&&+a[0]!=+a[1]?a:void 0}function MSt(t,e,n){return t[0]>e&&(t[0]=e),t[1]<n&&(t[1]=n),t}function NSt(t,e,n){return n<t[0]||t[1]<e?[]:(t[0]<e&&(t[0]=e),t[1]>n&&(t[1]=n),t)}var Wk={random:function(){return nl()},isArray:je,isBoolean:By,isDate:ya,isNumber:ei,isObject:Gt,isRegExp:Hae,isString:Bt,isTuple:aN,toBoolean:$B,toDate:IB,toNumber:Yr,toString:DB,pad:qae,peek:Cn,truncate:Xae,rgb:W0,lab:QT,hcl:ek,hsl:ZT,sequence:S2,format:S2t,utcFormat:C2t,utcParse:T2t,timeFormat:Vpe,timeParse:E2t,monthFormat:k2t,monthAbbrevFormat:A2t,dayFormat:M2t,dayAbbrevFormat:N2t,quarter:R2t,utcquarter:O2t,warn:F2t,info:L2t,debug:P2t,extent:$2t,inScope:z2t,clampRange:I2t,pinchDistance:B2t,pinchAngle:U2t,screen:V2t,containerSize:G2t,windowSize:W2t,span:D2t,merge:j2t,flush:H2t,bandspace:J2t,inrange:Kh,setdata:cSt,pathShape:oSt,panLinear:Uae,panLog:Vae,panPow:Wae,zoomLinear:EB,zoomLog:TB,zoomPow:IT,encode:pSt,modify:gSt},$St=["view","item","group","xy","x","y"],ISt="event.vega.",eme="this.",tme={};function gr(t,e,n){return arguments.length===1?Wk[t]:(Wk[t]=e,n&&(tme[t]=n),MP&&(MP.functions[t]=eme+t),this)}gr("bandwidth",Z2t,Jl);gr("copy",Q2t,Jl);gr("domain",K2t,Jl);gr("range",Y2t,Jl);gr("invert",tSt,Jl);gr("scale",eSt,Jl);gr("gradient",nSt,Jl);gr("geoArea",rSt,Jl);gr("geoBounds",iSt,Jl);gr("geoCentroid",sSt,Jl);gr("geoShape",aSt,Jl);gr("indata",lSt,uSt);gr("data",Wpe,xf);gr("treePath",dSt,xf);gr("treeAncestors",hSt,xf);gr("vlSelectionTest",SSt,Xpe);gr("vlSelectionResolve",CSt,Xpe);gr("vlSingle",Zpe,xf);gr("vlSingleDomain",Qpe,xf);gr("vlMulti",Zpe,Jpe);gr("vlMultiDomain",Qpe,Jpe);gr("vlInterval",kSt,xf);gr("vlIntervalDomain",ASt,xf);function DSt(t){var e=Upe(t);$St.forEach(function(r){e[r]=ISt+r});for(var n in Wk)e[n]=eme+n;return e}var nme={blacklist:["_"],whitelist:["datum","event","item"],fieldvar:"datum",globalvar:function(t){return"_["+at("$"+t)+"]"},functions:DSt,constants:Bpe,visitors:tme},MP=_2t(nme),RSt="$";function Wu(t,e,n){var r={},i,s;try{t=Bt(t)?t:at(t)+"",i=zpe(t)}catch{Fe("Expression parse error: "+t)}return i.visit(function(o){if(o.type==="CallExpression"){var l=o.callee.name,u=nme.visitors[l];u&&u(l,o.arguments,e,r)}}),s=MP(i),s.globals.forEach(function(a){var o=RSt+a;!r.hasOwnProperty(o)&&e.getSignal(a)&&(r[o]=e.signalRef(a))}),{$expr:n?n+"return("+s.code+");":s.code,$fields:s.fields,$params:r}}function K9(t,e,n,r){this.id=-1,this.type=t,this.value=e,this.params=n,r&&(this.parent=r)}function S$(t,e,n,r){return new K9(t,e,n,r)}function C$(t,e){return S$("operator",t,e)}function Ct(t){var e={$ref:t.id};return t.id<0&&(t.refs=t.refs||[]).push(e),e}var rme={$tupleid:1,toString:function(){return":_tupleid_:"}};function hw(t,e){return e?{$field:t,$name:e}:{$field:t}}var NP=hw("key");function ime(t,e){return{$compare:t,$order:e}}function OSt(t,e){var n={$key:t};return e&&(n.$flat=!0),n}var FSt="ascending",LSt="descending";function PSt(t){return Gt(t)?(t.order===LSt?"-":"+")+Z9(t.op,t.field):""}function Z9(t,e){return(t&&t.signal?"$"+t.signal:t||"")+(t&&e?"_":"")+(e&&e.signal?"$"+e.signal:e||"")}var J9="scope",$P="view";function Gp(t){return t&&t.signal}function IP(t){if(Gp(t))return!0;if(Gt(t)){for(var e in t)if(IP(t[e]))return!0}return!1}function Ol(t,e){return t??e}function fp(t){return t&&t.signal||t}var DK="timer";function pw(t,e){var n=t.merge?BSt:t.stream?USt:t.type?VSt:Fe("Invalid stream specification: "+at(t));return n(t,e)}function zSt(t){return t===J9?$P:t||$P}function BSt(t,e){var n=t.merge.map(function(i){return pw(i,e)}),r=Q9({merge:n},t,e);return e.addStream(r).id}function USt(t,e){var n=pw(t.stream,e),r=Q9({stream:n},t,e);return e.addStream(r).id}function VSt(t,e){var n,r;return t.type===DK?(n=e.event(DK,t.throttle),t={between:t.between,filter:t.filter}):n=e.event(zSt(t.source),t.type),r=Q9({stream:n},t,e),Object.keys(r).length===1?n:e.addStream(r).id}function Q9(t,e,n){var r=e.between;return r&&(r.length!==2&&Fe('Stream "between" parameter must have 2 entries: '+at(e)),t.between=[pw(r[0],n),pw(r[1],n)]),r=e.filter?qt(e.filter):[],(e.marktype||e.markname||e.markrole)&&r.push(WSt(e.marktype,e.markname,e.markrole)),e.source===J9&&r.push("inScope(event.item)"),r.length&&(t.filter=Wu("("+r.join(")&&(")+")").$expr),(r=e.throttle)!=null&&(t.throttle=+r),(r=e.debounce)!=null&&(t.debounce=+r),e.consume&&(t.consume=!0),t}function WSt(t,e,n){var r="event.item";return r+(t&&t!=="*"?"&&"+r+".mark.marktype==='"+t+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(e?"&&"+r+".mark.name==='"+e+"'":"")}const GSt="view",Gk="[",Hk="]",sme="{",ame="}",HSt=":",ome=",",jSt="@",qSt=">",XSt=/[[\]{}]/,YSt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let lme,ume;function q2(t,e,n){return lme=e||GSt,ume=n||YSt,cme(t.trim()).map(DP)}function KSt(t){return ume[t]}function ux(t,e,n,r,i){const s=t.length;let a=0,o;for(;e<s;++e){if(o=t[e],!a&&o===n)return e;i&&i.indexOf(o)>=0?--a:r&&r.indexOf(o)>=0&&++a}return e}function cme(t){const e=[],n=t.length;let r=0,i=0;for(;i<n;)i=ux(t,i,ome,Gk+sme,Hk+ame),e.push(t.substring(r,i).trim()),r=++i;if(e.length===0)throw"Empty event selector: "+t;return e}function DP(t){return t[0]==="["?ZSt(t):JSt(t)}function ZSt(t){const e=t.length;let n=1,r;if(n=ux(t,n,Hk,Gk,Hk),n===e)throw"Empty between selector: "+t;if(r=cme(t.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+t;if(t=t.slice(n+1).trim(),t[0]!==qSt)throw"Expected '>' after between selector: "+t;r=r.map(DP);const i=DP(t.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function JSt(t){const e={source:lme},n=[];let r=[0,0],i=0,s=0,a=t.length,o=0,l,u;if(t[a-1]===ame){if(o=t.lastIndexOf(sme),o>=0){try{r=QSt(t.substring(o+1,a-1))}catch{throw"Invalid throttle specification: "+t}t=t.slice(0,o).trim(),a=t.length}else throw"Unmatched right brace: "+t;o=0}if(!a)throw t;if(t[0]===jSt&&(i=++o),l=ux(t,o,HSt),l<a&&(n.push(t.substring(s,l).trim()),s=o=++l),o=ux(t,o,Gk),o===a)n.push(t.substring(s,a).trim());else if(n.push(t.substring(s,o).trim()),u=[],s=++o,s===a)throw"Unmatched left bracket: "+t;for(;o<a;){if(o=ux(t,o,Hk),o===a)throw"Unmatched left bracket: "+t;if(u.push(t.substring(s,o).trim()),o<a-1&&t[++o]!==Gk)throw"Expected left bracket: "+t;s=++o}if(!(a=n.length)||XSt.test(n[a-1]))throw"Invalid event selector: "+t;return a>1?(e.type=n[1],i?e.markname=n[0].slice(1):KSt(n[0])?e.marktype=n[0]:e.source=n[0]):e.type=n[0],e.type.slice(-1)==="!"&&(e.consume=!0,e.type=e.type.slice(0,-1)),u!=null&&(e.filter=u),r[0]&&(e.throttle=r[0]),r[1]&&(e.debounce=r[1]),e}function QSt(t){const e=t.split(ome);if(!t.length||e.length>2)throw t;return e.map(n=>{const r=+n;if(r!==r)throw t;return r})}var RK="var datum=event.item&&event.item.datum;";function eCt(t,e,n){var r=t.events,i=t.update,s=t.encode,a=[],o="",l;r||Fe("Signal update missing events specification."),Bt(r)&&(r=q2(r,e.isSubscope()?J9:$P)),r=qt(r).filter(function(u){return u.signal||u.scale?(a.push(u),0):1}),r.length&&a.push(r.length>1?{merge:r}:r[0]),s!=null&&(i&&Fe("Signal encode and update are mutually exclusive."),i="encode(item(),"+at(s)+")"),o=Bt(i)?Wu(i,e,RK):i.expr!=null?Wu(i.expr,e,RK):i.value!=null?i.value:i.signal!=null?{$expr:"_.value",$params:{value:e.signalRef(i.signal)}}:Fe("Invalid signal update specification."),l={target:n,update:o},t.force&&(l.options={force:!0}),a.forEach(function(u){e.addUpdate(On(tCt(u,e),l))})}function tCt(t,e){return{source:t.signal?e.signalRef(t.signal):t.scale?e.scaleRef(t.scale):pw(t,e)}}function nCt(t,e){var n=e.getSignal(t.name),r=t.update;t.init&&(r?Fe("Signals can not include both init and update expressions."):(r=t.init,n.initonly=!0)),r&&(r=Wu(r,e),n.update=r.$expr,n.params=r.$params),t.on&&t.on.forEach(function(i){eCt(i,e,n.id)})}function jn(t){return function(e,n,r){return S$(t,n,e||void 0,r)}}var fme=jn("aggregate"),rCt=jn("axisticks"),dme=jn("bound"),Ql=jn("collect"),hme=jn("compare"),iCt=jn("datajoin"),pme=jn("encode"),sCt=jn("expression"),aCt=jn("facet"),oCt=jn("field"),lCt=jn("key"),uCt=jn("legendentries"),cCt=jn("load"),fCt=jn("mark"),dCt=jn("multiextent"),hCt=jn("multivalues"),pCt=jn("overlap"),mCt=jn("params"),mme=jn("prefacet"),gCt=jn("projection"),vCt=jn("proxy"),yCt=jn("relay"),gme=jn("render"),bCt=jn("scale"),Em=jn("sieve"),xCt=jn("sortitems"),vme=jn("viewlayout"),wCt=jn("values"),_Ct=0,E$=["identity","ordinal","band","point","bin-linear","bin-ordinal","quantize","quantile","threshold","linear","pow","sqrt","log","sequential","time","utc"],SCt=dn(E$),CCt=dn(E$.slice(4,9)),ECt=dn(E$.slice(9)),TCt=dn(E$.slice(1,6));function jk(t){return TCt.hasOwnProperty(t)}function OK(t){return CCt.hasOwnProperty(t)}function kCt(t){return ECt.hasOwnProperty(t)}function yme(t){return t==="quantile"}function ACt(t,e){var n=t.type||"linear";SCt.hasOwnProperty(n)||Fe("Unrecognized scale type: "+at(n)),e.addScale(t.name,{type:n,domain:void 0})}function MCt(t,e){var n=e.getScale(t.name).params,r;n.domain=bme(t.domain,t,e),t.range!=null&&(n.range=wme(t,e,n)),t.interpolate!=null&&zCt(t.interpolate,n),t.nice!=null&&PCt(t.nice,n);for(r in t)n.hasOwnProperty(r)||r==="name"||(n[r]=Vo(t[r],e))}function Vo(t,e){return Gt(t)?t.signal?e.signalRef(t.signal):Fe("Unsupported object: "+at(t)):t}function NCt(t,e){return t.signal?e.signalRef(t.signal):t.map(function(n){return Vo(n,e)})}function T$(t){Fe("Can not find data set: "+at(t))}function bme(t,e,n){if(!t){(e.domainMin!=null||e.domainMax!=null)&&Fe("No scale domain defined for domainMin/domainMax to override.");return}return t.signal?n.signalRef(t.signal):(je(t)?$Ct:t.fields?DCt:ICt)(t,e,n)}function $Ct(t,e,n){return t.map(function(r){return Vo(r,n)})}function ICt(t,e,n){var r=n.getData(t.data);return r||T$(t.data),jk(e.type)?r.valuesRef(n,t.field,xme(t.sort,!1)):yme(e.type)?r.domainRef(n,t.field):r.extentRef(n,t.field)}function DCt(t,e,n){var r=t.data,i=t.fields.reduce(function(s,a){return a=Bt(a)?{data:r,field:a}:je(a)||a.signal?RCt(a,n):a,s.push(a),s},[]);return(jk(e.type)?OCt:yme(e.type)?FCt:LCt)(t,n,i)}function RCt(t,e){var n="_:vega:_"+_Ct++,r=Ql({});if(je(t))r.value={$ingest:t};else if(t.signal){var i="setdata("+at(n)+","+t.signal+")";r.params.input=e.signalRef(i)}return e.addDataPipeline(n,[r,Em({})]),{data:n,field:"data"}}function OCt(t,e,n){var r,i,s,a;return r=n.map(function(o){var l=e.getData(o.data);return l||T$(o.data),l.countsRef(e,o.field)}),i=e.add(fme({groupby:NP,ops:["sum"],fields:[e.fieldRef("count")],as:["count"],pulse:r})),s=e.add(Ql({pulse:Ct(i)})),a=e.add(wCt({field:NP,sort:e.sortRef(xme(t.sort,!0)),pulse:Ct(s)})),Ct(a)}function xme(t,e){return t&&(!t.field&&!t.op?Gt(t)?t.field="key":t={field:"key"}:!t.field&&t.op!=="count"?Fe("No field provided for sort aggregate op: "+t.op):e&&t.field?Fe("Multiple domain scales can not sort by field."):e&&t.op&&t.op!=="count"&&Fe("Multiple domain scales support op count only.")),t}function FCt(t,e,n){var r=n.map(function(i){var s=e.getData(i.data);return s||T$(i.data),s.domainRef(e,i.field)});return Ct(e.add(hCt({values:r})))}function LCt(t,e,n){var r=n.map(function(i){var s=e.getData(i.data);return s||T$(i.data),s.extentRef(e,i.field)});return Ct(e.add(dCt({extents:r})))}function PCt(t,e){e.nice=Gt(t)?{interval:Vo(t.interval),step:Vo(t.step)}:Vo(t)}function zCt(t,e){e.interpolate=Vo(t.type||t),t.gamma!=null&&(e.interpolateGamma=Vo(t.gamma))}function wme(t,e,n){var r=t.range,i=e.config.range;if(r.signal)return e.signalRef(r.signal);if(Bt(r)){if(i&&i.hasOwnProperty(r))return t=On({},t,{range:i[r]}),wme(t,e,n);r==="width"?r=[0,{signal:"width"}]:r==="height"?r=jk(t.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Fe("Unrecognized scale range value: "+at(r))}else if(r.scheme){n.scheme=Vo(r.scheme,e),r.extent&&(n.schemeExtent=NCt(r.extent,e)),r.count&&(n.schemeCount=Vo(r.count,e));return}else if(r.step){n.rangeStep=Vo(r.step,e);return}else{if(jk(t.type)&&!je(r))return bme(r,t,e);je(r)||Fe("Unsupported range type: "+at(r))}return r.map(function(s){return Vo(s,e)})}function BCt(t,e){var n={};for(var r in t)r!=="name"&&(n[r]=_me(t[r],r,e));e.addProjection(t.name,n)}function _me(t,e,n){return je(t)?t.map(function(r){return _me(r,e,n)}):Gt(t)?t.signal?n.signalRef(t.signal):e==="fit"?t:Fe("Unsupported parameter object: "+at(t)):t}var hs="top",Tm="left",eU="right",Wc="bottom",UCt="center",VCt="vertical",WCt="start",GCt="end",RP="index",tU="label",HCt="offset",rv="perc",jCt="perc2",FK="size",qo="value",k$="guide-label",Sme="guide-title",qCt="group-title",LK="symbol",ME="gradient",OP="discrete",nU=["size","shape","fill","stroke","strokeDash","opacity"],A$={name:1,interactive:1},XCt=dn(["rule"]),PK=dn(["group","image","rect"]);function YCt(t,e){var n="";return XCt[e]||(t.x2&&(t.x?(PK[e]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),t.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),t.y2&&(t.y?(PK[e]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),t.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function KCt(t,e,n,r){function i(s,a,o,l){var u=r0(null,a,e,n,r),c=r0(null,o,e,n,r),f=r0(null,l,e,n,r);return"this."+s+"("+[u,c,f].join(",")+").toString()"}return t.c?i("hcl",t.h,t.c,t.l):t.h||t.s?i("hsl",t.h,t.s,t.l):t.l||t.a?i("lab",t.l,t.a,t.b):t.r||t.g||t.b?i("rgb",t.r,t.g,t.b):null}function M$(t,e,n,r){var i=Wu(t,e);return i.$fields.forEach(function(s){r[s]=1}),On(n,i.$params),i.$expr}function Cme(t,e,n,r){return Eme(Gt(t)?t:{datum:t},e,n,r)}function Eme(t,e,n,r){var i,s,a;if(t.signal)i="datum",a=M$(t.signal,e,n,r);else if(t.group||t.parent){for(s=Math.max(1,t.level||1),i="item";s-- >0;)i+=".mark.group";t.parent?(a=t.parent,i+=".datum"):a=t.group}else t.datum?(i="datum",a=t.datum):Fe("Invalid field reference: "+at(t));return t.signal||(Bt(a)?(r[a]=1,a=Qu(a).map(at).join("][")):a=Eme(a,e,n,r)),i+"["+a+"]"}function ZCt(t,e,n,r,i){var s=Tme(t.scale,n,r,i),a,o,l;return t.range!=null?(a=+t.range,o=s+".range()",e=a===0?o+"[0]":"($="+o+","+(a===1?"$[$.length-1]":"$[0]+"+a+"*($[$.length-1]-$[0])")+")"):(e!==void 0&&(e=s+"("+e+")"),t.band&&(l=JCt(t.scale,n))&&(o=s+".bandwidth",a=+t.band,a=o+"()"+(a===1?"":"*"+a),l<0&&(a="("+o+"?"+a+":0)"),e=(e?e+"+":"")+a,t.extra&&(e="(datum.extra?"+s+"(datum.extra.value):"+e+")")),e==null&&(e="0")),e}function JCt(t,e){if(!Bt(t))return-1;var n=e.scaleType(t);return n==="band"||n==="point"?1:0}function Tme(t,e,n,r){var i;if(Bt(t))i=AE+t,n.hasOwnProperty(i)||(n[i]=e.scaleRef(t)),i=at(i);else{for(i in e.scales)n[AE+i]=e.scaleRef(i);i=at(AE)+"+"+(t.signal?"("+M$(t.signal,e,n,r)+")":Cme(t,e,n,r))}return"_["+i+"]"}function QCt(t,e,n,r){return"this.gradient("+Tme(t.gradient,e,n,r)+","+at(t.start)+","+at(t.stop)+","+at(t.count)+")"}function KR(t,e,n,r){return Gt(t)?"("+r0(null,t,e,n,r)+")":t}function r0(t,e,n,r,i){if(e.gradient!=null)return QCt(e,n,r,i);var s=e.signal?M$(e.signal,n,r,i):e.color?KCt(e.color,n,r,i):e.field!=null?Cme(e.field,n,r,i):e.value!==void 0?at(e.value):void 0;return e.scale!=null&&(s=ZCt(e,s,n,r,i)),s===void 0&&(s=null),e.exponent!=null&&(s="Math.pow("+s+","+KR(e.exponent,n,r,i)+")"),e.mult!=null&&(s+="*"+KR(e.mult,n,r,i)),e.offset!=null&&(s+="+"+KR(e.offset,n,r,i)),e.round&&(s="Math.round("+s+")"),s}function kme(t,e,n){return t+"["+at(e)+"]="+n+";"}function eEt(t,e,n,r,i){var s="";return e.forEach(function(a){var o=r0(t,a,n,r,i);s+=a.test?M$(a.test,n,r,i)+"?"+o+":":o}),Cn(s)===":"&&(s+="null"),kme("o",t,s)}function tEt(t,e,n,r){var i={},s="var o=item,datum=o.datum,$;",a,o,l;for(a in t)o=t[a],je(o)?s+=eEt(a,o,r,n,i):(l=r0(a,o,r,n,i),s+=kme("o",a,l));return s+=YCt(t,e),s+="return 1;",{$expr:s,$fields:Object.keys(i),$output:Object.keys(t)}}var rU="mark",iU="frame",sU="scope",nEt="axis",rEt="axis-domain",iEt="axis-grid",sEt="axis-label",aEt="axis-tick",oEt="axis-title",lEt="legend",uEt="legend-band",cEt="legend-entry",fEt="legend-gradient",Ame="legend-label",dEt="legend-symbol",hEt="legend-title",pEt="title";function qr(t){return Gt(t)?On({},t):{value:t}}function Ye(t,e,n,r){return n!=null?(Gt(n)&&!je(n)?t.update[e]=n:t[r||"enter"][e]={value:n},1):0}function X2(t,e,n){for(var r in e)n&&n.hasOwnProperty(r)||(t[r]=On(t[r]||{},e[r]));return t}function Mme(t,e,n,r,i,s){var a,o;s=s||{},s.encoders={$encode:a={}},t=mEt(t,e,n,r,i.config);for(o in t)a[o]=tEt(t[o],e,s,i);return s}function mEt(t,e,n,r,i){var s={},a,o,l;(n=="legend"||String(n).indexOf("axis")===0)&&(n=null),l=n===iU?i.group:n===rU?On({},i.mark,i[e]):null;for(a in l)o=Og(a,t)||(a==="fill"||a==="stroke")&&(Og("fill",t)||Og("stroke",t)),o||(s[a]=zK(l[a]));return qt(r).forEach(function(u){var c=i.style&&i.style[u];for(var f in c)Og(f,t)||(s[f]=zK(c[f]))}),t=On({},t),t.enter=On(s,t.enter),t}function zK(t){return t&&t.signal?{signal:t.signal}:{value:t}}function Og(t,e){return e&&(e.enter&&e.enter[t]||e.update&&e.update[t])}function il(t,e,n,r,i,s,a){return{type:t,name:a?a.name:void 0,role:e,style:a&&a.style||n,key:r,from:i,interactive:!!(a&&a.interactive),encode:X2(s,a,A$)}}function Me(t,e,n){return Ol(e[t],n[t])}function Y2(t,e){return Ol(t.direction,e)===VCt}function N$(t,e){return Ol(t.gradientLength,e.gradientLength||e.gradientWidth)}function aU(t,e){return Ol(t.gradientThickness,e.gradientThickness||e.gradientHeight)}function gEt(t,e){return Ol(t.columns,Ol(e.columns,+Y2(t,e.symbolDirection)))}function FP(t,e){var n=e&&(e.update&&e.update[t]||e.enter&&e.enter[t]);return n&&n.signal?n:n?n.value:null}function vEt(t,e,n){var r=e.config.style[n];return r&&r[t]}var $$="group",Nme="rect",oU="rule",yEt="symbol",Zy="text";function bEt(t,e,n,r){var i={value:0},s=Y2(t,n.gradientDirection),a=aU(t,n),o=N$(t,n),l,u,c,f,d,h;return s?(c=[0,1],f=[0,0],d=a,h=o):(c=[0,0],f=[1,0],d=o,h=a),l={enter:u={opacity:i,x:i,y:i,width:qr(d),height:qr(h)},update:On({},u,{opacity:{value:1},fill:{gradient:e,start:c,stop:f}}),exit:{opacity:i}},Ye(l,"stroke",Me("gradientStrokeColor",t,n)),Ye(l,"strokeWidth",Me("gradientStrokeWidth",t,n)),Ye(l,"opacity",Me("gradientOpacity",t,n),"update"),il(Nme,fEt,null,void 0,void 0,l,r)}function xEt(t,e,n,r,i){var s={value:0},a=Y2(t,n.gradientDirection),o=aU(t,n),l=N$(t,n),u,c,f,d,h,p,m="";return a?(f="y",h="y2",d="x",p="width",m="1-"):(f="x",h="x2",d="y",p="height"),c={opacity:s,fill:{scale:e,field:qo}},c[f]={signal:m+"datum."+rv,mult:l},c[d]=s,c[h]={signal:m+"datum."+jCt,mult:l},c[p]=qr(o),u={enter:c,update:On({},c,{opacity:{value:1}}),exit:{opacity:s}},Ye(u,"stroke",Me("gradientStrokeColor",t,n)),Ye(u,"strokeWidth",Me("gradientStrokeWidth",t,n)),Ye(u,"opacity",Me("gradientOpacity",t,n),"update"),il(Nme,uEt,null,qo,i,u,r)}var wEt="datum."+rv+'<=0?"left":datum.'+rv+'>=1?"right":"center"',_Et="datum."+rv+'<=0?"bottom":datum.'+rv+'>=1?"top":"middle"';function BK(t,e,n,r){var i={value:0},s=Y2(t,e.gradientDirection),a=qr(aU(t,e)),o=N$(t,e),l=Me("labelOverlap",t,e),u,c,f,d,h,p="";return u={enter:c={opacity:i},update:f={opacity:{value:1},text:{field:tU}},exit:{opacity:i}},Ye(u,"fill",Me("labelColor",t,e)),Ye(u,"font",Me("labelFont",t,e)),Ye(u,"fontSize",Me("labelFontSize",t,e)),Ye(u,"fontWeight",Me("labelFontWeight",t,e)),Ye(u,"fillOpacity",Me("labelOpacity",t,e)),Ye(u,"limit",Ol(t.labelLimit,e.gradientLabelLimit)),s?(c.align={value:"left"},c.baseline=f.baseline={signal:_Et},d="y",h="x",p="1-"):(c.align=f.align={signal:wEt},c.baseline={value:"top"},d="x",h="y"),c[d]=f[d]={signal:p+"datum."+rv,mult:o},c[h]=f[h]=a,a.offset=Ol(t.labelOffset,e.gradientLabelOffset)||0,t=il(Zy,Ame,k$,qo,r,u,n),l&&(t.overlap={method:l,order:"datum."+RP}),t}function qk(t,e,n,r,i,s,a,o){return{type:$$,name:n,role:t,style:e,from:r,interactive:i||!1,encode:s,marks:a,layout:o}}var $f={value:0};function SEt(t,e,n,r,i){var s=n.entries,a=!!(s&&s.interactive),o=s?s.name:void 0,l=Me("clipHeight",t,e),u=Me("symbolOffset",t,e),c={data:"value"},f={},d=i+"?datum."+HCt+":datum."+FK,h=l?qr(l):{field:FK},p="datum."+RP,m="max(1,"+i+")",g,v,y,b,x,w,S;return h.mult=.5,f={enter:g={opacity:$f,x:{signal:d,mult:.5,offset:u},y:h},update:v={opacity:{value:1},x:g.x,y:g.y},exit:{opacity:$f}},t.fill||(Ye(f,"fill",e.symbolBaseFillColor),Ye(f,"stroke",e.symbolBaseStrokeColor)),Ye(f,"shape",Me("symbolType",t,e)),Ye(f,"size",Me("symbolSize",t,e)),Ye(f,"strokeWidth",Me("symbolStrokeWidth",t,e)),Ye(f,"fill",Me("symbolFillColor",t,e)),Ye(f,"stroke",Me("symbolStrokeColor",t,e)),Ye(f,"opacity",Me("symbolOpacity",t,e),"update"),nU.forEach(function(C){t[C]&&(v[C]=g[C]={scale:t[C],field:qo})}),b=il(yEt,dEt,null,qo,c,f,n.symbols),l&&(b.clip=!0),y=qr(u),y.offset=Me("labelOffset",t,e),f={enter:g={opacity:$f,x:{signal:d,offset:y},y:h},update:v={opacity:{value:1},text:{field:tU},x:g.x,y:g.y},exit:{opacity:$f}},Ye(f,"align",Me("labelAlign",t,e)),Ye(f,"baseline",Me("labelBaseline",t,e)),Ye(f,"fill",Me("labelColor",t,e)),Ye(f,"font",Me("labelFont",t,e)),Ye(f,"fontSize",Me("labelFontSize",t,e)),Ye(f,"fontWeight",Me("labelFontWeight",t,e)),Ye(f,"limit",Me("labelLimit",t,e)),Ye(f,"fillOpacity",Me("labelOpacity",t,e)),x=il(Zy,Ame,k$,qo,c,f,n.labels),f={enter:{noBound:{value:!0},width:$f,height:l?qr(l):$f,opacity:$f},exit:{opacity:$f},update:v={opacity:{value:1},row:{signal:null},column:{signal:null}}},Y2(t,e.symbolDirection)?(w="ceil(item.mark.items.length/"+m+")",v.row.signal=p+"%"+w,v.column.signal="floor("+p+"/"+w+")",S={field:["row",p]}):(v.row.signal="floor("+p+"/"+m+")",v.column.signal=p+"%"+m,S={field:p}),v.column.signal=i+"?"+v.column.signal+":"+p,r={facet:{data:r,name:"value",groupby:RP}},t=qk(sU,null,o,r,a,X2(f,s,A$),[b,x]),t.sort=S,t}function CEt(t,e){return{align:Me("gridAlign",t,e),center:{row:!0,column:!1},columns:gEt(t,e),padding:{row:Me("rowPadding",t,e),column:Me("columnPadding",t,e)}}}function EEt(t,e,n,r){var i={value:0},s,a;return s={enter:a={opacity:i,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},update:{opacity:{value:1},text:qr(t.title),x:a.x,y:a.y},exit:{opacity:i}},Ye(s,"align",Me("titleAlign",t,e)),Ye(s,"baseline",Me("titleBaseline",t,e)),Ye(s,"fill",Me("titleColor",t,e)),Ye(s,"font",Me("titleFont",t,e)),Ye(s,"fontSize",Me("titleFontSize",t,e)),Ye(s,"fontWeight",Me("titleFontWeight",t,e)),Ye(s,"limit",Me("titleLimit",t,e)),Ye(s,"fillOpacity",Me("titleOpacity",t,e)),il(Zy,hEt,Sme,null,r,s,n)}function TEt(t,e){var n;return Gt(t)&&(t.signal?n=t.signal:t.path?n="pathShape("+UK(t.path)+")":t.sphere&&(n="geoShape("+UK(t.sphere)+', {type: "Sphere"})')),n?e.signalRef(n):!!t}function UK(t){return Gt(t)&&t.signal?t.signal:at(t)}function $me(t){var e=t.role||"";return!e.indexOf("axis")||!e.indexOf("legend")?e:t.type===$$?sU:e||rU}function kEt(t){return{marktype:t.type,name:t.name||void 0,role:t.role||$me(t),zindex:+t.zindex||void 0}}function AEt(t,e){return t&&t.signal?e.signalRef(t.signal):t!==!1}function lU(t,e){var n=zoe(t.type);n||Fe("Unrecognized transform type: "+at(t.type));var r=S$(n.type.toLowerCase(),null,Ime(n,t,e));return t.signal&&e.addSignal(t.signal,e.proxy(r)),r.metadata=n.metadata||{},r}function Ime(t,e,n){var r={},i,s,a;for(s=0,a=t.params.length;s<a;++s)i=t.params[s],r[i.name]=MEt(i,e,n);return r}function MEt(t,e,n){var r=t.type,i=e[t.name];if(r==="index")return NEt(t,e,n);if(i===void 0){t.required&&Fe("Missing required "+at(e.type)+" parameter: "+at(t.name));return}else{if(r==="param")return $Et(t,e,n);if(r==="projection")return n.projectionRef(e[t.name])}return t.array&&!Gp(i)?i.map(function(s){return VK(t,s,n)}):VK(t,i,n)}function VK(t,e,n){var r=t.type;if(Gp(e))return GK(r)?Fe("Expression references can not be signals."):ZR(r)?n.fieldRef(e):HK(r)?n.compareRef(e):n.signalRef(e.signal);var i=t.expr||ZR(r);return i&&IEt(e)?n.exprRef(e.expr,e.as):i&&DEt(e)?hw(e.field,e.as):GK(r)?Wu(e,n):REt(r)?Ct(n.getData(e).values):ZR(r)?hw(e):HK(r)?n.compareRef(e):e}function NEt(t,e,n){return Bt(e.from)||Fe('Lookup "from" parameter must be a string literal.'),n.getData(e.from).lookupRef(n,e.key)}function $Et(t,e,n){var r=e[t.name];return t.array?(je(r)||Fe("Expected an array of sub-parameters. Instead: "+at(r)),r.map(function(i){return WK(t,i,n)})):WK(t,r,n)}function WK(t,e,n){var r,i,s,a,o;for(a=0,o=t.params.length;a<o;++a){i=t.params[a];for(s in i.key)if(i.key[s]!==e[s]){i=null;break}if(i)break}return i||Fe("Unsupported parameter: "+at(e)),r=On(Ime(i,e,n),i.key),Ct(n.add(mCt(r)))}function IEt(t){return t&&t.expr}function DEt(t){return t&&t.field}function REt(t){return t==="data"}function GK(t){return t==="expr"}function ZR(t){return t==="field"}function HK(t){return t==="compare"}function OEt(t,e,n){var r,i,s,a,o;return t?(r=t.facet)&&(e||Fe("Only group marks can be faceted."),r.field!=null?a=o=NE(r,n):(t.data?o=Ct(n.getData(t.data).aggregate):(s=lU(On({type:"aggregate",groupby:qt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=NE(r,n),a=o=Ct(n.add(s))),i=n.keyRef(r.groupby,!0))):a=Ct(n.add(Ql(null,[{}]))),a||(a=NE(t,n)),{key:i,pulse:a,parent:o}}function NE(t,e){return t.$ref?t:t.data&&t.data.$ref?t.data:Ct(e.getData(t.data).output)}function Hp(t,e,n,r,i){this.scope=t,this.input=e,this.output=n,this.values=r,this.aggregate=i,this.index={}}Hp.fromEntries=function(t,e){var n=e.length,r=1,i=e[0],s=e[n-1],a=e[n-2],o=null;for(t.add(e[0]);r<n;++r)e[r].params.pulse=Ct(e[r-1]),t.add(e[r]),e[r].type==="aggregate"&&(o=e[r]);return new Hp(t,i,a,s,o)};var km=Hp.prototype;km.countsRef=function(t,e,n){var r=this,i=r.counts||(r.counts={}),s=Dme(e),a,o,l;return s!=null&&(t=r.scope,a=i[s]),a?n&&n.field&&jK(t,a.agg.params,n):(l={groupby:t.fieldRef(e,"key"),pulse:Ct(r.output)},n&&n.field&&jK(t,l,n),o=t.add(fme(l)),a=t.add(Ql({pulse:Ct(o)})),a={agg:o,ref:Ct(a)},s!=null&&(i[s]=a)),a.ref};function Dme(t){return Bt(t)?t:null}function jK(t,e,n){var r=Z9(n.op,n.field),i;if(e.ops){for(var s=0,a=e.as.length;s<a;++s)if(e.as[s]===r)return}else e.ops=["count"],e.fields=[null],e.as=["count"];n.op&&(e.ops.push((i=n.op.signal)?t.signalRef(i):n.op),e.fields.push(t.fieldRef(n.field)),e.as.push(r))}function K2(t,e,n,r,i,s,a){var o=e[n]||(e[n]={}),l=PSt(s),u=Dme(i),c,f;if(u!=null&&(t=e.scope,u=u+(l?"|"+l:""),c=o[u]),!c){var d=s?{field:NP,pulse:e.countsRef(t,i,s)}:{field:t.fieldRef(i),pulse:Ct(e.output)};l&&(d.sort=t.sortRef(s)),f=t.add(S$(r,void 0,d)),a&&(e.index[i]=f),c=Ct(f),u!=null&&(o[u]=c)}return c}km.tuplesRef=function(){return Ct(this.values)};km.extentRef=function(t,e){return K2(t,this,"extent","extent",e,!1)};km.domainRef=function(t,e){return K2(t,this,"domain","values",e,!1)};km.valuesRef=function(t,e,n){return K2(t,this,"vals","values",e,n||!0)};km.lookupRef=function(t,e){return K2(t,this,"lookup","tupleindex",e,!1)};km.indataRef=function(t,e){return K2(t,this,"indata","tupleindex",e,!0,!0)};function FEt(t,e,n){var r=t.from.facet,i=r.name,s=NE(r,e),a,o,l,u;r.name||Fe("Facet must have a name: "+at(r)),r.data||Fe("Facet must reference a data set: "+at(r)),r.field?u=e.add(mme({field:e.fieldRef(r.field),pulse:s})):r.groupby?u=e.add(aCt({key:e.keyRef(r.groupby),group:Ct(e.proxy(n.parent)),pulse:s})):Fe("Facet must specify groupby or field: "+at(r)),a=e.fork(),o=a.add(Ql()),l=a.add(Em({pulse:Ct(o)})),a.addData(i,new Hp(a,o,o,l)),a.addSignal("parent",null),u.params.subflow={$subflow:D$(t,a).toRuntime()}}function LEt(t,e,n){var r=e.add(mme({pulse:n.pulse})),i=e.fork();i.add(Em()),i.addSignal("parent",null),r.params.subflow={$subflow:D$(t,i).toRuntime()}}function Rme(t,e,n){var r=t.remove,i=t.insert,s=t.toggle,a=t.modify,o=t.values,l=e.add(C$()),u,c;u="if("+t.trigger+',modify("'+n+'",'+[i,r,s,a,o].map(function(f){return f??"null"}).join(",")+"),0)",c=Wu(u,e),l.update=c.$expr,l.params=c.$params}function I$(t,e){var n=$me(t),r=t.type===$$,i=t.from&&t.from.facet,s=t.layout||n===sU||n===iU,a=n===rU||s||i,o=t.overlap,l,u,c,f,d,h,p,m,g,v,y,b,x;c=OEt(t.from,r,e),u=e.add(iCt({key:c.key||(t.key?hw(t.key):void 0),pulse:c.pulse,clean:!r})),g=Ct(u),u=f=e.add(Ql({pulse:g})),u=e.add(fCt({markdef:kEt(t),interactive:AEt(t.interactive,e),clip:TEt(t.clip,e),context:{$context:!0},groups:e.lookup(),parent:e.signals.parent?e.signalRef("parent"):null,index:e.markpath(),pulse:Ct(u)})),v=Ct(u),u=e.add(pme(Mme(t.encode,t.type,n,t.style,e,{pulse:v}))),u.params.parent=e.encode(),t.transform&&t.transform.forEach(function(w){var S=lU(w,e);(S.metadata.generates||S.metadata.changes)&&Fe("Mark transforms should not generate new data."),S.params.pulse=Ct(u),e.add(u=S)}),t.sort&&(u=e.add(xCt({sort:e.compareRef(t.sort,!0),pulse:Ct(u)}))),y=Ct(u),(i||s)&&(s=e.add(vme({layout:e.objectProperty(t.layout),legendMargin:e.config.legendMargin,mark:v,pulse:y})),b=Ct(s)),d=e.add(dme({mark:v,pulse:b||y})),x=Ct(d),r&&(a&&(l=e.operators,l.pop(),s&&l.pop()),e.pushState(y,b||x,g),i?FEt(t,e,c):a?LEt(t,e,c):D$(t,e),e.popState(),a&&(s&&l.push(s),l.push(d))),o&&(x=PEt(o,x,e)),h=e.add(gme({pulse:x})),p=e.add(Em({pulse:Ct(h)},void 0,e.parent())),t.name!=null&&(m=t.name,e.addData(m,new Hp(e,f,h,p)),t.on&&t.on.forEach(function(w){(w.insert||w.remove||w.toggle)&&Fe("Marks only support modify triggers."),Rme(w,e,m)}))}function PEt(t,e,n){var r=t.method,i=t.bound,s,a={method:Gp(r)?n.signalRef(r.signal):r,pulse:e};return t.order&&(a.sort=n.compareRef({field:t.order})),i&&(s=i.tolerance,a.boundTolerance=Gp(s)?n.signalRef(s.signal):+s,a.boundScale=n.scaleRef(i.scale),a.boundOrient=i.orient),Ct(n.add(pCt(a)))}function zEt(t,e){var n=e.config.legend,r=t.encode||{},i=r.legend||{},s=i.name||void 0,a=i.interactive,o=i.style,l,u,c,f,d,h,p,m,g,v=nU.reduce(function(y,b){return y||t[b]},0);return v||Fe("Missing valid scale for legend."),d=BEt(t,e.scaleType(v)),h={orient:Me("orient",t,n),title:t.title!=null,type:d},p=Ct(e.add(Ql(null,[h]))),i=X2(VEt(t,n),i,A$),l={enter:{x:{value:0},y:{value:0}}},m=Ct(e.add(uCt(c={type:d,scale:e.scaleRef(v),count:e.objectProperty(t.tickCount),values:e.objectProperty(t.values),formatSpecifier:e.property(t.format)}))),d===ME?(f=[bEt(t,v,n,r.gradient),BK(t,n,r.labels,m)],c.count=c.count||e.signalRef("max(2,2*floor(("+fp(N$(t,n))+")/100))")):d===OP?f=[xEt(t,v,n,r.gradient,m),BK(t,n,r.labels,m)]:(u=CEt(t,n),f=[SEt(t,n,r,m,fp(u.columns))],c.size=WEt(t,e,f[0].marks)),f=[qk(cEt,null,null,p,a,l,f,u)],h.title&&f.push(EEt(t,n,r.title,p)),g=qk(lEt,o,s,p,a,i,f),t.zindex&&(g.zindex=t.zindex),I$(g,e)}function BEt(t,e){var n=t.type||LK;return!t.type&&UEt(t)===1&&(t.fill||t.stroke)&&(n=kCt(e)?ME:OK(e)?OP:LK),n!==ME?n:OK(e)?OP:ME}function UEt(t){return nU.reduce(function(e,n){return e+(t[n]?1:0)},0)}function VEt(t,e){var n={enter:{},update:{}};return Ye(n,"offset",Me("offset",t,e)),Ye(n,"padding",Me("padding",t,e)),Ye(n,"titlePadding",Me("titlePadding",t,e)),Ye(n,"fill",Me("fillColor",t,e)),Ye(n,"stroke",Me("strokeColor",t,e)),Ye(n,"strokeWidth",Me("strokeWidth",t,e)),Ye(n,"cornerRadius",Me("cornerRadius",t,e)),Ye(n,"strokeDash",e.strokeDash),n}function WEt(t,e,n){var r,i,s,a;return s=FP("strokeWidth",n[0].encode),i=t.size?'scale("'+t.size+'",datum)':FP("size",n[0].encode),r=GEt(n[1].encode,e,k$),a="max(ceil(sqrt("+fp(i)+")+"+fp(s)+"),"+fp(r)+")",Wu(a,e)}function GEt(t,e,n){return FP("fontSize",t)||vEt("fontSize",e,n)}function Ome(t,e,n){return'item.anchor==="'+WCt+'"?'+t+':item.anchor==="'+GCt+'"?'+e+":"+n}var HEt=Ome(at(Tm),at(eU),at(UCt)),jEt=Ome('+(item.orient==="'+eU+'")','+(item.orient!=="'+Tm+'")',"0.5");function qEt(t,e){t=Bt(t)?{text:t}:t;var n=e.config.title,r=On({},t.encode),i,s,a;return i={orient:Me("orient",t,n)},s=Ct(e.add(Ql(null,[i]))),r.name=t.name,r.interactive=t.interactive,a=XEt(t,n,r,s),t.zindex&&(a.zindex=t.zindex),I$(a,e)}function XEt(t,e,n,r){var i={value:0},s=t.text,a=Me("orient",t,e),o=Me("anchor",t,e),l=a===Tm||a===hs?-1:1,u=a===hs||a===Wc,c={group:u?"width":"height"},f,d,h,p,m;return p={field:c,mult:{signal:jEt}},m=l<0?i:u?{field:{group:"height"}}:{field:{group:"width"}},f={enter:d={opacity:i},update:h={opacity:{value:1},text:qr(s),anchor:qr(o),orient:qr(a),extent:{field:c},align:{signal:HEt}},exit:{opacity:i}},u?(h.x=p,h.y=m,d.angle=i,d.baseline={value:a===hs?Wc:hs}):(h.x=m,h.y=p,d.angle={value:l*90},d.baseline={value:Wc}),Ye(f,"align",Me("align",t,e),"update"),Ye(f,"angle",Me("angle",t,e)),Ye(f,"baseline",Me("baseline",t,e)),Ye(f,"fill",Me("color",t,e)),Ye(f,"font",Me("font",t,e)),Ye(f,"fontSize",Me("fontSize",t,e)),Ye(f,"fontWeight",Me("fontWeight",t,e)),Ye(f,"frame",Me("frame",t,e)),Ye(f,"limit",Me("limit",t,e)),Ye(f,"offset",Me("offset",t,e)||0),il(Zy,pEt,t.style||qCt,null,r,f,n)}function YEt(t,e){var n=[];t.transform&&t.transform.forEach(function(r){n.push(lU(r,e))}),t.on&&t.on.forEach(function(r){Rme(r,e,t.name)}),e.addDataPipeline(t.name,KEt(t,e,n))}function KEt(t,e,n){var r=[],i=null,s=!1,a=!1,o,l,u,c,f;for(t.values?r.push(i=i1({$ingest:t.values,$format:t.format})):t.url?(i=IP(t.url)||IP(t.format)?{$load:Ct(e.add(ZEt(e,t)))}:{$request:t.url,$format:t.format},r.push(i=i1(i))):t.source&&(i=o=qt(t.source).map(function(d){return Ct(e.getData(d).output)}),r.push(null)),l=0,u=n.length;l<u;++l)c=n[l],f=c.metadata,!i&&!f.source&&r.push(i=i1()),r.push(c),f.generates&&(a=!0),f.modifies&&!a&&(s=!0),f.source?i=c:f.changes&&(i=null);return o&&(u=o.length-1,r[0]=yCt({derive:s,pulse:u?o:o[0]}),(s||u)&&r.splice(1,0,i1())),i||r.push(i1()),r.push(Em({})),r}function i1(t){var e=Ql({},t);return e.metadata={source:!0},e}function ZEt(t,e){return cCt({url:t.property(e.url),format:t.objectProperty(e.format)})}function JEt(t,e){var n=e.config,r=t.orient,i=r===hs||r===Wc?n.axisX:n.axisY,s=n["axis"+r[0].toUpperCase()+r.slice(1)],a=e.scaleType(t.scale)==="band"&&n.axisBand;return i||s||a?On({},n.axis,i,s,a):n.axis}function QEt(t,e,n,r){var i=t.orient,s={value:0},a,o,l,u,c,f;return a={enter:o={opacity:s},update:l={opacity:{value:1}},exit:{opacity:s}},Ye(a,"stroke",Me("domainColor",t,e)),Ye(a,"strokeWidth",Me("domainWidth",t,e)),Ye(a,"strokeOpacity",Me("domainOpacity",t,e)),i===hs||i===Wc?(u="x",f="y"):(u="y",f="x"),c=u+"2",o[f]=s,l[u]=o[u]=qK(t,0),l[c]=o[c]=qK(t,1),il(oU,rEt,null,null,r,a,n)}function qK(t,e){return{scale:t.scale,range:e}}function eTt(t,e,n,r){var i=t.orient,s=t.gridScale,a=i===Tm||i===hs?1:-1,o=a*t.offset||0,l={value:0},u,c,f,d,h,p,m,g,v;return u={enter:c={opacity:l},update:d={opacity:{value:1}},exit:f={opacity:l}},Ye(u,"stroke",Me("gridColor",t,e)),Ye(u,"strokeDash",Me("gridDash",t,e)),Ye(u,"strokeOpacity",Me("gridOpacity",t,e)),Ye(u,"strokeWidth",Me("gridWidth",t,e)),h={scale:t.scale,field:qo,band:Me("bandPosition",t,e),round:Me("tickRound",t,e),extra:Me("tickExtra",t,e),offset:Me("tickOffset",t,e)},i===hs||i===Wc?(p="x",m="y",v="height"):(p="y",m="x",v="width"),g=m+"2",d[p]=c[p]=f[p]=h,s?(c[m]={scale:s,range:0,mult:a,offset:o},d[g]=c[g]={scale:s,range:1,mult:a,offset:o}):(c[m]={value:o},d[g]=c[g]={signal:v,mult:a,offset:o}),il(oU,iEt,null,qo,r,u,n)}function tTt(t,e,n,r,i){var s=t.orient,a=s===Tm||s===hs?-1:1,o={value:0},l,u,c,f,d,h;return l={enter:u={opacity:o},update:f={opacity:{value:1}},exit:c={opacity:o}},Ye(l,"stroke",Me("tickColor",t,e)),Ye(l,"strokeOpacity",Me("tickOpacity",t,e)),Ye(l,"strokeWidth",Me("tickWidth",t,e)),d=qr(i),d.mult=a,h={scale:t.scale,field:qo,band:Me("bandPosition",t,e),round:Me("tickRound",t,e),extra:Me("tickExtra",t,e),offset:Me("tickOffset",t,e)},s===hs||s===Wc?(f.y=u.y=o,f.y2=u.y2=d,f.x=u.x=c.x=h):(f.x=u.x=o,f.x2=u.x2=d,f.y=u.y=c.y=h),il(oU,aEt,null,qo,r,l,n)}function JR(t,e,n,r,i){return{signal:'flush(range("'+t+'"), scale("'+t+'", datum.value), '+e+","+n+","+r+","+i+")"}}function nTt(t,e,n,r,i){var s=t.orient,a=s===Tm||s===hs?-1:1,o=s===hs||s===Wc,l=t.scale,u=fp(Me("labelFlush",t,e)),c=fp(Me("labelFlushOffset",t,e)),f=u===0||!!u,d=Me("labelAlign",t,e),h=Me("labelBaseline",t,e),p={value:0},m,g,v,y,b,x,w,S,C;return v=qr(i),v.mult=a,v.offset=qr(Me("labelPadding",t,e)||0),v.offset.mult=a,y={scale:l,field:qo,band:.5,offset:Me("tickOffset",t,e)},o?(b=d||(f?JR(l,u,'"left"','"right"','"center"'):"center"),x=h||(s===hs?"bottom":"top"),w=!d):(b=d||(s===eU?"left":"right"),x=h||(f?JR(l,u,'"top"','"bottom"','"middle"'):"middle"),w=!h),w=w&&f&&c?JR(l,u,"-"+c,c,0):null,m={enter:g={opacity:p,x:o?y:v,y:o?v:y},update:{opacity:{value:1},text:{field:tU},x:g.x,y:g.y},exit:{opacity:p,x:g.x,y:g.y}},Ye(m,o?"dx":"dy",w),Ye(m,"align",b),Ye(m,"baseline",x),Ye(m,"angle",Me("labelAngle",t,e)),Ye(m,"fill",Me("labelColor",t,e)),Ye(m,"font",Me("labelFont",t,e)),Ye(m,"fontSize",Me("labelFontSize",t,e)),Ye(m,"fontWeight",Me("labelFontWeight",t,e)),Ye(m,"limit",Me("labelLimit",t,e)),Ye(m,"fillOpacity",Me("labelOpacity",t,e)),S=Me("labelBound",t,e),C=Me("labelOverlap",t,e),t=il(Zy,sEt,k$,qo,r,m,n),(C||S)&&(t.overlap={method:C,order:"datum.index",bound:S?{scale:l,orient:s,tolerance:S}:null}),t}function rTt(t,e,n,r){var i=t.orient,s=i===Tm||i===hs?-1:1,a=i===hs||i===Wc,o={value:0},l,u,c,f;return l={enter:u={opacity:o},update:c={opacity:{value:1},text:qr(t.title)},exit:{opacity:o}},f={scale:t.scale,range:.5},a?(c.x=f,u.angle={value:0},u.baseline={value:i===hs?"bottom":"top"}):(c.y=f,u.angle={value:s*90},u.baseline={value:"bottom"}),Ye(l,"align",Me("titleAlign",t,e)),Ye(l,"angle",Me("titleAngle",t,e)),Ye(l,"baseline",Me("titleBaseline",t,e)),Ye(l,"fill",Me("titleColor",t,e)),Ye(l,"font",Me("titleFont",t,e)),Ye(l,"fontSize",Me("titleFontSize",t,e)),Ye(l,"fontWeight",Me("titleFontWeight",t,e)),Ye(l,"limit",Me("titleLimit",t,e)),Ye(l,"fillOpacity",Me("titleOpacity",t,e)),!Ye(l,"x",Me("titleX",t,e),"update")&&a&&!Og("x",n)&&(l.enter.auto={value:!0}),!Ye(l,"y",Me("titleY",t,e),"update")&&!a&&!Og("y",n)&&(l.enter.auto={value:!0}),il(Zy,oEt,Sme,null,r,l,n)}function iTt(t,e){var n=JEt(t,e),r=t.encode||{},i=r.axis||{},s=i.name||void 0,a=i.interactive,o=i.style,l,u,c,f,d,h;return l={orient:t.orient,ticks:!!Me("ticks",t,n),labels:!!Me("labels",t,n),grid:!!Me("grid",t,n),domain:!!Me("domain",t,n),title:!!Ol(t.title,!1)},u=Ct(e.add(Ql({},[l]))),i=X2({update:{range:{signal:'abs(span(range("'+t.scale+'")))'},offset:qr(Ol(t.offset,0)),position:qr(Ol(t.position,0)),titlePadding:qr(Me("titlePadding",t,n)),minExtent:qr(Me("minExtent",t,n)),maxExtent:qr(Me("maxExtent",t,n))}},r.axis,A$),c=Ct(e.add(rCt({scale:e.scaleRef(t.scale),extra:e.property(Me("tickExtra",t,n)),count:e.objectProperty(t.tickCount),values:e.objectProperty(t.values),formatSpecifier:e.property(t.format)}))),h=[],l.grid&&h.push(eTt(t,n,r.grid,c)),l.ticks&&(f=Me("tickSize",t,n),h.push(tTt(t,n,r.ticks,c,f))),l.labels&&(f=l.ticks?f:0,h.push(nTt(t,n,r.labels,c,f))),l.domain&&h.push(QEt(t,n,r.domain,u)),l.title&&h.push(rTt(t,n,r.title,u)),d=qk(nEt,o,s,u,a,i,h),t.zindex&&(d.zindex=t.zindex),I$(d,e)}function D$(t,e,n){var r=qt(t.signals),i=qt(t.scales);return n||r.forEach(function(s){Ipe(s,e)}),qt(t.projections).forEach(function(s){BCt(s,e)}),i.forEach(function(s){ACt(s,e)}),qt(t.data).forEach(function(s){YEt(s,e)}),i.forEach(function(s){MCt(s,e)}),r.forEach(function(s){nCt(s,e)}),qt(t.axes).forEach(function(s){iTt(s,e)}),qt(t.marks).forEach(function(s){I$(s,e)}),qt(t.legends).forEach(function(s){zEt(s,e)}),t.title&&qEt(t.title,e),e.parseLambdas(),e}var sTt=dn(["width","height","padding","autosize"]);function aTt(t,e){var n=e.config,r,i,s,a,o;return e.background=t.background||n.background,e.eventConfig=n.events,o=Ct(e.root=e.add(C$())),e.addSignal("width",t.width||0),e.addSignal("height",t.height||0),e.addSignal("padding",u_t(t.padding,n)),e.addSignal("autosize",l_t(t.autosize,n)),qt(t.signals).forEach(function(l){sTt[l.name]||Ipe(l,e)}),i=e.add(Ql()),s=X2({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},t.encode),s=e.add(pme(Mme(s,$$,iU,t.style,e,{pulse:Ct(i)}))),a=e.add(vme({layout:e.objectProperty(t.layout),legendMargin:n.legendMargin,autosize:e.signalRef("autosize"),mark:o,pulse:Ct(s)})),e.operators.pop(),e.pushState(Ct(s),Ct(a),null),D$(t,e,!0),e.operators.push(a),r=e.add(dme({mark:o,pulse:Ct(a)})),r=e.add(gme({pulse:Ct(r)})),r=e.add(Em({pulse:Ct(r)})),e.addData("root",new Hp(e,i,i,r)),e}function Fme(t){this.config=t,this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.background=null,this.eventConfig=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Lme(t){this.config=t.config,this.field=Object.create(t.field),this.signals=Object.create(t.signals),this.lambdas=Object.create(t.lambdas),this.scales=Object.create(t.scales),this.events=Object.create(t.events),this.data=Object.create(t.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++t._nextsub[0],this._nextsub=t._nextsub,this._parent=t._parent.slice(),this._encode=t._encode.slice(),this._lookup=t._lookup.slice(),this._markpath=t._markpath}var sn=Fme.prototype=Lme.prototype;sn.fork=function(){return new Lme(this)};sn.isSubscope=function(){return this._subid>0};sn.toRuntime=function(){return this.finish(),{background:this.background,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig}};sn.id=function(){return(this._subid?this._subid+":":0)+this._id++};sn.add=function(t){return this.operators.push(t),t.id=this.id(),t.refs&&(t.refs.forEach(function(e){e.$ref=t.id}),t.refs=null),t};sn.proxy=function(t){var e=t instanceof K9?Ct(t):t;return this.add(vCt({value:e}))};sn.addStream=function(t){return this.streams.push(t),t.id=this.id(),t};sn.addUpdate=function(t){return this.updates.push(t),t};sn.finish=function(){var t,e;this.root&&(this.root.root=!0);for(t in this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;function n(i,s,a){var o,l;i&&(o=i.data||(i.data={}),l=o[s]||(o[s]=[]),l.push(a))}for(t in this.data){e=this.data[t],n(e.input,t,"input"),n(e.output,t,"output"),n(e.values,t,"values");for(var r in e.index)n(e.index[r],t,"index:"+r)}return this};sn.pushState=function(t,e,n){this._encode.push(Ct(this.add(Em({pulse:t})))),this._parent.push(e),this._lookup.push(n?Ct(this.proxy(n)):null),this._markpath.push(-1)};sn.popState=function(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()};sn.parent=function(){return Cn(this._parent)};sn.encode=function(){return Cn(this._encode)};sn.lookup=function(){return Cn(this._lookup)};sn.markpath=function(){var t=this._markpath;return++t[t.length-1]};sn.fieldRef=function(t,e){if(Bt(t))return hw(t,e);t.signal||Fe("Unsupported field reference: "+at(t));var n=t.signal,r=this.field[n],i;return r||(i={name:this.signalRef(n)},e&&(i.as=e),this.field[n]=r=Ct(this.add(oCt(i)))),r};sn.compareRef=function(t,e){function n(o){return Gp(o)?(i=!0,r.signalRef(o.signal)):o}var r=this,i=!1,s=qt(t.field).map(n),a=qt(t.order).map(n);return e&&s.push(rme),i?Ct(this.add(hme({fields:s,orders:a}))):ime(s,a)};sn.keyRef=function(t,e){function n(s){return Gp(s)?(i=!0,Ct(r[s.signal])):s}var r=this.signals,i=!1;return t=qt(t).map(n),i?Ct(this.add(lCt({fields:t,flat:e}))):OSt(t,e)};sn.sortRef=function(t){if(!t)return t;var e=[Z9(t.op,t.field),rme],n=t.order||FSt;return n.signal?Ct(this.add(hme({fields:e,orders:[n=this.signalRef(n.signal),n]}))):ime(e,[n,n])};sn.event=function(t,e){var n=t+":"+e;if(!this.events[n]){var r=this.id();this.streams.push({id:r,source:t,type:e}),this.events[n]=r}return this.events[n]};sn.addSignal=function(t,e){this.signals.hasOwnProperty(t)&&Fe("Duplicate signal name: "+at(t));var n=e instanceof K9?e:this.add(C$(e));return this.signals[t]=n};sn.getSignal=function(t){return this.signals[t]||Fe("Unrecognized signal name: "+at(t)),this.signals[t]};sn.signalRef=function(t){return this.signals[t]?Ct(this.signals[t]):(this.lambdas.hasOwnProperty(t)||(this.lambdas[t]=this.add(C$(null))),Ct(this.lambdas[t]))};sn.parseLambdas=function(){for(var t=Object.keys(this.lambdas),e=0,n=t.length;e<n;++e){var r=t[e],i=Wu(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}};sn.property=function(t){return t&&t.signal?this.signalRef(t.signal):t};sn.objectProperty=function(t){return!t||!Gt(t)?t:this.signalRef(t.signal||uU(t))};function uU(t){return(je(t)?oTt:lTt)(t)}function oTt(t){for(var e="[",n=0,r=t.length,i;n<r;++n)i=t[n],e+=(n>0?",":"")+(Gt(i)?i.signal||uU(i):at(i));return e+"]"}function lTt(t){var e="{",n=0,r,i;for(r in t)i=t[r],e+=(++n>1?",":"")+at(r)+":"+(Gt(i)?i.signal||uU(i):at(i));return e+"}"}sn.exprRef=function(t,e){var n={expr:Wu(t,this)};return e&&(n.expr.$name=e),Ct(this.add(sCt(n)))};sn.addBinding=function(t,e){this.bindings||Fe("Nested signals do not support binding: "+at(t)),this.bindings.push(On({signal:t},e))};sn.addScaleProj=function(t,e){this.scales.hasOwnProperty(t)&&Fe("Duplicate scale or projection name: "+at(t)),this.scales[t]=this.add(e)};sn.addScale=function(t,e){this.addScaleProj(t,bCt(e))};sn.addProjection=function(t,e){this.addScaleProj(t,gCt(e))};sn.getScale=function(t){return this.scales[t]||Fe("Unrecognized scale name: "+at(t)),this.scales[t]};sn.projectionRef=sn.scaleRef=function(t){return Ct(this.getScale(t))};sn.projectionType=sn.scaleType=function(t){return this.getScale(t).params.type};sn.addData=function(t,e){return this.data.hasOwnProperty(t)&&Fe("Duplicate data set name: "+at(t)),this.data[t]=e};sn.getData=function(t){return this.data[t]||Fe("Undefined data set name: "+at(t)),this.data[t]};sn.addDataPipeline=function(t,e){return this.data.hasOwnProperty(t)&&Fe("Duplicate data set name: "+at(t)),this.addData(t,Hp.fromEntries(this,e))};function uTt(t){var e=cTt();return(t||[]).forEach(function(n){var r,i,s;if(n)for(r in n)if(r==="style"){s=e.style||(e.style={});for(r in n.style)s[r]=On(s[r]||{},n.style[r])}else i=n[r],e[r]=Gt(i)&&!je(i)?On(Gt(e[r])?e[r]:{},i):i}),e}var jC="sans-serif",QR=30,qC=2,yh="#4c78a8",s1="#000",eO="#888",tO="#ddd";function cTt(){return{padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:yh},area:{fill:yh},image:null,line:{stroke:yh,strokeWidth:qC},path:{stroke:yh},rect:{fill:yh},rule:{stroke:s1},shape:{stroke:yh},symbol:{fill:yh,size:64},text:{fill:s1,font:jC,fontSize:11},style:{"guide-label":{fill:s1,font:jC,fontSize:10},"guide-title":{fill:s1,font:jC,fontSize:11,fontWeight:"bold"},"group-title":{fill:s1,font:jC,fontSize:13,fontWeight:"bold"},point:{size:QR,strokeWidth:qC,shape:"circle"},circle:{size:QR,strokeWidth:qC},square:{size:QR,strokeWidth:qC,shape:"square"},cell:{fill:"transparent",stroke:tO}},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:eO,grid:!1,gridWidth:1,gridColor:tO,labels:!0,labelAngle:0,labelLimit:180,labelPadding:2,ticks:!0,tickColor:eO,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titleAlign:"center",titlePadding:4},axisBand:{tickOffset:-1},legend:{orient:"right",offset:18,padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:tO,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:eO,titleAlign:"left",titleBaseline:"top",titleLimit:180,titlePadding:5},title:{orient:"top",anchor:"middle",offset:4},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues",extent:[.2,1]},heatmap:{scheme:"viridis"},ramp:{scheme:"blues",extent:[.2,1]},diverging:{scheme:"blueorange"},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function fTt(t,e){return Gt(t)||Fe("Input Vega specification must be an object."),aTt(t,new Fme(uTt([e,t.config]))).toRuntime()}function Z2(t,e,n){e[e.length-1]!==";"&&(e="return("+e+");");var r=Function.apply(null,t.concat(e));return n&&n.functions?r.bind(n.functions):r}function dTt(t,e){return Z2(["_"],t,e)}function hTt(t,e){return Z2(["datum","_"],t,e)}function Pme(t,e){return Z2(["event"],t,e)}function pTt(t,e){return Z2(["_","event"],t,e)}function mTt(t,e){return Z2(["item","_"],t,e)}function cU(t,e,n){n=n||{};var r,i;for(r in t)i=t[r],n[r]=je(i)?i.map(function(s){return XK(s,e,n)}):XK(i,e,n);return n}function XK(t,e,n){if(!t||!Gt(t))return t;for(var r=0,i=YK.length,s;r<i;++r)if(s=YK[r],t.hasOwnProperty(s.key))return s.parse(t,e,n);return t}var YK=[{key:"$ref",parse:gTt},{key:"$key",parse:yTt},{key:"$expr",parse:vTt},{key:"$field",parse:bTt},{key:"$encode",parse:wTt},{key:"$compare",parse:xTt},{key:"$context",parse:_Tt},{key:"$subflow",parse:STt},{key:"$tupleid",parse:CTt}];function gTt(t,e){return e.get(t.$ref)||Fe("Operator not defined: "+t.$ref)}function vTt(t,e,n){t.$params&&cU(t.$params,e,n);var r="e:"+t.$expr+"_"+t.$name;return e.fn[r]||(e.fn[r]=Ia(hTt(t.$expr,e),t.$fields,t.$name))}function yTt(t,e){var n="k:"+t.$key+"_"+!!t.$flat;return e.fn[n]||(e.fn[n]=NB(t.$key,t.$flat))}function bTt(t,e){if(!t.$field)return null;var n="f:"+t.$field+"_"+t.$name;return e.fn[n]||(e.fn[n]=oo(t.$field,t.$name))}function xTt(t,e){var n="c:"+t.$compare+"_"+t.$order,r=qt(t.$compare).map(function(i){return i&&i.$tupleid?Nt:i});return e.fn[n]||(e.fn[n]=kB(r,t.$order))}function wTt(t,e){var n=t.$encode,r={},i,s;for(i in n)s=n[i],r[i]=Ia(mTt(s.$expr,e),s.$fields),r[i].output=s.$output;return r}function _Tt(t,e){return e}function STt(t,e){var n=t.$subflow;return function(r,i,s){var a=dU(n,e.fork()),o=a.get(n.operators[0].id),l=a.signals.parent;return l&&l.set(s),o}}function CTt(){return Nt}function fU(t){return(t+"").toLowerCase()}function ETt(t){return fU(t)==="operator"}function TTt(t){return fU(t)==="collect"}function kTt(t,e){ETt(t.type)||!t.type?e.operator(t,t.update?dTt(t.update,e):null):e.transform(t,t.type)}function ATt(t,e){if(t.params){var n=e.get(t.id);n||Fe("Invalid operator id: "+t.id),e.dataflow.connect(n,n.parameters(cU(t.params,e),t.react,t.initonly))}}function MTt(t,e){var n=t.filter!=null?Pme(t.filter,e):void 0,r=t.stream!=null?e.get(t.stream):void 0,i;t.source?r=e.events(t.source,t.type,n):t.merge&&(i=t.merge.map(e.get.bind(e)),r=i[0].merge.apply(i[0],i.slice(1))),t.between&&(i=t.between.map(e.get.bind(e)),r=r.between(i[0],i[1])),t.filter&&(r=r.filter(n)),t.throttle!=null&&(r=r.throttle(+t.throttle)),t.debounce!=null&&(r=r.debounce(+t.debounce)),r==null&&Fe("Invalid stream definition: "+JSON.stringify(t)),t.consume&&r.consume(!0),e.stream(t,r)}function NTt(t,e){var n=Gt(n=t.source)?n.$ref:n,r=e.get(n),i=null,s=t.update,a=void 0;r||Fe("Source not defined: "+t.source),t.target&&t.target.$expr?i=Pme(t.target.$expr,e):i=e.get(t.target),s&&s.$expr&&(s.$params&&(a=cU(s.$params,e)),s=pTt(s.$expr,e)),e.update(t,r,i,s,a)}function dU(t,e){var n=t.operators||[];return t.background&&(e.background=t.background),t.eventConfig&&(e.eventConfig=t.eventConfig),n.forEach(function(r){kTt(r,e)}),n.forEach(function(r){ATt(r,e)}),(t.streams||[]).forEach(function(r){MTt(r,e)}),(t.updates||[]).forEach(function(r){NTt(r,e)}),e.resolve()}var $Tt={skip:!0};function ITt(t){var e=this,n={};if(t.signals){var r=n.signals={};Object.keys(e.signals).forEach(function(s){var a=e.signals[s];t.signals(s,a)&&(r[s]=a.value)})}if(t.data){var i=n.data={};Object.keys(e.data).forEach(function(s){var a=e.data[s];t.data(s,a)&&(i[s]=a.input.value)})}return e.subcontext&&t.recurse!==!1&&(n.subcontext=e.subcontext.map(function(s){return s.getState(t)})),n}function DTt(t){var e=this,n=e.dataflow,r=t.data,i=t.signals;Object.keys(i||{}).forEach(function(s){n.update(e.signals[s],i[s],$Tt)}),Object.keys(r||{}).forEach(function(s){n.pulse(e.data[s].input,n.changeset().remove(jd).insert(r[s]))}),(t.subcontext||[]).forEach(function(s,a){var o=e.subcontext[a];o&&o.setState(s)})}function zme(t,e,n){return new Bme(t,e,n)}function Bme(t,e,n){this.dataflow=t,this.transforms=e,this.events=t.events.bind(t),this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function KK(t){this.dataflow=t.dataflow,this.transforms=t.transforms,this.functions=t.functions,this.events=t.events,this.signals=Object.create(t.signals),this.scales=Object.create(t.scales),this.nodes=Object.create(t.nodes),this.data=Object.create(t.data),this.fn=Object.create(t.fn),t.functions&&(this.functions=Object.create(t.functions),this.functions.context=this)}Bme.prototype=KK.prototype={fork:function(){var t=new KK(this);return(this.subcontext||(this.subcontext=[])).push(t),t},get:function(t){return this.nodes[t]},set:function(t,e){return this.nodes[t]=e},add:function(t,e){var n=this,r=n.dataflow,i;if(n.set(t.id,e),TTt(t.type)&&(i=t.value)&&(i.$ingest?r.ingest(e,i.$ingest,i.$format):i.$load?n.get(i.$load.$ref).target=e:i.$request?r.request(e,i.$request,i.$format):r.pulse(e,r.changeset().insert(i))),t.root&&(n.root=e),t.parent){var s=n.get(t.parent.$ref);s?(r.connect(s,[e]),e.targets().add(s)):(n.unresolved=n.unresolved||[]).push(function(){s=n.get(t.parent.$ref),r.connect(s,[e]),e.targets().add(s)})}if(t.signal&&(n.signals[t.signal]=e),t.scale&&(n.scales[t.scale]=e),t.data)for(var a in t.data)i=n.data[a]||(n.data[a]={}),t.data[a].forEach(function(o){i[o]=e})},resolve:function(){return(this.unresolved||[]).forEach(function(t){t()}),delete this.unresolved,this},operator:function(t,e){this.add(t,this.dataflow.add(t.value,e))},transform:function(t,e){this.add(t,this.dataflow.add(this.transforms[fU(e)]))},stream:function(t,e){this.set(t.id,e)},update:function(t,e,n,r,i){this.dataflow.on(e,n,r,i,t.options)},getState:ITt,setState:DTt};function RTt(t,e,n){var r=n||Wk;return dU(e,zme(t,F0,r))}function OTt(t){var e=this._runtime.scales;return e.hasOwnProperty(t)||Fe("Unrecognized scale or projection: "+t),e[t].value}var Ume="width",Vme="height",hU="padding",ZK={skip:!0};function Wme(t,e){var n=t.autosize(),r=t.padding();return e-(n&&n.contains===hU?r.left+r.right:0)}function Gme(t,e){var n=t.autosize(),r=t.padding();return e-(n&&n.contains===hU?r.top+r.bottom:0)}function FTt(t){var e=t._signals,n=e[Ume],r=e[Vme],i=e[hU];function s(){t._autosize=t._resize=1}t._resizeWidth=t.add(null,function(o){t._width=o.size,t._viewWidth=Wme(t,o.size),s()},{size:n}),t._resizeHeight=t.add(null,function(o){t._height=o.size,t._viewHeight=Gme(t,o.size),s()},{size:r});var a=t.add(null,s,{pad:i});t._resizeWidth.rank=n.rank+1,t._resizeHeight.rank=r.rank+1,a.rank=i.rank+1}function LTt(t,e,n,r,i,s){this.runAfter(function(a){var o=0;a._autosize=0,a.width()!==n&&(o=1,a.signal(Ume,n,ZK),a._resizeWidth.skip(!0)),a.height()!==r&&(o=1,a.signal(Vme,r,ZK),a._resizeHeight.skip(!0)),a._viewWidth!==t&&(a._resize=1,a._viewWidth=t),a._viewHeight!==e&&(a._resize=1,a._viewHeight=e),(a._origin[0]!==i[0]||a._origin[1]!==i[1])&&(a._resize=1,a._origin=i),o&&a.run("enter"),s&&a.runAfter(function(){a.resize()})},!1,1)}function PTt(t){return this._runtime.getState(t||{data:zTt,signals:BTt,recurse:!0})}function zTt(t,e){return e.modified&&je(e.input.value)&&t.indexOf("_:vega:_")}function BTt(t,e){return!(t==="parent"||e instanceof F0.proxy)}function UTt(t){var e=this;return e.runAfter(function(){e._trigger=!1,e._runtime.setState(t),e.run().runAfter(function(){e._trigger=!0})}),this}function VTt(t,e){function n(r){t({timestamp:Date.now(),elapsed:r})}this._timers.push(w1t(n,e))}function WTt(t,e,n,r){var i=t.element();i&&i.setAttribute("title",GTt(r))}function GTt(t){return t==null?"":je(t)?Hme(t):Gt(t)&&!ya(t)?HTt(t):t+""}function HTt(t){return Object.keys(t).map(function(e){var n=t[e];return e+": "+(je(n)?Hme(n):jme(n))}).join(`
`)}function Hme(t){return"["+t.map(jme).join(", ")+"]"}function jme(t){return je(t)?"[…]":Gt(t)&&!ya(t)?"{…}":t}function qme(t,e){var n=this;e=e||{},Wy.call(n),n.loader(e.loader||n._loader),n.logLevel(e.logLevel||0),n._el=null,n._renderType=e.renderer||ed.Canvas,n._scenegraph=new q8;var r=n._scenegraph.root;n._renderer=null,n._tooltip=e.tooltip||WTt,n._redraw=!0,n._handler=new A2().scene(r),n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[];var i=RTt(n,t,e.functions);n._runtime=i,n._signals=i.signals,n._bind=(t.bindings||[]).map(function(s){return{state:null,param:On({},s)}}),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._background=i.background||null,n._eventConfig=Bwt(i.eventConfig),n._width=n.width(),n._height=n.height(),n._viewWidth=Wme(n,n._width),n._viewHeight=Gme(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,FTt(n),Mwt(n)}var Ht=tt(qme,Wy);Ht.run=function(t){if(Wy.prototype.run.call(this,t),this._pending)this.resize();else if(this._redraw||this._resize)try{this.render()}catch(e){this.error(e)}return this};Ht.render=function(){return this._renderer&&(this._resize&&(this._resize=0,Rwt(this)),this._renderer.render(this._scenegraph.root)),this._redraw=!1,this};Ht.dirty=function(t){this._redraw=!0,this._renderer&&this._renderer.dirty(t)};Ht.container=function(){return this._el};Ht.scenegraph=function(){return this._scenegraph};Ht.origin=function(){return this._origin.slice()};function R$(t,e){return t._signals.hasOwnProperty(e)?t._signals[e]:Fe("Unrecognized signal name: "+at(e))}Ht.signal=function(t,e,n){var r=R$(this,t);return arguments.length===1?r.value:this.update(r,e,n)};Ht.background=function(t){return arguments.length?(this._background=t,this._resize=1,this):this._background};Ht.width=function(t){return arguments.length?this.signal("width",t):this.signal("width")};Ht.height=function(t){return arguments.length?this.signal("height",t):this.signal("height")};Ht.padding=function(t){return arguments.length?this.signal("padding",t):this.signal("padding")};Ht.autosize=function(t){return arguments.length?this.signal("autosize",t):this.signal("autosize")};Ht.renderer=function(t){return arguments.length?(LN(t)||Fe("Unrecognized renderer type: "+t),t!==this._renderType&&(this._renderType=t,this._resetRenderer()),this):this._renderType};Ht.tooltip=function(t){return arguments.length?(t!==this._tooltip&&(this._tooltip=t,this._resetRenderer()),this):this._tooltip};Ht.loader=function(t){return arguments.length?(t!==this._loader&&(Wy.prototype.loader.call(this,t),this._resetRenderer()),this):this._loader};Ht.resize=function(){return this._autosize=1,this.touch(R$(this,"autosize"))};Ht._resetRenderer=function(){this._renderer&&(this._renderer=null,this.initialize(this._el))};Ht._resizeView=LTt;Ht.addEventListener=function(t,e,n){var r=e;return n&&n.trap===!1||(r=V9(this,e),r.raw=e),this._handler.on(t,r),this};Ht.removeEventListener=function(t,e){for(var n=this._handler.handlers(t),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,t===s&&(e===i||e===i.raw)){this._handler.off(s,i);break}return this};Ht.addResizeListener=function(t){var e=this._resizeListeners;return e.indexOf(t)<0&&e.push(t),this};Ht.removeResizeListener=function(t){var e=this._resizeListeners,n=e.indexOf(t);return n>=0&&e.splice(n,1),this};function Xme(t,e){var n=t._targets||[],r=n.filter(function(i){var s=i._update;return s&&s.handler===e});return r.length?r[0]:null}function Yme(t,e,n,r){var i=Xme(n,r);return i||(i=V9(this,function(){r(e,n.value)}),i.handler=r,t.on(n,null,i)),t}function Kme(t,e,n){var r=Xme(e,n);return r&&e._targets.remove(r),t}Ht.addSignalListener=function(t,e){return Yme(this,t,R$(this,t),e)};Ht.removeSignalListener=function(t,e){return Kme(this,R$(this,t),e)};Ht.addDataListener=function(t,e){return Yme(this,t,g$(this,t).values,e)};Ht.removeDataListener=function(t,e){return Kme(this,g$(this,t).values,e)};Ht.preventDefault=function(t){return arguments.length?(this._preventDefault=t,this):this._preventDefault};Ht.timer=VTt;Ht.events=Vwt;Ht.finalize=Gwt;Ht.hover=Wwt;Ht.data=$wt;Ht.change=U9;Ht.insert=Iwt;Ht.remove=Dwt;Ht.scale=OTt;Ht.initialize=r_t;Ht.toImageURL=i_t;Ht.toCanvas=a_t;Ht.toSVG=o_t;Ht.getState=PTt;Ht.setState=UTt;On(F0,mut,Ndt,Xmt,Hbt,F1t,zxt,owt,bwt,kwt);const jTt=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Xs,CanvasHandler:A2,CanvasRenderer:qT,Dataflow:Wy,Debug:_B,Error:xB,EventStream:uN,Gradient:Kle,GroupItem:_N,Handler:Zd,Info:NT,Item:wN,Marks:tc,MultiPulse:GB,None:Fae,Operator:Zn,Parameters:lN,Pulse:Yd,RenderType:ed,Renderer:Xl,ResourceLoader:M8,SVGHandler:Y8,SVGRenderer:Z8,SVGStringRenderer:Q8,Scenegraph:q8,Transform:Ae,View:qme,Warn:wB,accessor:Ia,accessorFields:va,accessorName:Go,array:qt,ascending:AB,bandwidthNRD:Joe,bin:Qoe,bootstrapCI:ele,boundClip:que,boundContext:Da,boundItem:vL,boundMark:Iue,boundStroke:mf,changeset:Uy,clampRange:Jit,closeTag:ji,compare:kB,constant:Pu,cumulativeLogNormal:ale,cumulativeNormal:QB,cumulativeUniform:fle,debounce:MB,definition:zoe,densityLogNormal:sle,densityNormal:nle,densityUniform:cle,domChild:Tu,domClear:Qc,domCreate:Xg,domFind:X8,dotbin:Uot,error:Fe,expressionFunction:gr,extend:On,extent:rst,extentIndex:Gae,falsy:vc,fastmap:zy,field:oo,flush:sst,font:RN,fontFamily:k2,fontSize:Kd,format:wE,formatLocale:g7,formats:loe,hasOwnProperty:Sl,id:v2,identity:Lu,inferType:toe,inferTypes:noe,ingest:Nr,inherits:tt,inrange:ast,interpolate:efe,interpolateRange:Jce,isArray:je,isBoolean:By,isDate:ya,isFunction:bn,isIterable:ost,isNumber:ei,isObject:Gt,isRegExp:Hae,isString:Bt,isTuple:aN,key:NB,lerp:lst,loader:cN,logger:SB,lruCache:cst,merge:jae,mergeConfig:jit,one:nN,openTag:Hi,pad:qae,panLinear:Uae,panLog:Vae,panPow:Wae,panSymlog:Xit,parse:fTt,pathCurves:O8,pathEqual:Xue,pathParse:B0,pathRectangle:gue,pathRender:TN,pathSymbols:mue,pathTrail:vue,peek:Cn,point:ON,projection:f9,quantileLogNormal:ole,quantileNormal:e8,quantileUniform:dle,quantiles:Zoe,quarter:Kit,quartiles:ZB,get random(){return nl},randomInteger:Got,randomKDE:rle,randomLCG:Wot,randomLogNormal:qot,randomMixture:lle,randomNormal:t8,randomUniform:hle,read:WB,regressionExp:Yot,regressionLinear:ple,regressionLoess:elt,regressionLog:Xot,regressionPoly:Zot,regressionPow:Kot,regressionQuad:mle,renderModule:LN,repeat:S1,resetSVGClipId:tft,runtime:dU,runtimeContext:zme,sampleCurve:slt,sampleLogNormal:ile,sampleNormal:JB,sampleUniform:ule,scale:qN,sceneEqual:e7,sceneFromJSON:Rue,scenePickVisit:HT,sceneToJSON:Due,sceneVisit:Ul,sceneZOrder:L8,scheme:IL,schemeDiscretized:qpt,setRandom:Bot,span:fst,splitAccessPath:Qu,stringValue:at,textMetrics:jT,timeFormatLocale:Noe,timeInterval:Gfe,toBoolean:$B,toDate:IB,toNumber:Yr,toSet:dn,toString:DB,transform:Boe,transforms:F0,truncate:Xae,truthy:jd,tupleid:Nt,typeParsers:rL,utcInterval:Hfe,utcquarter:Zit,version:Awt,visitArray:Lf,writeConfig:CB,zero:Oae,zoomLinear:EB,zoomLog:TB,zoomPow:IT,zoomSymlog:Yit},Symbol.toStringTag,{value:"Module"}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var LP=function(t,e){return LP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},LP(t,e)};function Qt(t,e){LP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var le=function(){return le=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},le.apply(this,arguments)};function xn(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}var JK=Array.isArray,QK=Object.keys,qTt=Object.prototype.hasOwnProperty,XTt=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){var r=JK(e),i=JK(n),s,a,o;if(r&&i){if(a=e.length,a!=n.length)return!1;for(s=a;s--!==0;)if(!t(e[s],n[s]))return!1;return!0}if(r!=i)return!1;var l=e instanceof Date,u=n instanceof Date;if(l!=u)return!1;if(l&&u)return e.getTime()==n.getTime();var c=e instanceof RegExp,f=n instanceof RegExp;if(c!=f)return!1;if(c&&f)return e.toString()==n.toString();var d=QK(e);if(a=d.length,a!==QK(n).length)return!1;for(s=a;s--!==0;)if(!qTt.call(n,d[s]))return!1;for(s=a;s--!==0;)if(o=d[s],!t(e[o],n[o]))return!1;return!0}return e!==e&&n!==n},XC={},nO,eZ;function YTt(){if(eZ)return nO;eZ=1;var t,e,n={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},r;function i(h){throw{name:"SyntaxError",message:h,at:t,text:r}}function s(h){return h&&h!==e&&i("Expected '"+h+"' instead of '"+e+"'"),e=r.charAt(t),t+=1,e}function a(){var h,p="";for(e==="-"&&(p="-",s("-"));e>="0"&&e<="9";)p+=e,s();if(e===".")for(p+=".";s()&&e>="0"&&e<="9";)p+=e;if(e==="e"||e==="E")for(p+=e,s(),(e==="-"||e==="+")&&(p+=e,s());e>="0"&&e<="9";)p+=e,s();return h=Number(p),isFinite(h)||i("Bad number"),h}function o(){var h,p,m="",g;if(e==='"')for(;s();){if(e==='"')return s(),m;if(e==="\\")if(s(),e==="u"){for(g=0,p=0;p<4&&(h=parseInt(s(),16),!!isFinite(h));p+=1)g=g*16+h;m+=String.fromCharCode(g)}else if(typeof n[e]=="string")m+=n[e];else break;else m+=e}i("Bad string")}function l(){for(;e&&e<=" ";)s()}function u(){switch(e){case"t":return s("t"),s("r"),s("u"),s("e"),!0;case"f":return s("f"),s("a"),s("l"),s("s"),s("e"),!1;case"n":return s("n"),s("u"),s("l"),s("l"),null;default:i("Unexpected '"+e+"'")}}function c(){var h=[];if(e==="["){if(s("["),l(),e==="]")return s("]"),h;for(;e;){if(h.push(d()),l(),e==="]")return s("]"),h;s(","),l()}}i("Bad array")}function f(){var h,p={};if(e==="{"){if(s("{"),l(),e==="}")return s("}"),p;for(;e;){if(h=o(),l(),s(":"),Object.prototype.hasOwnProperty.call(p,h)&&i('Duplicate key "'+h+'"'),p[h]=d(),l(),e==="}")return s("}"),p;s(","),l()}}i("Bad object")}function d(){switch(l(),e){case"{":return f();case"[":return c();case'"':return o();case"-":return a();default:return e>="0"&&e<="9"?a():u()}}return nO=function(h,p){var m;return r=h,t=0,e=" ",m=d(),l(),e&&i("Syntax error"),typeof p=="function"?function g(v,y){var b,x,w=v[y];if(w&&typeof w=="object")for(b in d)Object.prototype.hasOwnProperty.call(w,b)&&(x=g(w,b),typeof x>"u"?delete w[b]:w[b]=x);return p.call(v,y,w)}({"":m},""):m},nO}var rO,tZ;function KTt(){if(tZ)return rO;tZ=1;var t=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,n,r={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},i;function s(o){return t.lastIndex=0,t.test(o)?'"'+o.replace(t,function(l){var u=r[l];return typeof u=="string"?u:"\\u"+("0000"+l.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+o+'"'}function a(o,l){var u,c,f,d,h=e,p,m=l[o];switch(m&&typeof m=="object"&&typeof m.toJSON=="function"&&(m=m.toJSON(o)),typeof i=="function"&&(m=i.call(l,o,m)),typeof m){case"string":return s(m);case"number":return isFinite(m)?String(m):"null";case"boolean":case"null":return String(m);case"object":if(!m)return"null";if(e+=n,p=[],Object.prototype.toString.apply(m)==="[object Array]"){for(d=m.length,u=0;u<d;u+=1)p[u]=a(u,m)||"null";return f=p.length===0?"[]":e?`[
`+e+p.join(`,
`+e)+`
`+h+"]":"["+p.join(",")+"]",e=h,f}if(i&&typeof i=="object")for(d=i.length,u=0;u<d;u+=1)c=i[u],typeof c=="string"&&(f=a(c,m),f&&p.push(s(c)+(e?": ":":")+f));else for(c in m)Object.prototype.hasOwnProperty.call(m,c)&&(f=a(c,m),f&&p.push(s(c)+(e?": ":":")+f));return f=p.length===0?"{}":e?`{
`+e+p.join(`,
`+e)+`
`+h+"}":"{"+p.join(",")+"}",e=h,f}}return rO=function(o,l,u){var c;if(e="",n="",typeof u=="number")for(c=0;c<u;c+=1)n+=" ";else typeof u=="string"&&(n=u);if(i=l,l&&typeof l!="function"&&(typeof l!="object"||typeof l.length!="number"))throw new Error("JSON.stringify");return a("",{"":o})},rO}var nZ;function ZTt(){return nZ||(nZ=1,XC.parse=YTt(),XC.stringify=KTt()),XC}var YC=typeof JSON<"u"?JSON:ZTt(),JTt=Array.isArray||function(t){return{}.toString.call(t)==="[object Array]"},QTt=Object.keys||function(t){var e=Object.prototype.hasOwnProperty||function(){return!0},n=[];for(var r in t)e.call(t,r)&&n.push(r);return n},Zme=function(t,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var n=e.space||"";typeof n=="number"&&(n=Array(n+1).join(" "));var r=typeof e.cycles=="boolean"?e.cycles:!1,i=e.replacer||function(o,l){return l},s=e.cmp&&function(o){return function(l){return function(u,c){var f={key:u,value:l[u]},d={key:c,value:l[c]};return o(f,d)}}}(e.cmp),a=[];return function o(l,u,c,f){var d=n?`
`+new Array(f+1).join(n):"",h=n?": ":":";if(c&&c.toJSON&&typeof c.toJSON=="function"&&(c=c.toJSON()),c=i.call(l,u,c),c!==void 0){if(typeof c!="object"||c===null)return YC.stringify(c);if(JTt(c)){for(var v=[],p=0;p<c.length;p++){var m=o(c,p,c[p],f+1)||YC.stringify(null);v.push(d+n+m)}return"["+v.join(",")+d+"]"}if(a.indexOf(c)!==-1){if(r)return YC.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}else a.push(c);for(var g=QTt(c).sort(s&&s(c)),v=[],p=0;p<g.length;p++){var u=g[p],y=o(c,u,c[u],f+1);if(y){var b=YC.stringify(u)+h+y;v.push(d+n+b)}}return a.splice(a.indexOf(c),1),"{"+v.join(",")+d+"}"}}({"":t},"",t,0)};function pU(t){return!!t.or}function mU(t){return!!t.and}function gU(t){return!!t.not}function $E(t,e){if(gU(t))$E(t.not,e);else if(mU(t))for(var n=0,r=t.and;n<r.length;n++){var i=r[n];$E(i,e)}else if(pU(t))for(var s=0,a=t.or;s<a.length;s++){var i=a[s];$E(i,e)}else e(t)}function IE(t,e){return gU(t)?{not:IE(t.not,e)}:mU(t)?{and:t.and.map(function(n){return IE(n,e)})}:pU(t)?{or:t.or.map(function(n){return IE(n,e)})}:e(t)}var Jme=XTt;function PP(t,e){for(var n={},r=0,i=e;r<i.length;r++){var s=i[r];t.hasOwnProperty(s)&&(n[s]=t[s])}return n}function vU(t,e){for(var n=le({},t),r=0,i=e;r<i.length;r++){var s=i[r];delete n[s]}return n}var Yn=Zme;function Pr(t){if(ei(t))return t;var e=Bt(t)?t:Zme(t);if(e.length<250)return e;for(var n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function At(t,e){return t.indexOf(e)>-1}function Qme(t,e){return t.filter(function(n){return!At(e,n)})}function ekt(t,e){return t.concat(Qme(e,t))}function mw(t,e){for(var n=0,r=0;r<t.length;r++)if(e(t[r],r,n++))return!0;return!1}function yU(t,e){for(var n=0,r=0;r<t.length;r++)if(!e(t[r],r,n++))return!1;return!0}function jp(t){var e;return(e=[]).concat.apply(e,t)}function tkt(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t;return n}function iv(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var s=i[r];t=nkt(t,s)}return t}function nkt(t,e){if(typeof e!="object"||e===null)return t;for(var n in e)e.hasOwnProperty(n)&&e[n]!==void 0&&(typeof e[n]!="object"||je(e[n])||e[n]===null?t[n]=e[n]:typeof t[n]!="object"||t[n]===null?t[n]=iv(je(e[n].constructor)?[]:{},e[n]):iv(t[n],e[n]));return t}function Fg(t,e){for(var n=[],r={},i,s=0,a=t;s<a.length;s++){var o=a[s];i=e(o),!(i in r)&&(r[i]=1,n.push(o))}return n}function ege(t,e){var n=He(t),r=He(e);if(n.length!==r.length)return!1;for(var i=0,s=n;i<s.length;i++){var a=s[i];if(t[a]!==e[a])return!1}return!0}function tge(t,e){for(var n in t)if(n in e)return!0;return!1}function zP(t){for(var e={},n=function(a){var o=Qu(a),l=o.map(function(c,f){return f===0?c:"["+c+"]"}),u=l.map(function(c,f){return l.slice(0,f+1).join("")});u.forEach(function(c){return e[c]=!0})},r=0,i=He(t);r<i.length;r++){var s=i[r];n(s)}return e}function nge(t,e){return tge(zP(t),zP(e))}function rkt(t){return!isNaN(t)}function ikt(t,e){if(t.length!==e.length)return!0;t.sort(),e.sort();for(var n=0;n<t.length;n++)if(e[n]!==t[n])return!0;return!1}var He=Object.keys;function Gc(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e}function skt(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push({key:n,value:t[n]});return e}function ri(t){return He(t)}function En(t){return JSON.parse(JSON.stringify(t))}function gw(t){return t===!0||t===!1}function Gu(t){var e=t.replace(/\W/g,"_");return(t.match(/^\d+/)?"_":"")+e}function i0(t,e){return gU(t)?"!("+i0(t.not,e)+")":mU(t)?"("+t.and.map(function(n){return i0(n,e)}).join(") && (")+")":pU(t)?"("+t.or.map(function(n){return i0(n,e)}).join(") || (")+")":e(t)}function Xk(t,e){if(e.length===0)return!0;var n=e.shift();return Xk(t[n],e)&&delete t[n],Object.keys(t).length===0}function rge(t){return t.charAt(0).toUpperCase()+t.substr(1)}function Xo(t,e){e===void 0&&(e="datum");for(var n=Qu(t),r=[],i=1;i<=n.length;i++){var s="["+n.slice(0,i).map(at).join("][")+"]";r.push(""+e+s)}return r.join(" && ")}function ige(t,e){return e===void 0&&(e="datum"),e+"["+at(Qu(t).join("."))+"]"}function O$(t){return""+Qu(t).map(function(e){return e.replace(".","\\.")}).join("\\.")}function sge(t){return""+Qu(t).join(".")}function U1(t){return t?Qu(t).length:0}function un(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i!==void 0)return i}}var age=42;function oge(t){var e=++age;return t?String(t)+e:e}function akt(){age=42}const okt=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:U1,accessPathWithDatum:Xo,contains:At,deepEqual:Jme,deleteNestedProperty:Xk,differArray:ikt,duplicate:En,entries:skt,every:yU,fieldIntersection:nge,fill:tkt,flagKeys:ri,flatAccessWithDatum:ige,flatten:jp,getFirstDefined:un,hasIntersection:tge,hash:Pr,isBoolean:gw,isEqual:ege,isNumeric:rkt,keys:He,logicalExpr:i0,mergeDeep:iv,omit:vU,pick:PP,prefixGenerator:zP,removePathFromField:sge,replacePathInField:O$,resetIdCounter:akt,some:mw,stringify:Yn,titlecase:rge,union:ekt,unique:Fg,uniqueId:oge,vals:Gc,varName:Gu,without:Qme},Symbol.toStringTag,{value:"Module"}));var lge={argmax:1,argmin:1,average:1,count:1,distinct:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},lkt=ri(lge);function bU(t){return!!lge[t]}var uge=["count","valid","missing","distinct"];function cge(t){return t&&At(uge,t)}function fge(t){return t&&At(["min","max"],t)}var dge=["count","sum","distinct","valid","missing"],hge=["mean","average","median","q1","q3","min","max"],pge=dn(hge);const ukt=Object.freeze(Object.defineProperty({__proto__:null,AGGREGATE_OPS:lkt,COUNTING_OPS:uge,SHARED_DOMAIN_OPS:hge,SHARED_DOMAIN_OP_INDEX:pge,SUM_OPS:dge,isAggregateOp:bU,isCountingAggregateOp:cge,isMinMaxOp:fge},Symbol.toStringTag,{value:"Module"}));var xU=["domain","grid","labels","ticks","title"],mge={grid:"grid",gridColor:"grid",gridDash:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"main",domain:"main",domainColor:"main",domainOpacity:"main",domainWidth:"main",format:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontWeight:"main",labelLimit:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",maxExtent:"main",minExtent:"main",offset:"main",position:"main",tickColor:"main",tickExtra:"main",tickOffset:"main",tickOpacity:"main",tickRound:"main",ticks:"main",tickSize:"main",title:"main",titleAlign:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontWeight:"main",titleLimit:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",tickWidth:"both",tickCount:"both",values:"both",scale:"both",zindex:"both"},gge={orient:1,bandPosition:1,domain:1,domainColor:1,domainOpacity:1,domainWidth:1,format:1,grid:1,gridColor:1,gridDash:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontWeight:1,labelLimit:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,maxExtent:1,minExtent:1,offset:1,position:1,tickColor:1,tickCount:1,tickExtra:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontWeight:1,titleLimit:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,values:1,zindex:1},vge=le({},gge,{encoding:1,labelAngle:1,tickStep:1}),ckt=le({gridScale:1,scale:1},gge,{encode:1});function yge(t){return!!vge[t]}var wU=ri(ckt),fkt=ri(vge);const dkt=Object.freeze(Object.defineProperty({__proto__:null,AXIS_PARTS:xU,AXIS_PROPERTIES:fkt,AXIS_PROPERTY_TYPE:mge,VG_AXIS_PROPERTIES:wU,isAxisProperty:yge},Symbol.toStringTag,{value:"Module"}));var bge=SB(wB),Id=bge;function hkt(t){return Id=t,Id}function pkt(){return Id=bge,Id}function Ke(){Id.warn.apply(Id,arguments)}function mkt(){Id.debug.apply(Id,arguments)}var Xe;(function(t){t.INVALID_SPEC="Invalid spec",t.FIT_NON_SINGLE='Autosize "fit" only works for single views and layered views.',t.CANNOT_FIX_RANGE_STEP_WITH_FIT='Cannot use a fixed value of "rangeStep" when "autosize" is "fit".';function e(Q){return'Cannot project a selection on encoding channel "'+Q+'", which has no field.'}t.cannotProjectOnChannelWithoutField=e;function n(Q){return'The "nearest" transform is not supported for '+Q+" marks."}t.nearestNotSupportForContinuous=n;function r(Q){return"Selection not supported for "+Q+" yet"}t.selectionNotSupported=r;function i(Q){return'Cannot find a selection named "'+Q+'"'}t.selectionNotFound=i,t.SCALE_BINDINGS_CONTINUOUS="Scale bindings are currently only supported for scales with unbinned, continuous domains.";function s(Q){return'Unknown repeated value "'+Q+'".'}t.noSuchRepeatedValue=s,t.CONCAT_CANNOT_SHARE_AXIS="Axes cannot be shared in concatenated views.",t.REPEAT_CANNOT_SHARE_AXIS="Axes cannot be shared in repeated views.";function a(Q){return'Cannot set title "anchor" for a '+Q+" spec"}t.cannotSetTitleAnchor=a;function o(Q){return'Unrecognized parse "'+Q+'".'}t.unrecognizedParse=o;function l(Q,Ie,Ne){return'An ancestor parsed field "'+Q+'" as '+Ne+" but a child wants to parse the field as "+Ie+"."}t.differentParse=l;function u(Q){return"Ignoring an invalid transform: "+Yn(Q)+"."}t.invalidTransformIgnored=u,t.NO_FIELDS_NEEDS_AS='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function c(Q){return"Layer's shared "+Q.join(",")+" channel "+(Q.length===1?"is":"are")+" overriden"}t.encodingOverridden=c;function f(Q){var Ie=Q.parentProjection,Ne=Q.projection;return"Layer's shared projection "+Yn(Ie)+" is overridden by a child projection "+Yn(Ne)+"."}t.projectionOverridden=f;function d(Q,Ie,Ne){return"Channel "+Q+" is a "+Ie+". Converted to {value: "+Yn(Ne)+"}."}t.primitiveChannelDef=d;function h(Q){return'Invalid field type "'+Q+'"'}t.invalidFieldType=h;function p(Q,Ie,Ne){var ht=Ne.scaleType?Ne.scaleType+" scale":Ne.zeroFalse?"scale with zero=false":"scale with custom domain that excludes zero";return"A "+ht+" is used to encode "+Q+"'s "+Ie+". This can be misleading as the "+(Ie==="x"?"width":"height")+" of the "+Q+" can be arbitrary based on the scale domain. You may want to use point mark instead."}t.nonZeroScaleUsedWithLengthMark=p;function m(Q,Ie){return'Invalid field type "'+Q+'" for aggregate: "'+Ie+'", using "quantitative" instead.'}t.invalidFieldTypeForCountAggregate=m;function g(Q){return'Invalid aggregation operator "'+Q+'"'}t.invalidAggregate=g;function v(Q,Ie,Ne){return'Invalid field type "'+Q+'" for channel "'+Ie+'", using "'+Ne+'" instead.'}t.emptyOrInvalidFieldType=v;function y(Q,Ie){var Ne=Ie.fill,ht=Ie.stroke;return"Dropping color "+Q+" as the plot also has "+(Ne&&ht?"fill and stroke":Ne?"fill":"stroke")}t.droppingColor=y;function b(Q,Ie){return"Dropping "+Yn(Q)+' from channel "'+Ie+'" since it does not contain data field or value.'}t.emptyFieldDef=b;function x(Q,Ie,Ne){return Q+"-encoding with type "+Ie+" is deprecated. Replacing with "+Ne+"-encoding."}t.latLongDeprecated=x,t.LINE_WITH_VARYING_SIZE="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function w(Q,Ie,Ne){return Q+' dropped as it is incompatible with "'+Ie+'"'+(Ne?" when "+Ne:"")+"."}t.incompatibleChannel=w;function S(Q){return Q+"-encoding is dropped as "+Q+" is not a valid encoding channel."}t.invalidEncodingChannel=S;function C(Q){return Q+" encoding should be discrete (ordinal / nominal / binned)."}t.facetChannelShouldBeDiscrete=C;function _(Q,Ie){return'Using discrete channel "'+Q+'" to encode "'+Ie+'" field can be misleading as it does not encode '+(Ie==="ordinal"?"order":"magnitude")+"."}t.discreteChannelCannotEncode=_,t.BAR_WITH_POINT_SCALE_AND_RANGESTEP_NULL="Bar mark should not be used with point scale when rangeStep is null. Please use band scale instead.";function E(Q,Ie){var Ne=Q&&Ie?"x2 and y2":Q?"x2":"y2";return"Line mark is for continuous lines and thus cannot be used with "+Ne+". We will use the rule mark (line segments) instead."}t.lineWithRange=E;function T(Q,Ie){return'Specified orient "'+Q+'" overridden with "'+Ie+'"'}t.orientOverridden=T,t.CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN="custom domain scale cannot be unioned with default field-based domain";function k(Q){return'Cannot use the scale property "'+Q+'" with non-color channel.'}t.cannotUseScalePropertyWithNonColor=k;function M(Q){return"Using unaggregated domain with raw field has no effect ("+Yn(Q)+")."}t.unaggregateDomainHasNoEffectForRawField=M;function A(Q){return'Unaggregated domain not applicable for "'+Q+'" since it produces values outside the origin domain of the source data.'}t.unaggregateDomainWithNonSharedDomainOp=A;function N(Q){return"Unaggregated domain is currently unsupported for log scale ("+Yn(Q)+")."}t.unaggregatedDomainWithLogScale=N;function $(Q){return'Cannot apply size to non-oriented mark "'+Q+'".'}t.cannotApplySizeToNonOrientedMark=$;function D(Q){return'rangeStep for "'+Q+'" is dropped as top-level '+(Q==="x"?"width":"height")+" is provided."}t.rangeStepDropped=D;function P(Q,Ie,Ne){return'Channel "'+Q+'" does not work with "'+Ie+'" scale. We are using "'+Ne+'" scale instead.'}t.scaleTypeNotWorkWithChannel=P;function O(Q,Ie){return'FieldDef does not work with "'+Q+'" scale. We are using "'+Ie+'" scale instead.'}t.scaleTypeNotWorkWithFieldDef=O;function B(Q,Ie,Ne){return Ne+`-scale's "`+Ie+'" is dropped as it does not work with '+Q+" scale."}t.scalePropertyNotWorkWithScaleType=B;function H(Q,Ie){return'Scale type "'+Ie+'" does not work with mark "'+Q+'".'}t.scaleTypeNotWorkWithMark=H;function te(Q,Ie,Ne,ht){return"Conflicting "+Ie.toString()+' property "'+Q.toString()+'" ('+Yn(Ne)+" and "+Yn(ht)+").  Using "+Yn(Ne)+"."}t.mergeConflictingProperty=te;function q(Q){return'Setting the scale to be independent for "'+Q+'" means we also have to set the guide (axis or legend) to be independent.'}t.independentScaleMeansIndependentGuide=q;function Z(Q){return"Dropping sort property "+Yn(Q)+" as unioned domains only support boolean or op 'count'."}t.domainSortDropped=Z,t.UNABLE_TO_MERGE_DOMAINS="Unable to merge domains",t.MORE_THAN_ONE_SORT="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",t.INVALID_CHANNEL_FOR_AXIS="Invalid channel for axis.";function ne(Q){return'Cannot stack "'+Q+'" if there is already "'+Q+'2"'}t.cannotStackRangedMark=ne;function G(Q){return"Cannot stack non-linear scale ("+Q+")"}t.cannotStackNonLinearScale=G;function he(Q){return'Stacking is applied even though the aggregate function is non-summative ("'+Q+'")'}t.stackNonSummativeAggregate=he;function ve(Q,Ie){return"Invalid "+Q+": "+Yn(Ie)}t.invalidTimeUnit=ve;function we(Q){return'Time unit "'+Q+'" is not supported. We are replacing it with '+Q.replace("day","date")+"."}t.dayReplacedWithDate=we;function X(Q){return"Dropping day from datetime "+Yn(Q)+" as day cannot be combined with other units."}t.droppedDay=X;function ae(Q,Ie){return(Ie?"extent ":"")+(Ie&&Q?"and ":"")+(Q?"center ":"")+(Ie&&Q?"are ":"is ")+"not needed when data are aggregated."}t.errorBarCenterAndExtentAreNotNeeded=ae;function pe(Q,Ie,Ne){return Q+" is not usually used with "+Ie+" for "+Ne+"."}t.errorBarCenterIsUsedWithWrongExtent=pe;function j(Q,Ie){return"Continuous axis should not have customized aggregation function "+Q+"; "+Ie+" already agregates the axis."}t.errorBarContinuousAxisHasCustomizedAggregate=j;function ze(Q,Ie){return"Center is not needed to be specified in "+Ie+" when extent is "+Q+"."}t.errorBarCenterIsNotNeeded=ze;function $e(Q){return"1D error band does not support "+Q}t.errorBand1DNotSupport=$e;function nt(Q){return"Channel "+Q+' is required for "binned" bin'}t.channelRequiredForBinned=nt;function Je(Q){return"Domain for "+Q+" is required for threshold scale"}t.domainRequiredForThresholdScale=Je})(Xe||(Xe={}));var gkt=2006;function _U(t){return!!t&&(!!t.year||!!t.quarter||!!t.month||!!t.date||!!t.day||!!t.hours||!!t.minutes||!!t.seconds||!!t.milliseconds)}var SU=["january","february","march","april","may","june","july","august","september","october","november","december"],xge=SU.map(function(t){return t.substr(0,3)}),CU=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],wge=CU.map(function(t){return t.substr(0,3)});function vkt(t){if(ei(t))return t>4&&Ke(Xe.invalidTimeUnit("quarter",t)),(t-1).toString();throw new Error(Xe.invalidTimeUnit("quarter",t))}function ykt(t){if(ei(t))return(t-1).toString();var e=t.toLowerCase(),n=SU.indexOf(e);if(n!==-1)return n+"";var r=e.substr(0,3),i=xge.indexOf(r);if(i!==-1)return i+"";throw new Error(Xe.invalidTimeUnit("month",t))}function bkt(t){if(ei(t))return t%7+"";var e=t.toLowerCase(),n=CU.indexOf(e);if(n!==-1)return n+"";var r=e.substr(0,3),i=wge.indexOf(r);if(i!==-1)return i+"";throw new Error(Xe.invalidTimeUnit("day",t))}function Yk(t,e){e===void 0&&(e=!1);var n=[];if(e&&t.day!==void 0&&He(t).length>1&&(Ke(Xe.droppedDay(t)),t=En(t),delete t.day),t.year!==void 0?n.push(t.year):t.day!==void 0?n.push(gkt):n.push(0),t.month!==void 0){var r=e?ykt(t.month):t.month;n.push(r)}else if(t.quarter!==void 0){var i=e?vkt(t.quarter):t.quarter;n.push(i+"*3")}else n.push(0);if(t.date!==void 0)n.push(t.date);else if(t.day!==void 0){var s=e?bkt(t.day):t.day;n.push(s+"+1")}else n.push(1);for(var a=0,o=["hours","minutes","seconds","milliseconds"];a<o.length;a++){var l=o[a];t[l]!==void 0?n.push(t[l]):n.push(0)}return t.utc?"utc("+n.join(", ")+")":"datetime("+n.join(", ")+")"}const xkt=Object.freeze(Object.defineProperty({__proto__:null,DAYS:CU,MONTHS:SU,SHORT_DAYS:wge,SHORT_MONTHS:xge,dateTimeExpr:Yk,isDateTime:_U},Symbol.toStringTag,{value:"Module"}));function _ge(t){return!!t&&!!t.header}const wkt=Object.freeze(Object.defineProperty({__proto__:null,isFacetFieldDef:_ge},Symbol.toStringTag,{value:"Module"}));var ls;(function(t){t.YEAR="year",t.MONTH="month",t.DAY="day",t.DATE="date",t.HOURS="hours",t.MINUTES="minutes",t.SECONDS="seconds",t.MILLISECONDS="milliseconds",t.YEARMONTH="yearmonth",t.YEARMONTHDATE="yearmonthdate",t.YEARMONTHDATEHOURS="yearmonthdatehours",t.YEARMONTHDATEHOURSMINUTES="yearmonthdatehoursminutes",t.YEARMONTHDATEHOURSMINUTESSECONDS="yearmonthdatehoursminutesseconds",t.MONTHDATE="monthdate",t.MONTHDATEHOURS="monthdatehours",t.HOURSMINUTES="hoursminutes",t.HOURSMINUTESSECONDS="hoursminutesseconds",t.MINUTESSECONDS="minutesseconds",t.SECONDSMILLISECONDS="secondsmilliseconds",t.QUARTER="quarter",t.YEARQUARTER="yearquarter",t.QUARTERMONTH="quartermonth",t.YEARQUARTERMONTH="yearquartermonth",t.UTCYEAR="utcyear",t.UTCMONTH="utcmonth",t.UTCDAY="utcday",t.UTCDATE="utcdate",t.UTCHOURS="utchours",t.UTCMINUTES="utcminutes",t.UTCSECONDS="utcseconds",t.UTCMILLISECONDS="utcmilliseconds",t.UTCYEARMONTH="utcyearmonth",t.UTCYEARMONTHDATE="utcyearmonthdate",t.UTCYEARMONTHDATEHOURS="utcyearmonthdatehours",t.UTCYEARMONTHDATEHOURSMINUTES="utcyearmonthdatehoursminutes",t.UTCYEARMONTHDATEHOURSMINUTESSECONDS="utcyearmonthdatehoursminutesseconds",t.UTCMONTHDATE="utcmonthdate",t.UTCMONTHDATEHOURS="utcmonthdatehours",t.UTCHOURSMINUTES="utchoursminutes",t.UTCHOURSMINUTESSECONDS="utchoursminutesseconds",t.UTCMINUTESSECONDS="utcminutesseconds",t.UTCSECONDSMILLISECONDS="utcsecondsmilliseconds",t.UTCQUARTER="utcquarter",t.UTCYEARQUARTER="utcyearquarter",t.UTCQUARTERMONTH="utcquartermonth",t.UTCYEARQUARTERMONTH="utcyearquartermonth"})(ls||(ls={}));var EU={year:1,quarter:1,month:1,day:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},F$=ri(EU);function Sge(t){return!!EU[t]}var TU={utcyear:1,utcquarter:1,utcmonth:1,utcday:1,utcdate:1,utchours:1,utcminutes:1,utcseconds:1,utcmilliseconds:1};function Cge(t){return!!TU[t]}var _kt={yearquarter:1,yearquartermonth:1,yearmonth:1,yearmonthdate:1,yearmonthdatehours:1,yearmonthdatehoursminutes:1,yearmonthdatehoursminutesseconds:1,quartermonth:1,monthdate:1,monthdatehours:1,hoursminutes:1,hoursminutesseconds:1,minutesseconds:1,secondsmilliseconds:1},Ege={utcyearquarter:1,utcyearquartermonth:1,utcyearmonth:1,utcyearmonthdate:1,utcyearmonthdatehours:1,utcyearmonthdatehoursminutes:1,utcyearmonthdatehoursminutesseconds:1,utcquartermonth:1,utcmonthdate:1,utcmonthdatehours:1,utchoursminutes:1,utchoursminutesseconds:1,utcminutesseconds:1,utcsecondsmilliseconds:1},Skt=le({},TU,Ege);function kU(t){return!!Skt[t]}function Tge(t){return t.substr(3)}var kge=le({},EU,TU,_kt,Ege),Ckt=ri(kge);function Ekt(t){return!!kge[t]}var Tkt={year:"setFullYear",month:"setMonth",date:"setDate",hours:"setHours",minutes:"setMinutes",seconds:"setSeconds",milliseconds:"setMilliseconds",quarter:null,day:null};function kkt(t,e){for(var n=kU(t),r=n?new Date(Date.UTC(1972,0,1,0,0,0,0)):new Date(1972,0,1,0,0,0,0),i=0,s=F$;i<s.length;i++){var a=s[i];if(Va(t,a))switch(a){case ls.DAY:throw new Error("Cannot convert to TimeUnits containing 'day'");case ls.QUARTER:{var o=rZ("month",n),l=o.getDateMethod,u=o.setDateMethod;r[u](Math.floor(e[l]()/3)*3);break}default:var c=rZ(a,n),f=c.getDateMethod,d=c.setDateMethod;r[d](e[f]())}}return r}function rZ(t,e){var n=Tkt[t],r=e?"setUTC"+n.substr(3):n,i="get"+(e?"UTC":"")+n.substr(3);return{setDateMethod:r,getDateMethod:i}}function Age(t){return F$.reduce(function(e,n){return Va(t,n)?e.concat(n):e},[])}function Va(t,e){var n=t.indexOf(e);return n>-1&&(e!==ls.SECONDS||n===0||t.charAt(n-1)!=="i")}function AU(t,e){var n=Xo(e),r=kU(t)?"utc":"";function i(a){return a===ls.QUARTER?"("+r+"quarter("+n+")-1)":""+r+a+"("+n+")"}var s=F$.reduce(function(a,o){return Va(t,o)&&(a[o]=i(o)),a},{});return Yk(s)}function MU(t,e){if(t){var n=[],r=Va(t,ls.YEAR);Va(t,ls.MONTH)&&n.push(e!==!1?"%b":"%B"),Va(t,ls.DAY)?n.push(e?"%a":"%A"):Va(t,ls.DATE)&&n.push("%d"+(r?",":"")),r&&n.push(e?"%y":"%Y");var i=[];Va(t,ls.HOURS)&&i.push("%H"),Va(t,ls.MINUTES)&&i.push("%M"),Va(t,ls.SECONDS)&&i.push("%S"),Va(t,ls.MILLISECONDS)&&i.push("%L");var s=[];return n.length>0&&s.push(n.join(" ")),i.length>0&&s.push(i.join(":")),s}}function Mge(t,e,n,r){if(t){var i=MU(t,n),s="";return Va(t,ls.QUARTER)&&(s="'Q' + quarter("+e+")"),i.length>0&&(s&&(s+=" + ' ' + "),r?s+="utcFormat("+e+", '"+i.join(" ")+"')":s+="timeFormat("+e+", '"+i.join(" ")+"')"),s||void 0}}function NU(t){return t!=="day"&&t.indexOf("day")>=0?(Ke(Xe.dayReplacedWithDate(t)),t.replace("day","date")):t}const Akt=Object.freeze(Object.defineProperty({__proto__:null,TIMEUNITS:Ckt,TIMEUNIT_PARTS:F$,get TimeUnit(){return ls},containsTimeUnit:Va,convert:kkt,fieldExpr:AU,formatExpression:Mge,getDateTimeComponents:MU,getLocalTimeUnit:Tge,getTimeUnitParts:Age,isLocalSingleTimeUnit:Sge,isTimeUnit:Ekt,isUTCTimeUnit:kU,isUtcSingleTimeUnit:Cge,normalizeTimeUnit:NU},Symbol.toStringTag,{value:"Module"}));var da;(function(t){t.QUANTITATIVE="quantitative",t.ORDINAL="ordinal",t.TEMPORAL="temporal",t.NOMINAL="nominal",t.GEOJSON="geojson"})(da||(da={}));var $U={quantitative:1,ordinal:1,temporal:1,nominal:1,geojson:1};function Mkt(t){return!!$U[t]}var Dd=da.QUANTITATIVE,IU=da.ORDINAL,Kk=da.TEMPORAL,DU=da.NOMINAL,Am=da.GEOJSON;function Nge(t){if(t)switch(t=t.toLowerCase(),t){case"q":case Dd:return"quantitative";case"t":case Kk:return"temporal";case"o":case IU:return"ordinal";case"n":case DU:return"nominal";case Am:return"geojson"}}const Nkt=Object.freeze(Object.defineProperty({__proto__:null,GEOJSON:Am,NOMINAL:DU,ORDINAL:IU,QUANTITATIVE:Dd,TEMPORAL:Kk,TYPE_INDEX:$U,get Type(){return da},getFullName:Nge,isType:Mkt},Symbol.toStringTag,{value:"Module"}));function $ge(t){return t.selection}function Ige(t){return t&&!Bt(t)&&"repeat"in t}function BP(t){var e=t.field,n=t.timeUnit,r=t.bin,i=t.aggregate;return le({},n?{timeUnit:n}:{},r?{bin:r}:{},i?{aggregate:i}:{},{field:e})}function RU(t){return!!t&&!!t.condition}function rf(t){return!!t&&!!t.condition&&!je(t.condition)&&Ge(t.condition)}function Dge(t){return!!t&&!!t.condition&&(je(t.condition)||sf(t.condition))}function Ge(t){return!!t&&(!!t.field||t.aggregate==="count")}function DE(t){return Ge(t)&&Bt(t.field)}function sf(t){return t&&"value"in t&&t.value!==void 0}function L$(t){return!!t&&(!!t.scale||!!t.sort)}function Rge(t){return!!t&&(!!t.axis||!!t.stack||!!t.impute)}function Oge(t){return!!t&&!!t.legend}function Fge(t){return!!t&&!!t.format}function $kt(t){return!!t.op}function mt(t,e){e===void 0&&(e={});var n=t.field,r=e.prefix,i=e.suffix;if(Pge(t))n="count_*";else{var s=void 0;e.nofn||($kt(t)?s=t.op:Jn(t.bin)?(s=sS(t.bin),i=e.binSuffix||""):t.aggregate?s=String(t.aggregate):t.timeUnit&&(s=String(t.timeUnit))),s&&(n=n?s+"_"+n:s)}return i&&(n=n+"_"+i),r&&(n=r+"_"+n),e.forAs?n:e.expr?ige(n,e.expr):O$(n)}function Lge(t){switch(t.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return!!t.bin;case"temporal":return!1}throw new Error(Xe.invalidFieldType(t.type))}function Vi(t){return!Lge(t)}function Pge(t){return t.aggregate==="count"}function zge(t,e){var n=t.field,r=t.bin,i=t.timeUnit,s=t.aggregate;if(s==="count")return e.countTitle;if(Jn(r))return n+" (binned)";if(i){var a=Age(i).join("-");return n+" ("+a+")"}else if(s)return rge(s)+" of "+n;return n}function Bge(t,e){var n=t.aggregate||t.timeUnit||Jn(t.bin)&&"bin";return n?n.toUpperCase()+"("+t.field+")":t.field}var OU=function(t,e){switch(e.fieldTitle){case"plain":return t.field;case"functional":return Bge(t);default:return zge(t,e)}},Uge=OU;function FU(t){Uge=t}function Vge(){FU(OU)}function J2(t,e,n){var r=n.allowDisabling,i=P$(t)||{},s=i.title;return r?un(s,t.title,Zk(t,e)):s||t.title||Zk(t,e)}function P$(t){if(Rge(t)&&t.axis)return t.axis;if(Oge(t)&&t.legend)return t.legend;if(_ge(t)&&t.header)return t.header}function Zk(t,e){return Uge(t,e)}function Wge(t){if(Fge(t)&&t.format)return t.format;var e=P$(t)||{};return e.format}function Gge(t,e){if(t.timeUnit)return"temporal";if(Jn(t.bin))return"quantitative";switch(fx(e)){case"continuous":return"quantitative";case"discrete":return"nominal";case"flexible":return"nominal";default:return"quantitative"}}function io(t){if(Ge(t))return t;if(rf(t))return t.condition}function LU(t,e){if(Bt(t)||ei(t)||By(t)){var n=Bt(t)?"string":ei(t)?"number":"boolean";return Ke(Xe.primitiveChannelDef(e,n,t)),{value:t}}return Ge(t)?Jk(t,e):rf(t)?le({},t,{condition:Jk(t.condition,e)}):t}function Jk(t,e){if(t.aggregate&&!bU(t.aggregate)){t.aggregate;var n=xn(t,["aggregate"]);Ke(Xe.invalidAggregate(t.aggregate)),t=n}if(t.timeUnit&&(t=le({},t,{timeUnit:NU(t.timeUnit)})),Jn(t.bin)&&(t=le({},t,{bin:PU(t.bin,e)})),ha(t.bin)&&!At(rS,e)&&Ke("Channel "+e+' should not be used with "binned" bin'),t.type){var r=Nge(t.type);t.type!==r&&(t=le({},t,{type:r})),t.type!=="quantitative"&&cge(t.aggregate)&&(Ke(Xe.invalidFieldTypeForCountAggregate(t.type,t.aggregate)),t=le({},t,{type:"quantitative"}))}else{var i=Gge(t,e);Ke(Xe.emptyOrInvalidFieldType(t.type,e,i)),t=le({},t,{type:i})}var s=Hge(t,e),a=s.compatible,o=s.warning;return a||Ke(o),t}function PU(t,e){return By(t)?{maxbins:VP(e)}:!t.maxbins&&!t.step?le({},t,{maxbins:VP(e)}):t}var vg={compatible:!0};function Hge(t,e){var n=t.type;if(n==="geojson"&&e!=="shape")return{compatible:!1,warning:"Channel "+e+" should not be used with a geojson data."};switch(e){case"row":case"column":return Vi(t)?{compatible:!1,warning:Xe.facetChannelShouldBeDiscrete(e)}:vg;case"x":case"y":case"color":case"fill":case"stroke":case"text":case"detail":case"key":case"tooltip":case"href":return vg;case"longitude":case"longitude2":case"latitude":case"latitude2":return n!==Dd?{compatible:!1,warning:"Channel "+e+" should be used with a quantitative field only, not "+t.type+" field."}:vg;case"opacity":case"fillOpacity":case"strokeOpacity":case"strokeWidth":case"size":case"x2":case"y2":return n==="nominal"&&!t.sort?{compatible:!1,warning:"Channel "+e+" should not be used with an unsorted discrete field."}:vg;case"shape":return At(["ordinal","nominal","geojson"],t.type)?vg:{compatible:!1,warning:"Shape channel should be used with only either discrete or geojson data."};case"order":return t.type==="nominal"&&!("sort"in t)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:vg}throw new Error("channelCompatability not implemented for channel "+e)}function jge(t){return t.type==="quantitative"||Jn(t.bin)}function Jy(t){return t.type==="temporal"||!!t.timeUnit}function Q2(t,e){var n=e.timeUnit,r=e.type,i=e.time,s=e.undefinedIfExprNotRequired,a,o;return _U(t)?o=Yk(t,!0):(Bt(t)||ei(t))&&(n||r==="temporal")&&(Sge(n)?o=Yk((a={},a[n]=t,a),!0):Cge(n)?o=Q2(t,{timeUnit:Tge(n)}):o="datetime("+JSON.stringify(t)+")"),o?i?"time("+o+")":o:s?void 0:JSON.stringify(t)}function zU(t,e){var n=t.timeUnit,r=t.type;return e.map(function(i){var s=Q2(i,{timeUnit:n,type:r,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:i})}const Ikt=Object.freeze(Object.defineProperty({__proto__:null,channelCompatibility:Hge,defaultTitle:Zk,defaultTitleFormatter:OU,defaultType:Gge,format:Wge,functionalTitleFormatter:Bge,getFieldDef:io,getGuide:P$,hasConditionalFieldDef:rf,hasConditionalValueDef:Dge,isConditionalDef:RU,isConditionalSelection:$ge,isContinuous:Vi,isCount:Pge,isDiscrete:Lge,isFieldDef:Ge,isMarkPropFieldDef:Oge,isNumberFieldDef:jge,isPositionFieldDef:Rge,isRepeatRef:Ige,isScaleFieldDef:L$,isStringFieldDef:DE,isTextFieldDef:Fge,isTimeFieldDef:Jy,isValueDef:sf,normalize:LU,normalizeBin:PU,normalizeFieldDef:Jk,resetTitleFormatter:Vge,setTitleFormatter:FU,title:J2,toFieldDefBase:BP,valueArray:zU,valueExpr:Q2,verbalTitleFormatter:zge,vgField:mt},Symbol.toStringTag,{value:"Module"}));var qs;(function(t){t.AREA="area",t.BAR="bar",t.LINE="line",t.POINT="point",t.RECT="rect",t.RULE="rule",t.TEXT="text",t.TICK="tick",t.TRAIL="trail",t.CIRCLE="circle",t.SQUARE="square",t.GEOSHAPE="geoshape"})(qs||(qs={}));var eS=qs.AREA,Qy=qs.BAR,tS=qs.LINE,eb=qs.POINT,z$=qs.TEXT,tb=qs.TICK,qge=qs.TRAIL,B$=qs.RECT,vw=qs.RULE,BU=qs.GEOSHAPE,nb=qs.CIRCLE,rb=qs.SQUARE,Xge={area:1,bar:1,line:1,point:1,text:1,tick:1,trail:1,rect:1,geoshape:1,rule:1,circle:1,square:1};function Dkt(t){return!!Xge[t]}function ib(t){return At(["line","area","trail"],t)}var UU=ri(Xge);function ho(t){return t.type}var Rkt=dn(UU);function VU(t){var e=ho(t)?t.type:t;return e in Rkt}var Yge=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],Kge=["fill","fillOpacity"],Zge=[].concat(Yge,Kge),UP=["filled","color","tooltip"],Jge={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],text:["shortTimeLabels"],tick:["bandSize","thickness"]},Qge={color:"#4c78a8",tooltip:{content:"encoding"}},e0e={binSpacing:1,continuousBandSize:5},t0e={thickness:1};const Okt=Object.freeze(Object.defineProperty({__proto__:null,AREA:eS,BAR:Qy,CIRCLE:nb,FILL_CONFIG:Kge,FILL_STROKE_CONFIG:Zge,GEOSHAPE:BU,LINE:tS,get Mark(){return qs},POINT:eb,PRIMITIVE_MARKS:UU,RECT:B$,RULE:vw,SQUARE:rb,STROKE_CONFIG:Yge,TEXT:z$,TICK:tb,TRAIL:qge,VL_ONLY_MARK_CONFIG_PROPERTIES:UP,VL_ONLY_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX:Jge,defaultBarConfig:e0e,defaultMarkConfig:Qge,defaultTickConfig:t0e,isMark:Dkt,isMarkDef:ho,isPathMark:ib,isPrimitiveMark:VU},Symbol.toStringTag,{value:"Module"}));var Lt;(function(t){t.ROW="row",t.COLUMN="column",t.X="x",t.Y="y",t.X2="x2",t.Y2="y2",t.XERROR="xError",t.YERROR="yError",t.XERROR2="xError2",t.YERROR2="yError2",t.LATITUDE="latitude",t.LONGITUDE="longitude",t.LATITUDE2="latitude2",t.LONGITUDE2="longitude2",t.COLOR="color",t.FILL="fill",t.STROKE="stroke",t.SHAPE="shape",t.SIZE="size",t.OPACITY="opacity",t.FILLOPACITY="fillOpacity",t.STROKEOPACITY="strokeOpacity",t.STROKEWIDTH="strokeWidth",t.TEXT="text",t.ORDER="order",t.DETAIL="detail",t.KEY="key",t.TOOLTIP="tooltip",t.HREF="href"})(Lt||(Lt={}));var rn=Lt.X,In=Lt.Y,Hu=Lt.X2,wf=Lt.Y2,WU=Lt.XERROR,GU=Lt.YERROR,HU=Lt.XERROR2,jU=Lt.YERROR2,sb=Lt.LATITUDE,ab=Lt.LATITUDE2,ob=Lt.LONGITUDE,qp=Lt.LONGITUDE2,Rd=Lt.ROW,Od=Lt.COLUMN,Aa=Lt.SHAPE,Mm=Lt.SIZE,Vl=Lt.COLOR,ih=Lt.FILL,sh=Lt.STROKE,qU=Lt.TEXT,XU=Lt.DETAIL,YU=Lt.KEY,KU=Lt.ORDER,ah=Lt.OPACITY,Nm=Lt.FILLOPACITY,$m=Lt.STROKEOPACITY,Im=Lt.STROKEWIDTH,ZU=Lt.TOOLTIP,JU=Lt.HREF,QU={longitude:1,longitude2:1,latitude:1,latitude2:1},n0e=ri(QU),Ks=le({x:1,y:1,x2:1,y2:1,xError:1,yError:1,xError2:1,yError2:1},QU,{color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,size:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1});function cx(t){return t==="color"||t==="fill"||t==="stroke"}var Fkt={row:1,column:1},nS=le({},Ks,Fkt),U$=ri(nS);nS.order;nS.detail;var Lkt=xn(nS,["order","detail"]),Pkt=ri(Lkt);function eV(t){return!!nS[t]}var zkt=ri(Ks);Ks.x;Ks.y;Ks.x2;Ks.y2;Ks.xError;Ks.yError;Ks.xError2;Ks.yError2;Ks.latitude;Ks.longitude;Ks.latitude2;Ks.longitude2;var _f=xn(Ks,["x","y","x2","y2","xError","yError","xError2","yError2","latitude","longitude","latitude2","longitude2"]),r0e=ri(_f),i0e={x:1,y:1},rS=ri(i0e);_f.text;_f.tooltip;_f.href;_f.detail;_f.key;_f.order;var s0e=xn(_f,["text","tooltip","href","detail","key","order"]),a0e=ri(s0e);function o0e(t){return!!_f[t]}var l0e=le({},i0e,s0e),iS=ri(l0e);function Dm(t){return!!l0e[t]}function u0e(t,e,n){if(At([nb,eb,rb,tb],n)&&At([Hu,wf],e)){var r=t[e===Hu?rn:In];return!!(Ge(r)&&Ge(t[e])&&ha(r.bin))}else return n in c0e(e)}function c0e(t){switch(t){case Vl:case ih:case sh:case XU:case YU:case ZU:case JU:case KU:case ah:case Nm:case $m:case Im:case Rd:case Od:return{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,rect:!0,line:!0,trail:!0,area:!0,text:!0,geoshape:!0};case rn:case In:case sb:case ob:return{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,rect:!0,line:!0,trail:!0,area:!0,text:!0};case Hu:case wf:case ab:case qp:return{rule:!0,bar:!0,rect:!0,area:!0};case Mm:return{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,text:!0,line:!0,trail:!0};case Aa:return{point:!0,geoshape:!0};case qU:return{text:!0};case WU:case GU:case HU:case jU:return{}}}function fx(t){switch(t){case rn:case In:case Mm:case Im:case ah:case Nm:case $m:case Hu:case wf:case WU:case GU:case HU:case jU:return"continuous";case Rd:case Od:case Aa:case qU:case ZU:case JU:return"discrete";case Vl:case ih:case sh:return"flexible";case sb:case ob:case ab:case qp:case XU:case YU:case KU:return}throw new Error("rangeType not implemented for "+t)}const Bkt=Object.freeze(Object.defineProperty({__proto__:null,CHANNELS:U$,COLOR:Vl,COLUMN:Od,get Channel(){return Lt},DETAIL:XU,FILL:ih,FILLOPACITY:Nm,GEOPOSITION_CHANNELS:n0e,GEOPOSITION_CHANNEL_INDEX:QU,HREF:JU,KEY:YU,LATITUDE:sb,LATITUDE2:ab,LONGITUDE:ob,LONGITUDE2:qp,NONPOSITION_CHANNELS:r0e,NONPOSITION_SCALE_CHANNELS:a0e,OPACITY:ah,ORDER:KU,POSITION_SCALE_CHANNELS:rS,ROW:Rd,SCALE_CHANNELS:iS,SHAPE:Aa,SINGLE_DEF_CHANNELS:Pkt,SIZE:Mm,STROKE:sh,STROKEOPACITY:$m,STROKEWIDTH:Im,TEXT:qU,TOOLTIP:ZU,UNIT_CHANNELS:zkt,X:rn,X2:Hu,XERROR:WU,XERROR2:HU,Y:In,Y2:wf,YERROR:GU,YERROR2:jU,getSupportedMark:c0e,isChannel:eV,isColorChannel:cx,isNonPositionScaleChannel:o0e,isScaleChannel:Dm,rangeType:fx,supportMark:u0e},Symbol.toStringTag,{value:"Module"}));function sS(t){return By(t)?"bin":"bin"+He(t).map(function(e){return Gu("_"+e+"_"+t[e])}).join("")}function Jn(t){return t===!0||tV(t)}function ha(t){return t==="binned"}function tV(t){return Gt(t)}function VP(t){switch(t){case Rd:case Od:case Mm:case Vl:case ih:case sh:case Im:case ah:case Nm:case $m:case Aa:return 6;default:return 10}}const Ukt=Object.freeze(Object.defineProperty({__proto__:null,autoMaxBins:VP,binToString:sS,isBinParams:tV,isBinned:ha,isBinning:Jn},Symbol.toStringTag,{value:"Module"}));var wn;(function(t){t.LINEAR="linear",t.BIN_LINEAR="bin-linear",t.LOG="log",t.POW="pow",t.SQRT="sqrt",t.TIME="time",t.UTC="utc",t.SEQUENTIAL="sequential",t.QUANTILE="quantile",t.QUANTIZE="quantize",t.THRESHOLD="threshold",t.ORDINAL="ordinal",t.BIN_ORDINAL="bin-ordinal",t.POINT="point",t.BAND="band"})(wn||(wn={}));var WP={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric","bin-linear":"bin-linear",time:"time",utc:"time",sequential:"sequential",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"},f0e=He(WP);function d0e(t,e){var n=WP[t],r=WP[e];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}var Vkt={linear:0,log:1,pow:1,sqrt:1,time:0,utc:0,point:10,band:11,"bin-linear":0,sequential:0,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function GP(t){return Vkt[t]}var nV=["linear","bin-linear","log","pow","sqrt","time","utc"],Wkt=dn(nV),h0e=["quantile","quantize","threshold"],Gkt=dn(h0e),p0e=nV.concat(["sequential","quantile","quantize","threshold"]),Hkt=dn(p0e),m0e=["ordinal","bin-ordinal","point","band"],jkt=dn(m0e),qkt=dn(["bin-linear","bin-ordinal"]),Xkt=["time","utc"];function _s(t){return t in jkt}function aS(t){return t in qkt}function Sf(t){return t in Hkt}function bu(t){return t in Wkt}function yw(t){return t in Gkt}var rV={textXRangeStep:90,rangeStep:21,pointPadding:.5,bandPaddingInner:.1,facetSpacing:16,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4};function g0e(t){return t&&!!t.name}function V$(t){return t&&t.selection}var Rm={type:1,domain:1,range:1,rangeStep:1,scheme:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},Ykt=ri(Rm);Rm.type;Rm.domain;Rm.range;Rm.rangeStep;Rm.scheme;var Kkt=xn(Rm,["type","domain","range","rangeStep","scheme"]),v0e=ri(Kkt),y0e=Jkt();function iV(t,e){switch(e){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":return At(["sequential","ordinal","bin-ordinal","quantile","quantize","threshold"],t);case"interpolate":return At(["linear","bin-linear","pow","log","sqrt","utc","time"],t);case"round":return bu(t)||t==="band"||t==="point";case"padding":return bu(t)||At(["point","band"],t);case"paddingOuter":case"rangeStep":return At(["point","band"],t);case"paddingInner":return t==="band";case"clamp":return bu(t)||t==="sequential";case"nice":return bu(t)||t==="sequential"||t==="quantize";case"exponent":return t==="pow";case"base":return t==="log";case"zero":return Sf(t)&&!At(["log","time","utc","bin-linear","threshold","quantile"],t)}throw new Error("Invalid scale property "+e+".")}function sV(t,e){switch(e){case"interpolate":case"scheme":return cx(t)?void 0:Xe.cannotUseScalePropertyWithNonColor(t);case"type":case"domain":case"range":case"base":case"exponent":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeStep":case"reverse":case"round":case"clamp":case"zero":return}throw new Error('Invalid scale property "'+e+'".')}function aV(t,e,n){return At([da.ORDINAL,da.NOMINAL],e)?t===void 0||_s(t):e===da.TEMPORAL?At([wn.TIME,wn.UTC,wn.SEQUENTIAL,void 0],t):e===da.QUANTITATIVE?At(n?[wn.BIN_LINEAR,wn.BIN_ORDINAL,wn.LINEAR]:[wn.LOG,wn.POW,wn.SQRT,wn.QUANTILE,wn.QUANTIZE,wn.THRESHOLD,wn.LINEAR,wn.SEQUENTIAL,void 0],t):!0}function oV(t,e){switch(t){case Lt.X:case Lt.Y:return bu(e)||At(["band","point"],e);case Lt.SIZE:case Lt.STROKEWIDTH:case Lt.OPACITY:case Lt.FILLOPACITY:case Lt.STROKEOPACITY:return bu(e)||yw(e)||At(["band","point"],e);case Lt.COLOR:case Lt.FILL:case Lt.STROKE:return e!=="band";case Lt.SHAPE:return e==="ordinal"}return!1}function Zkt(t,e,n){return y0e[b0e(t,e,n)]}function Jkt(){for(var t={},e=0,n=U$;e<n.length;e++)for(var r=n[e],i=0,s=He($U);i<s.length;i++)for(var a=s[i],o=0,l=f0e;o<l.length;o++)for(var u=l[o],c=0,f=[!1,!0];c<f.length;c++){var d=f[c],h=b0e(r,a,d);oV(r,u)&&aV(u,a,d)&&(t[h]=t[h]||[],t[h].push(u))}return t}function b0e(t,e,n){var r=t+"_"+e;return n?r+"_bin":r}const Qkt=Object.freeze(Object.defineProperty({__proto__:null,CONTINUOUS_DOMAIN_SCALES:p0e,CONTINUOUS_TO_CONTINUOUS_SCALES:nV,CONTINUOUS_TO_DISCRETE_SCALES:h0e,DISCRETE_DOMAIN_SCALES:m0e,NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTIES:v0e,SCALE_PROPERTIES:Ykt,SCALE_TYPES:f0e,SCALE_TYPE_INDEX:y0e,get ScaleType(){return wn},TIME_SCALE_TYPES:Xkt,channelScalePropertyIncompatability:sV,channelSupportScaleType:oV,defaultScaleConfig:rV,getSupportedScaleType:Zkt,hasContinuousDomain:Sf,hasDiscreteDomain:_s,isBinScale:aS,isContinuousToContinuous:bu,isContinuousToDiscrete:yw,isExtendedScheme:g0e,isSelectionDomain:V$,scaleCompatible:d0e,scaleTypePrecedence:GP,scaleTypeSupportDataType:aV,scaleTypeSupportProperty:iV},Symbol.toStringTag,{value:"Module"}));var bw="_vgsid_",eAt={single:{on:"click",fields:[bw],resolve:"global",empty:"all"},multi:{on:"click",fields:[bw],toggle:"event.shiftKey",resolve:"global",empty:"all"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global"}},tAt={zero:1,center:1,normalize:1};function x0e(t){return!!tAt[t]}var w0e=[Qy,eS,vw,eb,nb,rb,tS,z$,tb],_0e=[Qy,eS];function nAt(t){var e=t.x,n=t.y;if(Ge(e)&&Ge(n))if(e.type==="quantitative"&&n.type==="quantitative"){if(e.stack)return"x";if(n.stack)return"y";if(!!e.aggregate!=!!n.aggregate)return e.aggregate?"x":"y"}else{if(e.type==="quantitative")return"x";if(n.type==="quantitative")return"y"}else{if(Ge(e)&&e.type==="quantitative")return"x";if(Ge(n)&&n.type==="quantitative")return"y"}}function W$(t,e,n){var r=ho(t)?t.type:t;if(!At(w0e,r))return null;var i=nAt(e);if(!i)return null;var s=e[i],a=DE(s)?mt(s,{}):void 0,o=i==="x"?"y":"x",l=e[o],u=DE(l)?mt(l,{}):void 0,c=r0e.reduce(function(d,h){if(Wo(e,h)){var p=e[h];(je(p)?p:[p]).forEach(function(m){var g=io(m);if(!g.aggregate){var v=DE(g)?mt(g,{}):void 0;(!v||v!==u&&v!==a)&&d.push({channel:h,fieldDef:g})}})}return d},[]);if(c.length===0)return null;var f;return s.stack!==void 0?f=s.stack:At(_0e,r)?f=un(n,"zero"):f=n,!f||!x0e(f)?null:(s.scale&&s.scale.type&&s.scale.type!==wn.LINEAR&&Ke(Xe.cannotStackNonLinearScale(s.scale.type)),Wo(e,i===rn?Hu:wf)?(s.stack!==void 0&&Ke(Xe.cannotStackRangedMark(i)),null):(s.aggregate&&!At(dge,s.aggregate)&&Ke(Xe.stackNonSummativeAggregate(s.aggregate)),{groupbyChannel:l?o:void 0,fieldChannel:i,impute:ib(r),stackBy:c,offset:f}))}const rAt=Object.freeze(Object.defineProperty({__proto__:null,STACKABLE_MARKS:w0e,STACK_BY_DEFAULT_MARKS:_0e,isStackOffset:x0e,stack:W$},Symbol.toStringTag,{value:"Module"}));function S0e(t,e){return oS(t,e)}function oS(t,e){if(Om(t))return iAt(t,e);if(sc(t))return T0e(t,e);if(lb(t))return sAt(t,e);if(Xp(t))return aAt(t,e);if(G$(t))return oAt(t,e);if(Cf(t)){var n=Wo(t.encoding,Rd),r=Wo(t.encoding,Od);return n||r?lAt(t,e):xw(t,e)}throw new Error(Xe.INVALID_SPEC)}function iAt(t,e){var n=t.spec,r=xn(t,["spec"]);return le({},r,{spec:oS(n,e)})}function C0e(t){var e=t.parentEncoding,n=t.encoding;if(e&&n){var r=He(e).reduce(function(s,a){return n[a]&&s.push(a),s},[]);r.length>0&&Ke(Xe.encodingOverridden(r))}var i=le({},e||{},n||{});return He(i).length>0?i:void 0}function E0e(t){var e=t.parentProjection,n=t.projection;return e&&n&&Ke(Xe.projectionOverridden({parentProjection:e,projection:n})),n||e}function T0e(t,e,n,r){var i=t.layer,s=t.encoding,a=t.projection,o=xn(t,["layer","encoding","projection"]),l=C0e({parentEncoding:n,encoding:s}),u=E0e({parentProjection:r,projection:a});return le({},o,{layer:i.map(function(c){return sc(c)?T0e(c,e,l,u):xw(c,e,l,u)})})}function sAt(t,e){var n=t.spec,r=xn(t,["spec"]);return le({},r,{spec:oS(n,e)})}function aAt(t,e){var n=t.vconcat,r=xn(t,["vconcat"]);return le({},r,{vconcat:n.map(function(i){return oS(i,e)})})}function oAt(t,e){var n=t.hconcat,r=xn(t,["hconcat"]);return le({},r,{hconcat:n.map(function(i){return oS(i,e)})})}function lAt(t,e){var n=t.encoding,r=n.row,i=n.column,s=xn(n,["row","column"]),a=t.mark,o=t.width,l=t.projection,u=t.height,c=t.selection;t.encoding;var f=xn(t,["mark","width","projection","height","selection","encoding"]);return le({},f,{facet:le({},r?{row:r}:{},i?{column:i}:{}),spec:xw(le({},l?{projection:l}:{},{mark:a},o?{width:o}:{},u?{height:u}:{},{encoding:s},c?{selection:c}:{}),e)})}function uAt(t){return VU(t.mark)}function cAt(t,e,n){return t.point==="transparent"?{opacity:0}:t.point?Gt(t.point)?t.point:{}:t.point!==void 0?null:e.point||n.shape?Gt(e.point)?e.point:{}:null}function fAt(t,e){return t.line?t.line===!0?{}:t.line:t.line!==void 0?null:e.line?e.line===!0?{}:e.line:null}function xw(t,e,n,r){var i=t.encoding,s=t.projection,a=ho(t.mark)?t.mark.type:t.mark;if(n||r){var o=E0e({parentProjection:r,projection:s}),l=C0e({parentEncoding:n,encoding:i});return xw(le({},t,o?{projection:o}:{},l?{encoding:l}:{}),e)}return uAt(t)?nye(i)?dAt(t):a==="line"&&(i.x2||i.y2)?(Ke(Xe.lineWithRange(!!i.x2,!!i.y2)),xw(le({mark:"rule"},t),e,n,r)):ib(a)?hAt(t,e):t:dye(t,e)}function dAt(t){var e=Wo(t.encoding,rn),n=Wo(t.encoding,In),r=Wo(t.encoding,Hu),i=Wo(t.encoding,wf);if(r&&!e||i&&!n){var s=En(t);return r&&!e&&(s.encoding.x=s.encoding.x2,delete s.encoding.x2),i&&!n&&(s.encoding.y=s.encoding.y2,delete s.encoding.y2),s}return t}function iZ(t){t.point,t.line;var e=xn(t,["point","line"]);return He(e).length>1?e:e.type}function hAt(t,e){e===void 0&&(e={});var n,r=t.selection,i=t.projection,s=t.encoding,a=t.mark,o=xn(t,["selection","projection","encoding","mark"]),l=ho(a)?a:{type:a},u=cAt(l,e[l.type],s),c=l.type==="area"&&fAt(l,e[l.type]);if(!u&&!c)return le({},t,{mark:iZ(l)});var f=[le({},r?{selection:r}:{},{mark:iZ(le({},l,l.type==="area"?{opacity:.7}:{})),encoding:vU(s,["shape"])})],d=W$(l,s,e?e.stack:void 0),h=s;if(d){var p=d.fieldChannel,m=d.offset;h=le({},s,(n={},n[p]=le({},s[p],m?{stack:m}:{}),n))}return c&&f.push(le({},i?{projection:i}:{},{mark:le({type:"line"},PP(l,["clip","interpolate","tension"]),c),encoding:h})),u&&f.push(le({},i?{projection:i}:{},{mark:le({type:"point",opacity:1,filled:!0},PP(l,["clip"]),u),encoding:h})),le({},o,{layer:f})}function Om(t){return t.facet!==void 0}function Cf(t){return!!t.mark}function sc(t){return t.layer!==void 0}function lb(t){return t.repeat!==void 0}function lV(t){return Xp(t)||G$(t)}function Xp(t){return t.vconcat!==void 0}function G$(t){return t.hconcat!==void 0}function iO(t,e){return e.forEach(function(n){var r=["field","type","value","timeUnit","bin","aggregate"].reduce(function(s,a){return n[a]!==void 0&&(s[a]=n[a]),s},{}),i=Pr(r);t[i]=t[i]||n}),t}function V1(t,e){if(e===void 0&&(e={}),sc(t))t.layer.forEach(function(r){Cf(r)?iO(e,hx(r.encoding)):V1(r,e)});else if(Om(t))iO(e,hx(t.facet)),V1(t.spec,e);else if(lb(t))V1(t.spec,e);else if(lV(t)){var n=Xp(t)?t.vconcat:t.hconcat;n.forEach(function(r){return V1(r,e)})}else iO(e,hx(t.encoding));return e}function pAt(t){return Gc(V1(t))}function mAt(t,e){return e=e||t.config,VU(t.mark)?W$(t.mark,t.encoding,e?e.stack:void 0)!==null:!1}function uV(t){if(Om(t)||lb(t))return yAt(t);if(sc(t))return vAt(t);if(Cf(t))return gAt(t);throw new Error(Xe.INVALID_SPEC)}function gAt(t){var e=[];return Q$(t.encoding,function(n,r){e.push(n.field)}),e}function vAt(t){var e=[];return t.layer.map(function(n){e=e.concat(uV(n))}),e}function yAt(t){return uV(t.spec)}const bAt=Object.freeze(Object.defineProperty({__proto__:null,fieldDefs:pAt,isConcatSpec:lV,isFacetSpec:Om,isHConcatSpec:G$,isLayerSpec:sc,isRepeatSpec:lb,isStacked:mAt,isUnitSpec:Cf,isVConcatSpec:Xp,normalize:S0e,usedFields:uV},Symbol.toStringTag,{value:"Module"}));function k0e(t){var e=t.anchor;t.frame;var n=t.offset,r=t.orient,i=t.color,s=xn(t,["anchor","frame","offset","orient","color"]),a=le({},s,i?{fill:i}:{}),o=le({},e?{anchor:e}:{},n?{offset:n}:{},r?{orient:r}:{});return{mark:a,nonMark:o}}function xAt(t){var e=t||{},n=e.align,r=n===void 0?void 0:n,i=e.center,s=i===void 0?void 0:i,a=e.bounds,o=a===void 0?void 0:a,l=e.spacing,u=l===void 0?void 0:l;return{align:r,bounds:o,center:s,spacing:u}}function sZ(t){return Bt(t)?{type:t}:t||{}}function wAt(t,e,n){n===void 0&&(n=!0);var r=le({type:"pad"},sZ(e),sZ(t));return r.type==="fit"&&(n||(Ke(Xe.FIT_NON_SINGLE),r.type="pad")),r}var _At=["background","padding"];function aZ(t){return _At.reduce(function(e,n){return t&&t[n]!==void 0&&(e[n]=t[n]),e},{})}function cV(t){return t.filter!==void 0}function A0e(t){return t&&t.start!==void 0&&t.stop!==void 0}function M0e(t){return t.lookup!==void 0}function N0e(t){return t.sample!==void 0}function $0e(t){return t.window!==void 0}function I0e(t){return t.flatten!==void 0}function D0e(t){return t.calculate!==void 0}function R0e(t){return!!t.bin}function O0e(t){return t.impute!==void 0}function F0e(t){return t.timeUnit!==void 0}function L0e(t){return t.aggregate!==void 0}function P0e(t){return t.stack!==void 0}function z0e(t){return t.fold!==void 0}function B0e(t){return t.map(function(e){return cV(e)?{filter:IE(e.filter,N3t)}:e})}const SAt=Object.freeze(Object.defineProperty({__proto__:null,isAggregate:L0e,isBin:R0e,isCalculate:D0e,isFilter:cV,isFlatten:I0e,isFold:z0e,isImpute:O0e,isImputeSequence:A0e,isLookup:M0e,isSample:N0e,isStack:P0e,isTimeUnit:F0e,isWindow:$0e,normalizeTransform:B0e},Symbol.toStringTag,{value:"Module"}));function HP(t){return!!t.signal}function ju(t){return!!t.step}function CAt(t){return je(t)?!1:"fields"in t&&!("data"in t)}function EAt(t){return je(t)?!1:"fields"in t&&"data"in t}function id(t){return je(t)?!1:"field"in t&&"data"in t}var TAt={opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeMiterLimit:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,cursor:1,href:1,tooltip:1,cornerRadius:1},kAt=ri(TAt);function AAt(t,e){return je(t)?t.map(function(n){return Zk(n,e)}).join(", "):t}function W1(t,e,n,r){r===void 0&&(r={header:!1});var i=t.combine(),s=i.orient,a=i.scale,o=i.title,l=i.zindex,u=xn(i,["orient","scale","title","zindex"]);if(He(u).forEach(function(m){var g=mge[m];g&&g!==e&&g!=="both"&&delete u[m]}),e==="grid"){if(!u.grid)return;if(u.encode){var c=u.encode.grid;u.encode=le({},c?{grid:c}:{}),He(u.encode).length===0&&delete u.encode}return le({scale:a,orient:s},u,{domain:!1,labels:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:un(l,0)})}else{if(!r.header&&t.mainExtracted)return;if(u.encode){for(var f=0,d=xU;f<d.length;f++){var h=d[f];t.hasAxisPart(h)||delete u.encode[h]}He(u.encode).length===0&&delete u.encode}var p=AAt(o,n);return le({scale:a,orient:s,grid:!1},p?{title:p}:{},u,{zindex:un(l,1)})}}function MAt(t,e){var n=t.x,r=n===void 0?[]:n,i=t.y,s=i===void 0?[]:i;return r.map(function(a){return W1(a,"main",e)}).concat(r.map(function(a){return W1(a,"grid",e)}),s.map(function(a){return W1(a,"main",e)}),s.map(function(a){return W1(a,"grid",e)})).filter(function(a){return a})}var fV={titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontWeight:"fontWeight",titleLimit:"limit",titlePadding:"offset"},dV={labelAngle:"angle",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelLimit:"limit",labelPadding:"offset"},U0e=Object.keys(fV),V0e=Object.keys(dV);const NAt=Object.freeze(Object.defineProperty({__proto__:null,HEADER_LABEL_PROPERTIES:V0e,HEADER_LABEL_PROPERTIES_MAP:dV,HEADER_TITLE_PROPERTIES:U0e,HEADER_TITLE_PROPERTIES_MAP:fV},Symbol.toStringTag,{value:"Module"}));function Yo(t){return!!t&&(t.op==="count"||!!t.field)&&!!t.op}function hV(t){return!!t&&je(t)}const $At=Object.freeze(Object.defineProperty({__proto__:null,isSortArray:hV,isSortField:Yo},Symbol.toStringTag,{value:"Module"}));var xi=function(){function t(e,n){this.debugName=n,this._children=[],this._parent=null,e&&(this.parent=e)}return t.prototype.clone=function(){throw new Error("Cannot clone node")},t.prototype.hash=function(){return this._hash===void 0&&(this._hash=oge()),this._hash},t.prototype.producedFields=function(){return{}},t.prototype.dependentFields=function(){return{}},Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},set:function(e){this._parent=e,e.addChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),t.prototype.numChildren=function(){return this._children.length},t.prototype.addChild=function(e,n){if(this._children.indexOf(e)>-1){console.warn("Attempt to add the same child twice.");return}n!==void 0?this._children.splice(n,0,e):this._children.push(e)},t.prototype.removeChild=function(e){var n=this._children.indexOf(e);return this._children.splice(n,1),n},t.prototype.remove=function(){for(var e=this._parent.removeChild(this),n=0,r=this._children;n<r.length;n++){var i=r[n];i._parent=this._parent,this._parent.addChild(i,e++)}},t.prototype.insertAsParentOf=function(e){var n=e.parent;n.removeChild(this),this.parent=n,e.parent=this},t.prototype.swapWithParent=function(){for(var e=this._parent,n=e.parent,r=0,i=this._children;r<i.length;r++){var s=i[r];s.parent=e}this._children=[],e.removeChild(this),e.parent.removeChild(e),this.parent=n,e.parent=this},t}(),Fl=function(t){Qt(e,t);function e(n,r,i,s){var a=t.call(this,n,r)||this;return a.type=i,a.refCounts=s,a._source=a._name=r,a.refCounts&&!(a._name in a.refCounts)&&(a.refCounts[a._name]=0),a}return e.prototype.clone=function(){var n=new this.constructor;return n.debugName="clone_"+this.debugName,n._source=this._source,n._name="clone_"+this._name,n.type=this.type,n.refCounts=this.refCounts,n.refCounts[n._name]=0,n},e.prototype.getSource=function(){return this.refCounts[this._name]++,this._source},e.prototype.isRequired=function(){return!!this.refCounts[this._name]},e.prototype.setSource=function(n){this._source=n},e}(xi);function jP(t){var e=[];return t.type==="Identifier"?[t.name]:t.type==="Literal"?[t.value]:(t.type==="MemberExpression"&&(e=e.concat(jP(t.object)),e=e.concat(jP(t.property))),e)}function W0e(t){return t.object.type==="MemberExpression"?W0e(t.object):t.object.name==="datum"}function G0e(t){var e=zpe(t),n={};return e.visit(function(r){r.type==="MemberExpression"&&W0e(r)&&(n[jP(r).slice(1).join(".")]=!0)}),n}var Qk=function(t){Qt(e,t);function e(n,r){var i=t.call(this,n)||this;return i.transform=r,i._dependentFields=G0e(i.transform.calculate),i}return e.prototype.clone=function(){return new e(null,En(this.transform))},e.parseAllForSortIndex=function(n,r){return r.forEachFieldDef(function(i,s){if(L$(i)&&hV(i.sort)){var a=i.field,o=i.timeUnit,l=i.sort,u=l.map(function(c,f){return Pve({field:a,timeUnit:o,equal:c})+" ? "+f+" : "}).join("")+l.length;n=new e(n,{calculate:u,as:sv(i,s,{forAs:!0})})}}),n},e.prototype.producedFields=function(){var n={};return n[this.transform.as]=!0,n},e.prototype.dependentFields=function(){return this._dependentFields},e.prototype.assemble=function(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}},e.prototype.hash=function(){return"Calculate "+Pr(this.transform)},e}(xi);function sv(t,e,n){return mt(t,le({prefix:e,suffix:"sort_index"},n||{}))}var oZ=["row","column"],IAt=["header","footer"];function DAt(t){return t==="top"||t==="left"?"header":"footer"}function RAt(t,e){var n=t.component.layoutHeaders[e].title,r=t.config?t.config:void 0,i=t.component.layoutHeaders[e].facetFieldDef?t.component.layoutHeaders[e].facetFieldDef:void 0;return{name:e+"-title",type:"group",role:e+"-title",title:le({text:n,offset:10},e==="row"?{orient:"left"}:{},{style:"guide-title"},H0e(r,i,U0e,fV))}}function OAt(t,e){for(var n=t.component.layoutHeaders[e],r=[],i=0,s=IAt;i<s.length;i++){var a=s[i];if(n[a])for(var o=0,l=n[a];o<l.length;o++){var u=l[o];r.push(zAt(t,e,a,n,u))}}return r}function FAt(t){return t=(t%360+360)%360,(t+90)%180===0?{}:t<90||270<t?{align:{value:"right"}}:135<=t&&t<225?{align:{value:"left"}}:{}}function LAt(t){return t=(t%360+360)%360,45<=t&&t<=135?{baseline:"top"}:{baseline:"middle"}}function PAt(t,e){var n=t.sort;return Yo(n)?{field:mt(n,{expr:"datum"}),order:n.order||"ascending"}:je(n)?{field:sv(t,e,{expr:"datum"}),order:"ascending"}:{field:mt(t,{expr:"datum"}),order:n||"ascending"}}function zAt(t,e,n,r,i){var s;if(i){var a=null,o=r.facetFieldDef;if(o&&i.labels){var l=o.header,u=l===void 0?{}:l,c=u.format,f=u.labelAngle,d=t.config?t.config:void 0,h=le({},FAt(f));a=le({text:qve(o,c,"parent",t.config),offset:10},e==="row"?{orient:"left"}:{},{style:"guide-label"},f!==void 0?{angle:f}:{},LAt(f),H0e(d,o,V0e,dV),He(h).length>0?{encode:{update:h}}:{})}var p=i.axes,m=p&&p.length>0;if(a||m){var g=e==="row"?"height":"width";return le({name:t.getName(e+"_"+n),type:"group",role:e+"-"+n},r.facetFieldDef?{from:{data:t.getName(e+"_domain")},sort:PAt(o,e)}:{},a?{title:a}:{},i.sizeSignal?{encode:{update:(s={},s[g]=i.sizeSignal,s)}}:{},m?{axes:p}:{})}}return null}function H0e(t,e,n,r){for(var i={},s=0,a=n;s<a.length;s++){var o=a[s];t&&t.header&&t.header[o]&&(i[r[o]]=t.header[o]),e&&e.header&&e.header[o]&&(i[r[o]]=e.header[o])}return i}function pV(t){return[].concat(lZ(t,"width"),lZ(t,"height"))}function lZ(t,e){var n=e==="width"?"x":"y",r=t.component.layoutSize.get(e);if(!r||r==="merged")return[];var i=t.getSizeSignalRef(e).signal;if(r==="range-step"){var s=t.getScaleComponent(n);if(s){var a=s.get("type"),o=s.get("range");if(_s(a)&&ju(o)){var l=t.scaleName(n);if($u(t.parent)){var u=t.parent.component.resolve;if(u.scale[n]==="independent")return[uZ(l,o)]}return[uZ(l,o),{name:i,update:j0e(l,s,"domain('"+l+"').length")}]}}throw new Error("layout size is range step although there is no rangeStep.")}else return[{name:i,value:r}]}function uZ(t,e){return{name:t+"_step",value:e.step}}function j0e(t,e,n){var r=e.get("type"),i=e.get("padding"),s=un(e.get("paddingOuter"),i),a=e.get("paddingInner");return a=r==="band"?a!==void 0?a:i:1,"bandspace("+n+", "+a+", "+s+") * "+t+"_step"}var q0e={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64},X0e={clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,direction:1,fillColor:1,format:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,strokeWidth:1,symbolFillColor:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,title:1,titleAlign:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontWeight:1,titleLimit:1,titleOpacity:1,titlePadding:1,type:1,values:1,zindex:1},BAt=le({},X0e,{opacity:1,shape:1,stroke:1,fill:1,size:1,encode:1}),Y0e=ri(X0e),K0e=ri(BAt);const UAt=Object.freeze(Object.defineProperty({__proto__:null,LEGEND_PROPERTIES:Y0e,VG_LEGEND_PROPERTIES:K0e,defaultLegendConfig:q0e},Symbol.toStringTag,{value:"Module"}));function VAt(t,e){if(lv(e)||$u(e))return"shared";if(bV(e)||yV(e))return At(rS,t)?"independent":"shared";throw new Error("invalid model type for resolve")}function mV(t,e){var n=t.scale[e],r=At(rS,e)?"axis":"legend";return n==="independent"?(t[r][e]==="shared"&&Ke(Xe.independentScaleMeansIndependentGuide(e)),"independent"):t[r][e]||"shared"}var Fm=function(){function t(e,n){e===void 0&&(e={}),n===void 0&&(n={}),this.explicit=e,this.implicit=n}return t.prototype.clone=function(){return new t(En(this.explicit),En(this.implicit))},t.prototype.combine=function(){return le({},this.explicit,this.implicit)},t.prototype.get=function(e){return un(this.explicit[e],this.implicit[e])},t.prototype.getWithExplicit=function(e){return this.explicit[e]!==void 0?{explicit:!0,value:this.explicit[e]}:this.implicit[e]!==void 0?{explicit:!1,value:this.implicit[e]}:{explicit:!1,value:void 0}},t.prototype.setWithExplicit=function(e,n){n.value!==void 0&&this.set(e,n.value,n.explicit)},t.prototype.set=function(e,n,r){return delete this[r?"implicit":"explicit"][e],this[r?"explicit":"implicit"][e]=n,this},t.prototype.copyKeyFromSplit=function(e,n){n.explicit[e]!==void 0?this.set(e,n.explicit[e],!0):n.implicit[e]!==void 0&&this.set(e,n.implicit[e],!1)},t.prototype.copyKeyFromObject=function(e,n){n[e]!==void 0&&this.set(e,n[e],!0)},t.prototype.copyAll=function(e){for(var n=0,r=He(e.combine());n<r.length;n++){var i=r[n],s=e.getWithExplicit(i);this.setWithExplicit(i,s)}},t}();function sO(t){return{explicit:!0,value:t}}function Z0e(t){return{explicit:!1,value:t}}function J0e(t){return function(e,n,r,i){var s=t(e.value,n.value);return s>0?e:s<0?n:H$(e,n,r,i)}}function H$(t,e,n,r){return t.explicit&&e.explicit&&Ke(Xe.mergeConflictingProperty(n,r,t.value,e.value)),t}function lS(t,e,n,r,i){return i===void 0&&(i=H$),t===void 0||t.value===void 0?e:t.explicit&&!e.explicit?t:e.explicit&&!t.explicit?e:Yn(t.value)===Yn(e.value)?t:i(t,e,n,r)}var WAt=function(t){Qt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Fm);function GAt(t,e,n,r,i){if(i.get("type")!=="gradient"){var s=le({},L3t({},n,Zge),Vve(n));switch(n.mark){case Qy:case tb:case z$:s.shape={value:"square"};break;case nb:case rb:s.shape={value:n.mark};break}var a=n.markDef,o=n.encoding,l=a.filled,u=Q0e(o.opacity)||a.opacity;if(s.fill){if(r==="fill"||l&&r===Vl)delete s.fill;else if(s.fill.field)i.get("symbolFillColor")?delete s.fill:(s.fill={value:"black"},s.fillOpacity={value:u||1});else if(je(s.fill)){var c=aO(o.fill||o.color)||a.fill||l&&a.color;c&&(s.fill={value:c})}}if(s.stroke){if(r==="stroke"||!l&&r===Vl)delete s.stroke;else if(s.stroke.field)delete s.stroke;else if(je(s.stroke)){var f=un(aO(o.stroke||o.color),a.stroke,l?a.color:void 0);f&&(s.stroke={value:f})}}if(r!==Aa){var d=aO(o.shape)||a.shape;d&&(s.shape={value:d})}return r!==ah&&u&&(s.opacity={value:u}),s=le({},s,e),He(s).length>0?s:void 0}}function HAt(t,e,n,r,i){var s={};if(i.get("type")==="gradient"){var a=Q0e(n.encoding.opacity)||n.markDef.opacity;a&&(s.opacity={value:a})}return s=le({},s,e),He(s).length>0?s:void 0}function jAt(t,e,n,r,i){var s=n.legend(r),a=n.config,o={};if(Jy(t)){var l=n.getScaleComponent(r).get("type")===wn.UTC,u=NV("datum.value",t.timeUnit,s.format,a.legend.shortTimeLabels,a.timeFormat,l);e=le({},u?{text:{signal:u}}:{},e)}return o=le({},o,e),He(o).length>0?o:void 0}function Q0e(t){return eve(t,function(e,n){return Math.max(e,n.value)})}function aO(t){return eve(t,function(e,n){return un(e,n.value)})}function eve(t,e){if(Dge(t))return(je(t.condition)?t.condition:[t.condition]).reduce(e,t.value);if(sf(t))return t.value}const cZ=Object.freeze(Object.defineProperty({__proto__:null,gradient:HAt,labels:jAt,symbols:GAt},Symbol.toStringTag,{value:"Module"}));function qAt(t,e){var n=t.values;if(n)return zU(e,n)}function XAt(t,e,n){var r=n.gradientDirection,i=n.gradientHorizontalMaxLength,s=n.gradientHorizontalMinLength,a=n.gradientVerticalMaxLength,o=n.gradientVerticalMinLength,l=un(e.direction,r);if(l==="horizontal"){var u=un(e.orient,n.orient);return u==="top"||u==="bottom"?fZ(t,"width",s,i):s}else return fZ(t,"height",o,a)}function fZ(t,e,n,r){var i=t.getSizeSignalRef(e).signal;return{signal:"clamp("+i+", "+n+", "+r+")"}}function YAt(t){if(At(["quantile","threshold","log"],t))return"greedy"}function tve(t){Os(t)?t.component.legends=KAt(t):t.component.legends=tMt(t)}function KAt(t){var e=t.encoding;return[Vl,ih,sh,Im,Mm,Aa,ah,Nm,$m].reduce(function(n,r){var i=e[r];return t.legend(r)&&t.getScaleComponent(r)&&!(Ge(i)&&r===Aa&&i.type===Am)&&(n[r]=QAt(t,r)),n},{})}function ZAt(t,e){var n;switch(e){case Vl:var r=t.scaleName(Vl);return t.markDef.filled?{fill:r}:{stroke:r};case ih:case sh:case Im:case Mm:case Aa:case ah:case Nm:case $m:return n={},n[e]=t.scaleName(e),n}}function JAt(t,e,n,r){switch(e){case"values":return!!n.values;case"title":if(e==="title"&&t===r.title)return!0}return t===n[e]}function QAt(t,e){for(var n=t.fieldDef(e),r=t.legend(e),i=new WAt({},ZAt(t,e)),s=0,a=Y0e;s<a.length;s++){var o=a[s],l=eMt(o,r,e,t);if(l!==void 0){var u=JAt(l,o,r,n);(u||t.config.legend[o]===void 0)&&i.set(o,l,u)}}var c=r.encoding||{},f=["labels","legend","title","symbols","gradient"].reduce(function(d,h){var p=eye(c[h]||{},t),m=cZ[h]?cZ[h](n,p,t,e,i):p;return m!==void 0&&He(m).length>0&&(d[h]={update:m}),d},{});return He(f).length>0&&i.set("encode",f,!!r.encoding),i}function eMt(t,e,n,r){var i=r.fieldDef(n);switch(t){case"format":return MV(i,e.format,r.config);case"title":return J2(i,r.config,{allowDisabling:!0})||void 0;case"labelOverlap":return un(e.labelOverlap,YAt(r.getScaleComponent(n).get("type")));case"gradientLength":var s=r.config.legend;return un(e.gradientLength,s.gradientLength,XAt(r,e,s));case"values":return qAt(e,i)}return e[t]}function tMt(t){for(var e=t.component,n=e.legends,r=e.resolve,i=function(l){tve(l),He(l.component.legends).forEach(function(u){r.legend[u]=mV(t.component.resolve,u),r.legend[u]==="shared"&&(n[u]=nve(n[u],l.component.legends[u]),n[u]||(r.legend[u]="independent",delete n[u]))})},s=0,a=t.children;s<a.length;s++){var o=a[s];i(o)}return He(n).forEach(function(l){for(var u=0,c=t.children;u<c.length;u++){var f=c[u];f.component.legends[l]&&r.legend[l]==="shared"&&delete f.component.legends[l]}}),n}function nve(t,e){if(!t)return e.clone();var n=t.getWithExplicit("orient"),r=e.getWithExplicit("orient");if(!(n.explicit&&r.explicit&&n.value!==r.value)){for(var i=!1,s=function(u){var c=lS(t.getWithExplicit(u),e.getWithExplicit(u),u,"legend",function(f,d){switch(u){case"title":return Qve(f,d);case"type":return i=!0,Z0e("symbol")}return H$(f,d,u,"legend")});t.setWithExplicit(u,c)},a=0,o=K0e;a<o.length;a++){var l=o[a];s(l)}return i&&(((t.implicit||{}).encode||{}).gradient&&Xk(t.implicit,["encode","gradient"]),((t.explicit||{}).encode||{}).gradient&&Xk(t.explicit,["encode","gradient"])),t}}function rve(t){for(var e=t.component.legends,n={},r=0,i=He(e);r<i.length;r++){var s=i[r],a=t.getScaleComponent(s),o=Yn(a.domains);if(n[o])for(var l=0,u=n[o];l<u.length;l++){var c=u[l],f=nve(c,e[s]);f||n[o].push(e[s])}else n[o]=[e[s].clone()]}return jp(Gc(n)).map(function(d){var h=d.combine();if(h.encode&&h.encode.symbols){var p=h.encode.symbols.update;p.fill&&p.fill.value!=="transparent"&&!p.stroke&&!h.stroke&&(p.stroke={value:"transparent"})}return h})}function nMt(t){return lv(t)||bV(t)||yV(t)?rMt(t):ive(t)}function rMt(t){return t.children.reduce(function(e,n){return e.concat(n.assembleProjections())},ive(t))}function ive(t){var e=t.component.projection;if(!e||e.merged)return[];var n=e.combine(),r=n.name,i=xn(n,["name"]),s={signal:"["+e.size.map(function(o){return o.signal}).join(", ")+"]"},a=e.data.reduce(function(o,l){var u=HP(l)?l.signal:"data('"+t.lookupDataSource(l)+"')";return At(o,u)||o.push(u),o},[]);if(a.length<=0)throw new Error("Projection's fit didn't find any data sources");return[le({name:r,size:s,fit:{signal:a.length>1?"["+a.join(", ")+"]":a[0]}},i)]}function av(t){return!!t.url}function ww(t){return!!t.values}function gV(t){return!!t.name&&!av(t)&&!ww(t)}var As="main",_w="raw";const iMt=Object.freeze(Object.defineProperty({__proto__:null,MAIN:As,RAW:_w,isInlineData:ww,isNamedData:gV,isUrlData:av},Symbol.toStringTag,{value:"Module"}));var sMt=["type","clipAngle","clipExtent","center","rotate","precision","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"],sve=function(t){Qt(e,t);function e(n,r,i,s){var a=t.call(this,le({},r),{name:n})||this;return a.specifiedProjection=r,a.size=i,a.data=s,a.merged=!1,a}return e}(Fm);function ave(t){Os(t)?t.component.projection=aMt(t):t.component.projection=lMt(t)}function aMt(t){var e=t.specifiedProjection,n=t.config,r=t.hasProjection;if(r){var i=[];return[[ob,sb],[qp,ab]].forEach(function(s){(t.channelHasField(s[0])||t.channelHasField(s[1]))&&i.push({signal:t.getName("geojson_"+i.length)})}),t.channelHasField(Aa)&&t.fieldDef(Aa).type===Am&&i.push({signal:t.getName("geojson_"+i.length)}),i.length===0&&i.push(t.requestDataName(As)),new sve(t.projectionName(!0),le({},n.projection||{},e||{}),[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")],i)}}function oMt(t,e){var n=yU(sMt,function(i){return!!(!t.explicit.hasOwnProperty(i)&&!e.explicit.hasOwnProperty(i)||t.explicit.hasOwnProperty(i)&&e.explicit.hasOwnProperty(i)&&Yn(t.get(i))===Yn(e.get(i)))}),r=Yn(t.size)===Yn(e.size);if(r){if(n)return t;if(Yn(t.explicit)===Yn({}))return e;if(Yn(e.explicit)===Yn({}))return t}return null}function lMt(t){if(t.children.length!==0){var e,n=yU(t.children,function(s){ave(s);var a=s.component.projection;if(a)if(e){var o=oMt(e,a);return o&&(e=o),!!o}else return e=a,!0;else return!0});if(e&&n){var r=t.projectionName(!0),i=new sve(r,e.specifiedProjection,e.size,En(e.data));return t.children.forEach(function(s){s.component.projection&&(i.data=i.data.concat(s.component.projection.data),s.renameProjection(s.component.projection.get("name"),r),s.component.projection.merged=!0)}),i}}}function qP(t){for(var e=0,n=t;e<n.length;e++){for(var r=n[e],i=0,s=r.children;i<s.length;i++){var a=s[i];if(a.parent!==r)return console.error("Dataflow graph is inconsistent.",parent,a),!1}if(!qP(r.children))return!1}return!0}var ov=function(t){Qt(e,t);function e(n){var r=t.call(this,null)||this;n=n||{name:"source"};var i=n.format?le({},vU(n.format,["parse"])):{};if(ww(n))r._data={values:n.values};else if(av(n)){if(r._data={url:n.url},!i.type){var s=/(?:\.([^.]+))?$/.exec(n.url)[1];At(["json","csv","tsv","dsv","topojson"],s)||(s="json"),i.type=s}}else gV(n)&&(r._data={});return n.name&&(r._name=n.name),i&&He(i).length>0&&(r._data.format=i),r}return Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),e.prototype.hasName=function(){return!!this._name},Object.defineProperty(e.prototype,"dataName",{get:function(){return this._name},set:function(n){this._name=n},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{set:function(n){throw new Error("Source nodes have to be roots.")},enumerable:!0,configurable:!0}),e.prototype.remove=function(){throw new Error("Source nodes are roots and cannot be removed.")},e.prototype.hash=function(){throw new Error("Cannot hash sources")},e.prototype.assemble=function(){return le({name:this._name},this._data,{transform:[]})},e}(xi),ove=function(){function t(){this._mutated=!1}return t.prototype.setMutated=function(){this._mutated=!0},Object.defineProperty(t.prototype,"mutatedFlag",{get:function(){return this._mutated},enumerable:!0,configurable:!0}),t}(),ub=function(t){Qt(e,t);function e(){var n=t.call(this)||this;return n._continue=!1,n}return e.prototype.setContinue=function(){this._continue=!0},Object.defineProperty(e.prototype,"continueFlag",{get:function(){return this._continue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flags",{get:function(){return{continueFlag:this.continueFlag,mutatedFlag:this.mutatedFlag}},set:function(n){var r=n.continueFlag,i=n.mutatedFlag;r&&this.setContinue(),i&&this.setMutated()},enumerable:!0,configurable:!0}),e.prototype.optimizeNextFromLeaves=function(n){if(n instanceof ov)return!1;var r=n.parent,i=this.run(n).continueFlag;return i&&this.optimizeNextFromLeaves(r),this.mutatedFlag},e}(ove),lve=function(t){Qt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(ove);function uMt(t,e,n){return Jn(n.bin)?(t[mt(n,{})]=!0,t[mt(n,{binSuffix:"end"})]=!0,hS(n,e)&&(t[mt(n,{binSuffix:"range"})]=!0)):t[mt(n)]=!0,t}function cMt(t,e){var n;for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];for(var s in i)i.hasOwnProperty(s)&&(r in t?t[r][s]=le({},t[r][s],i[s]):t[r]=(n={},n[s]=i[s],n))}}var cb=function(t){Qt(e,t);function e(n,r,i){var s=t.call(this,n)||this;return s.dimensions=r,s.measures=i,s}return e.prototype.clone=function(){return new e(null,le({},this.dimensions),En(this.measures))},Object.defineProperty(e.prototype,"groupBy",{get:function(){return this.dimensions},enumerable:!0,configurable:!0}),e.makeFromEncoding=function(n,r){var i=!1;r.forEachFieldDef(function(o){o.aggregate&&(i=!0)});var s={},a={};return!i||(r.forEachFieldDef(function(o,l){var u,c,f,d,h=o.aggregate,p=o.field;h?h==="count"?(s["*"]=s["*"]||{},s["*"].count=(u={},u[mt(o,{forAs:!0})]=!0,u)):(s[p]=s[p]||{},s[p][h]=(c={},c[mt(o,{forAs:!0})]=!0,c),Dm(l)&&r.scaleDomain(l)==="unaggregated"&&(s[p].min=(f={},f[mt({field:p,aggregate:"min"},{forAs:!0})]=!0,f),s[p].max=(d={},d[mt({field:p,aggregate:"max"},{forAs:!0})]=!0,d))):uMt(a,l,o)}),He(a).length+He(s).length===0)?null:new e(n,a,s)},e.makeFromTransform=function(n,r){for(var i,s,a,o,l={},u={},c=0,f=r.aggregate;c<f.length;c++){var d=f[c],h=d.op,p=d.field,m=d.as;h&&(h==="count"?(u["*"]=u["*"]||{},u["*"].count=(i={},i[m]=!0,i||(s={},s[mt(d,{forAs:!0})]=!0,s))):(u[p]=u[p]||{},u[p][h]=(a={},a[m]=!0,a||(o={},o[mt(d,{forAs:!0})]=!0,o))))}for(var g=0,v=r.groupby||[];g<v.length;g++){var d=v[g];l[d]=!0}return He(l).length+He(u).length===0?null:new e(n,l,u)},e.prototype.merge=function(n){return ege(this.dimensions,n.dimensions)?(cMt(this.measures,n.measures),!0):(mkt("different dimensions, cannot merge"),!1)},e.prototype.addDimensions=function(n){var r=this;n.forEach(function(i){return r.dimensions[i]=!0})},e.prototype.dependentFields=function(){var n={};return He(this.dimensions).forEach(function(r){return n[r]=!0}),He(this.measures).forEach(function(r){return n[r]=!0}),n},e.prototype.producedFields=function(){for(var n={},r=0,i=He(this.measures);r<i.length;r++)for(var s=i[r],a=0,o=He(this.measures[s]);a<o.length;a++){var l=o[a];He(this.measures[s][l]).length===0?n[l+"_"+s]=!0:On(n,this.measures[s][l])}return n},e.prototype.hash=function(){return"Aggregate "+Pr({dimensions:this.dimensions,measures:this.measures})},e.prototype.assemble=function(){for(var n=[],r=[],i=[],s=0,a=He(this.measures);s<a.length;s++)for(var o=a[s],l=0,u=He(this.measures[o]);l<u.length;l++)for(var c=u[l],f=0,d=He(this.measures[o][c]);f<d.length;f++){var h=d[f];i.push(h),n.push(c),r.push(O$(o))}var p={type:"aggregate",groupby:He(this.dimensions),ops:n,fields:r,as:i};return p},e}(xi),fb=function(t){Qt(e,t);function e(n,r,i,s){var a=t.call(this,n)||this;a.model=r,a.name=i,a.data=s;for(var o=0,l=[Od,Rd];o<l.length;o++){var u=l[o],c=r.facet[u];if(c){var f=c.bin,d=c.sort;a[u]=le({name:r.getName(u+"_domain"),fields:[mt(c)].concat(Jn(f)?[mt(c,{binSuffix:"end"})]:[])},Yo(d)?{sortField:d}:je(d)?{sortIndexField:sv(c,u)}:{})}}return a.childModel=r.child,a}return e.prototype.hash=function(){var n="Facet";return this.column&&(n+=" c:"+Pr(this.column)),this.row&&(n+=" r:"+Pr(this.row)),n},Object.defineProperty(e.prototype,"fields",{get:function(){return(this.column&&this.column.fields||[]).concat(this.row&&this.row.fields||[])},enumerable:!0,configurable:!0}),e.prototype.getSource=function(){return this.name},e.prototype.getChildIndependentFieldsWithStep=function(){for(var n={},r=0,i=["x","y"];r<i.length;r++){var s=i[r],a=this.childModel.component.scales[s];if(a&&!a.merged){var o=a.get("type"),l=a.get("range");if(_s(o)&&ju(l)){var u=j$(this.childModel,s),c=vV(u);c?n[s]=c:Ke("Unknown field for ${channel}.  Cannot calculate view size.")}}}return n},e.prototype.assembleRowColumnData=function(n,r,i){var s=n==="row"?"y":"x",a=[],o=[],l=[];i[s]&&(r?(a.push("distinct_"+i[s]),o.push("max")):(a.push(i[s]),o.push("distinct")),l.push("distinct_"+i[s]));var u=this[n],c=u.sortField,f=u.sortIndexField;if(c){var d=c.op,h=c.field;a.push(h),o.push(d),l.push(mt(c,{forAs:!0}))}else f&&(a.push(f),o.push("max"),l.push(f));return{name:this[n].name,source:r||this.data,transform:[le({type:"aggregate",groupby:this[n].fields},a.length?{fields:a,ops:o,as:l}:{})]}},e.prototype.assemble=function(){var n=[],r=null,i=this.getChildIndependentFieldsWithStep();if(this.column&&this.row&&(i.x||i.y)){r="cross_"+this.column.name+"_"+this.row.name;var s=[].concat(i.x?[i.x]:[],i.y?[i.y]:[]),a=s.map(function(){return"distinct"});n.push({name:r,source:this.data,transform:[{type:"aggregate",groupby:this.column.fields.concat(this.row.fields),fields:s,ops:a}]})}for(var o=0,l=[Od,Rd];o<l.length;o++){var u=l[o];this[u]&&n.push(this.assembleRowColumnData(u,r,i))}return n},e}(xi);function fMt(t,e){var n=Xo(t);if(e==="number")return"toNumber("+n+")";if(e==="boolean")return"toBoolean("+n+")";if(e==="string")return"toString("+n+")";if(e==="date")return"toDate("+n+")";if(e==="flatten")return n;if(e.indexOf("date:")===0){var r=e.slice(5,e.length);return"timeParse("+n+","+r+")"}else if(e.indexOf("utc:")===0){var r=e.slice(4,e.length);return"utcParse("+n+","+r+")"}else return Ke(Xe.unrecognizedParse(e)),null}var af=function(t){Qt(e,t);function e(n,r){var i=t.call(this,n)||this;return i._parse=r,i}return e.prototype.clone=function(){return new e(null,En(this._parse))},e.prototype.hash=function(){return"Parse "+Pr(this._parse)},e.makeExplicit=function(n,r,i){var s={},a=r.data;return a&&a.format&&a.format.parse&&(s=a.format.parse),this.makeWithAncestors(n,s,{},i)},e.makeImplicitFromFilterTransform=function(n,r,i){var s={};return $E(r.filter,function(a){if(Fve(a)){var o=null;SV(a)?o=a.equal:CV(a)?o=a.range[0]:EV(a)&&(o=(a.oneOf||a.in)[0]),o&&(_U(o)?s[a.field]="date":ei(o)?s[a.field]="number":Bt(o)&&(s[a.field]="string")),a.timeUnit&&(s[a.field]="date")}}),He(s).length===0?null:this.makeWithAncestors(n,{},s,i)},e.makeImplicitFromEncoding=function(n,r,i){var s={};return(Os(r)||$u(r))&&r.forEachFieldDef(function(a){Jy(a)?s[a.field]="date":jge(a)&&fge(a.aggregate)?s[a.field]="number":U1(a.field)>1?a.field in s||(s[a.field]="flatten"):L$(a)&&Yo(a.sort)&&U1(a.sort.field)>1&&(a.sort.field in s||(s[a.sort.field]="flatten"))}),this.makeWithAncestors(n,{},s,i)},e.makeWithAncestors=function(n,r,i,s){for(var a=0,o=He(i);a<o.length;a++){var l=o[a],u=s.getWithExplicit(l);u.value!==void 0&&(u.explicit||u.value===i[l]||u.value==="derived"||i[l]==="flatten"?delete i[l]:Ke(Xe.differentParse(l,i[l],u.value)))}for(var c=0,f=He(r);c<f.length;c++){var l=f[c],u=s.get(l);u!==void 0&&(u===r[l]?delete r[l]:Ke(Xe.differentParse(l,r[l],u)))}var d=new Fm(r,i);s.copyAll(d);for(var h={},p=0,m=He(d.combine());p<m.length;p++){var g=m[p],v=d.get(g);v!==null&&(h[g]=v)}return He(h).length===0||s.parseNothing?null:new e(n,h)},Object.defineProperty(e.prototype,"parse",{get:function(){return this._parse},enumerable:!0,configurable:!0}),e.prototype.merge=function(n){this._parse=le({},this._parse,n.parse),n.remove()},e.prototype.assembleFormatParse=function(){for(var n={},r=0,i=He(this._parse);r<i.length;r++){var s=i[r],a=this._parse[s];U1(s)===1&&(n[s]=a)}return n},e.prototype.producedFields=function(){return dn(He(this._parse))},e.prototype.dependentFields=function(){return dn(He(this._parse))},e.prototype.assembleTransforms=function(n){var r=this;return n===void 0&&(n=!1),He(this._parse).filter(function(i){return n?U1(i)>1:!0}).map(function(i){var s=fMt(i,r._parse[i]);if(!s)return null;var a={type:"formula",expr:s,as:sge(i)};return a}).filter(function(i){return i!==null})},e}(xi);function dMt(t){return t.stack.stackBy.reduce(function(e,n){var r=n.fieldDef,i=mt(r);return i&&e.push(i),e},[])}function hMt(t){return je(t)&&t.every(function(e){return Bt(e)})&&t.length>1}var uS=function(t){Qt(e,t);function e(n,r){var i=t.call(this,n)||this;return i._stack=r,i}return e.prototype.clone=function(){return new e(null,En(this._stack))},e.makeFromTransform=function(n,r){var i=r.stack,s=r.groupby,a=r.as,o=r.offset,l=o===void 0?"zero":o,u=[],c=[];if(r.sort!==void 0)for(var f=0,d=r.sort;f<d.length;f++){var h=d[f];u.push(h.field),c.push(un(h.order,"ascending"))}var p={field:u,order:c},m;return hMt(a)?m=a:Bt(a)?m=[a,a+"_end"]:m=[r.stack+"_start",r.stack+"_end"],new e(n,{stackField:i,groupby:s,offset:l,sort:p,facetby:[],as:m})},e.makeFromEncoding=function(n,r){var i=r.stack;if(!i)return null;var s;i.groupbyChannel&&(s=r.fieldDef(i.groupbyChannel));var a=dMt(r),o=r.encoding.order,l;return je(o)||Ge(o)?l=Kve(o):l=a.reduce(function(u,c){return u.field.push(c),u.order.push("descending"),u},{field:[],order:[]}),new e(n,{dimensionFieldDef:s,stackField:r.vgField(i.fieldChannel),facetby:[],stackby:a,sort:l,offset:i.offset,impute:i.impute,as:[r.vgField(i.fieldChannel,{suffix:"start",forAs:!0}),r.vgField(i.fieldChannel,{suffix:"end",forAs:!0})]})},Object.defineProperty(e.prototype,"stack",{get:function(){return this._stack},enumerable:!0,configurable:!0}),e.prototype.addDimensions=function(n){this._stack.facetby=this._stack.facetby.concat(n)},e.prototype.dependentFields=function(){var n={};n[this._stack.stackField]=!0,this.getGroupbyFields().forEach(function(i){return n[i]=!0}),this._stack.facetby.forEach(function(i){return n[i]=!0});var r=this._stack.sort.field;return je(r)?r.forEach(function(i){return n[i]=!0}):n[r]=!0,n},e.prototype.producedFields=function(){return this._stack.as.reduce(function(n,r){return n[r]=!0,n},{})},e.prototype.hash=function(){return"Stack "+Pr(this._stack)},e.prototype.getGroupbyFields=function(){var n=this._stack,r=n.dimensionFieldDef,i=n.impute,s=n.groupby;return r?r.bin?i?[mt(r,{binSuffix:"mid"})]:[mt(r,{}),mt(r,{binSuffix:"end"})]:[mt(r)]:s||[]},e.prototype.assemble=function(){var n=[],r=this._stack,i=r.facetby,s=r.dimensionFieldDef,a=r.stackField,o=r.stackby,l=r.sort,u=r.offset,c=r.impute,f=r.as;return c&&s&&(s.bin&&n.push({type:"formula",expr:"("+mt(s,{expr:"datum"})+"+"+mt(s,{expr:"datum",binSuffix:"end"})+")/2",as:mt(s,{binSuffix:"mid",forAs:!0})}),n.push({type:"impute",field:a,groupby:o,key:mt(s,{binSuffix:"mid"}),method:"value",value:0})),n.push({type:"stack",groupby:this.getGroupbyFields().concat(i),field:a,sort:l,as:f,offset:u}),n},e}(xi),cS=function(t){Qt(e,t);function e(n,r){var i=t.call(this,n)||this;return i.formula=r,i}return e.prototype.clone=function(){return new e(null,En(this.formula))},e.makeFromEncoding=function(n,r){var i=r.reduceFieldDef(function(s,a){if(a.timeUnit){var o=mt(a,{forAs:!0});s[o]={as:o,timeUnit:a.timeUnit,field:a.field}}return s},{});return He(i).length===0?null:new e(n,i)},e.makeFromTransform=function(n,r){var i;return new e(n,(i={},i[r.field]={as:r.as,timeUnit:r.timeUnit,field:r.field},i))},e.prototype.merge=function(n){this.formula=le({},this.formula,n.formula),n.remove()},e.prototype.producedFields=function(){var n={};return Gc(this.formula).forEach(function(r){n[r.as]=!0}),n},e.prototype.dependentFields=function(){var n={};return Gc(this.formula).forEach(function(r){n[r.field]=!0}),n},e.prototype.hash=function(){return"TimeUnit "+Pr(this.formula)},e.prototype.assemble=function(){return Gc(this.formula).map(function(n){return{type:"formula",as:n.as,expr:AU(n.timeUnit,n.field)}})},e}(xi),fS=function(t){Qt(e,t);function e(n,r){var i=t.call(this,n)||this;return i.transform=r,i}return e.prototype.clone=function(){return new e(null,En(this.transform))},e.prototype.addDimensions=function(n){this.transform.groupby=Fg(this.transform.groupby.concat(n),function(r){return r})},e.prototype.dependentFields=function(){var n={};return this.transform.groupby.forEach(function(r){return n[r]=!0}),this.transform.sort.forEach(function(r){return n[r.field]=!0}),this.transform.window.map(function(r){return r.field}).filter(function(r){return r!==void 0}).forEach(function(r){return n[r]=!0}),n},e.prototype.producedFields=function(){var n=this,r={};return this.transform.window.forEach(function(i){return r[n.getDefaultName(i)]=!0}),r},e.prototype.getDefaultName=function(n){return n.as||mt(n)},e.prototype.hash=function(){return"WindowTransform "+Pr(this.transform)},e.prototype.assemble=function(){for(var n=[],r=[],i=[],s=[],a=0,o=this.transform.window;a<o.length;a++){var l=o[a];r.push(l.op),i.push(this.getDefaultName(l)),s.push(l.param===void 0?null:l.param),n.push(l.field===void 0?null:l.field)}var u=this.transform.frame,c=this.transform.groupby,f=[],d=[];if(this.transform.sort!==void 0)for(var h=0,p=this.transform.sort;h<p.length;h++){var m=p[h];f.push(m.field),d.push(m.order||"ascending")}var g={field:f,order:d},v=this.transform.ignorePeers,y={type:"window",params:s,as:i,ops:r,fields:n,sort:g};return v!==void 0&&(y.ignorePeers=v),c!==void 0&&(y.groupby=c),u!==void 0&&(y.frame=u),y},e}(xi),pMt=function(t){Qt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(n){var r=n.parent;if(n instanceof af){if(r instanceof ov)return this.flags;if(r.numChildren()>1)return this.setContinue(),this.flags;if(r instanceof af)this.setMutated(),r.merge(n);else{if(nge(r.producedFields(),n.dependentFields()))return this.setContinue(),this.flags;this.setMutated(),n.swapWithParent()}}return this.setContinue(),this.flags},e}(ub),mMt=function(t){Qt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.mergeNodes=function(n,r){for(var i=r.shift(),s=0,a=r;s<a.length;s++){var o=a[s];n.removeChild(o),o.parent=i,o.remove()}},e.prototype.run=function(n){for(var r=n.children.map(function(d){return d.hash()}),i={},s=0;s<r.length;s++)i[r[s]]===void 0?i[r[s]]=[n.children[s]]:i[r[s]].push(n.children[s]);for(var a=0,o=He(i);a<o.length;a++){var l=o[a];i[l].length>1&&(this.setMutated(),this.mergeNodes(n,i[l]))}for(var u=0,c=n.children;u<c.length;u++){var f=c[u];this.run(f)}return this.mutatedFlag},e}(lve),gMt=function(t){Qt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(n){return n instanceof Fl||n.numChildren()>0||n instanceof fb?this.flags:(this.setMutated(),n.remove(),this.flags)},e}(ub),vMt=function(t){Qt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.fields={},n}return e.prototype.run=function(n){var r=this;if(this.setContinue(),n instanceof cS){var i=n.producedFields(),s=He(i).every(function(a){return!!r.fields[a]});s?(this.setMutated(),n.remove()):this.fields=le({},this.fields,i)}return this.flags},e}(ub);function yMt(t){function e(n){if(!(n instanceof fb)){var r=n.clone();if(r instanceof Fl){var i=YP+r.getSource();r.setSource(i),t.model.component.data.outputNodes[i]=r}else(r instanceof cb||r instanceof uS||r instanceof fS)&&r.addDimensions(t.fields);return jp(n.children.map(e)).forEach(function(s){return s.parent=r}),[r]}return jp(n.children.map(e))}return e}function XP(t){if(t instanceof fb)if(t.numChildren()===1&&!(t.children[0]instanceof Fl)){var e=t.children[0];(e instanceof cb||e instanceof uS||e instanceof fS)&&e.addDimensions(t.fields),e.swapWithParent(),XP(t)}else{var n=t.model.component.data.main;uve(n);for(var r=yMt(t),i=jp(t.children.map(r)),s=0,a=i;s<a.length;s++){var o=a[s];o.parent=n}}else t.children.map(XP)}function uve(t){if(t instanceof Fl&&t.type===As&&t.numChildren()===1){var e=t.children[0];e instanceof fb||(e.swapWithParent(),uve(t))}}var bMt=function(t){Qt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(n){n instanceof Fl&&!n.isRequired()&&(this.setMutated(),n.remove());for(var r=0,i=n.children;r<i.length;r++){var s=i[r];this.run(s)}return this.mutatedFlag},e}(lve),xMt=function(t){Qt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(n){var r=n.parent,i=r.children.filter(function(b){return b instanceof af});if(i.length>1){for(var s={},a=0,o=i;a<o.length;a++)for(var l=o[a],u=l.parse,c=0,f=He(u);c<f.length;c++){var d=f[c];s[d]===void 0?s[d]=u[d]:s[d]!==u[d]&&delete s[d]}if(He(s).length!==0){this.setMutated();for(var h=new af(r,s),p=0,m=i;p<m.length;p++){for(var l=m[p],g=0,v=He(s);g<v.length;g++){var y=v[g];delete l.parse[y]}r.removeChild(l),l.parent=h,He(l.parse).length===0&&l.remove()}}}return this.setContinue(),this.flags},e}(ub),wMt=function(t){Qt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(n){for(var r=n.parent,i=r.children.filter(function(v){return v instanceof cb}),s={},a=0,o=i;a<o.length;a++){var l=o[a],u=Pr(He(l.groupBy).sort());u in s||(s[u]=[]),s[u].push(l)}for(var c=0,f=He(s);c<f.length;c++){var d=f[c],h=s[d];if(h.length>1)for(var p=h.pop(),m=0,g=h;m<g.length;m++){var l=g[m];p.merge(l)&&(r.removeChild(l),l.parent=p,l.remove(),this.setMutated())}}return this.setContinue(),this.flags},e}(ub),YP="scale_",KC=5;function a1(t){var e=[];function n(r){r.numChildren()===0?e.push(r):r.children.forEach(n)}return t.forEach(n),e}function _Mt(t){return t}function bh(t,e,n){var r=e.map(function(i){var s=new t;return s instanceof ub?s.optimizeNextFromLeaves(i):s.run(i)});return r.some(_Mt)||n}function dZ(t){var e=t.sources,n=!1;return n=bh(bMt,e,n),e=e.filter(function(r){return r.numChildren()>0}),n=bh(gMt,a1(e),n),e=e.filter(function(r){return r.numChildren()>0}),n=bh(pMt,a1(e),n),n=bh(vMt,a1(e),n),n=bh(xMt,a1(e),n),n=bh(wMt,a1(e),n),n=bh(mMt,e,n),t.sources=e,n}function SMt(t){qP(t.sources);for(var e=0,n=0,r=0;r<KC&&dZ(t);r++)e++;t.sources.map(XP);for(var r=0;r<KC&&dZ(t);r++)n++;qP(t.sources),Math.max(e,n)===KC&&Ke("Maximum optimization runs("+KC+") reached.")}function cve(t){Os(t)?CMt(t):EMt(t)}function CMt(t){var e=t.specifiedScales,n=t.component.scales;He(n).forEach(function(r){var i=e[r],s=i?i.domain:void 0,a=kMt(t,r),o=n[r];if(o.domains=a,V$(s)&&o.set("domainRaw",{signal:_V+Pr(s)},!0),t.component.data.isFaceted){for(var l=t;!$u(l)&&l.parent;)l=l.parent;var u=l.component.resolve.scale[r];if(u==="shared")for(var c=0,f=a;c<f.length;c++){var d=f[c];id(d)&&(d.data=YP+d.data.replace(YP,""))}}})}function EMt(t){for(var e=0,n=t.children;e<n.length;e++){var r=n[e];cve(r)}var i=t.component.scales;He(i).forEach(function(s){for(var a,o=null,l=0,u=t.children;l<u.length;l++){var c=u[l],f=c.component.scales[s];if(f){a===void 0?a=f.domains:a=a.concat(f.domains);var d=f.get("domainRaw");o&&d&&o.signal!==d.signal&&Ke("The same selection must be used to override scale domains in a layered view."),o=d}}i[s].domains=a,o&&i[s].set("domainRaw",o,!0)})}function TMt(t,e,n,r){if(t==="unaggregated"){var i=hZ(e,n),s=i.valid,a=i.reason;if(!s){Ke(a);return}}else if(t===void 0&&r.useUnaggregatedDomain){var s=hZ(e,n).valid;if(s)return"unaggregated"}return t}function kMt(t,e){var n=t.getScaleComponent(e).get("type"),r=TMt(t.scaleDomain(e),t.fieldDef(e),n,t.config.scale);return r!==t.scaleDomain(e)&&(t.specifiedScales[e]=le({},t.specifiedScales[e],{domain:r})),e==="x"&&t.channelHasField("x2")?t.channelHasField("x")?xh(n,r,t,"x").concat(xh(n,r,t,"x2")):xh(n,r,t,"x2"):e==="y"&&t.channelHasField("y2")?t.channelHasField("y")?xh(n,r,t,"y").concat(xh(n,r,t,"y2")):xh(n,r,t,"y2"):xh(n,r,t,e)}function AMt(t,e,n){return t.map(function(r){var i=Q2(r,{timeUnit:n,type:e});return{signal:"{data: "+i+"}"}})}function xh(t,e,n,r){var i=n.fieldDef(r);if(e&&e!=="unaggregated"&&!V$(e)){var s=i.type,a=i.timeUnit;return s==="temporal"||a?AMt(e,s,a):[e]}var o=n.stack;if(o&&r===o.fieldChannel){if(o.offset==="normalize")return[[0,1]];var l=n.requestDataName(As);return[{data:l,field:n.vgField(r,{suffix:"start"})},{data:l,field:n.vgField(r,{suffix:"end"})}]}var u=Dm(r)?MMt(n,r,t):void 0;if(e==="unaggregated"){var l=n.requestDataName(As),c=i.field;return[{data:l,field:mt({field:c,aggregate:"min"})},{data:l,field:mt({field:c,aggregate:"max"})}]}else if(Jn(i.bin)){if(aS(t)){var f=n.getName(sS(i.bin)+"_"+i.field+"_bins");return[{signal:"sequence("+f+".start, "+f+".stop + "+f+".step, "+f+".step)"}]}if(_s(t))return[{data:gw(u)?n.requestDataName(As):n.requestDataName(_w),field:n.vgField(r,hS(i,r)?{binSuffix:"range"}:{}),sort:u===!0||!Yo(u)?{field:n.vgField(r,{}),op:"min"}:u}];if(r==="x"||r==="y"){if(tV(i.bin)&&i.bin.extent)return[i.bin.extent];var l=n.requestDataName(As);return[{data:l,field:n.vgField(r,{})},{data:l,field:n.vgField(r,{binSuffix:"end"})}]}else return[{data:n.requestDataName(As),field:n.vgField(r,{})}]}else return u?[{data:gw(u)?n.requestDataName(As):n.requestDataName(_w),field:n.vgField(r),sort:u}]:[{data:n.requestDataName(As),field:n.vgField(r)}]}function MMt(t,e,n){if(_s(n)){var r=t.fieldDef(e),i=r.sort;if(hV(i))return{op:"min",field:sv(r,e),order:"ascending"};if(Yo(i))return le({},i,i.field?{field:O$(i.field)}:{});if(i==="descending")return{op:"min",field:t.vgField(e),order:"descending"};if(At(["ascending",void 0],i))return!0}}function hZ(t,e){return t.aggregate?pge[t.aggregate]?t.type==="quantitative"&&e==="log"?{valid:!1,reason:Xe.unaggregatedDomainWithLogScale(t)}:{valid:!0}:{valid:!1,reason:Xe.unaggregateDomainWithNonSharedDomainOp(t.aggregate)}:{valid:!1,reason:Xe.unaggregateDomainHasNoEffectForRawField(t)}}function NMt(t){var e=Fg(t.map(function(l){if(id(l)){l.sort;var u=xn(l,["sort"]);return u}return l}),Pr),n=Fg(t.map(function(l){if(id(l)){var u=l.sort;return u!==void 0&&!gw(u)&&(u.op==="count"&&delete u.field,u.order==="ascending"&&delete u.order),u}}).filter(function(l){return l!==void 0}),Pr);if(e.length===1){var r=t[0];if(id(r)&&n.length>0){var i=n[0];return n.length>1&&(Ke(Xe.MORE_THAN_ONE_SORT),i=!0),le({},r,{sort:i})}return r}var s=Fg(n.map(function(l){return gw(l)||l.op==="count"?l:(Ke(Xe.domainSortDropped(l)),!0)}),Pr),a;s.length===1?a=s[0]:s.length>1&&(Ke(Xe.MORE_THAN_ONE_SORT),a=!0);var o=Fg(t.map(function(l){return id(l)?l.data:null}),function(l){return l});if(o.length===1&&o[0]!==null){var r=le({data:o[0],fields:e.map(function(u){return u.field})},a?{sort:a}:{});return r}return le({fields:e},a?{sort:a}:{})}function vV(t){if(id(t)&&Bt(t.field))return t.field;if(CAt(t)){for(var e=void 0,n=0,r=t.fields;n<r.length;n++){var i=r[n];if(id(i)&&Bt(i.field)){if(!e)e=i.field;else if(e!==i.field)return Ke("Detected faceted independent scales that union domain of multiple fields from different data sources.  We will use the first field.  The result view size may be incorrect."),e}}return Ke("Detected faceted independent scales that union domain of identical fields from different source detected.  We will assume that this is the same field from a different fork of the same data source.  However, if this is not case, the result view size maybe incorrect."),e}else if(EAt(t)){Ke("Detected faceted independent scales that union domain of multiple fields from the same data source.  We will use the first field.  The result view size may be incorrect.");var e=t.fields[0];return Bt(e)?e:void 0}}function j$(t,e){var n=t.component.scales[e],r=n.domains.map(function(i){return id(i)&&(i.data=t.lookupDataSource(i.data)),i});return NMt(r)}function fve(t){return lv(t)||bV(t)||yV(t)?t.children.reduce(function(e,n){return e.concat(fve(n))},pZ(t)):pZ(t)}function pZ(t){return He(t.component.scales).reduce(function(e,n){var r=t.component.scales[n];if(r.merged)return e;var i=r.combine(),s=i.domainRaw,a=i.range,o=i.name,l=i.type;i.domainRaw,i.range;var u=xn(i,["name","type","domainRaw","range"]);return a=$Mt(a,o,t,n),s&&S3t(s)&&(s=C3t(t,s)),e.push(le({name:o,type:l,domain:j$(t,n)},s?{domainRaw:s}:{},{range:a},u)),e},[])}function $Mt(t,e,n,r){if(r==="x"||r==="y"){if(ju(t))return{step:{signal:e+"_step"}};if(je(t)&&t.length===2){var i=t[0],s=t[1];if(i===0&&HP(s))return[0,{signal:n.getSizeName(s.signal)}];if(HP(i)&&s===0)return[{signal:n.getSizeName(i.signal)},0]}}return t}var dve=function(t){Qt(e,t);function e(n,r){var i=t.call(this,{},{name:n})||this;return i.merged=!1,i.domains=[],i.setWithExplicit("type",r),i}return e}(Fm),mZ=["shortTimeLabels"],IMt=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength"],hve={width:200,height:200};function pve(t){return t&&!!t.scheme}var mve={padding:5,timeFormat:"%b %d, %Y",countTitle:"Number of Records",invalidValues:"filter",view:hve,mark:Qge,area:{},bar:e0e,circle:{},geoshape:{},line:{},point:{},rect:{},rule:{color:"black"},square:{},text:{color:"black"},tick:t0e,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:rV,projection:{},axis:{},axisX:{},axisY:{minExtent:30},axisLeft:{},axisRight:{},axisTop:{},axisBottom:{},axisBand:{},legend:q0e,selection:eAt,style:{},title:{}};function gve(t){return iv(En(mve),t)}var DMt=["view"].concat(UU),RMt=["padding","numberFormat","timeFormat","countTitle","stack","scale","selection","invalidValues","overlay"],OMt=le({view:["width","height"]},Jge);function vve(t){t=En(t);for(var e=0,n=RMt;e<n.length;e++){var r=n[e];delete t[r]}if(t.axis)for(var i=0,s=mZ;i<s.length;i++){var r=s[i];delete t.axis[r]}if(t.legend){for(var a=0,o=mZ;a<o.length;a++){var r=o[a];delete t.legend[r]}for(var l=0,u=IMt;l<u.length;l++){var r=u[l];delete t.legend[r]}}if(t.mark)for(var c=0,f=UP;c<f.length;c++){var r=f[c];delete t.mark[r]}for(var d=0,h=DMt;d<h.length;d++){for(var p=h[d],m=0,g=UP;m<g.length;m++){var r=g[m];delete t[p][r]}var v=OMt[p];if(v)for(var y=0,b=v;y<b.length;y++){var r=b[y];delete t[p][r]}gZ(t,p)}for(var x=0,w=fye();x<w.length;x++){var S=w[x];delete t[S]}gZ(t,"title","group-title");for(var r in t)Gt(t[r])&&He(t[r]).length===0&&delete t[r];return He(t).length>0?t:void 0}function gZ(t,e,n,r){var i=e==="title"?k0e(t.title).mark:r?t[e][r]:t[e];e==="view"&&(n="cell");var s=le({},i,t.style[e]);He(s).length>0&&(t.style[n||e]=s),r||delete t[e]}const FMt=Object.freeze(Object.defineProperty({__proto__:null,defaultConfig:mve,defaultViewConfig:hve,initConfig:gve,isVgScheme:pve,stripAndRedirectConfig:vve},Symbol.toStringTag,{value:"Module"}));var LMt=["range","rangeStep","scheme"];function yve(t){Os(t)?PMt(t):xve(t,"range")}function PMt(t){var e=t.component.scales;iS.forEach(function(n){var r=e[n];if(r){var i=t.getScaleComponent(n),s=t.specifiedScales[n],a=t.fieldDef(n),o=n==="x"?"width":n==="y"?"height":void 0,l=o?!!t.component.layoutSize.get(o):void 0,u=i.get("type"),c=At(["point","band"],u)||!!s.rangeStep;o&&t.fit&&!l&&c&&(Ke(Xe.CANNOT_FIX_RANGE_STEP_WITH_FIT),l=!0);var f=zMt(t),d=BMt(n,u,a.type,s,t.config,r.get("zero"),t.mark,l,t.getName(o),f);r.setWithExplicit("range",d)}})}function zMt(t){var e=[],n=t.getScaleComponent("x"),r=n&&n.get("range");r&&ju(r)&&ei(r.step)&&e.push(r.step);var i=t.getScaleComponent("y"),s=i&&i.get("range");return s&&ju(s)&&ei(s.step)&&e.push(s.step),e}function BMt(t,e,n,r,i,s,a,o,l,u){for(var c=o||r.rangeStep===null,f=0,d=LMt;f<d.length;f++){var h=d[f];if(r[h]!==void 0){var p=iV(e,h),m=sV(t,h);if(!p)Ke(Xe.scalePropertyNotWorkWithScaleType(e,h,t));else if(m)Ke(m);else switch(h){case"range":return sO(r[h]);case"scheme":return sO(UMt(r[h]));case"rangeStep":var g=r[h];if(g!==null)if(o)Ke(Xe.rangeStepDropped(t));else return sO({step:g})}}}return Z0e(VMt(t,e,n,i,s,a,l,u,c,r.domain))}function UMt(t){if(g0e(t)){var e={scheme:t.name};return t.count&&(e.count=t.count),t.extent&&(e.extent=t.extent),e}return{scheme:t}}function VMt(t,e,n,r,i,s,a,o,l,u){switch(t){case rn:case In:if(At(["point","band"],e)&&!l){if(t===rn&&s==="text"){if(r.scale.textXRangeStep)return{step:r.scale.textXRangeStep}}else if(r.scale.rangeStep)return{step:r.scale.rangeStep}}return t===In&&Sf(e)?[{signal:a},0]:[0,{signal:a}];case Mm:var c=GMt(s,i,r),f=HMt(s,o,r);return yw(e)?WMt(c,f,vZ(e,r,u,t)):[c,f];case Im:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Aa:return"symbol";case Vl:case ih:case sh:if(e==="ordinal")return n==="nominal"?"category":"ordinal";if(yw(e)){var d=vZ(e,r,u,t);return r.range&&pve(r.range.ordinal)?le({},r.range.ordinal,{count:d}):{scheme:"blues",count:d}}else return bu(e)?["#f7fbff","#0e427f"]:s==="rect"||s==="geoshape"?"heatmap":"ramp";case ah:case Nm:case $m:return[r.scale.minOpacity,r.scale.maxOpacity]}throw new Error("Scale range undefined for channel "+t)}function vZ(t,e,n,r){switch(t){case"quantile":return e.scale.quantileCount;case"quantize":return e.scale.quantizeCount;case"threshold":return n!==void 0&&je(n)?n.length+1:(Ke(Xe.domainRequiredForThresholdScale(r)),3)}}function WMt(t,e,n){for(var r=[],i=(e-t)/(n-1),s=0;s<n;s++)r.push(t+s*i);return r}function GMt(t,e,n){if(e)return 0;switch(t){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(Xe.incompatibleChannel("size",t))}function HMt(t,e,n){var r=n.scale;switch(t){case"bar":case"tick":return n.scale.maxBandSize!==void 0?n.scale.maxBandSize:yZ(e,n.scale)-1;case"line":case"trail":case"rule":return n.scale.maxStrokeWidth;case"text":return n.scale.maxFontSize;case"point":case"square":case"circle":if(n.scale.maxSize)return n.scale.maxSize;var i=yZ(e,r);return(i-2)*(i-2)}throw new Error(Xe.incompatibleChannel("size",t))}function yZ(t,e){return t.length>0?Math.min.apply(null,t):e.rangeStep?e.rangeStep:21}function bve(t,e){Os(t)?jMt(t,e):xve(t,e)}function jMt(t,e){var n=t.component.scales;He(n).forEach(function(r){var i=t.specifiedScales[r],s=n[r],a=t.getScaleComponent(r),o=t.fieldDef(r),l=t.config,u=i[e],c=a.get("type"),f=iV(c,e),d=sV(r,e);if(u!==void 0&&(f?d&&Ke(d):Ke(Xe.scalePropertyNotWorkWithScaleType(c,e,r))),f&&d===void 0)if(u!==void 0)s.copyKeyFromObject(e,i);else{var h=qMt(e,r,o,a.get("type"),a.get("padding"),a.get("paddingInner"),i.domain,t.markDef,l);h!==void 0&&s.set(e,h,!1)}})}function qMt(t,e,n,r,i,s,a,o,l){var u=l.scale;switch(t){case"interpolate":return XMt(e,r);case"nice":return YMt(r,e,n);case"padding":return KMt(e,r,u,n,o,l.bar);case"paddingInner":return ZMt(i,e,u);case"paddingOuter":return JMt(i,e,r,s,u);case"reverse":return QMt(r,n.sort);case"zero":return e3t(e,n,a,o,r)}return u[t]}function xve(t,e){for(var n=t.component.scales,r=0,i=t.children;r<i.length;r++){var s=i[r];e==="range"?yve(s):bve(s,e)}He(n).forEach(function(a){for(var o,l=0,u=t.children;l<u.length;l++){var c=u[l],f=c.component.scales[a];if(f){var d=f.getWithExplicit(e);o=lS(o,d,e,"scale",J0e(function(h,p){switch(e){case"range":return h.step&&p.step?h.step-p.step:0}return 0}))}}n[a].setWithExplicit(e,o)})}function XMt(t,e){if(At([Vl,ih,sh],t)&&bu(e))return"hcl"}function YMt(t,e,n){if(!(n.bin||At([wn.TIME,wn.UTC],t)))return At([rn,In],e)?!0:void 0}function KMt(t,e,n,r,i,s){if(At([rn,In],t)){if(bu(e)){if(n.continuousPadding!==void 0)return n.continuousPadding;var a=i.type,o=i.orient;if(a==="bar"&&!r.bin&&(o==="vertical"&&t==="x"||o==="horizontal"&&t==="y"))return s.continuousBandSize}if(e===wn.POINT)return n.pointPadding}}function ZMt(t,e,n){if(t===void 0&&At([rn,In],e))return n.bandPaddingInner}function JMt(t,e,n,r,i){if(t===void 0&&At([rn,In],e)&&n===wn.BAND)return i.bandPaddingOuter!==void 0?i.bandPaddingOuter:r/2}function QMt(t,e){if(Sf(t)&&e==="descending")return!0}function e3t(t,e,n,r,i){var s=!!n&&n!=="unaggregated";if(s)return!1;if(t==="size"&&e.type==="quantitative"&&!yw(i))return!0;if(!e.bin&&At([rn,In],t)){var a=r.orient,o=r.type;return!(At(["bar","area","line","trail"],o)&&(a==="horizontal"&&t==="y"||a==="vertical"&&t==="x"))}return!1}function t3t(t,e,n,r,i){var s=n3t(e,n,r,t),a=t.type;return Dm(e)?a!==void 0?oV(e,a)?aV(a,n.type,n.bin)?a:(Ke(Xe.scaleTypeNotWorkWithFieldDef(a,s)),s):(Ke(Xe.scaleTypeNotWorkWithChannel(e,a,s)),s):s:null}function n3t(t,e,n,r,i){switch(e.type){case"nominal":case"ordinal":return cx(t)||fx(t)==="discrete"?(t==="shape"&&e.type==="ordinal"&&Ke(Xe.discreteChannelCannotEncode(t,"ordinal")),"ordinal"):At(["x","y"],t)&&(At(["rect","bar","rule"],n)||n==="bar")?"band":"point";case"temporal":return cx(t)?"sequential":fx(t)==="discrete"?(Ke(Xe.discreteChannelCannotEncode(t,"temporal")),"ordinal"):"time";case"quantitative":if(cx(t)){if(Jn(e.bin))return"bin-ordinal";var s=r||{},a=s.domain,o=a===void 0?void 0:a,l=s.range,u=l===void 0?void 0:l;return o&&je(o)&&o.length>2&&u&&je(u)&&u.length>2?"linear":"sequential"}else if(fx(t)==="discrete")return Ke(Xe.discreteChannelCannotEncode(t,"quantitative")),"ordinal";return Jn(e.bin)&&t!=="x"&&t!=="y"?"bin-linear":"linear";case"geojson":return}throw new Error(Xe.invalidFieldType(e.type))}function r3t(t){wve(t),cve(t);for(var e=0,n=v0e;e<n.length;e++){var r=n[e];bve(t,r)}yve(t)}function wve(t){Os(t)?t.component.scales=i3t(t):t.component.scales=a3t(t)}function i3t(t){var e=t.encoding,n=t.config,r=t.mark;return iS.reduce(function(i,s){var a,o,l=e[s];if(Ge(l)&&r===BU&&s===Aa&&l.type===Am)return i;if(Ge(l)?(a=l,o=l.scale):rf(l)?(a=l.condition,o=l.condition.scale):s===rn?a=io(e.x2):s===In&&(a=io(e.y2)),a&&o!==null&&o!==!1){o=o||{};var u=t3t(o,s,a,r,n.scale);i[s]=new dve(t.scaleName(s+"",!0),{value:u,explicit:o.type===u})}return i},{})}var s3t=J0e(function(t,e){return GP(t)-GP(e)});function a3t(t){for(var e=t.component.scales={},n={},r=t.component.resolve,i=function(l){wve(l),He(l.component.scales).forEach(function(u){if(r.scale[u]=r.scale[u]||VAt(u,t),r.scale[u]==="shared"){var c=n[u],f=l.component.scales[u].getWithExplicit("type");c?d0e(c.value,f.value)?n[u]=lS(c,f,"type","scale",s3t):(r.scale[u]="independent",delete n[u]):n[u]=f}})},s=0,a=t.children;s<a.length;s++){var o=a[s];i(o)}return He(n).forEach(function(l){var u=t.scaleName(l,!0),c=n[l];e[l]=new dve(u,c);for(var f=0,d=t.children;f<d.length;f++){var h=d[f],p=h.component.scales[l];p&&(h.renameScale(p.get("name"),u),p.merged=!0)}}),e}var oO=function(){function t(){this.nameMap={}}return t.prototype.rename=function(e,n){this.nameMap[e]=n},t.prototype.has=function(e){return this.nameMap[e]!==void 0},t.prototype.get=function(e){for(;this.nameMap[e]&&e!==this.nameMap[e];)e=this.nameMap[e];return e},t}();function Os(t){return t&&t.type==="unit"}function $u(t){return t&&t.type==="facet"}function yV(t){return t&&t.type==="repeat"}function bV(t){return t&&t.type==="concat"}function lv(t){return t&&t.type==="layer"}var xV=function(){function t(e,n,r,i,s,a){var o=this;this.children=[],this.correctDataNames=function(l){return l.from&&l.from.data&&(l.from.data=o.lookupDataSource(l.from.data)),l.from&&l.from.facet&&l.from.facet.data&&(l.from.facet.data=o.lookupDataSource(l.from.facet.data)),l},this.parent=n,this.config=i,this.repeater=s,this.name=e.name||r,this.title=Bt(e.title)?{text:e.title}:e.title,this.scaleNameMap=n?n.scaleNameMap:new oO,this.projectionNameMap=n?n.projectionNameMap:new oO,this.layoutSizeNameMap=n?n.layoutSizeNameMap:new oO,this.data=e.data,this.description=e.description,this.transforms=B0e(e.transform||[]),this.layout=Cf(e)||sc(e)?void 0:xAt(e),this.component={data:{sources:n?n.component.data.sources:[],outputNodes:n?n.component.data.outputNodes:{},outputNodeRefCounts:n?n.component.data.outputNodeRefCounts:{},isFaceted:Om(e)||n&&n.component.data.isFaceted&&!e.data},layoutSize:new Fm,layoutHeaders:{row:{},column:{}},mark:null,resolve:le({scale:{},axis:{},legend:{}},a?En(a):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}return Object.defineProperty(t.prototype,"width",{get:function(){return this.getSizeSignalRef("width")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.getSizeSignalRef("height")},enumerable:!0,configurable:!0}),t.prototype.initSize=function(e){var n=e.width,r=e.height;n&&this.component.layoutSize.set("width",n,!0),r&&this.component.layoutSize.set("height",r,!0)},t.prototype.parse=function(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSize(),this.parseSelection(),this.parseProjection(),this.parseData(),this.parseAxisAndHeader(),this.parseLegend(),this.parseMarkGroup()},t.prototype.parseScale=function(){r3t(this)},t.prototype.parseProjection=function(){ave(this)},t.prototype.renameTopLevelLayoutSize=function(){this.getName("width")!=="width"&&this.renameLayoutSize(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameLayoutSize(this.getName("height"),"height")},t.prototype.parseLegend=function(){tve(this)},t.prototype.assembleGroupStyle=function(){if(this.type==="unit"||this.type==="layer")return"cell"},t.prototype.assembleLayoutSize=function(){if(this.type==="unit"||this.type==="layer")return{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")}},t.prototype.assembleLayout=function(){if(this.layout){var e=this.layout,n=e.align,r=e.bounds,i=e.center,s=e.spacing,a=s===void 0?{}:s;return le({padding:ei(a)?a:{row:a.row||10,column:a.column||10}},this.assembleDefaultLayout(),n?{align:n}:{},r?{bounds:r}:{},i?{center:i}:{})}},t.prototype.assembleDefaultLayout=function(){return{}},t.prototype.assembleHeaderMarks=function(){for(var e=this.component.layoutHeaders,n=[],r=0,i=oZ;r<i.length;r++){var s=i[r];e[s].title&&n.push(RAt(this,s))}for(var a=0,o=oZ;a<o.length;a++){var s=o[a];n=n.concat(OAt(this,s))}return n},t.prototype.assembleAxes=function(){return MAt(this.component.axes,this.config)},t.prototype.assembleLegends=function(){return rve(this)},t.prototype.assembleProjections=function(){return nMt(this)},t.prototype.assembleTitle=function(){var e=this.title||{},n=e.encoding,r=xn(e,["encoding"]),i=le({},k0e(this.config.title).nonMark,r,n?{encode:{update:n}}:{});if(i.text)return At(["unit","layer"],this.type)||(i.anchor&&i.anchor!=="start"&&Ke(Xe.cannotSetTitleAnchor(this.type)),i.anchor="start"),At(["middle",void 0],i.anchor)&&i.frame===void 0&&(i.frame="group"),He(i).length>0?i:void 0},t.prototype.assembleGroup=function(e){e===void 0&&(e=[]);var n={};e=e.concat(this.assembleSelectionSignals()),e.length>0&&(n.signals=e);var r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());var i=!this.parent||$u(this.parent)?fve(this):[];i.length>0&&(n.scales=i);var s=this.assembleAxes();s.length>0&&(n.axes=s);var a=this.assembleLegends();return a.length>0&&(n.legends=a),n},t.prototype.hasDescendantWithFieldOnChannel=function(e){for(var n=0,r=this.children;n<r.length;n++){var i=r[n];if(Os(i)){if(i.channelHasField(e))return!0}else if(i.hasDescendantWithFieldOnChannel(e))return!0}return!1},t.prototype.getName=function(e){return Gu((this.name?this.name+"_":"")+e)},t.prototype.requestDataName=function(e){var n=this.getName(e),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n},t.prototype.getSizeSignalRef=function(e){if($u(this.parent)){var n=e==="width"?"x":"y",r=this.component.scales[n];if(r&&!r.merged){var i=r.get("type"),s=r.get("range");if(_s(i)&&ju(s)){var a=r.get("name"),o=j$(this,n),l=vV(o);if(l){var u=mt({aggregate:"distinct",field:l},{expr:"datum"});return{signal:j0e(a,r,u)}}else return Ke("Unknown field for ${channel}.  Cannot calculate view size."),null}}}return{signal:this.layoutSizeNameMap.get(this.getName(e))}},t.prototype.lookupDataSource=function(e){var n=this.component.data.outputNodes[e];return n?n.getSource():e},t.prototype.getSizeName=function(e){return this.layoutSizeNameMap.get(e)},t.prototype.renameLayoutSize=function(e,n){this.layoutSizeNameMap.rename(e,n)},t.prototype.renameScale=function(e,n){this.scaleNameMap.rename(e,n)},t.prototype.renameProjection=function(e,n){this.projectionNameMap.rename(e,n)},t.prototype.scaleName=function(e,n){if(n)return this.getName(e);if(eV(e)&&Dm(e)&&this.component.scales[e]||this.scaleNameMap.has(this.getName(e)))return this.scaleNameMap.get(this.getName(e))},t.prototype.projectionName=function(e){if(e)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))},t.prototype.getScaleComponent=function(e){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale().  Make sure you have called parseScale or use parseUnitModelWithScale().");var n=this.component.scales[e];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(e):void 0},t.prototype.getSelectionComponent=function(e,n){var r=this.component.selection[e];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(e,n)),!r)throw new Error(Xe.selectionNotFound(n));return r},t}(),_ve=function(t){Qt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.vgField=function(n,r){r===void 0&&(r={});var i=this.fieldDef(n);if(i)return mt(i,r)},e.prototype.reduceFieldDef=function(n,r,i){return eI(this.getMapping(),function(s,a,o){var l=io(a);return l?n(s,l,o):s},r,i)},e.prototype.forEachFieldDef=function(n,r){Q$(this.getMapping(),function(i,s){var a=io(i);a&&n(a,s)},r)},e}(xV),q$="_fields",o3t={has:function(t){var e=t;return e.fields!==void 0||e.encodings!==void 0},parse:function(t,e,n){var r={},i={},s=n.project||(n.project=[]);n.fields={},e.fields&&s.push.apply(s,e.fields.map(function(h){return{field:h,type:"E"}}));for(var a=0,o=e.encodings||[];a<o.length;a++){var l=o[a],u=t.fieldDef(l);if(u){var c=u.field;if(u.timeUnit&&(c=t.vgField(l),r[c]={as:c,field:u.field,timeUnit:u.timeUnit}),!i[c]){var f="E";if(n.type==="interval"){var d=t.getScaleComponent(l).get("type");Sf(d)&&!aS(d)&&(f="R")}else u.bin&&(f="R-RE");s.push(i[c]={field:c,channel:l,type:f})}n.fields[l]=c}else Ke(Xe.cannotProjectOnChannelWithoutField(l))}He(r).length&&(n.timeUnit=new cS(null,r))},signals:function(t,e,n){var r=e.name+Ko+q$,i=n.filter(function(s){return s.name===r});return i.length?n:n.concat({name:r,update:""+JSON.stringify(e.project)})}},Fd={has:function(t){return t.type==="interval"&&t.resolve==="global"&&t.bind&&t.bind==="scales"},parse:function(t,e,n){for(var r=Gu(n.name),i=n.scales=[],s=0,a=n.project;s<a.length;s++){var o=a[s],l=o.channel;if(Dm(l)){var u=t.getScaleComponent(l),c=u?u.get("type"):void 0;if(!u||!Sf(c)||aS(c)){Ke(Xe.SCALE_BINDINGS_CONTINUOUS);continue}if(u.set("domainRaw",{signal:Xo(o.field,r)},!0),i.push(l),t.repeater&&t.repeater.row===t.repeater.column){var f=t.getScaleComponent(l===rn?In:rn);f.set("domainRaw",{signal:Xo(o.field,r)},!0)}}}},topLevelSignals:function(t,e,n){var r=e.scales.filter(function(c){return!n.filter(function(f){return f.name===Ll(e,c,"data")}).length}).map(function(c){return{channel:c,signal:Ll(e,c,"data")}});if(!t.parent||!r.length)return n;var i=n.filter(function(c){return c.name===e.name})[0],s=i.update;if(s.indexOf(Mve)>=0)i.update="{"+r.map(function(c){return at(e.fields[c.channel])+": "+c.signal}).join(", ")+"}";else for(var a=0,o=r;a<o.length;a++){var l=o[a],u=", "+at(e.fields[l.channel])+": "+l.signal;s.indexOf(u)<0&&(i.update=s.substring(0,s.length-1)+u+"}")}return n.concat(r.map(function(c){return{name:c.signal}}))},signals:function(t,e,n){if(t.parent)for(var r=function(o){var l=n.filter(function(u){return u.name===Ll(e,o,"data")})[0];l.push="outer",delete l.value,delete l.update},i=0,s=e.scales;i<s.length;i++){var a=s[i];r(a)}return n}};function KP(t,e){var n=at(t.scaleName(e));return"domain("+n+")"}var dx="_brush",ZP="_scale_trigger",l3t={signals:function(t,e){var n=e.name,r=n+Ko+q$,i=Fd.has(e),s=[],a=[],o=[];if(e.translate&&!i){var l="!event.item || event.item.mark.name !== "+at(n+dx);Sve(e,function(b,x){var w=x.between[0].filter||(x.between[0].filter=[]);w.indexOf(l)<0&&w.push(l)})}for(var u=0,c=e.project;u<c.length;u++){var f=c[u],d=f.channel;if(d!==rn&&d!==In){Ke("Interval selections only support x and y encoding channels.");continue}var h=u3t(t,e,d),p=Ll(e,d,"data"),m=Ll(e,d,"visual"),g=at(t.scaleName(d)),v=t.getScaleComponent(d).get("type"),y=Sf(v)?"+":"";s.push.apply(s,h),a.push(p),o.push({scaleName:t.scaleName(d),expr:"(!isArray("+p+") || "+("("+y+"invert("+g+", "+m+")[0] === "+y+p+"[0] && ")+(y+"invert("+g+", "+m+")[1] === "+y+p+"[1]))")})}return i||s.push({name:n+ZP,update:o.map(function(b){return b.expr}).join(" && ")+(" ? "+(n+ZP)+" : {}")}),s.concat({name:n+Ko,on:[{events:a.map(function(b){return{signal:b}}),update:a.join(" && ")+(" ? {unit: "+dp(t)+", fields: "+r+", ")+("values: ["+a.join(", ")+"]} : null")}]})},modifyExpr:function(t,e){var n=e.name+Ko;return n+", "+(e.resolve==="global"?"true":"{unit: "+dp(t)+"}")},marks:function(t,e,n){var r=e.name,i=Y$(e),s=i.xi,a=i.yi,o="data("+at(e.name+uv)+")";if(Fd.has(e))return n;var l={x:s!==null?{signal:r+"_x[0]"}:{value:0},y:a!==null?{signal:r+"_y[0]"}:{value:0},x2:s!==null?{signal:r+"_x[1]"}:{field:{group:"width"}},y2:a!==null?{signal:r+"_y[1]"}:{field:{group:"height"}}};if(e.resolve==="global")for(var u=0,c=He(l);u<c.length;u++){var f=c[u];l[f]=[le({test:o+".length && "+o+"[0].unit === "+dp(t)},l[f]),{value:0}]}var d=e.mark,h=d.fill,p=d.fillOpacity,m=xn(d,["fill","fillOpacity"]),g=He(m).reduce(function(v,y){return v[y]=[{test:[s!==null&&r+"_x[0] !== "+r+"_x[1]",a!=null&&r+"_y[0] !== "+r+"_y[1]"].filter(function(b){return b}).join(" && "),value:m[y]},{value:null}],v},{});return[{name:r+dx+"_bg",type:"rect",clip:!0,encode:{enter:{fill:{value:h},fillOpacity:{value:p}},update:l}}].concat(n,{name:r+dx,type:"rect",clip:!0,encode:{enter:{fill:{value:"transparent"}},update:le({},l,g)}})}};function u3t(t,e,n){var r=Ll(e,n,"visual"),i=Ll(e,n,"data"),s=Fd.has(e),a=t.scaleName(n),o=at(a),l=t.getScaleComponent(n),u=l?l.get("type"):void 0,c=t.getSizeSignalRef(n===rn?"width":"height").signal,f=n+"(unit)",d=Sve(e,function(h,p){return h.concat({events:p.between[0],update:"["+f+", "+f+"]"},{events:p,update:"["+r+"[0], clamp("+f+", 0, "+c+")]"})});return d.push({events:{signal:e.name+ZP},update:Sf(u)&&!aS(u)?"[scale("+o+", "+i+"[0]), scale("+o+", "+i+"[1])]":"[0, 0]"}),s?[{name:i,on:[]}]:[{name:r,value:[],on:d},{name:i,on:[{events:{signal:r},update:r+"[0] === "+r+"[1] ? null : invert("+o+", "+r+")"}]}]}function Sve(t,e){return t.events.reduce(function(n,r){return r.between?e(n,r):(Ke(r+" is not an ordered event stream for interval selections"),n)},[])}var bZ="voronoi",wV={has:function(t){return t.type!=="interval"&&t.nearest},marks:function(t,e,n){var r=Y$(e),i=r.x,s=r.y,a=t.mark;if(ib(a))return Ke(Xe.nearestNotSupportForContinuous(a)),n;var o={name:t.getName(bZ),type:"path",from:{data:t.getName("marks")},encode:{enter:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}}},transform:[{type:"voronoi",x:{expr:i||!i&&!s?"datum.datum.x || 0":"0"},y:{expr:s||!i&&!s?"datum.datum.y || 0":"0"},size:[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]}]},l=0,u=!1;return n.forEach(function(c,f){var d=c.name||"";d===t.component.mark[0].name?l=f:d.indexOf(bZ)>=0&&(u=!0)}),u||n.splice(l+1,0,o),n}};function Cve(t,e){var n=e.name,r=n+Ko+q$,i=e.project,s=wV.has(e)?"(item().isVoronoi ? datum.datum : datum)":"datum",a=i.map(function(o){var l=t.fieldDef(o.channel);return l&&l.bin?"["+Xo(t.vgField(o.channel,{}),s)+", "+(Xo(t.vgField(o.channel,{binSuffix:"end"}),s)+"]"):""+Xo(o.field,s)}).join(", ");return[{name:n+Ko,value:{},on:[{events:e.events,update:"datum && item().mark.marktype !== 'group' ? "+("{unit: "+dp(t)+", fields: "+r+", values: ["+a+"]} : null"),force:!0}]}]}var c3t={signals:Cve,modifyExpr:function(t,e){var n=e.name+Ko;return n+", "+(e.resolve==="global"?"null":"{unit: "+dp(t)+"}")}},f3t={signals:Cve,modifyExpr:function(t,e){var n=e.name+Ko;return n+", "+(e.resolve==="global"?"true":"{unit: "+dp(t)+"}")}},d3t={has:function(t){return t.type==="single"&&t.resolve==="global"&&t.bind&&t.bind!=="scales"},topLevelSignals:function(t,e,n){for(var r=e.name,i=e.project,s=e.bind,a=wV.has(e)?"(item().isVoronoi ? datum.datum : datum)":"datum",o=function(f){var d=Gu(r+"_"+f.field),h=n.filter(function(p){return p.name===d});h.length||n.unshift({name:d,value:"",on:[{events:e.events,update:"datum && item().mark.marktype !== 'group' ? "+Xo(f.field,a)+" : null"}],bind:s[f.field]||s[f.channel]||s})},l=0,u=i;l<u.length;l++){var c=u[l];o(c)}return n},signals:function(t,e,n){var r=e.name,i=e.project,s=n.filter(function(u){return u.name===r+Ko})[0],a=r+Ko+q$,o=i.map(function(u){return Gu(r+"_"+u.field)}),l=o.map(function(u){return u+" !== null"}).join(" && ");return o.length&&(s.update=l+" ? {fields: "+a+", values: ["+o.join(", ")+"]} : null"),delete s.value,delete s.on,n}},xZ="_toggle",h3t={has:function(t){return t.type==="multi"&&t.toggle},signals:function(t,e,n){return n.concat({name:e.name+xZ,value:!1,on:[{events:e.events,update:e.toggle}]})},modifyExpr:function(t,e,n){var r=e.name+Ko,i=e.name+xZ;return i+" ? null : "+r+", "+(e.resolve==="global"?i+" ? null : true, ":i+" ? null : {unit: "+dp(t)+"}, ")+(i+" ? "+r+" : null")}},Eve="_translate_anchor",Tve="_translate_delta",p3t={has:function(t){return t.type==="interval"&&t.translate},signals:function(t,e,n){var r=e.name,i=Fd.has(e),s=r+Eve,a=Y$(e),o=a.x,l=a.y,u=q2(e.translate,"scope");return i||(u=u.map(function(c){return c.between[0].markname=r+dx,c})),n.push({name:s,value:{},on:[{events:u.map(function(c){return c.between[0]}),update:"{x: x(unit), y: y(unit)"+(o!==null?", extent_x: "+(i?KP(t,rn):"slice("+Ll(e,"x","visual")+")"):"")+(l!==null?", extent_y: "+(i?KP(t,In):"slice("+Ll(e,"y","visual")+")"):"")+"}"}]},{name:r+Tve,value:{},on:[{events:u,update:"{x: "+s+".x - x(unit), y: "+s+".y - y(unit)}"}]}),o!==null&&wZ(t,e,rn,"width",n),l!==null&&wZ(t,e,In,"height",n),n}};function wZ(t,e,n,r,i){var s=e.name,a=Fd.has(e),o=i.filter(function(y){return y.name===Ll(e,n,a?"data":"visual")})[0],l=s+Eve,u=s+Tve,c=t.getSizeSignalRef(r).signal,f=t.getScaleComponent(n),d=f.get("type"),h=a&&n===rn?"-":"",p=l+".extent_"+n,m=""+h+u+"."+n+" / "+(a?""+c:"span("+p+")"),g=a?d==="log"?"panLog":d==="pow"?"panPow":"panLinear":"panLinear",v=g+"("+p+", "+m+(a&&d==="pow"?", "+(f.get("exponent")||1):"")+")";o.on.push({events:{signal:u},update:a?v:"clampRange("+v+", 0, "+c+")"})}var kve="_zoom_anchor",Ave="_zoom_delta",m3t={has:function(t){return t.type==="interval"&&t.zoom},signals:function(t,e,n){var r=e.name,i=Fd.has(e),s=r+Ave,a=Y$(e),o=a.x,l=a.y,u=at(t.scaleName(rn)),c=at(t.scaleName(In)),f=q2(e.zoom,"scope");return i||(f=f.map(function(d){return d.markname=r+dx,d})),n.push({name:r+kve,on:[{events:f,update:i?"{"+[u?"x: invert("+u+", x(unit))":"",c?"y: invert("+c+", y(unit))":""].filter(function(d){return!!d}).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:f,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==null&&_Z(t,e,"x","width",n),l!==null&&_Z(t,e,"y","height",n),n}};function _Z(t,e,n,r,i){var s=e.name,a=Fd.has(e),o=i.filter(function(g){return g.name===Ll(e,n,a?"data":"visual")})[0],l=t.getSizeSignalRef(r).signal,u=t.getScaleComponent(n),c=u.get("type"),f=a?KP(t,n):o.name,d=s+Ave,h=""+s+kve+"."+n,p=a?c==="log"?"zoomLog":c==="pow"?"zoomPow":"zoomLinear":"zoomLinear",m=p+"("+f+", "+h+", "+d+(a&&c==="pow"?", "+(u.get("exponent")||1):"")+")";o.on.push({events:{signal:d},update:a?m:"clampRange("+m+", 0, "+l+")"})}var lO={project:o3t,toggle:h3t,scales:Fd,translate:p3t,zoom:m3t,inputs:d3t,nearest:wV};function X$(t,e){for(var n in lO)lO[n].has(t)&&e(lO[n])}var uv="_store",Ko="_tuple",g3t="_modify",_V="_selection_domain_",Mve="vlSelectionResolve";function v3t(t,e){var n={},r=t.config.selection;e&&(e=En(e));var i=function(a){if(!e.hasOwnProperty(a))return"continue";var o=e[a],l=r[o.type];for(var u in l)u==="encodings"&&o.fields||u==="fields"&&o.encodings||(u==="mark"&&(o[u]=le({},l[u],o[u])),(o[u]===void 0||o[u]===!0)&&(o[u]=l[u]||o[u]));a=Gu(a);var c=n[a]=le({},o,{name:a,events:Bt(o.on)?q2(o.on,"scope"):o.on});X$(c,function(f){f.parse&&f.parse(t,o,c)})};for(var s in e)i(s);return n}function y3t(t,e){return dS(t,function(n,r){var i=n.name,s=r.modifyExpr(t,n);e.push.apply(e,r.signals(t,n)),X$(n,function(a){a.signals&&(e=a.signals(t,n,e)),a.modifyExpr&&(s=a.modifyExpr(t,n,s))}),e.push({name:i+g3t,on:[{events:{signal:i+Ko},update:"modify("+at(n.name+uv)+", "+s+")"}]})}),e}function b3t(t,e){if(t.component.selection&&He(t.component.selection).length){var n=at(t.getName("cell"));e.unshift({name:"facet",value:{},on:[{events:q2("mousemove","scope"),update:"isTuple(facet) ? facet : group("+n+").datum"}]})}return e}function x3t(t,e){var n=!1;if(dS(t,function(i,s){var a=i.name,o=at(a+uv),l=e.filter(function(u){return u.name===a});l.length||e.push({name:i.name,update:Mve+"("+o+(i.resolve==="global"?")":", "+at(i.resolve)+")")}),n=!0,s.topLevelSignals&&(e=s.topLevelSignals(t,i,e)),X$(i,function(u){u.topLevelSignals&&(e=u.topLevelSignals(t,i,e))})}),n){var r=e.filter(function(i){return i.name==="unit"});r.length||e.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]})}return e}function w3t(t,e){return dS(t,function(n){var r=e.filter(function(i){return i.name===n.name+uv});r.length||e.push({name:n.name+uv})}),e}function Nve(t,e){return dS(t,function(n,r){e=r.marks?r.marks(t,n,e):e,X$(n,function(i){i.marks&&(e=i.marks(t,n,e))})}),e}function _3t(t,e){for(var n=0,r=t.children;n<r.length;n++){var i=r[n];Os(i)&&(e=Nve(i,e))}return e}function $ve(t,e,n){var r=[];function i(a){var o=Gu(a),l=t.getSelectionComponent(o,a),u=at(o+uv);if(l.timeUnit){var c=n||t.component.data.raw,f=l.timeUnit.clone();c.parent?f.insertAsParentOf(c):c.parent=f}return l.empty!=="none"&&r.push(u),"vlSelectionTest("+u+", datum"+(l.resolve==="global"?")":", "+at(l.resolve)+")")}var s=i0(e,i);return(r.length?"!("+r.map(function(a){return"length(data("+a+"))"}).join(" || ")+") || ":"")+("("+s+")")}function S3t(t){return t.signal.indexOf(_V)>=0}function C3t(t,e){var n=JSON.parse(e.signal.replace(_V,"")),r=Gu(n.selection),i=n.encoding,s=n.field,a=t.component.selection&&t.component.selection[r];if(a)Ke('Use "bind": "scales" to setup a binding for scales and selections within the same view.');else{if(a=t.getSelectionComponent(r,n.selection),!i&&!s)s=a.project[0].field,a.project.length>1&&Ke('A "field" or "encoding" must be specified when using a selection as a scale domain. '+('Using "field": '+at(s)+"."));else if(i&&!s){var o=a.project.filter(function(l){return l.channel===i});!o.length||o.length>1?(s=a.project[0].field,Ke((o.length?"Multiple ":"No ")+("matching "+at(i)+" encoding found for selection "+at(n.selection)+". ")+('Using "field": '+at(s)+"."))):s=o[0].field}return{signal:Xo(s,r)}}return{signal:"null"}}function dS(t,e){var n=t.component.selection;for(var r in n)if(n.hasOwnProperty(r)){var i=n[r];e(i,E3t(i.type))}}function E3t(t){switch(t){case"single":return f3t;case"multi":return c3t;case"interval":return l3t}return null}function T3t(t){for(var e=t.parent;e&&!$u(e);)e=e.parent;return e}function dp(t){var e=at(t.name),n=T3t(t);return n&&(e+=(n.facet.row?" + '_' + ("+Xo(n.vgField("row"),"facet")+")":"")+(n.facet.column?" + '_' + ("+Xo(n.vgField("column"),"facet")+")":"")),e}function JP(t){var e=!1;return dS(t,function(n){e=e||n.project.some(function(r){return r.field===bw})}),e}function Ll(t,e,n){var r=t._signalNames||(t._signalNames={});if(r[e]&&r[e][n])return r[e][n];r[e]=r[e]||{};for(var i=Gu(t.name+"_"+(n==="visual"?e:t.fields[e])),s=i,a=1;r[s];)s=i+"_"+a++;return r[s]=r[e][n]=s}function Y$(t){var e=null,n=null,r=null,i=null;return t.project.forEach(function(s,a){s.channel===rn?(e=s,n=a):s.channel===In&&(r=s,i=a)}),{x:e,xi:n,y:r,yi:i}}function k3t(t){return t&&t.selection}function SV(t){return t&&!!t.field&&t.equal!==void 0}function Ive(t){return t&&!!t.field&&t.lt!==void 0}function Dve(t){return t&&!!t.field&&t.lte!==void 0}function Rve(t){return t&&!!t.field&&t.gt!==void 0}function Ove(t){return t&&!!t.field&&t.gte!==void 0}function CV(t){return!!(t&&t.field&&je(t.range)&&t.range.length===2)}function EV(t){return t&&!!t.field&&(je(t.oneOf)||je(t.in))}function A3t(t){return t&&!!t.field&&t.valid!==void 0}function Fve(t){return EV(t)||SV(t)||CV(t)||Ive(t)||Rve(t)||Dve(t)||Ove(t)}function Lve(t,e,n){return i0(e,function(r){return Bt(r)?r:k3t(r)?$ve(t,r.selection,n):Pve(r)})}function iu(t,e){return Q2(t,{timeUnit:e,time:!0})}function M3t(t,e){return t.map(function(n){return iu(n,e)})}function Pve(t,e){e===void 0&&(e=!0);var n=t.field,r=t.timeUnit,i=r?"time("+AU(r,n)+")":mt(t,{expr:"datum"});if(SV(t))return i+"==="+iu(t.equal,r);if(Ive(t)){var s=t.lt;return i+"<"+iu(s,r)}else if(Rve(t)){var a=t.gt;return i+">"+iu(a,r)}else if(Dve(t)){var s=t.lte;return i+"<="+iu(s,r)}else if(Ove(t)){var a=t.gte;return i+">="+iu(a,r)}else{if(EV(t))return"indexof(["+M3t(t.oneOf,r).join(",")+"], "+i+") !== -1";if(A3t(t))return t.valid?i+"!==null&&!isNaN("+i+")":i+"===null||isNaN("+i+")";if(CV(t)){var a=t.range[0],s=t.range[1];if(a!==null&&s!==null&&e)return"inrange("+i+", ["+iu(a,r)+", "+iu(s,r)+"])";var o=[];return a!==null&&o.push(i+" >= "+iu(a,r)),s!==null&&o.push(i+" <= "+iu(s,r)),o.length>0?o.join(" && "):"true"}}throw new Error("Invalid field predicate: "+JSON.stringify(t))}function N3t(t){return Fve(t)&&t.timeUnit?le({},t,{timeUnit:NU(t.timeUnit)}):t}function $3t(t,e,n,r,i,s,a){return Ge(e)&&s&&t===s.fieldChannel?Io(e,r,{suffix:"end"}):TV(t,e,n,r,i,s,a)}function I3t(t,e,n,r,i,s,a){return Ge(e)&&s&&t.charAt(0)===s.fieldChannel.charAt(0)?Io(e,r,{suffix:"start"}):TV(t,n,void 0,r,i,s,a)}function zve(t,e){var n=t+"Offset",r=e[n];if(r)return r}function SZ(t,e,n,r){var i=n==="start"?void 0:"end";return Io(t,e,{binSuffix:i},r?{offset:r}:{})}function Io(t,e,n,r){var i=le({},e?{scale:e}:{},{field:mt(t,n)});return r?le({},i,r):i}function Bve(t,e){return e===void 0&&(e=!0),{scale:t,band:e}}function CZ(t,e,n){var r=mt(e,{expr:"datum"}),i=n!==void 0?mt(n,{expr:"datum"}):mt(e,{binSuffix:"end",expr:"datum"});return{signal:'scale("'+t+'", ('+r+" + "+i+") / 2)"}}function TV(t,e,n,r,i,s,a){if(e){if(Ge(e)){if(Jn(e.bin))return At([rn,In],t)&&e.type===Dd?s&&s.impute?Io(e,r,{binSuffix:"mid"}):CZ(r,e):Io(e,r,hS(e,t)?{binSuffix:"range"}:{});if(ha(e.bin)){if(Ge(n))return CZ(r,e,n);var o=t===rn?Hu:wf;Ke(Xe.channelRequiredForBinned(o))}if(i){var l=i.get("type");if(_s(l))return l==="band"?Io(e,r,{binSuffix:"range"},{band:.5}):Io(e,r,{binSuffix:"range"})}return Io(e,r,{})}else if(sf(e)){var u=e.value;return At(["x","x2"],t)&&u==="width"?{field:{group:"width"}}:At(["y","y2"],t)&&u==="height"?{field:{group:"height"}}:{value:u}}}return bn(a)?a():a}function EZ(t,e){for(var n=[],r={},i=0,s=t;i<s.length;i++){var a=s[i],o=J2(a,e,{allowDisabling:!1}),l=kV(a,e).signal;r[o]||n.push(at(o)+": "+l),r[o]=!0}return n.length?{signal:"{"+n.join(", ")+"}"}:void 0}function kV(t,e){if(t){if(sf(t))return{value:t.value};if(Ge(t))return qve(t,Wge(t),"datum",e)}}function Ma(t){return le({},t,{mult:.5})}function D3t(t){if(t.get("zero")!==!1)return!0;var e=t.domains;return je(e)?mw(e,function(n){return je(n)&&n.length===2&&n[0]<=0&&n[1]>=0}):!1}function Uve(t,e,n,r,i){return function(){if(Bt(t)){if(n){var s=r.get("type");if(At([wn.LOG,wn.TIME,wn.UTC],s))(i==="bar"||i==="area")&&Ke(Xe.nonZeroScaleUsedWithLengthMark(i,e,{scaleType:s}));else{if(D3t(r))return{scale:n,value:0};(i==="bar"||i==="area")&&Ke(Xe.nonZeroScaleUsedWithLengthMark(i,e,{zeroFalse:r.explicit.zero===!1}))}}return t==="zeroOrMin"?e==="x"?{value:0}:{field:{group:"height"}}:e==="x"?{field:{group:"width"}}:{value:0}}return t}}function ZC(t){return t!=="transparent"&&t!==null&&t!==void 0}function Vve(t){var e,n,r=t.markDef,i=t.encoding,s=t.config,a=r.filled,o=r.type,l={fill:ba("fill",r,s),stroke:ba("stroke",r,s),color:ba("color",r,s)},u=At(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,c=un(r.fill,l.fill,u),f=un(r.stroke,l.stroke),d=a?"fill":"stroke",h=le({},c?{fill:{value:c}}:{},f?{stroke:{value:f}}:{});return i.fill||i.stroke?(r.color&&Ke(Xe.droppingColor("property",{fill:"fill"in i,stroke:"stroke"in i})),le({},Ki("fill",t,{defaultValue:un(c,u)}),Ki("stroke",t,{defaultValue:f}))):i.color?le({},h,Ki("color",t,{vgChannel:d,defaultValue:un(r[d],r.color,l[d],l.color,a?u:void 0)})):ZC(r.fill)||ZC(r.stroke)?(r.color&&Ke(Xe.droppingColor("property",{fill:"fill"in r,stroke:"stroke"in r})),h):r.color?le({},h,(e={},e[d]={value:r.color},e)):ZC(l.fill)||ZC(l.stroke)?h:l.color?le({},u?{fill:{value:"transparent"}}:{},(n={},n[d]={value:l.color},n)):{}}function ac(t,e){var n=Vve(t),r=n.fill,i=n.stroke;return le({},R3t(t.markDef,e),TZ(t,"fill",r),TZ(t,"stroke",i),Ki("opacity",t),Ki("fillOpacity",t),Ki("strokeOpacity",t),Ki("strokeWidth",t),F3t(t),Gve(t,"href"))}function TZ(t,e,n){var r,i,s=t.config,a=t.mark;if(s.invalidValues&&n&&!ib(a)){var o=Wve(t,{invalid:!0,channels:iS});if(o)return r={},r[e]=[{test:o,value:null}].concat(qt(n)),r}return n?(i={},i[e]=n,i):{}}function R3t(t,e){return kAt.reduce(function(n,r){return t[r]!==void 0&&e[r]!=="ignore"&&(n[r]={value:t[r]}),n},{})}function O3t(t,e){var n;if(e!==void 0)return n={},n[t]={value:e},n}function Wve(t,e){var n=e.invalid,r=n===void 0?!1:n,i=e.channels,s=i.reduce(function(l,u){var c=t.getScaleComponent(u);if(c){var f=c.get("type"),d=t.vgField(u,{expr:"datum"});d&&Sf(f)&&(l[d]=!0)}return l},{}),a=He(s);if(a.length>0){var o=r?"||":"&&";return a.map(function(l){var u=r?"===":"!==";return l+" "+u+" null "+o+" "+(r?"":"!")+"isNaN("+l+")"}).join(" "+o+" ")}}function AV(t){if(t.config.invalidValues==="filter"){var e=Wve(t,{channels:["x","y"]});if(e)return{defined:{signal:e}}}return{}}function Ki(t,e,n){n===void 0&&(n={});var r=e.markDef,i=e.encoding,s=n.vgChannel,a=s===void 0?t:s,o=n.defaultValue,l=o===void 0?r[a]:o,u=n.defaultRef||(l!==void 0?{value:l}:void 0),c=i[t];return K$(e,c,a,function(f){return TV(t,f,void 0,e.scaleName(t),e.getScaleComponent(t),null,u)})}function K$(t,e,n,r){var i,s,a=e&&e.condition,o=r(e);if(a){var l=je(a)?a:[a],u=l.map(function(c){var f=r(c),d=$ge(c)?$ve(t,c.selection):Lve(t,c.test);return le({test:d},f)});return i={},i[n]=u.concat(o!==void 0?[o]:[]),i}else return o!==void 0?(s={},s[n]=o,s):{}}function F3t(t){var e=t.encoding,n=t.markDef,r=t.config,i=e.tooltip;return je(i)?{tooltip:EZ(i,r)}:K$(t,i,"tooltip",function(s){var a=kV(s,t.config);if(a)return a;var o=un(n.tooltip,ba("tooltip",n,r));if(Bt(o))return{value:o};if(Gt(o))return o.content==="encoding"?EZ(hx(e),r):{signal:"datum"}})}function Gve(t,e){e===void 0&&(e="text");var n=t.encoding[e];return K$(t,n,e,function(r){return kV(r,t.config)})}function Z$(t,e,n){var r,i,s,a=n.scaleName(e),o=e==="x"?"width":"height";if(n.encoding.size||n.markDef.size!==void 0){var l=n.markDef.orient;if(l){var u=(r={},r[e+"c"]=Io(t,a,{},{band:.5}),r);if(io(n.encoding.size))return le({},u,Ki("size",n,{vgChannel:o}));if(sf(n.encoding.size))return le({},u,Ki("size",n,{vgChannel:o}));if(n.markDef.size!==void 0)return le({},u,(i={},i[o]={value:n.markDef.size},i))}else Ke(Xe.cannotApplySizeToNonOrientedMark(n.markDef.type))}return s={},s[e]=Io(t,a,{binSuffix:"range"}),s[o]=Bve(a),s}function Hve(t,e,n,r){var i=t==="x"?"xc":"yc",s=t==="x"?"width":"height";return le({},hi(t,e,n,i),Ki("size",e,{defaultRef:r,vgChannel:s}))}function cv(t,e,n,r,i,s){var a,o,l={x:s?i:0,x2:s?0:i,y:s?0:i,y2:s?i:0},u=n===rn?Hu:wf;if(Jn(t.bin))return a={},a[u]=SZ(t,r,"start",l[n+"2"]),a[n]=SZ(t,r,"end",l[n]),a;if(ha(t.bin)&&Ge(e))return o={},o[u]=Io(t,r,{},{offset:l[n+"2"]}),o[n]=Io(e,r,{},{offset:l[n]}),o;Ke(Xe.channelRequiredForBinned(u))}function hi(t,e,n,r){var i,s=e.encoding,a=e.mark,o=e.stack,l=s[t],u=s[t===rn?Hu:wf],c=e.scaleName(t),f=e.getScaleComponent(t),d=zve(t,e.markDef),h=!l&&(s.latitude||s.longitude)?{field:e.getName(t)}:le({},$3t(t,l,u,c,f,o,Uve(n,t,c,f,a)),d?{offset:d}:{});return i={},i[r||t]=h,i}function Yp(t,e,n){var r,i=t.encoding,s=t.mark,a=t.stack,o=n==="x2"?"x":"y",l=i[o],u=t.scaleName(o),c=t.getScaleComponent(o),f=zve(n,t.markDef),d=!l&&(i.latitude||i.longitude)?{field:t.getName(n)}:le({},I3t(n,l,i[n],u,c,a,Uve(e,o,u,c,s)),f?{offset:f}:{});return r={},r[n]=d,r}function L3t(t,e,n){for(var r=0,i=n;r<i.length;r++){var s=i[r],a=ba(s,e.markDef,e.config);a!==void 0&&(t[s]={value:a})}return t}function jve(t){return[].concat(t.type,t.style||[])}function ba(t,e,n,r){var i=(r===void 0?{}:r).skipGeneralMarkConfig,s=i===void 0?!1:i;return un(QP(t,e,n.style),n[e.type][t],s?void 0:n.mark[t])}function QP(t,e,n){for(var r=jve(e),i,s=0,a=r;s<a.length;s++){var o=a[s],l=n[o],u=t;l&&l[u]!==void 0&&(i=l[u])}return i}function qve(t,e,n,r){var i=MV(t,e,r);if(Jn(t.bin)){var s=mt(t,{expr:n}),a=mt(t,{expr:n,binSuffix:"end"});return{signal:Yve(s,a,i,r)}}else{if(t.type==="quantitative")return{signal:""+Xve(mt(t,{expr:n,binSuffix:"range"}),i)};if(Jy(t)){var o=L$(t)&&t.scale&&t.scale.type===wn.UTC;return{signal:NV(mt(t,{expr:n}),t.timeUnit,e,r.text.shortTimeLabels,r.timeFormat,o,!0)}}else return{signal:"''+"+mt(t,{expr:n})}}}function MV(t,e,n){if(!Jy(t)){if(e)return e;if(t.type===Dd)return n.numberFormat}}function Xve(t,e){return"format("+t+', "'+(e||"")+'")'}function kZ(t,e,n){return Xve(t,e||n.numberFormat)}function Yve(t,e,n,r){return t+" === null || isNaN("+t+') ? "null" : '+kZ(t,n,r)+' + " - " + '+kZ(e,n,r)}function NV(t,e,n,r,i,s,a){return a===void 0&&(a=!1),!e||n?(n=n||i,n||a?(s?"utc":"time")+"Format("+t+", '"+n+"')":void 0):Mge(e,t,r,s)}function Kve(t,e){return(je(t)?t:[t]).reduce(function(n,r){return n.field.push(mt(r,e)),n.order.push(r.sort||"ascending"),n},{field:[],order:[]})}function Zve(t,e){var n=t.slice();return e.forEach(function(r){for(var i=0,s=n;i<s.length;i++){var a=s[i];if(Yn(a)===Yn(r))return}n.push(r)}),n}function Jve(t,e){return t===e||!e?t:t?t+", "+e:e}function Qve(t,e){if(je(t.value)&&je(e.value))return{explicit:t.explicit,value:Zve(t.value,e.value)};if(!je(t.value)&&!je(e.value))return{explicit:t.explicit,value:Jve(t.value,e.value)};throw new Error("It should never reach here")}function hS(t,e){return Jn(t.bin)?Dm(e)&&At(["ordinal","nominal"],t.type):(console.warn("Only use this method with binned field defs"),!1)}function eye(t,e){return He(t).reduce(function(n,r){var i=t[r];return le({},n,K$(e,i,r,function(s){return{value:s.value}}))},{})}function Wo(t,e){var n=t&&t[e];return n?je(n)?mw(n,function(r){return!!r.field}):Ge(n)||rf(n):!1}function $V(t){return mw(U$,function(e){if(Wo(t,e)){var n=t[e];if(je(n))return mw(n,function(i){return!!i.aggregate});var r=io(n);return r&&!!r.aggregate}return!1})}function J$(t,e){var n=[],r=[],i=[],s=[],a={};return Q$(t,function(o,l){var u=o.field,c=o.aggregate,f=o.timeUnit,d=o.bin,h=xn(o,["field","aggregate","timeUnit","bin"]);if(Ge(o)&&(c||f||d)){var p=P$(o),m=p&&p.title,g=mt(o,{forAs:!0}),v=le({},m?[]:{title:J2(o,e,{allowDisabling:!0})},h,{field:g}),y=l===Lt.X||l===Lt.Y;if(c&&bU(c)){var b={op:c,as:g};u&&(b.field=u),s.push(b)}else if(Jn(d)){if(r.push({bin:d,field:u,as:g}),n.push(mt(o,{binSuffix:"end"})),hS(o,l)&&n.push(mt(o,{binSuffix:"range"})),y){var x={field:g+"_end",type:da.QUANTITATIVE};a[l+"2"]=x}v.bin="binned",v.type=da.QUANTITATIVE}else if(f){i.push({timeUnit:f,field:u,as:g});var w=MU(f,e.axis.shortTimeLabels).join(" ");o0e(l)?v.legend=le({format:w},v.legend):y?v.axis=le({format:w},v.axis):(l==="text"||l==="tooltip")&&(v.format=v.format||w)}c||n.push(g),a[l]=v}else Ge(o)&&n.push(u),a[l]=t[l]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:a}}function tye(t,e){return He(t).reduce(function(n,r){if(!eV(r))return Ke(Xe.invalidEncodingChannel(r)),n;if(!u0e(t,r,e))return Ke(Xe.incompatibleChannel(r,e)),n;if(r==="size"&&e==="line"){var i=io(t[r]);if(i&&i.aggregate)return Ke(Xe.LINE_WITH_VARYING_SIZE),n}if(r==="color"&&("fill"in t||"stroke"in t))return Ke(Xe.droppingColor("encoding",{fill:"fill"in t,stroke:"stroke"in t})),n;var s=t[r];if(r==="detail"||r==="order"&&!je(s)&&!sf(s)||r==="tooltip"&&je(s))s&&(n[r]=(je(s)?s:[s]).reduce(function(a,o){return Ge(o)?a.push(Jk(o,r)):Ke(Xe.emptyFieldDef(o,r)),a},[]));else{if(!Ge(s)&&!sf(s)&&!RU(s))return Ke(Xe.emptyFieldDef(s,r)),n;n[r]=LU(s,r)}return n},{})}function nye(t){return t&&(!!t.x&&!!t.x2||!!t.y&&!!t.y2)}function hx(t){var e=[];return U$.forEach(function(n){if(Wo(t,n)){var r=t[n];(je(r)?r:[r]).forEach(function(i){Ge(i)?e.push(i):rf(i)&&e.push(i.condition)})}}),e}function Q$(t,e,n){if(t)for(var r=function(o){je(t[o])?t[o].forEach(function(l){e.call(n,l,o)}):e.call(n,t[o],o)},i=0,s=He(t);i<s.length;i++){var a=s[i];r(a)}}function eI(t,e,n,r){return t?He(t).reduce(function(i,s){var a=t[s];return je(a)?a.reduce(function(o,l){return e.call(r,o,l,s)},i):e.call(r,i,a,s)},n):n}const P3t=Object.freeze(Object.defineProperty({__proto__:null,channelHasField:Wo,extractTransformsFromEncoding:J$,fieldDefs:hx,forEach:Q$,isAggregate:$V,isRanged:nye,normalizeEncoding:tye,reduce:eI},Symbol.toStringTag,{value:"Module"}));function IV(t,e,n,r,i){var s=n.scale,a=n.axis;return function(o,l,u,c,f){c===void 0&&(c=void 0),f===void 0&&(f={});var d,h,p=a&&a.title!==void 0?void 0:n.title!==void 0?n.title:n.field;return rye(t,o,i,{mark:l,encoding:le((d={},d[e]=le({field:u+"_"+n.field,type:n.type},p?{title:p}:{},s?{scale:s}:{},a?{axis:a}:{}),d),Bt(c)?(h={},h[e+"2"]={field:c+"_"+n.field,type:n.type},h):{},r,f)})}}function rye(t,e,n,r){var i=t.clip,s=t.color,a=t.opacity,o=t.type;return t[e]||t[e]===void 0&&n[e]?[le({},r,{mark:le({},n[e],i?{clip:i}:{},s?{color:s}:{},a?{opacity:a}:{},ho(r.mark)?r.mark:{type:r.mark},{style:o+"-"+e},By(t[e])?{}:t[e])})]:[]}function iye(t,e,n){var r=t.encoding,i,s,a,o,l;return l=e==="vertical"?"y":"x",i=r[l],s=r[l+"2"],a=r[l+"Error"],o=r[l+"Error2"],{continuousAxisChannelDef:JC(i,n),continuousAxisChannelDef2:JC(s,n),continuousAxisChannelDefError:JC(a,n),continuousAxisChannelDefError2:JC(o,n),continuousAxis:l}}function JC(t,e){if(Ge(t)&&t&&t.aggregate){var n=t.aggregate,r=xn(t,["aggregate"]);return n!==e&&Ke(Xe.errorBarContinuousAxisHasCustomizedAggregate(n,e)),r}else return t}function sye(t,e){var n=t.mark,r=t.encoding;if(Ge(r.x)&&Vi(r.x)){if(Ge(r.y)&&Vi(r.y)){if(r.x.aggregate===void 0&&r.y.aggregate===e)return"vertical";if(r.y.aggregate===void 0&&r.x.aggregate===e)return"horizontal";if(r.x.aggregate===e&&r.y.aggregate===e)throw new Error("Both x and y cannot have aggregate");return ho(n)&&n.orient?n.orient:"vertical"}return"horizontal"}else{if(Ge(r.y)&&Vi(r.y))return"vertical";throw new Error("Need a valid continuous axis for "+e+"s")}}function aye(t,e,n){return le({},t,{encoding:eI(t.encoding,function(r,i,s){return e.indexOf(s)>-1?r[s]=i:Ke(Xe.incompatibleChannel(s,n)),r},{})})}var eA="boxplot",z3t={box:1,median:1,outliers:1,rule:1,ticks:1},B3t=He(z3t),U3t=["x","y","color","detail","opacity","size"];function V3t(t,e){var n;t=aye(t,U3t,eA);var r=t.mark;t.encoding;var i=t.selection;t.projection;var s=xn(t,["mark","encoding","selection","projection"]),a=ho(r)?r:{type:r};i&&Ke(Xe.selectionNotSupported("boxplot"));var o=a.extent||e.boxplot.extent,l=un(a.size,e.boxplot.size),u=!ei(o),c=W3t(t,o,e),f=c.transform,d=c.continuousAxisChannelDef,h=c.continuousAxis,p=c.groupby,m=c.encodingWithoutContinuousAxis,g=c.tickOrient;m.color;var v=m.size,y=xn(m,["color","size"]),b=function(O){return IV(a,h,d,O,e.boxplot)},x=b(y),w=b(m),S=b(le({},y,v?{size:v}:{})),C={type:"tick",color:"black",opacity:1,orient:g},_=le({type:"bar"},l?{size:l}:{}),E=le({type:"tick"},Gt(e.boxplot.median)&&e.boxplot.median.color?{color:e.boxplot.median.color}:{},l?{size:l}:{},{orient:g}),T=x("rule","rule","lower_whisker","lower_box").concat(x("rule","rule","upper_box","upper_whisker"),x("ticks",C,"lower_whisker"),x("ticks",C,"upper_whisker"),w("box",_,"lower_box","upper_box"),S("median",E,"mid_box")),k=[];if(!u){var M="datum.lower_box_"+d.field,A="datum.upper_box_"+d.field,N="("+A+" - "+M+")",$=M+" - "+o+" * "+N,D=A+" + "+o+" * "+N,P="datum."+d.field;k=rye(a,"outliers",e.boxplot,{transform:[{window:oye(d.field),frame:[null,null],groupby:p},{filter:"("+P+" < "+$+") || ("+P+" > "+D+")"}],mark:"point",encoding:le((n={},n[h]={field:d.field,type:d.type},n),y)})}return k.length>0?le({},s,{layer:[{transform:f,layer:T}].concat(k)}):le({},s,{transform:(s.transform||[]).concat(f),layer:T})}function oye(t){return[{op:"q1",field:t,as:"lower_box_"+t},{op:"q3",field:t,as:"upper_box_"+t}]}function W3t(t,e,n){var r=sye(t,eA),i=iye(t,r,eA),s=i.continuousAxisChannelDef,a=i.continuousAxis,o=s.field,l=!ei(e),u=oye(o).concat([{op:"median",field:o,as:"mid_box_"+o},{op:"min",field:o,as:(l?"lower_whisker_":"min_")+o},{op:"max",field:o,as:(l?"upper_whisker_":"max_")+o}]),c=l?[]:[{calculate:"datum.upper_box_"+o+" - datum.lower_box_"+o,as:"iqr_"+o},{calculate:"min(datum.upper_box_"+o+" + datum.iqr_"+o+" * "+e+", datum.max_"+o+")",as:"upper_whisker_"+o},{calculate:"max(datum.lower_box_"+o+" - datum.iqr_"+o+" * "+e+", datum.min_"+o+")",as:"lower_whisker_"+o}],f=t.encoding,d=a;f[d];var h=xn(f,[typeof d=="symbol"?d:d+""]),p=J$(h,n),m=p.bins,g=p.timeUnits,v=p.aggregate,y=p.groupby,b=p.encoding,x=r==="vertical"?"horizontal":"vertical";return{transform:m.concat(g,[{aggregate:v.concat(u),groupby:y}],c),groupby:y,continuousAxisChannelDef:s,continuousAxis:a,encodingWithoutContinuousAxis:b,tickOrient:x}}var lye="errorbar",G3t={ticks:1,rule:1},H3t=He(G3t);function j3t(t,e){var n=uye(t,lye,e),r=n.transform,i=n.continuousAxisChannelDef,s=n.continuousAxis,a=n.encodingWithoutContinuousAxis,o=n.ticksOrient,l=n.markDef,u=n.outerSpec,c=IV(l,s,i,a,e.errorbar),f={type:"tick",orient:o};return le({},u,{transform:r,layer:c("ticks",f,"lower").concat(c("ticks",f,"upper"),c("rule","rule","lower","upper"))})}function q3t(t,e){var n=t.encoding;if(X3t(n))return{orient:sye(t,e),inputType:"raw"};var r=Y3t(n),i=K3t(n),s=n.x,a=n.y;if(r){if(i)throw new Error(e+" cannot be both type aggregated-upper-lower and aggregated-error");var o=n.x2,l=n.y2;if(Ge(o)&&Ge(l))throw new Error(e+" cannot have both x2 and y2");if(Ge(o)){if(Vi(o)&&Ge(s)&&Vi(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error("Both x and x2 have to be quantitative in "+e)}else{if(Vi(l)&&Ge(a)&&Vi(a))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error("Both y and y2 have to be quantitative in "+e)}}else{var u=n.xError,c=n.xError2,f=n.yError,d=n.yError2;if(Ge(c)&&!Ge(u))throw new Error(e+" cannot have xError2 without xError");if(Ge(d)&&!Ge(f))throw new Error(e+" cannot have yError2 without yError");if(Ge(u)&&Ge(f))throw new Error(e+" cannot have both xError and yError with both are quantiative");if(Ge(u)){if(Vi(u)&&Ge(s)&&Vi(s)&&(!Ge(c)||Vi(c)))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else{if(Vi(f)&&Ge(a)&&Vi(a)&&(!Ge(d)||Vi(d)))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}}}function X3t(t){return(Ge(t.x)||Ge(t.y))&&!Ge(t.x2)&&!Ge(t.y2)&&!Ge(t.xError)&&!Ge(t.xError2)&&!Ge(t.yError)&&!Ge(t.yError2)}function Y3t(t){return Ge(t.x2)||Ge(t.y2)}function K3t(t){return Ge(t.xError)||Ge(t.xError2)||Ge(t.yError)||Ge(t.yError2)}var Z3t=["x","y","x2","y2","xError","yError","xError2","yError2","color","detail","opacity"];function uye(t,e,n){t=aye(t,Z3t,e);var r=t.mark,i=t.encoding,s=t.selection;t.projection;var a=xn(t,["mark","encoding","selection","projection"]),o=ho(r)?r:{type:r};s&&Ke(Xe.selectionNotSupported(e));var l=q3t(t,e),u=l.orient,c=l.inputType,f=iye(t,u,e),d=f.continuousAxisChannelDef,h=f.continuousAxisChannelDef2,p=f.continuousAxisChannelDefError,m=f.continuousAxisChannelDefError2,g=f.continuousAxis,v=J3t(o,d,h,p,m,c,e,n),y=v.errorBarSpecificAggregate,b=v.postAggregateCalculates,x=g;i[x];var w=g+"2";i[w];var S=g+"Error";i[S];var C=g+"Error2";i[C];var _=xn(i,[typeof x=="symbol"?x:x+"",typeof w=="symbol"?w:w+"",typeof S=="symbol"?S:S+"",typeof C=="symbol"?C:C+""]),E=J$(_,n),T=E.bins,k=E.timeUnits,M=E.aggregate,A=E.groupby,N=E.encoding,$=M.concat(y),D=c!=="raw"?[]:A;return{transform:(a.transform||[]).concat(T,k,$.length?[{aggregate:$,groupby:D}]:[],b),groupby:D,continuousAxisChannelDef:d,continuousAxis:g,encodingWithoutContinuousAxis:N,ticksOrient:u==="vertical"?"horizontal":"vertical",markDef:o,outerSpec:a}}function J3t(t,e,n,r,i,s,a,o){var l=[],u=[],c=e.field;if(s==="raw"){var f=t.center?t.center:t.extent?t.extent==="iqr"?"median":"mean":o.errorbar.center,d=t.extent?t.extent:f==="mean"?"stderr":"iqr";f==="median"!=(d==="iqr")&&Ke(Xe.errorBarCenterIsUsedWithWrongExtent(f,d,a)),d==="stderr"||d==="stdev"?(l=[{op:d,field:c,as:"extent_"+c},{op:f,field:c,as:"center_"+c}],u=[{calculate:"datum.center_"+c+" + datum.extent_"+c,as:"upper_"+c},{calculate:"datum.center_"+c+" - datum.extent_"+c,as:"lower_"+c}]):(t.center&&t.extent&&Ke(Xe.errorBarCenterIsNotNeeded(t.extent,a)),l=[{op:d==="ci"?"ci0":"q1",field:c,as:"lower_"+c},{op:d==="ci"?"ci1":"q3",field:c,as:"upper_"+c}])}else(t.center||t.extent)&&Ke(Xe.errorBarCenterAndExtentAreNotNeeded(t.center,t.extent)),s==="aggregated-upper-lower"?u=[{calculate:"datum."+c,as:"lower_"+c},{calculate:"datum."+n.field,as:"upper_"+c}]:s==="aggregated-error"&&(u=[{calculate:"datum."+c+" + datum."+r.field,as:"upper_"+c}],i?u.push({calculate:"datum."+c+" + datum."+i.field,as:"lower_"+c}):u.push({calculate:"datum."+c+" - datum."+r.field,as:"lower_"+c}));return{postAggregateCalculates:u,errorBarSpecificAggregate:l}}var cye="errorband",Q3t={band:1,borders:1},eNt=He(Q3t);function tNt(t,e){var n=uye(t,cye,e),r=n.transform,i=n.continuousAxisChannelDef,s=n.continuousAxis,a=n.encodingWithoutContinuousAxis,o=n.markDef,l=n.outerSpec,u=IV(o,s,i,a,e.errorband),c=t.encoding.x!==void 0&&t.encoding.y!==void 0,f={type:c?"area":"rect"},d={type:c?"line":"rule"},h=le({},o.interpolate?{interpolate:o.interpolate}:{},o.tension&&o.interpolate?{interpolate:o.tension}:{});return c?(f=le({},f,h),d=le({},d,h)):o.interpolate?Ke(Xe.errorBand1DNotSupport("interpolate")):o.tension&&Ke(Xe.errorBand1DNotSupport("tension")),le({},l,{transform:r,layer:u("band",f,"lower","upper").concat(u("borders",d,"lower"),u("borders",d,"upper"))})}var Kp={};function tI(t,e,n){Kp[t]={normalizer:e,parts:n}}function nNt(t){delete Kp[t]}function fye(){return He(Kp)}function rNt(t){if(t in Kp)return Kp[t].parts;throw new Error("Unregistered composite mark "+t)}tI(eA,V3t,B3t);tI(lye,j3t,H3t);tI(cye,tNt,eNt);function dye(t,e){var n=ho(t.mark)?t.mark.type:t.mark;if(n in Kp){var r=Kp[n].normalizer;return r(t,e)}throw new Error('Invalid mark type "'+n+'"')}const iNt=Object.freeze(Object.defineProperty({__proto__:null,add:tI,getAllCompositeMarks:fye,getCompositeMarkParts:rNt,normalize:dye,remove:nNt},Symbol.toStringTag,{value:"Module"}));function sNt(t,e,n,r){if(hS(e,n)){var i=Os(t)?t.axis(n)||t.legend(n)||{}:{},s=mt(e,{expr:"datum"}),a=mt(e,{expr:"datum",binSuffix:"end"});return{formulaAs:mt(e,{binSuffix:"range",forAs:!0}),formula:Yve(s,a,i.format,r)}}return{}}function aNt(t,e){return sS(t)+"_"+e}function oNt(t,e){return{signal:t.getName(e+"_bins"),extentSignal:t.getName(e+"_extent")}}function lNt(t){return"as"in t}function AZ(t,e,n){var r;lNt(t)?r=Bt(t.as)?[t.as,t.as+"_end"]:[t.as[0],t.as[1]]:r=[mt(t,{forAs:!0}),mt(t,{binSuffix:"end",forAs:!0})];var i=PU(e,void 0)||{},s=aNt(i,t.field),a=oNt(n,s),o=a.signal,l=a.extentSignal,u=le({bin:i,field:t.field,as:r},o?{signal:o}:{},l?{extentSignal:l}:{});return{key:s,binComponent:u}}var tA=function(t){Qt(e,t);function e(n,r){var i=t.call(this,n)||this;return i.bins=r,i}return e.prototype.clone=function(){return new e(null,En(this.bins))},e.makeFromEncoding=function(n,r){var i=r.reduceFieldDef(function(s,a,o){if(Jn(a.bin)){var l=AZ(a,a.bin,r),u=l.key,c=l.binComponent;s[u]=le({},c,s[u],sNt(r,a,o,r.config))}return s},{});return He(i).length===0?null:new e(n,i)},e.makeFromTransform=function(n,r,i){var s,a=AZ(r,r.bin,i),o=a.key,l=a.binComponent;return new e(n,(s={},s[o]=l,s))},e.prototype.merge=function(n){this.bins=le({},this.bins,n.bins),n.remove()},e.prototype.producedFields=function(){var n={};return Gc(this.bins).forEach(function(r){r.as.forEach(function(i){return n[i]=!0})}),n},e.prototype.dependentFields=function(){var n={};return Gc(this.bins).forEach(function(r){n[r.field]=!0}),n},e.prototype.hash=function(){return"Bin "+Pr(this.bins)},e.prototype.assemble=function(){return jp(Gc(this.bins).map(function(n){var r=[],i=le({type:"bin",field:n.field,as:n.as,signal:n.signal},n.bin);return!n.bin.extent&&n.extentSignal&&(r.push({type:"extent",field:n.field,signal:n.extentSignal}),i.extent={signal:n.extentSignal}),r.push(i),n.formula&&r.push({type:"formula",expr:n.formula,as:n.formulaAs}),r}))},e}(xi),hye=function(t){Qt(e,t);function e(n,r,i){var s=t.call(this,n)||this;return s.model=r,s.filter=i,s.expr=Lve(s.model,s.filter,s),s._dependentFields=G0e(s.expr),s}return e.prototype.clone=function(){return new e(null,this.model,En(this.filter))},e.prototype.dependentFields=function(){return this._dependentFields},e.prototype.assemble=function(){return{type:"filter",expr:this.expr}},e.prototype.hash=function(){return"Filter "+this.expr},e}(xi),pye=function(t){Qt(e,t);function e(n,r){var i=t.call(this,n)||this;i.transform=r,i.transform=En(r);var s=i.transform,a=s.flatten,o=s.as,l=o===void 0?[]:o;return i.transform.as=a.map(function(u,c){return l[c]||u}),i}return e.prototype.clone=function(){return new e(this.parent,En(this.transform))},e.prototype.producedFields=function(){var n=this;return this.transform.flatten.reduce(function(r,i,s){return r[n.transform.as[s]]=!0,r},{})},e.prototype.hash=function(){return"FlattenTransform "+Pr(this.transform)},e.prototype.assemble=function(){var n=this.transform,r=n.flatten,i=n.as,s={type:"flatten",fields:r,as:i};return s},e}(xi),mye=function(t){Qt(e,t);function e(n,r){var i=t.call(this,n)||this;i.transform=r,i.transform=En(r);var s=i.transform.as||[void 0,void 0];return i.transform.as=[s[0]||"key",s[1]||"value"],i}return e.prototype.clone=function(){return new e(null,En(this.transform))},e.prototype.producedFields=function(){return this.transform.as.reduce(function(n,r){return n[r]=!0,n},{})},e.prototype.hash=function(){return"FoldTransform "+Pr(this.transform)},e.prototype.assemble=function(){var n=this.transform,r=n.fold,i=n.as,s={type:"fold",fields:r,as:i};return s},e}(xi),gye=function(t){Qt(e,t);function e(n,r,i,s){var a=t.call(this,n)||this;return a.fields=r,a.geojson=i,a.signal=s,a}return e.prototype.clone=function(){return new e(null,En(this.fields),this.geojson,this.signal)},e.parseAll=function(n,r){var i=0;if([[ob,sb],[qp,ab]].forEach(function(a){var o=a.map(function(l){return r.channelHasField(l)?r.fieldDef(l).field:void 0});(o[0]||o[1])&&(n=new e(n,o,null,r.getName("geojson_"+i++)))}),r.channelHasField(Aa)){var s=r.fieldDef(Aa);s.type===Am&&(n=new e(n,null,s.field,r.getName("geojson_"+i++)))}return n},e.prototype.assemble=function(){return le({type:"geojson"},this.fields?{fields:this.fields}:{},this.geojson?{geojson:this.geojson}:{},{signal:this.signal})},e}(xi),vye=function(t){Qt(e,t);function e(n,r,i,s){var a=t.call(this,n)||this;return a.projection=r,a.fields=i,a.as=s,a}return e.prototype.clone=function(){return new e(null,this.projection,En(this.fields),En(this.as))},e.parseAll=function(n,r){return r.projectionName()&&[[ob,sb],[qp,ab]].forEach(function(i){var s=i.map(function(o){return r.channelHasField(o)?r.fieldDef(o).field:void 0}),a=i[0]===qp?"2":"";(s[0]||s[1])&&(n=new e(n,r.projectionName(),s,[r.getName("x"+a),r.getName("y"+a)]))}),n},e.prototype.assemble=function(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}},e}(xi),nA=function(t){Qt(e,t);function e(n){return t.call(this,n)||this}return e.prototype.clone=function(){return new e(null)},e.prototype.producedFields=function(){var n;return n={},n[bw]=!0,n},e.prototype.assemble=function(){return{type:"identifier",as:bw}},e}(xi),uNt={vgMark:"area",encodeEntry:function(t){return le({},ac(t,{size:"ignore",orient:"include"}),hi("x",t,"zeroOrMin"),hi("y",t,"zeroOrMin"),Yp(t,"zeroOrMin",t.markDef.orient==="horizontal"?"x2":"y2"),AV(t))}},cNt={vgMark:"rect",encodeEntry:function(t){return le({},ac(t,{size:"ignore",orient:"ignore"}),fNt(t),dNt(t))}};function fNt(t){var e=t.config,n=t.encoding,r=t.markDef,i=t.width,s=r.orient,a=n.size,o=n.x,l=n.x2,u=t.scaleName(rn),c=t.getScaleComponent(rn);if(Ge(o)&&ha(o.bin))return cv(o,l,rn,u,un(r.binSpacing,e.bar.binSpacing),c.get("reverse"));if(s==="horizontal"||l)return le({},hi("x",t,"zeroOrMin"),Yp(t,"zeroOrMin","x2"));if(Ge(o)){var f=c.get("type");if(Jn(o.bin)&&!a&&!_s(f))return cv(o,void 0,rn,t.scaleName("x"),un(r.binSpacing,e.bar.binSpacing),c.get("reverse"));if(f===wn.BAND)return Z$(o,"x",t)}return Hve("x",t,le({},Ma(i)),yye(r,u,c,e))}function dNt(t){var e=t.config,n=t.encoding,r=t.height,i=t.markDef,s=i.orient,a=n.size,o=n.y,l=n.y2,u=t.scaleName(In),c=t.getScaleComponent(In);if(Ge(o)&&ha(o.bin))return cv(o,l,In,u,un(i.binSpacing,e.bar.binSpacing),c.get("reverse"));if(s==="vertical"||l)return le({},hi("y",t,"zeroOrMin"),Yp(t,"zeroOrMin","y2"));if(Ge(o)){var f=c.get("type");if(Jn(o.bin)&&!a&&!_s(f))return cv(o,void 0,In,t.scaleName("y"),un(i.binSpacing,e.bar.binSpacing),c.get("reverse"));if(f===wn.BAND)return Z$(o,"y",t)}return Hve("y",t,Ma(r),yye(i,u,c,e))}function yye(t,e,n,r){if(t.size!==void 0)return{value:t.size};var i=ba("size",t,r,{skipGeneralMarkConfig:!0});if(i!==void 0)return{value:i};if(n){var s=n.get("type");if(s==="point"||s==="band"){if(r.bar.discreteBandSize!==void 0)return{value:r.bar.discreteBandSize};if(s===wn.POINT){var a=n.get("range");if(ju(a)&&ei(a.step))return{value:a.step-1};Ke(Xe.BAR_WITH_POINT_SCALE_AND_RANGESTEP_NULL)}else return Bve(e)}else return{value:r.bar.continuousBandSize}}var o=un(r.bar.discreteBandSize,r.scale.rangeStep?r.scale.rangeStep-1:void 0,20);return{value:o}}var hNt={vgMark:"shape",encodeEntry:function(t){return le({},ac(t,{size:"ignore",orient:"ignore"}))},postEncodingTransform:function(t){var e=t.encoding,n=e.shape,r=le({type:"geoshape",projection:t.projectionName()},n&&Ge(n)&&n.type===Am?{field:mt(n,{expr:"datum"})}:{});return[r]}},pNt={vgMark:"line",encodeEntry:function(t){var e=t.width,n=t.height;return le({},ac(t,{size:"ignore",orient:"ignore"}),hi("x",t,Ma(e)),hi("y",t,Ma(n)),Ki("size",t,{vgChannel:"strokeWidth"}),AV(t))}},mNt={vgMark:"trail",encodeEntry:function(t){var e=t.width,n=t.height;return le({},ac(t,{size:"include",orient:"ignore"}),hi("x",t,Ma(e)),hi("y",t,Ma(n)),Ki("size",t),AV(t))}};function DV(t,e){var n=t.config,r=t.markDef,i=t.width,s=t.height;return le({},ac(t,{size:"include",orient:"ignore"}),hi("x",t,Ma(i)),hi("y",t,Ma(s)),Ki("size",t,{defaultValue:ba("size",r,n)}),gNt(t,n,e))}function gNt(t,e,n){return n?{shape:{value:n}}:Ki("shape",t,{defaultValue:ba("shape",t.markDef,e)})}var vNt={vgMark:"symbol",encodeEntry:function(t){return DV(t)}},yNt={vgMark:"symbol",encodeEntry:function(t){return DV(t,"circle")}},bNt={vgMark:"symbol",encodeEntry:function(t){return DV(t,"square")}},xNt={vgMark:"rect",encodeEntry:function(t){return le({},ac(t,{size:"ignore",orient:"ignore"}),wNt(t),_Nt(t))}};function wNt(t){var e=t.encoding.x,n=t.encoding.x2,r=t.getScaleComponent(rn),i=r?r.get("type"):void 0,s=t.scaleName(rn);if(Ge(e)&&(Jn(e.bin)||ha(e.bin)))return cv(e,n,rn,s,0,r.get("reverse"));if(Ge(e)&&r&&_s(i)){if(i===wn.BAND)return Z$(e,"x",t);throw new Error(Xe.scaleTypeNotWorkWithMark(B$,i))}else return le({},hi("x",t,"zeroOrMax"),Yp(t,"zeroOrMin","x2"))}function _Nt(t){var e=t.encoding.y,n=t.encoding.y2,r=t.getScaleComponent(In),i=r?r.get("type"):void 0,s=t.scaleName(In);if(Ge(e)&&(Jn(e.bin)||ha(e.bin)))return cv(e,n,In,s,0,r.get("reverse"));if(Ge(e)&&r&&_s(i)){if(i===wn.BAND)return Z$(e,"y",t);throw new Error(Xe.scaleTypeNotWorkWithMark(B$,i))}else return le({},hi("y",t,"zeroOrMax"),Yp(t,"zeroOrMin","y2"))}var SNt={vgMark:"rule",encodeEntry:function(t){var e=t.markDef,n=t.width,r=t.height,i=e.orient;return!t.encoding.x&&!t.encoding.y&&!t.encoding.latitude&&!t.encoding.longitude?{}:le({},ac(t,{size:"ignore",orient:"ignore"}),hi("x",t,i==="horizontal"?"zeroOrMin":Ma(n)),hi("y",t,i==="vertical"?"zeroOrMin":Ma(r)),i!=="vertical"?Yp(t,"zeroOrMax","x2"):{},i!=="horizontal"?Yp(t,"zeroOrMax","y2"):{},Ki("size",t,{vgChannel:"strokeWidth",defaultValue:e.size}))}},CNt={vgMark:"text",encodeEntry:function(t){var e=t.config,n=t.encoding,r=t.width,i=t.height,s=t.markDef,a=un(s.fontSize,s.size,QP("fontSize",s,e.style),QP("size",s,e.style),e[s.type].fontSize,e[s.type].size);return le({},ac(t,{size:"ignore",orient:"ignore"}),hi("x",t,Ma(r)),hi("y",t,Ma(i)),Gve(t),Ki("size",t,{defaultValue:a,vgChannel:"fontSize"}),O3t("align",ENt(t.markDef,n,e)))}};function ENt(t,e,n){var r=t.align||ba("align",t,n);if(r===void 0)return"center"}var TNt={vgMark:"rect",encodeEntry:function(t){var e,n=t.config,r=t.markDef,i=t.width,s=t.height,a=r.orient,o=a==="horizontal"?"width":"height",l=a==="horizontal"?"height":"width";return le({},ac(t,{size:"ignore",orient:"ignore"}),hi("x",t,Ma(i),"xc"),hi("y",t,Ma(s),"yc"),Ki("size",t,{defaultValue:kNt(t),vgChannel:o}),(e={},e[l]={value:un(r.thickness,n.tick.thickness)},e))}};function kNt(t){var e=t.config,n=t.markDef,r=n.orient,i=t.getScaleComponent(r==="horizontal"?"x":"y");if(n.size!==void 0)return n.size;if(e.tick.bandSize!==void 0)return e.tick.bandSize;var s=i?i.get("range"):void 0,a=s&&ju(s)?s.step:e.scale.rangeStep;if(typeof a!="number")throw new Error("Function does not handle non-numeric rangeStep");return a/1.5}var QC={area:uNt,bar:cNt,circle:yNt,geoshape:hNt,line:pNt,point:vNt,rect:xNt,rule:SNt,square:bNt,text:CNt,tick:TNt,trail:mNt};function ANt(t){return At([tS,eS,qge],t.mark)?MNt(t):bye(t)}var MZ="faceted_path_";function MNt(t){var e=xye(t.mark,t.encoding),n=bye(t,{fromPrefix:e.length>0?MZ:""});return e.length>0?[{name:t.getName("pathgroup"),type:"group",from:{facet:{name:MZ+t.requestDataName(As),data:t.requestDataName(As),groupby:e}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:n}]:n}function NNt(t){var e=t.encoding,n=t.stack,r=t.mark,i=t.markDef,s=e.order;if(!(!je(s)&&sf(s))){if((je(s)||Ge(s))&&!n)return Kve(s,{expr:"datum"});if(ib(r)){var a=e[i.orient==="horizontal"?"y":"x"];if(Ge(a)){var o=a.sort,l=Yo(o)?mt({aggregate:$V(t.encoding)?o.op:void 0,field:o.field},{expr:"datum"}):mt(a,{binSuffix:t.stack&&t.stack.impute?"mid":void 0,expr:"datum"});return{field:l,order:"descending"}}return}}}function bye(t,e){e===void 0&&(e={fromPrefix:""});var n=t.mark,r=un(t.markDef.clip,$Nt(t)),i=jve(t.markDef),s=t.encoding.key,a=NNt(t),o=QC[n].postEncodingTransform?QC[n].postEncodingTransform(t):null;return[le({name:t.getName("marks"),type:QC[n].vgMark},r?{clip:!0}:{},i?{style:i}:{},s?{key:{field:s.field}}:{},a?{sort:a}:{},{from:{data:e.fromPrefix+t.requestDataName(As)},encode:{update:QC[n].encodeEntry(t)}},o?{transform:o}:{})]}function xye(t,e){return He(e).reduce(function(n,r){switch(r){case"x":case"y":case"order":case"href":case"x2":case"y2":case"xError":case"yError":case"xError2":case"yError2":case"latitude":case"longitude":case"latitude2":case"longitude2":case"text":case"shape":case"tooltip":return n;case"detail":case"key":var i=e[r];return(je(i)||Ge(i))&&(je(i)?i:[i]).forEach(function(a){a.aggregate||n.push(mt(a,{}))}),n;case"size":if(t==="trail")return n;case"color":case"fill":case"stroke":case"opacity":case"fillOpacity":case"strokeOpacity":case"strokeWidth":var s=io(e[r]);return s&&!s.aggregate&&n.push(mt(s,{})),n;default:throw new Error("Bug: Channel "+r+" unimplemented for line mark")}},[])}function $Nt(t){var e=t.getScaleComponent("x"),n=t.getScaleComponent("y");return!!(e&&e.get("domainRaw")||n&&n.get("domainRaw"))}var RV=function(t){Qt(e,t);function e(n,r){var i=t.call(this,n)||this;return i.transform=r,i}return e.prototype.clone=function(){return new e(null,En(this.transform))},e.prototype.producedFields=function(){var n;return n={},n[this.transform.impute]=!0,n},e.prototype.processSequence=function(n){var r=n.start,i=r===void 0?0:r,s=n.stop,a=n.step,o=[i,s].concat(a?[a]:[]).join(",");return{signal:"sequence("+o+")"}},e.makeFromTransform=function(n,r){return new e(n,r)},e.makeFromEncoding=function(n,r){var i=r.encoding,s=i.x,a=i.y;if(Ge(s)&&Ge(a)){var o=s.impute?s:a.impute?a:void 0;if(o===void 0)return;var l=s.impute?a:a.impute?s:void 0,u=o.impute,c=u.method,f=u.value,d=u.frame,h=u.keyvals,p=xye(r.mark,i);return new e(n,le({impute:o.field,key:l.field},c?{method:c}:{},f!==void 0?{value:f}:{},d?{frame:d}:{},h!==void 0?{keyvals:h}:{},p.length?{groupby:p}:{}))}return null},e.prototype.hash=function(){return"Impute "+Pr(this.transform)},e.prototype.assemble=function(){var n=this.transform,r=n.impute,i=n.key,s=n.keyvals,a=n.method,o=n.groupby,l=n.value,u=n.frame,c=u===void 0?[null,null]:u,f=le({type:"impute",field:r,key:i},s?{keyvals:A0e(s)?this.processSequence(s):s}:{},{method:"value"},o?{groupby:o}:{},{value:null}),d;if(a&&a!=="value"){var h=le({type:"window",as:["imputed_"+r+"_value"],ops:[a],fields:[r],frame:c,ignorePeers:!1},o?{groupby:o}:{}),p={type:"formula",expr:"datum."+r+" === null ? datum.imputed_"+r+"_value : datum."+r,as:r};d=[h,p]}else{var m={type:"formula",expr:"datum."+r+" === null ? "+l+" : datum."+r,as:r};d=[m]}return[f].concat(d)},e}(xi),INt=function(t){Qt(e,t);function e(n,r,i){n===void 0&&(n={}),r===void 0&&(r={}),i===void 0&&(i=!1);var s=t.call(this,n,r)||this;return s.explicit=n,s.implicit=r,s.parseNothing=i,s}return e.prototype.clone=function(){var n=t.prototype.clone.call(this);return n.parseNothing=this.parseNothing,n},e}(Fm),wye=function(t){Qt(e,t);function e(n,r,i){var s=t.call(this,n)||this;return s.transform=r,s.secondary=i,s}return e.prototype.clone=function(){return new e(null,En(this.transform),this.secondary)},e.make=function(n,r,i,s){var a=r.component.data.sources,o=Tye(i.from.data,a);o||(o=new ov(i.from.data),a.push(o));var l=r.getName("lookup_"+s),u=new Fl(o,l,"lookup",r.component.data.outputNodeRefCounts);return r.component.data.outputNodes[l]=u,new e(n,i,u.getSource())},e.prototype.producedFields=function(){return dn(this.transform.from.fields||(this.transform.as instanceof Array?this.transform.as:[this.transform.as]))},e.prototype.hash=function(){return"Lookup "+Pr({transform:this.transform,secondary:this.secondary})},e.prototype.assemble=function(){var n;if(this.transform.from.fields)n=le({values:this.transform.from.fields},this.transform.as?{as:this.transform.as instanceof Array?this.transform.as:[this.transform.as]}:{});else{var r=this.transform.as;Bt(r)||(Ke(Xe.NO_FIELDS_NEEDS_AS),r="_lookup"),n={as:[r]}}return le({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},n,this.transform.default?{default:this.transform.default}:{})},e}(xi),_ye=function(t){Qt(e,t);function e(n,r){var i=t.call(this,n)||this;return i.transform=r,i}return e.prototype.clone=function(){return new e(null,En(this.transform))},e.prototype.hash=function(){return"SampleTransform "+Pr(this.transform)},e.prototype.assemble=function(){return{type:"sample",size:this.transform.sample}},e}(xi);function Sye(t){var e=0;function n(r,i){if(r instanceof ov&&!av(r.data)){t.push(i);var s={name:null,source:i.name,transform:[]};i=s}if(r instanceof af&&(r.parent instanceof ov&&!i.source?(i.format=le({},i.format||{},{parse:r.assembleFormatParse()}),i.transform=i.transform.concat(r.assembleTransforms(!0))):i.transform=i.transform.concat(r.assembleTransforms())),r instanceof fb){i.name||(i.name="data_"+e++),!i.source||i.transform.length>0?(t.push(i),r.data=i.name):r.data=i.source,r.assemble().forEach(function(o){return t.push(o)});return}if((r instanceof hye||r instanceof Qk||r instanceof vye||r instanceof gye||r instanceof cb||r instanceof wye||r instanceof fS||r instanceof mye||r instanceof pye||r instanceof nA||r instanceof _ye)&&i.transform.push(r.assemble()),(r instanceof tA||r instanceof cS||r instanceof RV||r instanceof uS)&&(i.transform=i.transform.concat(r.assemble())),r instanceof Fl){if(i.source&&i.transform.length===0)r.setSource(i.source);else if(r.parent instanceof Fl)r.setSource(i.name);else if(i.name||(i.name="data_"+e++),r.setSource(i.name),r.numChildren()===1){t.push(i);var s={name:null,source:i.name,transform:[]};i=s}}switch(r.numChildren()){case 0:r instanceof Fl&&(!i.source||i.transform.length>0)&&t.push(i);break;case 1:n(r.children[0],i);break;default:i.name||(i.name="data_"+e++);var a=i.name;!i.source||i.transform.length>0?t.push(i):a=i.source,r.children.forEach(function(o){var l={name:null,source:a,transform:[]};n(o,l)});break}}return n}function DNt(t){var e=[],n=Sye(e);return t.children.forEach(function(r){return n(r,{source:t.name,name:null,transform:[]})}),e}function RNt(t,e){var n=[],r=Sye(n),i=0;t.sources.forEach(function(m){m.hasName()||(m.dataName="source_"+i++);var g=m.assemble();r(m,g)}),n.forEach(function(m){m.transform.length===0&&delete m.transform});for(var s=0,a=0;a<n.length;a++){var o=n[a];(o.transform||[]).length===0&&!o.source&&n.splice(s++,0,n.splice(a,1)[0])}for(var l=0,u=n;l<u.length;l++)for(var o=u[l],c=0,f=o.transform||[];c<f.length;c++){var d=f[c];d.type==="lookup"&&(d.from=t.outputNodes[d.from].getSource())}for(var h=0,p=n;h<p.length;h++){var o=p[h];o.name in e&&(o.values=e[o.name])}return n}function Cye(t){OV(t);var e=t.component.layoutSize;e.setWithExplicit("width",e5(t,"width")),e.setWithExplicit("height",e5(t,"height"))}var ONt=Cye;function FNt(t){OV(t);var e=t.component.layoutSize,n=t.isVConcat?"width":"height";e.setWithExplicit(n,e5(t,n))}function OV(t){for(var e=0,n=t.children;e<n.length;e++){var r=n[e];r.parseLayoutSize()}}function e5(t,e){for(var n=e==="width"?"x":"y",r=t.component.resolve,i,s=0,a=t.children;s<a.length;s++){var o=a[s],l=o.component.layoutSize.getWithExplicit(e),u=r.scale[n];if(u==="independent"&&l.value==="range-step"){i=void 0;break}if(i){if(u==="independent"&&i.value!==l.value){i=void 0;break}i=lS(i,l,e,"")}else i=l}if(i){for(var c=0,f=t.children;c<f.length;c++){var o=f[c];t.renameLayoutSize(o.getName(e),t.getName(e)),o.component.layoutSize.set(e,"merged",!1)}return i}else return{explicit:!1,value:void 0}}function LNt(t){var e=t.component.layoutSize;if(!e.explicit.width){var n=NZ(t,"width");e.set("width",n,!1)}if(!e.explicit.height){var r=NZ(t,"height");e.set("height",r,!1)}}function NZ(t,e){var n=e==="width"?"x":"y",r=t.config,i=t.getScaleComponent(n);if(i){var s=i.get("type"),a=i.get("range");return _s(s)&&ju(a)?"range-step":r.view[e]}else return t.hasProjection?r.view[e]:e==="width"&&t.mark==="text"?r.scale.textXRangeStep:r.scale.rangeStep||rV.rangeStep}function PNt(t,e){return Eye(t,e)}function zNt(t,e){return Eye(t,e)}function $Z(t,e){if(Ige(t.field)){if(t.field.repeat in e)return le({},t,{field:e[t.field.repeat]});Ke(Xe.noSuchRepeatedValue(t.field.repeat));return}return t}function IZ(t,e){if(t=$Z(t,e),t!==void 0){if(t.sort&&Yo(t.sort)){var n=$Z(t.sort,e);t=le({},t,n?{sort:n}:{})}return t}}function DZ(t,e){if(Ge(t)){var n=IZ(t,e);if(n)return n;if(RU(t))return{condition:t.condition}}else{if(rf(t)){var n=IZ(t.condition,e);if(n)return le({},t,{condition:n});t.condition;var r=xn(t,["condition"]);return r}return t}}function Eye(t,e){var n={};for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];if(je(i))n[r]=i.map(function(a){return DZ(a,e)}).filter(function(a){return a});else{var s=DZ(i,e);s&&(n[r]=s)}}return n}function t5(t,e,n){return mt(e,le({suffix:"by_"+mt(t)},n||{}))}var BNt=function(t){Qt(e,t);function e(n,r,i,s,a){var o=t.call(this,n,r,i,a,s,n.resolve)||this;o.type="facet",o.child=rI(n.spec,o,o.getName("child"),void 0,s,a,!1),o.children=[o.child];var l=PNt(n.facet,s);return o.facet=o.initFacet(l),o}return e.prototype.initFacet=function(n){return eI(n,function(r,i,s){return At([Rd,Od],s)?i.field===void 0?(Ke(Xe.emptyFieldDef(i,s)),r):(r[s]=LU(i,s),r):(Ke(Xe.incompatibleChannel(s,"facet")),r)},{})},e.prototype.channelHasField=function(n){return!!this.facet[n]},e.prototype.fieldDef=function(n){return this.facet[n]},e.prototype.parseData=function(){this.component.data=nI(this),this.child.parseData()},e.prototype.parseLayoutSize=function(){OV(this)},e.prototype.parseSelection=function(){this.child.parseSelection(),this.component.selection=this.child.component.selection},e.prototype.parseMarkGroup=function(){this.child.parseMarkGroup()},e.prototype.parseAxisAndHeader=function(){this.child.parseAxisAndHeader(),this.parseHeader("column"),this.parseHeader("row"),this.mergeChildAxis("x"),this.mergeChildAxis("y")},e.prototype.parseHeader=function(n){if(this.channelHasField(n)){var r=this.facet[n],i=J2(r,this.config,{allowDisabling:!0});this.child.component.layoutHeaders[n].title&&(i+=" / "+this.child.component.layoutHeaders[n].title,this.child.component.layoutHeaders[n].title=null),this.component.layoutHeaders[n]={title:i,facetFieldDef:r,header:[this.makeHeaderComponent(n,!0)]}}},e.prototype.makeHeaderComponent=function(n,r){var i=n==="row"?"height":"width";return{labels:r,sizeSignal:this.child.component.layoutSize.get(i)?this.child.getSizeSignalRef(i):void 0,axes:[]}},e.prototype.mergeChildAxis=function(n){var r=this.child;if(r.component.axes[n]){var i=this.component,s=i.layoutHeaders,a=i.resolve;if(a.axis[n]=mV(a,n),a.axis[n]==="shared")for(var o=n==="x"?"column":"row",l=s[o],u=0,c=r.component.axes[n];u<c.length;u++){var f=c[u],d=DAt(f.get("orient"));l[d]=l[d]||[this.makeHeaderComponent(o,!1)];var h=W1(f,"main",this.config,{header:!0});l[d][0].axes.push(h),f.mainExtracted=!0}}},e.prototype.assembleSelectionTopLevelSignals=function(n){return this.child.assembleSelectionTopLevelSignals(n)},e.prototype.assembleSelectionSignals=function(){return this.child.assembleSelectionSignals(),[]},e.prototype.assembleSelectionData=function(n){return this.child.assembleSelectionData(n)},e.prototype.getHeaderLayoutMixins=function(){var n=this,r={};return["row","column"].forEach(function(i){["header","footer"].forEach(function(s){var a=n.component.layoutHeaders[i],o=a[s];if(o&&o[0]){var l=i==="row"?"height":"width",u=s==="header"?"headerBand":"footerBand";n.child.component.layoutSize.get(l)||(r[u]=r[u]||{},r[u][i]=.5),a.title&&(r.offset=r.offset||{},r.offset[i==="row"?"rowTitle":"columnTitle"]=10)}})}),r},e.prototype.assembleDefaultLayout=function(){var n=this.channelHasField("column")?this.columnDistinctSignal():1;return le({},this.getHeaderLayoutMixins(),{columns:n,bounds:"full",align:"all"})},e.prototype.assembleLayoutSignals=function(){return this.child.assembleLayoutSignals()},e.prototype.columnDistinctSignal=function(){if(!(this.parent&&this.parent instanceof e)){var n=this.getName("column_domain");return{signal:"length(data('"+n+"'))"}}},e.prototype.assembleGroup=function(n){return this.parent&&this.parent instanceof e?le({},this.channelHasField("column")?{encode:{update:{columns:{field:mt(this.facet.column,{prefix:"distinct"})}}}}:{},t.prototype.assembleGroup.call(this,n)):t.prototype.assembleGroup.call(this,n)},e.prototype.getCardinalityAggregateForChild=function(){var n=[],r=[],i=[];if(this.child instanceof e){if(this.child.channelHasField("column")){var s=mt(this.child.facet.column);n.push(s),r.push("distinct"),i.push("distinct_"+s)}}else for(var a=0,o=["x","y"];a<o.length;a++){var l=o[a],u=this.child.component.scales[l];if(u&&!u.merged){var c=u.get("type"),f=u.get("range");if(_s(c)&&ju(f)){var d=j$(this.child,l),s=vV(d);s?(n.push(s),r.push("distinct"),i.push("distinct_"+s)):Ke("Unknown field for ${channel}.  Cannot calculate view size.")}}}return{fields:n,ops:r,as:i}},e.prototype.assembleFacet=function(){var n=this,r=this.component.data.facetRoot,i=r.name,s=r.data,a=this.facet,o=a.row,l=a.column,u=this.getCardinalityAggregateForChild(),c=u.fields,f=u.ops,d=u.as,h=[];["row","column"].forEach(function(m){var g=n.facet[m];if(g){h.push(mt(g));var v=g.sort;if(Yo(v)){var y=v.field,b=v.op,x=t5(g,v);o&&l?(c.push(x),f.push("max"),d.push(x)):(c.push(y),f.push(b),d.push(x))}else if(je(v)){var x=sv(g,m);c.push(x),f.push("max"),d.push(x)}}});var p=!!o&&!!l;return le({name:i,data:s,groupby:h},p||c.length?{aggregate:le({},p?{cross:p}:{},c.length?{fields:c,ops:f,as:d}:{})}:{})},e.prototype.headerSortFields=function(n){var r=this.facet,i=r[n];return i?Yo(i.sort)?[t5(i,i.sort,{expr:"datum"})]:je(i.sort)?[sv(i,n,{expr:"datum"})]:[mt(i,{expr:"datum"})]:[]},e.prototype.headerSortOrder=function(n){var r=this.facet,i=r[n];if(i){var s=i.sort,a=(Yo(s)?s.order:!je(s)&&s)||"ascending";return[a]}return[]},e.prototype.assembleMarks=function(){var n=this.child,r=this.component.data.facetRoot,i=DNt(r),s=n.assembleLayoutSize(),a=n.assembleTitle(),o=n.assembleGroupStyle(),l=le({name:this.getName("cell"),type:"group"},a?{title:a}:{},o?{style:o}:{},{from:{facet:this.assembleFacet()},sort:{field:this.headerSortFields("row").concat(this.headerSortFields("column")),order:this.headerSortOrder("row").concat(this.headerSortOrder("column"))}},i.length>0?{data:i}:{},s?{encode:{update:s}}:{},n.assembleGroup(b3t(this,[])));return[l]},e.prototype.getMapping=function(){return this.facet},e}(_ve);function UNt(t,e){var n=e.row,r=e.column;if(n&&r){for(var i=null,s=0,a=[n,r];s<a.length;s++){var o=a[s];if(Yo(o.sort)){var l=o.sort,u=l.field,c=l.op;t=i=new fS(t,{window:[{op:c,field:u,as:t5(o,o.sort,{forAs:!0})}],groupby:[mt(o)],frame:[null,null]})}}return i}return null}function Tye(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n],s=i.data;if(ww(t)&&ww(s)){var a=t.values,o=s.values;if(Jme(a,o))return i}else if(av(t)&&av(s)){if(t.url===s.url)return i}else if(gV(t)&&t.name===i.dataName)return i}return null}function VNt(t,e){if(t.data||!t.parent){var n=Tye(t.data,e);if(n)return n.data.format=iv({},t.data.format,n.data.format),n;var r=new ov(t.data);return e.push(r),r}else return t.parent.component.data.facetRoot?t.parent.component.data.facetRoot:t.parent.component.data.main}function WNt(t,e,n){var r=0;return e.transforms.forEach(function(i){var s,a=void 0,o;if(D0e(i))o=t=new Qk(t,i),a="derived";else if(cV(i))o=t=af.makeImplicitFromFilterTransform(t,i,n)||t,t=new hye(t,e,i.filter);else if(R0e(i))o=t=tA.makeFromTransform(t,i,e),a="number";else if(F0e(i)){o=t=cS.makeFromTransform(t,i),a="date";var l=n.getWithExplicit(i.field);l.value===void 0&&(t=new af(t,(s={},s[i.field]=a,s)),n.set(i.field,a,!1))}else if(L0e(i))o=t=cb.makeFromTransform(t,i),a="number",JP(e)&&(t=new nA(t));else if(M0e(i))o=t=wye.make(t,e,i,r++),a="derived";else if($0e(i))o=t=new fS(t,i),a="number";else if(P0e(i))o=t=uS.makeFromTransform(t,i),a="derived";else if(z0e(i))o=t=new mye(t,i),a="derived";else if(I0e(i))o=t=new pye(t,i),a="derived";else if(N0e(i))t=new _ye(t,i);else if(O0e(i))o=t=RV.makeFromTransform(t,i),a="derived";else{Ke(Xe.invalidTransformIgnored(i));return}if(o&&a!==void 0)for(var u=0,c=He(o.producedFields());u<c.length;u++){var f=c[u];n.set(f,a,!1)}}),t}function nI(t){var e=VNt(t,t.component.data.sources),n=t.component.data,r=n.outputNodes,i=n.outputNodeRefCounts,s=t.parent?t.parent.component.data.ancestorParse.clone():new INt;t.data&&t.data.format&&t.data.format.parse===null&&(s.parseNothing=!0),e=af.makeExplicit(e,t,s)||e,JP(t)&&(Os(t)||lv(t))&&(e=new nA(e));var a=t.parent&&lv(t.parent);(Os(t)||$u(t))&&a&&(e=tA.makeFromEncoding(e,t)||e),t.transforms.length>0&&(e=WNt(e,t,s)),e=af.makeImplicitFromEncoding(e,t,s)||e,Os(t)&&(e=gye.parseAll(e,t),e=vye.parseAll(e,t)),(Os(t)||$u(t))&&(a||(e=tA.makeFromEncoding(e,t)||e),e=cS.makeFromEncoding(e,t)||e,e=Qk.parseAllForSortIndex(e,t));var o=t.getName(_w),l=new Fl(e,o,_w,i);if(r[o]=l,e=l,Os(t)){var u=cb.makeFromEncoding(e,t);u&&(e=u,JP(t)&&(e=new nA(e))),e=RV.makeFromEncoding(e,t)||e,e=uS.makeFromEncoding(e,t)||e}var c=t.getName(As),f=new Fl(e,c,As,i);r[c]=f,e=f;var d=null;if($u(t)){var h=t.getName("facet");e=Qk.parseAllForSortIndex(e,t),e=UNt(e,t.facet)||e,d=new fb(e,t,h,f.getSource()),r[h]=d,e=d}return le({},t.component.data,{outputNodes:r,outputNodeRefCounts:i,raw:l,main:f,facetRoot:d,ancestorParse:s})}var kye=function(t){Qt(e,t);function e(n,r,i,s,a,o){return t.call(this,n,r,i,s,a,o)||this}return e.prototype.parseData=function(){this.component.data=nI(this),this.children.forEach(function(n){n.parseData()})},e.prototype.parseSelection=function(){var n=this;this.component.selection={};for(var r=function(o){o.parseSelection(),He(o.component.selection).forEach(function(l){n.component.selection[l]=o.component.selection[l]})},i=0,s=this.children;i<s.length;i++){var a=s[i];r(a)}},e.prototype.parseMarkGroup=function(){for(var n=0,r=this.children;n<r.length;n++){var i=r[n];i.parseMarkGroup()}},e.prototype.parseAxisAndHeader=function(){for(var n=0,r=this.children;n<r.length;n++){var i=r[n];i.parseAxisAndHeader()}},e.prototype.assembleSelectionTopLevelSignals=function(n){return this.children.reduce(function(r,i){return i.assembleSelectionTopLevelSignals(r)},n)},e.prototype.assembleSelectionSignals=function(){return this.children.forEach(function(n){return n.assembleSelectionSignals()}),[]},e.prototype.assembleLayoutSignals=function(){return this.children.reduce(function(n,r){return n.concat(r.assembleLayoutSignals())},pV(this))},e.prototype.assembleSelectionData=function(n){return this.children.reduce(function(r,i){return i.assembleSelectionData(r)},n)},e.prototype.assembleMarks=function(){return this.children.map(function(n){var r=n.assembleTitle(),i=n.assembleGroupStyle(),s=n.assembleLayoutSize();return le({type:"group",name:n.getName("group")},r?{title:r}:{},i?{style:i}:{},s?{encode:{update:s}}:{},n.assembleGroup())})},e}(xV),GNt=function(t){Qt(e,t);function e(n,r,i,s,a){var o=t.call(this,n,r,i,a,s,n.resolve)||this;return o.type="concat",n.resolve&&n.resolve.axis&&(n.resolve.axis.x==="shared"||n.resolve.axis.y==="shared")&&Ke(Xe.CONCAT_CANNOT_SHARE_AXIS),o.isVConcat=Xp(n),o.children=(Xp(n)?n.vconcat:n.hconcat).map(function(l,u){return rI(l,o,o.getName("concat_"+u),void 0,s,a,!1)}),o}return e.prototype.parseLayoutSize=function(){FNt(this)},e.prototype.parseAxisGroup=function(){return null},e.prototype.assembleDefaultLayout=function(){return le({},this.isVConcat?{columns:1}:{},{bounds:"full",align:"each"})},e}(kye);function HNt(t){return t===!1||t===null}var jNt=function(t){Qt(e,t);function e(n,r,i){n===void 0&&(n={}),r===void 0&&(r={}),i===void 0&&(i=!1);var s=t.call(this)||this;return s.explicit=n,s.implicit=r,s.mainExtracted=i,s}return e.prototype.clone=function(){return new e(En(this.explicit),En(this.implicit),this.mainExtracted)},e.prototype.hasAxisPart=function(n){return n==="axis"?!0:n==="grid"||n==="title"?!!this.get(n):!HNt(this.get(n))},e}(Fm);function Aye(t,e,n,r,i){r===void 0&&(r="");for(var s=(i==="band"?["axisBand"]:[]).concat([n==="x"?"axisX":"axisY","axis"+r.substr(0,1).toUpperCase()+r.substr(1),"axis"]),a=0,o=s;a<o.length;a++){var l=o[a];if(e[l]&&e[l][t]!==void 0)return e[l][t]}}function qNt(t,e,n,r){var i=t.fieldDef(e)||(e==="x"?t.fieldDef("x2"):e==="y"?t.fieldDef("y2"):void 0),s=t.axis(e),a=t.config,o={};if(Jy(i)){var l=t.getScaleComponent(e).get("type")===wn.UTC,u=NV("datum.value",i.timeUnit,s.format,a.axis.shortTimeLabels,null,l);u&&(o.text={signal:u})}return o=le({},o,n),He(o).length===0?void 0:o}function XNt(t,e){return!_s(t)&&!Jn(e.bin)}function YNt(t,e){var n=e==="x"?"y":"x";if(t.getScaleComponent(n))return t.scaleName(n)}function KNt(t,e,n,r){if(e.labelAngle!==void 0)return(e.labelAngle%360+360)%360;var i=Aye("labelAngle",t.config,n,RE(n),t.getScaleComponent(n).get("type"));return i!==void 0?(i%360+360)%360:n===rn&&At([DU,IU],r.type)?270:void 0}function ZNt(t,e){if(t!==void 0)return e==="top"||e==="bottom"?t<=45||315<=t?e==="top"?"bottom":"top":135<=t&&t<=225?e==="top"?"top":"bottom":"middle":t<=45||315<=t||135<=t&&t<=225?"middle":45<=t&&t<=135?e==="left"?"top":"bottom":e==="left"?"bottom":"top"}function JNt(t,e){if(t!==void 0)return t=(t%360+360)%360,e==="top"||e==="bottom"?t%180===0?"center":0<t&&t<180?e==="top"?"right":"left":e==="top"?"left":"right":(t+90)%180===0?"center":90<=t&&t<270?e==="left"?"left":"right":e==="left"?"right":"left"}function QNt(t,e,n){if(n.labelFlush!==void 0)return n.labelFlush;if(e==="x"&&At(["quantitative","temporal"],t.type))return!0}function e$t(t,e,n,r){if(e.labelOverlap!==void 0)return e.labelOverlap;if(t.type!=="nominal")return r==="log"?"greedy":!0}function RE(t){switch(t){case rn:return"bottom";case In:return"left"}throw new Error(Xe.INVALID_CHANNEL_FOR_AXIS)}function t$t(t,e,n,r,i,s){if(!_s(n)&&n!=="log"&&!At(["month","hours","day","quarter"],e.timeUnit))return s.tickStep?{signal:"(domain('"+i+"')[1] - domain('"+i+"')[0]) / "+s.tickStep+" + 1"}:Jn(e.bin)?{signal:"ceil("+r.signal+"/20)"}:{signal:"ceil("+r.signal+"/40)"}}function n$t(t,e,n,r){var i=t.values;if(i)return zU(n,i);if(n.type===Dd){if(Jn(n.bin)){var s=e.scaleDomain(r);if(s&&s!=="unaggregated"&&!V$(s))return i;var a=e.getName(sS(n.bin)+"_"+n.field+"_bins");return{signal:"sequence("+a+".start, "+a+".stop + "+a+".step, "+a+".step)"}}else if(t.tickStep){var o=e.scaleName(r),l=t.tickStep;return{signal:"sequence(domain('"+o+"')[0], domain('"+o+"')[1] + "+l+", "+l+")"}}}}function r$t(t){return rS.reduce(function(e,n){return t.component.scales[n]&&t.axis(n)&&(e[n]=[u$t(n,t)]),e},{})}var i$t={bottom:"top",top:"bottom",left:"right",right:"left"};function s$t(t){for(var e=t.component,n=e.axes,r=e.resolve,i={top:0,bottom:0,right:0,left:0},s=0,a=t.children;s<a.length;s++){var o=a[s];o.parseAxisAndHeader();for(var l=0,u=He(o.component.axes);l<u.length;l++){var c=u[l];r.axis[c]=mV(t.component.resolve,c),r.axis[c]==="shared"&&(n[c]=a$t(n[c],o.component.axes[c]),n[c]||(r.axis[c]="independent",delete n[c]))}}for(var f=0,d=[rn,In];f<d.length;f++)for(var c=d[f],h=0,p=t.children;h<p.length;h++){var o=p[h];if(o.component.axes[c]){if(r.axis[c]==="independent"){n[c]=(n[c]||[]).concat(o.component.axes[c]);for(var m=0,g=o.component.axes[c];m<g.length;m++){var v=g[m],y=v.getWithExplicit("orient"),b=y.value,x=y.explicit;if(i[b]>0&&!x){var w=i$t[b];i[b]>i[w]&&v.set("orient",w,!1)}i[b]++}}delete o.component.axes[c]}}}function a$t(t,e){if(t){if(t.length!==e.length)return;for(var n=t.length,r=0;r<n;r++){var i=t[r],s=e[r];if(!!i!=!!s)return;if(i&&s){var a=i.getWithExplicit("orient"),o=s.getWithExplicit("orient");if(a.explicit&&o.explicit&&a.value!==o.value)return;t[r]=o$t(i,s)}}}else return e.map(function(l){return l.clone()});return t}function o$t(t,e){for(var n=function(a){var o=lS(t.getWithExplicit(a),e.getWithExplicit(a),a,"axis",function(l,u){switch(a){case"title":return Qve(l,u);case"gridScale":return{explicit:l.explicit,value:un(l.value,u.value)}}return H$(l,u,a,"axis")});t.setWithExplicit(a,o)},r=0,i=wU;r<i.length;r++){var s=i[r];n(s)}return t}function Mye(t,e){var n=e==="x"?"x2":"y2",r=t.fieldDef(e),i=t.fieldDef(n),s=r?r.title:void 0,a=i?i.title:void 0;if(s&&a)return Jve(s,a);if(s)return s;if(a)return a;if(s!==void 0)return s;if(a!==void 0)return a}function l$t(t,e,n,r,i){switch(e){case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(t===Mye(r,i))return!0}return t===n[e]}function u$t(t,e){var n=e.axis(t),r=new jNt;wU.forEach(function(a){var o=c$t(a,n,t,e);if(o!==void 0){var l=l$t(o,a,n,e,t),u=Aye(a,e.config,t,r.get("orient"),e.getScaleComponent(t).get("type"));l||u===void 0?r.set(a,o,l):a==="grid"&&u&&r.set(a,u,!1)}});var i=n.encoding||{},s=xU.reduce(function(a,o){if(!r.hasAxisPart(o))return a;var l=eye(i[o]||{},e),u=o==="labels"?qNt(e,t,l,r.get("orient")):l;return u!==void 0&&He(u).length>0&&(a[o]={update:u}),a},{});return He(s).length>0&&r.set("encode",s,!!n.encoding||n.labelAngle!==void 0),r}function c$t(t,e,n,r){var i=r.fieldDef(n),s=KNt(r,e,n,i);switch(t){case"scale":return r.scaleName(n);case"gridScale":return YNt(r,n);case"format":return MV(i,e.format,r.config);case"grid":{if(ha(r.fieldDef(n).bin))return!1;var a=r.getScaleComponent(n).get("type");return un(e.grid,XNt(a,i))}case"labelAlign":return un(e.labelAlign,JNt(s,RE(n)));case"labelAngle":return s;case"labelBaseline":return un(e.labelBaseline,ZNt(s,RE(n)));case"labelFlush":return QNt(i,n,e);case"labelOverlap":{var a=r.getScaleComponent(n).get("type");return e$t(i,e,n,a)}case"orient":return un(e.orient,RE(n));case"tickCount":{var a=r.getScaleComponent(n).get("type"),o=r.scaleName(n),l=n==="x"?"width":n==="y"?"height":void 0,u=l?r.getSizeSignalRef(l):void 0;return un(e.tickCount,t$t(n,i,a,u,o,e))}case"title":var c=n==="x"?"x2":"y2",f=r.fieldDef(c);return un(e.title,Mye(r,n),Zve([BP(i)],f?[BP(f)]:[]));case"values":return n$t(e,r,i,n)}return yge(t)?e[t]:void 0}function f$t(t,e,n){var r=ho(t)?le({},t):{type:t},i=r.orient||ba("orient",r,n);r.orient=m$t(r.type,e,i),i!==void 0&&i!==r.orient&&Ke(Xe.orientOverridden(r.orient,i));var s=un(r.opacity,ba("opacity",r,n));s===void 0&&(r.opacity=h$t(r.type,e));var a=r.filled;a===void 0&&(r.filled=p$t(r,n));var o=r.cursor||ba("cursor",r,n);return o===void 0&&(r.cursor=d$t(r,e,n)),r}function d$t(t,e,n){return e.href||t.href||ba("href",t,n)?"pointer":t.cursor}function h$t(t,e){if(At([eb,tb,nb,rb],t)&&!$V(e))return .7}function p$t(t,e){var n=ba("filled",t,e),r=t.type;return un(n,r!==eb&&r!==tS&&r!==vw)}function m$t(t,e,n){switch(t){case eb:case nb:case rb:case z$:case B$:return}var r=e.x,i=e.y,s=e.x2,a=e.y2;switch(t){case Qy:if(Ge(r)&&ha(r.bin))return"vertical";if(Ge(i)&&ha(i.bin))return"horizontal";if(a||s){if(n)return n;if(!s&&Ge(r)&&r.type===Dd&&!Jn(r.bin))return"horizontal";if(!a&&Ge(i)&&i.type===Dd&&!Jn(i.bin))return"vertical"}case vw:if(s&&a)return;case eS:if(a)return Ge(i)&&ha(i.bin)?"horizontal":"vertical";if(s)return Ge(r)&&ha(r.bin)?"vertical":"horizontal";if(t===vw){if(e.x&&!e.y)return"vertical";if(e.y&&!e.x)return"horizontal"}case tS:case tb:var o=Ge(e.x)&&Vi(e.x),l=Ge(e.y)&&Vi(e.y);if(o&&!l)return t!=="tick"?"horizontal":"vertical";if(!o&&l)return t!=="tick"?"vertical":"horizontal";if(o&&l){var u=e.x,c=e.y,f=u.type===Kk,d=c.type===Kk;return f&&!d?t!=="tick"?"vertical":"horizontal":!f&&d?t!=="tick"?"horizontal":"vertical":!u.aggregate&&c.aggregate?t!=="tick"?"vertical":"horizontal":u.aggregate&&!c.aggregate?t!=="tick"?"horizontal":"vertical":n||"vertical"}else return n||void 0}return"vertical"}var Nye=function(t){Qt(e,t);function e(n,r,i,s,a,o,l){s===void 0&&(s={});var u=t.call(this,n,r,i,o,a,void 0)||this;u.fit=l,u.type="unit",u.specifiedScales={},u.specifiedAxes={},u.specifiedLegends={},u.specifiedProjection={},u.selection={},u.children=[],u.initSize(le({},s,n.width?{width:n.width}:{},n.height?{height:n.height}:{}));var c=ho(n.mark)?n.mark.type:n.mark,f=u.encoding=tye(zNt(n.encoding||{},a),c);return u.markDef=f$t(n.mark,f,o),u.stack=W$(c,f,u.config.stack),u.specifiedScales=u.initScales(c,f),u.specifiedAxes=u.initAxes(f),u.specifiedLegends=u.initLegend(f),u.specifiedProjection=n.projection,u.selection=n.selection,u}return Object.defineProperty(e.prototype,"hasProjection",{get:function(){var n=this.encoding,r=this.mark===BU,i=n&&n0e.some(function(s){return Ge(n[s])});return r||i},enumerable:!0,configurable:!0}),e.prototype.scaleDomain=function(n){var r=this.specifiedScales[n];return r?r.domain:void 0},e.prototype.axis=function(n){return this.specifiedAxes[n]},e.prototype.legend=function(n){return this.specifiedLegends[n]},e.prototype.initScales=function(n,r){return iS.reduce(function(i,s){var a,o,l=r[s];return Ge(l)?(a=l,o=l.scale):rf(l)?(a=l.condition,o=l.condition.scale):s==="x"?a=io(r.x2):s==="y"&&(a=io(r.y2)),a&&(i[s]=o||{}),i},{})},e.prototype.initAxes=function(n){return[rn,In].reduce(function(r,i){var s=n[i];if(Ge(s)||i===rn&&Ge(n.x2)||i===In&&Ge(n.y2)){var a=Ge(s)?s.axis:null;a!==null&&(r[i]=le({},a))}return r},{})},e.prototype.initLegend=function(n){return a0e.reduce(function(r,i){var s=n[i];if(s){var a=Ge(s)?s.legend:rf(s)?s.condition.legend:null;a!==null&&a!==!1&&(r[i]=le({},a))}return r},{})},e.prototype.parseData=function(){this.component.data=nI(this)},e.prototype.parseLayoutSize=function(){LNt(this)},e.prototype.parseSelection=function(){this.component.selection=v3t(this,this.selection)},e.prototype.parseMarkGroup=function(){this.component.mark=ANt(this)},e.prototype.parseAxisAndHeader=function(){this.component.axes=r$t(this)},e.prototype.assembleSelectionTopLevelSignals=function(n){return x3t(this,n)},e.prototype.assembleSelectionSignals=function(){return y3t(this,[])},e.prototype.assembleSelectionData=function(n){return w3t(this,n)},e.prototype.assembleLayout=function(){return null},e.prototype.assembleLayoutSignals=function(){return pV(this)},e.prototype.assembleMarks=function(){var n=this.component.mark||[];return(!this.parent||!lv(this.parent))&&(n=Nve(this,n)),n.map(this.correctDataNames)},e.prototype.assembleLayoutSize=function(){return{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")}},e.prototype.getMapping=function(){return this.encoding},e.prototype.toSpec=function(n,r){var i=En(this.encoding),s;return s={mark:this.markDef,encoding:i},n||(s.config=En(this.config)),r||(s.data=En(this.data)),s},Object.defineProperty(e.prototype,"mark",{get:function(){return this.markDef.type},enumerable:!0,configurable:!0}),e.prototype.channelHasField=function(n){return Wo(this.encoding,n)},e.prototype.fieldDef=function(n){var r=this.encoding[n];return io(r)},e}(_ve),g$t=function(t){Qt(e,t);function e(n,r,i,s,a,o,l){var u=t.call(this,n,r,i,o,a,n.resolve)||this;u.type="layer";var c=le({},s,n.width?{width:n.width}:{},n.height?{height:n.height}:{});return u.initSize(c),u.children=n.layer.map(function(f,d){if(sc(f))return new e(f,u,u.getName("layer_"+d),c,a,o,l);if(Cf(f))return new Nye(f,u,u.getName("layer_"+d),c,a,o,l);throw new Error(Xe.INVALID_SPEC)}),u}return e.prototype.parseData=function(){this.component.data=nI(this);for(var n=0,r=this.children;n<r.length;n++){var i=r[n];i.parseData()}},e.prototype.parseLayoutSize=function(){Cye(this)},e.prototype.parseSelection=function(){var n=this;this.component.selection={};for(var r=function(o){o.parseSelection(),He(o.component.selection).forEach(function(l){n.component.selection[l]=o.component.selection[l]})},i=0,s=this.children;i<s.length;i++){var a=s[i];r(a)}},e.prototype.parseMarkGroup=function(){for(var n=0,r=this.children;n<r.length;n++){var i=r[n];i.parseMarkGroup()}},e.prototype.parseAxisAndHeader=function(){s$t(this)},e.prototype.assembleSelectionTopLevelSignals=function(n){return this.children.reduce(function(r,i){return i.assembleSelectionTopLevelSignals(r)},n)},e.prototype.assembleSelectionSignals=function(){return this.children.reduce(function(n,r){return n.concat(r.assembleSelectionSignals())},[])},e.prototype.assembleLayoutSignals=function(){return this.children.reduce(function(n,r){return n.concat(r.assembleLayoutSignals())},pV(this))},e.prototype.assembleSelectionData=function(n){return this.children.reduce(function(r,i){return i.assembleSelectionData(r)},n)},e.prototype.assembleTitle=function(){var n=t.prototype.assembleTitle.call(this);if(n)return n;for(var r=0,i=this.children;r<i.length;r++){var s=i[r];if(n=s.assembleTitle(),n)return n}},e.prototype.assembleLayout=function(){return null},e.prototype.assembleMarks=function(){return _3t(this,jp(this.children.map(function(n){return n.assembleMarks()})))},e.prototype.assembleLegends=function(){return this.children.reduce(function(n,r){return n.concat(r.assembleLegends())},rve(this))},e}(xV),v$t=function(t){Qt(e,t);function e(n,r,i,s,a){var o=t.call(this,n,r,i,a,s,n.resolve)||this;return o.type="repeat",n.resolve&&n.resolve.axis&&(n.resolve.axis.x==="shared"||n.resolve.axis.y==="shared")&&Ke(Xe.REPEAT_CANNOT_SHARE_AXIS),o.repeat=n.repeat,o.children=o._initChildren(n,o.repeat,s,a),o}return e.prototype._initChildren=function(n,r,i,s){for(var a=[],o=r.row||[i?i.row:null],l=r.column||[i?i.column:null],u=0,c=o;u<c.length;u++)for(var f=c[u],d=0,h=l;d<h.length;d++){var p=h[d],m=(f?"_"+f:"")+(p?"_"+p:""),g={row:f,column:p};a.push(rI(n.spec,this,this.getName("child"+m),void 0,g,s,!1))}return a},e.prototype.parseLayoutSize=function(){ONt(this)},e.prototype.assembleDefaultLayout=function(){return{columns:this.repeat&&this.repeat.column?this.repeat.column.length:1,bounds:"full",align:"all"}},e}(kye);function rI(t,e,n,r,i,s,a){if(Om(t))return new BNt(t,e,n,i,s);if(sc(t))return new g$t(t,e,n,r,i,s,a);if(Cf(t))return new Nye(t,e,n,r,i,s,a);if(lb(t))return new v$t(t,e,n,i,s);if(lV(t))return new GNt(t,e,n,i,s);throw new Error(Xe.INVALID_SPEC)}function y$t(t,e){e===void 0&&(e={}),e.logger&&hkt(e.logger),e.fieldTitle&&FU(e.fieldTitle);try{var n=gve(iv({},e.config,t.config)),r=S0e(t,n),i=wAt(t.autosize,n.autosize,sc(r)||Cf(r)),s=rI(r,null,"",void 0,void 0,n,i.type==="fit");return s.parse(),SMt(s.component.data),x$t(s,b$t(t,n,i),t.datasets,t.usermeta)}finally{e.logger&&pkt(),e.fieldTitle&&Vge()}}function b$t(t,e,n){return le({autosize:He(n).length===1&&n.type?n.type:n},aZ(e),aZ(t))}function x$t(t,e,n,r){n===void 0&&(n={});var i=t.config?vve(t.config):void 0,s=[].concat(t.assembleSelectionData([]),RNt(t.component.data,n)),a=t.assembleProjections(),o=t.assembleTitle(),l=t.assembleGroupStyle(),u=t.assembleLayoutSignals();u=u.filter(function(f){return(f.name==="width"||f.name==="height")&&f.value!==void 0?(e[f.name]=+f.value,!1):!0});var c=le({$schema:"https://vega.github.io/schema/vega/v4.json"},t.description?{description:t.description}:{},e,o?{title:o}:{},l?{style:l}:{},{data:s},a.length>0?{projections:a}:{},t.assembleGroup(u.concat(t.assembleSelectionTopLevelSignals([]))),i?{config:i}:{},r?{usermeta:r}:{});return{spec:c}}function pS(t,e){if(Om(t)||lb(t))return _$t(t,e);if(sc(t))return S$t(t,e);if(Cf(t))return w$t(t,e);if(Xp(t))return C$t(t,e);if(G$(t))return E$t(t,e);throw new Error(Xe.INVALID_SPEC)}function w$t(t,e){if(t.encoding){var n=t.encoding,r=t.transform,i=xn(t,["encoding","transform"]),s=J$(n,e),a=s.bins,o=s.timeUnits,l=s.aggregate,u=s.groupby,c=s.encoding;return le({transform:(r||[]).concat(a,o,l.length?[{aggregate:l,groupby:u}]:[])},i,{encoding:c})}else return t}function _$t(t,e){var n=t.spec,r=xn(t,["spec"]);return le({},r,{spec:pS(n,e)})}function S$t(t,e){var n=t.layer,r=xn(t,["layer"]);return le({},r,{layer:n.map(function(i){return pS(i,e)})})}function C$t(t,e){var n=t.vconcat,r=xn(t,["vconcat"]);return le({},r,{vconcat:n.map(function(i){return pS(i,e)})})}function E$t(t,e){var n=t.hconcat,r=xn(t,["hconcat"]);return le({},r,{hconcat:n.map(function(i){return pS(i,e)})})}var $ye={text:["text"],line:["x","y"],trail:["x","y"],area:["x","y"]},Iye={bar:dn(["row","column","x","y","size","color","fill","stroke","detail"]),line:dn(["row","column","x","y","color","fill","stroke","color","detail"]),trail:dn(["row","column","x","y","color","fill","stroke","color","detail","size"]),area:dn(["row","column","x","y","color","fill","stroke","detail"]),tick:dn(["row","column","x","y","color","fill","stroke","detail"]),circle:dn(["row","column","x","y","color","fill","stroke","size","detail"]),square:dn(["row","column","x","y","color","fill","stroke","size","detail"]),point:dn(["row","column","x","y","color","fill","stroke","size","detail","shape"]),geoshape:dn(["row","column","color","fill","stroke","detail","shape"]),text:dn(["row","column","size","color","fill","stroke","text"])};function T$t(t,e,n){e===void 0&&(e=$ye),n===void 0&&(n=Iye);var r=ho(t.mark)?t.mark.type:t.mark,i=t.encoding,s=e[r],a=n[r];for(var o in s)if(!(s[o]in i))return'Missing encoding channel "'+s[o]+'" for mark "'+r+'"';for(var l in i)if(!a[l])return'Encoding channel "'+l+'" is not supported by mark type "'+r+'"';return r===Qy&&!i.x&&!i.y?"Missing both x and y for bar":null}const k$t=Object.freeze(Object.defineProperty({__proto__:null,DEFAULT_REQUIRED_CHANNEL_MAP:$ye,DEFAULT_SUPPORTED_CHANNEL_TYPE:Iye,getEncodingMappingError:T$t},Symbol.toStringTag,{value:"Module"})),A$t="vega-lite",M$t='Jeffrey Heer, Dominik Moritz, Kanit "Ham" Wongsuphasawat',N$t="3.0.0-rc10",$$t=["Kanit Wongsuphasawat <kanitw@gmail.com> (http://kanitw.yellowpigz.com)","Dominik Moritz <domoritz@cs.washington.edu> (https://www.domoritz.de)","Jeffrey Heer <jheer@uw.edu> (http://jheer.org)"],I$t="https://vega.github.io/vega-lite/",D$t="Vega-Lite is a concise high-level language for interactive visualization.",R$t="build/vega-lite.js",O$t="build/vega-lite.min.js",F$t="build/vega-lite.min.js",L$t="build/src/index",P$t="build/src/index.d.ts",z$t={vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},B$t={test:"test"},U$t={prebuild:"mkdir -p build/src",build:"npm run build:only","build:only":"tsc && rollup -c",postbuild:"terser build/vega-lite.js -cm --source-map content=build/vega-lite.js.map,filename=build/vega-lite.min.js.map -o build/vega-lite.min.js && npm run schema","build:examples":"npm run build:only","postbuild:examples":"npm run data && TZ=America/Los_Angeles scripts/build-examples.sh","build:examples-full":"npm run build:only","postbuild:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"bundle exec jekyll build -q && scripts/generate-toc","build:site":"tsc -p site && webpack --config site/webpack.config.js","build:versions":"scripts/update-version.sh",clean:"rm -rf build && rm -f examples/compiled/*.png && find site/examples ! -name 'index.md' -type f -delete",data:"rsync -r node_modules/vega-datasets/data/* data",deploy:"scripts/deploy.sh","deploy:gh":"scripts/deploy-gh.sh","deploy:schema":"scripts/deploy-schema.sh",preschema:"npm run prebuild",schema:"node --stack-size=2800 ./node_modules/.bin/ts-json-schema-generator --no-type-check --path tsconfig.json --type TopLevelSpec > build/vega-lite-schema.json && npm run renameschema && cp build/vega-lite-schema.json _data/",renameschema:"scripts/rename-schema.sh",presite:"npm run prebuild && npm run data && npm run build:site && npm run build:toc && npm run build:versions && scripts/create-example-pages",site:"bundle exec jekyll serve --incremental",format:"tslint -p . --fix -e 'package.json' && prettier --write '{src,test,test-runtime}/**/*.ts'",lint:"tslint -p . -e 'package.json' && prettier --list-different '{src,test,test-runtime}/**/*.ts'",test:"jest test/ && npm run lint && npm run schema && jest examples/ && npm run test:runtime","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":`TZ=America/Los_Angeles TS_NODE_COMPILER_OPTIONS='{"module":"commonjs"}' wdio wdio.conf.js`,"test:runtime:generate":"rm -Rf test-runtime/resources && VL_GENERATE_TESTS=true npm run test:runtime","watch:build":"npm run build:only && concurrently --kill-others -n Typescript,Rollup 'tsc -w' 'rollup -c -w'","watch:site":"concurrently --kill-others -n Typescript,Webpack 'tsc -p site --watch' 'webpack --config site/webpack.config.js --mode development --watch'","watch:test":"jest --watch"},V$t={type:"git",url:"https://github.com/vega/vega-lite.git"},W$t="BSD-3-Clause",G$t={url:"https://github.com/vega/vega-lite/issues"},H$t={"@babel/core":"^7.1.6","@types/chai":"^4.1.7","@types/d3":"^5.0.1","@types/highlight.js":"^9.12.3","@types/jest":"^23.3.9","@types/json-stable-stringify":"^1.0.32","@types/mkdirp":"^0.5.2","@types/node":"10.12.10","@types/webdriverio":"^4.13.0",ajv:"^6.5.5",chai:"^4.2.0",cheerio:"^1.0.0-rc.2",chromedriver:"^2.43.3",codecov:"^3.1.0",concurrently:"^4.1.0",d3:"^5.7.0","highlight.js":"^9.13.1",jest:"^23.6.0","json-stable-stringify":"^1.0.1",mkdirp:"^0.5.1",prettier:"^1.15.2","rollup-plugin-commonjs":"^9.2.0","rollup-plugin-json":"^3.1.0","rollup-plugin-node-resolve":"^3.4.0","rollup-plugin-sourcemaps":"^0.4.2",rollup:"^0.67.3","source-map-support":"^0.5.9","svg2png-many":"^0.0.7",terser:"^3.10.12","ts-jest":"^23.10.4","ts-json-schema-generator":"^0.36.3","ts-node":"^7.0.1","tslint-config-prettier":"^1.16.0","tslint-eslint-rules":"^5.4.0",tslint:"5.11.0",typescript:"^3.1.6","vega-datasets":"^1.20.0","vega-embed":"^3.24.1","vega-tooltip":"^0.13.0",vega:"^4.3.0","wdio-chromedriver-service":"^0.1.3","wdio-dot-reporter":"0.0.10","wdio-mocha-framework":"^0.6.4","wdio-static-server-service":"^1.0.1",webdriverio:"^4.14.0","webpack-cli":"^3.1.2",webpack:"^4.26.0","yaml-front-matter":"^4.0.0"},j$t={"fast-deep-equal":"^2.0.1","json-stable-stringify":"^1.0.1","json-stringify-pretty-compact":"^1.2.0",tslib:"^1.9.3","vega-event-selector":"^2.0.0","vega-typings":"0.3.51","vega-util":"^1.7.0",yargs:"^12.0.5"},q$t={testURL:"http://localhost/",transform:{"^.+\\.tsx?$":"ts-jest"},testRegex:"(/__tests__/.*|(\\.|/)(test|spec))\\.(jsx?|tsx?)$",moduleFileExtensions:["ts","tsx","js","jsx","json","node"],testPathIgnorePatterns:["node_modules","test-runtime","<rootDir>/build","_site","src"],coverageDirectory:"./coverage/",collectCoverage:!1},X$t={name:A$t,author:M$t,version:N$t,collaborators:$$t,homepage:I$t,description:D$t,main:R$t,unpkg:O$t,jsdelivr:F$t,module:L$t,types:P$t,bin:z$t,directories:B$t,scripts:U$t,repository:V$t,license:W$t,bugs:G$t,devDependencies:H$t,dependencies:j$t,jest:q$t};var Y$t=X$t.version;const K$t=Object.freeze(Object.defineProperty({__proto__:null,aggregate:ukt,axis:dkt,bin:Ukt,channel:Bkt,compile:y$t,compositeMark:iNt,config:FMt,data:iMt,datetime:xkt,encoding:P3t,extractTransforms:pS,facet:wkt,fieldDef:Ikt,header:NAt,legend:UAt,mark:Okt,scale:Qkt,sort:$At,spec:bAt,stack:rAt,timeUnit:Akt,transform:SAt,type:Nkt,util:okt,validate:k$t,version:Y$t},Symbol.toStringTag,{value:"Module"}));var Dye={};Object.defineProperty(Dye,"__esModule",{value:!0});function Z$t(t){var e=/\/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g,n=e.exec(t).slice(1,3),r=n[0],i=n[1];return{library:r,version:i}}var Rye=Dye.default=Z$t,J$t="vega-themes",Q$t="2.12.1",eIt="Themes for stylized Vega and Vega-Lite visualizations.",tIt=["vega","vega-lite","themes","style"],nIt="BSD-3-Clause",rIt={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},iIt=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],sIt="build/vega-themes.js",aIt="build/vega-themes.module.js",oIt="build/vega-themes.min.js",lIt="build/vega-themes.min.js",uIt="build/vega-themes.module.d.ts",cIt={type:"git",url:"https://github.com/vega/vega-themes.git"},fIt=["src","build"],dIt={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",prepare:"beemo create-config",eslintbase:"beemo eslint .",format:"yarn eslintbase --fix",lint:"yarn eslintbase",release:"release-it"},hIt={"@release-it/conventional-changelog":"^5.1.1","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.1","@rollup/plugin-terser":"^0.4.0","browser-sync":"^2.27.10",concurrently:"^7.3.0","gh-pages":"^5.0.0","release-it":"^15.6.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.0.2",rollup:"^3.15.0",typescript:"^4.7.4","vega-lite-dev-config":"^0.21.0","vega-lite":"^5.0.0",vega:"^5.19.1"},pIt={vega:"*","vega-lite":"*"},mIt={},gIt={name:J$t,version:Q$t,description:eIt,keywords:tIt,license:nIt,author:rIt,contributors:iIt,main:sIt,module:aIt,unpkg:oIt,jsdelivr:lIt,types:uIt,repository:cIt,files:fIt,scripts:dIt,devDependencies:hIt,peerDependencies:pIt,dependencies:mIt};const yg="#fff",RZ="#888",vIt={background:"#333",view:{stroke:RZ},title:{color:yg,subtitleColor:yg},style:{"guide-label":{fill:yg},"guide-title":{fill:yg}},axis:{domainColor:yg,gridColor:RZ,tickColor:yg}},wh="#4572a7",yIt={background:"#fff",arc:{fill:wh},area:{fill:wh},line:{stroke:wh,strokeWidth:2},path:{stroke:wh},rect:{fill:wh},shape:{stroke:wh},symbol:{fill:wh,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},_h="#30a2da",uO="#cbcbcb",bIt="#999",xIt="#333",OZ="#f0f0f0",FZ="#333",wIt={arc:{fill:_h},area:{fill:_h},axis:{domainColor:uO,grid:!0,gridColor:uO,gridWidth:1,labelColor:bIt,labelFontSize:10,titleColor:xIt,tickColor:uO,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:OZ,group:{fill:OZ},legend:{labelColor:FZ,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:FZ,titleFontSize:14,titlePadding:10},line:{stroke:_h,strokeWidth:2},path:{stroke:_h,strokeWidth:.5},rect:{fill:_h},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:_h},bar:{binSpacing:2,fill:_h,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Sh="#000",_It={group:{fill:"#e5e5e5"},arc:{fill:Sh},area:{fill:Sh},line:{stroke:Sh},path:{stroke:Sh},rect:{fill:Sh},shape:{stroke:Sh},symbol:{fill:Sh,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},SIt=22,CIt="normal",LZ="Benton Gothic, sans-serif",PZ=11.5,EIt="normal",Ch="#82c6df",cO="Benton Gothic Bold, sans-serif",zZ="normal",BZ=13,o1={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},TIt={background:"#ffffff",title:{anchor:"start",color:"#000000",font:cO,fontSize:SIt,fontWeight:CIt},arc:{fill:Ch},area:{fill:Ch},line:{stroke:Ch,strokeWidth:2},path:{stroke:Ch},rect:{fill:Ch},shape:{stroke:Ch},symbol:{fill:Ch,size:30},axis:{labelFont:LZ,labelFontSize:PZ,labelFontWeight:EIt,titleFont:cO,titleFontSize:BZ,titleFontWeight:zZ},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:LZ,labelFontSize:PZ,symbolType:"square",titleFont:cO,titleFontSize:BZ,titleFontWeight:zZ},range:{category:o1["category-6"],diverging:o1["fireandice-6"],heatmap:o1["fire-7"],ordinal:o1["fire-7"],ramp:o1["fire-7"]}},Eh="#ab5787",eE="#979797",kIt={background:"#f9f9f9",arc:{fill:Eh},area:{fill:Eh},line:{stroke:Eh},path:{stroke:Eh},rect:{fill:Eh},shape:{stroke:Eh},symbol:{fill:Eh,size:30},axis:{domainColor:eE,domainWidth:.5,gridWidth:.2,labelColor:eE,tickColor:eE,tickWidth:.2,titleColor:eE},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Th="#3e5c69",AIt={background:"#fff",arc:{fill:Th},area:{fill:Th},line:{stroke:Th},path:{stroke:Th},rect:{fill:Th},shape:{stroke:Th},symbol:{fill:Th},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},wo="#1696d2",UZ="#000000",MIt="#FFFFFF",tE="Lato",fO="Lato",NIt="Lato",$It="#DEDDDD",IIt=18,l1={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},DIt={background:MIt,title:{anchor:"start",fontSize:IIt,font:tE},axisX:{domain:!0,domainColor:UZ,domainWidth:1,grid:!1,labelFontSize:12,labelFont:fO,labelAngle:0,tickColor:UZ,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:tE},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:$It,gridWidth:1,labelFontSize:12,labelFont:fO,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:tE,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:fO,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:tE,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:l1["six-groups-cat-1"],diverging:l1["diverging-colors"],heatmap:l1["diverging-colors"],ordinal:l1["six-groups-seq"],ramp:l1["shades-blue"]},area:{fill:wo},rect:{fill:wo},line:{color:wo,stroke:wo,strokeWidth:5},trail:{color:wo,stroke:wo,strokeWidth:0,size:1},path:{stroke:wo,strokeWidth:.5},point:{filled:!0},text:{font:NIt,color:wo,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:wo,stroke:null}},arc:{fill:wo},shape:{stroke:wo},symbol:{fill:wo,size:30}},kh="#3366CC",VZ="#ccc",nE="Arial, sans-serif",RIt={arc:{fill:kh},area:{fill:kh},path:{stroke:kh},rect:{fill:kh},shape:{stroke:kh},symbol:{stroke:kh},circle:{fill:kh},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:nE,fontSize:12},"guide-title":{font:nE,fontSize:12},"group-title":{font:nE,fontSize:12}},title:{font:nE,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:VZ,tickColor:VZ,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},FV=t=>t*(1/3+1),WZ=FV(9),GZ=FV(10),HZ=FV(12),u1="Segoe UI",jZ="wf_standard-font, helvetica, arial, sans-serif",qZ="#252423",c1="#605E5C",XZ="transparent",OIt="#C8C6C4",ml="#118DFF",FIt="#12239E",LIt="#E66C37",PIt="#6B007B",zIt="#E044A7",BIt="#744EC2",UIt="#D9B300",VIt="#D64550",Oye=ml,Fye="#DEEFFF",YZ=[Fye,Oye],WIt=[Fye,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",Oye],GIt={view:{stroke:XZ},background:XZ,font:u1,header:{titleFont:jZ,titleFontSize:HZ,titleColor:qZ,labelFont:u1,labelFontSize:GZ,labelColor:c1},axis:{ticks:!1,grid:!1,domain:!1,labelColor:c1,labelFontSize:WZ,titleFont:jZ,titleColor:qZ,titleFontSize:HZ,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:OIt,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:ml},line:{stroke:ml,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:u1,fontSize:WZ,fill:c1},arc:{fill:ml},area:{fill:ml,line:!0,opacity:.6},path:{stroke:ml},rect:{fill:ml},point:{fill:ml,filled:!0,size:75},shape:{stroke:ml},symbol:{fill:ml,strokeWidth:1.5,size:50},legend:{titleFont:u1,titleFontWeight:"bold",titleColor:c1,labelFont:u1,labelFontSize:GZ,labelColor:c1,symbolType:"circle",symbolSize:75},range:{category:[ml,FIt,LIt,PIt,zIt,BIt,UIt,VIt],diverging:YZ,heatmap:YZ,ordinal:WIt}},HIt=gIt.version,jIt=Object.freeze(Object.defineProperty({__proto__:null,dark:vIt,excel:yIt,fivethirtyeight:wIt,ggplot2:_It,googlecharts:RIt,latimes:TIt,powerbi:GIt,quartz:kIt,urbaninstitute:DIt,version:HIt,vox:AIt},Symbol.toStringTag,{value:"Module"})),qIt=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black; }
  #vg-tooltip-element.visible {
    visibility: visible; }
  #vg-tooltip-element h2 {
    margin-top: 0;
    margin-bottom: 10px;
    font-size: 13px; }
  #vg-tooltip-element table {
    border-spacing: 0; }
  #vg-tooltip-element td {
    overflow: hidden;
    text-overflow: ellipsis;
    padding-top: 2px;
    padding-bottom: 2px; }
    #vg-tooltip-element td.key {
      color: #808080;
      max-width: 150px;
      text-align: right;
      padding-right: 4px; }
    #vg-tooltip-element td.value {
      display: block;
      max-width: 300px;
      max-height: 7em;
      text-align: left; }
  #vg-tooltip-element.dark-theme {
    background-color: rgba(32, 32, 32, 0.9);
    border: 1px solid #f5f5f5;
    color: white; }
    #vg-tooltip-element.dark-theme td.key {
      color: #bfbfbf; }
  #vg-tooltip-element.light-theme {
    background-color: rgba(255, 255, 255, 0.95);
    border: 1px solid #d9d9d9;
    color: black; }
    #vg-tooltip-element.light-theme td.key {
      color: #808080; }
`,Lye="vg-tooltip-element",XIt={offsetX:10,offsetY:10,id:Lye,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:YIt,maxDepth:2};function YIt(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function KIt(t){if(!/^[A-Za-z]+[-:.\w]*$/.test(t))throw new Error("Invalid HTML ID");return qIt.toString().replace(Lye,t)}function ZIt(t,e,n){if(je(t))return`[${t.map(r=>e(Bt(r)?r:KZ(r,n))).join(", ")}]`;if(Gt(t)){let r="";const i=t,{title:s}=i,a=crt(i,["title"]);s&&(r+=`<h2>${e(s)}</h2>`);const o=Object.keys(a);if(o.length>0){r+="<table>";for(const l of o){let u=a[l];Gt(u)&&(u=KZ(u,n)),r+=`<tr><td class="key">${e(l)}:</td><td class="value">${e(u)}</td></tr>`}r+="</table>"}return r||"{}"}return e(t)}function JIt(t){const e=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=e.indexOf(this)+1;return e.length=i,e.length>t?"[Object]":e.indexOf(r)>=0?"[Circular]":(e.push(r),r)}}function KZ(t,e){return JSON.stringify(t,JIt(e))}function QIt(t,e,n,r){let i=t.clientX+n;i+e.width>window.innerWidth&&(i=+t.clientX-n-e.width);let s=t.clientY+r;return s+e.height>window.innerHeight&&(s=+t.clientY-r-e.height),{x:i,y:s}}class eDt{constructor(e){this.options=Object.assign({},XIt,e);const n=this.options.id;if(this.call=this.tooltip_handler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=KIt(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}this.el=document.getElementById(n),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",n),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el))}tooltip_handler(e,n,r,i){if(i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=ZIt(i,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:a}=QIt(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.setAttribute("style",`top: ${a}px; left: ${s}px`)}}function tDt(t,e,n){const r=t.open(e),i=1e4,s=250;let a=~~(i/s);function o(u){u.source===r&&(a=0,t.removeEventListener("message",o,!1))}t.addEventListener("message",o,!1);function l(){a<=0||(r.postMessage(n,"*"),setTimeout(l,s),a-=1)}setTimeout(l,s)}const nDt=`.vega-embed {
  position: relative;
  display: inline-block;
  padding-right: 38px; }
  .vega-embed details:not([open]) > :not(summary) {
    display: none !important; }
  .vega-embed summary {
    list-style: none;
    display: flex;
    position: absolute;
    top: 0;
    right: 0;
    padding: 6px;
    z-index: 1000;
    background: white;
    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
    color: #1b1e23;
    border: 1px solid #aaa;
    border-radius: 999px;
    opacity: 0.2;
    transition: opacity 0.4s ease-in;
    outline: none;
    cursor: pointer; }
    .vega-embed summary::-webkit-details-marker {
      display: none; }
  .vega-embed details[open] summary {
    opacity: 0.7; }
  .vega-embed:hover summary,
  .vega-embed:focus summary {
    opacity: 1 !important;
    transition: opacity 0.2s ease; }
  .vega-embed .vega-actions {
    position: absolute;
    top: 35px;
    right: -9px;
    display: flex;
    flex-direction: column;
    padding-bottom: 8px;
    padding-top: 8px;
    border-radius: 4px;
    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
    border: 1px solid #d9d9d9;
    background: white;
    animation-duration: 0.15s;
    animation-name: scale-in;
    animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5); }
    .vega-embed .vega-actions a {
      padding: 8px 16px;
      font-family: sans-serif;
      font-size: 14px;
      font-weight: 600;
      white-space: nowrap;
      color: #434a56;
      text-decoration: none; }
      .vega-embed .vega-actions a:hover {
        background-color: #f7f7f9;
        color: black; }
    .vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
      content: "";
      display: inline-block;
      position: absolute; }
    .vega-embed .vega-actions::before {
      left: auto;
      right: 14px;
      top: -16px;
      border: 8px solid #0000;
      border-bottom-color: #d9d9d9; }
    .vega-embed .vega-actions::after {
      left: auto;
      right: 15px;
      top: -14px;
      border: 7px solid #0000;
      border-bottom-color: #fff; }

.vega-embed-wrapper {
  max-width: 100%;
  overflow: scroll;
  padding-right: 14px; }

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6); }
  to {
    opacity: 1;
    transform: scale(1); } }
`;function Lg(t,...e){for(const n of e)t=rDt(t,n);return t}function rDt(t,e){if(typeof e!="object"||e===null)return t;for(const n in e)e.hasOwnProperty(n)&&e[n]!==void 0&&(typeof e[n]!="object"||je(e[n])||e[n]===null?t[n]=e[n]:typeof t[n]!="object"||t[n]===null?t[n]=Lg(je(e[n].constructor)?[]:{},e[n]):Lg(t[n],e[n]));return t}String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.substr(!e||e<0?0:+e,t.length)===t});const bc=jTt,rA=K$t,OE={vega:"Vega","vega-lite":"Vega-Lite"},iA={vega:bc.version,"vega-lite":rA?rA.version:"not available"},iDt={vega:(t,e)=>t,"vega-lite":(t,e)=>rA.compile(t,{config:e}).spec},sDt=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" width="14" height="14">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,aDt={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Vega Source",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"};function oDt(t){return typeof t=="function"}function ZZ(t,e,n,r){const i=`<html><head>${e}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,a=window.open("");a.document.write(i+t+s),a.document.title=`${OE[r]} JSON Source`}function Pye(t,e){if(t.$schema){const n=Rye(t.$schema);e&&e!==n.library&&console.warn(`The given visualization spec is written in ${OE[n.library]}, but mode argument sets ${OE[e]||e}.`);const r=n.library;return Hx.satisfies(iA[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${r} ${n.version}, but the current version of ${OE[r]} is ${iA[r]}.`),r}else{if("mark"in t||"encoding"in t||"layer"in t||"hconcat"in t||"vconcat"in t||"facet"in t||"repeat"in t)return"vega-lite";if("marks"in t||"signals"in t||"scales"in t||"axes"in t)return"vega"}return e||"vega"}function lDt(t){return!!(t&&"load"in t)}function n5(t,e,n={}){return frt(this,void 0,void 0,function*(){n=n||{};const r=n.patch||n.onBeforeParse,i=n.actions===!0||n.actions===!1?n.actions:Lg({},{export:{svg:!0,png:!0},source:!0,compiled:!1,editor:!0},n.actions||{}),s=Object.assign({},aDt,n.i18n),a=lDt(n.loader)?n.loader:bc.loader(n.loader),o=n.renderer||"canvas",l=n.logLevel||bc.Warn;if(bc.isString(e)){const g=yield a.load(e);return n5(t,JSON.parse(g),n)}let u=n.config||{};if(bc.isString(u)){const g=yield a.load(u);return n5(t,e,Object.assign({},n,{config:JSON.parse(g)}))}if(n.defaultStyle!==!1){const g="vega-embed-style";if(!document.getElementById(g)){const v=document.createElement("style");v.id=g,v.innerText=n.defaultStyle===void 0||n.defaultStyle===!0?nDt.toString():n.defaultStyle,document.head.appendChild(v)}}n.theme&&(u=Lg({},jIt[n.theme],u));const c=Pye(e,n.mode);let f=iDt[c](e,u);if(c==="vega-lite"&&f.$schema){const g=Rye(f.$schema);Hx.satisfies(iA.vega,`^${g.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${g.version}, but current version is ${iA.vega}.`)}const d=yB(t).classed("vega-embed",!0).html("");if(r)if(r instanceof Function)f=r(f);else if(bc.isString(r)){const g=yield a.load(r);f=Lg(f,JSON.parse(g))}else f=Lg(f,r);const h=bc.parse(f,c==="vega-lite"?{}:u),p=new bc.View(h,{loader:a,logLevel:l,renderer:o}).initialize(t);if(n.tooltip!==!1){let g;oDt(n.tooltip)?g=n.tooltip:g=new eDt(n.tooltip===!0?{}:n.tooltip).call,p.tooltip(g)}let m=n.hover;if(m===void 0&&(m=c!=="vega-lite"),m){const{hoverSet:g,updateSet:v}=typeof m=="boolean"?{}:m;p.hover(g,v)}if(n&&(n.width&&p.width(n.width),n.height&&p.height(n.height),n.padding&&p.padding(n.padding)),n.runAsync?yield p.runAsync():p.run(),i!==!1){let g=d;if(n.defaultStyle!==!1){const y=g=d.append("details").attr("title",s.CLICK_TO_VIEW_ACTIONS);y.insert("summary").html(sDt);const x=y.node();document.addEventListener("click",w=>{x.contains(w.target)||x.removeAttribute("open")})}const v=g.insert("div").attr("class","vega-actions");if(i===!0||i.export!==!1){for(const y of["svg","png"])if(i===!0||i.export===!0||i.export[y]){const b=s[`${y.toUpperCase()}_ACTION`];v.append("a").text(b).attr("href","#").attr("target","_blank").attr("download",`visualization.${y}`).on("mousedown",function(){p.toImageURL(y,n.scaleFactor).then(x=>{this.href=x}).catch(x=>{throw x}),Ka.preventDefault()})}}if((i===!0||i.source!==!1)&&v.append("a").text(s.SOURCE_ACTION).attr("href","#").on("mousedown",()=>{ZZ(jD(e),n.sourceHeader||"",n.sourceFooter||"",c),Ka.preventDefault()}),c==="vega-lite"&&(i===!0||i.compiled!==!1)&&v.append("a").text(s.COMPILED_ACTION).attr("href","#").on("mousedown",()=>{ZZ(jD(f),n.sourceHeader||"",n.sourceFooter||"","vega"),Ka.preventDefault()}),i===!0||i.editor!==!1){const y=n.editorUrl||"https://vega.github.io/editor/";v.append("a").text(s.EDITOR_ACTION).attr("href","#").on("mousedown",()=>{tDt(window,y,{config:u,mode:c,renderer:o,spec:jD(e)}),Ka.preventDefault()})}}return{view:p,spec:e,vgSpec:f}})}const uDt=Object.freeze(Object.defineProperty({__proto__:null,default:n5,guessMode:Pye,vega:bc,vl:rA},Symbol.toStringTag,{value:"Module"})),db=Qp(uDt);var Zs={},mS={};Object.defineProperty(mS,"__esModule",{value:!0});function cDt(t){return t.name!=null}mS.isSurfaceInfo=cDt;function fDt(t){return t.drawArea instanceof HTMLElement}mS.isSurface=fDt;var gS={},LV={},dDt=function(){},Na={},bg=[],JZ=[];function Sw(t,e){var n=JZ,r,i,s,a;for(a=arguments.length;a-- >2;)bg.push(arguments[a]);for(e&&e.children!=null&&(bg.length||bg.push(e.children),delete e.children);bg.length;)if((i=bg.pop())&&i.pop!==void 0)for(a=i.length;a--;)bg.push(i[a]);else typeof i=="boolean"&&(i=null),(s=typeof t!="function")&&(i==null?i="":typeof i=="number"?i=String(i):typeof i!="string"&&(s=!1)),s&&r?n[n.length-1]+=i:n===JZ?n=[i]:n.push(i),r=s;var o=new dDt;return o.nodeName=t,o.children=n,o.attributes=e??void 0,o.key=e==null?void 0:e.key,Na.vnode!==void 0&&Na.vnode(o),o}function xu(t,e){for(var n in e)t[n]=e[n];return t}function fv(t,e){t&&(typeof t=="function"?t(e):t.current=e)}var hDt=typeof Promise=="function"?Promise.resolve().then.bind(Promise.resolve()):setTimeout;function zye(t,e){return Sw(t.nodeName,xu(xu({},t.attributes),e),arguments.length>2?[].slice.call(arguments,2):t.children)}var pDt=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,Bye=[];function Uye(t){!t._dirty&&(t._dirty=!0)&&Bye.push(t)==1&&(Na.debounceRendering||hDt)(PV)}function PV(){for(var t;t=Bye.pop();)t._dirty&&iI(t)}function mDt(t,e,n){return typeof e=="string"||typeof e=="number"?t.splitText!==void 0:typeof e.nodeName=="string"?!t._componentConstructor&&Vye(t,e.nodeName):n||t._componentConstructor===e.nodeName}function Vye(t,e){return t.normalizedNodeName===e||t.nodeName.toLowerCase()===e.toLowerCase()}function Wye(t){var e=xu({},t.attributes);e.children=t.children;var n=t.nodeName.defaultProps;if(n!==void 0)for(var r in n)e[r]===void 0&&(e[r]=n[r]);return e}function gDt(t,e){var n=e?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);return n.normalizedNodeName=t,n}function zV(t){var e=t.parentNode;e&&e.removeChild(t)}function QZ(t,e,n,r,i){if(e==="className"&&(e="class"),e!=="key")if(e==="ref")fv(n,null),fv(r,t);else if(e==="class"&&!i)t.className=r||"";else if(e==="style"){if((!r||typeof r=="string"||typeof n=="string")&&(t.style.cssText=r||""),r&&typeof r=="object"){if(typeof n!="string")for(var s in n)s in r||(t.style[s]="");for(var s in r)t.style[s]=typeof r[s]=="number"&&pDt.test(s)===!1?r[s]+"px":r[s]}}else if(e==="dangerouslySetInnerHTML")r&&(t.innerHTML=r.__html||"");else if(e[0]=="o"&&e[1]=="n"){var a=e!==(e=e.replace(/Capture$/,""));e=e.toLowerCase().substring(2),r?n||t.addEventListener(e,eJ,a):t.removeEventListener(e,eJ,a),(t._listeners||(t._listeners={}))[e]=r}else if(e!=="list"&&e!=="type"&&!i&&e in t){try{t[e]=r??""}catch{}(r==null||r===!1)&&e!="spellcheck"&&t.removeAttribute(e)}else{var o=i&&e!==(e=e.replace(/^xlink:?/,""));r==null||r===!1?o?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.removeAttribute(e):typeof r!="function"&&(o?t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),r):t.setAttribute(e,r))}}function eJ(t){return this._listeners[t.type](Na.event&&Na.event(t)||t)}var Gye=[],r5=0,Vf=!1,sA=!1;function Hye(){for(var t;t=Gye.shift();)Na.afterMount&&Na.afterMount(t),t.componentDidMount&&t.componentDidMount()}function jye(t,e,n,r,i,s){r5++||(Vf=i!=null&&i.ownerSVGElement!==void 0,sA=t!=null&&!("__preactattr_"in t));var a=qye(t,e,n,r,s);return i&&a.parentNode!==i&&i.appendChild(a),--r5||(sA=!1,s||Hye()),a}function qye(t,e,n,r,i){var s=t,a=Vf;if((e==null||typeof e=="boolean")&&(e=""),typeof e=="string"||typeof e=="number")return t&&t.splitText!==void 0&&t.parentNode&&(!t._component||i)?t.nodeValue!=e&&(t.nodeValue=e):(s=document.createTextNode(e),t&&(t.parentNode&&t.parentNode.replaceChild(s,t),Zp(t,!0))),s.__preactattr_=!0,s;var o=e.nodeName;if(typeof o=="function")return xDt(t,e,n,r);if(Vf=o==="svg"?!0:o==="foreignObject"?!1:Vf,o=String(o),(!t||!Vye(t,o))&&(s=gDt(o,Vf),t)){for(;t.firstChild;)s.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(s,t),Zp(t,!0)}var l=s.firstChild,u=s.__preactattr_,c=e.children;if(u==null){u=s.__preactattr_={};for(var f=s.attributes,d=f.length;d--;)u[f[d].name]=f[d].value}return!sA&&c&&c.length===1&&typeof c[0]=="string"&&l!=null&&l.splitText!==void 0&&l.nextSibling==null?l.nodeValue!=c[0]&&(l.nodeValue=c[0]):(c&&c.length||l!=null)&&vDt(s,c,n,r,sA||u.dangerouslySetInnerHTML!=null),yDt(s,e.attributes,u),Vf=a,s}function vDt(t,e,n,r,i){var s=t.childNodes,a=[],o={},l=0,u=0,c=s.length,f=0,d=e?e.length:0,h,p,m,g,v;if(c!==0)for(var y=0;y<c;y++){var b=s[y],x=b.__preactattr_,w=d&&x?b._component?b._component.__key:x.key:null;w!=null?(l++,o[w]=b):(x||(b.splitText!==void 0?!i||b.nodeValue.trim():i))&&(a[f++]=b)}if(d!==0)for(var y=0;y<d;y++){g=e[y],v=null;var w=g.key;if(w!=null)l&&o[w]!==void 0&&(v=o[w],o[w]=void 0,l--);else if(u<f){for(h=u;h<f;h++)if(a[h]!==void 0&&mDt(p=a[h],g,i)){v=p,a[h]=void 0,h===f-1&&f--,h===u&&u++;break}}v=qye(v,g,n,r),m=s[y],v&&v!==t&&v!==m&&(m==null?t.appendChild(v):v===m.nextSibling?zV(m):t.insertBefore(v,m))}if(l)for(var y in o)o[y]!==void 0&&Zp(o[y],!1);for(;u<=f;)(v=a[f--])!==void 0&&Zp(v,!1)}function Zp(t,e){var n=t._component;n?sI(n):(t.__preactattr_!=null&&fv(t.__preactattr_.ref,null),(e===!1||t.__preactattr_==null)&&zV(t),Xye(t))}function Xye(t){for(t=t.lastChild;t;){var e=t.previousSibling;Zp(t,!0),t=e}}function yDt(t,e,n){var r;for(r in n)!(e&&e[r]!=null)&&n[r]!=null&&QZ(t,r,n[r],n[r]=void 0,Vf);for(r in e)r!=="children"&&r!=="innerHTML"&&(!(r in n)||e[r]!==(r==="value"||r==="checked"?t[r]:n[r]))&&QZ(t,r,n[r],n[r]=e[r],Vf)}var G1=[];function Yye(t,e,n){var r,i=G1.length;for(t.prototype&&t.prototype.render?(r=new t(e,n),Cw.call(r,e,n)):(r=new Cw(e,n),r.constructor=t,r.render=bDt);i--;)if(G1[i].constructor===t)return r.nextBase=G1[i].nextBase,G1.splice(i,1),r;return r}function bDt(t,e,n){return this.constructor(t,n)}function aA(t,e,n,r,i){t._disable||(t._disable=!0,t.__ref=e.ref,t.__key=e.key,delete e.ref,delete e.key,typeof t.constructor.getDerivedStateFromProps>"u"&&(!t.base||i?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(e,r)),r&&r!==t.context&&(t.prevContext||(t.prevContext=t.context),t.context=r),t.prevProps||(t.prevProps=t.props),t.props=e,t._disable=!1,n!==0&&(n===1||Na.syncComponentUpdates!==!1||!t.base?iI(t,1,i):Uye(t)),fv(t.__ref,t))}function iI(t,e,n,r){if(!t._disable){var i=t.props,s=t.state,a=t.context,o=t.prevProps||i,l=t.prevState||s,u=t.prevContext||a,c=t.base,f=t.nextBase,d=c||f,h=t._component,p=!1,m=u,g,v,y;if(t.constructor.getDerivedStateFromProps&&(s=xu(xu({},s),t.constructor.getDerivedStateFromProps(i,s)),t.state=s),c&&(t.props=o,t.state=l,t.context=u,e!==2&&t.shouldComponentUpdate&&t.shouldComponentUpdate(i,s,a)===!1?p=!0:t.componentWillUpdate&&t.componentWillUpdate(i,s,a),t.props=i,t.state=s,t.context=a),t.prevProps=t.prevState=t.prevContext=t.nextBase=null,t._dirty=!1,!p){g=t.render(i,s,a),t.getChildContext&&(a=xu(xu({},a),t.getChildContext())),c&&t.getSnapshotBeforeUpdate&&(m=t.getSnapshotBeforeUpdate(o,l));var b=g&&g.nodeName,x,w;if(typeof b=="function"){var S=Wye(g);v=h,v&&v.constructor===b&&S.key==v.__key?aA(v,S,1,a,!1):(x=v,t._component=v=Yye(b,S,a),v.nextBase=v.nextBase||f,v._parentComponent=t,aA(v,S,0,a,!1),iI(v,1,n,!0)),w=v.base}else y=d,x=h,x&&(y=t._component=null),(d||e===1)&&(y&&(y._component=null),w=jye(y,g,a,n||!c,d&&d.parentNode,!0));if(d&&w!==d&&v!==h){var C=d.parentNode;C&&w!==C&&(C.replaceChild(w,d),x||(d._component=null,Zp(d,!1)))}if(x&&sI(x),t.base=w,w&&!r){for(var _=t,E=t;E=E._parentComponent;)(_=E).base=w;w._component=_,w._componentConstructor=_.constructor}}for(!c||n?Gye.push(t):p||(t.componentDidUpdate&&t.componentDidUpdate(o,l,m),Na.afterUpdate&&Na.afterUpdate(t));t._renderCallbacks.length;)t._renderCallbacks.pop().call(t);!r5&&!r&&Hye()}}function xDt(t,e,n,r){for(var i=t&&t._component,s=i,a=t,o=i&&t._componentConstructor===e.nodeName,l=o,u=Wye(e);i&&!l&&(i=i._parentComponent);)l=i.constructor===e.nodeName;return i&&l&&(!r||i._component)?(aA(i,u,3,n,r),t=i.base):(s&&!o&&(sI(s),t=a=null),i=Yye(e.nodeName,u,n),t&&!i.nextBase&&(i.nextBase=t,a=null),aA(i,u,1,n,r),t=i.base,a&&t!==a&&(a._component=null,Zp(a,!1))),t}function sI(t){Na.beforeUnmount&&Na.beforeUnmount(t);var e=t.base;t._disable=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var n=t._component;n?sI(n):e&&(e.__preactattr_!=null&&fv(e.__preactattr_.ref,null),t.nextBase=e,zV(e),G1.push(t),Xye(e)),fv(t.__ref,null)}function Cw(t,e){this._dirty=!0,this.context=e,this.props=t,this.state=this.state||{},this._renderCallbacks=[]}xu(Cw.prototype,{setState:function(e,n){this.prevState||(this.prevState=this.state),this.state=xu(xu({},this.state),typeof e=="function"?e(this.state,this.props):e),n&&this._renderCallbacks.push(n),Uye(this)},forceUpdate:function(e){e&&this._renderCallbacks.push(e),iI(this,2)},render:function(){}});function Kye(t,e,n){return jye(n,t,{},!1,e,!1)}function Zye(){return{}}var wDt={h:Sw,createElement:Sw,cloneElement:zye,createRef:Zye,Component:Cw,render:Kye,rerender:PV,options:Na};const _Dt=Object.freeze(Object.defineProperty({__proto__:null,Component:Cw,cloneElement:zye,createElement:Sw,createRef:Zye,default:wDt,h:Sw,options:Na,render:Kye,rerender:PV},Symbol.toStringTag,{value:"Module"})),BV=Qp(_Dt);var qe={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var tJ=Object.getOwnPropertySymbols,SDt=Object.prototype.hasOwnProperty,CDt=Object.prototype.propertyIsEnumerable;function EDt(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function TDt(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(e).map(function(s){return e[s]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var UV=TDt()?Object.assign:function(t,e){for(var n,r=EDt(t),i,s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var a in n)SDt.call(n,a)&&(r[a]=n[a]);if(tJ){i=tJ(n);for(var o=0;o<i.length;o++)CDt.call(n,i[o])&&(r[i[o]]=n[i[o]])}}return r},VV={};Object.defineProperty(VV,"__esModule",{value:!0});VV.StyleSheet=Jye;var kDt=UV,ADt=MDt(kDt);function MDt(t){return t&&t.__esModule?t:{default:t}}function NDt(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}else return Array.from(t)}function dO(t){return t[t.length-1]}function nJ(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}var Vh=typeof window<"u",$Dt=!1,IDt=function(){if(Vh){var t=document.createElement("div");return t.innerHTML="<!--[if lt IE 10]><i></i><![endif]-->",t.getElementsByTagName("i").length===1}}();function rJ(){var t=document.createElement("style");return t.type="text/css",t.setAttribute("data-glamor",""),t.appendChild(document.createTextNode("")),(document.head||document.getElementsByTagName("head")[0]).appendChild(t),t}function Jye(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.speedy,n=e===void 0?!$Dt:e,r=t.maxLength,i=r===void 0?Vh&&IDt?4e3:65e3:r;this.isSpeedy=n,this.sheet=void 0,this.tags=[],this.maxLength=i,this.ctr=0}(0,ADt.default)(Jye.prototype,{getSheet:function(){return nJ(dO(this.tags))},inject:function(){var e=this;if(this.injected)throw new Error("already injected stylesheet!");Vh?this.tags[0]=rJ():this.sheet={cssRules:[],insertRule:function(r){e.sheet.cssRules.push({cssText:r})}},this.injected=!0},speedy:function(e){if(this.ctr!==0)throw new Error("cannot change speedy mode after inserting any rule to sheet. Either call speedy("+e+") earlier in your app, or call flush() before speedy("+e+")");this.isSpeedy=!!e},_insert:function(e){try{var n=this.getSheet();n.insertRule(e,e.indexOf("@import")!==-1?0:n.cssRules.length)}catch{}},insert:function(e){if(Vh)if(this.isSpeedy&&this.getSheet().insertRule)this._insert(e);else if(e.indexOf("@import")!==-1){var n=dO(this.tags);n.insertBefore(document.createTextNode(e),n.firstChild)}else dO(this.tags).appendChild(document.createTextNode(e));else this.sheet.insertRule(e,e.indexOf("@import")!==-1?0:this.sheet.cssRules.length);return this.ctr++,Vh&&this.ctr%this.maxLength===0&&this.tags.push(rJ()),this.ctr-1},delete:function(e){return this.replace(e,"")},flush:function(){Vh?(this.tags.forEach(function(e){return e.parentNode.removeChild(e)}),this.tags=[],this.sheet=null,this.ctr=0):this.sheet.cssRules=[],this.injected=!1},rules:function(){if(!Vh)return this.sheet.cssRules;var e=[];return this.tags.forEach(function(n){return e.splice.apply(e,[e.length,0].concat(NDt(Array.from(nJ(n).cssRules))))}),e}});var hb={},DDt=/-(.)/g;function RDt(t){return t.replace(DDt,function(e,n){return n.toUpperCase()})}var ODt=RDt,FDt=ODt,LDt=/^-ms-/;function PDt(t){return FDt(t.replace(LDt,"ms-"))}var zDt=PDt,WV={},GV={};Object.defineProperty(GV,"__esModule",{value:!0});var FE={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowStart:!0,gridRowEnd:!0,gridColumn:!0,gridColumnStart:!0,gridColumnEnd:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};function BDt(t,e){return t+e.charAt(0).toUpperCase()+e.substring(1)}var UDt=["Webkit","ms","Moz","O"];Object.keys(FE).forEach(function(t){UDt.forEach(function(e){FE[BDt(e,t)]=FE[t]})});var VDt={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},WDt={isUnitlessNumber:FE,shorthandPropertyExpansions:VDt};GV.default=WDt;function aI(t){return function(){return t}}var Lm=function(){};Lm.thatReturns=aI;Lm.thatReturnsFalse=aI(!1);Lm.thatReturnsTrue=aI(!0);Lm.thatReturnsNull=aI(null);Lm.thatReturnsThis=function(){return this};Lm.thatReturnsArgument=function(t){return t};var GDt=Lm,HDt=GDt,jDt=HDt,Qye=jDt;Object.defineProperty(WV,"__esModule",{value:!0});var qDt=GV,XDt=ebe(qDt),YDt=Qye;ebe(YDt);function ebe(t){return t&&t.__esModule?t:{default:t}}var iJ=XDt.default.isUnitlessNumber;function KDt(t,e,n){var r=e==null||typeof e=="boolean"||e==="";if(r)return"";var i=isNaN(e);return i||e===0||iJ.hasOwnProperty(t)&&iJ[t]?""+e:(typeof e=="string"&&(e=e.trim()),e+"px")}WV.default=KDt;var ZDt=/([A-Z])/g;function JDt(t){return t.replace(ZDt,"-$1").toLowerCase()}var QDt=JDt,eRt=QDt,tRt=/^ms-/;function nRt(t){return eRt(t).replace(tRt,"-ms-")}var rRt=nRt;function iRt(t){var e={};return function(n){return e.hasOwnProperty(n)||(e[n]=t.call(this,n)),e[n]}}var sRt=iRt;Object.defineProperty(hb,"__esModule",{value:!0});hb.processStyleName=void 0;hb.createMarkupForStyles=mRt;var aRt=zDt;vS(aRt);var oRt=WV,lRt=vS(oRt),uRt=rRt,cRt=vS(uRt),fRt=sRt,dRt=vS(fRt),hRt=Qye;vS(hRt);function vS(t){return t&&t.__esModule?t:{default:t}}var pRt=hb.processStyleName=(0,dRt.default)(cRt.default);function mRt(t,e){var n="";for(var r in t){var i=r.indexOf("--")===0;if(t.hasOwnProperty(r)&&r!=="label"){var s=t[r];s!=null&&(i?n+=r+":"+s+";":(n+=pRt(r)+":",n+=(0,lRt.default)(r,s,e)+";"))}}return n||null}var HV={};Object.defineProperty(HV,"__esModule",{value:!0});var tbe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};HV.default=jV;function gRt(t){return t==null||t===!1||(typeof t>"u"?"undefined":tbe(t))==="object"&&Object.keys(t).length===0}function vRt(t){if(gRt(t))return null;if((typeof t>"u"?"undefined":tbe(t))!=="object")return t;for(var e={},n=Object.keys(t),r=!1,i=0;i<n.length;i++){var s=t[n[i]],a=jV(s);(a===null||a!==s)&&(r=!0),a!==null&&(e[n[i]]=a)}return Object.keys(e).length===0?null:r?e:t}function yRt(t){var e=!1,n=[];return t.forEach(function(r){var i=jV(r);(i===null||i!==r)&&(e=!0),i!==null&&n.push(i)}),n.length==0?null:e?n:t}function jV(t){return Array.isArray(t)?yRt(t):vRt(t)}var pb={},qV={},oA={},bRt={get exports(){return oA},set exports(t){oA=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=["Webkit"],r=["Moz"],i=["ms"],s=["Webkit","Moz"],a=["Webkit","ms"],o=["Webkit","Moz","ms"];e.default={plugins:[],prefixMap:{appearance:s,userSelect:o,textEmphasisPosition:n,textEmphasis:n,textEmphasisStyle:n,textEmphasisColor:n,boxDecorationBreak:n,clipPath:n,maskImage:n,maskMode:n,maskRepeat:n,maskPosition:n,maskClip:n,maskOrigin:n,maskSize:n,maskComposite:n,mask:n,maskBorderSource:n,maskBorderMode:n,maskBorderSlice:n,maskBorderWidth:n,maskBorderOutset:n,maskBorderRepeat:n,maskBorder:n,maskType:n,textDecorationStyle:n,textDecorationSkip:n,textDecorationLine:n,textDecorationColor:n,filter:n,fontFeatureSettings:n,breakAfter:o,breakBefore:o,breakInside:o,columnCount:s,columnFill:s,columnGap:s,columnRule:s,columnRuleColor:s,columnRuleStyle:s,columnRuleWidth:s,columns:s,columnSpan:s,columnWidth:s,writingMode:a,flex:n,flexBasis:n,flexDirection:n,flexGrow:n,flexFlow:n,flexShrink:n,flexWrap:n,alignContent:n,alignItems:n,alignSelf:n,justifyContent:n,order:n,transform:n,transformOrigin:n,transformOriginX:n,transformOriginY:n,backfaceVisibility:n,perspective:n,perspectiveOrigin:n,transformStyle:n,transformOriginZ:n,animation:n,animationDelay:n,animationDirection:n,animationFillMode:n,animationDuration:n,animationIterationCount:n,animationName:n,animationPlayState:n,animationTimingFunction:n,backdropFilter:n,fontKerning:n,scrollSnapType:a,scrollSnapPointsX:a,scrollSnapPointsY:a,scrollSnapDestination:a,scrollSnapCoordinate:a,shapeImageThreshold:n,shapeImageMargin:n,shapeImageOutside:n,hyphens:o,flowInto:a,flowFrom:a,regionFragment:a,textAlignLast:r,tabSize:r,wrapFlow:i,wrapThrough:i,wrapMargin:i,gridTemplateColumns:i,gridTemplateRows:i,gridTemplateAreas:i,gridTemplate:i,gridAutoColumns:i,gridAutoRows:i,gridAutoFlow:i,grid:i,gridRowStart:i,gridColumnStart:i,gridRowEnd:i,gridRow:i,gridColumn:i,gridColumnEnd:i,gridColumnGap:i,gridRowGap:i,gridArea:i,gridGap:i,textSizeAdjust:a,borderImage:n,borderImageOutset:n,borderImageRepeat:n,borderImageSlice:n,borderImageSource:n,borderImageWidth:n,transitionDelay:n,transitionDuration:n,transitionProperty:n,transitionTimingFunction:n}},t.exports=e.default})(bRt,oA);var lA={},xRt={get exports(){return lA},set exports(t){lA=t}},Ew={},wRt={get exports(){return Ew},set exports(t){Ew=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r){return r.charAt(0).toUpperCase()+r.slice(1)}t.exports=e.default})(wRt,Ew);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var n=Ew,r=i(n);function i(a){return a&&a.__esModule?a:{default:a}}function s(a,o,l){if(a.hasOwnProperty(o))for(var u=a[o],c=0,f=u.length;c<f;++c)l[u[c]+(0,r.default)(o)]=l[o]}t.exports=e.default})(xRt,lA);var uA={},_Rt={get exports(){return uA},set exports(t){uA=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r,i,s,a,o){for(var l=0,u=r.length;l<u;++l){var c=r[l](i,s,a,o);if(c)return c}}t.exports=e.default})(_Rt,uA);var cA={},SRt={get exports(){return cA},set exports(t){cA=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var n=["-webkit-","-moz-",""],r={"zoom-in":!0,"zoom-out":!0,grab:!0,grabbing:!0};function i(s,a){if(s==="cursor"&&r.hasOwnProperty(a))return n.map(function(o){return o+a})}t.exports=e.default})(SRt,cA);var fA={},CRt={get exports(){return fA},set exports(t){fA=t}},Ld={},ERt={get exports(){return Ld},set exports(t){Ld=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var n=/-webkit-|-moz-|-ms-/;function r(i){return typeof i=="string"&&n.test(i)}t.exports=e.default})(ERt,Ld);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var n=Ld,r=i(n);function i(o){return o&&o.__esModule?o:{default:o}}var s=["-webkit-",""];function a(o,l){if(typeof l=="string"&&!(0,r.default)(l)&&l.indexOf("cross-fade(")>-1)return s.map(function(u){return l.replace(/cross-fade\(/g,u+"cross-fade(")})}t.exports=e.default})(CRt,fA);var dA={},TRt={get exports(){return dA},set exports(t){dA=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var n=Ld,r=i(n);function i(o){return o&&o.__esModule?o:{default:o}}var s=["-webkit-",""];function a(o,l){if(typeof l=="string"&&!(0,r.default)(l)&&l.indexOf("filter(")>-1)return s.map(function(u){return l.replace(/filter\(/g,u+"filter(")})}t.exports=e.default})(TRt,dA);var hA={},kRt={get exports(){return hA},set exports(t){hA=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var n={flex:["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex","flex"],"inline-flex":["-webkit-inline-box","-moz-inline-box","-ms-inline-flexbox","-webkit-inline-flex","inline-flex"]};function r(i,s){if(i==="display"&&n.hasOwnProperty(s))return n[s]}t.exports=e.default})(kRt,hA);var pA={},ARt={get exports(){return pA},set exports(t){pA=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var n={"space-around":"justify","space-between":"justify","flex-start":"start","flex-end":"end","wrap-reverse":"multiple",wrap:"multiple"},r={alignItems:"WebkitBoxAlign",justifyContent:"WebkitBoxPack",flexWrap:"WebkitBoxLines"};function i(s,a,o){s==="flexDirection"&&typeof a=="string"&&(a.indexOf("column")>-1?o.WebkitBoxOrient="vertical":o.WebkitBoxOrient="horizontal",a.indexOf("reverse")>-1?o.WebkitBoxDirection="reverse":o.WebkitBoxDirection="normal"),r.hasOwnProperty(s)&&(o[r[s]]=n[a]||a)}t.exports=e.default})(ARt,pA);var mA={},MRt={get exports(){return mA},set exports(t){mA=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var n=Ld,r=i(n);function i(l){return l&&l.__esModule?l:{default:l}}var s=["-webkit-","-moz-",""],a=/linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/;function o(l,u){if(typeof u=="string"&&!(0,r.default)(u)&&a.test(u))return s.map(function(c){return c+u})}t.exports=e.default})(MRt,mA);var gA={},NRt={get exports(){return gA},set exports(t){gA=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var n=Ld,r=i(n);function i(o){return o&&o.__esModule?o:{default:o}}var s=["-webkit-",""];function a(o,l){if(typeof l=="string"&&!(0,r.default)(l)&&l.indexOf("image-set(")>-1)return s.map(function(u){return l.replace(/image-set\(/g,u+"image-set(")})}t.exports=e.default})(NRt,gA);var vA={},$Rt={get exports(){return vA},set exports(t){vA=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r,i){if(r==="position"&&i==="sticky")return["-webkit-sticky","sticky"]}t.exports=e.default})($Rt,vA);var yA={},IRt={get exports(){return yA},set exports(t){yA=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var n=["-webkit-","-moz-",""],r={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},i={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0};function s(a,o){if(r.hasOwnProperty(a)&&i.hasOwnProperty(o))return n.map(function(l){return l+o})}t.exports=e.default})(IRt,yA);var bA={},DRt={get exports(){return bA},set exports(t){bA=t}},xA={},RRt={get exports(){return xA},set exports(t){xA=t}},ORt=/[A-Z]/g,FRt=/^ms-/,hO={};function LRt(t){return"-"+t.toLowerCase()}function PRt(t){if(hO.hasOwnProperty(t))return hO[t];var e=t.replace(ORt,LRt);return hO[t]=FRt.test(e)?"-"+e:e}const zRt=Object.freeze(Object.defineProperty({__proto__:null,default:PRt},Symbol.toStringTag,{value:"Module"})),BRt=Qp(zRt);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var n=BRt,r=i(n);function i(a){return a&&a.__esModule?a:{default:a}}function s(a){return(0,r.default)(a)}t.exports=e.default})(RRt,xA);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=d;var n=xA,r=l(n),i=Ld,s=l(i),a=Ew,o=l(a);function l(h){return h&&h.__esModule?h:{default:h}}var u={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0,MozTransition:!0,MozTransitionProperty:!0},c={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-"};function f(h,p){if((0,s.default)(h))return h;for(var m=h.split(/,(?![^()]*(?:\([^()]*\))?\))/g),g=0,v=m.length;g<v;++g){var y=m[g],b=[y];for(var x in p){var w=(0,r.default)(x);if(y.indexOf(w)>-1&&w!=="order")for(var S=p[x],C=0,_=S.length;C<_;++C)b.unshift(y.replace(w,c[S[C]]+w))}m[g]=b.join(",")}return m.join(",")}function d(h,p,m,g){if(typeof p=="string"&&u.hasOwnProperty(h)){var v=f(p,g),y=v.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter(function(x){return!/-moz-|-ms-/.test(x)}).join(",");if(h.indexOf("Webkit")>-1)return y;var b=v.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter(function(x){return!/-webkit-|-ms-/.test(x)}).join(",");return h.indexOf("Moz")>-1?b:(m["Webkit"+(0,o.default)(h)]=y,m["Moz"+(0,o.default)(h)]=b,v)}}t.exports=e.default})(DRt,bA);Object.defineProperty(qV,"__esModule",{value:!0});qV.default=pOt;var URt=oA,VRt=po(URt),WRt=lA,GRt=po(WRt),HRt=uA,jRt=po(HRt),qRt=cA,XRt=po(qRt),YRt=fA,KRt=po(YRt),ZRt=dA,JRt=po(ZRt),QRt=hA,eOt=po(QRt),tOt=pA,nOt=po(tOt),rOt=mA,iOt=po(rOt),sOt=gA,aOt=po(sOt),oOt=vA,lOt=po(oOt),uOt=yA,cOt=po(uOt),fOt=bA,dOt=po(fOt);function po(t){return t&&t.__esModule?t:{default:t}}var hOt=[KRt.default,XRt.default,JRt.default,nOt.default,iOt.default,aOt.default,lOt.default,cOt.default,dOt.default,eOt.default],sJ=VRt.default.prefixMap;function pOt(t){for(var e in t){var n=t[e],r=(0,jRt.default)(hOt,e,n,t,sJ);r&&(t[e]=r),(0,GRt.default)(sJ,e,t)}return t}Object.defineProperty(pb,"__esModule",{value:!0});var i5=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};pb.PluginSet=rbe;pb.fallbacks=xOt;pb.contentWrap=_Ot;pb.prefixes=SOt;var mOt=UV,XV=nbe(mOt),gOt=hb,vOt=qV,yOt=nbe(vOt);function nbe(t){return t&&t.__esModule?t:{default:t}}var bOt=function(t){return t==="development"||!t}("production");function rbe(t){this.fns=t||[]}(0,XV.default)(rbe.prototype,{add:function(){for(var e=this,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];r.forEach(function(s){e.fns.indexOf(s)>=0?bOt&&console.warn("adding the same plugin again, ignoring"):e.fns=[s].concat(e.fns)})},remove:function(e){this.fns=this.fns.filter(function(n){return n!==e})},clear:function(){this.fns=[]},transform:function(e){return this.fns.reduce(function(n,r){return r(n)},e)}});function xOt(t){var e=Object.keys(t.style).map(function(i){return Array.isArray(t.style[i])}).indexOf(!0)>=0;if(e){var n=t.style,r=Object.keys(n).reduce(function(i,s){return i[s]=Array.isArray(n[s])?n[s].join("; "+(0,gOt.processStyleName)(s)+": "):n[s],i},{});return(0,XV.default)({},t,{style:r})}return t}var wOt=["normal","none","counter","open-quote","close-quote","no-open-quote","no-close-quote","initial","inherit"];function _Ot(t){if(t.style.content){var e=t.style.content;return wOt.indexOf(e)>=0||/^(attr|calc|counters?|url)\(/.test(e)||e.charAt(0)===e.charAt(e.length-1)&&(e.charAt(0)==='"'||e.charAt(0)==="'")?t:i5({},t,{style:i5({},t.style,{content:'"'+e+'"'})})}return t}function SOt(t){return(0,XV.default)({},t,{style:(0,yOt.default)(i5({},t.style))})}var YV={};Object.defineProperty(YV,"__esModule",{value:!0});YV.default=COt;function COt(t,e){for(var n=1540483477,r=24,i=e^t.length,s=t.length,a=0;s>=4;){var o=EOt(t,a);o=Ah(o,n),o^=o>>>r,o=Ah(o,n),i=Ah(i,n),i^=o,a+=4,s-=4}switch(s){case 3:i^=aJ(t,a),i^=t.charCodeAt(a+2)<<16,i=Ah(i,n);break;case 2:i^=aJ(t,a),i=Ah(i,n);break;case 1:i^=t.charCodeAt(a),i=Ah(i,n);break}return i^=i>>>13,i=Ah(i,n),i^=i>>>15,i>>>0}function EOt(t,e){return t.charCodeAt(e++)+(t.charCodeAt(e++)<<8)+(t.charCodeAt(e++)<<16)+(t.charCodeAt(e)<<24)}function aJ(t,e){return t.charCodeAt(e++)+(t.charCodeAt(e++)<<8)}function Ah(t,e){t=t|0,e=e|0;var n=t&65535,r=t>>>16,i=n*e+((r*e&65535)<<16)|0;return i}Object.defineProperty(qe,"__esModule",{value:!0});qe.compose=qe.merge=qe.$=qe.style=qe.presets=qe.keyframes=qe.fontFace=qe.insertGlobal=qe.insertRule=qe.plugins=qe.styleSheet=void 0;qe.speedy=IOt;qe.simulations=DOt;qe.simulate=ROt;qe.cssLabels=OOt;qe.isLikeRule=eW;qe.idFor=tW;qe.css=Di;qe.rehydrate=YOt;qe.flush=KOt;qe.select=nW;qe.parent=JOt;qe.media=QOt;qe.pseudo=Ot;qe.active=eFt;qe.any=tFt;qe.checked=nFt;qe.disabled=rFt;qe.empty=iFt;qe.enabled=sFt;qe._default=aFt;qe.first=oFt;qe.firstChild=lFt;qe.firstOfType=uFt;qe.fullscreen=cFt;qe.focus=fFt;qe.hover=dFt;qe.indeterminate=hFt;qe.inRange=pFt;qe.invalid=mFt;qe.lastChild=gFt;qe.lastOfType=vFt;qe.left=yFt;qe.link=bFt;qe.onlyChild=xFt;qe.onlyOfType=wFt;qe.optional=_Ft;qe.outOfRange=SFt;qe.readOnly=CFt;qe.readWrite=EFt;qe.required=TFt;qe.right=kFt;qe.root=AFt;qe.scope=MFt;qe.target=NFt;qe.valid=$Ft;qe.visited=IFt;qe.dir=DFt;qe.lang=RFt;qe.not=OFt;qe.nthChild=FFt;qe.nthLastChild=LFt;qe.nthLastOfType=PFt;qe.nthOfType=zFt;qe.after=BFt;qe.before=UFt;qe.firstLetter=VFt;qe.firstLine=WFt;qe.selection=GFt;qe.backdrop=HFt;qe.placeholder=jFt;qe.cssFor=qFt;qe.attribsFor=XFt;var TOt=UV,kOt=ZV(TOt),AOt=VV,KV=hb,MOt=HV,oh=ZV(MOt),Fc=pb,NOt=YV,$Ot=ZV(NOt);function ZV(t){return t&&t.__esModule?t:{default:t}}function yS(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ja=qe.styleSheet=new AOt.StyleSheet;Ja.inject();function IOt(t){return Ja.speedy(t)}var bS=qe.plugins=Ja.plugins=new Fc.PluginSet([Fc.prefixes,Fc.contentWrap,Fc.fallbacks]);bS.media=new Fc.PluginSet;bS.fontFace=new Fc.PluginSet;bS.keyframes=new Fc.PluginSet([Fc.prefixes,Fc.fallbacks]);var JV=!1,oI=typeof window<"u",QV=JV,oJ=!1,lJ=!1;function DOt(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;QV=!!t}function ROt(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e=(0,oh.default)(e),e?QV?e.reduce(function(r,i){return r["data-simulate-"+wA(i)]="",r},{}):(oJ||(console.warn("can't simulate without once calling simulations(true)"),oJ=!0),lJ||(console.warn("don't use simulation outside dev"),lJ=!0),{}):{}}var xS=JV;function OOt(t){xS=!!t}function wA(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return t.toLowerCase().replace(/[^a-z0-9]/g,e)}function wS(t){var e=JSON.stringify(t),n=(0,$Ot.default)(e).toString(36);return t.label&&t.label.length>0&&JV?wA(t.label.join("."),"-")+"-"+n:n}function eW(t){var e=Object.keys(t).filter(function(n){return n!=="toString"});return e.length!==1?!1:!!/data\-css\-([a-zA-Z0-9\-_]+)/.exec(e[0])}function tW(t){var e=Object.keys(t).filter(function(i){return i!=="toString"});if(e.length!==1)throw new Error("not a rule");var n=/data\-css\-([a-zA-Z0-9\-_]+)/,r=n.exec(e[0]);if(!r)throw new Error("not a rule");return r[1]}var FOt=/[(),]|"(?:\\.|[^"\n])*"|'(?:\\.|[^'\n])*'|\/\*[\s\S]*?\*\//g;function s5(t){if(t.indexOf(",")===-1)return[t];for(var e=[],n=[],r=0,i;i=FOt.exec(t);)switch(i[0]){case"(":r++;break;case")":r--;break;case",":if(r)break;e.push(i.index)}for(i=e.length;i--;)n.unshift(t.slice(e[i]+1)),t=t.slice(0,e[i]);return n.unshift(t),n}function uJ(t,e){if(!t)return e.replace(/\&/g,"");if(!e)return".css-"+t+",[data-css-"+t+"]";var n=s5(e).map(function(r){return r.indexOf("&")>=0?[r.replace(/\&/mg,".css-"+t),r.replace(/\&/mg,"[data-css-"+t+"]")].join(","):".css-"+t+r+",[data-css-"+t+"]"+r}).join(",");return QV&&/^\&\:/.exec(e)&&!/\s/.exec(e)&&(n+=",.css-"+t+"[data-simulate-"+wA(e)+"],[data-css-"+t+"][data-simulate-"+wA(e)+"]"),n}function a5(t){var e=t.selector,n=t.style,r=bS.transform({selector:e,style:n});return r.selector+"{"+(0,KV.createMarkupForStyles)(r.style)+"}"}function _A(t){var e=void 0,n=void 0,r=void 0,i=void 0;return Object.keys(t).forEach(function(s){s.indexOf("&")>=0?(n=n||{},n[s]=t[s]):s.indexOf("@media")===0?(r=r||{},r[s]=_A(t[s])):s.indexOf("@supports")===0?(i=i||{},i[s]=_A(t[s])):s==="label"?t.label.length>0&&(e=e||{},e.label=xS?t.label.join("."):""):(e=e||{},e[s]=t[s])}),{plain:e,selects:n,medias:r,supports:i}}function SA(t,e){var n=[],r=e.plain,i=e.selects,s=e.medias,a=e.supports;return r&&n.push(a5({style:r,selector:uJ(t)})),i&&Object.keys(i).forEach(function(o){return n.push(a5({style:i[o],selector:uJ(t,o)}))}),s&&Object.keys(s).forEach(function(o){return n.push(o+"{"+SA(t,s[o]).join("")+"}")}),a&&Object.keys(a).forEach(function(o){return n.push(o+"{"+SA(t,a[o]).join("")+"}")}),n}var Pl=Ja.inserted={};function LOt(t){if(!Pl[t.id]){Pl[t.id]=!0;var e=_A(t.style),n=SA(t.id,e);Pl[t.id]=oI?!0:n,n.forEach(function(r){return Ja.insert(r)})}}var Tw=Ja.registered={};function lI(t){Tw[t.id]||(Tw[t.id]=t)}function POt(t){if(eW(t)){var e=Tw[tW(t)];if(e==null)throw new Error("[glamor] an unexpected rule cache miss occurred. This is probably a sign of multiple glamor instances in your app. See https://github.com/threepointone/glamor/issues/79");return e}return t}var LE={};function zOt(t){if(lI(t),LOt(t),LE[t.id])return LE[t.id];var e=yS({},"data-css-"+t.id,xS&&t.label||"");return Object.defineProperty(e,"toString",{enumerable:!1,value:function(){return"css-"+t.id}}),LE[t.id]=e,e}function BOt(t){for(var e=[":",".","[",">"," "],n=!1,r=t.charAt(0),i=0;i<e.length;i++)if(r===e[i]){n=!0;break}return n||t.indexOf("&")>=0}function cJ(t,e){var n=s5(t).map(function(i){return i.indexOf("&")>=0?i:"&"+i}),r=s5(e).map(function(i){return i.indexOf("&")>=0?i:"&"+i});return r.reduce(function(i,s){return i.concat(n.map(function(a){return s.replace(/\&/g,a)}))},[]).join(",")}function UOt(t,e){return t?"@media "+t.substring(6)+" and "+e.substring(6):e}function VOt(t){return t.indexOf("@media")===0}function WOt(t){return t.indexOf("@supports")===0}function GOt(t,e){return t?"@supports "+t.substring(9)+" and "+e.substring(9):e}function ibe(t){for(var e=[],n=0;n<t.length;n++)Array.isArray(t[n])?e=e.concat(ibe(t[n])):e=e.concat(t[n]);return e}var fJ={"::placeholder":["::-webkit-input-placeholder","::-moz-placeholder","::-ms-input-placeholder"],":fullscreen":[":-webkit-full-screen",":-moz-full-screen",":-ms-fullscreen"]};function Wh(t,e){var n=e.selector,r=n===void 0?"":n,i=e.mq,s=i===void 0?"":i,a=e.supp,o=a===void 0?"":a,l=e.src,u=l===void 0?{}:l;Array.isArray(u)||(u=[u]),u=ibe(u),u.forEach(function(c){if(eW(c)){var f=POt(c);if(f.type!=="css")throw new Error("cannot merge this rule");c=f.style}c=(0,oh.default)(c),c&&c.composes&&Wh(t,{selector:r,mq:s,supp:o,src:c.composes}),Object.keys(c||{}).forEach(function(d){if(BOt(d))fJ[d]&&fJ[d].forEach(function(p){return Wh(t,{selector:cJ(r,p),mq:s,supp:o,src:c[d]})}),Wh(t,{selector:cJ(r,d),mq:s,supp:o,src:c[d]});else if(VOt(d))Wh(t,{selector:r,mq:UOt(s,d),supp:o,src:c[d]});else if(WOt(d))Wh(t,{selector:r,mq:s,supp:GOt(o,d),src:c[d]});else if(d!=="composes"){var h=t;o&&(h[o]=h[o]||{},h=h[o]),s&&(h[s]=h[s]||{},h=h[s]),r&&(h[r]=h[r]||{},h=h[r]),d==="label"?xS&&(t.label=t.label.concat(c.label)):h[d]=c[d]}})})}function dJ(t){var e={label:[]};Wh(e,{src:t});var n={id:wS(e),style:e,label:xS?e.label.join("."):"",type:"css"};return zOt(n)}var CA={};Object.defineProperty(CA,"toString",{enumerable:!1,value:function(){return"css-nil"}});var rE=typeof WeakMap<"u"?[CA,new WeakMap,new WeakMap,new WeakMap]:[CA];function HOt(t){return function(e){if(rE[e.length]){for(var n=rE[e.length],r=0;r<e.length-1;)n.has(e[r])||n.set(e[r],new WeakMap),n=n.get(e[r]),r++;if(n.has(e[e.length-1])){var i=n.get(e[r]);if(Tw[i.toString().substring(4)])return i}}var s=t(e);if(rE[e.length]){for(var a=0,o=rE[e.length];a<e.length-1;)o=o.get(e[a]),a++;try{o.set(e[a],s)}catch{}}return s}}var jOt=typeof WeakMap<"u"?HOt(dJ):dJ;function Di(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(e[0]&&e[0].length&&e[0].raw)throw new Error("you forgot to include glamor/babel in your babel plugins.");return e=(0,oh.default)(e),e?jOt(e):CA}Di.insert=function(t){var e={id:wS(t),css:t,type:"raw"};lI(e),Pl[e.id]||(Ja.insert(e.css),Pl[e.id]=oI?!0:[e.css])};qe.insertRule=Di.insert;Di.global=function(t,e){if(e=(0,oh.default)(e),e)return Di.insert(a5({selector:t,style:e}))};qe.insertGlobal=Di.global;function qOt(t){if(!Pl[t.id]){var e=Object.keys(t.keyframes).map(function(r){var i=bS.keyframes.transform({id:t.id,name:r,style:t.keyframes[r]});return i.name+"{"+(0,KV.createMarkupForStyles)(i.style)+"}"}).join(""),n=["-webkit-","-moz-","-o-",""].map(function(r){return"@"+r+"keyframes "+(t.name+"_"+t.id)+"{"+e+"}"});n.forEach(function(r){return Ja.insert(r)}),Pl[t.id]=oI?!0:n}}Di.keyframes=function(t,e){e||(e=t,t="animation"),e=(0,oh.default)(e)||{};var n={id:wS({name:t,kfs:e}),type:"keyframes",name:t,keyframes:e};return lI(n),qOt(n),t+"_"+n.id};Di.fontFace=function(t){t=(0,oh.default)(t);var e={id:wS(t),type:"font-face",font:t};return lI(e),XOt(e),t.fontFamily};qe.fontFace=Di.fontFace;qe.keyframes=Di.keyframes;function XOt(t){if(!Pl[t.id]){var e="@font-face{"+(0,KV.createMarkupForStyles)(t.font)+"}";Ja.insert(e),Pl[t.id]=oI?!0:[e]}}function YOt(t){(0,kOt.default)(Pl,t.reduce(function(e,n){return e[n]=!0,e},{}))}function KOt(){Pl=Ja.inserted={},Tw=Ja.registered={},LE={},Ja.flush(),Ja.inject()}qe.presets={mobile:"(min-width: 400px)",Mobile:"@media (min-width: 400px)",phablet:"(min-width: 550px)",Phablet:"@media (min-width: 550px)",tablet:"(min-width: 750px)",Tablet:"@media (min-width: 750px)",desktop:"(min-width: 1000px)",Desktop:"@media (min-width: 1000px)",hd:"(min-width: 1200px)",Hd:"@media (min-width: 1200px)"};var ZOt=qe.style=Di;function nW(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t?Di(yS({},t,n)):ZOt(n)}qe.$=nW;function JOt(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Di(yS({},t+" &",n))}qe.merge=Di;qe.compose=Di;function QOt(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Di(yS({},"@media "+t,n))}function Ot(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Di(yS({},t,n))}function eFt(t){return Ot(":active",t)}function tFt(t){return Ot(":any",t)}function nFt(t){return Ot(":checked",t)}function rFt(t){return Ot(":disabled",t)}function iFt(t){return Ot(":empty",t)}function sFt(t){return Ot(":enabled",t)}function aFt(t){return Ot(":default",t)}function oFt(t){return Ot(":first",t)}function lFt(t){return Ot(":first-child",t)}function uFt(t){return Ot(":first-of-type",t)}function cFt(t){return Ot(":fullscreen",t)}function fFt(t){return Ot(":focus",t)}function dFt(t){return Ot(":hover",t)}function hFt(t){return Ot(":indeterminate",t)}function pFt(t){return Ot(":in-range",t)}function mFt(t){return Ot(":invalid",t)}function gFt(t){return Ot(":last-child",t)}function vFt(t){return Ot(":last-of-type",t)}function yFt(t){return Ot(":left",t)}function bFt(t){return Ot(":link",t)}function xFt(t){return Ot(":only-child",t)}function wFt(t){return Ot(":only-of-type",t)}function _Ft(t){return Ot(":optional",t)}function SFt(t){return Ot(":out-of-range",t)}function CFt(t){return Ot(":read-only",t)}function EFt(t){return Ot(":read-write",t)}function TFt(t){return Ot(":required",t)}function kFt(t){return Ot(":right",t)}function AFt(t){return Ot(":root",t)}function MFt(t){return Ot(":scope",t)}function NFt(t){return Ot(":target",t)}function $Ft(t){return Ot(":valid",t)}function IFt(t){return Ot(":visited",t)}function DFt(t,e){return Ot(":dir("+t+")",e)}function RFt(t,e){return Ot(":lang("+t+")",e)}function OFt(t,e){var n=t.split(",").map(function(r){return r.trim()}).map(function(r){return":not("+r+")"});return n.length===1?Ot(":not("+t+")",e):nW(n.join(""),e)}function FFt(t,e){return Ot(":nth-child("+t+")",e)}function LFt(t,e){return Ot(":nth-last-child("+t+")",e)}function PFt(t,e){return Ot(":nth-last-of-type("+t+")",e)}function zFt(t,e){return Ot(":nth-of-type("+t+")",e)}function BFt(t){return Ot("::after",t)}function UFt(t){return Ot("::before",t)}function VFt(t){return Ot("::first-letter",t)}function WFt(t){return Ot("::first-line",t)}function GFt(t){return Ot("::selection",t)}function HFt(t){return Ot("::backdrop",t)}function jFt(t){return Di({"::placeholder":t})}function qFt(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e=(0,oh.default)(e),e?e.map(function(r){var i={label:[]};return Wh(i,{src:r}),SA(wS(i),_A(i)).join("")}).join(""):""}function XFt(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];e=(0,oh.default)(e);var r=e?e.map(function(i){tW(i);var s=Object.keys(i)[0],a=i[s];return s+'="'+(a||"")+'"'}).join(" "):"";return r}var Ef={},Pm={};Pm.hasClass=function(t){return/^\.\S+/.test(t)};Pm.isClassSelector=function(t){return/^\.[^.# ]+$/.test(t)};var sbe=/^\.?(.*)-([nsml]{1,2})$/;Pm.getAtRuleSize=function(t){return t.replace(sbe,"$2")};Pm.stripAtRuleSize=function(t){return t.replace(sbe,"$1")};Pm.getPseudos=function(t){return t.replace(/^[^:]*(.*)$/,"$1")};function YFt(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var abe=YFt;function KFt(){this.__data__=[],this.size=0}var ZFt=KFt;function JFt(t,e){return t===e||t!==t&&e!==e}var _S=JFt,QFt=_S;function eLt(t,e){for(var n=t.length;n--;)if(QFt(t[n][0],e))return n;return-1}var uI=eLt,tLt=uI,nLt=Array.prototype,rLt=nLt.splice;function iLt(t){var e=this.__data__,n=tLt(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():rLt.call(e,n,1),--this.size,!0}var sLt=iLt,aLt=uI;function oLt(t){var e=this.__data__,n=aLt(e,t);return n<0?void 0:e[n][1]}var lLt=oLt,uLt=uI;function cLt(t){return uLt(this.__data__,t)>-1}var fLt=cLt,dLt=uI;function hLt(t,e){var n=this.__data__,r=dLt(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var pLt=hLt,mLt=ZFt,gLt=sLt,vLt=lLt,yLt=fLt,bLt=pLt;function mb(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}mb.prototype.clear=mLt;mb.prototype.delete=gLt;mb.prototype.get=vLt;mb.prototype.has=yLt;mb.prototype.set=bLt;var cI=mb,xLt=cI;function wLt(){this.__data__=new xLt,this.size=0}var _Lt=wLt;function SLt(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var CLt=SLt;function ELt(t){return this.__data__.get(t)}var TLt=ELt;function kLt(t){return this.__data__.has(t)}var ALt=kLt,MLt=typeof Ft=="object"&&Ft&&Ft.Object===Object&&Ft,obe=MLt,NLt=obe,$Lt=typeof self=="object"&&self&&self.Object===Object&&self,ILt=NLt||$Lt||Function("return this")(),oc=ILt,DLt=oc,RLt=DLt.Symbol,SS=RLt,hJ=SS,lbe=Object.prototype,OLt=lbe.hasOwnProperty,FLt=lbe.toString,f1=hJ?hJ.toStringTag:void 0;function LLt(t){var e=OLt.call(t,f1),n=t[f1];try{t[f1]=void 0;var r=!0}catch{}var i=FLt.call(t);return r&&(e?t[f1]=n:delete t[f1]),i}var PLt=LLt,zLt=Object.prototype,BLt=zLt.toString;function ULt(t){return BLt.call(t)}var VLt=ULt,pJ=SS,WLt=PLt,GLt=VLt,HLt="[object Null]",jLt="[object Undefined]",mJ=pJ?pJ.toStringTag:void 0;function qLt(t){return t==null?t===void 0?jLt:HLt:mJ&&mJ in Object(t)?WLt(t):GLt(t)}var gb=qLt;function XLt(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Tf=XLt,YLt=gb,KLt=Tf,ZLt="[object AsyncFunction]",JLt="[object Function]",QLt="[object GeneratorFunction]",ePt="[object Proxy]";function tPt(t){if(!KLt(t))return!1;var e=YLt(t);return e==JLt||e==QLt||e==ZLt||e==ePt}var fI=tPt,nPt=oc,rPt=nPt["__core-js_shared__"],iPt=rPt,pO=iPt,gJ=function(){var t=/[^.]+$/.exec(pO&&pO.keys&&pO.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function sPt(t){return!!gJ&&gJ in t}var aPt=sPt,oPt=Function.prototype,lPt=oPt.toString;function uPt(t){if(t!=null){try{return lPt.call(t)}catch{}try{return t+""}catch{}}return""}var ube=uPt,cPt=fI,fPt=aPt,dPt=Tf,hPt=ube,pPt=/[\\^$.*+?()[\]{}|]/g,mPt=/^\[object .+?Constructor\]$/,gPt=Function.prototype,vPt=Object.prototype,yPt=gPt.toString,bPt=vPt.hasOwnProperty,xPt=RegExp("^"+yPt.call(bPt).replace(pPt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function wPt(t){if(!dPt(t)||fPt(t))return!1;var e=cPt(t)?xPt:mPt;return e.test(hPt(t))}var _Pt=wPt;function SPt(t,e){return t==null?void 0:t[e]}var CPt=SPt,EPt=_Pt,TPt=CPt;function kPt(t,e){var n=TPt(t,e);return EPt(n)?n:void 0}var zm=kPt,APt=zm,MPt=oc,NPt=APt(MPt,"Map"),rW=NPt,$Pt=zm,IPt=$Pt(Object,"create"),dI=IPt,vJ=dI;function DPt(){this.__data__=vJ?vJ(null):{},this.size=0}var RPt=DPt;function OPt(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var FPt=OPt,LPt=dI,PPt="__lodash_hash_undefined__",zPt=Object.prototype,BPt=zPt.hasOwnProperty;function UPt(t){var e=this.__data__;if(LPt){var n=e[t];return n===PPt?void 0:n}return BPt.call(e,t)?e[t]:void 0}var VPt=UPt,WPt=dI,GPt=Object.prototype,HPt=GPt.hasOwnProperty;function jPt(t){var e=this.__data__;return WPt?e[t]!==void 0:HPt.call(e,t)}var qPt=jPt,XPt=dI,YPt="__lodash_hash_undefined__";function KPt(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=XPt&&e===void 0?YPt:e,this}var ZPt=KPt,JPt=RPt,QPt=FPt,e5t=VPt,t5t=qPt,n5t=ZPt;function vb(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}vb.prototype.clear=JPt;vb.prototype.delete=QPt;vb.prototype.get=e5t;vb.prototype.has=t5t;vb.prototype.set=n5t;var r5t=vb,yJ=r5t,i5t=cI,s5t=rW;function a5t(){this.size=0,this.__data__={hash:new yJ,map:new(s5t||i5t),string:new yJ}}var o5t=a5t;function l5t(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var u5t=l5t,c5t=u5t;function f5t(t,e){var n=t.__data__;return c5t(e)?n[typeof e=="string"?"string":"hash"]:n.map}var hI=f5t,d5t=hI;function h5t(t){var e=d5t(this,t).delete(t);return this.size-=e?1:0,e}var p5t=h5t,m5t=hI;function g5t(t){return m5t(this,t).get(t)}var v5t=g5t,y5t=hI;function b5t(t){return y5t(this,t).has(t)}var x5t=b5t,w5t=hI;function _5t(t,e){var n=w5t(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var S5t=_5t,C5t=o5t,E5t=p5t,T5t=v5t,k5t=x5t,A5t=S5t;function yb(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}yb.prototype.clear=C5t;yb.prototype.delete=E5t;yb.prototype.get=T5t;yb.prototype.has=k5t;yb.prototype.set=A5t;var iW=yb,M5t=cI,N5t=rW,$5t=iW,I5t=200;function D5t(t,e){var n=this.__data__;if(n instanceof M5t){var r=n.__data__;if(!N5t||r.length<I5t-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new $5t(r)}return n.set(t,e),this.size=n.size,this}var R5t=D5t,O5t=cI,F5t=_Lt,L5t=CLt,P5t=TLt,z5t=ALt,B5t=R5t;function bb(t){var e=this.__data__=new O5t(t);this.size=e.size}bb.prototype.clear=F5t;bb.prototype.delete=L5t;bb.prototype.get=P5t;bb.prototype.has=z5t;bb.prototype.set=B5t;var sW=bb,U5t="__lodash_hash_undefined__";function V5t(t){return this.__data__.set(t,U5t),this}var W5t=V5t;function G5t(t){return this.__data__.has(t)}var H5t=G5t,j5t=iW,q5t=W5t,X5t=H5t;function EA(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new j5t;++e<n;)this.add(t[e])}EA.prototype.add=EA.prototype.push=q5t;EA.prototype.has=X5t;var Y5t=EA;function K5t(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Z5t=K5t;function J5t(t,e){return t.has(e)}var Q5t=J5t,e4t=Y5t,t4t=Z5t,n4t=Q5t,r4t=1,i4t=2;function s4t(t,e,n,r,i,s){var a=n&r4t,o=t.length,l=e.length;if(o!=l&&!(a&&l>o))return!1;var u=s.get(t),c=s.get(e);if(u&&c)return u==e&&c==t;var f=-1,d=!0,h=n&i4t?new e4t:void 0;for(s.set(t,e),s.set(e,t);++f<o;){var p=t[f],m=e[f];if(r)var g=a?r(m,p,f,e,t,s):r(p,m,f,t,e,s);if(g!==void 0){if(g)continue;d=!1;break}if(h){if(!t4t(e,function(v,y){if(!n4t(h,y)&&(p===v||i(p,v,n,r,s)))return h.push(y)})){d=!1;break}}else if(!(p===m||i(p,m,n,r,s))){d=!1;break}}return s.delete(t),s.delete(e),d}var cbe=s4t,a4t=oc,o4t=a4t.Uint8Array,fbe=o4t;function l4t(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var u4t=l4t;function c4t(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var f4t=c4t,bJ=SS,xJ=fbe,d4t=_S,h4t=cbe,p4t=u4t,m4t=f4t,g4t=1,v4t=2,y4t="[object Boolean]",b4t="[object Date]",x4t="[object Error]",w4t="[object Map]",_4t="[object Number]",S4t="[object RegExp]",C4t="[object Set]",E4t="[object String]",T4t="[object Symbol]",k4t="[object ArrayBuffer]",A4t="[object DataView]",wJ=bJ?bJ.prototype:void 0,mO=wJ?wJ.valueOf:void 0;function M4t(t,e,n,r,i,s,a){switch(n){case A4t:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case k4t:return!(t.byteLength!=e.byteLength||!s(new xJ(t),new xJ(e)));case y4t:case b4t:case _4t:return d4t(+t,+e);case x4t:return t.name==e.name&&t.message==e.message;case S4t:case E4t:return t==e+"";case w4t:var o=p4t;case C4t:var l=r&g4t;if(o||(o=m4t),t.size!=e.size&&!l)return!1;var u=a.get(t);if(u)return u==e;r|=v4t,a.set(t,e);var c=h4t(o(t),o(e),r,i,s,a);return a.delete(t),c;case T4t:if(mO)return mO.call(t)==mO.call(e)}return!1}var N4t=M4t;function $4t(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var dbe=$4t,I4t=Array.isArray,fl=I4t,D4t=dbe,R4t=fl;function O4t(t,e,n){var r=e(t);return R4t(t)?r:D4t(r,n(t))}var F4t=O4t;function L4t(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var a=t[n];e(a,n,t)&&(s[i++]=a)}return s}var P4t=L4t;function z4t(){return[]}var B4t=z4t,U4t=P4t,V4t=B4t,W4t=Object.prototype,G4t=W4t.propertyIsEnumerable,_J=Object.getOwnPropertySymbols,H4t=_J?function(t){return t==null?[]:(t=Object(t),U4t(_J(t),function(e){return G4t.call(t,e)}))}:V4t,j4t=H4t;function q4t(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var X4t=q4t;function Y4t(t){return t!=null&&typeof t=="object"}var Bm=Y4t,K4t=gb,Z4t=Bm,J4t="[object Arguments]";function Q4t(t){return Z4t(t)&&K4t(t)==J4t}var ezt=Q4t,SJ=ezt,tzt=Bm,hbe=Object.prototype,nzt=hbe.hasOwnProperty,rzt=hbe.propertyIsEnumerable,izt=SJ(function(){return arguments}())?SJ:function(t){return tzt(t)&&nzt.call(t,"callee")&&!rzt.call(t,"callee")},pI=izt,dv={},szt={get exports(){return dv},set exports(t){dv=t}};function azt(){return!1}var ozt=azt;(function(t,e){var n=oc,r=ozt,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===i,o=a?n.Buffer:void 0,l=o?o.isBuffer:void 0,u=l||r;t.exports=u})(szt,dv);var lzt=9007199254740991,uzt=/^(?:0|[1-9]\d*)$/;function czt(t,e){var n=typeof t;return e=e??lzt,!!e&&(n=="number"||n!="symbol"&&uzt.test(t))&&t>-1&&t%1==0&&t<e}var aW=czt,fzt=9007199254740991;function dzt(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=fzt}var oW=dzt,hzt=gb,pzt=oW,mzt=Bm,gzt="[object Arguments]",vzt="[object Array]",yzt="[object Boolean]",bzt="[object Date]",xzt="[object Error]",wzt="[object Function]",_zt="[object Map]",Szt="[object Number]",Czt="[object Object]",Ezt="[object RegExp]",Tzt="[object Set]",kzt="[object String]",Azt="[object WeakMap]",Mzt="[object ArrayBuffer]",Nzt="[object DataView]",$zt="[object Float32Array]",Izt="[object Float64Array]",Dzt="[object Int8Array]",Rzt="[object Int16Array]",Ozt="[object Int32Array]",Fzt="[object Uint8Array]",Lzt="[object Uint8ClampedArray]",Pzt="[object Uint16Array]",zzt="[object Uint32Array]",ir={};ir[$zt]=ir[Izt]=ir[Dzt]=ir[Rzt]=ir[Ozt]=ir[Fzt]=ir[Lzt]=ir[Pzt]=ir[zzt]=!0;ir[gzt]=ir[vzt]=ir[Mzt]=ir[yzt]=ir[Nzt]=ir[bzt]=ir[xzt]=ir[wzt]=ir[_zt]=ir[Szt]=ir[Czt]=ir[Ezt]=ir[Tzt]=ir[kzt]=ir[Azt]=!1;function Bzt(t){return mzt(t)&&pzt(t.length)&&!!ir[hzt(t)]}var Uzt=Bzt;function Vzt(t){return function(e){return t(e)}}var Wzt=Vzt,TA={},Gzt={get exports(){return TA},set exports(t){TA=t}};(function(t,e){var n=obe,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,a=s&&n.process,o=function(){try{var l=i&&i.require&&i.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();t.exports=o})(Gzt,TA);var Hzt=Uzt,jzt=Wzt,CJ=TA,EJ=CJ&&CJ.isTypedArray,qzt=EJ?jzt(EJ):Hzt,lW=qzt,Xzt=X4t,Yzt=pI,Kzt=fl,Zzt=dv,Jzt=aW,Qzt=lW,e6t=Object.prototype,t6t=e6t.hasOwnProperty;function n6t(t,e){var n=Kzt(t),r=!n&&Yzt(t),i=!n&&!r&&Zzt(t),s=!n&&!r&&!i&&Qzt(t),a=n||r||i||s,o=a?Xzt(t.length,String):[],l=o.length;for(var u in t)(e||t6t.call(t,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Jzt(u,l)))&&o.push(u);return o}var pbe=n6t,r6t=Object.prototype;function i6t(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||r6t;return t===n}var uW=i6t;function s6t(t,e){return function(n){return t(e(n))}}var mbe=s6t,a6t=mbe,o6t=a6t(Object.keys,Object),l6t=o6t,u6t=uW,c6t=l6t,f6t=Object.prototype,d6t=f6t.hasOwnProperty;function h6t(t){if(!u6t(t))return c6t(t);var e=[];for(var n in Object(t))d6t.call(t,n)&&n!="constructor"&&e.push(n);return e}var p6t=h6t,m6t=fI,g6t=oW;function v6t(t){return t!=null&&g6t(t.length)&&!m6t(t)}var xb=v6t,y6t=pbe,b6t=p6t,x6t=xb;function w6t(t){return x6t(t)?y6t(t):b6t(t)}var cW=w6t,_6t=F4t,S6t=j4t,C6t=cW;function E6t(t){return _6t(t,C6t,S6t)}var T6t=E6t,TJ=T6t,k6t=1,A6t=Object.prototype,M6t=A6t.hasOwnProperty;function N6t(t,e,n,r,i,s){var a=n&k6t,o=TJ(t),l=o.length,u=TJ(e),c=u.length;if(l!=c&&!a)return!1;for(var f=l;f--;){var d=o[f];if(!(a?d in e:M6t.call(e,d)))return!1}var h=s.get(t),p=s.get(e);if(h&&p)return h==e&&p==t;var m=!0;s.set(t,e),s.set(e,t);for(var g=a;++f<l;){d=o[f];var v=t[d],y=e[d];if(r)var b=a?r(y,v,d,e,t,s):r(v,y,d,t,e,s);if(!(b===void 0?v===y||i(v,y,n,r,s):b)){m=!1;break}g||(g=d=="constructor")}if(m&&!g){var x=t.constructor,w=e.constructor;x!=w&&"constructor"in t&&"constructor"in e&&!(typeof x=="function"&&x instanceof x&&typeof w=="function"&&w instanceof w)&&(m=!1)}return s.delete(t),s.delete(e),m}var $6t=N6t,I6t=zm,D6t=oc,R6t=I6t(D6t,"DataView"),O6t=R6t,F6t=zm,L6t=oc,P6t=F6t(L6t,"Promise"),z6t=P6t,B6t=zm,U6t=oc,V6t=B6t(U6t,"Set"),W6t=V6t,G6t=zm,H6t=oc,j6t=G6t(H6t,"WeakMap"),q6t=j6t,o5=O6t,l5=rW,u5=z6t,c5=W6t,f5=q6t,gbe=gb,wb=ube,kJ="[object Map]",X6t="[object Object]",AJ="[object Promise]",MJ="[object Set]",NJ="[object WeakMap]",$J="[object DataView]",Y6t=wb(o5),K6t=wb(l5),Z6t=wb(u5),J6t=wb(c5),Q6t=wb(f5),Oh=gbe;(o5&&Oh(new o5(new ArrayBuffer(1)))!=$J||l5&&Oh(new l5)!=kJ||u5&&Oh(u5.resolve())!=AJ||c5&&Oh(new c5)!=MJ||f5&&Oh(new f5)!=NJ)&&(Oh=function(t){var e=gbe(t),n=e==X6t?t.constructor:void 0,r=n?wb(n):"";if(r)switch(r){case Y6t:return $J;case K6t:return kJ;case Z6t:return AJ;case J6t:return MJ;case Q6t:return NJ}return e});var eBt=Oh,gO=sW,tBt=cbe,nBt=N4t,rBt=$6t,IJ=eBt,DJ=fl,RJ=dv,iBt=lW,sBt=1,OJ="[object Arguments]",FJ="[object Array]",iE="[object Object]",aBt=Object.prototype,LJ=aBt.hasOwnProperty;function oBt(t,e,n,r,i,s){var a=DJ(t),o=DJ(e),l=a?FJ:IJ(t),u=o?FJ:IJ(e);l=l==OJ?iE:l,u=u==OJ?iE:u;var c=l==iE,f=u==iE,d=l==u;if(d&&RJ(t)){if(!RJ(e))return!1;a=!0,c=!1}if(d&&!c)return s||(s=new gO),a||iBt(t)?tBt(t,e,n,r,i,s):nBt(t,e,l,n,r,i,s);if(!(n&sBt)){var h=c&&LJ.call(t,"__wrapped__"),p=f&&LJ.call(e,"__wrapped__");if(h||p){var m=h?t.value():t,g=p?e.value():e;return s||(s=new gO),i(m,g,n,r,s)}}return d?(s||(s=new gO),rBt(t,e,n,r,i,s)):!1}var lBt=oBt,uBt=lBt,PJ=Bm;function vbe(t,e,n,r,i){return t===e?!0:t==null||e==null||!PJ(t)&&!PJ(e)?t!==t&&e!==e:uBt(t,e,n,r,vbe,i)}var ybe=vbe,cBt=sW,fBt=ybe,dBt=1,hBt=2;function pBt(t,e,n,r){var i=n.length,s=i,a=!r;if(t==null)return!s;for(t=Object(t);i--;){var o=n[i];if(a&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<s;){o=n[i];var l=o[0],u=t[l],c=o[1];if(a&&o[2]){if(u===void 0&&!(l in t))return!1}else{var f=new cBt;if(r)var d=r(u,c,l,t,e,f);if(!(d===void 0?fBt(c,u,dBt|hBt,r,f):d))return!1}}return!0}var mBt=pBt,gBt=Tf;function vBt(t){return t===t&&!gBt(t)}var bbe=vBt,yBt=bbe,bBt=cW;function xBt(t){for(var e=bBt(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,yBt(i)]}return e}var wBt=xBt;function _Bt(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var xbe=_Bt,SBt=mBt,CBt=wBt,EBt=xbe;function TBt(t){var e=CBt(t);return e.length==1&&e[0][2]?EBt(e[0][0],e[0][1]):function(n){return n===t||SBt(n,t,e)}}var kBt=TBt,ABt=gb,MBt=Bm,NBt="[object Symbol]";function $Bt(t){return typeof t=="symbol"||MBt(t)&&ABt(t)==NBt}var fW=$Bt,IBt=fl,DBt=fW,RBt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,OBt=/^\w*$/;function FBt(t,e){if(IBt(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||DBt(t)?!0:OBt.test(t)||!RBt.test(t)||e!=null&&t in Object(e)}var dW=FBt,wbe=iW,LBt="Expected a function";function hW(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(LBt);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var a=t.apply(this,r);return n.cache=s.set(i,a)||s,a};return n.cache=new(hW.Cache||wbe),n}hW.Cache=wbe;var PBt=hW,zBt=PBt,BBt=500;function UBt(t){var e=zBt(t,function(r){return n.size===BBt&&n.clear(),r}),n=e.cache;return e}var VBt=UBt,WBt=VBt,GBt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,HBt=/\\(\\)?/g,jBt=WBt(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(GBt,function(n,r,i,s){e.push(i?s.replace(HBt,"$1"):r||n)}),e}),qBt=jBt,zJ=SS,XBt=abe,YBt=fl,KBt=fW,ZBt=1/0,BJ=zJ?zJ.prototype:void 0,UJ=BJ?BJ.toString:void 0;function _be(t){if(typeof t=="string")return t;if(YBt(t))return XBt(t,_be)+"";if(KBt(t))return UJ?UJ.call(t):"";var e=t+"";return e=="0"&&1/t==-ZBt?"-0":e}var JBt=_be,QBt=JBt;function e8t(t){return t==null?"":QBt(t)}var pW=e8t,t8t=fl,n8t=dW,r8t=qBt,i8t=pW;function s8t(t,e){return t8t(t)?t:n8t(t,e)?[t]:r8t(i8t(t))}var Sbe=s8t,a8t=fW,o8t=1/0;function l8t(t){if(typeof t=="string"||a8t(t))return t;var e=t+"";return e=="0"&&1/t==-o8t?"-0":e}var mI=l8t,u8t=Sbe,c8t=mI;function f8t(t,e){e=u8t(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[c8t(e[n++])];return n&&n==r?t:void 0}var Cbe=f8t,d8t=Cbe;function h8t(t,e,n){var r=t==null?void 0:d8t(t,e);return r===void 0?n:r}var p8t=h8t;function m8t(t,e){return t!=null&&e in Object(t)}var g8t=m8t,v8t=Sbe,y8t=pI,b8t=fl,x8t=aW,w8t=oW,_8t=mI;function S8t(t,e,n){e=v8t(e,t);for(var r=-1,i=e.length,s=!1;++r<i;){var a=_8t(e[r]);if(!(s=t!=null&&n(t,a)))break;t=t[a]}return s||++r!=i?s:(i=t==null?0:t.length,!!i&&w8t(i)&&x8t(a,i)&&(b8t(t)||y8t(t)))}var C8t=S8t,E8t=g8t,T8t=C8t;function k8t(t,e){return t!=null&&T8t(t,e,E8t)}var A8t=k8t,M8t=ybe,N8t=p8t,$8t=A8t,I8t=dW,D8t=bbe,R8t=xbe,O8t=mI,F8t=1,L8t=2;function P8t(t,e){return I8t(t)&&D8t(e)?R8t(O8t(t),e):function(n){var r=N8t(n,t);return r===void 0&&r===e?$8t(n,t):M8t(e,r,F8t|L8t)}}var z8t=P8t;function B8t(t){return t}var mW=B8t;function U8t(t){return function(e){return e==null?void 0:e[t]}}var V8t=U8t,W8t=Cbe;function G8t(t){return function(e){return W8t(e,t)}}var H8t=G8t,j8t=V8t,q8t=H8t,X8t=dW,Y8t=mI;function K8t(t){return X8t(t)?j8t(Y8t(t)):q8t(t)}var Z8t=K8t,J8t=kBt,Q8t=z8t,e7t=mW,t7t=fl,n7t=Z8t;function r7t(t){return typeof t=="function"?t:t==null?e7t:typeof t=="object"?t7t(t)?Q8t(t[0],t[1]):J8t(t):n7t(t)}var Ebe=r7t;function i7t(t){return function(e,n,r){for(var i=-1,s=Object(e),a=r(e),o=a.length;o--;){var l=a[t?o:++i];if(n(s[l],l,s)===!1)break}return e}}var s7t=i7t,a7t=s7t,o7t=a7t(),Tbe=o7t,l7t=Tbe,u7t=cW;function c7t(t,e){return t&&l7t(t,e,u7t)}var f7t=c7t,d7t=xb;function h7t(t,e){return function(n,r){if(n==null)return n;if(!d7t(n))return t(n,r);for(var i=n.length,s=e?i:-1,a=Object(n);(e?s--:++s<i)&&r(a[s],s,a)!==!1;);return n}}var p7t=h7t,m7t=f7t,g7t=p7t,v7t=g7t(m7t),kbe=v7t,y7t=kbe,b7t=xb;function x7t(t,e){var n=-1,r=b7t(t)?Array(t.length):[];return y7t(t,function(i,s,a){r[++n]=e(i,s,a)}),r}var w7t=x7t,_7t=abe,S7t=Ebe,C7t=w7t,E7t=fl;function T7t(t,e){var n=E7t(t)?_7t:C7t;return n(t,S7t(e))}var Abe=T7t,k7t=zm,A7t=function(){try{var t=k7t(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Mbe=A7t,VJ=Mbe;function M7t(t,e,n){e=="__proto__"&&VJ?VJ(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var gW=M7t,N7t=gW,$7t=_S;function I7t(t,e,n){(n!==void 0&&!$7t(t[e],n)||n===void 0&&!(e in t))&&N7t(t,e,n)}var Nbe=I7t,kA={},D7t={get exports(){return kA},set exports(t){kA=t}};(function(t,e){var n=oc,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,a=s?n.Buffer:void 0,o=a?a.allocUnsafe:void 0;function l(u,c){if(c)return u.slice();var f=u.length,d=o?o(f):new u.constructor(f);return u.copy(d),d}t.exports=l})(D7t,kA);var WJ=fbe;function R7t(t){var e=new t.constructor(t.byteLength);return new WJ(e).set(new WJ(t)),e}var O7t=R7t,F7t=O7t;function L7t(t,e){var n=e?F7t(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var P7t=L7t;function z7t(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var B7t=z7t,U7t=Tf,GJ=Object.create,V7t=function(){function t(){}return function(e){if(!U7t(e))return{};if(GJ)return GJ(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),W7t=V7t,G7t=mbe,H7t=G7t(Object.getPrototypeOf,Object),$be=H7t,j7t=W7t,q7t=$be,X7t=uW;function Y7t(t){return typeof t.constructor=="function"&&!X7t(t)?j7t(q7t(t)):{}}var K7t=Y7t,Z7t=xb,J7t=Bm;function Q7t(t){return J7t(t)&&Z7t(t)}var e9t=Q7t,t9t=gb,n9t=$be,r9t=Bm,i9t="[object Object]",s9t=Function.prototype,a9t=Object.prototype,Ibe=s9t.toString,o9t=a9t.hasOwnProperty,l9t=Ibe.call(Object);function u9t(t){if(!r9t(t)||t9t(t)!=i9t)return!1;var e=n9t(t);if(e===null)return!0;var n=o9t.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Ibe.call(n)==l9t}var c9t=u9t;function f9t(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var Dbe=f9t,d9t=gW,h9t=_S,p9t=Object.prototype,m9t=p9t.hasOwnProperty;function g9t(t,e,n){var r=t[e];(!(m9t.call(t,e)&&h9t(r,n))||n===void 0&&!(e in t))&&d9t(t,e,n)}var v9t=g9t,y9t=v9t,b9t=gW;function x9t(t,e,n,r){var i=!n;n||(n={});for(var s=-1,a=e.length;++s<a;){var o=e[s],l=r?r(n[o],t[o],o,n,t):void 0;l===void 0&&(l=t[o]),i?b9t(n,o,l):y9t(n,o,l)}return n}var w9t=x9t;function _9t(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var S9t=_9t,C9t=Tf,E9t=uW,T9t=S9t,k9t=Object.prototype,A9t=k9t.hasOwnProperty;function M9t(t){if(!C9t(t))return T9t(t);var e=E9t(t),n=[];for(var r in t)r=="constructor"&&(e||!A9t.call(t,r))||n.push(r);return n}var N9t=M9t,$9t=pbe,I9t=N9t,D9t=xb;function R9t(t){return D9t(t)?$9t(t,!0):I9t(t)}var Rbe=R9t,O9t=w9t,F9t=Rbe;function L9t(t){return O9t(t,F9t(t))}var P9t=L9t,HJ=Nbe,z9t=kA,B9t=P7t,U9t=B7t,V9t=K7t,jJ=pI,qJ=fl,W9t=e9t,G9t=dv,H9t=fI,j9t=Tf,q9t=c9t,X9t=lW,XJ=Dbe,Y9t=P9t;function K9t(t,e,n,r,i,s,a){var o=XJ(t,n),l=XJ(e,n),u=a.get(l);if(u){HJ(t,n,u);return}var c=s?s(o,l,n+"",t,e,a):void 0,f=c===void 0;if(f){var d=qJ(l),h=!d&&G9t(l),p=!d&&!h&&X9t(l);c=l,d||h||p?qJ(o)?c=o:W9t(o)?c=U9t(o):h?(f=!1,c=z9t(l,!0)):p?(f=!1,c=B9t(l,!0)):c=[]:q9t(l)||jJ(l)?(c=o,jJ(o)?c=Y9t(o):(!j9t(o)||H9t(o))&&(c=V9t(l))):f=!1}f&&(a.set(l,c),i(c,l,r,s,a),a.delete(l)),HJ(t,n,c)}var Z9t=K9t,J9t=sW,Q9t=Nbe,eUt=Tbe,tUt=Z9t,nUt=Tf,rUt=Rbe,iUt=Dbe;function Obe(t,e,n,r,i){t!==e&&eUt(e,function(s,a){if(i||(i=new J9t),nUt(s))tUt(t,e,a,n,Obe,r,i);else{var o=r?r(iUt(t,a),s,a+"",t,e,i):void 0;o===void 0&&(o=s),Q9t(t,a,o)}},rUt)}var sUt=Obe;function aUt(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var oUt=aUt,lUt=oUt,YJ=Math.max;function uUt(t,e,n){return e=YJ(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=YJ(r.length-e,0),a=Array(s);++i<s;)a[i]=r[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=r[i];return o[e]=n(a),lUt(t,this,o)}}var cUt=uUt;function fUt(t){return function(){return t}}var dUt=fUt,hUt=dUt,KJ=Mbe,pUt=mW,mUt=KJ?function(t,e){return KJ(t,"toString",{configurable:!0,enumerable:!1,value:hUt(e),writable:!0})}:pUt,gUt=mUt,vUt=800,yUt=16,bUt=Date.now;function xUt(t){var e=0,n=0;return function(){var r=bUt(),i=yUt-(r-n);if(n=r,i>0){if(++e>=vUt)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var wUt=xUt,_Ut=gUt,SUt=wUt,CUt=SUt(_Ut),EUt=CUt,TUt=mW,kUt=cUt,AUt=EUt;function MUt(t,e){return AUt(kUt(t,e,TUt),t+"")}var NUt=MUt,$Ut=_S,IUt=xb,DUt=aW,RUt=Tf;function OUt(t,e,n){if(!RUt(n))return!1;var r=typeof e;return(r=="number"?IUt(n)&&DUt(e,n.length):r=="string"&&e in n)?$Ut(n[e],t):!1}var FUt=OUt,LUt=NUt,PUt=FUt;function zUt(t){return LUt(function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,a&&PUt(n[0],n[1],a)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var o=n[r];o&&t(e,o,r,s)}return e})}var BUt=zUt,UUt=sUt,VUt=BUt,WUt=VUt(function(t,e,n){UUt(t,e,n)}),GUt=WUt,Fbe={"border-box":{boxSizing:"border-box"},"aspect-ratio":{height:"0",position:"relative"},"aspect-ratio--16x9":{paddingBottom:"56.25%"},"aspect-ratio--9x16":{paddingBottom:"177.77%"},"aspect-ratio--4x3":{paddingBottom:"75%"},"aspect-ratio--3x4":{paddingBottom:"133.33%"},"aspect-ratio--6x4":{paddingBottom:"66.6%"},"aspect-ratio--4x6":{paddingBottom:"150%"},"aspect-ratio--8x5":{paddingBottom:"62.5%"},"aspect-ratio--5x8":{paddingBottom:"160%"},"aspect-ratio--7x5":{paddingBottom:"71.42%"},"aspect-ratio--5x7":{paddingBottom:"140%"},"aspect-ratio--1x1":{paddingBottom:"100%"},"aspect-ratio--object":{position:"absolute",top:"0",right:"0",bottom:"0",left:"0",width:"100%",height:"100%",zIndex:"100"},cover:{backgroundSize:"cover"},contain:{backgroundSize:"contain"},"bg-center":{backgroundRepeat:"no-repeat",backgroundPosition:"center center"},"bg-top":{backgroundRepeat:"no-repeat",backgroundPosition:"top center"},"bg-right":{backgroundRepeat:"no-repeat",backgroundPosition:"center right"},"bg-bottom":{backgroundRepeat:"no-repeat",backgroundPosition:"bottom center"},"bg-left":{backgroundRepeat:"no-repeat",backgroundPosition:"center left"},outline:{outline:"1px solid"},"outline-transparent":{outline:"1px solid transparent"},"outline-0":{outline:"0"},ba:{borderStyle:"solid",borderWidth:"1px"},bt:{borderTopStyle:"solid",borderTopWidth:"1px"},br:{borderRightStyle:"solid",borderRightWidth:"1px"},bb:{borderBottomStyle:"solid",borderBottomWidth:"1px"},bl:{borderLeftStyle:"solid",borderLeftWidth:"1px"},bn:{borderStyle:"none",borderWidth:"0"},"b--black":{borderColor:"#000"},"b--near-black":{borderColor:"#111"},"b--dark-gray":{borderColor:"#333"},"b--mid-gray":{borderColor:"#555"},"b--gray":{borderColor:"#777"},"b--silver":{borderColor:"#999"},"b--light-silver":{borderColor:"#aaa"},"b--moon-gray":{borderColor:"#ccc"},"b--light-gray":{borderColor:"#eee"},"b--near-white":{borderColor:"#f4f4f4"},"b--white":{borderColor:"#fff"},"b--white-90":{borderColor:"rgba( 255, 255, 255, .9 )"},"b--white-80":{borderColor:"rgba( 255, 255, 255, .8 )"},"b--white-70":{borderColor:"rgba( 255, 255, 255, .7 )"},"b--white-60":{borderColor:"rgba( 255, 255, 255, .6 )"},"b--white-50":{borderColor:"rgba( 255, 255, 255, .5 )"},"b--white-40":{borderColor:"rgba( 255, 255, 255, .4 )"},"b--white-30":{borderColor:"rgba( 255, 255, 255, .3 )"},"b--white-20":{borderColor:"rgba( 255, 255, 255, .2 )"},"b--white-10":{borderColor:"rgba( 255, 255, 255, .1 )"},"b--white-05":{borderColor:"rgba( 255, 255, 255, .05 )"},"b--white-025":{borderColor:"rgba( 255, 255, 255, .025 )"},"b--white-0125":{borderColor:"rgba( 255, 255, 255, .0125 )"},"b--black-90":{borderColor:"rgba( 0, 0, 0, .9 )"},"b--black-80":{borderColor:"rgba( 0, 0, 0, .8 )"},"b--black-70":{borderColor:"rgba( 0, 0, 0, .7 )"},"b--black-60":{borderColor:"rgba( 0, 0, 0, .6 )"},"b--black-50":{borderColor:"rgba( 0, 0, 0, .5 )"},"b--black-40":{borderColor:"rgba( 0, 0, 0, .4 )"},"b--black-30":{borderColor:"rgba( 0, 0, 0, .3 )"},"b--black-20":{borderColor:"rgba( 0, 0, 0, .2 )"},"b--black-10":{borderColor:"rgba( 0, 0, 0, .1 )"},"b--black-05":{borderColor:"rgba( 0, 0, 0, .05 )"},"b--black-025":{borderColor:"rgba( 0, 0, 0, .025 )"},"b--black-0125":{borderColor:"rgba( 0, 0, 0, .0125 )"},"b--dark-red":{borderColor:"#e7040f"},"b--red":{borderColor:"#ff4136"},"b--light-red":{borderColor:"#ff725c"},"b--orange":{borderColor:"#ff6300"},"b--gold":{borderColor:"#ffb700"},"b--yellow":{borderColor:"#ffd700"},"b--light-yellow":{borderColor:"#fbf1a9"},"b--purple":{borderColor:"#5e2ca5"},"b--light-purple":{borderColor:"#a463f2"},"b--dark-pink":{borderColor:"#d5008f"},"b--hot-pink":{borderColor:"#ff41b4"},"b--pink":{borderColor:"#ff80cc"},"b--light-pink":{borderColor:"#ffa3d7"},"b--dark-green":{borderColor:"#137752"},"b--green":{borderColor:"#19a974"},"b--light-green":{borderColor:"#9eebcf"},"b--navy":{borderColor:"#001b44"},"b--dark-blue":{borderColor:"#00449e"},"b--blue":{borderColor:"#357edd"},"b--light-blue":{borderColor:"#96ccff"},"b--lightest-blue":{borderColor:"#cdecff"},"b--washed-blue":{borderColor:"#f6fffe"},"b--washed-green":{borderColor:"#e8fdf5"},"b--washed-yellow":{borderColor:"#fffceb"},"b--washed-red":{borderColor:"#ffdfdf"},"b--transparent":{borderColor:"transparent"},"b--inherit":{borderColor:"inherit"},br0:{borderRadius:"0"},br1:{borderRadius:".125rem"},br2:{borderRadius:".25rem"},br3:{borderRadius:".5rem"},br4:{borderRadius:"1rem"},"br-100":{borderRadius:"100%"},"br-pill":{borderRadius:"9999px"},"br--bottom":{borderTopLeftRadius:"0",borderTopRightRadius:"0"},"br--top":{borderBottomLeftRadius:"0",borderBottomRightRadius:"0"},"br--right":{borderTopLeftRadius:"0",borderBottomLeftRadius:"0"},"br--left":{borderTopRightRadius:"0",borderBottomRightRadius:"0"},"b--dotted":{borderStyle:"dotted"},"b--dashed":{borderStyle:"dashed"},"b--solid":{borderStyle:"solid"},"b--none":{borderStyle:"none"},bw0:{borderWidth:"0"},bw1:{borderWidth:".125rem"},bw2:{borderWidth:".25rem"},bw3:{borderWidth:".5rem"},bw4:{borderWidth:"1rem"},bw5:{borderWidth:"2rem"},"bt-0":{borderTopWidth:"0"},"br-0":{borderRightWidth:"0"},"bb-0":{borderBottomWidth:"0"},"bl-0":{borderLeftWidth:"0"},"shadow-1":{boxShadow:"0 0 4px 2px rgba( 0, 0, 0, .2 )"},"shadow-2":{boxShadow:"0 0 8px 2px rgba( 0, 0, 0, .2 )"},"shadow-3":{boxShadow:"2px 2px 4px 2px rgba( 0, 0, 0, .2 )"},"shadow-4":{boxShadow:"2px 2px 8px 0 rgba( 0, 0, 0, .2 )"},"shadow-5":{boxShadow:"4px 4px 8px 0 rgba( 0, 0, 0, .2 )"},pre:{whiteSpace:"pre",overflowX:"auto",overflowY:"hidden",overflow:"scroll"},"top-0":{top:"0"},"right-0":{right:"0"},"bottom-0":{bottom:"0"},"left-0":{left:"0"},"top-1":{top:"1rem"},"right-1":{right:"1rem"},"bottom-1":{bottom:"1rem"},"left-1":{left:"1rem"},"top-2":{top:"2rem"},"right-2":{right:"2rem"},"bottom-2":{bottom:"2rem"},"left-2":{left:"2rem"},"top--1":{top:"-1rem"},"right--1":{right:"-1rem"},"bottom--1":{bottom:"-1rem"},"left--1":{left:"-1rem"},"top--2":{top:"-2rem"},"right--2":{right:"-2rem"},"bottom--2":{bottom:"-2rem"},"left--2":{left:"-2rem"},"absolute--fill":{top:"0",right:"0",bottom:"0",left:"0"},cf:{zoom:"1",":after":{content:'" "',display:"table"},":before":{content:'" "',display:"table"}},cl:{clear:"left"},cr:{clear:"right"},cb:{clear:"both"},cn:{clear:"none"},dn:{display:"none"},di:{display:"inline"},db:{display:"block"},dib:{display:"inline-block"},dit:{display:"inline-table"},dt:{display:"table"},dtc:{display:"table-cell"},"dt-row":{display:"table-row"},"dt-row-group":{display:"table-row-group"},"dt-column":{display:"table-column"},"dt-column-group":{display:"table-column-group"},"dt--fixed":{tableLayout:"fixed",width:"100%"},flex:{display:"flex"},"inline-flex":{display:"inline-flex"},"flex-auto":{webkitBoxFlex:"1",msFlex:"1 1 auto",flex:"1 1 auto",minWidth:"0",minHeight:"0"},"flex-none":{webkitBoxFlex:"0",msFlex:"none",flex:"none"},"flex-column":{webkitBoxOrient:"vertical",webkitBoxDirection:"normal",msFlexDirection:"column",flexDirection:"column"},"flex-row":{webkitBoxOrient:"horizontal",webkitBoxDirection:"normal",msFlexDirection:"row",flexDirection:"row"},"flex-wrap":{msFlexWrap:"wrap",flexWrap:"wrap"},"flex-nowrap":{msFlexWrap:"nowrap",flexWrap:"nowrap"},"flex-wrap-reverse":{msFlexWrap:"wrap-reverse",flexWrap:"wrap-reverse"},"flex-column-reverse":{webkitBoxOrient:"vertical",webkitBoxDirection:"reverse",msFlexDirection:"column-reverse",flexDirection:"column-reverse"},"flex-row-reverse":{webkitBoxOrient:"horizontal",webkitBoxDirection:"reverse",msFlexDirection:"row-reverse",flexDirection:"row-reverse"},"items-start":{webkitBoxAlign:"start",msFlexAlign:"start",alignItems:"flex-start"},"items-end":{webkitBoxAlign:"end",msFlexAlign:"end",alignItems:"flex-end"},"items-center":{webkitBoxAlign:"center",msFlexAlign:"center",alignItems:"center"},"items-baseline":{webkitBoxAlign:"baseline",msFlexAlign:"baseline",alignItems:"baseline"},"items-stretch":{webkitBoxAlign:"stretch",msFlexAlign:"stretch",alignItems:"stretch"},"self-start":{msFlexItemAlign:"start",alignSelf:"flex-start"},"self-end":{msFlexItemAlign:"end",alignSelf:"flex-end"},"self-center":{msFlexItemAlign:"center",msGridRowAlign:"center",alignSelf:"center"},"self-baseline":{msFlexItemAlign:"baseline",alignSelf:"baseline"},"self-stretch":{msFlexItemAlign:"stretch",msGridRowAlign:"stretch",alignSelf:"stretch"},"justify-start":{webkitBoxPack:"start",msFlexPack:"start",justifyContent:"flex-start"},"justify-end":{webkitBoxPack:"end",msFlexPack:"end",justifyContent:"flex-end"},"justify-center":{webkitBoxPack:"center",msFlexPack:"center",justifyContent:"center"},"justify-between":{webkitBoxPack:"justify",msFlexPack:"justify",justifyContent:"space-between"},"justify-around":{msFlexPack:"distribute",justifyContent:"space-around"},"content-start":{msFlexLinePack:"start",alignContent:"flex-start"},"content-end":{msFlexLinePack:"end",alignContent:"flex-end"},"content-center":{msFlexLinePack:"center",alignContent:"center"},"content-between":{msFlexLinePack:"justify",alignContent:"space-between"},"content-around":{msFlexLinePack:"distribute",alignContent:"space-around"},"content-stretch":{msFlexLinePack:"stretch",alignContent:"stretch"},"order-0":{webkitBoxOrdinalGroup:"1",msFlexOrder:"0",order:"0"},"order-1":{webkitBoxOrdinalGroup:"2",msFlexOrder:"1",order:"1"},"order-2":{webkitBoxOrdinalGroup:"3",msFlexOrder:"2",order:"2"},"order-3":{webkitBoxOrdinalGroup:"4",msFlexOrder:"3",order:"3"},"order-4":{webkitBoxOrdinalGroup:"5",msFlexOrder:"4",order:"4"},"order-5":{webkitBoxOrdinalGroup:"6",msFlexOrder:"5",order:"5"},"order-6":{webkitBoxOrdinalGroup:"7",msFlexOrder:"6",order:"6"},"order-7":{webkitBoxOrdinalGroup:"8",msFlexOrder:"7",order:"7"},"order-8":{webkitBoxOrdinalGroup:"9",msFlexOrder:"8",order:"8"},"order-last":{webkitBoxOrdinalGroup:"100000",msFlexOrder:"99999",order:"99999"},fl:{float:"left",display:"inline"},fr:{float:"right",display:"inline"},fn:{float:"none"},"sans-serif":{fontFamily:"-apple-system, BlinkMacSystemFont, 'avenir next', avenir, 'helvetica neue', helvetica, ubuntu, roboto, noto, 'segoe ui', arial, sans-serif"},serif:{fontFamily:"georgia, times, serif"},"system-sans-serif":{fontFamily:"sans-serif"},"system-serif":{fontFamily:"serif"},code:{fontFamily:"Consolas, monaco, monospace"},courier:{fontFamily:"'Courier Next', courier, monospace"},helvetica:{fontFamily:"'helvetica neue', helvetica, sans-serif"},avenir:{fontFamily:"'avenir next', avenir, sans-serif"},athelas:{fontFamily:"athelas, georgia, serif"},georgia:{fontFamily:"georgia, serif"},times:{fontFamily:"times, serif"},bodoni:{fontFamily:'"Bodoni MT", serif'},calisto:{fontFamily:'"Calisto MT", serif'},garamond:{fontFamily:"garamond, serif"},baskerville:{fontFamily:"baskerville, serif"},i:{fontStyle:"italic"},"fs-normal":{fontStyle:"normal"},normal:{fontWeight:"normal"},b:{fontWeight:"bold"},fw1:{fontWeight:"100"},fw2:{fontWeight:"200"},fw3:{fontWeight:"300"},fw4:{fontWeight:"400"},fw5:{fontWeight:"500"},fw6:{fontWeight:"600"},fw7:{fontWeight:"700"},fw8:{fontWeight:"800"},fw9:{fontWeight:"900"},"input-reset":{"::-moz-focus-inner":{border:"0",padding:"0"},webkitAppearance:"none",mozAppearance:"none"},"button-reset":{"::-moz-focus-inner":{border:"0",padding:"0"}},h1:{height:"1rem"},h2:{height:"2rem"},h3:{height:"4rem"},h4:{height:"8rem"},h5:{height:"16rem"},"h-25":{height:"25%"},"h-50":{height:"50%"},"h-75":{height:"75%"},"h-100":{height:"100%"},"min-h-100":{minHeight:"100%"},"vh-25":{height:"25vh"},"vh-50":{height:"50vh"},"vh-75":{height:"75vh"},"vh-100":{height:"100vh"},"min-vh-100":{minHeight:"100vh"},"h-auto":{height:"auto"},"h-inherit":{height:"inherit"},tracked:{letterSpacing:".1em"},"tracked-tight":{letterSpacing:"-.05em"},"tracked-mega":{letterSpacing:".25em"},"lh-solid":{lineHeight:"1"},"lh-title":{lineHeight:"1.25"},"lh-copy":{lineHeight:"1.5"},link:{":focus":{transition:"color .15s ease-in",outline:"1px dotted currentColor"},":active":{transition:"color .15s ease-in"},":hover":{transition:"color .15s ease-in"},":visited":{transition:"color .15s ease-in"},":link":{transition:"color .15s ease-in"},textDecoration:"none",transition:"color .15s ease-in"},list:{listStyleType:"none"},"mw-100":{maxWidth:"100%"},mw1:{maxWidth:"1rem"},mw2:{maxWidth:"2rem"},mw3:{maxWidth:"4rem"},mw4:{maxWidth:"8rem"},mw5:{maxWidth:"16rem"},mw6:{maxWidth:"32rem"},mw7:{maxWidth:"48rem"},mw8:{maxWidth:"64rem"},mw9:{maxWidth:"96rem"},"mw-none":{maxWidth:"none"},w1:{width:"1rem"},w2:{width:"2rem"},w3:{width:"4rem"},w4:{width:"8rem"},w5:{width:"16rem"},"w-10":{width:"10%"},"w-20":{width:"20%"},"w-25":{width:"25%"},"w-30":{width:"30%"},"w-33":{width:"33%"},"w-34":{width:"34%"},"w-40":{width:"40%"},"w-50":{width:"50%"},"w-60":{width:"60%"},"w-70":{width:"70%"},"w-75":{width:"75%"},"w-80":{width:"80%"},"w-90":{width:"90%"},"w-100":{width:"100%"},"w-third":{width:"calc( 100% / 3 )"},"w-two-thirds":{width:"calc( 100% / 1.5 )"},"w-auto":{width:"auto"},"overflow-visible":{overflow:"visible"},"overflow-hidden":{overflow:"hidden"},"overflow-scroll":{overflow:"scroll"},"overflow-auto":{overflow:"auto"},"overflow-x-visible":{overflowX:"visible"},"overflow-x-hidden":{overflowX:"hidden"},"overflow-x-scroll":{overflowX:"scroll"},"overflow-x-auto":{overflowX:"auto"},"overflow-y-visible":{overflowY:"visible"},"overflow-y-hidden":{overflowY:"hidden"},"overflow-y-scroll":{overflowY:"scroll"},"overflow-y-auto":{overflowY:"auto"},static:{position:"static"},relative:{position:"relative"},absolute:{position:"absolute"},fixed:{position:"fixed"},"o-100":{opacity:"1"},"o-90":{opacity:".9"},"o-80":{opacity:".8"},"o-70":{opacity:".7"},"o-60":{opacity:".6"},"o-50":{opacity:".5"},"o-40":{opacity:".4"},"o-30":{opacity:".3"},"o-20":{opacity:".2"},"o-10":{opacity:".1"},"o-05":{opacity:".05"},"o-025":{opacity:".025"},"o-0":{opacity:"0"},"rotate-45":{webkitTransform:"rotate( 45deg )",transform:"rotate( 45deg )"},"rotate-90":{webkitTransform:"rotate( 90deg )",transform:"rotate( 90deg )"},"rotate-135":{webkitTransform:"rotate( 135deg )",transform:"rotate( 135deg )"},"rotate-180":{webkitTransform:"rotate( 180deg )",transform:"rotate( 180deg )"},"rotate-225":{webkitTransform:"rotate( 225deg )",transform:"rotate( 225deg )"},"rotate-270":{webkitTransform:"rotate( 270deg )",transform:"rotate( 270deg )"},"rotate-315":{webkitTransform:"rotate( 315deg )",transform:"rotate( 315deg )"},"black-90":{color:"rgba( 0, 0, 0, .9 )"},"black-80":{color:"rgba( 0, 0, 0, .8 )"},"black-70":{color:"rgba( 0, 0, 0, .7 )"},"black-60":{color:"rgba( 0, 0, 0, .6 )"},"black-50":{color:"rgba( 0, 0, 0, .5 )"},"black-40":{color:"rgba( 0, 0, 0, .4 )"},"black-30":{color:"rgba( 0, 0, 0, .3 )"},"black-20":{color:"rgba( 0, 0, 0, .2 )"},"black-10":{color:"rgba( 0, 0, 0, .1 )"},"black-05":{color:"rgba( 0, 0, 0, .05 )"},"white-90":{color:"rgba( 255, 255, 255, .9 )"},"white-80":{color:"rgba( 255, 255, 255, .8 )"},"white-70":{color:"rgba( 255, 255, 255, .7 )"},"white-60":{color:"rgba( 255, 255, 255, .6 )"},"white-50":{color:"rgba( 255, 255, 255, .5 )"},"white-40":{color:"rgba( 255, 255, 255, .4 )"},"white-30":{color:"rgba( 255, 255, 255, .3 )"},"white-20":{color:"rgba( 255, 255, 255, .2 )"},"white-10":{color:"rgba( 255, 255, 255, .1 )"},black:{color:"#000"},"near-black":{color:"#111"},"dark-gray":{color:"#333"},"mid-gray":{color:"#555"},gray:{color:"#777"},silver:{color:"#999"},"light-silver":{color:"#aaa"},"moon-gray":{color:"#ccc"},"light-gray":{color:"#eee"},"near-white":{color:"#f4f4f4"},white:{color:"#fff"},"dark-red":{color:"#e7040f"},red:{color:"#ff4136"},"light-red":{color:"#ff725c"},orange:{color:"#ff6300"},gold:{color:"#ffb700"},yellow:{color:"#ffd700"},"light-yellow":{color:"#fbf1a9"},purple:{color:"#5e2ca5"},"light-purple":{color:"#a463f2"},"dark-pink":{color:"#d5008f"},"hot-pink":{color:"#ff41b4"},pink:{color:"#ff80cc"},"light-pink":{color:"#ffa3d7"},"dark-green":{color:"#137752"},green:{color:"#19a974"},"light-green":{color:"#9eebcf"},navy:{color:"#001b44"},"dark-blue":{color:"#00449e"},blue:{color:"#357edd"},"light-blue":{color:"#96ccff"},"lightest-blue":{color:"#cdecff"},"washed-blue":{color:"#f6fffe"},"washed-green":{color:"#e8fdf5"},"washed-yellow":{color:"#fffceb"},"washed-red":{color:"#ffdfdf"},"color-inherit":{color:"inherit"},"bg-black-90":{backgroundColor:"rgba( 0, 0, 0, .9 )"},"bg-black-80":{backgroundColor:"rgba( 0, 0, 0, .8 )"},"bg-black-70":{backgroundColor:"rgba( 0, 0, 0, .7 )"},"bg-black-60":{backgroundColor:"rgba( 0, 0, 0, .6 )"},"bg-black-50":{backgroundColor:"rgba( 0, 0, 0, .5 )"},"bg-black-40":{backgroundColor:"rgba( 0, 0, 0, .4 )"},"bg-black-30":{backgroundColor:"rgba( 0, 0, 0, .3 )"},"bg-black-20":{backgroundColor:"rgba( 0, 0, 0, .2 )"},"bg-black-10":{backgroundColor:"rgba( 0, 0, 0, .1 )"},"bg-black-05":{backgroundColor:"rgba( 0, 0, 0, .05 )"},"bg-white-90":{backgroundColor:"rgba( 255, 255, 255, .9 )"},"bg-white-80":{backgroundColor:"rgba( 255, 255, 255, .8 )"},"bg-white-70":{backgroundColor:"rgba( 255, 255, 255, .7 )"},"bg-white-60":{backgroundColor:"rgba( 255, 255, 255, .6 )"},"bg-white-50":{backgroundColor:"rgba( 255, 255, 255, .5 )"},"bg-white-40":{backgroundColor:"rgba( 255, 255, 255, .4 )"},"bg-white-30":{backgroundColor:"rgba( 255, 255, 255, .3 )"},"bg-white-20":{backgroundColor:"rgba( 255, 255, 255, .2 )"},"bg-white-10":{backgroundColor:"rgba( 255, 255, 255, .1 )"},"bg-black":{backgroundColor:"#000"},"bg-near-black":{backgroundColor:"#111"},"bg-dark-gray":{backgroundColor:"#333"},"bg-mid-gray":{backgroundColor:"#555"},"bg-gray":{backgroundColor:"#777"},"bg-silver":{backgroundColor:"#999"},"bg-light-silver":{backgroundColor:"#aaa"},"bg-moon-gray":{backgroundColor:"#ccc"},"bg-light-gray":{backgroundColor:"#eee"},"bg-near-white":{backgroundColor:"#f4f4f4"},"bg-white":{backgroundColor:"#fff"},"bg-transparent":{backgroundColor:"transparent"},"bg-dark-red":{backgroundColor:"#e7040f"},"bg-red":{backgroundColor:"#ff4136"},"bg-light-red":{backgroundColor:"#ff725c"},"bg-orange":{backgroundColor:"#ff6300"},"bg-gold":{backgroundColor:"#ffb700"},"bg-yellow":{backgroundColor:"#ffd700"},"bg-light-yellow":{backgroundColor:"#fbf1a9"},"bg-purple":{backgroundColor:"#5e2ca5"},"bg-light-purple":{backgroundColor:"#a463f2"},"bg-dark-pink":{backgroundColor:"#d5008f"},"bg-hot-pink":{backgroundColor:"#ff41b4"},"bg-pink":{backgroundColor:"#ff80cc"},"bg-light-pink":{backgroundColor:"#ffa3d7"},"bg-dark-green":{backgroundColor:"#137752"},"bg-green":{backgroundColor:"#19a974"},"bg-light-green":{backgroundColor:"#9eebcf"},"bg-navy":{backgroundColor:"#001b44"},"bg-dark-blue":{backgroundColor:"#00449e"},"bg-blue":{backgroundColor:"#357edd"},"bg-light-blue":{backgroundColor:"#96ccff"},"bg-lightest-blue":{backgroundColor:"#cdecff"},"bg-washed-blue":{backgroundColor:"#f6fffe"},"bg-washed-green":{backgroundColor:"#e8fdf5"},"bg-washed-yellow":{backgroundColor:"#fffceb"},"bg-washed-red":{backgroundColor:"#ffdfdf"},"bg-inherit":{backgroundColor:"inherit"},"hover-black":{":focus":{color:"#000"},":hover":{color:"#000"}},"hover-near-black":{":focus":{color:"#111"},":hover":{color:"#111"}},"hover-dark-gray":{":focus":{color:"#333"},":hover":{color:"#333"}},"hover-mid-gray":{":focus":{color:"#555"},":hover":{color:"#555"}},"hover-gray":{":focus":{color:"#777"},":hover":{color:"#777"}},"hover-silver":{":focus":{color:"#999"},":hover":{color:"#999"}},"hover-light-silver":{":focus":{color:"#aaa"},":hover":{color:"#aaa"}},"hover-moon-gray":{":focus":{color:"#ccc"},":hover":{color:"#ccc"}},"hover-light-gray":{":focus":{color:"#eee"},":hover":{color:"#eee"}},"hover-near-white":{":focus":{color:"#f4f4f4"},":hover":{color:"#f4f4f4"}},"hover-white":{":focus":{color:"#fff"},":hover":{color:"#fff"}},"hover-black-90":{":focus":{color:"rgba( 0, 0, 0, .9 )"},":hover":{color:"rgba( 0, 0, 0, .9 )"}},"hover-black-80":{":focus":{color:"rgba( 0, 0, 0, .8 )"},":hover":{color:"rgba( 0, 0, 0, .8 )"}},"hover-black-70":{":focus":{color:"rgba( 0, 0, 0, .7 )"},":hover":{color:"rgba( 0, 0, 0, .7 )"}},"hover-black-60":{":focus":{color:"rgba( 0, 0, 0, .6 )"},":hover":{color:"rgba( 0, 0, 0, .6 )"}},"hover-black-50":{":focus":{color:"rgba( 0, 0, 0, .5 )"},":hover":{color:"rgba( 0, 0, 0, .5 )"}},"hover-black-40":{":focus":{color:"rgba( 0, 0, 0, .4 )"},":hover":{color:"rgba( 0, 0, 0, .4 )"}},"hover-black-30":{":focus":{color:"rgba( 0, 0, 0, .3 )"},":hover":{color:"rgba( 0, 0, 0, .3 )"}},"hover-black-20":{":focus":{color:"rgba( 0, 0, 0, .2 )"},":hover":{color:"rgba( 0, 0, 0, .2 )"}},"hover-black-10":{":focus":{color:"rgba( 0, 0, 0, .1 )"},":hover":{color:"rgba( 0, 0, 0, .1 )"}},"hover-white-90":{":focus":{color:"rgba( 255, 255, 255, .9 )"},":hover":{color:"rgba( 255, 255, 255, .9 )"}},"hover-white-80":{":focus":{color:"rgba( 255, 255, 255, .8 )"},":hover":{color:"rgba( 255, 255, 255, .8 )"}},"hover-white-70":{":focus":{color:"rgba( 255, 255, 255, .7 )"},":hover":{color:"rgba( 255, 255, 255, .7 )"}},"hover-white-60":{":focus":{color:"rgba( 255, 255, 255, .6 )"},":hover":{color:"rgba( 255, 255, 255, .6 )"}},"hover-white-50":{":focus":{color:"rgba( 255, 255, 255, .5 )"},":hover":{color:"rgba( 255, 255, 255, .5 )"}},"hover-white-40":{":focus":{color:"rgba( 255, 255, 255, .4 )"},":hover":{color:"rgba( 255, 255, 255, .4 )"}},"hover-white-30":{":focus":{color:"rgba( 255, 255, 255, .3 )"},":hover":{color:"rgba( 255, 255, 255, .3 )"}},"hover-white-20":{":focus":{color:"rgba( 255, 255, 255, .2 )"},":hover":{color:"rgba( 255, 255, 255, .2 )"}},"hover-white-10":{":focus":{color:"rgba( 255, 255, 255, .1 )"},":hover":{color:"rgba( 255, 255, 255, .1 )"}},"hover-inherit":{":focus":{color:"inherit"},":hover":{color:"inherit"}},"hover-bg-black":{":focus":{backgroundColor:"#000"},":hover":{backgroundColor:"#000"}},"hover-bg-near-black":{":focus":{backgroundColor:"#111"},":hover":{backgroundColor:"#111"}},"hover-bg-dark-gray":{":focus":{backgroundColor:"#333"},":hover":{backgroundColor:"#333"}},"hover-bg-mid-gray":{":focus":{backgroundColor:"#555"},":hover":{backgroundColor:"#555"}},"hover-bg-gray":{":focus":{backgroundColor:"#777"},":hover":{backgroundColor:"#777"}},"hover-bg-silver":{":focus":{backgroundColor:"#999"},":hover":{backgroundColor:"#999"}},"hover-bg-light-silver":{":focus":{backgroundColor:"#aaa"},":hover":{backgroundColor:"#aaa"}},"hover-bg-moon-gray":{":focus":{backgroundColor:"#ccc"},":hover":{backgroundColor:"#ccc"}},"hover-bg-light-gray":{":focus":{backgroundColor:"#eee"},":hover":{backgroundColor:"#eee"}},"hover-bg-near-white":{":focus":{backgroundColor:"#f4f4f4"},":hover":{backgroundColor:"#f4f4f4"}},"hover-bg-white":{":focus":{backgroundColor:"#fff"},":hover":{backgroundColor:"#fff"}},"hover-bg-transparent":{":focus":{backgroundColor:"transparent"},":hover":{backgroundColor:"transparent"}},"hover-bg-black-90":{":focus":{backgroundColor:"rgba( 0, 0, 0, .9 )"},":hover":{backgroundColor:"rgba( 0, 0, 0, .9 )"}},"hover-bg-black-80":{":focus":{backgroundColor:"rgba( 0, 0, 0, .8 )"},":hover":{backgroundColor:"rgba( 0, 0, 0, .8 )"}},"hover-bg-black-70":{":focus":{backgroundColor:"rgba( 0, 0, 0, .7 )"},":hover":{backgroundColor:"rgba( 0, 0, 0, .7 )"}},"hover-bg-black-60":{":focus":{backgroundColor:"rgba( 0, 0, 0, .6 )"},":hover":{backgroundColor:"rgba( 0, 0, 0, .6 )"}},"hover-bg-black-50":{":focus":{backgroundColor:"rgba( 0, 0, 0, .5 )"},":hover":{backgroundColor:"rgba( 0, 0, 0, .5 )"}},"hover-bg-black-40":{":focus":{backgroundColor:"rgba( 0, 0, 0, .4 )"},":hover":{backgroundColor:"rgba( 0, 0, 0, .4 )"}},"hover-bg-black-30":{":focus":{backgroundColor:"rgba( 0, 0, 0, .3 )"},":hover":{backgroundColor:"rgba( 0, 0, 0, .3 )"}},"hover-bg-black-20":{":focus":{backgroundColor:"rgba( 0, 0, 0, .2 )"},":hover":{backgroundColor:"rgba( 0, 0, 0, .2 )"}},"hover-bg-black-10":{":focus":{backgroundColor:"rgba( 0, 0, 0, .1 )"},":hover":{backgroundColor:"rgba( 0, 0, 0, .1 )"}},"hover-bg-white-90":{":focus":{backgroundColor:"rgba( 255, 255, 255, .9 )"},":hover":{backgroundColor:"rgba( 255, 255, 255, .9 )"}},"hover-bg-white-80":{":focus":{backgroundColor:"rgba( 255, 255, 255, .8 )"},":hover":{backgroundColor:"rgba( 255, 255, 255, .8 )"}},"hover-bg-white-70":{":focus":{backgroundColor:"rgba( 255, 255, 255, .7 )"},":hover":{backgroundColor:"rgba( 255, 255, 255, .7 )"}},"hover-bg-white-60":{":focus":{backgroundColor:"rgba( 255, 255, 255, .6 )"},":hover":{backgroundColor:"rgba( 255, 255, 255, .6 )"}},"hover-bg-white-50":{":focus":{backgroundColor:"rgba( 255, 255, 255, .5 )"},":hover":{backgroundColor:"rgba( 255, 255, 255, .5 )"}},"hover-bg-white-40":{":focus":{backgroundColor:"rgba( 255, 255, 255, .4 )"},":hover":{backgroundColor:"rgba( 255, 255, 255, .4 )"}},"hover-bg-white-30":{":focus":{backgroundColor:"rgba( 255, 255, 255, .3 )"},":hover":{backgroundColor:"rgba( 255, 255, 255, .3 )"}},"hover-bg-white-20":{":focus":{backgroundColor:"rgba( 255, 255, 255, .2 )"},":hover":{backgroundColor:"rgba( 255, 255, 255, .2 )"}},"hover-bg-white-10":{":focus":{backgroundColor:"rgba( 255, 255, 255, .1 )"},":hover":{backgroundColor:"rgba( 255, 255, 255, .1 )"}},"hover-dark-red":{":focus":{color:"#e7040f"},":hover":{color:"#e7040f"}},"hover-red":{":focus":{color:"#ff4136"},":hover":{color:"#ff4136"}},"hover-light-red":{":focus":{color:"#ff725c"},":hover":{color:"#ff725c"}},"hover-orange":{":focus":{color:"#ff6300"},":hover":{color:"#ff6300"}},"hover-gold":{":focus":{color:"#ffb700"},":hover":{color:"#ffb700"}},"hover-yellow":{":focus":{color:"#ffd700"},":hover":{color:"#ffd700"}},"hover-light-yellow":{":focus":{color:"#fbf1a9"},":hover":{color:"#fbf1a9"}},"hover-purple":{":focus":{color:"#5e2ca5"},":hover":{color:"#5e2ca5"}},"hover-light-purple":{":focus":{color:"#a463f2"},":hover":{color:"#a463f2"}},"hover-dark-pink":{":focus":{color:"#d5008f"},":hover":{color:"#d5008f"}},"hover-hot-pink":{":focus":{color:"#ff41b4"},":hover":{color:"#ff41b4"}},"hover-pink":{":focus":{color:"#ff80cc"},":hover":{color:"#ff80cc"}},"hover-light-pink":{":focus":{color:"#ffa3d7"},":hover":{color:"#ffa3d7"}},"hover-dark-green":{":focus":{color:"#137752"},":hover":{color:"#137752"}},"hover-green":{":focus":{color:"#19a974"},":hover":{color:"#19a974"}},"hover-light-green":{":focus":{color:"#9eebcf"},":hover":{color:"#9eebcf"}},"hover-navy":{":focus":{color:"#001b44"},":hover":{color:"#001b44"}},"hover-dark-blue":{":focus":{color:"#00449e"},":hover":{color:"#00449e"}},"hover-blue":{":focus":{color:"#357edd"},":hover":{color:"#357edd"}},"hover-light-blue":{":focus":{color:"#96ccff"},":hover":{color:"#96ccff"}},"hover-lightest-blue":{":focus":{color:"#cdecff"},":hover":{color:"#cdecff"}},"hover-washed-blue":{":focus":{color:"#f6fffe"},":hover":{color:"#f6fffe"}},"hover-washed-green":{":focus":{color:"#e8fdf5"},":hover":{color:"#e8fdf5"}},"hover-washed-yellow":{":focus":{color:"#fffceb"},":hover":{color:"#fffceb"}},"hover-washed-red":{":focus":{color:"#ffdfdf"},":hover":{color:"#ffdfdf"}},"hover-bg-dark-red":{":focus":{backgroundColor:"#e7040f"},":hover":{backgroundColor:"#e7040f"}},"hover-bg-red":{":focus":{backgroundColor:"#ff4136"},":hover":{backgroundColor:"#ff4136"}},"hover-bg-light-red":{":focus":{backgroundColor:"#ff725c"},":hover":{backgroundColor:"#ff725c"}},"hover-bg-orange":{":focus":{backgroundColor:"#ff6300"},":hover":{backgroundColor:"#ff6300"}},"hover-bg-gold":{":focus":{backgroundColor:"#ffb700"},":hover":{backgroundColor:"#ffb700"}},"hover-bg-yellow":{":focus":{backgroundColor:"#ffd700"},":hover":{backgroundColor:"#ffd700"}},"hover-bg-light-yellow":{":focus":{backgroundColor:"#fbf1a9"},":hover":{backgroundColor:"#fbf1a9"}},"hover-bg-purple":{":focus":{backgroundColor:"#5e2ca5"},":hover":{backgroundColor:"#5e2ca5"}},"hover-bg-light-purple":{":focus":{backgroundColor:"#a463f2"},":hover":{backgroundColor:"#a463f2"}},"hover-bg-dark-pink":{":focus":{backgroundColor:"#d5008f"},":hover":{backgroundColor:"#d5008f"}},"hover-bg-hot-pink":{":focus":{backgroundColor:"#ff41b4"},":hover":{backgroundColor:"#ff41b4"}},"hover-bg-pink":{":focus":{backgroundColor:"#ff80cc"},":hover":{backgroundColor:"#ff80cc"}},"hover-bg-light-pink":{":focus":{backgroundColor:"#ffa3d7"},":hover":{backgroundColor:"#ffa3d7"}},"hover-bg-dark-green":{":focus":{backgroundColor:"#137752"},":hover":{backgroundColor:"#137752"}},"hover-bg-green":{":focus":{backgroundColor:"#19a974"},":hover":{backgroundColor:"#19a974"}},"hover-bg-light-green":{":focus":{backgroundColor:"#9eebcf"},":hover":{backgroundColor:"#9eebcf"}},"hover-bg-navy":{":focus":{backgroundColor:"#001b44"},":hover":{backgroundColor:"#001b44"}},"hover-bg-dark-blue":{":focus":{backgroundColor:"#00449e"},":hover":{backgroundColor:"#00449e"}},"hover-bg-blue":{":focus":{backgroundColor:"#357edd"},":hover":{backgroundColor:"#357edd"}},"hover-bg-light-blue":{":focus":{backgroundColor:"#96ccff"},":hover":{backgroundColor:"#96ccff"}},"hover-bg-lightest-blue":{":focus":{backgroundColor:"#cdecff"},":hover":{backgroundColor:"#cdecff"}},"hover-bg-washed-blue":{":focus":{backgroundColor:"#f6fffe"},":hover":{backgroundColor:"#f6fffe"}},"hover-bg-washed-green":{":focus":{backgroundColor:"#e8fdf5"},":hover":{backgroundColor:"#e8fdf5"}},"hover-bg-washed-yellow":{":focus":{backgroundColor:"#fffceb"},":hover":{backgroundColor:"#fffceb"}},"hover-bg-washed-red":{":focus":{backgroundColor:"#ffdfdf"},":hover":{backgroundColor:"#ffdfdf"}},"hover-bg-inherit":{":focus":{backgroundColor:"inherit"},":hover":{backgroundColor:"inherit"}},pa0:{padding:"0"},pa1:{padding:".25rem"},pa2:{padding:".5rem"},pa3:{padding:"1rem"},pa4:{padding:"2rem"},pa5:{padding:"4rem"},pa6:{padding:"8rem"},pa7:{padding:"16rem"},pl0:{paddingLeft:"0"},pl1:{paddingLeft:".25rem"},pl2:{paddingLeft:".5rem"},pl3:{paddingLeft:"1rem"},pl4:{paddingLeft:"2rem"},pl5:{paddingLeft:"4rem"},pl6:{paddingLeft:"8rem"},pl7:{paddingLeft:"16rem"},pr0:{paddingRight:"0"},pr1:{paddingRight:".25rem"},pr2:{paddingRight:".5rem"},pr3:{paddingRight:"1rem"},pr4:{paddingRight:"2rem"},pr5:{paddingRight:"4rem"},pr6:{paddingRight:"8rem"},pr7:{paddingRight:"16rem"},pb0:{paddingBottom:"0"},pb1:{paddingBottom:".25rem"},pb2:{paddingBottom:".5rem"},pb3:{paddingBottom:"1rem"},pb4:{paddingBottom:"2rem"},pb5:{paddingBottom:"4rem"},pb6:{paddingBottom:"8rem"},pb7:{paddingBottom:"16rem"},pt0:{paddingTop:"0"},pt1:{paddingTop:".25rem"},pt2:{paddingTop:".5rem"},pt3:{paddingTop:"1rem"},pt4:{paddingTop:"2rem"},pt5:{paddingTop:"4rem"},pt6:{paddingTop:"8rem"},pt7:{paddingTop:"16rem"},pv0:{paddingTop:"0",paddingBottom:"0"},pv1:{paddingTop:".25rem",paddingBottom:".25rem"},pv2:{paddingTop:".5rem",paddingBottom:".5rem"},pv3:{paddingTop:"1rem",paddingBottom:"1rem"},pv4:{paddingTop:"2rem",paddingBottom:"2rem"},pv5:{paddingTop:"4rem",paddingBottom:"4rem"},pv6:{paddingTop:"8rem",paddingBottom:"8rem"},pv7:{paddingTop:"16rem",paddingBottom:"16rem"},ph0:{paddingLeft:"0",paddingRight:"0"},ph1:{paddingLeft:".25rem",paddingRight:".25rem"},ph2:{paddingLeft:".5rem",paddingRight:".5rem"},ph3:{paddingLeft:"1rem",paddingRight:"1rem"},ph4:{paddingLeft:"2rem",paddingRight:"2rem"},ph5:{paddingLeft:"4rem",paddingRight:"4rem"},ph6:{paddingLeft:"8rem",paddingRight:"8rem"},ph7:{paddingLeft:"16rem",paddingRight:"16rem"},ma0:{margin:"0"},ma1:{margin:".25rem"},ma2:{margin:".5rem"},ma3:{margin:"1rem"},ma4:{margin:"2rem"},ma5:{margin:"4rem"},ma6:{margin:"8rem"},ma7:{margin:"16rem"},ml0:{marginLeft:"0"},ml1:{marginLeft:".25rem"},ml2:{marginLeft:".5rem"},ml3:{marginLeft:"1rem"},ml4:{marginLeft:"2rem"},ml5:{marginLeft:"4rem"},ml6:{marginLeft:"8rem"},ml7:{marginLeft:"16rem"},mr0:{marginRight:"0"},mr1:{marginRight:".25rem"},mr2:{marginRight:".5rem"},mr3:{marginRight:"1rem"},mr4:{marginRight:"2rem"},mr5:{marginRight:"4rem"},mr6:{marginRight:"8rem"},mr7:{marginRight:"16rem"},mb0:{marginBottom:"0"},mb1:{marginBottom:".25rem"},mb2:{marginBottom:".5rem"},mb3:{marginBottom:"1rem"},mb4:{marginBottom:"2rem"},mb5:{marginBottom:"4rem"},mb6:{marginBottom:"8rem"},mb7:{marginBottom:"16rem"},mt0:{marginTop:"0"},mt1:{marginTop:".25rem"},mt2:{marginTop:".5rem"},mt3:{marginTop:"1rem"},mt4:{marginTop:"2rem"},mt5:{marginTop:"4rem"},mt6:{marginTop:"8rem"},mt7:{marginTop:"16rem"},mv0:{marginTop:"0",marginBottom:"0"},mv1:{marginTop:".25rem",marginBottom:".25rem"},mv2:{marginTop:".5rem",marginBottom:".5rem"},mv3:{marginTop:"1rem",marginBottom:"1rem"},mv4:{marginTop:"2rem",marginBottom:"2rem"},mv5:{marginTop:"4rem",marginBottom:"4rem"},mv6:{marginTop:"8rem",marginBottom:"8rem"},mv7:{marginTop:"16rem",marginBottom:"16rem"},mh0:{marginLeft:"0",marginRight:"0"},mh1:{marginLeft:".25rem",marginRight:".25rem"},mh2:{marginLeft:".5rem",marginRight:".5rem"},mh3:{marginLeft:"1rem",marginRight:"1rem"},mh4:{marginLeft:"2rem",marginRight:"2rem"},mh5:{marginLeft:"4rem",marginRight:"4rem"},mh6:{marginLeft:"8rem",marginRight:"8rem"},mh7:{marginLeft:"16rem",marginRight:"16rem"},na1:{margin:"-.25rem"},na2:{margin:"-.5rem"},na3:{margin:"-1rem"},na4:{margin:"-2rem"},na5:{margin:"-4rem"},na6:{margin:"-8rem"},na7:{margin:"-16rem"},nl1:{marginLeft:"-.25rem"},nl2:{marginLeft:"-.5rem"},nl3:{marginLeft:"-1rem"},nl4:{marginLeft:"-2rem"},nl5:{marginLeft:"-4rem"},nl6:{marginLeft:"-8rem"},nl7:{marginLeft:"-16rem"},nr1:{marginRight:"-.25rem"},nr2:{marginRight:"-.5rem"},nr3:{marginRight:"-1rem"},nr4:{marginRight:"-2rem"},nr5:{marginRight:"-4rem"},nr6:{marginRight:"-8rem"},nr7:{marginRight:"-16rem"},nb1:{marginBottom:"-.25rem"},nb2:{marginBottom:"-.5rem"},nb3:{marginBottom:"-1rem"},nb4:{marginBottom:"-2rem"},nb5:{marginBottom:"-4rem"},nb6:{marginBottom:"-8rem"},nb7:{marginBottom:"-16rem"},nt1:{marginTop:"-.25rem"},nt2:{marginTop:"-.5rem"},nt3:{marginTop:"-1rem"},nt4:{marginTop:"-2rem"},nt5:{marginTop:"-4rem"},nt6:{marginTop:"-8rem"},nt7:{marginTop:"-16rem"},collapse:{borderCollapse:"collapse",borderSpacing:"0"},"striped--light-silver":{":nth-child(odd)":{backgroundColor:"#aaa"}},"striped--moon-gray":{":nth-child(odd)":{backgroundColor:"#ccc"}},"striped--light-gray":{":nth-child(odd)":{backgroundColor:"#eee"}},"striped--near-white":{":nth-child(odd)":{backgroundColor:"#f4f4f4"}},"stripe-light":{":nth-child(odd)":{backgroundColor:"rgba( 255, 255, 255, .1 )"}},"stripe-dark":{":nth-child(odd)":{backgroundColor:"rgba( 0, 0, 0, .1 )"}},strike:{textDecoration:"line-through"},underline:{textDecoration:"underline"},"no-underline":{textDecoration:"none"},tl:{textAlign:"left"},tr:{textAlign:"right"},tc:{textAlign:"center"},tj:{textAlign:"justify"},ttc:{textTransform:"capitalize"},ttl:{textTransform:"lowercase"},ttu:{textTransform:"uppercase"},ttn:{textTransform:"none"},"f-6":{fontSize:"6rem"},"f-headline":{fontSize:"6rem"},"f-5":{fontSize:"5rem"},"f-subheadline":{fontSize:"5rem"},f1:{fontSize:"3rem"},f2:{fontSize:"2.25rem"},f3:{fontSize:"1.5rem"},f4:{fontSize:"1.25rem"},f5:{fontSize:"1rem"},f6:{fontSize:".875rem"},f7:{fontSize:".75rem"},measure:{maxWidth:"30em"},"measure-wide":{maxWidth:"34em"},"measure-narrow":{maxWidth:"20em"},indent:{textIndent:"1em",marginTop:"0",marginBottom:"0"},"small-caps":{fontVariant:"small-caps"},truncate:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},"overflow-container":{overflowY:"scroll"},center:{marginRight:"auto",marginLeft:"auto"},"mr-auto":{marginRight:"auto"},"ml-auto":{marginLeft:"auto"},clip:{position:"absolute",clip:"rect( 1px, 1px, 1px, 1px )"},"ws-normal":{whiteSpace:"normal"},nowrap:{whiteSpace:"nowrap"},"v-base":{verticalAlign:"baseline"},"v-mid":{verticalAlign:"middle"},"v-top":{verticalAlign:"top"},"v-btm":{verticalAlign:"bottom"},dim:{":active":{opacity:".8",transition:"opacity .15s ease-out"},":focus":{opacity:".5",transition:"opacity .15s ease-in"},":hover":{opacity:".5",transition:"opacity .15s ease-in"},opacity:"1",transition:"opacity .15s ease-in"},glow:{":focus":{opacity:"1",transition:"opacity .15s ease-in"},":hover":{opacity:"1",transition:"opacity .15s ease-in"},transition:"opacity .15s ease-in"},"underline-hover":{":focus":{textDecoration:"underline"},":hover":{textDecoration:"underline"}},grow:{":active":{webkitTransform:"scale( .90 )",transform:"scale( .90 )"},":focus":{webkitTransform:"scale( 1.05 )",transform:"scale( 1.05 )"},":hover":{webkitTransform:"scale( 1.05 )",transform:"scale( 1.05 )"},mozOsxFontSmoothing:"grayscale",webkitBackfaceVisibility:"hidden",backfaceVisibility:"hidden",webkitTransform:"translateZ( 0 )",transform:"translateZ( 0 )",transition:"transform .25s ease-out, -webkit-transform .25s ease-out"},"grow-large":{":active":{webkitTransform:"scale( .95 )",transform:"scale( .95 )"},":focus":{webkitTransform:"scale( 1.2 )",transform:"scale( 1.2 )"},":hover":{webkitTransform:"scale( 1.2 )",transform:"scale( 1.2 )"},mozOsxFontSmoothing:"grayscale",webkitBackfaceVisibility:"hidden",backfaceVisibility:"hidden",webkitTransform:"translateZ( 0 )",transform:"translateZ( 0 )",transition:"transform .25s ease-in-out, -webkit-transform .25s ease-in-out"},pointer:{":hover":{cursor:"pointer"}},"shadow-hover":{":focus::after":{opacity:"1"},":hover::after":{opacity:"1"},"::after":{content:"''",boxShadow:"0 0 16px 2px rgba( 0, 0, 0, .2 )",borderRadius:"inherit",opacity:"0",position:"absolute",top:"0",left:"0",width:"100%",height:"100%",zIndex:"-1",transition:"opacity .5s cubic-bezier( .165, .84, .44, 1 )"},cursor:"pointer",position:"relative",transition:"all .5s cubic-bezier( .165, .84, .44, 1 )"},"bg-animate":{":focus":{transition:"background-color .15s ease-in-out"},":hover":{transition:"background-color .15s ease-in-out"},transition:"background-color .15s ease-in-out"},"z-0":{zIndex:"0"},"z-1":{zIndex:"1"},"z-2":{zIndex:"2"},"z-3":{zIndex:"3"},"z-4":{zIndex:"4"},"z-5":{zIndex:"5"},"z-999":{zIndex:"999"},"z-9999":{zIndex:"9999"},"z-max":{zIndex:"2147483647"},"z-inherit":{zIndex:"inherit"},"z-initial":{zIndex:"initial"},"z-unset":{zIndex:"unset"},"debug-grid":{background:"transparent url( data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAFElEQVR4AWPAC97/9x0eCsAEPgwAVLshdpENIxcAAAAASUVORK5CYII= ) repeat top left"},"debug-grid-16":{background:"transparent url( data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMklEQVR4AWOgCLz/b0epAa6UGuBOqQHOQHLUgFEDnAbcBZ4UGwDOkiCnkIhdgNgNxAYAiYlD+8sEuo8AAAAASUVORK5CYII= ) repeat top left"},"debug-grid-8-solid":{background:"white url( data:image/gif;base64,R0lGODdhCAAIAPEAAADw/wDx/////wAAACwAAAAACAAIAAACDZQvgaeb/lxbAIKA8y0AOw== ) repeat top left"},"debug-grid-16-solid":{background:"white url( data:image/gif;base64,R0lGODdhEAAQAPEAAADw/wDx/xXy/////ywAAAAAEAAQAAACIZyPKckYDQFsb6ZqD85jZ2+BkwiRFKehhqQCQgDHcgwEBQA7 ) repeat top left"},"aspect-ratio-ns":"aspect-ratio","aspect-ratio--16x9-ns":"aspect-ratio--16x9","aspect-ratio--9x16-ns":"aspect-ratio--9x16","aspect-ratio--4x3-ns":"aspect-ratio--4x3","aspect-ratio--3x4-ns":"aspect-ratio--3x4","aspect-ratio--6x4-ns":"aspect-ratio--6x4","aspect-ratio--4x6-ns":"aspect-ratio--4x6","aspect-ratio--8x5-ns":"aspect-ratio--8x5","aspect-ratio--5x8-ns":"aspect-ratio--5x8","aspect-ratio--7x5-ns":"aspect-ratio--7x5","aspect-ratio--5x7-ns":"aspect-ratio--5x7","aspect-ratio--1x1-ns":"aspect-ratio--1x1","aspect-ratio--object-ns":"aspect-ratio--object","cover-ns":"cover","contain-ns":"contain","bg-center-ns":"bg-center","bg-top-ns":"bg-top","bg-right-ns":"bg-right","bg-bottom-ns":"bg-bottom","bg-left-ns":"bg-left","outline-ns":"outline","outline-transparent-ns":"outline-transparent","outline-0-ns":"outline-0","ba-ns":"ba","bt-ns":"bt","br-ns":"br","bb-ns":"bb","bl-ns":"bl","bn-ns":"bn","br0-ns":"br0","br1-ns":"br1","br2-ns":"br2","br3-ns":"br3","br4-ns":"br4","br-100-ns":"br-100","br-pill-ns":"br-pill","br--bottom-ns":"br--bottom","br--top-ns":"br--top","br--right-ns":"br--right","br--left-ns":"br--left","b--dotted-ns":"b--dotted","b--dashed-ns":"b--dashed","b--solid-ns":"b--solid","b--none-ns":"b--none","bw0-ns":"bw0","bw1-ns":"bw1","bw2-ns":"bw2","bw3-ns":"bw3","bw4-ns":"bw4","bw5-ns":"bw5","bt-0-ns":"bt-0","br-0-ns":"br-0","bb-0-ns":"bb-0","bl-0-ns":"bl-0","shadow-1-ns":"shadow-1","shadow-2-ns":"shadow-2","shadow-3-ns":"shadow-3","shadow-4-ns":"shadow-4","shadow-5-ns":"shadow-5","top-0-ns":"top-0","left-0-ns":"left-0","right-0-ns":"right-0","bottom-0-ns":"bottom-0","top-1-ns":"top-1","left-1-ns":"left-1","right-1-ns":"right-1","bottom-1-ns":"bottom-1","top-2-ns":"top-2","left-2-ns":"left-2","right-2-ns":"right-2","bottom-2-ns":"bottom-2","top--1-ns":"top--1","right--1-ns":"right--1","bottom--1-ns":"bottom--1","left--1-ns":"left--1","top--2-ns":"top--2","right--2-ns":"right--2","bottom--2-ns":"bottom--2","left--2-ns":"left--2","absolute--fill-ns":"absolute--fill","cl-ns":"cl","cr-ns":"cr","cb-ns":"cb","cn-ns":"cn","dn-ns":"dn","di-ns":"di","db-ns":"db","dib-ns":"dib","dit-ns":"dit","dt-ns":"dt","dtc-ns":"dtc","dt-row-ns":"dt-row","dt-row-group-ns":"dt-row-group","dt-column-ns":"dt-column","dt-column-group-ns":"dt-column-group","dt--fixed-ns":"dt--fixed","flex-ns":"flex","inline-flex-ns":"inline-flex","flex-auto-ns":"flex-auto","flex-none-ns":"flex-none","flex-column-ns":"flex-column","flex-row-ns":"flex-row","flex-wrap-ns":"flex-wrap","flex-nowrap-ns":"flex-nowrap","flex-wrap-reverse-ns":"flex-wrap-reverse","flex-column-reverse-ns":"flex-column-reverse","flex-row-reverse-ns":"flex-row-reverse","items-start-ns":"items-start","items-end-ns":"items-end","items-center-ns":"items-center","items-baseline-ns":"items-baseline","items-stretch-ns":"items-stretch","self-start-ns":"self-start","self-end-ns":"self-end","self-center-ns":"self-center","self-baseline-ns":"self-baseline","self-stretch-ns":"self-stretch","justify-start-ns":"justify-start","justify-end-ns":"justify-end","justify-center-ns":"justify-center","justify-between-ns":"justify-between","justify-around-ns":"justify-around","content-start-ns":"content-start","content-end-ns":"content-end","content-center-ns":"content-center","content-between-ns":"content-between","content-around-ns":"content-around","content-stretch-ns":"content-stretch","order-0-ns":"order-0","order-1-ns":"order-1","order-2-ns":"order-2","order-3-ns":"order-3","order-4-ns":"order-4","order-5-ns":"order-5","order-6-ns":"order-6","order-7-ns":"order-7","order-8-ns":"order-8","order-last-ns":"order-last","fl-ns":"fl","fr-ns":"fr","fn-ns":"fn","i-ns":"i","fs-normal-ns":"fs-normal","normal-ns":"normal","b-ns":"b","fw1-ns":"fw1","fw2-ns":"fw2","fw3-ns":"fw3","fw4-ns":"fw4","fw5-ns":"fw5","fw6-ns":"fw6","fw7-ns":"fw7","fw8-ns":"fw8","fw9-ns":"fw9","h1-ns":"h1","h2-ns":"h2","h3-ns":"h3","h4-ns":"h4","h5-ns":"h5","h-25-ns":"h-25","h-50-ns":"h-50","h-75-ns":"h-75","h-100-ns":"h-100","min-h-100-ns":"min-h-100","vh-25-ns":"vh-25","vh-50-ns":"vh-50","vh-75-ns":"vh-75","vh-100-ns":"vh-100","min-vh-100-ns":"min-vh-100","h-auto-ns":"h-auto","h-inherit-ns":"h-inherit","tracked-ns":"tracked","tracked-tight-ns":"tracked-tight","tracked-mega-ns":"tracked-mega","lh-solid-ns":"lh-solid","lh-title-ns":"lh-title","lh-copy-ns":"lh-copy","mw-100-ns":"mw-100","mw1-ns":"mw1","mw2-ns":"mw2","mw3-ns":"mw3","mw4-ns":"mw4","mw5-ns":"mw5","mw6-ns":"mw6","mw7-ns":"mw7","mw8-ns":"mw8","mw9-ns":"mw9","mw-none-ns":"mw-none","w1-ns":"w1","w2-ns":"w2","w3-ns":"w3","w4-ns":"w4","w5-ns":"w5","w-10-ns":"w-10","w-20-ns":"w-20","w-25-ns":"w-25","w-30-ns":"w-30","w-33-ns":"w-33","w-34-ns":"w-34","w-40-ns":"w-40","w-50-ns":"w-50","w-60-ns":"w-60","w-70-ns":"w-70","w-75-ns":"w-75","w-80-ns":"w-80","w-90-ns":"w-90","w-100-ns":"w-100","w-third-ns":"w-third","w-two-thirds-ns":"w-two-thirds","w-auto-ns":"w-auto","overflow-visible-ns":"overflow-visible","overflow-hidden-ns":"overflow-hidden","overflow-scroll-ns":"overflow-scroll","overflow-auto-ns":"overflow-auto","overflow-x-visible-ns":"overflow-x-visible","overflow-x-hidden-ns":"overflow-x-hidden","overflow-x-scroll-ns":"overflow-x-scroll","overflow-x-auto-ns":"overflow-x-auto","overflow-y-visible-ns":"overflow-y-visible","overflow-y-hidden-ns":"overflow-y-hidden","overflow-y-scroll-ns":"overflow-y-scroll","overflow-y-auto-ns":"overflow-y-auto","static-ns":"static","relative-ns":"relative","absolute-ns":"absolute","fixed-ns":"fixed","rotate-45-ns":"rotate-45","rotate-90-ns":"rotate-90","rotate-135-ns":"rotate-135","rotate-180-ns":"rotate-180","rotate-225-ns":"rotate-225","rotate-270-ns":"rotate-270","rotate-315-ns":"rotate-315","pa0-ns":"pa0","pa1-ns":"pa1","pa2-ns":"pa2","pa3-ns":"pa3","pa4-ns":"pa4","pa5-ns":"pa5","pa6-ns":"pa6","pa7-ns":"pa7","pl0-ns":"pl0","pl1-ns":"pl1","pl2-ns":"pl2","pl3-ns":"pl3","pl4-ns":"pl4","pl5-ns":"pl5","pl6-ns":"pl6","pl7-ns":"pl7","pr0-ns":"pr0","pr1-ns":"pr1","pr2-ns":"pr2","pr3-ns":"pr3","pr4-ns":"pr4","pr5-ns":"pr5","pr6-ns":"pr6","pr7-ns":"pr7","pb0-ns":"pb0","pb1-ns":"pb1","pb2-ns":"pb2","pb3-ns":"pb3","pb4-ns":"pb4","pb5-ns":"pb5","pb6-ns":"pb6","pb7-ns":"pb7","pt0-ns":"pt0","pt1-ns":"pt1","pt2-ns":"pt2","pt3-ns":"pt3","pt4-ns":"pt4","pt5-ns":"pt5","pt6-ns":"pt6","pt7-ns":"pt7","pv0-ns":"pv0","pv1-ns":"pv1","pv2-ns":"pv2","pv3-ns":"pv3","pv4-ns":"pv4","pv5-ns":"pv5","pv6-ns":"pv6","pv7-ns":"pv7","ph0-ns":"ph0","ph1-ns":"ph1","ph2-ns":"ph2","ph3-ns":"ph3","ph4-ns":"ph4","ph5-ns":"ph5","ph6-ns":"ph6","ph7-ns":"ph7","ma0-ns":"ma0","ma1-ns":"ma1","ma2-ns":"ma2","ma3-ns":"ma3","ma4-ns":"ma4","ma5-ns":"ma5","ma6-ns":"ma6","ma7-ns":"ma7","ml0-ns":"ml0","ml1-ns":"ml1","ml2-ns":"ml2","ml3-ns":"ml3","ml4-ns":"ml4","ml5-ns":"ml5","ml6-ns":"ml6","ml7-ns":"ml7","mr0-ns":"mr0","mr1-ns":"mr1","mr2-ns":"mr2","mr3-ns":"mr3","mr4-ns":"mr4","mr5-ns":"mr5","mr6-ns":"mr6","mr7-ns":"mr7","mb0-ns":"mb0","mb1-ns":"mb1","mb2-ns":"mb2","mb3-ns":"mb3","mb4-ns":"mb4","mb5-ns":"mb5","mb6-ns":"mb6","mb7-ns":"mb7","mt0-ns":"mt0","mt1-ns":"mt1","mt2-ns":"mt2","mt3-ns":"mt3","mt4-ns":"mt4","mt5-ns":"mt5","mt6-ns":"mt6","mt7-ns":"mt7","mv0-ns":"mv0","mv1-ns":"mv1","mv2-ns":"mv2","mv3-ns":"mv3","mv4-ns":"mv4","mv5-ns":"mv5","mv6-ns":"mv6","mv7-ns":"mv7","mh0-ns":"mh0","mh1-ns":"mh1","mh2-ns":"mh2","mh3-ns":"mh3","mh4-ns":"mh4","mh5-ns":"mh5","mh6-ns":"mh6","mh7-ns":"mh7","na1-ns":"na1","na2-ns":"na2","na3-ns":"na3","na4-ns":"na4","na5-ns":"na5","na6-ns":"na6","na7-ns":"na7","nl1-ns":"nl1","nl2-ns":"nl2","nl3-ns":"nl3","nl4-ns":"nl4","nl5-ns":"nl5","nl6-ns":"nl6","nl7-ns":"nl7","nr1-ns":"nr1","nr2-ns":"nr2","nr3-ns":"nr3","nr4-ns":"nr4","nr5-ns":"nr5","nr6-ns":"nr6","nr7-ns":"nr7","nb1-ns":"nb1","nb2-ns":"nb2","nb3-ns":"nb3","nb4-ns":"nb4","nb5-ns":"nb5","nb6-ns":"nb6","nb7-ns":"nb7","nt1-ns":"nt1","nt2-ns":"nt2","nt3-ns":"nt3","nt4-ns":"nt4","nt5-ns":"nt5","nt6-ns":"nt6","nt7-ns":"nt7","strike-ns":"strike","underline-ns":"underline","no-underline-ns":"no-underline","tl-ns":"tl","tr-ns":"tr","tc-ns":"tc","tj-ns":"tj","ttc-ns":"ttc","ttl-ns":"ttl","ttu-ns":"ttu","ttn-ns":"ttn","f-6-ns":"f-6","f-headline-ns":"f-headline","f-5-ns":"f-5","f-subheadline-ns":"f-subheadline","f1-ns":"f1","f2-ns":"f2","f3-ns":"f3","f4-ns":"f4","f5-ns":"f5","f6-ns":"f6","f7-ns":"f7","measure-ns":"measure","measure-wide-ns":"measure-wide","measure-narrow-ns":"measure-narrow","indent-ns":"indent","small-caps-ns":"small-caps","truncate-ns":"truncate","center-ns":"center","mr-auto-ns":"mr-auto","ml-auto-ns":"ml-auto","clip-ns":"clip","ws-normal-ns":"ws-normal","nowrap-ns":"nowrap","pre-ns":{"@media screen and (min-width: 30em)":{whiteSpace:"pre"}},"v-base-ns":"v-base","v-mid-ns":"v-mid","v-top-ns":"v-top","v-btm-ns":"v-btm","aspect-ratio-m":"aspect-ratio","aspect-ratio--16x9-m":"aspect-ratio--16x9","aspect-ratio--9x16-m":"aspect-ratio--9x16","aspect-ratio--4x3-m":"aspect-ratio--4x3","aspect-ratio--3x4-m":"aspect-ratio--3x4","aspect-ratio--6x4-m":"aspect-ratio--6x4","aspect-ratio--4x6-m":"aspect-ratio--4x6","aspect-ratio--8x5-m":"aspect-ratio--8x5","aspect-ratio--5x8-m":"aspect-ratio--5x8","aspect-ratio--7x5-m":"aspect-ratio--7x5","aspect-ratio--5x7-m":"aspect-ratio--5x7","aspect-ratio--1x1-m":"aspect-ratio--1x1","aspect-ratio--object-m":"aspect-ratio--object","cover-m":"cover","contain-m":"contain","bg-center-m":"bg-center","bg-top-m":"bg-top","bg-right-m":"bg-right","bg-bottom-m":"bg-bottom","bg-left-m":"bg-left","outline-m":"outline","outline-transparent-m":"outline-transparent","outline-0-m":"outline-0","ba-m":"ba","bt-m":"bt","br-m":"br","bb-m":"bb","bl-m":"bl","bn-m":"bn","br0-m":"br0","br1-m":"br1","br2-m":"br2","br3-m":"br3","br4-m":"br4","br-100-m":"br-100","br-pill-m":"br-pill","br--bottom-m":"br--bottom","br--top-m":"br--top","br--right-m":"br--right","br--left-m":"br--left","b--dotted-m":"b--dotted","b--dashed-m":"b--dashed","b--solid-m":"b--solid","b--none-m":"b--none","bw0-m":"bw0","bw1-m":"bw1","bw2-m":"bw2","bw3-m":"bw3","bw4-m":"bw4","bw5-m":"bw5","bt-0-m":"bt-0","br-0-m":"br-0","bb-0-m":"bb-0","bl-0-m":"bl-0","shadow-1-m":"shadow-1","shadow-2-m":"shadow-2","shadow-3-m":"shadow-3","shadow-4-m":"shadow-4","shadow-5-m":"shadow-5","top-0-m":"top-0","left-0-m":"left-0","right-0-m":"right-0","bottom-0-m":"bottom-0","top-1-m":"top-1","left-1-m":"left-1","right-1-m":"right-1","bottom-1-m":"bottom-1","top-2-m":"top-2","left-2-m":"left-2","right-2-m":"right-2","bottom-2-m":"bottom-2","top--1-m":"top--1","right--1-m":"right--1","bottom--1-m":"bottom--1","left--1-m":"left--1","top--2-m":"top--2","right--2-m":"right--2","bottom--2-m":"bottom--2","left--2-m":"left--2","absolute--fill-m":"absolute--fill","cl-m":"cl","cr-m":"cr","cb-m":"cb","cn-m":"cn","dn-m":"dn","di-m":"di","db-m":"db","dib-m":"dib","dit-m":"dit","dt-m":"dt","dtc-m":"dtc","dt-row-m":"dt-row","dt-row-group-m":"dt-row-group","dt-column-m":"dt-column","dt-column-group-m":"dt-column-group","dt--fixed-m":"dt--fixed","flex-m":"flex","inline-flex-m":"inline-flex","flex-auto-m":"flex-auto","flex-none-m":"flex-none","flex-column-m":"flex-column","flex-row-m":"flex-row","flex-wrap-m":"flex-wrap","flex-nowrap-m":"flex-nowrap","flex-wrap-reverse-m":"flex-wrap-reverse","flex-column-reverse-m":"flex-column-reverse","flex-row-reverse-m":"flex-row-reverse","items-start-m":"items-start","items-end-m":"items-end","items-center-m":"items-center","items-baseline-m":"items-baseline","items-stretch-m":"items-stretch","self-start-m":"self-start","self-end-m":"self-end","self-center-m":"self-center","self-baseline-m":"self-baseline","self-stretch-m":"self-stretch","justify-start-m":"justify-start","justify-end-m":"justify-end","justify-center-m":"justify-center","justify-between-m":"justify-between","justify-around-m":"justify-around","content-start-m":"content-start","content-end-m":"content-end","content-center-m":"content-center","content-between-m":"content-between","content-around-m":"content-around","content-stretch-m":"content-stretch","order-0-m":"order-0","order-1-m":"order-1","order-2-m":"order-2","order-3-m":"order-3","order-4-m":"order-4","order-5-m":"order-5","order-6-m":"order-6","order-7-m":"order-7","order-8-m":"order-8","order-last-m":"order-last","fl-m":"fl","fr-m":"fr","fn-m":"fn","i-m":"i","fs-normal-m":"fs-normal","normal-m":"normal","b-m":"b","fw1-m":"fw1","fw2-m":"fw2","fw3-m":"fw3","fw4-m":"fw4","fw5-m":"fw5","fw6-m":"fw6","fw7-m":"fw7","fw8-m":"fw8","fw9-m":"fw9","h1-m":"h1","h2-m":"h2","h3-m":"h3","h4-m":"h4","h5-m":"h5","h-25-m":"h-25","h-50-m":"h-50","h-75-m":"h-75","h-100-m":"h-100","min-h-100-m":"min-h-100","vh-25-m":"vh-25","vh-50-m":"vh-50","vh-75-m":"vh-75","vh-100-m":"vh-100","min-vh-100-m":"min-vh-100","h-auto-m":"h-auto","h-inherit-m":"h-inherit","tracked-m":"tracked","tracked-tight-m":"tracked-tight","tracked-mega-m":"tracked-mega","lh-solid-m":"lh-solid","lh-title-m":"lh-title","lh-copy-m":"lh-copy","mw-100-m":"mw-100","mw1-m":"mw1","mw2-m":"mw2","mw3-m":"mw3","mw4-m":"mw4","mw5-m":"mw5","mw6-m":"mw6","mw7-m":"mw7","mw8-m":"mw8","mw9-m":"mw9","mw-none-m":"mw-none","w1-m":"w1","w2-m":"w2","w3-m":"w3","w4-m":"w4","w5-m":"w5","w-10-m":"w-10","w-20-m":"w-20","w-25-m":"w-25","w-30-m":"w-30","w-33-m":"w-33","w-34-m":"w-34","w-40-m":"w-40","w-50-m":"w-50","w-60-m":"w-60","w-70-m":"w-70","w-75-m":"w-75","w-80-m":"w-80","w-90-m":"w-90","w-100-m":"w-100","w-third-m":"w-third","w-two-thirds-m":"w-two-thirds","w-auto-m":"w-auto","overflow-visible-m":"overflow-visible","overflow-hidden-m":"overflow-hidden","overflow-scroll-m":"overflow-scroll","overflow-auto-m":"overflow-auto","overflow-x-visible-m":"overflow-x-visible","overflow-x-hidden-m":"overflow-x-hidden","overflow-x-scroll-m":"overflow-x-scroll","overflow-x-auto-m":"overflow-x-auto","overflow-y-visible-m":"overflow-y-visible","overflow-y-hidden-m":"overflow-y-hidden","overflow-y-scroll-m":"overflow-y-scroll","overflow-y-auto-m":"overflow-y-auto","static-m":"static","relative-m":"relative","absolute-m":"absolute","fixed-m":"fixed","rotate-45-m":"rotate-45","rotate-90-m":"rotate-90","rotate-135-m":"rotate-135","rotate-180-m":"rotate-180","rotate-225-m":"rotate-225","rotate-270-m":"rotate-270","rotate-315-m":"rotate-315","pa0-m":"pa0","pa1-m":"pa1","pa2-m":"pa2","pa3-m":"pa3","pa4-m":"pa4","pa5-m":"pa5","pa6-m":"pa6","pa7-m":"pa7","pl0-m":"pl0","pl1-m":"pl1","pl2-m":"pl2","pl3-m":"pl3","pl4-m":"pl4","pl5-m":"pl5","pl6-m":"pl6","pl7-m":"pl7","pr0-m":"pr0","pr1-m":"pr1","pr2-m":"pr2","pr3-m":"pr3","pr4-m":"pr4","pr5-m":"pr5","pr6-m":"pr6","pr7-m":"pr7","pb0-m":"pb0","pb1-m":"pb1","pb2-m":"pb2","pb3-m":"pb3","pb4-m":"pb4","pb5-m":"pb5","pb6-m":"pb6","pb7-m":"pb7","pt0-m":"pt0","pt1-m":"pt1","pt2-m":"pt2","pt3-m":"pt3","pt4-m":"pt4","pt5-m":"pt5","pt6-m":"pt6","pt7-m":"pt7","pv0-m":"pv0","pv1-m":"pv1","pv2-m":"pv2","pv3-m":"pv3","pv4-m":"pv4","pv5-m":"pv5","pv6-m":"pv6","pv7-m":"pv7","ph0-m":"ph0","ph1-m":"ph1","ph2-m":"ph2","ph3-m":"ph3","ph4-m":"ph4","ph5-m":"ph5","ph6-m":"ph6","ph7-m":"ph7","ma0-m":"ma0","ma1-m":"ma1","ma2-m":"ma2","ma3-m":"ma3","ma4-m":"ma4","ma5-m":"ma5","ma6-m":"ma6","ma7-m":"ma7","ml0-m":"ml0","ml1-m":"ml1","ml2-m":"ml2","ml3-m":"ml3","ml4-m":"ml4","ml5-m":"ml5","ml6-m":"ml6","ml7-m":"ml7","mr0-m":"mr0","mr1-m":"mr1","mr2-m":"mr2","mr3-m":"mr3","mr4-m":"mr4","mr5-m":"mr5","mr6-m":"mr6","mr7-m":"mr7","mb0-m":"mb0","mb1-m":"mb1","mb2-m":"mb2","mb3-m":"mb3","mb4-m":"mb4","mb5-m":"mb5","mb6-m":"mb6","mb7-m":"mb7","mt0-m":"mt0","mt1-m":"mt1","mt2-m":"mt2","mt3-m":"mt3","mt4-m":"mt4","mt5-m":"mt5","mt6-m":"mt6","mt7-m":"mt7","mv0-m":"mv0","mv1-m":"mv1","mv2-m":"mv2","mv3-m":"mv3","mv4-m":"mv4","mv5-m":"mv5","mv6-m":"mv6","mv7-m":"mv7","mh0-m":"mh0","mh1-m":"mh1","mh2-m":"mh2","mh3-m":"mh3","mh4-m":"mh4","mh5-m":"mh5","mh6-m":"mh6","mh7-m":"mh7","na1-m":"na1","na2-m":"na2","na3-m":"na3","na4-m":"na4","na5-m":"na5","na6-m":"na6","na7-m":"na7","nl1-m":"nl1","nl2-m":"nl2","nl3-m":"nl3","nl4-m":"nl4","nl5-m":"nl5","nl6-m":"nl6","nl7-m":"nl7","nr1-m":"nr1","nr2-m":"nr2","nr3-m":"nr3","nr4-m":"nr4","nr5-m":"nr5","nr6-m":"nr6","nr7-m":"nr7","nb1-m":"nb1","nb2-m":"nb2","nb3-m":"nb3","nb4-m":"nb4","nb5-m":"nb5","nb6-m":"nb6","nb7-m":"nb7","nt1-m":"nt1","nt2-m":"nt2","nt3-m":"nt3","nt4-m":"nt4","nt5-m":"nt5","nt6-m":"nt6","nt7-m":"nt7","strike-m":"strike","underline-m":"underline","no-underline-m":"no-underline","tl-m":"tl","tr-m":"tr","tc-m":"tc","tj-m":"tj","ttc-m":"ttc","ttl-m":"ttl","ttu-m":"ttu","ttn-m":"ttn","f-6-m":"f-6","f-headline-m":"f-headline","f-5-m":"f-5","f-subheadline-m":"f-subheadline","f1-m":"f1","f2-m":"f2","f3-m":"f3","f4-m":"f4","f5-m":"f5","f6-m":"f6","f7-m":"f7","measure-m":"measure","measure-wide-m":"measure-wide","measure-narrow-m":"measure-narrow","indent-m":"indent","small-caps-m":"small-caps","truncate-m":"truncate","center-m":"center","mr-auto-m":"mr-auto","ml-auto-m":"ml-auto","clip-m":"clip","ws-normal-m":"ws-normal","nowrap-m":"nowrap","pre-m":{"@media screen and (min-width: 30em) and (max-width: 60em)":{whiteSpace:"pre"}},"v-base-m":"v-base","v-mid-m":"v-mid","v-top-m":"v-top","v-btm-m":"v-btm","aspect-ratio-l":"aspect-ratio","aspect-ratio--16x9-l":"aspect-ratio--16x9","aspect-ratio--9x16-l":"aspect-ratio--9x16","aspect-ratio--4x3-l":"aspect-ratio--4x3","aspect-ratio--3x4-l":"aspect-ratio--3x4","aspect-ratio--6x4-l":"aspect-ratio--6x4","aspect-ratio--4x6-l":"aspect-ratio--4x6","aspect-ratio--8x5-l":"aspect-ratio--8x5","aspect-ratio--5x8-l":"aspect-ratio--5x8","aspect-ratio--7x5-l":"aspect-ratio--7x5","aspect-ratio--5x7-l":"aspect-ratio--5x7","aspect-ratio--1x1-l":"aspect-ratio--1x1","aspect-ratio--object-l":"aspect-ratio--object","cover-l":"cover","contain-l":"contain","bg-center-l":"bg-center","bg-top-l":"bg-top","bg-right-l":"bg-right","bg-bottom-l":"bg-bottom","bg-left-l":"bg-left","outline-l":"outline","outline-transparent-l":"outline-transparent","outline-0-l":"outline-0","ba-l":"ba","bt-l":"bt","br-l":"br","bb-l":"bb","bl-l":"bl","bn-l":"bn","br0-l":"br0","br1-l":"br1","br2-l":"br2","br3-l":"br3","br4-l":"br4","br-100-l":"br-100","br-pill-l":"br-pill","br--bottom-l":"br--bottom","br--top-l":"br--top","br--right-l":"br--right","br--left-l":"br--left","b--dotted-l":"b--dotted","b--dashed-l":"b--dashed","b--solid-l":"b--solid","b--none-l":"b--none","bw0-l":"bw0","bw1-l":"bw1","bw2-l":"bw2","bw3-l":"bw3","bw4-l":"bw4","bw5-l":"bw5","bt-0-l":"bt-0","br-0-l":"br-0","bb-0-l":"bb-0","bl-0-l":"bl-0","shadow-1-l":"shadow-1","shadow-2-l":"shadow-2","shadow-3-l":"shadow-3","shadow-4-l":"shadow-4","shadow-5-l":"shadow-5","top-0-l":"top-0","left-0-l":"left-0","right-0-l":"right-0","bottom-0-l":"bottom-0","top-1-l":"top-1","left-1-l":"left-1","right-1-l":"right-1","bottom-1-l":"bottom-1","top-2-l":"top-2","left-2-l":"left-2","right-2-l":"right-2","bottom-2-l":"bottom-2","top--1-l":"top--1","right--1-l":"right--1","bottom--1-l":"bottom--1","left--1-l":"left--1","top--2-l":"top--2","right--2-l":"right--2","bottom--2-l":"bottom--2","left--2-l":"left--2","absolute--fill-l":"absolute--fill","cl-l":"cl","cr-l":"cr","cb-l":"cb","cn-l":"cn","dn-l":"dn","di-l":"di","db-l":"db","dib-l":"dib","dit-l":"dit","dt-l":"dt","dtc-l":"dtc","dt-row-l":"dt-row","dt-row-group-l":"dt-row-group","dt-column-l":"dt-column","dt-column-group-l":"dt-column-group","dt--fixed-l":"dt--fixed","flex-l":"flex","inline-flex-l":"inline-flex","flex-auto-l":"flex-auto","flex-none-l":"flex-none","flex-column-l":"flex-column","flex-row-l":"flex-row","flex-wrap-l":"flex-wrap","flex-nowrap-l":"flex-nowrap","flex-wrap-reverse-l":"flex-wrap-reverse","flex-column-reverse-l":"flex-column-reverse","flex-row-reverse-l":"flex-row-reverse","items-start-l":"items-start","items-end-l":"items-end","items-center-l":"items-center","items-baseline-l":"items-baseline","items-stretch-l":"items-stretch","self-start-l":"self-start","self-end-l":"self-end","self-center-l":"self-center","self-baseline-l":"self-baseline","self-stretch-l":"self-stretch","justify-start-l":"justify-start","justify-end-l":"justify-end","justify-center-l":"justify-center","justify-between-l":"justify-between","justify-around-l":"justify-around","content-start-l":"content-start","content-end-l":"content-end","content-center-l":"content-center","content-between-l":"content-between","content-around-l":"content-around","content-stretch-l":"content-stretch","order-0-l":"order-0","order-1-l":"order-1","order-2-l":"order-2","order-3-l":"order-3","order-4-l":"order-4","order-5-l":"order-5","order-6-l":"order-6","order-7-l":"order-7","order-8-l":"order-8","order-last-l":"order-last","fl-l":"fl","fr-l":"fr","fn-l":"fn","i-l":"i","fs-normal-l":"fs-normal","normal-l":"normal","b-l":"b","fw1-l":"fw1","fw2-l":"fw2","fw3-l":"fw3","fw4-l":"fw4","fw5-l":"fw5","fw6-l":"fw6","fw7-l":"fw7","fw8-l":"fw8","fw9-l":"fw9","h1-l":"h1","h2-l":"h2","h3-l":"h3","h4-l":"h4","h5-l":"h5","h-25-l":"h-25","h-50-l":"h-50","h-75-l":"h-75","h-100-l":"h-100","min-h-100-l":"min-h-100","vh-25-l":"vh-25","vh-50-l":"vh-50","vh-75-l":"vh-75","vh-100-l":"vh-100","min-vh-100-l":"min-vh-100","h-auto-l":"h-auto","h-inherit-l":"h-inherit","tracked-l":"tracked","tracked-tight-l":"tracked-tight","tracked-mega-l":"tracked-mega","lh-solid-l":"lh-solid","lh-title-l":"lh-title","lh-copy-l":"lh-copy","mw-100-l":"mw-100","mw1-l":"mw1","mw2-l":"mw2","mw3-l":"mw3","mw4-l":"mw4","mw5-l":"mw5","mw6-l":"mw6","mw7-l":"mw7","mw8-l":"mw8","mw9-l":"mw9","mw-none-l":"mw-none","w1-l":"w1","w2-l":"w2","w3-l":"w3","w4-l":"w4","w5-l":"w5","w-10-l":"w-10","w-20-l":"w-20","w-25-l":"w-25","w-30-l":"w-30","w-33-l":"w-33","w-34-l":"w-34","w-40-l":"w-40","w-50-l":"w-50","w-60-l":"w-60","w-70-l":"w-70","w-75-l":"w-75","w-80-l":"w-80","w-90-l":"w-90","w-100-l":"w-100","w-third-l":"w-third","w-two-thirds-l":"w-two-thirds","w-auto-l":"w-auto","overflow-visible-l":"overflow-visible","overflow-hidden-l":"overflow-hidden","overflow-scroll-l":"overflow-scroll","overflow-auto-l":"overflow-auto","overflow-x-visible-l":"overflow-x-visible","overflow-x-hidden-l":"overflow-x-hidden","overflow-x-scroll-l":"overflow-x-scroll","overflow-x-auto-l":"overflow-x-auto","overflow-y-visible-l":"overflow-y-visible","overflow-y-hidden-l":"overflow-y-hidden","overflow-y-scroll-l":"overflow-y-scroll","overflow-y-auto-l":"overflow-y-auto","static-l":"static","relative-l":"relative","absolute-l":"absolute","fixed-l":"fixed","rotate-45-l":"rotate-45","rotate-90-l":"rotate-90","rotate-135-l":"rotate-135","rotate-180-l":"rotate-180","rotate-225-l":"rotate-225","rotate-270-l":"rotate-270","rotate-315-l":"rotate-315","pa0-l":"pa0","pa1-l":"pa1","pa2-l":"pa2","pa3-l":"pa3","pa4-l":"pa4","pa5-l":"pa5","pa6-l":"pa6","pa7-l":"pa7","pl0-l":"pl0","pl1-l":"pl1","pl2-l":"pl2","pl3-l":"pl3","pl4-l":"pl4","pl5-l":"pl5","pl6-l":"pl6","pl7-l":"pl7","pr0-l":"pr0","pr1-l":"pr1","pr2-l":"pr2","pr3-l":"pr3","pr4-l":"pr4","pr5-l":"pr5","pr6-l":"pr6","pr7-l":"pr7","pb0-l":"pb0","pb1-l":"pb1","pb2-l":"pb2","pb3-l":"pb3","pb4-l":"pb4","pb5-l":"pb5","pb6-l":"pb6","pb7-l":"pb7","pt0-l":"pt0","pt1-l":"pt1","pt2-l":"pt2","pt3-l":"pt3","pt4-l":"pt4","pt5-l":"pt5","pt6-l":"pt6","pt7-l":"pt7","pv0-l":"pv0","pv1-l":"pv1","pv2-l":"pv2","pv3-l":"pv3","pv4-l":"pv4","pv5-l":"pv5","pv6-l":"pv6","pv7-l":"pv7","ph0-l":"ph0","ph1-l":"ph1","ph2-l":"ph2","ph3-l":"ph3","ph4-l":"ph4","ph5-l":"ph5","ph6-l":"ph6","ph7-l":"ph7","ma0-l":"ma0","ma1-l":"ma1","ma2-l":"ma2","ma3-l":"ma3","ma4-l":"ma4","ma5-l":"ma5","ma6-l":"ma6","ma7-l":"ma7","ml0-l":"ml0","ml1-l":"ml1","ml2-l":"ml2","ml3-l":"ml3","ml4-l":"ml4","ml5-l":"ml5","ml6-l":"ml6","ml7-l":"ml7","mr0-l":"mr0","mr1-l":"mr1","mr2-l":"mr2","mr3-l":"mr3","mr4-l":"mr4","mr5-l":"mr5","mr6-l":"mr6","mr7-l":"mr7","mb0-l":"mb0","mb1-l":"mb1","mb2-l":"mb2","mb3-l":"mb3","mb4-l":"mb4","mb5-l":"mb5","mb6-l":"mb6","mb7-l":"mb7","mt0-l":"mt0","mt1-l":"mt1","mt2-l":"mt2","mt3-l":"mt3","mt4-l":"mt4","mt5-l":"mt5","mt6-l":"mt6","mt7-l":"mt7","mv0-l":"mv0","mv1-l":"mv1","mv2-l":"mv2","mv3-l":"mv3","mv4-l":"mv4","mv5-l":"mv5","mv6-l":"mv6","mv7-l":"mv7","mh0-l":"mh0","mh1-l":"mh1","mh2-l":"mh2","mh3-l":"mh3","mh4-l":"mh4","mh5-l":"mh5","mh6-l":"mh6","mh7-l":"mh7","na1-l":"na1","na2-l":"na2","na3-l":"na3","na4-l":"na4","na5-l":"na5","na6-l":"na6","na7-l":"na7","nl1-l":"nl1","nl2-l":"nl2","nl3-l":"nl3","nl4-l":"nl4","nl5-l":"nl5","nl6-l":"nl6","nl7-l":"nl7","nr1-l":"nr1","nr2-l":"nr2","nr3-l":"nr3","nr4-l":"nr4","nr5-l":"nr5","nr6-l":"nr6","nr7-l":"nr7","nb1-l":"nb1","nb2-l":"nb2","nb3-l":"nb3","nb4-l":"nb4","nb5-l":"nb5","nb6-l":"nb6","nb7-l":"nb7","nt1-l":"nt1","nt2-l":"nt2","nt3-l":"nt3","nt4-l":"nt4","nt5-l":"nt5","nt6-l":"nt6","nt7-l":"nt7","strike-l":"strike","underline-l":"underline","no-underline-l":"no-underline","tl-l":"tl","tr-l":"tr","tc-l":"tc","tj-l":"tj","ttc-l":"ttc","ttl-l":"ttl","ttu-l":"ttu","ttn-l":"ttn","f-6-l":"f-6","f-headline-l":"f-headline","f-5-l":"f-5","f-subheadline-l":"f-subheadline","f1-l":"f1","f2-l":"f2","f3-l":"f3","f4-l":"f4","f5-l":"f5","f6-l":"f6","f7-l":"f7","measure-l":"measure","measure-wide-l":"measure-wide","measure-narrow-l":"measure-narrow","indent-l":"indent","small-caps-l":"small-caps","truncate-l":"truncate","center-l":"center","mr-auto-l":"mr-auto","ml-auto-l":"ml-auto","clip-l":"clip","ws-normal-l":"ws-normal","nowrap-l":"nowrap","pre-l":{"@media screen and (min-width: 60em)":{whiteSpace:"pre"}},"v-base-l":"v-base","v-mid-l":"v-mid","v-top-l":"v-top","v-btm-l":"v-btm",ns:"@media screen and (min-width: 30em)",m:"@media screen and (min-width: 30em) and (max-width: 60em)",l:"@media screen and (min-width: 60em)"},HUt=Pm,jUt=Abe,qUt=GUt,vO=Fbe,Lbe=function(t){var e;return typeof t=="string"?e=t.split(" "):e=t,jUt(e,function(n){var r=vO[n];if(typeof r=="string"){var i=vO[HUt.getAtRuleSize(n)],s=r;r={},r[i]=vO[s]}return r||(console.error(n+" is not in the list of available Tachyons classes"),null)}).reduce(function(n,r){return qUt(n,r)},{})},XUt=["html { line-height: 1.15;  -ms-text-size-adjust: 100%;  -webkit-text-size-adjust: 100%;  }","body { margin: 0; }","article, aside, footer, header, nav, section { display: block; }","h1 { font-size: 2em; margin: .67em 0; }","figcaption, figure, main { display: block; }","figure { margin: 1em 40px; }","hr { box-sizing: content-box;  height: 0;  overflow: visible;  }","pre { font-family: monospace, monospace;  font-size: 1em;  }","a { background-color: transparent;  -webkit-text-decoration-skip: objects;  }","abbr[title] { border-bottom: none;  text-decoration: underline;  text-decoration: underline dotted;  }","b, strong { font-weight: inherit; }","b, strong { font-weight: bolder; }","code, kbd, samp { font-family: monospace, monospace;  font-size: 1em;  }","dfn { font-style: italic; }","mark { background-color: #ff0; color: #000; }","small { font-size: 80%; }","sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }","sub { bottom: -0.25em; }","sup { top: -0.5em; }","audio, video { display: inline-block; }","audio:not([controls]) { display: none; height: 0; }","img { border-style: none; }","svg:not(:root) { overflow: hidden; }","button, input, optgroup, select, textarea { font-family: sans-serif;  font-size: 100%;  line-height: 1.15;  margin: 0;  }","button, input { overflow: visible; }","button, select { text-transform: none; }",'button, html [type="button"], [type="reset"], [type="submit"] { -webkit-appearance: button;  }','button::-moz-focus-inner, [type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner, [type="submit"]::-moz-focus-inner { border-style: none; padding: 0; }','button:-moz-focusring, [type="button"]:-moz-focusring,[type="reset"]:-moz-focusring, [type="submit"]:-moz-focusring { outline: 1px dotted ButtonText; }',"fieldset { padding: .35em .75em .625em; }","legend { box-sizing: border-box;  color: inherit;  display: table;  max-width: 100%;  padding: 0;  white-space: normal;  }","progress { display: inline-block;  vertical-align: baseline;  }","textarea { overflow: auto; }",'[type="checkbox"], [type="radio"] { box-sizing: border-box;  padding: 0;  }','[type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button { height: auto; }','[type="search"] { -webkit-appearance: textfield;  outline-offset: -2px;  }','[type="search"]::-webkit-search-cancel-button,[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }',"::-webkit-file-upload-button { -webkit-appearance: button;  font: inherit;  }","details, menu { display: block; }","summary { display: list-item; }","canvas { display: inline-block; }","template { display: none; }","[hidden] { display: none; }",'html, body, div, article, section, main, footer, header, form, fieldset, legend,pre, code, a, h1, h2, h3, h4, h5, h6, p, ul, ol, li, dl, dt, dd, textarea, table,td, th, tr, input[type="email"], input[type="number"], input[type="password"],input[type="tel"], input[type="text"], input[type="url"], .border-box { box-sizing: border-box; }',"img { max-width: 100%; }","code, .code { font-family: Consolas, monaco, monospace; }"],YUt=XUt,KUt=function(t){YUt.forEach(function(e){t.insertRule(e)})};function ZUt(t,e,n,r){var i=-1,s=t==null?0:t.length;for(r&&s&&(n=t[++i]);++i<s;)n=e(n,t[i],i,t);return n}var Pbe=ZUt;function JUt(t,e,n,r,i){return i(t,function(s,a,o){n=r?(r=!1,s):e(n,s,a,o)}),n}var QUt=JUt,eVt=Pbe,tVt=kbe,nVt=Ebe,rVt=QUt,iVt=fl;function sVt(t,e,n){var r=iVt(t)?eVt:rVt,i=arguments.length<3;return r(t,nVt(e),n,i,tVt)}var zbe=sVt,aVt=zbe,oVt=Tf,lVt=fI,ZJ=Lbe,uVt=function t(e,n){return aVt(e,function(r,i,s){return oVt(i)===!0?r[s]=t(i,n):r[s]=lVt(n)?n(ZJ(i)):ZJ(i),r},{})};function cVt(t){return function(e){return t==null?void 0:t[e]}}var fVt=cVt,dVt=fVt,hVt={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},pVt=dVt(hVt),mVt=pVt,gVt=mVt,vVt=pW,yVt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bVt="\\u0300-\\u036f",xVt="\\ufe20-\\ufe2f",wVt="\\u20d0-\\u20ff",_Vt=bVt+xVt+wVt,SVt="["+_Vt+"]",CVt=RegExp(SVt,"g");function EVt(t){return t=vVt(t),t&&t.replace(yVt,gVt).replace(CVt,"")}var TVt=EVt,kVt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function AVt(t){return t.match(kVt)||[]}var MVt=AVt,NVt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function $Vt(t){return NVt.test(t)}var IVt=$Vt,Bbe="\\ud800-\\udfff",DVt="\\u0300-\\u036f",RVt="\\ufe20-\\ufe2f",OVt="\\u20d0-\\u20ff",FVt=DVt+RVt+OVt,Ube="\\u2700-\\u27bf",Vbe="a-z\\xdf-\\xf6\\xf8-\\xff",LVt="\\xac\\xb1\\xd7\\xf7",PVt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",zVt="\\u2000-\\u206f",BVt=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Wbe="A-Z\\xc0-\\xd6\\xd8-\\xde",UVt="\\ufe0e\\ufe0f",Gbe=LVt+PVt+zVt+BVt,Hbe="['’]",JJ="["+Gbe+"]",VVt="["+FVt+"]",jbe="\\d+",WVt="["+Ube+"]",qbe="["+Vbe+"]",Xbe="[^"+Bbe+Gbe+jbe+Ube+Vbe+Wbe+"]",GVt="\\ud83c[\\udffb-\\udfff]",HVt="(?:"+VVt+"|"+GVt+")",jVt="[^"+Bbe+"]",Ybe="(?:\\ud83c[\\udde6-\\uddff]){2}",Kbe="[\\ud800-\\udbff][\\udc00-\\udfff]",kg="["+Wbe+"]",qVt="\\u200d",QJ="(?:"+qbe+"|"+Xbe+")",XVt="(?:"+kg+"|"+Xbe+")",eQ="(?:"+Hbe+"(?:d|ll|m|re|s|t|ve))?",tQ="(?:"+Hbe+"(?:D|LL|M|RE|S|T|VE))?",Zbe=HVt+"?",Jbe="["+UVt+"]?",YVt="(?:"+qVt+"(?:"+[jVt,Ybe,Kbe].join("|")+")"+Jbe+Zbe+")*",KVt="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ZVt="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",JVt=Jbe+Zbe+YVt,QVt="(?:"+[WVt,Ybe,Kbe].join("|")+")"+JVt,eWt=RegExp([kg+"?"+qbe+"+"+eQ+"(?="+[JJ,kg,"$"].join("|")+")",XVt+"+"+tQ+"(?="+[JJ,kg+QJ,"$"].join("|")+")",kg+"?"+QJ+"+"+eQ,kg+"+"+tQ,ZVt,KVt,jbe,QVt].join("|"),"g");function tWt(t){return t.match(eWt)||[]}var nWt=tWt,rWt=MVt,iWt=IVt,sWt=pW,aWt=nWt;function oWt(t,e,n){return t=sWt(t),e=n?void 0:e,e===void 0?iWt(t)?aWt(t):rWt(t):t.match(e)||[]}var lWt=oWt,uWt=Pbe,cWt=TVt,fWt=lWt,dWt="['’]",hWt=RegExp(dWt,"g");function pWt(t){return function(e){return uWt(fWt(cWt(e).replace(hWt,"")),t,"")}}var mWt=pWt,gWt=mWt,vWt=gWt(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),yWt=vWt,nQ=SS,bWt=pI,xWt=fl,rQ=nQ?nQ.isConcatSpreadable:void 0;function wWt(t){return xWt(t)||bWt(t)||!!(rQ&&t&&t[rQ])}var _Wt=wWt,SWt=dbe,CWt=_Wt;function Qbe(t,e,n,r,i){var s=-1,a=t.length;for(n||(n=CWt),i||(i=[]);++s<a;){var o=t[s];e>0&&n(o)?e>1?Qbe(o,e-1,n,r,i):SWt(i,o):r||(i[i.length]=o)}return i}var EWt=Qbe,TWt=EWt;function kWt(t){var e=t==null?0:t.length;return e?TWt(t,1):[]}var AWt=kWt,MWt=Pm,NWt=Abe,$Wt=zbe,IWt=yWt,DWt=AWt,d5=Fbe;function RWt(t,e){var n=d5[MWt.getAtRuleSize(t)];return $Wt(e,function(r,i,s){var a="."+t+"{"+IWt(s)+":"+i+";}";return typeof n=="string"&&(a=n+"{"+a+"}"),r.push(a),r},[])}var OWt=function(t){var e;typeof t=="string"?e=t.split(" "):e=t;var n=NWt(e,function(r){var i=d5[r];if(typeof i=="string"){var s=i;i=d5[s]}return i?RWt(r,i):(console.error(r+" is not in the list of available Tachyons classes"),[])});return DWt(n)};Ef.tachyons=Lbe;Ef.reset=KUt;Ef.wrap=uVt;Ef.globals=OWt;var vW={};Object.defineProperty(vW,"__esModule",{value:!0});const sE=BV,yO=qe,FWt=Ef;class s0 extends sE.Component{componentDidMount(){const{name:e,tab:n}=this.props;this.props.registerSurface(e,n,this)}componentDidUpdate(){return!1}render(){const{name:e,visible:n,styles:r}=this.props,i=Object.assign({},s0.defaultStyles,r),{width:s,height:a}=i;let{maxHeight:o,maxWidth:l}=i;o=a===s0.defaultStyles.height?o:a,l=s===s0.defaultStyles.width?l:s;const u=yO.css({display:n?"block":"none",backgroundColor:"white",marginTop:"10px",marginBottom:"10px",boxShadow:"0 0 6px -3px #777",padding:"10px !important",height:a,width:s,maxHeight:o,maxWidth:l,overflow:"auto"}),c=yO.css(Object.assign({backgroundColor:"white",boxSizing:"border-box",borderBottom:"1px solid #357EDD",lineHeight:"2em",marginBottom:"20px"},FWt.tachyons("fw6 tc"))),f=yO.css({boxSizing:"border-box"});return sE.h("div",{className:`${u} tf-surface`,ref:d=>this.container=d,"data-visible":n},sE.h("div",{className:`${c} tf-label`,ref:d=>this.label=d},e),sE.h("div",{className:`${f} tf-draw-area`,ref:d=>this.drawArea=d}))}}s0.defaultStyles={maxWidth:"580px",maxHeight:"580px",height:"auto",width:"auto"};vW.SurfaceComponent=s0;var yW={};Object.defineProperty(yW,"__esModule",{value:!0});const px=BV,LWt=qe,PWt=Ef;class zWt extends px.Component{render(){const{tabNames:e,activeTab:n,handleClick:r}=this.props,i=e.length>0?e.map(s=>px.h(BWt,{key:s,id:s,handleClick:r,isActive:s===n},s)):null;return px.h("div",{className:"bb b--light-gray pb2 mt3 visor-tabs"},i)}}yW.Tabs=zWt;class BWt extends px.Component{render(){const{children:e,isActive:n,handleClick:r,id:i}=this.props,s=LWt.css(Object.assign({borderBottomColor:n?"#357EDD":"#AAAAAA",borderBottomWidth:"1px",borderBottomStyle:"solid",cursor:"pointer",":hover":{color:"#357EDD"}},PWt.tachyons("b f5 mr3 pa2")));return px.h("a",{className:`${s} tf-tab`,"data-isactive":n,onClick:()=>r(i)},e)}}Object.defineProperty(LV,"__esModule",{value:!0});const yl=BV,Zh=qe,UWt=Ef,VWt=vW,WWt=yW;class bW extends yl.Component{static render(e,n,r){return yl.render(yl.h(bW,Object.assign({},r)),e,n)}constructor(e){super(e),this.surfaces=new Map;const n=e.startOpen==null?!0:e.startOpen;this.state={isOpen:n,isFullscreen:!1,activeTab:null,tabs:new Set},this.keyHandler=this.keyHandler.bind(this)}close(){this.setState({isOpen:!1})}open(){this.setState({isOpen:!0})}toggle(){this.setState({isOpen:!this.state.isOpen})}toggleFullScreen(){this.setState({isFullscreen:!this.state.isFullscreen})}isOpen(){return this.state.isOpen}isFullscreen(){return this.state.isFullscreen}getSurface(e,n){const r=this.surfaceId(e,n);let i;if(this.surfaces.has(r))i=this.surfaces.get(r);else throw Error(`Surface not found with id: ${r}`);return{container:i.container,label:i.label,drawArea:i.drawArea}}bindKeys(){document.addEventListener("keydown",this.keyHandler,!1)}unbindKeys(){document.removeEventListener("keydown",this.keyHandler)}surfaceId(e,n){return e+n}setTabs(e){const n=e.map(s=>s.tab),r=this.state.tabs;let i;for(const s of n)r.has(s)||(r.add(s),i=s);i!=null&&this.setState({tabs:r,activeTab:i})}getTabs(){return this.state.tabs}registerSurface(e,n,r){const i=this.surfaceId(e,n);this.surfaces.set(i,r)}keyHandler(e){e.keyCode===192&&(e.shiftKey?this.toggleFullScreen():this.toggle())}setActiveTab(e){this.setState({activeTab:e})}componentDidMount(){this.bindKeys()}componentWillMount(){this.setTabs(this.props.surfaceList)}componentWillReceiveProps(e){this.setTabs(e.surfaceList)}render(){const{isOpen:e,isFullscreen:n,activeTab:r}=this.state,{surfaceList:i}=this.props,s=Array.from(this.getTabs().values()),l=n?"90vw":"550px",u=Zh.css({width:l,height:"100%",backgroundColor:"#fafafa",boxSizing:"border-box",padding:"10px",position:"fixed",top:"0px",transition:"right 0.5s cubic-bezier(0.645, 0.045, 0.355, 1), width 0.5s cubic-bezier(0.645, 0.045, 0.355, 1)",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.12), 0 2px 5px rgba(0, 0, 0, 0.24)",overflow:"auto",fontFamily:"sans-serif",fontSize:"14px"}),c=Zh.css({right:"0"}),f=Zh.css({right:`calc(-${l} - 10px)`}),d=e?c:f,h=Zh.css({});return yl.h("div",{className:`${u} ${d} visor`,"data-isopen":e,"data-isfullscreen":n},yl.h(GWt,{fullScreenHandler:this.toggleFullScreen.bind(this),closeHandler:this.close.bind(this),isFullScreen:n}),yl.h(WWt.Tabs,{tabNames:s,activeTab:r,handleClick:this.setActiveTab.bind(this)}),yl.h("div",{className:`${h} visor-surfaces`},i.map(p=>yl.h(VWt.SurfaceComponent,{key:p.name+p.tab,name:p.name,tab:p.tab,styles:p.styles,registerSurface:this.registerSurface.bind(this),visible:r===p.tab}))))}}LV.VisorComponent=bW;function GWt(t){const{isFullScreen:e,fullScreenHandler:n,closeHandler:r}=t,i=Zh.css({display:"flex",backgroundColor:"white",border:"1px solid white",padding:"6px",paddingTop:"10px",marginBottom:"10px",borderRadius:"6px",marginTop:"-16px"}),s=Zh.css(Object.assign({},UWt.tachyons("f6 link br2 ph3 pv2 near-black"))),a=Zh.css({marginLeft:"auto"});return yl.h("div",{className:`${i} visor-controls`},yl.h("button",{className:`${s}`,onClick:n},e?"Minimize":"Maximise"),yl.h("button",{className:`${s} ${a}`,onClick:r},"Hide"))}Object.defineProperty(gS,"__esModule",{value:!0});const HWt=LV;let aE;const jWt="Visor",bO="tfjs-visor-container";function qWt(){if(typeof document>"u")throw new Error("No document defined. This library needs a browser/dom to work");if(document.getElementById(bO)&&aE!=null)return aE;let t=document.getElementById(bO);t==null&&(t=document.createElement("div"),t.id=bO,document.body.appendChild(t));let e;function n(s,a){let o;return e=HWt.VisorComponent.render(s,e,{ref:l=>o=l,surfaceList:Array.from(a.values())}),o}const r=new Map,i=n(t,r);return aE=new e1e(i,t,r,n),aE}gS.visor=qWt;class e1e{constructor(e,n,r,i){this.visorComponent=e,this.el=n,this.surfaceList=r,this.renderVisor=i}surface(e){const{name:n}=e,r=e.tab==null?jWt:e.tab;if(n==null||!(typeof n=="string"||n instanceof String))throw new Error("You must pass a config object with a 'name' property to create or retrieve a surface");const i=Object.assign({},e,{tab:r}),s=`${n}-${r}`;return this.surfaceList.has(s)||this.surfaceList.set(s,i),this.renderVisor(this.el,this.surfaceList),this.visorComponent.getSurface(n,r)}isFullscreen(){return this.visorComponent.isFullscreen()}isOpen(){return this.visorComponent.isOpen()}close(){return this.visorComponent.close()}open(){return this.visorComponent.open()}toggle(){return this.visorComponent.toggle()}toggleFullScreen(){return this.visorComponent.toggleFullScreen()}bindKeys(){return this.visorComponent.bindKeys()}unbindKeys(){return this.visorComponent.unbindKeys()}setActiveTab(e){if(!this.visorComponent.state.tabs.has(e))throw new Error(`Tab '${e}' does not exist`);this.visorComponent.setState({activeTab:e})}}gS.Visor=e1e;var XWt=Ft&&Ft.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,s){function a(u){try{l(r.next(u))}catch(c){s(c)}}function o(u){try{l(r.throw(u))}catch(c){s(c)}}function l(u){u.done?i(u.value):new n(function(c){c(u.value)}).then(a,o)}l((r=r.apply(t,e||[])).next())})};Object.defineProperty(Zs,"__esModule",{value:!0});const iQ=mS,YWt=gS;function KWt(t){if(t instanceof HTMLElement)return t;if(iQ.isSurface(t))return t.drawArea;if(iQ.isSurfaceInfo(t))return YWt.visor().surface({name:t.name,tab:t.tab,styles:t.styles}).drawArea;throw new Error("Not a drawable")}Zs.getDrawArea=KWt;function ZWt(t,e){const n=Object.getOwnPropertyNames(t),r=Object.getOwnPropertyNames(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++){const s=n[i];if(t[s]!==e[s])return!1}return!0}Zs.shallowEquals=ZWt;function JWt(){return XWt(this,void 0,void 0,function*(){yield new Promise(t=>requestAnimationFrame(t))})}Zs.nextFrame=JWt;var QWt=Ft&&Ft.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,s){function a(u){try{l(r.next(u))}catch(c){s(c)}}function o(u){try{l(r.throw(u))}catch(c){s(c)}}function l(u){u.done?i(u.value):new n(function(c){c(u.value)}).then(a,o)}l((r=r.apply(t,e||[])).next())})},eGt=Ft&&Ft.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(dB,"__esModule",{value:!0});const tGt=eGt(db),oE=Zs;function nGt(t,e,n={}){return QWt(this,void 0,void 0,function*(){const r=oE.getDrawArea(t),i=e,s=Object.assign({},rGt,n);if(xO.has(r)){const m=xO.get(r);if(oE.shallowEquals(s,m.lastOptions)){yield oE.nextFrame();const g=m.view,v=g.changeset().remove(()=>!0).insert(i);yield g.change("values",v).runAsync();return}}const{xLabel:a,yLabel:o,xType:l,yType:u}=s;let c=null;a!=null&&(c={title:a});let f=null;o!=null&&(f={title:o});const d={actions:!1,mode:"vega-lite",defaultStyle:!1},h={width:s.width||r.clientWidth,height:s.height||r.clientHeight,padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:s.fontSize,titleFontSize:s.fontSize},text:{fontSize:s.fontSize},legend:{labelFontSize:s.fontSize,titleFontSize:s.fontSize}},data:{values:i,name:"values"},mark:"bar",encoding:{x:{field:"index",type:l,axis:c},y:{field:"value",type:u,axis:f}}};yield oE.nextFrame();const p=yield tGt.default(r,h,d);xO.set(r,{view:p.view,lastOptions:s})})}dB.renderBarchart=nGt;const rGt={xLabel:"",yLabel:"",xType:"ordinal",yType:"quantitative",fontSize:11},xO=new Map;var xW={},iGt=Ft&&Ft.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,s){function a(u){try{l(r.next(u))}catch(c){s(c)}}function o(u){try{l(r.throw(u))}catch(c){s(c)}}function l(u){u.done?i(u.value):new n(function(c){c(u.value)}).then(a,o)}l((r=r.apply(t,e||[])).next())})},sGt=Ft&&Ft.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xW,"__esModule",{value:!0});const aGt=sGt(db),oGt=Zs;function lGt(t,e,n={}){return iGt(this,void 0,void 0,function*(){const r=Object.assign({},uGt,n),i=oGt.getDrawArea(t),s=[],a=e.values,o=e.tickLabels||[],l=o.length===0;let u=!0;for(let d=0;d<a.length;d++){const h=l?`Class ${d}`:o[d];l&&o.push(h);for(let p=0;p<a[d].length;p++){const m=l?`Class ${p}`:o[p],g=a[d][p];d===p&&!r.shadeDiagonal?s.push({label:h,prediction:m,diagCount:g,noFill:!0}):(s.push({label:h,prediction:m,count:g}),g!==0&&(u=!1))}}if(!r.shadeDiagonal&&u)for(const d of s)d.noFill===!0&&(d.noFill=!1,d.count=d.diagCount);const c={actions:!1,mode:"vega-lite",defaultStyle:!1},f={width:r.width||i.clientWidth,height:r.height||i.clientHeight,padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:r.fontSize,titleFontSize:r.fontSize},text:{fontSize:r.fontSize},legend:{labelFontSize:r.fontSize,titleFontSize:r.fontSize}},data:{values:s},encoding:{x:{field:"prediction",type:"ordinal",scale:{domain:o}},y:{field:"label",type:"ordinal",scale:{domain:o}}},layer:[{mark:{type:"rect"},encoding:{fill:{condition:{test:'datum["noFill"] == true',value:"white"},field:"count",type:"quantitative",scale:{range:["#f7fbff","#4292c6"]}},tooltip:{condition:{test:'datum["noFill"] == true',field:"diagCount",type:"nominal"},field:"count",type:"nominal"}}}]};return r.showTextOverlay&&f.layer.push({mark:{type:"text",baseline:"middle"},encoding:{text:{condition:{test:'datum["noFill"] == true',field:"diagCount",type:"nominal"},field:"count",type:"nominal"}}}),yield aGt.default(i,f,c),Promise.resolve()})}xW.renderConfusionMatrix=lGt;const uGt={xLabel:null,yLabel:null,xType:"nominal",yType:"nominal",shadeDiagonal:!0,fontSize:12,showTextOverlay:!0,height:400};var wW={};const t1e=Qp(urt);var Um={};Object.defineProperty(Um,"__esModule",{value:!0});function n1e(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}Um.assert=n1e;function cGt(t,e,n=""){n1e(r1e(t,e),n+` Shapes ${t} and ${e} must match`)}Um.assertShapesMatch=cGt;function r1e(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}Um.arraysEqual=r1e;Um.DECIMAL_PLACES_TO_CHECK=4;var fGt=Ft&&Ft.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,s){function a(u){try{l(r.next(u))}catch(c){s(c)}}function o(u){try{l(r.throw(u))}catch(c){s(c)}}function l(u){u.done?i(u.value):new n(function(c){c(u.value)}).then(a,o)}l((r=r.apply(t,e||[])).next())})},dGt=Ft&&Ft.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wW,"__esModule",{value:!0});const hGt=t1e,pGt=dGt(db),d1=Um,mGt=Zs;function gGt(t,e,n={}){return fGt(this,void 0,void 0,function*(){const r=Object.assign({},vGt,n),i=mGt.getDrawArea(t),s=[],{xTickLabels:a,yTickLabels:o}=e;if(e.values instanceof hGt.Tensor){d1.assert(e.values.rank===2,"Input to renderHeatmap must be a 2d array or Tensor2d");const f=e.values.shape;a&&d1.assert(f[0]===a.length,`Length of xTickLabels (${a.length}) must match number of rows
          (${f[0]})`),o&&d1.assert(f[1]===o.length,`Length of yTickLabels (${o.length}) must match number of columns
          (${f[1]})`);const d=yield e.values.data(),[h,p]=f;for(let m=0;m<h;m++){const g=a?a[m]:m;for(let v=0;v<p;v++){const y=o?o[v]:v,b=m*p+v,x=d[b];s.push({x:g,y,value:x})}}}else{a&&d1.assert(e.values.length===a.length,`Number of rows (${e.values.length}) must match
          number of xTickLabels (${a.length})`);const f=e.values;for(let d=0;d<f.length;d++){const h=a?a[d]:d;o&&d1.assert(e.values[d].length===o.length,`Number of columns in row ${d} (${e.values[d].length})
            must match length of yTickLabels (${o.length})`);for(let p=0;p<f[d].length;p++){const m=o?o[p]:p,g=f[d][p];s.push({x:h,y:m,value:g})}}}const l={actions:!1,mode:"vega-lite",defaultStyle:!1},u={width:r.width||i.clientWidth,height:r.height||i.clientHeight,padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:r.fontSize,titleFontSize:r.fontSize},text:{fontSize:r.fontSize},legend:{labelFontSize:r.fontSize,titleFontSize:r.fontSize},scale:{bandPaddingInner:0,bandPaddingOuter:0}},data:{values:s},mark:"rect",encoding:{x:{field:"x",type:r.xType,scale:{domain:a},title:r.xLabel},y:{field:"y",type:r.yType,scale:{domain:o},title:r.yLabel},fill:{field:"value",type:"quantitative"}}};let c;switch(r.colorMap){case"blues":c=["#f7fbff","#4292c6"];break;case"greyscale":c=["#000000","#ffffff"];break;case"viridis":default:c="viridis";break}if(c!=="viridis"){const f=u.encoding.fill;f.scale={range:c}}if(r.domain){const f=u.encoding.fill;f.scale!=null?f.scale=Object.assign({},f.scale,{domain:r.domain}):f.scale={domain:r.domain}}yield pGt.default(i,u,l)})}wW.renderHeatmap=gGt;const vGt={xLabel:null,yLabel:null,xType:"ordinal",yType:"ordinal",colorMap:"viridis",fontSize:12,domain:null};var CS={};const i1e=Qp(Pht);var ES={};Object.defineProperty(ES,"__esModule",{value:!0});const sQ=qe,aQ=Ef,yGt=Zs,bGt={prepend:!1};function xGt(t,e,n={}){const r=yGt.getDrawArea(t),i=sQ.css(Object.assign({"& canvas":{display:"block"}},aQ.tachyons("mv2"))),s=sQ.css(Object.assign({backgroundColor:"white",display:"inline-block",boxSizing:"border-box",borderBottom:"1px solid #357EDD",lineHeight:"2em",padding:"0 10px 0 10px",marginBottom:"20px"},aQ.tachyons("fw6 tl"))),a=Object.assign({},bGt,n);let o=r.querySelector(`div[data-name=${e}]`);if(!o){if(o=document.createElement("div"),o.setAttribute("class",`${i}`),o.dataset.name=e,a.title){const l=document.createElement("div");l.setAttribute("class",`subsurface-title ${s}`),l.innerText=a.title,o.appendChild(l)}a.prepend?r.insertBefore(o,r.firstChild):r.appendChild(o)}return o}ES.subSurface=xGt;var lc={},gI=Ft&&Ft.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,s){function a(u){try{l(r.next(u))}catch(c){s(c)}}function o(u){try{l(r.throw(u))}catch(c){s(c)}}function l(u){u.done?i(u.value):new n(function(c){c(u.value)}).then(a,o)}l((r=r.apply(t,e||[])).next())})};Object.defineProperty(lc,"__esModule",{value:!0});const Jp=t1e,sd=Um;function wGt(t){if(!Array.isArray(t))throw new Error("input must be an array");if(t.length===0)return{numVals:0,numNans:0,numZeros:0,max:void 0,min:void 0};const e=t.length;let n=-1/0,r=1/0,i=0,s=0,a=0;for(let l=0;l<e;l++){const u=t[l];u>n&&(n=u),u<r&&(r=u),u===0&&(i+=1),isNaN(u)?s+=1:isFinite(u)||(a+=1)}const o={numVals:e,numZeros:i,numNans:s,max:n,min:r,numInfs:a};return o.max===-1/0&&(o.max=NaN),o.min===1/0&&(o.min=NaN),o}lc.arrayStats=wGt;function _Gt(t){return gI(this,void 0,void 0,function*(){const[e,n,r]=Jp.tidy(()=>{const i=Jp.scalar(0,t.dtype),s=t.min(),a=t.max(),o=t.equal(i).sum();return[s,a,o]});return yield Promise.all([t.data(),e.data(),n.data(),r.data()]).then(([i,s,a,o])=>{const l=i.length;let u=0,c=0;for(let p=0;p<l;p++){const m=i[p];isNaN(m)?u+=1:isFinite(m)||(c+=1)}let f=s[0],d=a[0];return u===l&&(f=NaN,d=NaN),{numVals:l,numZeros:o[0],numNans:u,min:f,max:d,numInfs:c}})})}lc.tensorStats=_Gt;function SGt(t,e,n,r){return gI(this,void 0,void 0,function*(){sd.assert(t.rank===1,"labels must be a 1D tensor"),sd.assert(e.rank===1,"predictions must be a 1D tensor"),sd.assert(t.size===e.size,"labels and predictions must be the same length"),r!=null&&sd.assert(r.size===e.size,"labels and predictions must be the same length");const i=t.cast("int32"),s=e.cast("int32");n==null&&(n=Jp.tidy(()=>Jp.maximum(i.max(),s.max()).cast("int32").dataSync()[0]+1));let a=Promise.resolve(null);return r!=null&&(a=r.data()),Promise.all([i.data(),s.data(),a]).then(([o,l,u])=>{const c=Array(n).fill(0);for(let f=0;f<n;f++)c[f]=Array(n).fill(0);for(let f=0;f<o.length;f++){const d=o[f],h=l[f];u!=null?c[d][h]+=u[f]:c[d][h]+=1}return c})})}lc.confusionMatrix=SGt;function CGt(t,e){return gI(this,void 0,void 0,function*(){sd.assertShapesMatch(t.shape,e.shape,"Error computing accuracy.");const n=t.equal(e),r=n.mean(),i=(yield r.data())[0];return Jp.dispose([n,r]),i})}lc.accuracy=CGt;function EGt(t,e,n){return gI(this,void 0,void 0,function*(){return sd.assert(t.rank===1,"labels must be a 1D tensor"),sd.assert(e.rank===1,"predictions must be a 1D tensor"),sd.assert(t.size===e.size,"labels and predictions must be the same length"),n==null&&(n=Jp.tidy(()=>Jp.maximum(t.max(),e.max()).dataSync()[0]+1)),Promise.all([t.data(),e.data()]).then(([r,i])=>{const s=Array(n).fill(0),a=Array(n).fill(0);for(let l=0;l<r.length;l++){const u=r[l],c=i[l];s[u]+=1,u===c&&(a[u]+=1)}const o=[];for(let l=0;l<s.length;l++)o.push({count:s[l],accuracy:s[l]===0?0:a[l]/s[l]});return o})})}lc.perClassAccuracy=EGt;var _b={};const TGt=Qp(Pit);Object.defineProperty(_b,"__esModule",{value:!0});const kGt=i1e,oQ=TGt,wO=qe,_O=Ef,AGt=Zs;function MGt(t,e,n={}){if(e&&e.headers==null)throw new Error('Data to render must have a "headers" property');if(e&&e.values==null)throw new Error('Data to render must have a "values" property');const r=AGt.getDrawArea(t),i=Object.assign({},NGt,n);let s=oQ.select(r).select("table.tf-table");const a=wO.css(Object.assign({},_O.tachyons("f6 w-100 mw8 center"),{fontSize:i.fontSize}));if(s.size()===0&&(s=oQ.select(r).append("table"),s.attr("class",` ${a} tf-table`),s.append("thead").append("tr"),s.append("tbody")),s.size()!==1)throw new Error("Error inserting table");const o=wO.css(Object.assign({},_O.tachyons("fw6 bb b--black-20 tl pb3 pr3 bg-white"))),l=s.select("thead").select("tr").selectAll("th").data(e.headers),u=l.enter().append("th").attr("class",`${o}`);l.merge(u).html(g=>g),l.exit().remove();const c=kGt.format(",.4~f"),f=s.select("tbody").selectAll("tr").data(e.values),d=f.enter().append("tr"),h=wO.css(Object.assign({},_O.tachyons("pa1 bb b--black-20"))),p=f.merge(d).selectAll("td").data(g=>g),m=p.enter().append("td").attr("class",`${h}`);p.merge(m).html(g=>typeof g=="number"?c(g):g),p.exit().remove(),f.exit().remove()}_b.renderTable=MGt;const NGt={fontSize:14};var $Gt=Ft&&Ft.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,s){function a(u){try{l(r.next(u))}catch(c){s(c)}}function o(u){try{l(r.throw(u))}catch(c){s(c)}}function l(u){u.done?i(u.value):new n(function(c){c(u.value)}).then(a,o)}l((r=r.apply(t,e||[])).next())})},IGt=Ft&&Ft.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(CS,"__esModule",{value:!0});const lQ=i1e,DGt=IGt(db),uQ=ES,RGt=lc,OGt=_b,FGt={maxBins:12,fontSize:11};function LGt(t,e,n={}){return $Gt(this,void 0,void 0,function*(){const r=zGt(e),i=Object.assign({},FGt,n),s={actions:!1,mode:"vega-lite",defaultStyle:!1},a=uQ.subSurface(t,"histogram");if(n.stats!==!1){const u=uQ.subSurface(t,"stats",{prepend:!0});let c;n.stats?c=n.stats:c=RGt.arrayStats(r.map(f=>f.value)),PGt(c,u,{fontSize:i.fontSize})}const o=[];for(let u=0;u<r.length;u++){const c=r[u].value;c!=null&&isFinite(c)&&o.push(r[u])}const l={width:i.width||a.clientWidth,height:i.height||a.clientHeight,padding:0,autosize:{type:"fit",contains:"padding",resize:!0},data:{values:o},mark:"bar",config:{axis:{labelFontSize:i.fontSize,titleFontSize:i.fontSize},text:{fontSize:i.fontSize},legend:{labelFontSize:i.fontSize,titleFontSize:i.fontSize}},encoding:{x:{bin:{maxbins:i.maxBins},field:"value",type:"quantitative"},y:{aggregate:"count",type:"quantitative"},color:{value:"#001B44"}}};return DGt.default(a,l,s)})}CS.renderHistogram=LGt;function PGt(t,e,n){const r=lQ.format(",.4~f"),i=lQ.format(".4~p"),s=[],a=[];if(t.numVals!=null&&(s.push("Num Vals"),a.push(r(t.numVals))),t.min!=null&&(s.push("Min"),a.push(r(t.min))),t.max!=null&&(s.push("Max"),a.push(r(t.max))),t.numZeros!=null){s.push("# Zeros");let o="";t.numVals&&(o=t.numZeros>0?`(${i(t.numZeros/t.numVals)})`:""),a.push(`${r(t.numZeros)} ${o}`)}if(t.numNans!=null){s.push("# NaNs");let o="";t.numVals&&(o=t.numNans>0?`(${i(t.numNans/t.numVals)})`:""),a.push(`${r(t.numNans)} ${o}`)}if(t.numInfs!=null){s.push("# Infinity");let o="";t.numVals&&(o=t.numInfs>0?`(${i(t.numInfs/t.numVals)})`:""),a.push(`${r(t.numInfs)} ${o}`)}OGt.renderTable(e,{headers:s,values:[a]},n)}function zGt(t){if(t.length==null)throw new Error("input data must be an array");if(t.length===0)return[];if(typeof t[0]=="object"){if(t[0].value==null)throw new Error("input data must have a value field");return t}else{const e=Array(t.length);for(let n=0;n<t.length;n++)e[n]={value:t[n]};return e}}var vI={},BGt=Ft&&Ft.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,s){function a(u){try{l(r.next(u))}catch(c){s(c)}}function o(u){try{l(r.throw(u))}catch(c){s(c)}}function l(u){u.done?i(u.value):new n(function(c){c(u.value)}).then(a,o)}l((r=r.apply(t,e||[])).next())})},UGt=Ft&&Ft.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vI,"__esModule",{value:!0});const VGt=UGt(db),WGt=Zs;function GGt(t,e,n={}){return BGt(this,void 0,void 0,function*(){let r=e.values;const i=e.series==null?[]:e.series;r=Array.isArray(r[0])?r:[r];const s=[],a=new Set;r.forEach((p,m)=>{const g=i[m]!=null?i[m]:`Series ${m+1}`;a.add(g);const v=p.map(y=>Object.assign({},y,{series:g}));s.push(...v)});const o=WGt.getDrawArea(t),l=Object.assign({},HGt,n),u={actions:!1,mode:"vega-lite",defaultStyle:!1},c=()=>{if(l.zoomToFit)return{zero:!1};if(l.yAxisDomain!=null)return{domain:l.yAxisDomain}},f={x:{field:"x",type:l.xType,title:l.xLabel},y:{field:"y",type:l.yType,title:l.yLabel,scale:c()},color:{field:"series",type:"nominal",legend:{values:Array.from(a)}}};let d;l.yAxisDomain!=null&&(d={filter:{field:"y",range:l.yAxisDomain}});const h={width:l.width||o.clientWidth,height:l.height||o.clientHeight,padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:l.fontSize,titleFontSize:l.fontSize},text:{fontSize:l.fontSize},legend:{labelFontSize:l.fontSize,titleFontSize:l.fontSize}},data:{values:s},layer:[{mark:{type:"line",clip:!0},encoding:f},{mark:{type:"point"},transform:l.yAxisDomain?[d]:void 0,selection:{nearestPoint:{type:"single",on:"mouseover",nearest:!0,empty:"none",encodings:["x"]}},encoding:Object.assign({},f,{opacity:{value:0,condition:{selection:"nearestPoint",value:1}}})},{transform:[{filter:{selection:"nearestPoint"}},d].filter(Boolean),mark:{type:"text",align:"left",dx:5,dy:-5,color:"black"},encoding:Object.assign({},f,{text:{type:l.xType,field:"y",format:".6f"},color:void 0})},{transform:[{filter:{selection:"nearestPoint"}}],mark:{type:"rule",color:"gray"},encoding:{x:{type:l.xType,field:"x"}}}]};return yield VGt.default(o,h,u),Promise.resolve()})}vI.renderLinechart=GGt;const HGt={xLabel:"x",yLabel:"y",xType:"quantitative",yType:"quantitative",zoomToFit:!1,fontSize:11};var _W={},jGt=Ft&&Ft.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,s){function a(u){try{l(r.next(u))}catch(c){s(c)}}function o(u){try{l(r.throw(u))}catch(c){s(c)}}function l(u){u.done?i(u.value):new n(function(c){c(u.value)}).then(a,o)}l((r=r.apply(t,e||[])).next())})},qGt=Ft&&Ft.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_W,"__esModule",{value:!0});const XGt=qGt(db),YGt=Zs;function KGt(t,e,n={}){return jGt(this,void 0,void 0,function*(){let r=e.values;const i=e.series==null?[]:e.series;r=Array.isArray(r[0])?r:[r];const s=[];r.forEach((d,h)=>{const p=i[h]!=null?i[h]:`Series ${h+1}`,m=d.map(g=>Object.assign({},g,{series:p}));s.push(...m)});const a=YGt.getDrawArea(t),o=Object.assign({},ZGt,n),l={actions:!1,mode:"vega-lite",defaultStyle:!1},u=()=>{if(o.zoomToFit)return{zero:!1};if(o.xAxisDomain!=null)return{domain:o.xAxisDomain}},c=()=>{if(o.zoomToFit)return{zero:!1};if(o.yAxisDomain!=null)return{domain:o.yAxisDomain}},f={width:o.width||a.clientWidth,height:o.height||a.clientHeight,padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:o.fontSize,titleFontSize:o.fontSize},text:{fontSize:o.fontSize},legend:{labelFontSize:o.fontSize,titleFontSize:o.fontSize}},data:{values:s},mark:{type:"point",clip:!0,tooltip:{content:"data"}},encoding:{x:{field:"x",type:o.xType,title:o.xLabel,scale:u()},y:{field:"y",type:o.yType,title:o.yLabel,scale:c()},color:{field:"series",type:"nominal"},shape:{field:"series",type:"nominal"}}};return yield XGt.default(a,f,l),Promise.resolve()})}_W.renderScatterplot=KGt;const ZGt={xLabel:"x",yLabel:"y",xType:"quantitative",yType:"quantitative",zoomToFit:!1,fontSize:11};var yI={},s1e=Ft&&Ft.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,s){function a(u){try{l(r.next(u))}catch(c){s(c)}}function o(u){try{l(r.throw(u))}catch(c){s(c)}}function l(u){u.done?i(u.value):new n(function(c){c(u.value)}).then(a,o)}l((r=r.apply(t,e||[])).next())})};Object.defineProperty(yI,"__esModule",{value:!0});const JGt=vI,h5=Zs,a1e=ES;function o1e(t,e,n,r={}){return s1e(this,void 0,void 0,function*(){const i=h5.getDrawArea(t),s={};for(const u of n)if(/val_/.test(u)){const c=u.replace("val_","");cQ(s,c);const f=fQ(e,u,n.indexOf(u));s[c].series.push(u),s[c].values.push(f)}else{const c=fQ(e,u,n.indexOf(u));cQ(s,u),s[u].series.push(u),s[u].values.push(c)}const a=Object.keys(s),o=Object.assign({},{xLabel:"Iteration",yLabel:"Value"},r),l=[];for(const u of a){const c=a1e.subSurface(i,u),f=s[u].series,d=s[u].values;f.every(p=>!!p.match("acc"))&&(o.zoomToFitAccuracy?o.zoomToFit=!0:(o.yAxisDomain=[0,1],delete o.zoomToFit));const h=JGt.renderLinechart(c,{values:d,series:f},o);l.push(h)}yield Promise.all(l)})}yI.history=o1e;function cQ(t,e){t[e]==null&&(t[e]={series:[],values:[]})}function fQ(t,e,n){if(Array.isArray(t)){const r=Array.isArray(t[0])?t[n]:t,i=[];for(let s=0;s<r.length;s++){const a=r[s];i.push({x:s,y:a[e]})}return i}else return t.history[e].map((r,i)=>({x:i,y:r}))}function QGt(t,e,n={}){const r={},i=n.callbacks||["onEpochEnd","onBatchEnd"],s=h5.getDrawArea(t),a=Object.assign({},n);delete a.callbacks;function o(u){return(c,f)=>s1e(this,void 0,void 0,function*(){/batch/i.test(u)?a.xLabel="Batch":/epoch/i.test(u)&&(a.xLabel="Epoch");const d=[],h=[];for(const m of e)if(f[m]!=null){h.push(m);const g=eHt(r,u,m);g.push({[m]:f[m]}),d.push(g)}const p=a1e.subSurface(s,u,{title:u});o1e(p,d,h,a),yield h5.nextFrame()})}const l={};return i.forEach(u=>{l[u]=o(u)}),l}yI.fitCallbacks=QGt;function eHt(t,e,n){return t[e]==null&&(t[e]={}),t[e][n]==null&&(t[e][n]=[]),t[e][n]}var bI={},AA=Ft&&Ft.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,s){function a(u){try{l(r.next(u))}catch(c){s(c)}}function o(u){try{l(r.throw(u))}catch(c){s(c)}}function l(u){u.done?i(u.value):new n(function(c){c(u.value)}).then(a,o)}l((r=r.apply(t,e||[])).next())})};Object.defineProperty(bI,"__esModule",{value:!0});const tHt=CS,l1e=Zs,u1e=_b,SO=ES,nHt=lc;function rHt(t,e){return AA(this,void 0,void 0,function*(){const n=l1e.getDrawArea(t),r=sHt(e),i=["Layer Name","Output Shape","# Of Params","Trainable"],s=r.layers.map(a=>[a.name,a.outputShape,a.parameters,a.trainable]);u1e.renderTable(n,{headers:i,values:s})})}bI.modelSummary=rHt;function iHt(t,e){return AA(this,void 0,void 0,function*(){const n=l1e.getDrawArea(t),r=yield oHt(e),i=["Weight Name","Shape","Min","Max","# Params","# Zeros","# NaNs","# Infinity"],s=SO.subSurface(n,"layer-weights-info"),a=r.map(c=>[c.name,c.shape,c.stats.min,c.stats.max,c.weight.size,c.stats.numZeros,c.stats.numNans,c.stats.numInfs]);u1e.renderTable(s,{headers:i,values:a});const o=SO.subSurface(n,"select-layer"),l=SO.subSurface(n,"param-distribution"),u=c=>AA(this,void 0,void 0,function*(){const d=yield r.filter(h=>h.name===c)[0].weight.data();tHt.renderHistogram(l,d,{height:150,width:460,stats:!1})});lHt(r.map(c=>c.name),o,u)})}bI.layer=iHt;function sHt(t){return{layers:t.layers.map(aHt)}}function aHt(t){let e;return Array.isArray(t.outputShape[0])?e=`[${t.outputShape.map(r=>p5(r)).join(", ")}]`:e=p5(t.outputShape),{name:t.name,trainable:t.trainable,parameters:t.countParams(),outputShape:e}}function oHt(t){return AA(this,void 0,void 0,function*(){const e=t.getWeights(),n=t.weights,r=e.map(nHt.tensorStats),i=yield Promise.all(r),s=e.map(a=>a.shape);return e.map((a,o)=>({name:n[o].name,stats:i[o],shape:p5(s[o]),weight:a}))})}function p5(t){const e=t.slice();return e.length===0?"Scalar":(e[0]===null&&(e[0]="batch"),`[${e.join(",")}]`)}function lHt(t,e,n){const s=`<div><button>Show Values Distribution for:</button>${`
    <select>
      ${t.map(l=>`<option value=${l}>${l}</option>`)}
    </select>
  `}</div>`;e.innerHTML=s;const a=e.querySelector("button"),o=e.querySelector("select");a.addEventListener("click",()=>{n(o.selectedOptions[0].label)})}var SW={},uHt=Ft&&Ft.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,s){function a(u){try{l(r.next(u))}catch(c){s(c)}}function o(u){try{l(r.throw(u))}catch(c){s(c)}}function l(u){u.done?i(u.value):new n(function(c){c(u.value)}).then(a,o)}l((r=r.apply(t,e||[])).next())})};Object.defineProperty(SW,"__esModule",{value:!0});const cHt=Zs,fHt=_b;function dHt(t,e,n){return uHt(this,void 0,void 0,function*(){const r=cHt.getDrawArea(t),i=["Class","Accuracy","# Samples"],s=[];for(let a=0;a<e.length;a++){const o=n?n[a]:a.toString(),l=e[a];s.push([o,l.accuracy,l.count])}return fHt.renderTable(r,{headers:i,values:s})})}SW.showPerClassAccuracy=dHt;var CW={},hHt=Ft&&Ft.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,s){function a(u){try{l(r.next(u))}catch(c){s(c)}}function o(u){try{l(r.throw(u))}catch(c){s(c)}}function l(u){u.done?i(u.value):new n(function(c){c(u.value)}).then(a,o)}l((r=r.apply(t,e||[])).next())})};Object.defineProperty(CW,"__esModule",{value:!0});const pHt=CS,mHt=Zs,gHt=lc;function vHt(t,e){return hHt(this,void 0,void 0,function*(){const n=mHt.getDrawArea(t),r=yield gHt.tensorStats(e),i=yield e.data();pHt.renderHistogram(n,i,{height:150,stats:r})})}CW.valuesDistribution=vHt;(function(t){function e(y){for(var b in y)t.hasOwnProperty(b)||(t[b]=y[b])}Object.defineProperty(t,"__esModule",{value:!0});const n=dB,r=xW,i=wW,s=CS,a=vI,o=_W,l=_b,u=yI,c=bI,f=SW,d=CW,h=lc,p={barchart:n.renderBarchart,table:l.renderTable,histogram:s.renderHistogram,linechart:a.renderLinechart,scatterplot:o.renderScatterplot,confusionMatrix:r.renderConfusionMatrix,heatmap:i.renderHeatmap};t.render=p;const m={accuracy:h.accuracy,perClassAccuracy:h.perClassAccuracy,confusionMatrix:h.confusionMatrix};t.metrics=m;const g={history:u.history,fitCallbacks:u.fitCallbacks,perClassAccuracy:f.showPerClassAccuracy,valuesDistribution:d.valuesDistribution,layer:c.layer,modelSummary:c.modelSummary};t.show=g;var v=gS;t.visor=v.visor,e(mS)})(Ih);const c1e=t=>(sl("data-v-7a8662c4"),t=t(),al(),t),yHt={class:"tfjstu"},bHt=c1e(()=>V("h1",null,"tfjs-vis控制盘",-1)),xHt=c1e(()=>V("span",null,"注：输入是房子的平方英尺，不是平方米，输出是房子的价格（美国），请先进行数据加载。",-1)),wHt=["value"],_Ht=Zi({__name:"tensorflowDemo",setup(t){let e,n,r,i,s,a,o;$W({});let l=Mt("当前没有数据"),u=Mt("模型未创建"),c=Mt("预测数据输入（回车键确认）"),f=$W({});kQ(()=>c.value,(E,T)=>{E<40&&(alert("输入值不能小于40"),c.value=40)});function d(E){isNaN(E.target.value)&&alert("请输入一个合理的数字"),c.value=E.target.value}async function h(){Ih.visor().toggle()}async function p(){u.value="模型训练中...（请耐心等待，估计在五分钟左右）",y().then(()=>{u.value="模型训练完成！"})}async function m(){l.value="数据加载中...（数据量较大请请耐心等待）",_().then(()=>{l.value="数据加载完成！"})}async function g(){const E=parseInt(c.value);oe(()=>{const T=Us([E]),k=b(T,n.min,n.max),M=f.predict(k.tensor),N=x(M,r.min,r.max).dataSync()[0];alert("预测价格是："+N)})}async function v(){const[E,T]=oe(()=>{const M=L4(0,1,100),A=f.predict(M.reshape([100,1])),N=x(M,n.min,n.max),$=x(A,r.min,r.max);return[N.dataSync(),$.dataSync()]}),k=Array.from(E).map((M,A)=>({x:M,y:T[A]}));await C(e,"square feet",k)}async function y(){const E=w();f=E,Ih.show.modelSummary({name:"模型摘要"},E);const T=E.getLayer(void 0,0);Ih.show.layer({name:"图层 1"},T),await v();const k=await S(E,i,a),M=k.history.loss.pop();console.log(M);const A=k.history.val_loss.pop();console.log(A);const $=await E.evaluate(s,o).dataSync();console.log($[0])}function b(E,T=null,k=null){const M=T||E.min(),A=k||E.max();return{tensor:E.sub(M).div(A.sub(M)),min:M,max:A}}function x(E,T,k){return E.mul(k.sub(T)).add(T)}function w(){const E=Fre();E.add(uie({units:1,useBias:!0,activation:"sigmoid",inputDim:1}));const T=Ff.adam();return E.compile({loss:"meanSquaredError",optimizer:T}),E}async function S(E,T,k){const{onBatchEnd:M,onEpochEnd:A}=Ih.show.fitCallbacks({name:"训练表现"},["loss"]);return E.fit(T,k,{batchSize:32,epochs:100,validationSplit:.2,callbacks:{onEpochEnd:A,onEpochBegin:async function(){await v();const N=f.getLayer(void 0,0);Ih.show.layer({name:"图层 1"},N)}}})}async function C(E,T,k=null){const M=[E],A=["original"];Array.isArray(k)&&(M.push(k),A.push("predict")),Ih.render.scatterplot({name:`${T} vs 房价`},{values:M,series:A},{xLabel:T,yLabel:"价格"})}async function _(){e=await Lie("/csv/kc_house_data.mp3").map($=>({x:$.sqft_living,y:$.price})).toArray(),console.log(e),e.length%2!==0&&e.pop(),BA(e),C(e,"Square Feet");const k=e.map($=>$.x),M=Pc(k,[k.length,1]),A=e.map($=>$.y),N=Pc(A,[A.length,1]);n=b(M),r=b(N),M.dispose(),N.dispose(),n.tensor.print(),[i,s]=gs(n.tensor,2),[a,o]=gs(r.tensor,2),i.print(!0)}return Wl(()=>{h(),setTimeout(()=>{const T=document.getElementById("tfjs-visor-container").firstChild;T.style.cssText="height:80%;margin-top:100px;z-index;100"},0)}),(E,T)=>(De(),Re("div",yHt,[bHt,V("strong",null,"数据状态:"+bt(_r(l)),1),V("strong",null,"训练状态: "+bt(_r(u)),1),xHt,V("div",null,[V("button",{onClick:h},"vis展开"),V("button",{onClick:m},"1.数据加载"),V("button",{ref:"trian",onClick:p},"2.模型训练",512),V("input",{style:{width:"150px"},onKeydown:T[0]||(T[0]=P1e(k=>d(k),["enter"])),value:_r(c)},null,40,wHt),V("button",{onClick:g},"3.进行预测")])]))}});const SHt=xs(_Ht,[["__scopeId","data-v-7a8662c4"]]),CHt={class:"main"},EHt=Zi({__name:"webgpudemo",setup(t){return(e,n)=>(De(),Re("div",CHt))}});const THt=xs(EHt,[["__scopeId","data-v-4345fceb"]]),kHt=[{start:[7,0],len:5,transparent:!1},{start:[6,1],len:8,transparent:!1},{start:[6,2],len:6,transparent:!1},{start:[5,3],len:9,transparent:!1},{start:[5,4],len:10,transparent:!1},{start:[5,5],len:9,transparent:!1},{start:[7,6],len:6,transparent:!1},{start:[6,7],len:5,transparent:!1},{start:[5,8],len:9,transparent:!1},{start:[4,9],len:11,transparent:!1},{start:[4,10],len:11,transparent:!1},{start:[4,11],len:11,transparent:!1},{start:[4,12],len:11,transparent:!1},{start:[6,13],len:7,transparent:{start:[9,13],len:1}},{start:[5,14],len:9,transparent:{start:[8,13],len:3}},{start:[4,15],len:11,transparent:{start:[8,13],len:3}}],AHt=[{start:[7,0],len:5,transparent:!1},{start:[6,1],len:8,transparent:!1}],MHt=[{point:[11],row:2},{point:[11],row:3}],NHt=[{point:[6,7,8],row:2},{point:[5,8],row:3},{point:[5,7,8,9],row:4},{point:[5,6,11,12,13,14],row:5}],$Ht=[{start:[6,7],len:5,transparent:!1},{start:[5,8],len:10,transparent:!1},{start:[4,9],len:11,transparent:!1},{start:[6,10],len:7,transparent:!1}],IHt=[{point:[8],row:7},{point:[8,11],row:8},{point:[8,9,10,11],row:9},{point:[7,9,10,12],row:10},{point:[7,8,9,10,11,12],row:11},{point:[6,7,8,9,10,11,12,13],row:12},{point:[6,7,8,11,12,13],row:13}],DHt=[{start:[5,14],len:9,transparent:{start:[8,13],len:3}},{start:[4,15],len:11,transparent:{start:[8,13],len:3}}],RHt=t=>(sl("data-v-9171b73f"),t=t(),al(),t),OHt={class:"main"},FHt=RHt(()=>V("div",null,[V("canvas",{id:"pixel",width:"500",height:"500"})],-1)),LHt=[FHt],PHt=Zi({__name:"pixelDemo",setup(t){const e=kHt,n=AHt,r=NHt,i=$Ht,s=IHt,a=DHt,o=MHt;let l=[],u=[],c=[],f=[],d=[],h=[],p=[];function m(){for(const S in e){const C=e[S].start[0],_=e[S].len,E=C+_;for(let T=e[S].start[0];T<=E;T++)if(l.push([T,Number(S)]),e[S].transparent){const k=e[S].transparent.start[0]+e[S].transparent.len,M=e[S].transparent.start[0];T>=M&&T<=k&&l.pop()}}}function g(){for(const S in n){const C=n[S].start[0],_=n[S].len,E=C+_;for(let T=n[S].start[0];T<=E;T++)if(u.push([T,Number(S)]),n[S].transparent){const k=n[S].transparent.start[0]+n[S].transparent.len,M=n[S].transparent.start[0];T>=M&&T<=k&&u.pop()}}}function v(){for(const S in r)for(const C of r[S].point)c.push([Number(C),r[S].row])}function y(){for(const C in i){const _=i[C].start[0],E=i[C].len,T=_+E;for(let k=i[C].start[0];k<=T;k++)f.push([k,Number(C)+7])}}function b(){for(const S in s)for(const C of s[S].point)d.push([Number(C),s[S].row])}function x(){for(const C in a){const _=a[C].start[0],E=a[C].len,T=_+E;for(let k=a[C].start[0];k<=T;k++)if(h.push([k,Number(C)+14]),a[C].transparent){const M=a[C].transparent.start[0]+a[C].transparent.len,A=a[C].transparent.start[0];k>=A&&k<=M&&h.pop()}}}function w(){for(const S in o)for(const C of o[S].point)p.push([Number(C),o[S].row])}return m(),g(),v(),y(),b(),x(),w(),console.log(c),Wl(()=>{let C=document.getElementById("pixel").getContext("2d");for(let G=1;G<30;G++)C.moveTo(0,25*G+.5),C.lineTo(500,25*G+.5),C.moveTo(25*G+.5,0),C.lineTo(25*G+.5,500);C.strokeStyle="white",C.stroke();let _=0,E="#fbda41",T=0,k=0,M=0,A=0,N=0,$=0,D=1;function P(){C.fillStyle=E,_>=l.length?(console.log("躯体绘制结束"),D=0,requestAnimationFrame(O)):D%5==0?(C.fillRect(l[_][0]*25,l[_][1]*25,25,25),_++,D++,requestAnimationFrame(P)):(D++,requestAnimationFrame(P))}function O(){C.fillStyle="red",T>=c.length?(console.log("帽子绘制结束"),D=0,requestAnimationFrame(B)):D%5==0?(C.fillRect(u[T][0]*25,u[T][1]*25,25,25),T++,D++,requestAnimationFrame(O)):(D++,requestAnimationFrame(O))}function B(){C.fillStyle="#5e5314",k>=c.length?(console.log("头发胡须绘制结束"),D=0,requestAnimationFrame(H)):D%5==0?(C.fillRect(c[k][0]*25,c[k][1]*25,25,25),k++,D++,requestAnimationFrame(B)):(D++,requestAnimationFrame(B))}function H(){C.fillStyle="#5e5314",M>=f.length?(console.log("上衣绘制结束"),D=0,requestAnimationFrame(te)):D%5==0?(C.fillRect(f[M][0]*25,f[M][1]*25,25,25),M++,D++,requestAnimationFrame(H)):(D++,requestAnimationFrame(H))}function te(){C.fillStyle="red",A>=d.length?(console.log("工装裤绘制结束"),D=0,requestAnimationFrame(q)):D%5==0?(C.fillRect(d[A][0]*25,d[A][1]*25,25,25),A++,D++,requestAnimationFrame(te)):(D++,requestAnimationFrame(te))}function q(){if(C.fillStyle="#584717",N>=h.length){console.log("鞋子绘制结束"),requestAnimationFrame(Z);return}else D%5==0?(C.fillRect(h[N][0]*25,h[N][1]*25,25,25),N++,D++,requestAnimationFrame(q)):(D++,requestAnimationFrame(q))}function Z(){C.fillStyle="#5dbe8a",$>=p.length?($=0,D=0,requestAnimationFrame(ne)):D%15==0?(C.fillRect(p[$][0]*25,p[$][1]*25,25,25),$++,D++,requestAnimationFrame(Z)):(D++,requestAnimationFrame(Z))}function ne(){if(C.fillStyle="#fbda41",$>=p.length){console.log("画龙点睛！"),$=0,D=0,requestAnimationFrame(Z);return}else D%15==0?(C.fillRect(p[$][0]*25,p[$][1]*25,25,25),$++,D++,requestAnimationFrame(ne)):(D++,requestAnimationFrame(ne))}requestAnimationFrame(P)}),(S,C)=>(De(),Re("div",OHt,LHt))}});const zHt=xs(PHt,[["__scopeId","data-v-9171b73f"]]),BHt={id:"content"},UHt=V("pre",{id:"style-text"},null,-1),VHt=V("pre",{id:"work-text"},null,-1),WHt=[UHt,VHt],GHt={__name:"resume",setup(t){const e=[{content:"// 这是一个简单的简历动画",style:!1},{content:`/* 先给全局加一个效果
(css省略大括号) */`,style:{"*":{transition:"all .3s linear;"}}},{content:"// 调整一下对话框样式",style:{"#content":{height:"90vh;"},"#style-text":{background:"#333;",width:"430px;","min-height":"90vh;",padding:"10px;",border:"1px solid red;","border-radius":"4px;",position:"absolute;",bottom:"0px;",overflow:"auto;"}}},{content:"// 换一个我喜欢的字体",style:{"#style-text":{"font-family":"catbite"}}},{content:"// ok 我们做一点调整 尽量让它看起来好看点",style:{"*":{margin:"0;"},p:{"margin-top":"10px;",color:"#857F6B;"},".classkey":{color:"pink;",display:"block;","margin-top":"10px;"},".classattrkey":{color:"#16f979;","padding-left":"12px;","font-size":"12px;"},".classattrvalue":{color:"#a3dff1;","font-size":"12px;"}}},{content:"// 现在准备一个空白栏",style:{"#content":{width:"100vw;",display:"flex;","justify-content":"space-between;"},"#work-text":{width:"720px;",height:"90vh;","border-radius":"4px;",background:"#fff;",opacity:"0.4;","box-shadow":"inset 0 0 6px rgba(255, 255, 255);",position:"absolute;",left:"450px;",overflow:"auto;",padding:"10px;"}}},{content:"// 现在可以开始写简历了",style:!1},{content:"// 我们先准备简历的整体布局",style:{"#work-text div":{padding:"10px;",background:"#eee;","border-radius":"4px;"}}}];return Wl(async()=>{const n=document.querySelector("#style-text"),r=document.querySelector("#work-text");let i=null;function s(c,f){return new Promise((d,h)=>{const p=document.createElement("p");let m=0,g=c.length;i=setInterval(()=>{m<g?(p.innerHTML+=c[m++],f.appendChild(p)):(clearInterval(i),d("Step result"))},10)})}function a(c,f,d=""){return new Promise((h,p)=>{const m=document.createElement("span");m.className=d;let g=0,v=c.length;i=setInterval(()=>{g<v?(m.innerHTML+=c[g++],f.appendChild(m)):(clearInterval(i),h("Step result"))},10)})}function o(c,f,d,h=""){return new Promise((p,m)=>{const g=document.createElement(d);g.className=h;let v=0;const y=c.length;i=setInterval(()=>{v<y?(g.innerHTML+=c[v++],console.log(g),f.appendChild(g)):(f.appendChild(g),clearInterval(i),p("Step result"))},10)})}function l(c){c=JSON.stringify(c).toString().slice(1,-1).replace(/"/g,"").replace(/,/g,"");const f=document.createElement("style");f.type="text/css",f.innerHTML=c,document.querySelector("head").appendChild(f)}async function u(c){for(const f of c)if(f.style){await s(f.content,n);const d=Object.entries(f.style);for(const h of d){await a(h[0]+`
`,n,"classkey");const p=Object.entries(h[1]);for(const m of p)await a(m[0]+":",n,"classattrkey"),await a(m[1]+`
`,n,"classattrvalue");l(h)}}else await s(f.content,n)}try{await u(e),await o("",r,"div","headbox");const c=document.querySelector(".headbox");await o("",c,"div","headboxright"),u([{content:"// 简历头部",style:{".headbox":{display:"flex;"}}}]),await o("",r,"div","centerbox"),await o("",r,"div","footerbox")}catch(c){console.log(c)}}),(n,r)=>(De(),Re("div",BHt,WHt))}};function f1e(t,e){return function(){return t.apply(e,arguments)}}const{toString:HHt}=Object.prototype,{getPrototypeOf:EW}=Object,xI=(t=>e=>{const n=HHt.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),uc=t=>(t=t.toLowerCase(),e=>xI(e)===t),wI=t=>e=>typeof e===t,{isArray:Sb}=Array,kw=wI("undefined");function jHt(t){return t!==null&&!kw(t)&&t.constructor!==null&&!kw(t.constructor)&&Zo(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const d1e=uc("ArrayBuffer");function qHt(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&d1e(t.buffer),e}const XHt=wI("string"),Zo=wI("function"),h1e=wI("number"),_I=t=>t!==null&&typeof t=="object",YHt=t=>t===!0||t===!1,PE=t=>{if(xI(t)!=="object")return!1;const e=EW(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},KHt=uc("Date"),ZHt=uc("File"),JHt=uc("Blob"),QHt=uc("FileList"),ejt=t=>_I(t)&&Zo(t.pipe),tjt=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Zo(t.append)&&((e=xI(t))==="formdata"||e==="object"&&Zo(t.toString)&&t.toString()==="[object FormData]"))},njt=uc("URLSearchParams"),rjt=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function TS(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Sb(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),a=s.length;let o;for(r=0;r<a;r++)o=s[r],e.call(null,t[o],o,t)}}function p1e(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const m1e=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),g1e=t=>!kw(t)&&t!==m1e;function m5(){const{caseless:t}=g1e(this)&&this||{},e={},n=(r,i)=>{const s=t&&p1e(e,i)||i;PE(e[s])&&PE(r)?e[s]=m5(e[s],r):PE(r)?e[s]=m5({},r):Sb(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&TS(arguments[r],n);return e}const ijt=(t,e,n,{allOwnKeys:r}={})=>(TS(e,(i,s)=>{n&&Zo(i)?t[s]=f1e(i,n):t[s]=i},{allOwnKeys:r}),t),sjt=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),ajt=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},ojt=(t,e,n,r)=>{let i,s,a;const o={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)a=i[s],(!r||r(a,t,e))&&!o[a]&&(e[a]=t[a],o[a]=!0);t=n!==!1&&EW(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},ljt=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},ujt=t=>{if(!t)return null;if(Sb(t))return t;let e=t.length;if(!h1e(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},cjt=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&EW(Uint8Array)),fjt=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},djt=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},hjt=uc("HTMLFormElement"),pjt=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),dQ=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),mjt=uc("RegExp"),v1e=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};TS(n,(i,s)=>{e(i,s,t)!==!1&&(r[s]=i)}),Object.defineProperties(t,r)},gjt=t=>{v1e(t,(e,n)=>{if(Zo(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Zo(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},vjt=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return Sb(t)?r(t):r(String(t).split(e)),n},yjt=()=>{},bjt=(t,e)=>(t=+t,Number.isFinite(t)?t:e),CO="abcdefghijklmnopqrstuvwxyz",hQ="0123456789",y1e={DIGIT:hQ,ALPHA:CO,ALPHA_DIGIT:CO+CO.toUpperCase()+hQ},xjt=(t=16,e=y1e.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function wjt(t){return!!(t&&Zo(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const _jt=t=>{const e=new Array(10),n=(r,i)=>{if(_I(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=Sb(r)?[]:{};return TS(r,(a,o)=>{const l=n(a,i+1);!kw(l)&&(s[o]=l)}),e[i]=void 0,s}}return r};return n(t,0)},Sjt=uc("AsyncFunction"),Cjt=t=>t&&(_I(t)||Zo(t))&&Zo(t.then)&&Zo(t.catch),ke={isArray:Sb,isArrayBuffer:d1e,isBuffer:jHt,isFormData:tjt,isArrayBufferView:qHt,isString:XHt,isNumber:h1e,isBoolean:YHt,isObject:_I,isPlainObject:PE,isUndefined:kw,isDate:KHt,isFile:ZHt,isBlob:JHt,isRegExp:mjt,isFunction:Zo,isStream:ejt,isURLSearchParams:njt,isTypedArray:cjt,isFileList:QHt,forEach:TS,merge:m5,extend:ijt,trim:rjt,stripBOM:sjt,inherits:ajt,toFlatObject:ojt,kindOf:xI,kindOfTest:uc,endsWith:ljt,toArray:ujt,forEachEntry:fjt,matchAll:djt,isHTMLForm:hjt,hasOwnProperty:dQ,hasOwnProp:dQ,reduceDescriptors:v1e,freezeMethods:gjt,toObjectSet:vjt,toCamelCase:pjt,noop:yjt,toFiniteNumber:bjt,findKey:p1e,global:m1e,isContextDefined:g1e,ALPHABET:y1e,generateString:xjt,isSpecCompliantForm:wjt,toJSONObject:_jt,isAsyncFn:Sjt,isThenable:Cjt};function Sn(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}ke.inherits(Sn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ke.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const b1e=Sn.prototype,x1e={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{x1e[t]={value:t}});Object.defineProperties(Sn,x1e);Object.defineProperty(b1e,"isAxiosError",{value:!0});Sn.from=(t,e,n,r,i,s)=>{const a=Object.create(b1e);return ke.toFlatObject(t,a,function(l){return l!==Error.prototype},o=>o!=="isAxiosError"),Sn.call(a,t.message,e,n,r,i),a.cause=t,a.name=t.name,s&&Object.assign(a,s),a};const Ejt=null;function g5(t){return ke.isPlainObject(t)||ke.isArray(t)}function w1e(t){return ke.endsWith(t,"[]")?t.slice(0,-2):t}function pQ(t,e,n){return t?t.concat(e).map(function(i,s){return i=w1e(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function Tjt(t){return ke.isArray(t)&&!t.some(g5)}const kjt=ke.toFlatObject(ke,{},null,function(e){return/^is[A-Z]/.test(e)});function SI(t,e,n){if(!ke.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=ke.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,g){return!ke.isUndefined(g[m])});const r=n.metaTokens,i=n.visitor||c,s=n.dots,a=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&ke.isSpecCompliantForm(e);if(!ke.isFunction(i))throw new TypeError("visitor must be a function");function u(p){if(p===null)return"";if(ke.isDate(p))return p.toISOString();if(!l&&ke.isBlob(p))throw new Sn("Blob is not supported. Use a Buffer instead.");return ke.isArrayBuffer(p)||ke.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function c(p,m,g){let v=p;if(p&&!g&&typeof p=="object"){if(ke.endsWith(m,"{}"))m=r?m:m.slice(0,-2),p=JSON.stringify(p);else if(ke.isArray(p)&&Tjt(p)||(ke.isFileList(p)||ke.endsWith(m,"[]"))&&(v=ke.toArray(p)))return m=w1e(m),v.forEach(function(b,x){!(ke.isUndefined(b)||b===null)&&e.append(a===!0?pQ([m],x,s):a===null?m:m+"[]",u(b))}),!1}return g5(p)?!0:(e.append(pQ(g,m,s),u(p)),!1)}const f=[],d=Object.assign(kjt,{defaultVisitor:c,convertValue:u,isVisitable:g5});function h(p,m){if(!ke.isUndefined(p)){if(f.indexOf(p)!==-1)throw Error("Circular reference detected in "+m.join("."));f.push(p),ke.forEach(p,function(v,y){(!(ke.isUndefined(v)||v===null)&&i.call(e,v,ke.isString(y)?y.trim():y,m,d))===!0&&h(v,m?m.concat(y):[y])}),f.pop()}}if(!ke.isObject(t))throw new TypeError("data must be an object");return h(t),e}function mQ(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function TW(t,e){this._pairs=[],t&&SI(t,this,e)}const _1e=TW.prototype;_1e.append=function(e,n){this._pairs.push([e,n])};_1e.toString=function(e){const n=e?function(r){return e.call(this,r,mQ)}:mQ;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function Ajt(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function S1e(t,e,n){if(!e)return t;const r=n&&n.encode||Ajt,i=n&&n.serialize;let s;if(i?s=i(e,n):s=ke.isURLSearchParams(e)?e.toString():new TW(e,n).toString(r),s){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class Mjt{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ke.forEach(this.handlers,function(r){r!==null&&e(r)})}}const gQ=Mjt,C1e={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Njt=typeof URLSearchParams<"u"?URLSearchParams:TW,$jt=typeof FormData<"u"?FormData:null,Ijt=typeof Blob<"u"?Blob:null,Djt=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),Rjt=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),wu={isBrowser:!0,classes:{URLSearchParams:Njt,FormData:$jt,Blob:Ijt},isStandardBrowserEnv:Djt,isStandardBrowserWebWorkerEnv:Rjt,protocols:["http","https","file","blob","url","data"]};function Ojt(t,e){return SI(t,new wu.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return wu.isNode&&ke.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function Fjt(t){return ke.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Ljt(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function E1e(t){function e(n,r,i,s){let a=n[s++];const o=Number.isFinite(+a),l=s>=n.length;return a=!a&&ke.isArray(i)?i.length:a,l?(ke.hasOwnProp(i,a)?i[a]=[i[a],r]:i[a]=r,!o):((!i[a]||!ke.isObject(i[a]))&&(i[a]=[]),e(n,r,i[a],s)&&ke.isArray(i[a])&&(i[a]=Ljt(i[a])),!o)}if(ke.isFormData(t)&&ke.isFunction(t.entries)){const n={};return ke.forEachEntry(t,(r,i)=>{e(Fjt(r),i,n,0)}),n}return null}const Pjt={"Content-Type":void 0};function zjt(t,e,n){if(ke.isString(t))try{return(e||JSON.parse)(t),ke.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const CI={transitional:C1e,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=ke.isObject(e);if(s&&ke.isHTMLForm(e)&&(e=new FormData(e)),ke.isFormData(e))return i&&i?JSON.stringify(E1e(e)):e;if(ke.isArrayBuffer(e)||ke.isBuffer(e)||ke.isStream(e)||ke.isFile(e)||ke.isBlob(e))return e;if(ke.isArrayBufferView(e))return e.buffer;if(ke.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Ojt(e,this.formSerializer).toString();if((o=ke.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return SI(o?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),zjt(e)):e}],transformResponse:[function(e){const n=this.transitional||CI.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(e&&ke.isString(e)&&(r&&!this.responseType||i)){const a=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?Sn.from(o,Sn.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:wu.classes.FormData,Blob:wu.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};ke.forEach(["delete","get","head"],function(e){CI.headers[e]={}});ke.forEach(["post","put","patch"],function(e){CI.headers[e]=ke.merge(Pjt)});const kW=CI,Bjt=ke.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ujt=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(a){i=a.indexOf(":"),n=a.substring(0,i).trim().toLowerCase(),r=a.substring(i+1).trim(),!(!n||e[n]&&Bjt[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},vQ=Symbol("internals");function h1(t){return t&&String(t).trim().toLowerCase()}function zE(t){return t===!1||t==null?t:ke.isArray(t)?t.map(zE):String(t)}function Vjt(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const Wjt=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function EO(t,e,n,r,i){if(ke.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!ke.isString(e)){if(ke.isString(r))return e.indexOf(r)!==-1;if(ke.isRegExp(r))return r.test(e)}}function Gjt(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function Hjt(t,e){const n=ke.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,a){return this[r].call(this,e,i,s,a)},configurable:!0})})}class EI{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(o,l,u){const c=h1(l);if(!c)throw new Error("header name must be a non-empty string");const f=ke.findKey(i,c);(!f||i[f]===void 0||u===!0||u===void 0&&i[f]!==!1)&&(i[f||l]=zE(o))}const a=(o,l)=>ke.forEach(o,(u,c)=>s(u,c,l));return ke.isPlainObject(e)||e instanceof this.constructor?a(e,n):ke.isString(e)&&(e=e.trim())&&!Wjt(e)?a(Ujt(e),n):e!=null&&s(n,e,r),this}get(e,n){if(e=h1(e),e){const r=ke.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return Vjt(i);if(ke.isFunction(n))return n.call(this,i,r);if(ke.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=h1(e),e){const r=ke.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||EO(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(a){if(a=h1(a),a){const o=ke.findKey(r,a);o&&(!n||EO(r,r[o],o,n))&&(delete r[o],i=!0)}}return ke.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||EO(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return ke.forEach(this,(i,s)=>{const a=ke.findKey(r,s);if(a){n[a]=zE(i),delete n[s];return}const o=e?Gjt(s):String(s).trim();o!==s&&delete n[s],n[o]=zE(i),r[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return ke.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&ke.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[vQ]=this[vQ]={accessors:{}}).accessors,i=this.prototype;function s(a){const o=h1(a);r[o]||(Hjt(i,a),r[o]=!0)}return ke.isArray(e)?e.forEach(s):s(e),this}}EI.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ke.freezeMethods(EI.prototype);ke.freezeMethods(EI);const Hc=EI;function TO(t,e){const n=this||kW,r=e||n,i=Hc.from(r.headers);let s=r.data;return ke.forEach(t,function(o){s=o.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function T1e(t){return!!(t&&t.__CANCEL__)}function kS(t,e,n){Sn.call(this,t??"canceled",Sn.ERR_CANCELED,e,n),this.name="CanceledError"}ke.inherits(kS,Sn,{__CANCEL__:!0});function jjt(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Sn("Request failed with status code "+n.status,[Sn.ERR_BAD_REQUEST,Sn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const qjt=wu.isStandardBrowserEnv?function(){return{write:function(n,r,i,s,a,o){const l=[];l.push(n+"="+encodeURIComponent(r)),ke.isNumber(i)&&l.push("expires="+new Date(i).toGMTString()),ke.isString(s)&&l.push("path="+s),ke.isString(a)&&l.push("domain="+a),o===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Xjt(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Yjt(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function k1e(t,e){return t&&!Xjt(e)?Yjt(t,e):e}const Kjt=wu.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function i(s){let a=s;return e&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(a){const o=ke.isString(a)?i(a):a;return o.protocol===r.protocol&&o.host===r.host}}():function(){return function(){return!0}}();function Zjt(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Jjt(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,a;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),c=r[s];a||(a=u),n[i]=l,r[i]=u;let f=s,d=0;for(;f!==i;)d+=n[f++],f=f%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),u-a<e)return;const h=c&&u-c;return h?Math.round(d*1e3/h):void 0}}function yQ(t,e){let n=0;const r=Jjt(50,250);return i=>{const s=i.loaded,a=i.lengthComputable?i.total:void 0,o=s-n,l=r(o),u=s<=a;n=s;const c={loaded:s,total:a,progress:a?s/a:void 0,bytes:o,rate:l||void 0,estimated:l&&a&&u?(a-s)/l:void 0,event:i};c[e?"download":"upload"]=!0,t(c)}}const Qjt=typeof XMLHttpRequest<"u",eqt=Qjt&&function(t){return new Promise(function(n,r){let i=t.data;const s=Hc.from(t.headers).normalize(),a=t.responseType;let o;function l(){t.cancelToken&&t.cancelToken.unsubscribe(o),t.signal&&t.signal.removeEventListener("abort",o)}ke.isFormData(i)&&(wu.isStandardBrowserEnv||wu.isStandardBrowserWebWorkerEnv?s.setContentType(!1):s.setContentType("multipart/form-data;",!1));let u=new XMLHttpRequest;if(t.auth){const h=t.auth.username||"",p=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(h+":"+p))}const c=k1e(t.baseURL,t.url);u.open(t.method.toUpperCase(),S1e(c,t.params,t.paramsSerializer),!0),u.timeout=t.timeout;function f(){if(!u)return;const h=Hc.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),m={data:!a||a==="text"||a==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:h,config:t,request:u};jjt(function(v){n(v),l()},function(v){r(v),l()},m),u=null}if("onloadend"in u?u.onloadend=f:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(f)},u.onabort=function(){u&&(r(new Sn("Request aborted",Sn.ECONNABORTED,t,u)),u=null)},u.onerror=function(){r(new Sn("Network Error",Sn.ERR_NETWORK,t,u)),u=null},u.ontimeout=function(){let p=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const m=t.transitional||C1e;t.timeoutErrorMessage&&(p=t.timeoutErrorMessage),r(new Sn(p,m.clarifyTimeoutError?Sn.ETIMEDOUT:Sn.ECONNABORTED,t,u)),u=null},wu.isStandardBrowserEnv){const h=(t.withCredentials||Kjt(c))&&t.xsrfCookieName&&qjt.read(t.xsrfCookieName);h&&s.set(t.xsrfHeaderName,h)}i===void 0&&s.setContentType(null),"setRequestHeader"in u&&ke.forEach(s.toJSON(),function(p,m){u.setRequestHeader(m,p)}),ke.isUndefined(t.withCredentials)||(u.withCredentials=!!t.withCredentials),a&&a!=="json"&&(u.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&u.addEventListener("progress",yQ(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",yQ(t.onUploadProgress)),(t.cancelToken||t.signal)&&(o=h=>{u&&(r(!h||h.type?new kS(null,t,u):h),u.abort(),u=null)},t.cancelToken&&t.cancelToken.subscribe(o),t.signal&&(t.signal.aborted?o():t.signal.addEventListener("abort",o)));const d=Zjt(c);if(d&&wu.protocols.indexOf(d)===-1){r(new Sn("Unsupported protocol "+d+":",Sn.ERR_BAD_REQUEST,t));return}u.send(i||null)})},BE={http:Ejt,xhr:eqt};ke.forEach(BE,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const tqt={getAdapter:t=>{t=ke.isArray(t)?t:[t];const{length:e}=t;let n,r;for(let i=0;i<e&&(n=t[i],!(r=ke.isString(n)?BE[n.toLowerCase()]:n));i++);if(!r)throw r===!1?new Sn(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(ke.hasOwnProp(BE,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`);if(!ke.isFunction(r))throw new TypeError("adapter is not a function");return r},adapters:BE};function kO(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new kS(null,t)}function bQ(t){return kO(t),t.headers=Hc.from(t.headers),t.data=TO.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),tqt.getAdapter(t.adapter||kW.adapter)(t).then(function(r){return kO(t),r.data=TO.call(t,t.transformResponse,r),r.headers=Hc.from(r.headers),r},function(r){return T1e(r)||(kO(t),r&&r.response&&(r.response.data=TO.call(t,t.transformResponse,r.response),r.response.headers=Hc.from(r.response.headers))),Promise.reject(r)})}const xQ=t=>t instanceof Hc?t.toJSON():t;function hv(t,e){e=e||{};const n={};function r(u,c,f){return ke.isPlainObject(u)&&ke.isPlainObject(c)?ke.merge.call({caseless:f},u,c):ke.isPlainObject(c)?ke.merge({},c):ke.isArray(c)?c.slice():c}function i(u,c,f){if(ke.isUndefined(c)){if(!ke.isUndefined(u))return r(void 0,u,f)}else return r(u,c,f)}function s(u,c){if(!ke.isUndefined(c))return r(void 0,c)}function a(u,c){if(ke.isUndefined(c)){if(!ke.isUndefined(u))return r(void 0,u)}else return r(void 0,c)}function o(u,c,f){if(f in e)return r(u,c);if(f in t)return r(void 0,u)}const l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(u,c)=>i(xQ(u),xQ(c),!0)};return ke.forEach(Object.keys(Object.assign({},t,e)),function(c){const f=l[c]||i,d=f(t[c],e[c],c);ke.isUndefined(d)&&f!==o||(n[c]=d)}),n}const A1e="1.4.0",AW={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{AW[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const wQ={};AW.transitional=function(e,n,r){function i(s,a){return"[Axios v"+A1e+"] Transitional option '"+s+"'"+a+(r?". "+r:"")}return(s,a,o)=>{if(e===!1)throw new Sn(i(a," has been removed"+(n?" in "+n:"")),Sn.ERR_DEPRECATED);return n&&!wQ[a]&&(wQ[a]=!0,console.warn(i(a," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,a,o):!0}};function nqt(t,e,n){if(typeof t!="object")throw new Sn("options must be an object",Sn.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],a=e[s];if(a){const o=t[s],l=o===void 0||a(o,s,t);if(l!==!0)throw new Sn("option "+s+" must be "+l,Sn.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Sn("Unknown option "+s,Sn.ERR_BAD_OPTION)}}const v5={assertOptions:nqt,validators:AW},If=v5.validators;class MA{constructor(e){this.defaults=e,this.interceptors={request:new gQ,response:new gQ}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=hv(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&v5.assertOptions(r,{silentJSONParsing:If.transitional(If.boolean),forcedJSONParsing:If.transitional(If.boolean),clarifyTimeoutError:If.transitional(If.boolean)},!1),i!=null&&(ke.isFunction(i)?n.paramsSerializer={serialize:i}:v5.assertOptions(i,{encode:If.function,serialize:If.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a;a=s&&ke.merge(s.common,s[n.method]),a&&ke.forEach(["delete","get","head","post","put","patch","common"],p=>{delete s[p]}),n.headers=Hc.concat(a,s);const o=[];let l=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(l=l&&m.synchronous,o.unshift(m.fulfilled,m.rejected))});const u=[];this.interceptors.response.forEach(function(m){u.push(m.fulfilled,m.rejected)});let c,f=0,d;if(!l){const p=[bQ.bind(this),void 0];for(p.unshift.apply(p,o),p.push.apply(p,u),d=p.length,c=Promise.resolve(n);f<d;)c=c.then(p[f++],p[f++]);return c}d=o.length;let h=n;for(f=0;f<d;){const p=o[f++],m=o[f++];try{h=p(h)}catch(g){m.call(this,g);break}}try{c=bQ.call(this,h)}catch(p){return Promise.reject(p)}for(f=0,d=u.length;f<d;)c=c.then(u[f++],u[f++]);return c}getUri(e){e=hv(this.defaults,e);const n=k1e(e.baseURL,e.url);return S1e(n,e.params,e.paramsSerializer)}}ke.forEach(["delete","get","head","options"],function(e){MA.prototype[e]=function(n,r){return this.request(hv(r||{},{method:e,url:n,data:(r||{}).data}))}});ke.forEach(["post","put","patch"],function(e){function n(r){return function(s,a,o){return this.request(hv(o||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}MA.prototype[e]=n(),MA.prototype[e+"Form"]=n(!0)});const UE=MA;class MW{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const a=new Promise(o=>{r.subscribe(o),s=o}).then(i);return a.cancel=function(){r.unsubscribe(s)},a},e(function(s,a,o){r.reason||(r.reason=new kS(s,a,o),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new MW(function(i){e=i}),cancel:e}}}const rqt=MW;function iqt(t){return function(n){return t.apply(null,n)}}function sqt(t){return ke.isObject(t)&&t.isAxiosError===!0}const y5={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(y5).forEach(([t,e])=>{y5[e]=t});const aqt=y5;function M1e(t){const e=new UE(t),n=f1e(UE.prototype.request,e);return ke.extend(n,UE.prototype,e,{allOwnKeys:!0}),ke.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return M1e(hv(t,i))},n}const pi=M1e(kW);pi.Axios=UE;pi.CanceledError=kS;pi.CancelToken=rqt;pi.isCancel=T1e;pi.VERSION=A1e;pi.toFormData=SI;pi.AxiosError=Sn;pi.Cancel=pi.CanceledError;pi.all=function(e){return Promise.all(e)};pi.spread=iqt;pi.isAxiosError=sqt;pi.mergeConfig=hv;pi.AxiosHeaders=Hc;pi.formToJSON=t=>E1e(ke.isHTMLForm(t)?new FormData(t):t);pi.HttpStatusCode=aqt;pi.default=pi;const oqt=pi,lqt={class:"main"},uqt=pv('<div id="content" class="content" data-v-e1899c8c><h1 id="word" class="wordtitle" data-v-e1899c8c> stillwarter的歌词渲染器 <div class="aurora" data-v-e1899c8c><div class="aurora__item" data-v-e1899c8c></div><div class="aurora__item" data-v-e1899c8c></div><div class="aurora__item" data-v-e1899c8c></div><div class="aurora__item" data-v-e1899c8c></div></div></h1></div>',1),cqt=Zi({__name:"songs",setup(t){let e=0,n=0,r,i,s=[],a=[],o=1,l="",u=0,c=0,f=0,d=0,h=0,p={},m={};function g(S,C){l=S.slice(10,S.length),l.length||(l="........."),u=S.slice(1,6).split(":"),c=C.slice(1,6).split(":")}function v(){let S=c[0]-u[0],C=c[1]-u[1];return S*60+C}function y(){let S=0,C=0,_=new Date().getTime();m=()=>{if(e==1)cancelAnimationFrame(p);else if(s.length<l.length&&S%6==0&&!d)if(console.log("文字渲染"),s.push(l[C]),C++,r[0].childNodes[0].textContent=s.join(""),s.length==l.length){d=1,cancelAnimationFrame(p);let E=new Date().getTime();f=v()*1e3-(E-_)-110,setTimeout(()=>{S++,requestAnimationFrame(m)},f)}else S++,requestAnimationFrame(m);else d&&S%4==0?(s.pop(),r[0].childNodes[0].textContent=s.join(""),h=1,S++,requestAnimationFrame(m)):s.length==0&&h?(h=0,C=0,o++,d=0,g(a[o],a[o+1]),_=new Date().getTime(),S++,requestAnimationFrame(m)):(S++,requestAnimationFrame(m))},p=requestAnimationFrame(m)}function b(){oqt.get("https://api.injahow.cn/meting/?type=lrc&id=1411793721").then(S=>{a=S.data.split(`
`),g(a[o],a[o+1]),v(),y()})}function x(){console.log("暂停"),e=1,n=f-Math.round(i[0].currentTime*1e3)}function w(){r=document.getElementsByClassName("wordtitle"),i=document.getElementsByTagName("audio"),e==1?(e=0,setTimeout(()=>{requestAnimationFrame(m)},n+200)):b()}return(S,C)=>(De(),Re("div",lqt,[V("audio",{preload:"auto",src:"http://music.163.com/song/media/outer/url?id=1411793721.mp3",controls:"",onPause:x,onPlay:w},null,32),uqt]))}});const fqt=xs(cqt,[["__scopeId","data-v-e1899c8c"]]),dqt=`@vertex
fn main(@builtin(vertex_index) VertexIndex : u32) -> @builtin(position) vec4<f32> {
    var pos = array<vec2<f32>, 4>(
	    vec2<f32>(0.0, 0.5),
	    vec2<f32>(-0.5, -0.5),
	    vec2<f32>(0.5, -0.5),
        
        vec2<f32>(1.0, -1.0)
    );
    return vec4<f32>(pos[VertexIndex], 0.0, 1.0);
}`,hqt=`@fragment
fn main() -> @location(0) vec4<f32> {
    return vec4<f32>(1.0, 1.0, 1.0, 1.0);
}`,pqt={id:"cv"},mqt=Zi({__name:"basictriangle",setup(t){async function e(i){if(!navigator.gpu)throw new Error("你的浏览器不支持webgpu捏，请使用谷歌或edga浏览器的最新版本");const s=await navigator.gpu.requestAdapter({powerPreference:"high-performance"});if(!s)throw new Error("没有找到webgpu adapter代理捏");const a=await s.requestDevice(),o=i.getContext("webgpu"),l=navigator.gpu.getPreferredCanvasFormat?navigator.gpu.getPreferredCanvasFormat():o.getPreferredFormat(s),u=window.devicePixelRatio||1;i.width=i.clientWidth*u,i.height=i.clientHeight*u;const c={width:i.width,height:i.height};return o.configure({device:a,format:l,alphaMode:"opaque"}),{device:a,context:o,format:l,size:c}}async function n(i,s){const a={layout:"auto",vertex:{module:i.createShaderModule({code:dqt}),entryPoint:"main"},primitive:{topology:"triangle-strip"},fragment:{module:i.createShaderModule({code:hqt}),entryPoint:"main",targets:[{format:s}]}};return await i.createRenderPipelineAsync(a)}async function r(i,s,a){const o=i.createCommandEncoder(),u={colorAttachments:[{view:s.getCurrentTexture().createView(),clearValue:{r:0,g:0,b:0,a:1},loadOp:"clear",storeOp:"store"}]},c=o.beginRenderPass(u);c.setPipeline(a),c.draw(4),c.end(),i.queue.submit([o.finish()])}return Wl(()=>{async function i(){const s=document.getElementById("cv");if(!s)throw new Error("没有画布元素");const{device:a,context:o,format:l}=await e(s),u=await n(a,l);r(a,o,u)}i()}),(i,s)=>(De(),Re("canvas",pqt))}});const gqt=xs(mqt,[["__scopeId","data-v-51f59ae8"]]),vqt=`

let drawdemoindex = 0;
let drawdemoindexdelay = 1;
console.log(framelist.value.length)
// 动画生成
function drawdemo() {
  // log.value = "渲染关键帧...";

  if (
    drawdemoindex <= framelist.value.length - 1 &&
    drawdemoindexdelay % 20 == 0
  ) {
    clearcanvas();
    drawframe();
    drawdemoindex++;
    requestAnimationFrame(drawdemo);
  } else if (drawdemoindexdelay % 20 == 0) {
    drawdemoindex = 0;

    clearcanvas();
    drawframe();
    requestAnimationFrame(drawdemo);
  } else {
    requestAnimationFrame(drawdemo);
  }

  drawdemoindexdelay++;
}

/* 像素数据去重 */
function uniqueFunc(arr, uniId) {
  const res = new Map();
  return arr.filter((item) => !res.has(item[uniId]) && res.set(item[uniId], 1));
}

function drawframe() {
  const mypixel = document.getElementById("pixel");
  let tools = mypixel.getContext("2d");

  // const list = framelist.value[drawdemoindex].point;
  const list = JSON.parse(JSON.stringify(framelist.value[drawdemoindex].point));
  const endlist = uniqueFunc(list, "sort");

  for (const index in endlist) {
    console.log(endlist[index].color)
    if(endlist[index].color=="null"){
      tools.fillStyle="rgba(0,0,0,0)"
    }else{
      tools.fillStyle = endlist[index].color;
    }
    tools.fillRect(endlist[index].x * 10, endlist[index].y * 10, 10, 10);
  }
}

function clearcanvas() {
  const mypixel = document.getElementById("pixel");
  const width = parseInt(window.innerWidth / 2);
  mypixel.width = width;
}
drawdemo();
<\/script>
`;function yqt(t){console.log(t);const n=`<script> 
  let framelist={
    value:""
  }
  framelist.value=${JSON.stringify(t)}
  `;return console.log(n),n+vqt}const AS=t=>(sl("data-v-5a1fa36d"),t=t(),al(),t),bqt={class:"st-drawbox"},xqt={key:0,class:"drwastart"},wqt=AS(()=>V("div",{class:"btn"},"数据导入？",-1)),_qt=AS(()=>V("div",{class:"tips"},"tips: 这个玩意暂时就这些内容，如果有机会，会再完善下去。此外，请在pc端使用本功能，移动端并未进行ui适配。",-1)),Sqt=["onMousedown","onMouseover","onMouseup"],Cqt={key:0,class:"leftmeun"},Eqt={class:"funcbox"},Tqt={class:"item"},kqt={class:"frame"},Aqt=["onClick"],Mqt={key:0,style:{color:"red"}},Nqt={key:1},$qt={class:"addframebtn"},Iqt=AS(()=>V("p",null,"数据导出？",-1)),Dqt=AS(()=>V("p",null,"选择绘制尺寸",-1)),Rqt=AS(()=>V("div",{class:"tips"},"tips: 目前仅支持5px和30*30像素空间，自定义未支持捏",-1)),Oqt={class:"pixelnum",style:{display:"flex"}},Fqt=["onClick"],Lqt={class:"presets"},Pqt=["onClick"],zqt=pv('<div class="your" data-v-5a1fa36d><p class="lable" data-v-5a1fa36d>row:</p><input type="text" placeholder="自定义行数(x轴)" name="title" style="margin-right:10px;" data-v-5a1fa36d><p class="lable" data-v-5a1fa36d>col:</p><input type="text" placeholder="自定义列数(y轴)" name="title" data-v-5a1fa36d></div>',1),Bqt=Zi({__name:"pixeltool",setup(t){const e=Mt(1),n=Mt(0),r=Mt(5),i=Mt(null),s=Mt(null),a=Mt(null),o=Mt(["30*30（头像）"]),l=Mt(!1),u=Mt(null),c=Mt(0),d=Mt([{name:"关键帧",point:[]}]),h=Mt(null),p=Mt(null),m=Mt(!1),g=Mt(null);function v(){y(g),w()}function y(Ne){Ne.value.style.zIndex=0}function b(Ne){Ne.value.style.zIndex=10}const x=Mt(null);function w(){x.value.style.transform="scale(1)"}function S(){T=1,y(g),h.value.style.transform="scale(1)",setTimeout(()=>{C(),k()},100)}function C(){p.value.width=300,p.value.height=300}let _=0,E=1,T=1;function k(){if(_<=d.value.length-1&&E%20==0)$e(),Je(),_++,requestAnimationFrame(k);else if(E%20==0)_=0,$e(),Je(),requestAnimationFrame(k);else if(T)requestAnimationFrame(k);else return;E++}function M(){x.value.style.transform="scale(0)"}function A(){h.value.style.transform="scale(0)",b(g),T=0}function N(Ne){r.value=Ne}function $(Ne){e.value=0,M(),b(g),D(Ne)}function D(Ne){n.value=1;const ht=s.value;console.log(ht.offsetHeight,ht.offsetWidth),Ne==0&&(i.value=901,setTimeout(()=>{P()},10))}function P(){const Ne=s.value;Ne.offsetWidth,Ne.offsetHeight,console.log(i.value,r.value),i.value==901&&(u.value.style.width="310px",u.value.style.height="290px",u.value.style.transform="scale(2.5)")}let O=0;function B(Ne){const ht=a.value,Et=sessionStorage.getItem("endcolor");l.value?ht[Ne].style="background:null":ht[Ne].style=`background:${Et}`,O=1,ne(Ne)}function H(Ne){O&&B(Ne)}function te(){O=0}function q(){l.value=!l.value,l.value?sessionStorage.setItem("endcolor","null"):sessionStorage.setItem("endcolor","rgb(255, 0, 0)")}function Z(){m.value=!m.value}function ne(Ne){const ht=a.value,Et=parseInt(u.value.style.width);parseInt(u.value.style.height);const U=Et/parseInt(ht[Ne].offsetHeight),F={x:0,y:0};F.x=parseInt(Ne%U),F.y=parseInt(Ne/U),F.color=sessionStorage.getItem("endcolor"),F.sort=Ne,d.value[c.value].point.unshift(F),console.log(d.value[c.value].point)}function G(){if(d.value[c.value].point.length==0){alert("请先绘制图案");return}const Ne={name:"关键帧",point:[]};d.value.push(Ne),c.value=d.value.length-1,m.value||he()}function he(){const Ne=a.value;for(const ht of Ne)ht.style="background:null"}function ve(){he();const Ne=d.value[c.value],ht=a.value;for(const Et of Ne.point)ht[Et.sort].style=`background:${Et.color}`}function we(){if(d.value[c.value].point.length==0){alert("请先绘制图案");return}if(m.value||he(),d.value[c.value+1].point.length!=0){const Ne={name:"关键帧",point:[]};d.value.splice(c.value+1,0,Ne),c.value+=1}else c.value=d.value.length-1}function X(Ne){c.value!=Ne&&(c.value=Ne,setTimeout(()=>{ve()},10))}function ae(){if(d.value.length==1){alert("必选保留一个帧");return}else d.value.splice(c.value,1),c.value=0,ve()}function pe(){window.open("https://stillwarter.github.io/posts/pixeltool.html")}Mt("red");let j=Mt(1);Mt(0),Mt("玩玩画板吧"),j.value=ze();function ze(){const Ne=parseInt(window.innerWidth/2),ht=parseInt(window.innerHeight/2)-50,Et=parseInt(Ne/10),U=parseInt(ht/10);return Et*U}function $e(){C()}function nt(Ne,ht){const Et=new Map;return Ne.filter(U=>!Et.has(U[ht])&&Et.set(U[ht],1))}function Je(){let ht=document.getElementById("pixel").getContext("2d");const Et=JSON.parse(JSON.stringify(d.value[_].point)),U=nt(Et,"sort");console.log(Et);for(const F in U)ht.fillStyle=U[F].color,ht.fillRect(U[F].x*10,U[F].y*10,10,10)}Wl(()=>{});const Q=Ne=>`<!DOCTYPE html>

  <html lang="en">
    <head>
      <meta charset="utf-8">
      <meta name="author" content="stillwarter">
      <meta name="source" content="用的这位的code做canvas导出" codesrc="https://juejin.cn/post/7101981953213071373">
      <title>your canvas</title>
      <style>
        body{
          width:100vw;
          height: 100vh;
          display:flex;
          justify-content: center;
          align-items: center;
          overflow: hidden;
        }
      </style>

      ${yqt(Ne)}
    </head>

    <canvas id="pixel" width="1000" height="500">

    </canvas>

  </html>`;function Ie(){let Ne=d.value;const ht=Q(Ne);var Et=document.createElement("a"),U=window.URL.createObjectURL(new Blob([ht],{type:""}));Et.href=U,Et.download="drwatool-v1.0.0-catool.html",Et.click(),window.URL.revokeObjectURL(U)}return(Ne,ht)=>{const Et=IO("mycolorpicker");return De(),Re("div",bqt,[V("div",{class:"shadow",ref_key:"shadow",ref:g},[V("div",{class:"main",ref_key:"mainbox",ref:s},[e.value?(De(),Re("div",xqt,[V("div",{class:"btn",onClick:v},"开始绘制"),V("div",{class:"btn",onClick:pe},"查看演示"),wqt,_qt])):Rr("",!0),n.value?(De(),Re("div",{key:1,class:"drawboxs",ref_key:"drawboxs",ref:u},[(De(!0),Re(Dn,null,Pn(i.value,(U,F)=>(De(),Re("div",{class:"pixel",ref_for:!0,ref_key:"pixels",ref:a,onMousedown:be=>B(F),onMouseover:be=>H(F),onMouseup:be=>te(),key:F},null,40,Sqt))),128))],512)):Rr("",!0)],512),n.value?(De(),Re("div",Cqt,[Fh(Et),V("div",Eqt,[V("div",Tqt,[l.value?(De(),Re("p",{key:0,onClick:q},"橡皮（开启）")):(De(),Re("p",{key:1,onClick:q},"橡皮（关闭）")),m.value?(De(),Re("p",{key:3,onClick:Z}," 保留上一帧绘制路径（是） ")):(De(),Re("p",{key:2,onClick:Z}," 保留上一帧绘制路径（否） "))])]),V("div",kqt,[(De(!0),Re(Dn,null,Pn(d.value,(U,F)=>(De(),Re("div",{class:"item",key:F,onClick:be=>X(F)},[c.value==F?(De(),Re("p",Mqt,"当前帧")):(De(),Re("p",Nqt,"第"+bt(F+1)+"帧",1))],8,Aqt))),128))]),V("div",$qt,[V("p",{style:{"margin-right":"12px"},onClick:G},"增加帧"),c.value!=d.value.length-1?(De(),Re("p",{key:0,style:{"margin-right":"12px"},onClick:we}," 插入帧 ")):Rr("",!0),V("p",{onClick:ae},"删除当前帧")]),V("div",{class:"render"},[V("p",{style:{"margin-right":"12px"},onClick:S},"绘制预览"),V("p",{style:{"margin-right":"12px"},onClick:Ie},"绘制导出"),Iqt])])):Rr("",!0)],512),V("div",{class:"chosesize",ref_key:"chosesize",ref:x},[Dqt,Rqt,V("div",Oqt,[Hr(" 选择像素尺寸 "),(De(),Re(Dn,null,Pn([2,3,4,5],(U,F)=>V("p",{key:F,onClick:be=>N(U)},bt(U)+"px ",9,Fqt)),64)),V("p",null,"当前选择尺寸："+bt(r.value)+"px",1)]),V("div",Lqt,[(De(!0),Re(Dn,null,Pn(o.value,(U,F)=>(De(),Re("p",{key:F,onClick:be=>$(F)},bt(U),9,Pqt))),128))]),zqt],512),V("div",{class:"previewbox",ref_key:"previewcanvas",ref:h},[Hr(" 绘制预览 "),V("canvas",{id:"pixel",ref_key:"pixelbox",ref:p},null,512),V("div",{class:"btnbox"},[V("p",{style:{"margin-right":"12px"},onClick:Ie},"导出"),V("p",{onClick:A},"关闭")])],512)])}}});const Uqt=xs(Bqt,[["__scopeId","data-v-5a1fa36d"]]),MS=t=>(sl("data-v-cc69db4d"),t=t(),al(),t),Vqt={class:"mycolorpicker"},Wqt=MS(()=>V("div",{class:"showcolorbox"},null,-1)),Gqt=MS(()=>V("div",{class:"blackcolorbox"},null,-1)),Hqt=MS(()=>V("div",{class:"chosepoint"},null,-1)),jqt=[Wqt,Gqt,Hqt],qqt=MS(()=>V("div",{class:"linepicker"},null,-1)),Xqt=[qqt],Yqt={class:"numshow"},Kqt=MS(()=>V("div",{class:"endcolor"},null,-1)),Zqt=Zi({__name:"mycolorpicker",setup(t){let e=Mt("rgba(255,0,0,1)"),n=Mt("rgba(255,0,0,1)"),r=0;sessionStorage.setItem("endcolor","rgba(255,0,0,1)");function i(f,d){const h=document.querySelector(".colorline");if(f=="down"){r=1;return}if(r&&f=="move"){const p=parseInt(h.getBoundingClientRect().top);if(console.log(),d.clientY-p>=180){s(180);return}else{s(d.clientY-p);return}}if(f=="up"){r=0;return}if(f=="leave"){r=0;return}}function s(f){const d=document.querySelector(".linepicker");d.style=`top:${f}px`,a(f)}function a(f){const d=parseInt(f/30),h=f%30,p=document.querySelector(".maincolorbox");let m=255,g=0,v=0;d==0&&(m=255,g=0,v=parseInt(255/30)*h),d==1&&(m=255-parseInt(255/30)*h,g=0,v=255),d==2&&(m=0,g=parseInt(255/30)*h,v=255),d==3&&(m=0,g=255,v=255-parseInt(255/30)*h),d==4&&(m=parseInt(255/30)*h,g=255,v=0),d==5&&(m=255,g=255-parseInt(255/30)*h,v=0);const y=`rgba(${m},${g},${v},1)`;e.value=y,p.style=`background:${y}`}let o=0;function l(f,d){if(document.querySelector(".maincolorbox"),f=="down"){o=1,u(d.offsetX,d.offsetY);return}if(f=="move"&&o){setTimeout(()=>{u(d.offsetX,d.offsetY)},40);return}if(f=="up"&&o){o=0;return}if(f=="leave"){r=0;return}}function u(f,d){const h=document.querySelector(".chosepoint");h.style=`left:${f}px;top:${d}px; opacity: 1;`,setTimeout(()=>{c(f,d)},10)}function c(f,d){const h=[...e.value],p=[];for(const k in h){if(h[k]=="("){const M=parseInt(k)+1;p.push(M)}if(h[k]==")"){const M=parseInt(k)-1;p.push(M)}}const m=[...e.value].slice(p[0],p[1]).join("").split(",");let g=((255-m[0])/280).toFixed(3),v=((255-m[1])/280).toFixed(3),y=((255-m[2])/280).toFixed(3),b=(255/180).toFixed(3),x=(255/180).toFixed(3),w=(255/180).toFixed(3),S=255-Math.round(f*g+d*b),C=255-Math.round(f*v+d*x),_=255-Math.round(f*y+d*w);S<0&&(S=0),C<0&&(C=0),_<0&&(_=0),S>255&&(S=255),C>255&&(C=255),_>255&&(_=255);const E=`rgba(${S},${C},${_},1)`;n.value=E,sessionStorage.setItem("endcolor",E);const T=document.querySelector(".endcolor");T.style=`background:${E}`}return(f,d)=>(De(),Re("div",Vqt,[V("div",{class:"maincolorbox",onMousedown:d[0]||(d[0]=h=>l("down",h)),onMousemove:d[1]||(d[1]=h=>l("move",h)),onMouseup:d[2]||(d[2]=h=>l("up",h)),onMouseleave:d[3]||(d[3]=h=>l("leave",h))},jqt,32),V("div",{class:"colorline",onMousedown:d[4]||(d[4]=h=>i("down",h)),onMousemove:d[5]||(d[5]=h=>i("move",h)),onMouseup:d[6]||(d[6]=h=>i("up",h)),onMouseleave:d[7]||(d[7]=h=>i("leave",h))},Xqt,32),V("div",Yqt,bt(_r(n)),1),Kqt]))}});const Jqt=xs(Zqt,[["__scopeId","data-v-cc69db4d"]]),So=(t,e=0,n=1)=>t<e?e:t>n?n:t;class za{constructor(e=0,n=0){this.x=e,this.y=n}copy(){return new za(this.x,this.y)}add(e){return ASSERT(isVector2(e)),new za(this.x+e.x,this.y+e.y)}subtract(e){return ASSERT(isVector2(e)),new za(this.x-e.x,this.y-e.y)}multiply(e){return ASSERT(isVector2(e)),new za(this.x*e.x,this.y*e.y)}divide(e){return ASSERT(isVector2(e)),new za(this.x/e.x,this.y/e.y)}scale(e){return ASSERT(!isVector2(e)),new za(this.x*e,this.y*e)}length(){return this.lengthSquared()**.5}lengthSquared(){return this.x**2+this.y**2}distance(e){return this.distanceSquared(e)**.5}distanceSquared(e){return(this.x-e.x)**2+(this.y-e.y)**2}normalize(e=1){const n=this.length();return n?this.scale(e/n):new za(0,e)}clampLength(e=1){const n=this.length();return n>e?this.scale(e/n):this}dot(e){return ASSERT(isVector2(e)),this.x*e.x+this.y*e.y}cross(e){return ASSERT(isVector2(e)),this.x*e.y-this.y*e.x}angle(){return Math.atan2(this.x,this.y)}setAngle(e=0,n=1){return this.x=n*Math.sin(e),this.y=n*Math.cos(e),this}rotate(e){const n=Math.cos(e),r=Math.sin(e);return new za(this.x*n-this.y*r,this.x*r+this.y*n)}direction(){return abs(this.x)>abs(this.y)?this.x<0?3:1:this.y<0?2:0}invert(){return new za(this.y,-this.x)}floor(){return new za(Math.floor(this.x),Math.floor(this.y))}area(){return abs(this.x*this.y)}lerp(e,n){return ASSERT(isVector2(e)),this.add(e.subtract(this).scale(So(n)))}arrayCheck(e){return this.x>=0&&this.y>=0&&this.x<e.x&&this.y<e.y}toString(e=3){if(debug)return`(${(this.x<0?"":" ")+this.x.toFixed(e)},${(this.y<0?"":" ")+this.y.toFixed(e)} )`}}class na{constructor(e=1,n=1,r=1,i=1){this.r=e,this.g=n,this.b=r,this.a=i}copy(){return new na(this.r,this.g,this.b,this.a)}add(e){return new na(this.r+e.r,this.g+e.g,this.b+e.b,this.a+e.a)}subtract(e){return new na(this.r-e.r,this.g-e.g,this.b-e.b,this.a-e.a)}multiply(e){return new na(this.r*e.r,this.g*e.g,this.b*e.b,this.a*e.a)}divide(e){return new na(this.r/e.r,this.g/e.g,this.b/e.b,this.a/e.a)}scale(e,n=e){return new na(this.r*e,this.g*e,this.b*e,this.a*n)}clamp(){return new na(So(this.r),So(this.g),So(this.b),So(this.a))}lerp(e,n){return this.add(e.subtract(this).scale(So(n)))}setHSLA(e=0,n=0,r=1,i=1){const s=r<.5?r*(1+n):r+n-r*n,a=2*r-s,o=(l,u,c)=>(c=(c%1+1)%1)<1/6?l+(u-l)*6*c:c<1/2?u:c<2/3?l+(u-l)*(2/3-c)*6:l;return this.r=o(a,s,e+1/3),this.g=o(a,s,e),this.b=o(a,s,e-1/3),this.a=i,this}getHSLA(){const e=So(this.r),n=So(this.g),r=So(this.b),i=So(this.a),s=Math.max(e,n,r),a=Math.min(e,n,r),o=(s+a)/2;let l=0,u=0;if(s!=a){let c=s-a;u=o>.5?c/(2-s-a):c/(s+a),e==s?l=(n-r)/c+(n<r?6:0):n==s?l=(r-e)/c+2:r==s&&(l=(e-n)/c+4)}return[l/6,u,o,i]}mutate(e=.05,n=0){return new na(this.r+rand(e,-e),this.g+rand(e,-e),this.b+rand(e,-e),this.a+rand(n,-n)).clamp()}toString(e=1){const n=r=>((r=r*255|0)<16?"0":"")+r.toString(16);return"#"+n(this.r)+n(this.g)+n(this.b)+(e?n(this.a):"")}setHex(e){const n=r=>So(parseInt(e.slice(r,r+2),16)/255);return this.r=n(1),this.g=n(3),this.b=n(5),this.a=e.length>7?n(7):1,this}rgbaInt(){const e=a=>So(a)*255|0,n=e(this.r),r=e(this.g)<<8,i=e(this.b)<<16,s=e(this.a)<<24;return n+r+i+s}}const xg=3553,Qqt=9728,eXt=10240,tXt=10241,nXt=10242,rXt=10243,_Q=33071,iXt=35632,sXt=35633,aXt=35713,oXt=35714,lXt=60,TI=(t=0,e)=>t.x==null?new za(t,e??t):new za(t.x,t.y);let AO=TI();const SQ=(t,e)=>t<e?t:e;let CQ=TI(1920,1200);TI();const uXt=(t,e=0,n=1)=>t<e?e:t>n?n:t,cXt=(t,e=0,n=1)=>e+uXt(t)*(n-e);let br,Mc,Jh,Rf,a0,Gr,b5=0,lE=[],fXt=0,N1e,NA,$1e,Of=1;N1e=10;function dXt(){yXt(),bXt()}function hXt(){pXt(),xXt(),mXt(),gXt();let t=0,e;n();function n(r=0){let i=r-t;if(t=r,e=cXt(.05,e,1e3/(i||1)),AO.x){br.width=AO.x,br.height=AO.y;const s=innerWidth/innerHeight,a=br.width/br.height;(a0||br).style.width=br.style.width=Jh.style.width=s<a?"100%":"",(a0||br).style.height=br.style.height=Jh.style.height=s<a?"":"100%"}else br.width=SQ(innerWidth,CQ.x),br.height=SQ(innerHeight,CQ.y);Jh.width=br.width,Jh.height=br.height,dXt(),vXt();{Rf.textAlign="right",Rf.textBaseline="top",Rf.font="1em monospace",Rf.fillStyle="#000";const s="test v0.0.1 / 0 / by stiillwarter / "+e.toFixed(1)+" GL";Rf.fillText(s,br.width-3,3),Rf.fillStyle="#fff",Rf.fillText(s,br.width-2,2)}requestAnimationFrame(n)}}function pXt(){const t="margin:0;overflow:hidden;background:#000;touch-action:none;user-select:none;-webkit-user-select:none";document.body.style=t,document.body.appendChild(br=document.createElement("canvas")),Mc=br.getContext("2d")}function mXt(){document.body.appendChild(Jh=document.createElement("canvas")),Rf=Jh.getContext("2d")}function gXt(){const t="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)";(a0||br).style=br.style=Jh.style=t}function vXt(){lE.filter(e=>e.collideSolidObjects);const t=e=>{if(!e.destroyed){e.update();for(const n of e.children)t(n)}};for(const e of lE)e.parent||t(e);lE=lE.filter(e=>!e.destroyed),b5=++fXt/lXt}let MO={r:.1,g:.2,b:.1,a:1};$1e=new na(MO.r,MO.g,MO.b);NA=new na(.1,.1,.2);let p1=0,NO=1,$O=0;function yXt(){const t=Mc.fillStyle=Mc.createLinearGradient(0,0,0,br.height);t.addColorStop(0,NA),t.addColorStop(1,$1e),Mc.fillRect(0,0,br.width,br.height),NO&&(p1+=1e-4),p1>=.8&&(NO=0,$O=1),$O&&(p1-=1e-4),p1<=.1&&(NO=1,$O=0),NA=new na(.1,.1,p1)}function bXt(){Of=N1e;const t=9;for(let e=1e3;e--;){let n=is(6,1),r=is()<.9?is(5):is(99,9),i=new na().setHSLA(is(.2,-.3),is()**9,is(1,.5),is(.9,.3));e<t&&(n=is()**3*99+9,r=is(5),i=new na().setHSLA(is(),is(),is(1,.5)).add(NA.scale(.5)).clamp());const s=200,a=br.width+2*s,o=br.height+2*s,l=TI((is(a)+b5*r)%a-s,(is(o)+b5*r*is())%o-s);Mc.fillStyle=i,n<9?Mc.fillRect(l.x,l.y,n,n):Mc.beginPath(Mc.fill(Mc.arc(l.x,l.y,n,0,9)))}}function xXt(){a0=document.createElement("canvas"),Gr=a0.getContext("webgl",{antialias:!1}),wXt(null),document.body.appendChild(a0),_Xt("precision highp float;uniform mat4 m;attribute vec2 p,t;attribute vec4 c,a;varying vec4 v,d,e;void main(){gl_Position=m*vec4(p,1,1);v=vec4(t,p);d=c;e=a;}","precision highp float;varying vec4 v,d,e;uniform sampler2D s;void main(){gl_FragColor=texture2D(s,v.xy)*d+e;}"),Gr.createBuffer()}function wXt(t){const e=Gr.createTexture();Gr.bindTexture(xg,e),t&&t.width&&Gr.texImage2D(xg,0,gl_RGBA,gl_RGBA,gl_UNSIGNED_BYTE,t);const n=Qqt;return Gr.texParameteri(xg,tXt,n),Gr.texParameteri(xg,eXt,n),Gr.texParameteri(xg,nXt,_Q),Gr.texParameteri(xg,rXt,_Q),e}function _Xt(t,e){const n=Gr.createProgram();if(Gr.attachShader(n,EQ(t,sXt)),Gr.attachShader(n,EQ(e,iXt)),Gr.linkProgram(n),!Gr.getProgramParameter(n,oXt))throw Gr.getProgramInfoLog(n);return n}function EQ(t,e){const n=Gr.createShader(e);if(Gr.shaderSource(n,t),Gr.compileShader(n),!Gr.getShaderParameter(n,aXt))throw Gr.getShaderInfoLog(n);return n}const is=(t=1,e=0)=>(Of^=Of<<13,Of^=Of>>>17,Of^=Of<<5,e+(t-e)*SXt(Of%1e9)/1e9),SXt=t=>t<0?-t:t,CXt=Zi({__name:"littlejstart",setup(t){return Wl(()=>{hXt()}),(e,n)=>(De(),Re("div"))}}),EXt={...NQ,Layout:fxe,enhanceApp({app:t,router:e,siteData:n}){t.component("tags",Sxe),t.component("archives",$xe),t.component("home",Wxe),t.component("teancherandfrends",d_e),t.component("plan",H2e),t.component("log",dSe),t.component("threeDemo",V3e),t.component("gwycomDemo",D$e),t.component("tensorflowDemo",SHt),t.component("webgpudemo",THt),t.component("littlejstart",CXt),t.component("resume",GHt),t.component("songs",fqt),t.component("basictriangle",gqt),t.component("pixelDemo",zHt),t.component("pixeltool",Uqt),t.component("mycolorpicker",Jqt)}};function I1e(t){if(t.extends){const e=I1e(t.extends);return{...e,...t,async enhanceApp(n){e.enhanceApp&&await e.enhanceApp(n),t.enhanceApp&&await t.enhanceApp(n)}}}return t}const o0=I1e(EXt),TXt=Zi({name:"VitePressApp",setup(){const{site:t}=x5();return Wl(()=>{B1e(()=>{document.documentElement.lang=t.value.lang,document.documentElement.dir=t.value.dir})}),U1e(),V1e(),W1e(),o0.setup&&o0.setup(),()=>ko(o0.Layout)}});async function kXt(){const t=MXt(),e=AXt();e.provide(G1e,t);const n=H1e(t.route);return e.provide(j1e,n),e.component("Content",q1e),e.component("ClientOnly",X1e),Object.defineProperties(e.config.globalProperties,{$frontmatter:{get(){return n.frontmatter.value}},$params:{get(){return n.page.value.params}}}),o0.enhanceApp&&await o0.enhanceApp({app:e,router:t,siteData:Y1e}),{app:e,router:t,data:n}}function AXt(){return K1e(TXt)}function MXt(){let t=DO,e;return Z1e(n=>{let r=J1e(n);return t&&(e=r),(t||e===r)&&(r=r.replace(/\.js$/,".lean.js")),DO&&(t=!1),Q1e(()=>import(r),[])},o0.NotFound)}DO&&kXt().then(({app:t,router:e,data:n})=>{e.go().then(()=>{z1e(e.route,n.site),t.mount("#app")})});export{kXt as createApp};
